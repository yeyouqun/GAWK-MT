\input texinfo   @c -*-texinfo-*-
@c vim: filetype=texinfo
@c %**start of header (This is for running Texinfo on a region.)
@setfilename gawk.info
@settitle The GNU Awk User's Guide
@c %**end of header (This is for running Texinfo on a region.)

@dircategory Text creation and manipulation
@direntry
* Gawk: (gawk).                 A text scanning and processing language.
@end direntry
@dircategory Individual utilities
@direntry
* awk: (gawk)Invoking gawk.                     Text scanning and processing.
@end direntry

@c Enable better indexing, requires texindex from Texinfo 6 or later.
@tex
\global\usebracesinindexestrue
@end tex

@ifset FOR_PRINT
@tex
\gdef\xrefprintnodename#1{``#1''}
@end tex
@end ifset

@ifclear FOR_PRINT
@c With early 2014 texinfo.tex, restore PDF links and colors
@tex
\gdef\linkcolor{0.5 0.09 0.12} % Dark Red
\gdef\urlcolor{0.5 0.09 0.12} % Also
\global\urefurlonlylinktrue
@end tex
@end ifclear

@ifnotdocbook
@set BULLET @bullet{}
@set MINUS @minus{}
@end ifnotdocbook

@ifdocbook
@set BULLET
@set MINUS
@end ifdocbook

@set xref-automatic-section-title

@c The following information should be updated here only!
@c This sets the edition of the document, the version of gawk it
@c applies to and all the info about who's publishing this edition

@c These apply across the board.
@set UPDATE-MONTH August, 2016
@set VERSION 4.1
@set PATCHLEVEL 4

@set GAWKINETTITLE TCP/IP Internetworking with @command{gawk}
@ifset FOR_PRINT
@set TITLE Effective awk Programming
@end ifset
@ifclear FOR_PRINT
@set TITLE GAWK: Effective AWK Programming
@end ifclear
@set SUBTITLE A User's Guide for GNU Awk
@set EDITION 4.1

@iftex
@set DOCUMENT ‰π¶
@set CHAPTER Á´†
@set APPENDIX appendix
@set SECTION Â∞èËäÇ
@set SUBSECTION Â≠êÂ∞èËäÇ
@set DARKCORNER @inmargin{@image{lflashlight,1cm}, @image{rflashlight,1cm}}
@set COMMONEXT (c.e.)
@set PAGE page
@end iftex
@ifinfo
@set DOCUMENT Info file
@set CHAPTER major node
@set APPENDIX major node
@set SECTION minor node
@set SUBSECTION node
@set DARKCORNER (d.c.)
@set COMMONEXT (c.e.)
@set PAGE screen
@end ifinfo
@ifhtml
@set DOCUMENT ÁΩëÈ°µ
@set CHAPTER Á´†
@set APPENDIX appendix
@set SECTION Â∞èËäÇ
@set SUBSECTION Â≠êÂ∞èËäÇ
@set DARKCORNER (d.c.)
@set COMMONEXT (c.e.)
@set PAGE screen
@end ifhtml
@ifdocbook
@set DOCUMENT book
@set CHAPTER Á´†
@set APPENDIX appendix
@set SECTION Â∞èËäÇ
@set SUBSECTION Â≠êÂ∞èËäÇ
@set DARKCORNER (d.c.)
@set COMMONEXT (c.e.)
@set PAGE page
@end ifdocbook
@ifxml
@set DOCUMENT üå≤
@set CHAPTER Á´†
@set APPENDIX appendix
@set SECTION Â∞èËäÇ
@set SUBSECTION Â≠êÂ∞èËäÇ
@set DARKCORNER (d.c.)
@set COMMONEXT (c.e.)
@set PAGE page
@end ifxml
@ifplaintext
@set DOCUMENT book
@set CHAPTER Á´†
@set APPENDIX appendix
@set SECTION Â∞èËäÇ
@set SUBSECTION Â≠êÂ∞èËäÇ
@set DARKCORNER (d.c.)
@set COMMONEXT (c.e.)
@set PAGE page
@end ifplaintext

@ifdocbook
@c empty on purpose
@set PART1
@set PART2
@set PART3
@set PART4
@end ifdocbook

@ifnotdocbook
@set PART1 Á¨¨‰∏ÄÈÉ®ÂàÜ:@*
@set PART2 Á¨¨‰∫åÈÉ®ÂàÜ:@*
@set PART3 Á¨¨‰∏âÈÉ®ÂàÜ:@*
@set PART4 Á¨¨ÂõõÈÉ®ÂàÜ:@*
@end ifnotdocbook

@c some special symbols
@iftex
@set LEQ @math{@leq}
@set PI @math{@pi}
@end iftex
@ifdocbook
@set LEQ @inlineraw{docbook, &le;}
@set PI @inlineraw{docbook, &pgr;}
@end ifdocbook
@ifnottex
@ifnotdocbook
@set LEQ <=
@set PI @i{pi}
@end ifnotdocbook
@end ifnottex

@ifnottex
@ifnotdocbook
@macro ii{text}
@i{\text\}
@end macro
@end ifnotdocbook
@end ifnottex

@ifdocbook
@macro ii{text}
@inlineraw{docbook,<lineannotation>\text\</lineannotation>}
@end macro
@end ifdocbook

@ifclear FOR_PRINT
@set FN Êñá‰ª∂Âêç
@set FFN Êñá‰ª∂Âêç
@set DF Êï∞ÊçÆÊñá‰ª∂
@set DDF Êï∞ÊçÆÊñá‰ª∂
@set PVERSION ÁâàÊú¨
@end ifclear
@ifset FOR_PRINT
@set FN Êñá‰ª∂Âêç
@set FFN Êñá‰ª∂Âêç
@set DF Êï∞ÊçÆÊñá‰ª∂
@set DDF Datafile
@set PVERSION ÁâàÊú¨
@end ifset

@c For HTML, spell out email addresses, to avoid problems with
@c address harvesters for spammers.
@ifhtml
@macro EMAIL{real,spelled}
``\spelled\''
@end macro
@end ifhtml
@ifnothtml
@macro EMAIL{real,spelled}
@email{\real\}
@end macro
@end ifnothtml

@c Indexing macros
@ifinfo

@macro cindexawkfunc{name}
@cindex @code{\name\}
@end macro

@macro cindexgawkfunc{name}
@cindex @code{\name\}
@end macro

@end ifinfo

@ifnotinfo

@macro cindexawkfunc{name}
@cindex @code{\name\()} function
@end macro

@macro cindexgawkfunc{name}
@cindex @code{\name\()} function (@command{gawk})
@end macro
@end ifnotinfo

@ignore
Some comments on the layout for TeX.
1. Use at least texinfo.tex 2016-02-05.07.
@end ignore

@c merge the function and variable indexes into the concept index
@ifinfo
@synindex fn cp
@synindex vr cp
@end ifinfo
@iftex
@syncodeindex fn cp
@syncodeindex vr cp
@end iftex
@ifxml
@syncodeindex fn cp
@syncodeindex vr cp
@end ifxml
@ifdocbook
@synindex fn cp
@synindex vr cp
@end ifdocbook

@c If "finalout" is commented out, the printed output will show
@c black boxes that mark lines that are too long.  Thus, it is
@c unwise to comment it out when running a master in case there are
@c overfulls which are deemed okay.

@iftex
@finalout
@end iftex

@copying
@docbook
<para>
&ldquo;To boldly go where no man has gone before&rdquo; is a
Registered Trademark of Paramount Pictures Corporation.</para>

<para>Published by:</para>

<literallayout class="normal">Free Software Foundation
51 Franklin Street, Fifth Floor
Boston, MA  02110-1301 USA
Phone: +1-617-542-5942
Fax: +1-617-542-2652
Email: <email>gnu@@gnu.org</email>
URL: <ulink url="http://www.gnu.org">http://www.gnu.org/</ulink></literallayout>

<literallayout class="normal">Copyright &copy; 1989, 1991, 1992, 1993, 1996&ndash;2005, 2007, 2009&ndash;2016
Free Software Foundation, Inc.
All Rights Reserved.</literallayout>
@end docbook

@ifnotdocbook
Copyright @copyright{} 1989, 1991, 1992, 1993, 1996--2005, 2007, 2009--2016 @*
Free Software Foundation, Inc.
@end ifnotdocbook
@sp 2

This is Edition @value{EDITION} of @cite{@value{TITLE}: @value{SUBTITLE}},
for the @value{VERSION}.@value{PATCHLEVEL} (or later) version of the GNU
implementation of AWK.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being ``GNU General Public License'', with the
Front-Cover Texts being ``A GNU Manual'', and with the Back-Cover Texts
as in (a) below.
@ifclear FOR_PRINT
A copy of the license is included in the section entitled
``GNU Free Documentation License''.
@end ifclear
@ifset FOR_PRINT
A copy of the license
may be found on the Internet at
@uref{http://www.gnu.org/software/gawk/manual/html_node/GNU-Free-Documentation-License.html,
the GNU Project's website}.
@end ifset

@enumerate a
@item
The FSF's Back-Cover Text is: ``You have the freedom to
copy and modify this GNU manual.''
@end enumerate
@end copying

@c Comment out the "smallbook" for technical review.  Saves
@c considerable paper.  Remember to turn it back on *before*
@c starting the page-breaking work.

@c 4/2002: Karl Berry recommends commenting out this and the
@c `@setchapternewpage odd', and letting users use `texi2dvi -t'
@c if they want to waste paper.
@c @smallbook


@c Uncomment this for the release.  Leaving it off saves paper
@c during editing and review.
@setchapternewpage odd

@shorttitlepage GNU Awk
@titlepage
@title @value{TITLE}
@subtitle @value{SUBTITLE}
@subtitle Edition @value{EDITION}
@subtitle @value{UPDATE-MONTH}
@author Arnold D. Robbins

@ifnotdocbook
@c Include the Distribution inside the titlepage environment so
@c that headings are turned off.  Headings on and off do not work.

@page
@vskip 0pt plus 1filll
``To boldly go where no man has gone before'' is a
Registered Trademark of Paramount Pictures Corporation. @*
@c sorry, i couldn't resist
@sp 3
Published by:
@sp 1

Free Software Foundation @*
51 Franklin Street, Fifth Floor @*
Boston, MA  02110-1301 USA @*
Phone: +1-617-542-5942 @*
Fax: +1-617-542-2652 @*
Email: @email{gnu@@gnu.org} @*
URL: @uref{http://www.gnu.org/} @*

@c This one is correct for gawk 3.1.0 from the FSF
ISBN 1-882114-28-0 @*
@sp 2
@insertcopying
@end ifnotdocbook
@end titlepage

@c Thanks to Bob Chassell for directions on doing dedications.
@iftex
@headings off
@page
@w{ }
@sp 9
@center @i{To my parents, for their love, and for the wonderful example they set for me.}
@sp 1
@center @i{To my wife, Miriam, for making me complete.
Thank you for building your life together with me.}
@sp 1
@center @i{To our children, Chana, Rivka, Nachum, and Malka, for enrichening our lives in innumerable ways.}
@sp 1
@w{ }
@page
@w{ }
@page
@headings on
@end iftex

@docbook
<dedication>
<para>To my parents, for their love, and for the wonderful
example they set for me.</para>
<para>To my wife Miriam, for making me complete.
Thank you for building your life together with me.</para>
<para>To our children Chana, Rivka, Nachum and Malka,
for enrichening our lives in innumerable ways.</para>
</dedication>
@end docbook

@iftex
@headings off
@evenheading @thispage@ @ @ @strong{@value{TITLE}} @| @|
@oddheading  @| @| @strong{@thischapter}@ @ @ @thispage
@end iftex

@ifnottex
@ifnotxml
@ifnotdocbook
@node Top
@top General Introduction
@c ÂâçË®Ä node should come right after the Top
@c node, in `unnumbered' sections, then the chapter, `What is gawk'.
@c Licensing nodes are appendices, they're not central to AWK.

This file documents @command{awk}, a program that you can use to select
particular records in a file and perform operations upon them.

@insertcopying

@end ifnotdocbook
@end ifnotxml
@end ifnottex

@menu
* Á¨¨‰∏âÁâàÂâçË®Ä::                      ÂÖ≥‰∫éÊú¨@value{DOCUMENT}ÁöÑ‰∏Ä‰∫õËØù.
* Á¨¨ÂõõÁâàÂâçË®Ä::                      ÂÖ∂‰ªñ‰∏Ä‰∫õËØù.
* ÂâçË®Ä::                        Êú¨@value{DOCUMENT}ÁöÑÂÜÖÂÆπ; ÂéÜÂè≤Ê¶ÇËø∞ÂíåËá¥Ë∞¢.
* ËØëÂ∫è::                        ËØëËÄÖÁöÑËØù.
* Getting Started::                A basic introduction to using
                                   @command{awk}. How to run an @command{awk}
                                   program. Command-line syntax.
* Invoking Gawk::                  How to run @command{gawk}.
* Regexp::                         All about matching things using regular
                                   expressions.
* Reading Files::                  How to read files and manipulate fields.
* Printing::                       How to print using @command{awk}. Describes
                                   the @code{print} and @code{printf}
                                   statements. Also describes redirection of
                                   output.
* Expressions::                    Expressions are the basic building blocks
                                   of statements.
* Patterns and Actions::           Overviews of patterns and actions.
* Arrays::                         The description and use of arrays. Also
                                   includes array-oriented control statements.
* Functions::                      Built-in and user-defined functions.
* Library Functions::              A Library of @command{awk} Functions.
* Sample Programs::                Many @command{awk} programs with complete
                                   explanations.
* Advanced Features::              Stuff for advanced users, specific to
                                   @command{gawk}.
* Internationalization::           Getting @command{gawk} to speak your
                                   language.
* Debugger::                       The @command{gawk} debugger.
* Arbitrary Precision Arithmetic:: Arbitrary precision arithmetic with
                                   @command{gawk}.
* Dynamic Extensions::             Adding new built-in functions to
                                   @command{gawk}.
* Language History::               The evolution of the @command{awk}
                                   language.
* Installation::                   Installing @command{gawk} under various
                                   operating systems.
* Notes::                          Notes about adding things to @command{gawk}
                                   and possible future work.
* Basic Concepts::                 A very quick introduction to programming
                                   concepts.
* Glossary::                       An explanation of some unfamiliar terms.
* Copying::                        Your right to copy and distribute
                                   @command{gawk}.
* GNU Free Documentation License:: The license for this @value{DOCUMENT}.
* Index::                          Concept and Variable Index.

@detailmenu
* History::                             @command{gawk} ‰∏é @command{awk} ÁöÑÂéÜÂè≤„ÄÇ
* Names::                               @command{awk} ÁöÑÂà´Âêç„ÄÇ
* This Manual::                         ‰ΩøÁî®Êú¨@value{DOCUMENT}ÔºõÂåÖÊã¨‰Ω†ÂèØ‰ª•‰ΩøÁî®ÁöÑËæìÂÖ•Êñá‰ª∂Ê†∑‰æã„ÄÇ
* Conventions::                         ÊéíÁâàÁ∫¶ÂÆö„ÄÇ
* Manual History::                      Brief history of the GNU project and
                                        this @value{DOCUMENT}.
* How To Contribute::                   Helping to save the world.
* Acknowledgments::                     Acknowledgments.
* Running gawk::                        How to run @command{gawk} programs;
                                        includes command-line syntax.
* One-shot::                            Running a short throwaway
                                        @command{awk} program.
* Read Terminal::                       Using no input files (input from the
                                        keyboard instead).
* Long::                                Putting permanent @command{awk}
                                        programs in files.
* Executable Scripts::                  Making self-contained @command{awk}
                                        programs.
* Comments::                            Adding documentation to @command{gawk}
                                        programs.
* Quoting::                             More discussion of shell quoting
                                        issues.
* DOS Quoting::                         Quoting in Windows Batch Files.
* Sample Data Files::                   Sample data files for use in the
                                        @command{awk} programs illustrated in
                                        this @value{DOCUMENT}.
* Very Simple::                         A very simple example.
* Two Rules::                           A less simple one-line example using
                                        two rules.
* More Complex::                        A more complex example.
* Statements/Lines::                    Subdividing or combining statements
                                        into lines.
* Other Features::                      Other Features of @command{awk}.
* When::                                When to use @command{gawk} and when to
                                        use other things.
* Intro Summary::                       Summary of the introduction.
* Command Line::                        How to run @command{awk}.
* Options::                             Command-line options and their
                                        meanings.
* Other Arguments::                     Input file names and variable
                                        assignments.
* Naming Standard Input::               How to specify standard input with
                                        other files.
* Environment Variables::               The environment variables
                                        @command{gawk} uses.
* AWKPATH Variable::                    Searching directories for
                                        @command{awk} programs.
* AWKLIBPATH Variable::                 Searching directories for
                                        @command{awk} shared libraries.
* Other Environment Variables::         The environment variables.
* Exit Status::                         @command{gawk}'s exit status.
* Include Files::                       Including other files into your
                                        program.
* Loading Shared Libraries::            Loading shared libraries into your
                                        program.
* Obsolete::                            Obsolete Options and/or features.
* Undocumented::                        Undocumented Options and Features.
* Invoking Summary::                    Invocation summary.
* Regexp Usage::                        How to Use Regular Expressions.
* Escape Sequences::                    How to write nonprinting characters.
* Regexp Operators::                    Regular Expression Operators.
* Bracket Expressions::                 What can go between @samp{[...]}.
* Leftmost Longest::                    How much text matches.
* Computed Regexps::                    Using Dynamic Regexps.
* GNU Regexp Operators::                Operators specific to GNU software.
* Case-sensitivity::                    How to do case-insensitive matching.
* Regexp Summary::                      Regular expressions summary.
* Records::                             Controlling how data is split into
                                        records.
* awk split records::                   How standard @command{awk} splits
                                        records.
* gawk split records::                  How @command{gawk} splits records.
* Fields::                              An introduction to fields.
* Nonconstant Fields::                  Nonconstant Field Numbers.
* Changing Fields::                     Changing the Contents of a Field.
* Field Separators::                    The field separator and how to change
                                        it.
* Default Field Splitting::             How fields are normally separated.
* Regexp Field Splitting::              Using regexps as the field separator.
* Single Character Fields::             Making each character a separate
                                        field.
* Command Line Field Separator::        Setting @code{FS} from the command
                                        line.
* Full Line Fields::                    Making the full line be a single
                                        field.
* Field Splitting Summary::             Some final points and a summary table.
* Constant Size::                       Reading constant width data.
* Splitting By Content::                Defining Fields By Content
* Multiple Line::                       Reading multiline records.
* Getline::                             Reading files under explicit program
                                        control using the @code{getline}
                                        function.
* Plain Getline::                       Using @code{getline} with no
                                        arguments.
* Getline/Variable::                    Using @code{getline} into a variable.
* Getline/File::                        Using @code{getline} from a file.
* Getline/Variable/File::               Using @code{getline} into a variable
                                        from a file.
* Getline/Pipe::                        Using @code{getline} from a pipe.
* Getline/Variable/Pipe::               Using @code{getline} into a variable
                                        from a pipe.
* Getline/Coprocess::                   Using @code{getline} from a coprocess.
* Getline/Variable/Coprocess::          Using @code{getline} into a variable
                                        from a coprocess.
* Getline Notes::                       Important things to know about
                                        @code{getline}.
* Getline Summary::                     Summary of @code{getline} Variants.
* Read Timeout::                        Reading input with a timeout.
* Command-line directories::            What happens if you put a directory on
                                        the command line.
* Input Summary::                       Input summary.
* Input Exercises::                     Exercises.
* Print::                               The @code{print} statement.
* Print Examples::                      Simple examples of @code{print}
                                        statements.
* Output Separators::                   The output separators and how to
                                        change them.
* OFMT::                                Controlling Numeric Output With
                                        @code{print}.
* Printf::                              The @code{printf} statement.
* Basic Printf::                        Syntax of the @code{printf} statement.
* Control Letters::                     Format-control letters.
* Format Modifiers::                    Format-specification modifiers.
* Printf Examples::                     Several examples.
* Redirection::                         How to redirect output to multiple
                                        files and pipes.
* Special FD::                          Special files for I/O.
* Special Files::                       File name interpretation in
                                        @command{gawk}. @command{gawk} allows
                                        access to inherited file descriptors.
* Other Inherited Files::               Accessing other open files with
                                        @command{gawk}.
* Special Network::                     Special files for network
                                        communications.
* Special Caveats::                     Things to watch out for.
* Close Files And Pipes::               Closing Input and Output Files and
                                        Pipes.
* Output Summary::                      Output summary.
* Output Exercises::                    Exercises.
* Values::                              Constants, Variables, and Regular
                                        Expressions.
* Constants::                           String, numeric and regexp constants.
* Scalar Constants::                    Numeric and string constants.
* Nondecimal-numbers::                  What are octal and hex numbers.
* Regexp Constants::                    Regular Expression constants.
* Using Constant Regexps::              When and how to use a regexp constant.
* Variables::                           Variables give names to values for
                                        later use.
* Using Variables::                     Using variables in your programs.
* Assignment Options::                  Setting variables on the command line
                                        and a summary of command-line syntax.
                                        This is an advanced method of input.
* Conversion::                          The conversion of strings to numbers
                                        and vice versa.
* Strings And Numbers::                 How @command{awk} Converts Between
                                        Strings And Numbers.
* Locale influences conversions::       How the locale may affect conversions.
* All Operators::                       @command{gawk}'s operators.
* Arithmetic Ops::                      Arithmetic operations (@samp{+},
                                        @samp{-}, etc.)
* Concatenation::                       Concatenating strings.
* Assignment Ops::                      Changing the value of a variable or a
                                        field.
* Increment Ops::                       Incrementing the numeric value of a
                                        variable.
* Truth Values and Conditions::         Testing for true and false.
* Truth Values::                        What is ``true'' and what is
                                        ``false''.
* Typing and Comparison::               How variables acquire types and how
                                        this affects comparison of numbers and
                                        strings with @samp{<}, etc.
* Variable Typing::                     String type versus numeric type.
* Comparison Operators::                The comparison operators.
* POSIX String Comparison::             String comparison with POSIX rules.
* Boolean Ops::                         Combining comparison expressions using
                                        boolean operators @samp{||} (``or''),
                                        @samp{&&} (``and'') and @samp{!}
                                        (``not'').
* Conditional Exp::                     Conditional expressions select between
                                        two subexpressions under control of a
                                        third subexpression.
* Function Calls::                      A function call is an expression.
* Precedence::                          How various operators nest.
* Locales::                             How the locale affects things.
* Expressions Summary::                 Expressions summary.
* Pattern Overview::                    What goes into a pattern.
* Regexp Patterns::                     Using regexps as patterns.
* Expression Patterns::                 Any expression can be used as a
                                        pattern.
* Ranges::                              Pairs of patterns specify record
                                        ranges.
* BEGIN/END::                           Specifying initialization and cleanup
                                        rules.
* Using BEGIN/END::                     How and why to use BEGIN/END rules.
* I/O And BEGIN/END::                   I/O issues in BEGIN/END rules.
* BEGINFILE/ENDFILE::                   Two special patterns for advanced
                                        control.
* Empty::                               The empty pattern, which matches every
                                        record.
* Using Shell Variables::               How to use shell variables with
                                        @command{awk}.
* Action Overview::                     What goes into an action.
* Statements::                          Describes the various control
                                        statements in detail.
* If Statement::                        Conditionally execute some
                                        @command{awk} statements.
* While Statement::                     Loop until some condition is
                                        satisfied.
* Do Statement::                        Do specified action while looping
                                        until some condition is satisfied.
* For Statement::                       Another looping statement, that
                                        provides initialization and increment
                                        clauses.
* Switch Statement::                    Switch/case evaluation for conditional
                                        execution of statements based on a
                                        value.
* Break Statement::                     Immediately exit the innermost
                                        enclosing loop.
* Continue Statement::                  Skip to the end of the innermost
                                        enclosing loop.
* Next Statement::                      Stop processing the current input
                                        record.
* Nextfile Statement::                  Stop processing the current file.
* Exit Statement::                      Stop execution of @command{awk}.
* Built-in Variables::                  Summarizes the predefined variables.
* User-modified::                       Built-in variables that you change to
                                        control @command{awk}.
* Auto-set::                            Built-in variables where @command{awk}
                                        gives you information.
* ARGC and ARGV::                       Ways to use @code{ARGC} and
                                        @code{ARGV}.
* Pattern Action Summary::              Patterns and Actions summary.
* Array Basics::                        The basics of arrays.
* Array Intro::                         Introduction to Arrays
* Reference to Elements::               How to examine one element of an
                                        array.
* Assigning Elements::                  How to change an element of an array.
* Array Example::                       Basic Example of an Array
* Scanning an Array::                   A variation of the @code{for}
                                        statement. It loops through the
                                        indices of an array's existing
                                        elements.
* Controlling Scanning::                Controlling the order in which arrays
                                        are scanned.
* Numeric Array Subscripts::            How to use numbers as subscripts in
                                        @command{awk}.
* Uninitialized Subscripts::            Using Uninitialized variables as
                                        subscripts.
* Delete::                              The @code{delete} statement removes an
                                        element from an array.
* Multidimensional::                    Emulating multidimensional arrays in
                                        @command{awk}.
* Multiscanning::                       Scanning multidimensional arrays.
* Arrays of Arrays::                    True multidimensional arrays.
* Arrays Summary::                      Summary of arrays.
* Built-in::                            Summarizes the built-in functions.
* Calling Built-in::                    How to call built-in functions.
* Numeric Functions::                   Functions that work with numbers,
                                        including @code{int()}, @code{sin()}
                                        and @code{rand()}.
* String Functions::                    Functions for string manipulation,
                                        such as @code{split()}, @code{match()}
                                        and @code{sprintf()}.
* Gory Details::                        More than you want to know about
                                        @samp{\} and @samp{&} with
                                        @code{sub()}, @code{gsub()}, and
                                        @code{gensub()}.
* I/O Functions::                       Functions for files and shell
                                        commands.
* Time Functions::                      Functions for dealing with timestamps.
* Bitwise Functions::                   Functions for bitwise operations.
* Type Functions::                      Functions for type information.
* I18N Functions::                      Functions for string translation.
* User-defined::                        Describes User-defined functions in
                                        detail.
* Definition Syntax::                   How to write definitions and what they
                                        mean.
* Function Example::                    An example function definition and
                                        what it does.
* Function Caveats::                    Things to watch out for.
* Calling A Function::                  Don't use spaces.
* Variable Scope::                      Controlling variable scope.
* Pass By Value/Reference::             Passing parameters.
* Return Statement::                    Specifying the value a function
                                        returns.
* Dynamic Typing::                      How variable types can change at
                                        runtime.
* Indirect Calls::                      Choosing the function to call at
                                        runtime.
* Functions Summary::                   Summary of functions.
* Library Names::                       How to best name private global
                                        variables in library functions.
* General Functions::                   Functions that are of general use.
* Strtonum Function::                   A replacement for the built-in
                                        @code{strtonum()} function.
* Assert Function::                     A function for assertions in
                                        @command{awk} programs.
* Round Function::                      A function for rounding if
                                        @code{sprintf()} does not do it
                                        correctly.
* Cliff Random Function::               The Cliff Random Number Generator.
* Ordinal Functions::                   Functions for using characters as
                                        numbers and vice versa.
* Join Function::                       A function to join an array into a
                                        string.
* Getlocaltime Function::               A function to get formatted times.
* Readfile Function::                   A function to read an entire file at
                                        once.
* Shell Quoting::                       A function to quote strings for the
                                        shell.
* Data File Management::                Functions for managing command-line
                                        data files.
* Filetrans Function::                  A function for handling data file
                                        transitions.
* Rewind Function::                     A function for rereading the current
                                        file.
* File Checking::                       Checking that data files are readable.
* Empty Files::                         Checking for zero-length files.
* Ignoring Assigns::                    Treating assignments as file names.
* Getopt Function::                     A function for processing command-line
                                        arguments.
* Passwd Functions::                    Functions for getting user
                                        information.
* Group Functions::                     Functions for getting group
                                        information.
* Walking Arrays::                      A function to walk arrays of arrays.
* Library Functions Summary::           Summary of library functions.
* Library Exercises::                   Exercises.
* Running Examples::                    How to run these examples.
* Clones::                              Clones of common utilities.
* Cut Program::                         The @command{cut} utility.
* Egrep Program::                       The @command{egrep} utility.
* Id Program::                          The @command{id} utility.
* Split Program::                       The @command{split} utility.
* Tee Program::                         The @command{tee} utility.
* Uniq Program::                        The @command{uniq} utility.
* Wc Program::                          The @command{wc} utility.
* Miscellaneous Programs::              Some interesting @command{awk}
                                        programs.
* Dupword Program::                     Finding duplicated words in a
                                        document.
* Alarm Program::                       An alarm clock.
* Translate Program::                   A program similar to the @command{tr}
                                        utility.
* Labels Program::                      Printing mailing labels.
* Word Sorting::                        A program to produce a word usage
                                        count.
* History Sorting::                     Eliminating duplicate entries from a
                                        history file.
* Extract Program::                     Pulling out programs from Texinfo
                                        source files.
* Simple Sed::                          A Simple Stream Editor.
* Igawk Program::                       A wrapper for @command{awk} that
                                        includes files.
* Anagram Program::                     Finding anagrams from a dictionary.
* Signature Program::                   People do amazing things with too much
                                        time on their hands.
* Programs Summary::                    Summary of programs.
* Programs Exercises::                  Exercises.
* Nondecimal Data::                     Allowing nondecimal input data.
* Array Sorting::                       Facilities for controlling array
                                        traversal and sorting arrays.
* Controlling Array Traversal::         How to use PROCINFO["sorted_in"].
* Array Sorting Functions::             How to use @code{asort()} and
                                        @code{asorti()}.
* Two-way I/O::                         Two-way communications with another
                                        process.
* TCP/IP Networking::                   Using @command{gawk} for network
                                        programming.
* Profiling::                           Profiling your @command{awk} programs.
* Advanced Features Summary::           Summary of advanced features.
* I18N and L10N::                       Internationalization and Localization.
* Explaining gettext::                  How GNU @command{gettext} works.
* Programmer i18n::                     Features for the programmer.
* Translator i18n::                     Features for the translator.
* String Extraction::                   Extracting marked strings.
* Printf Ordering::                     Rearranging @code{printf} arguments.
* I18N Portability::                    @command{awk}-level portability
                                        issues.
* I18N Example::                        A simple i18n example.
* Gawk I18N::                           @command{gawk} is also
                                        internationalized.
* I18N Summary::                        Summary of I18N stuff.
* Debugging::                           Introduction to @command{gawk}
                                        debugger.
* Debugging Concepts::                  Debugging in General.
* Debugging Terms::                     Additional Debugging Concepts.
* Awk Debugging::                       Awk Debugging.
* Sample Debugging Session::            Sample debugging session.
* Debugger Invocation::                 How to Start the Debugger.
* Finding The Bug::                     Finding the Bug.
* List of Debugger Commands::           Main debugger commands.
* Breakpoint Control::                  Control of Breakpoints.
* Debugger Execution Control::          Control of Execution.
* Viewing And Changing Data::           Viewing and Changing Data.
* Execution Stack::                     Dealing with the Stack.
* Debugger Info::                       Obtaining Information about the
                                        Program and the Debugger State.
* Miscellaneous Debugger Commands::     Miscellaneous Commands.
* Readline Support::                    Readline support.
* Limitations::                         Limitations and future plans.
* Debugging Summary::                   Debugging summary.
* Computer Arithmetic::                 A quick intro to computer math.
* Math Definitions::                    Defining terms used.
* MPFR features::                       The MPFR features in @command{gawk}.
* FP Math Caution::                     Things to know.
* Inexactness of computations::         Floating point math is not exact.
* Inexact representation::              Numbers are not exactly represented.
* Comparing FP Values::                 How to compare floating point values.
* Errors accumulate::                   Errors get bigger as they go.
* Getting Accuracy::                    Getting more accuracy takes some work.
* Try To Round::                        Add digits and round.
* Setting precision::                   How to set the precision.
* Setting the rounding mode::           How to set the rounding mode.
* Arbitrary Precision Integers::        Arbitrary Precision Integer Arithmetic
                                        with @command{gawk}.
* POSIX Floating Point Problems::       Standards Versus Existing Practice.
* Floating point summary::              Summary of floating point discussion.
* Extension Intro::                     What is an extension.
* Plugin License::                      A note about licensing.
* Extension Mechanism Outline::         An outline of how it works.
* Extension API Description::           A full description of the API.
* Extension API Functions Introduction:: Introduction to the API functions.
* General Data Types::                  The data types.
* Memory Allocation Functions::         Functions for allocating memory.
* Constructor Functions::               Functions for creating values.
* Registration Functions::              Functions to register things with
                                        @command{gawk}.
* Extension Functions::                 Registering extension functions.
* Exit Callback Functions::             Registering an exit callback.
* Extension Version String::            Registering a version string.
* Input Parsers::                       Registering an input parser.
* Output Wrappers::                     Registering an output wrapper.
* Two-way processors::                  Registering a two-way processor.
* Printing Messages::                   Functions for printing messages.
* Updating @code{ERRNO}::               Functions for updating @code{ERRNO}.
* Requesting Values::                   How to get a value.
* Accessing Parameters::                Functions for accessing parameters.
* Symbol Table Access::                 Functions for accessing global
                                        variables.
* Symbol table by name::                Accessing variables by name.
* Symbol table by cookie::              Accessing variables by ``cookie''.
* Cached values::                       Creating and using cached values.
* Array Manipulation::                  Functions for working with arrays.
* Array Data Types::                    Data types for working with arrays.
* Array Functions::                     Functions for working with arrays.
* Flattening Arrays::                   How to flatten arrays.
* Creating Arrays::                     How to create and populate arrays.
* Extension API Variables::             Variables provided by the API.
* Extension Versioning::                API Version information.
* Extension API Informational Variables:: Variables providing information about
                                        @command{gawk}'s invocation.
* Extension API Boilerplate::           Boilerplate code for using the API.
* Finding Extensions::                  How @command{gawk} finds compiled
                                        extensions.
* Extension Example::                   Example C code for an extension.
* Internal File Description::           What the new functions will do.
* Internal File Ops::                   The code for internal file operations.
* Using Internal File Ops::             How to use an external extension.
* Extension Samples::                   The sample extensions that ship with
                                        @command{gawk}.
* Extension Sample File Functions::     The file functions sample.
* Extension Sample Fnmatch::            An interface to @code{fnmatch()}.
* Extension Sample Fork::               An interface to @code{fork()} and
                                        other process functions.
* Extension Sample Inplace::            Enabling in-place file editing.
* Extension Sample Ord::                Character to value to character
                                        conversions.
* Extension Sample Readdir::            An interface to @code{readdir()}.
* Extension Sample Revout::             Reversing output sample output
                                        wrapper.
* Extension Sample Rev2way::            Reversing data sample two-way
                                        processor.
* Extension Sample Read write array::   Serializing an array to a file.
* Extension Sample Readfile::           Reading an entire file into a string.
* Extension Sample Time::               An interface to @code{gettimeofday()}
                                        and @code{sleep()}.
* Extension Sample API Tests::          Tests for the API.
* gawkextlib::                          The @code{gawkextlib} project.
* Extension summary::                   Extension summary.
* Extension Exercises::                 Exercises.
* V7/SVR3.1::                           The major changes between V7 and
                                        System V Release 3.1.
* SVR4::                                Minor changes between System V
                                        Releases 3.1 and 4.
* POSIX::                               New features from the POSIX standard.
* BTL::                                 New features from Brian Kernighan's
                                        version of @command{awk}.
* POSIX/GNU::                           The extensions in @command{gawk} not
                                        in POSIX @command{awk}.
* Feature History::                     The history of the features in
                                        @command{gawk}.
* Common Extensions::                   Common Extensions Summary.
* Ranges and Locales::                  How locales used to affect regexp
                                        ranges.
* Contributors::                        @command{gawk} ÁöÑ‰∏ªË¶ÅË¥°ÁåÆËÄÖ.
* History summary::                     History summary.
* Gawk Distribution::                   What is in the @command{gawk}
                                        distribution.
* Getting::                             How to get the distribution.
* Extracting::                          How to extract the distribution.
* Distribution contents::               What is in the distribution.
* Unix Installation::                   Installing @command{gawk} under
                                        various versions of Unix.
* Quick Installation::                  Compiling @command{gawk} under Unix.
* Additional Configuration Options::    Other compile-time options.
* Configuration Philosophy::            How it's all supposed to work.
* Non-Unix Installation::               Installation on Other Operating
                                        Systems.
* PC Installation::                     Installing and Compiling
                                        @command{gawk} on MS-DOS and OS/2.
* PC Binary Installation::              Installing a prepared distribution.
* PC Compiling::                        Compiling @command{gawk} for MS-DOS,
                                        Windows32, and OS/2.
* PC Testing::                          Testing @command{gawk} on PC systems.
* PC Using::                            Running @command{gawk} on MS-DOS,
                                        Windows32 and OS/2.
* Cygwin::                              Building and running @command{gawk}
                                        for Cygwin.
* MSYS::                                Using @command{gawk} In The MSYS
                                        Environment.
* VMS Installation::                    Installing @command{gawk} on VMS.
* VMS Compilation::                     How to compile @command{gawk} under
                                        VMS.
* VMS Dynamic Extensions::              Compiling @command{gawk} dynamic
                                        extensions on VMS.
* VMS Installation Details::            How to install @command{gawk} under
                                        VMS.
* VMS Running::                         How to run @command{gawk} under VMS.
* VMS GNV::                             The VMS GNV Project.
* VMS Old Gawk::                        An old version comes with some VMS
                                        systems.
* Bugs::                                Reporting Problems and Bugs.
* Other Versions::                      Other freely available @command{awk}
                                        implementations.
* Installation summary::                Summary of installation.
* Compatibility Mode::                  How to disable certain @command{gawk}
                                        extensions.
* Additions::                           Making Additions To @command{gawk}.
* Accessing The Source::                Accessing the Git repository.
* Adding Code::                         Adding code to the main body of
                                        @command{gawk}.
* New Ports::                           Porting @command{gawk} to a new
                                        operating system.
* Derived Files::                       Why derived files are kept in the Git
                                        repository.
* Future Extensions::                   New features that may be implemented
                                        one day.
* Implementation Limitations::          Some limitations of the
                                        implementation.
* Extension Design::                    Design notes about the extension API.
* Old Extension Problems::              Problems with the old mechanism.
* Extension New Mechanism Goals::       Goals for the new mechanism.
* Extension Other Design Decisions::    Some other design decisions.
* Extension Future Growth::             Some room for future growth.
* Old Extension Mechanism::             Some compatibility for old extensions.
* Notes summary::                       Summary of implementation notes.
* Basic High Level::                    The high level view.
* Basic Data Typing::                   A very quick intro to data types.
@end detailmenu
@end menu

@c dedication for Info file
@ifinfo
To my parents, for their love, and for the wonderful
example they set for me.
@sp 1
To my wife Miriam, for making me complete.
Thank you for building your life together with me.
@sp 1
To our children Chana, Rivka, Nachum and Malka,
for enrichening our lives in innumerable ways.
@end ifinfo

@summarycontents
@contents

@node Á¨¨‰∏âÁâàÂâçË®Ä
@unnumbered Á¨¨‰∏âÁâàÂâçË®Ä

@c This bit is post-processed by a script which turns the chapter
@c tag into a preface tag, and moves this stuff to before the title.
@c Bleah.
@docbook
  <prefaceinfo>
    <author>
      <firstname>Michael</firstname>
      <surname>Brennan</surname>
      <!-- can't put mawk into command tags. sigh. -->
      <affiliation><jobtitle>Author of mawk</jobtitle></affiliation>
    </author>
    <date>March 2001</date>
   </prefaceinfo>
@end docbook

ÊàëË∑ü Arnold Robbins ÊòØÂ•ΩÊúãÂèã„ÄÇ Âú® 1990 Âπ¥Ôºå
@c 11 years ago
Êàë‰ª¨Áî±‰∫é AWK Âõ†ÁºòÈôÖ‰ºöËÄåÁªìËØÜ„ÄÇ
ÂΩìÊó∂ÊàëÊ≠£ÂºÄÂßã‰∏Ä‰ªΩÊñ∞Â∑•‰ΩúÔºåÂπ∂Ê≥®ÊÑèÂà∞Âú®ÂÖ¨Âè∏ËßíËêΩÈáåÊîæÁùÄ‰∏ÄÂè∞Ê≤°Áî®ÁöÑ Unix ËÆ°ÁÆóÊú∫„ÄÇ
Ê≤°Êúâ‰∫∫Áü•ÈÅìÊÄé‰πà‰ΩøÁî®ÂÆÉÔºåÊàë‰πü‰∏ç‰ºö„ÄÇ‰ΩÜÊòØÔºåÂá†Â§©ÂêéÔºåÂÆÉË∑ëËµ∑Êù•‰∫ÜÔºåÂπ∂‰∏îÊàëÂ∞±ÊòØ rootÔºå‰πüÊòØÂîØ‰∏ÄÁöÑÁî®Êà∑„ÄÇ
‰ªéÈÇ£Â§©Ëµ∑ÔºåÊàëÂ∞±ÂºÄÂßã‰ªé‰∏Ä‰∏™ÁªüËÆ°ÂàÜÊûêÂ∏àÂêë‰∏Ä‰∏™ Unix Á®ãÂ∫èÂëòËΩ¨Âèò‰∫Ü„ÄÇ

ÊàëÁªèÂ∏∏ÂæÄËøî‰∫éÂõæ‰π¶È¶Ü‰∏é‰π¶Â∫óÔºåÊêúÁ¥¢Ë∑ü Unix Áõ∏ÂÖ≥ÁöÑÂõæ‰π¶„ÄÇ
Êúâ‰∏ÄÊ¨°ÊâæÂà∞‰∏ÄÊú¨ÁÅ∞Ëâ≤ÁöÑ AWK Áõ∏ÂÖ≥ÁöÑ‰π¶ÔºåÂç≥ a.k.a.@: 
Alfred V.@: Aho, Brian W.@: Kernighan, ‰∏é Peter J.@: Weinberger ÂÜôÁöÑ @cite{The AWK Programming Language}ÔºàAddison-Wesley, 1988Ôºâ„ÄÇ
@command{awk} ÁÆÄÊ¥ÅÁöÑÁºñÁ®ãËßÑËåÉ‚Äî‚ÄîÂ∞±ÊòØÂú®ËæìÂÖ•‰∏≠Êü•ÊâæÊüêÁßçÊ®°ÂºèÁöÑÂ≠ó‰∏≤Âπ∂ÊâßË°åÁõ∏Â∫îÂä®‰Ωú‚Äî‚ÄîÁªèÂ∏∏ËÉΩÂ§üÂ∞ÜÂ§çÊùÇÁöÑÊàñËÄÖÂÜóÈïøÁöÑÊìç‰ΩúÂåñ‰∏∫Âá†Ë°å‰ª£Á†Å„ÄÇ
ÊàëÈùûÂ∏∏ÂÖ¥Â•ãÔºåÂπ∂ÁùÄÊâãÂºÄÂßãÂà©Áî® AWK ËøõË°åÁºñÁ®ã„ÄÇ

ÂèØÊòØÔºåÊàëËÆ°ÁÆóÊú∫‰∏äÁöÑ @command{awk} ÊòØÂú®ÁÅ∞Ëâ≤‰π¶ÈáåÊâÄÊèèËø∞ÁöÑ‰∏Ä‰∏™ÂèóÈôêÁöÑËØ≠Ë®ÄÁâàÊú¨„ÄÇ
ËÄåÊàëÂèëÁé∞ÊàëÁöÑËÆ°ÁÆóÊú∫‰∏≠ÁöÑÂ∞±ÊòØ‚ÄúÊóß @command{awk}‚ÄùÔºåËÄå‰π¶‰∏≠ËÆ≤Ëø∞ÁöÑÊòØ‚ÄúÊñ∞ @command{awk}‚Äù„ÄÇ
ÊàëÁü•ÈÅìËøôÊòØÂÖ∏ÂûãÊÉÖÂÜµÔºõÊóßÁâàÊú¨‰∏çËÇØËÆ©‰ΩçÔºå‰πü‰∏çÊÑøÊÑèÊîæÂºÉËá™Â∑±ÁöÑÂêçÂ≠ó„ÄÇ
Â¶ÇÊûú‰∏Ä‰∏™Á≥ªÁªüÊúâ‰∏Ä‰∏™‚ÄúÊñ∞ @command{awk}‚ÄùÔºåÂ∞±‰ºöÊØ´Êó†‰æãÂ§ñÂú∞Âè´ÂÅö @command{nawk}ÔºåÂπ∂‰∏îÊúâÂá†‰∏™Á≥ªÁªüÊúâËøôÊ†∑ÁöÑËΩØ‰ª∂„ÄÇ
ÂèñÂæó @command{nawk} ÁöÑÊñπÂºèÊòØÈÄöËøá @code{prep.ai.mit.edu} ÁöÑ @command{ftp} ‰∏ãËΩΩÊ∫ê‰ª£Á†Å„ÄÇ
@command{gawk} ÊòØ‰∏Ä‰∏™Áî± David Trueman and Arnold ÊâÄÂÜôÁöÑÊñ∞ÁâàÊú¨ÁöÑ @command{awk}ÔºåÂπ∂ÂèØ‰ª•Âú® GNU General Public License ÁöÑËÆ∏ÂèØ‰∏ãÂèñÂæó„ÄÇ

ÔºàÈ°∫‰æøËØ¥‰∏ÄÂè•ÔºåÁé∞Âú®Êâæ‚ÄúÊñ∞ @command{awk}‚ÄùÂæàÂÆπÊòì‰∫ÜÔºåGNU/Linux Â∞±Â∏¶ÊúâÔºå‰Ω†‰πüÂèØ‰ª•Âú®Â§ßÂ§öÊï∞Á≥ªÁªü‰∏≠‰∏ãËΩΩ‰∫åËøõÂà∂ÁâàÊú¨ÊàñËÄÖÊ∫ê‰ª£Á†ÅÔºõ
ÊàëËÄÅÂ©ÜÂ∞±Âú®Â•πÁöÑ VMS BOX ‰∏≠‰ΩøÁî® @command{gawk}„ÄÇÔºâ

ÊàëÁöÑ Unix Á≥ªÁªüÂõ†Èó≤ÁΩÆËÄåË¢´‰ΩøÁî®Ëµ∑Êù•ÔºåÂΩìÁÑ∂‰πüËøò‰∏ç‰ºöËøûÊé•Âà∞ÁΩëÁªú‰∏≠„ÄÇ
Âõ†Ê≠§ÔºåÂæàÊòéÊòæÁî±‰∫é @command{gawk} ÁöÑÂ≠òÂú®Ôºå‰ª•Âèä Unix Á§æ‰ºöÁ§æÂå∫ÁöÑ‰∏ÄËà¨ÁâπÁÇπÔºåÊàëÈúÄË¶Å‰∏Ä‰∏™‚ÄúÊñ∞ @command{awk}‚Äù„ÄÇ
Âõ†Ê≠§ÔºåÊàëÂ∞±ÂÜô‰∫Ü‰∏Ä‰∏™ÔºåÊàëÊääÂÆÉÂè´ÂÅö @command{mawk}„ÄÇ
Âú®ÊàëÂÆåÊàêÂâçÔºåÊàëÂ∑≤ÁªèÁü•ÈÅì‰∫Ü @command{gawk}Ôºå‰ΩÜÊòØÂ∑≤ÁªèÂ§™Ëøü‰∫Ü„ÄÇ
Âõ†Ê≠§ÔºåÊàëËøòÊòØÊää @command{mawk} ÂèëÈÄÅÂà∞‰∫Ü @code{comp.source} ÁöÑÊñ∞ÈóªÁªÑÈáå„ÄÇ

Âá†Â§©ÂêéÔºåÊàëÊî∂Âà∞‰∫ÜÊù•Ëá™ Arnold ÁöÑÈÇÆ‰ª∂ÔºåÈáåÈù¢‰ªñ‰ªãÁªç‰∫Ü‰∏Ä‰∏ã‰ªñËá™Â∑±„ÄÇ
‰ªñÂª∫ËÆÆÊàëÂàÜ‰∫´ @command{mawk} ÁöÑËÆæËÆ°‰∏éÁÆóÊ≥ïÔºåÂπ∂‰∏îÊèê‰∫§‰∏Ä‰∏™ POSIX Ê†áÂáÜËçâÊ°àÔºåËøôÊ†∑ÊàëÂ∞±ËÉΩÂ§üÊõ¥Êñ∞ @command{mawk} Êù•ÊîØÊåÅ @cite{The AWK Programming Language} ÂèëÂ∏ÉÂêéÁöÑËØ≠Ë®ÄÊâ©Â±ï„ÄÇ

Ë¢íÁôΩËÆ≤ÔºåÂ¶ÇÊûúÊàë‰ª¨ÁöÑËßíËâ≤‰∫íÊç¢ÔºåÊàëÂèØËÉΩÂ∞±‰∏ç‰ºöÂ¶ÇÊ≠§ÂºÄÊîæÔºåÊàë‰ª¨‰πüÂ∞±ÂèØËÉΩ‰ªé‰∏ç‰ºöËßÅÈù¢„ÄÇ
ÊàëÂæàÈ´òÂÖ¥Êàë‰ª¨ËßÅ‰∫Ü‰∏ÄÈù¢„ÄÇ‰ªñÊòØ‰∏Ä‰∏™ AWK ‰∏ìÂÆ∂‰∏≠ÁöÑ‰∏ìÂÆ∂Ôºå‰πüÊòØÁ°ÆÂÆûÊòØ‰∏™Â•Ω‰∫∫„ÄÇ
Arnold ‰∏∫ Free Software Foundation Ë¥°ÁåÆ‰∫ÜÂæàÂ§öÁöÑÊâçËÉΩ‰∏éÊó∂Èó¥„ÄÇ

ËøôÊú¨‰π¶ÊòØ @command{gawk} ÁöÑÂèÇËÄÉ‰π¶Ôºå‰ΩÜÊòØÊ†∏ÂøÉÊòØ‰∏Ä‰∏™ÂÖ≥‰∫é AWK ÁºñÁ®ãÁöÑ‰π¶ÔºåÈÄÇÁî®‰∫éÈùûÂ∏∏ÂπøÁöÑËØªËÄÖ„ÄÇ
ÁºñÁ®ãËßÑËåÉÂèÇËÄÉÁöÑÊòØ 1987 Âπ¥Ë¥ùÂ∞îÂÆûÈ™åÂÆ§ÁöÑÂÆö‰πâÔºåÂπ∂‰∫é 1992 Âπ¥Êàê‰∏∫ POSIX Â∑•ÂÖ∑Ê†áÂáÜÁöÑËØ≠Ë®ÄËßÑËåÉ„ÄÇ

Âè¶‰∏ÄÊñπÈù¢ÔºåÂØπ‰∫é AWK Á®ãÂ∫èÊñ∞ÊâãÔºåËÉΩÂ§üÂ≠¶Âà∞ÂÆûÁî®ÁöÑÁºñÁ®ãÊñπÊ≥ïÔºåËÄåËøô‰πüÊ≠£ÊòØ AWK ÁöÑÂü∫Êú¨ÊñπÊ≥ïÔºö
Êï∞ÊçÆÈ©±Âä®ÊéßÂà∂ÊµÅÔºåÂà©Áî®Ê≠£ÂàôË°®ËææÂºèËøõË°åÂåπÈÖçÔºå‰ª•ÂèäÂÖ≥ËÅîÊï∞ÁªÑ„ÄÇÈÇ£‰∫õÊ≠£Âú®Â∞ùÈ≤úÁöÑ‰∫∫ÂèØ‰ª•ÈÄöËøáÁâπÊÆäÁöÑ @file{/inet} Êñá‰ª∂Êù•‰ΩøÁî® @command{gawk} ÁöÑÁΩëÁªúÂçèËÆÆÊé•Âè£„ÄÇ

ËøôÊú¨‰π¶‰∏≠ÁöÑ‰æãÂ≠ê‰ºöÊ∏ÖÊ•öÂú∞Ë°®ÊòéÔºå‰ΩøÁî® AWK ÁºñÂÜôÁöÑÁ®ãÂ∫èË¶ÅÊØîCÂÜôÊàêÁöÑÁ®ãÂ∫èÊõ¥Â∞èÊõ¥Âø´„ÄÇ
ÁªìÊûúÔºåÂèØËÉΩÂà©Áî® AWK Êù•ÁºñÂÜôÁÆóÊ≥ïÂπ∂Âø´ÈÄüËøêË°åÔºå‰ª•Ê≠§Êù•ÂèäÊó∂ÂèëÁé∞ÈóÆÈ¢ò„ÄÇÁªèÂ∏∏ÁöÑÊÉÖÂÜµ‰∏ãÔºåËß£ÈáäÂûãÁöÑÊÄßËÉΩÂ∞±Ë∂≥Â§ü‰∫ÜÔºåÂõ†Ê≠§ AWK ÁöÑÂéüÂûãÂ∞±Áõ¥Êé•ËΩ¨Êç¢Êàê‰∫Ü‰∫ßÂìÅ„ÄÇ

Êñ∞ÁöÑ @command{pgawk}Ôºàprofiling gawkÔºâ‰ºö‰∫ßÁîü‰ª£Á†ÅÊâßË°åÁöÑÈááÊ†∑Êï∞ÊçÆ„ÄÇ
ÊàëÊúÄËøëÂÆûÈ™å‰∫Ü‰∏Ä‰∏™ÁÆóÊ≥ïÔºåÂç≥ÂØπ 
@ifnotdocbook
@math{n}
@end ifnotdocbook
@ifdocbook
@i{n}
@end ifdocbook 
Ë°åËæìÂÖ•ÔºåÊòæÁ§∫Âá∫Á∫¶
@tex
$\sim\! Cn^2$
@end tex
@ifnottex
@ifnotdocbook
~ C n^2
@end ifnotdocbook
@end ifnottex
@docbook
<emphasis>&sim; Cn<superscript>2</superscript></emphasis>
@end docbook
ËøôÊ†∑ÁöÑÊÄßËÉΩÔºåËÄåÁêÜËÆ∫È¢ÑÊµã‰∏ã‰∏∫Á∫¶ 
@tex
$\sim\! Cn\log n$
@end tex
@ifnottex
@ifnotdocbook
~ C n log n
@end ifnotdocbook
@end ifnottex
@docbook
<emphasis>&sim; Cn log n</emphasis>
@end docbook
„ÄÇÊü•Áúã‰∫Ü @file{awkprof.out} Á®ãÂ∫èÂá†ÂàÜÈíüÂêéÔºåÂ∞±Âú®Á®ãÂ∫èÁöÑ‰∏ÄË°å‰ª£Á†Å‰∏≠ÂèëÁé∞‰∫ÜÈóÆÈ¢òÊâÄÂú®„ÄÇ
ËøôÊ†∑Ôºå@command{pgawk} ÂèàÊàê‰∏∫ÊàëÁ®ãÂ∫èÂëòÂ∑•ÂÖ∑ÁÆ±‰∏≠ÁöÑ‰∏Ä‰∏™Â•ΩÂ∑•ÂÖ∑„ÄÇ

Arnold Ê∑´Êµ∏Âú® AWK ‰∏≠ÊúâÂçÅÂá†Âπ¥ÔºåÂπ∂‰∏îÂºÄÂèë‰∫Ü @command{gawk}Ôºå‰πüÂç≥Êú¨‰π¶ÁöÑ‰∏ªÈ¢ò„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî® AWKÔºåÂπ∂‰∏îÊÉ≥Áü•ÈÅì howÔºåÈÇ£‰πàÂ∞±ËØªËøôÊú¨‰π¶Âêß„ÄÇ

@ifnotdocbook
@cindex Brennan, Michael
@display
Michael Brennan
Author of @command{mawk}
March 2001
@end display
@end ifnotdocbook

@node Á¨¨ÂõõÁâàÂâçË®Ä
@unnumbered Á¨¨ÂõõÁâàÂâçË®Ä

@c This bit is post-processed by a script which turns the chapter
@c tag into a preface tag, and moves this stuff to before the title.
@c Bleah.
@docbook
  <prefaceinfo>
    <author>
      <firstname>Michael</firstname>
      <surname>Brennan</surname>
      <!-- can't put mawk into command tags. sigh. -->
      <affiliation><jobtitle>Author of mawk</jobtitle></affiliation>
    </author>
    <date>October 2014</date>
   </prefaceinfo>
@end docbook

Êúâ‰∫õ‰∏úË•ø‰∏ÄÁõ¥Ê≤°ÊúâÂèòÂåñ„ÄÇ
13 Âπ¥ÂâçÔºåÊàëÂÜô‰∏ã‚ÄúÂ¶ÇÊûú‰Ω†‰ΩøÁî® AWK ÊàñËÄÖÊÉ≥Â≠¶‰π†ÂÆÉÂ¶Ç‰ΩïÂ∑•‰ΩúÔºåÈÇ£‰πàÂ∞±ËØªËøôÊú¨‰π¶„ÄÇ‚Äù
ËøôÂè•ËØùÂΩìÊó∂ÊòØÁúüÁêÜÔºåËÄåÁé∞Âú®‰æùÁÑ∂ÊòØÁúüÁêÜ„ÄÇ

Â≠¶‰π†Â¶Ç‰Ωï‰ΩøÁî®ÁºñÁ®ãËØ≠Ë®ÄÂπ∂‰ªÖ‰ªÖÊòØÊéåÊè°ËØ≠Ê≥ïËøô‰πàÁÆÄÂçï„ÄÇÈúÄË¶ÅÂú®ÁêÜËß£ÁöÑÂü∫Á°Ä‰∏äÂà©Áî®ËØ≠Ë®ÄÊèê‰æõÁöÑÁâπÊÄßÊù•Ëß£ÂÜ≥Áé∞ÂÆû‰∏≠ÁöÑÁºñÁ®ãÈóÆÈ¢ò„ÄÇËøôÊú¨‰π¶ÁöÑÁÑ¶ÁÇπÂ∞±ÊòØÁî®ËÆ∏Â§öÁöÑ‰æãÂ≠êÊù•Â±ïÁ§∫Â¶Ç‰Ωï‰ΩøÁî® AWK„ÄÇ

ËÄåÊúâ‰∫õ‰∏úË•øÊòØÊúâÂèòÂåñÁöÑ„ÄÇÊàë‰ª¨ÁöÑËÆ°ÁÆóÊú∫Ë¶ÅÊØî‰πãÂâçÂø´ÂæóÂ§öÔºåÂπ∂‰∏îÊúâÊõ¥Â§öÁöÑÂÜÖÂ≠ò„ÄÇÁªìÊûúÊòØÈ´òÁ∫ßÁöÑËØ≠Ë®ÄÂØºËá¥‰∫ÜÈÄüÂ∫¶‰∏éÂ≠òÂÇ®ÁöÑ‰ΩéÊïà‰ΩøÁî®„ÄÇÂõ†‰∏∫ÊÄßËÉΩËÄåÂÖàÂú® AWK ‰∏≠ÂÜôÂéüÂûãÁÑ∂ÂêéÁî® C ÈáçÂÜôÔºåËøôÁßçÊÉÖÂÜµÂæàÂ∞ëÂèëÁîüÔºåÂõ†‰∏∫Êõ¥Â§öÁöÑÊÉÖÂÜµ‰∏ãÔºåÂéüÂûãÂ∑≤ÁªèË∂≥Â§üÂø´‰∫Ü„ÄÇ

ÂΩìÁÑ∂ÔºåÊúâ‰∫õÊìç‰ΩúÊõ¥ÈÄÇÂêà‰∫éÁî® C ÊàñËÄÖ C++ Êù•ÂÆûÁé∞ÔºåÂØπ‰∫é @command{gawk} 4.1 ‰ª•ÂèäÂêéÈù¢ÁöÑÁâàÊú¨Ôºå‰Ω†‰∏çÈúÄË¶ÅÈÄâÊã©Âà∞Â∫ïÊòØÁî® AWK ËøòÊòØÁî® C/C++ Êù•ÂÆûÁé∞„ÄÇ‰Ω†ÂèØ‰ª•Áî® AWK Êù•ÂÆûÁé∞Â§ßÈÉ®ÂàÜÁöÑÁ®ãÂ∫è„ÄÇËÄåÁî® C/C++ Êù•ÂÜôÁöÑÁ®ãÂ∫èÔºå‰Ω†ÂÆåÂÖ®ÂèØ‰ª•Áî® C ÊàñËÄÖ C++ Êù•ÂÜôÊàêÂä®ÊÄÅÊèí‰ª∂ÔºåÁÑ∂Âêé‰ΩøÁî® @command{gawk} ËøõË°åË£ÖËΩΩÂêàÂπ∂„ÄÇ
@c Chapter 16
@ref{Dynamic Extensions},
ÊèèËø∞‰∫ÜÊâÄÊúâÁöÑÊäÄÊúØÁªÜËäÇÔºåÂÖ∂‰∏≠ÊúâËÆ∏Â§öÁöÑ‰æãÂ≠êÔºåÂ∏åÊúõËÆ©‰Ω†Â≠¶‰π†Âà∞ÈáåÈáåÂ§ñÂ§ñÁöÑ‰∏ÄÂàá„ÄÇ

ÊàëÂæà‰∫´ÂèóÁî® AWK Êù•ËøõË°åÁºñÁ®ãÔºåÂπ∂‰∏îÂú®Áî®ÂøÉÔºàÈáçÔºâËØªËøôÊú¨‰π¶„ÄÇÊàëÊÉ≥‰Ω†‰πü‰ºöËøôÊ†∑„ÄÇ

@ifnotdocbook
@cindex Brennan, Michael
@display
Michael Brennan
Author of @command{mawk}
October 2014
@end display
@end ifnotdocbook

@node ÂâçË®Ä
@unnumbered ÂâçË®Ä
@c I saw a comment somewhere that the preface should describe the book itself,
@c and the introduction should describe what the book covers.
@c
@c 12/2000: Chuck wants the preface & intro combined.

@c This bit is post-processed by a script which turns the chapter
@c tag into a preface tag, and moves this stuff to before the title.
@c Bleah.
@docbook
  <prefaceinfo>
    <author>
      <firstname>Arnold</firstname>
      <surname>Robbins</surname>
      <affiliation><jobtitle>Nof Ayalon</jobtitle></affiliation>
      <affiliation><jobtitle>Israel</jobtitle></affiliation>
    </author>
    <date>February 2015</date>
   </prefaceinfo>
@end docbook

ÂΩìÂ∑•‰Ωú‰∫éÊñáÊú¨Êñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÊúâÂá†Á±ªÂ∑•‰Ωú‰∏çÊñ≠ÈáçÂ§çÂá∫Áé∞„ÄÇ
‰Ω†ÂèØËÉΩÊÉ≥ÊäΩÂèñÊåáÂÆöÁöÑË°åÂπ∂‰∏¢ÂºÉÂÖ∂‰ªñÈÉ®ÂàÜ„ÄÇÊàñËÄÖ‰Ω†ÊÉ≥Êõ¥ÊîπÁâπÂÆöÊ®°ÂºèÁöÑÊñáÊú¨ÔºåËÄåÂÖ∂‰ªñÈÉ®ÂàÜÁöÑ‰∏çÂèò„ÄÇ
ËøôÊ†∑ÁöÑÂ∑•‰Ωú‰ΩøÁî® @command{awk} Êù•ÂÆåÊàêÈÄöÂ∏∏ÂæàÁÆÄÂçï„ÄÇ@command{awk} Â∑•ÂÖ∑Ëß£ÈáäÁâπÂÆöÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºå‰ΩøÂæóÂÆÉÂ§ÑÁêÜÊï∞ÊçÆÈáçÁªÑÁöÑÂ∑•‰ΩúÈùûÂ∏∏Âú®Ë°å„ÄÇ

GNU ÁâàÊú¨ÁöÑ @command{awk} Áß∞‰∏∫ @command{gawk}„ÄÇÂú®‰ΩøÁî®ÊÅ∞ÂΩìÁöÑÂèÇÊï∞ÊàñËÄÖÁéØÂ¢ÉÂèòÈáèÁöÑÊÉÖÂÜµ‰∏ãÔºå
ÂÆÉÂÆåÂÖ®‰∏é POSIX Ê†áÂáÜ@footnote{The 2008 POSIX standard is accessible online at
@w{@url{http://www.opengroup.org/onlinepubs/9699919799/}.}} @command{awk} ËØ≠Ë®ÄÂÖºÂÆπÔºåÂêåÊó∂‰∏é Brian Kemighan Áª¥Êä§ÁöÑ Unix ÁâàÊú¨ÁöÑ @command{awk} ËØ≠Ë®ÄÂÖºÂÆπ„ÄÇ
ËøôÂ∞±ÊòØËØ¥ÔºåÊ≠£Á°ÆÁºñÂÜôÁöÑ @command{awk} Á®ãÂ∫èÔºå‰πüÂèØ‰ª•Âú® @command{gawk} ‰∏ãËøêË°å„ÄÇÂõ†Ê≠§ÔºåÂú®Â§ßÂ§öÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰∏çÂå∫Âà´‰∏§ËÄÖÁöÑÂÆûÁé∞„ÄÇ

@cindex @command{awk}, POSIX and, See Also POSIX @command{awk}
@cindex @command{awk}, POSIX and
@cindex POSIX, @command{awk} and
@cindex @command{gawk}, @command{awk} and
@cindex @command{awk}, @command{gawk} and
@cindex @command{awk}, uses for

ÈÄöËøá @command{awk} Êàë‰ª¨ÂèØ‰ª•ËææÂà∞Â¶Ç‰∏ãÁõÆÁöÑÔºö

@itemize @value{BULLET}
@item
ÁÆ°ÁêÜÂ∞èÁöÑ‰∏™‰∫∫Êï∞ÊçÆÂ∫ì

@item
‰∫ßÁîüÊä•Ë°®

@item
ÂÆåÂñÑÊï∞ÊçÆ

@item
‰∫ßÁîüÁ¥¢ÂºïÂπ∂ÊâßË°åÂÖ∂‰ªñÊñá‰ª∂ÂáÜÂ§áÂ∑•‰Ωú

@item
ÂÆûÈ™åÁÆóÊ≥ïÔºåËøôÊ†∑ÂèØ‰ª•ÂõûÂ§¥Áî®ÂÖ∂‰ªñÁöÑËØ≠Ë®ÄÂÆûÁé∞„ÄÇ

@end itemize

@cindex @command{awk}, See Also @command{gawk}
@cindex @command{gawk}, See Also @command{awk}
@cindex @command{gawk}, uses for

Èô§Ê≠§‰πãÂ§ñÔºå@command{gawk} ËøòÊèê‰æõÂ¶Ç‰∏ãËÆæÊñΩÔºå‰ΩøÊàë‰ª¨ËÉΩÂ§üÔºö

@itemize @value{BULLET}
@item
ÊäΩÂèñÊï∞ÊçÆÁöÑ‰ΩçÊàñËÄÖÂùóÁî®‰∫éÂ§ÑÁêÜ

@item
ÊéíÂ∫èÊï∞ÊçÆ

@item
ÂÆûÁé∞ÁÆÄÂçïÁöÑÁΩëÁªúÈÄöËÆØ

@item
ÊµãËØÑÂπ∂Ë∞ÉËØï @command{awk} Á®ãÂ∫è

@item
Áî® C/C++ ÁºñÂÜôÂáΩÊï∞‰ª•Êâ©Â±ïËØ≠Ë®ÄÂäüËÉΩ

@end itemize

Êú¨@value{DOCUMENT}‰ºöÂêë‰Ω†‰ª¨‰º†Êéà @command{awk} ËØ≠Ë®ÄÔºåÂπ∂ÂëäËØâ‰Ω†‰ª¨Â¶Ç‰ΩïÊù•ÊúâÊïàÂú∞‰ΩøÁî®ÂÆÉ„ÄÇ
‰Ω†ÊúâÂèØËÉΩÂ∑≤ÁªèÁÜüÊÇâÂü∫Êú¨ÁöÑÁ≥ªÁªüÂëΩ‰ª§ÔºåÂ¶Ç @command{cat}„ÄÅ@command{ls}@footnote{Ëøô‰∫õÂ∑•ÂÖ∑Âú® Posix ÂÖºÂÆπÁöÑÁ≥ªÁªü‰∏äÈÉΩÊúâÔºåÂú®‰º†ÁªüÁöÑÂü∫‰∫é Unix ÁöÑÁ≥ªÁªü‰∏ä‰πüÂ≠òÂú®„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØ‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÁ≥ªÁªüÔºå‰Ω†‰πüÈúÄË¶ÅÁÜüÊÇâ‰∏Ä‰∫õ IO ÈáçÂÆöÂêëÂèäÁÆ°ÈÅìÁöÑÊ¶ÇÂøµ„ÄÇ} Á≠âÔºå‰πüÁÜüÊÇâ‰∏Ä‰∫õÂü∫Êú¨ÁöÑ shell Â∑•ÂÖ∑ÔºåÂ¶ÇËæìÂÖ•ËæìÂá∫ÈáçÂÆöÂêë‰ª•ÂèäÁÆ°ÈÅì„ÄÇ

@cindex GNU @command{awk}, See @command{gawk}

@command{awk} ËØ≠Ë®ÄÁöÑÂÆûÁé∞ÂèØ‰ª•Âú®ËÆ∏Â§ö‰∏çÂêåÁöÑËÆ°ÁÆóÊú∫ÁéØÂ¢É‰∏≠Ëé∑Âèñ„ÄÇ
Êú¨@value{DOCUMENT}Èô§‰∫ÜÊèèËø∞ @command{awk} ËØ≠Ë®ÄÁöÑÊÄª‰ΩìÔºå‰πü‰ºöÊèèËø∞@command{awk} ÁöÑÁâπÊÆäÂÆûÁé∞ÔºåÂç≥ @command{gawk}ÔºàË°®Á§∫ GNU @command{awk}Ôºâ„ÄÇ
@command{gawk} Âú®ÂæàÂ§ö Unix Á≥ªÁªü‰∏ãËøêË°åÔºåÂåÖÊã¨‰ªé Intel Êû∂ÊûÑÁöÑ PC Êú∫ÔºåÂà∞Â§ßÂûãÊú∫Á≥ªÁªü„ÄÇ
@command{gawk} ‰πüË¢´ÁßªÊ§çÂà∞‰∫Ü Mac OS Âπ≥Âè∞ÔºåWindows Âπ≥Âè∞
@ifset FOR_PRINT
ÔºàÊâÄÊúâÁâàÊú¨Ôºâ
@end ifset
@ifclear FOR_PRINT
ÔºàÊâÄÊúâÁâàÊú¨Ôºâ ‰ª•Âèä OS/2 ÁöÑ PC Êú∫Ôºå
@end ifclear
ËøòÊúâ OpenVMS@footnote{‰∏Ä‰∫õÂ∑≤Áªè‰∏çÁî®ÁöÑÁ≥ªÁªüÔºåÂú®Ëøô‰∫õÁ≥ªÁªü‰∏ä @command{gawk} ÊúâËøáÁßªÊ§çÔºå‰ΩÜÊòØÂ∑≤Áªè‰∏çÂÜçÊîØÊåÅÔºåÂπ∂‰∏î‰∏∫ÊîØÊåÅËøô‰∫õÁ≥ªÁªüËÄåÂ≠òÂú®ÁöÑ‰ª£Á†Å‰πüÂ∑≤ÁªèÁßªÈô§} Á≥ªÁªü‰∏ä„ÄÇ‚ÄÉ

@node ËØëÂ∫è
@unnumbered ËØëÂ∫è

ËøôÊòØÊàëÁ¨¨‰∏ÄÊ¨°ÁøªËØëËøô‰πàÈïøÁöÑ‰π¶„ÄÇ

ÂΩìÊàëÁúãÂà∞ GAWK ÁÆÄÂçïÁöÑËØ≠Ë®Ä‰∏éÂº∫Â§ßÁöÑÂäüËÉΩÊó∂ÔºåÊàë‰∫éÊòØÊÉ≥Âà∞ÁΩë‰∏äÊü•Êâæ‰∏Ä‰∫õ‰∏≠ÊñáÁöÑËµÑÊñôÔºå‰ª•Âø´ÈÄüÂ≠¶‰π†‰∏Ä‰∏ãËøô‰∏™Â∑•ÂÖ∑ÔºåËøôÊ†∑ÂèØ‰ª•Êñπ‰æøÊàëÂú®Â§ÑÁêÜ Linux Â≠ó‰∏≤Êó∂ËÉΩÂ§ü‰ΩøÁî®Âà∞ÂÆÉ„ÄÇ

‰ΩÜÊòØÊàëÂæàÂ§±ÊúõÔºåÊâæ‰∫ÜÂæà‰πÖÔºåËÉΩÂ§üÊâæÂà∞ÁöÑËµÑÊñôÂü∫Êú¨‰∏äÊòØÊîØÁ¶ªÁ†¥Á¢éÁöÑÔºåÂπ∂Ê≤°ÊúâÂÆåÊï¥ÂÖ®Èù¢ÁöÑ‰∏≠ÊñáÊâãÂÜå„ÄÇÊàë‰∫éÊòØÊ±ÇÂÖ∂Ê¨°Âú∞Êâæ‰∫Ü‰∏Ä‰∏™Ëã±ÊñáÊñáÊ°£ÔºåÂÖ∂ÂéüÂêç‰∏∫„ÄäGAWK: Effective AWK Programming„ÄãÔºåÁî± Arnold D. RobbinsÔºåÂç≥ @command{gawk} ÂΩìÂâçÁöÑ‰∏ªË¶ÅÁª¥Êä§ËÄÖ‰πã‰∏ÄÁºñÂÜô„ÄÇÂàùÁúã‰πã‰∏ãÔºåÈáåÈù¢ÁöÑÂÜÖÂÆπÊµÖÊòæÊòìÊáÇÔºåÊ≠£Â•ΩÁ¨¶ÂêàÊàëËá™Â∑±ÁöÑÈúÄÊ±Ç„ÄÇÂõ†‰∏∫Ëøô‰∏™ÂéüÂõ†ÔºåÊàëËêåÂèë‰∫ÜÂ∞ÜËøô‰∏™ÊâãÂÜåÁøªËØë‰∏∫‰∏≠ÊñáÁöÑÊÉ≥Ê≥ï„ÄÇ‰ΩÜÊòØÊàëÊãø‰∏çÂáÜÊàëÊòØÂê¶ÊúâËøôÊ†∑ÁöÑÂùöÊåÅÔºåËÉΩÂ§üÂ∞ÜËøô‰∏™ÊâãÂÜåÂÖ®ÈÉ®ÁøªËØëÂá∫Êù•„ÄÇ

ÊàëÈïø‰πÖÈÉΩÊ≤°ÊúâÂä®ÊâãÔºå‰∏ªË¶ÅÊòØÂõ†‰∏∫Ê≤°ÊúâËøô‰∏™È≠ÑÂäõ‰∏ãÂÆöÂÜ≥ÂøÉÊù•ÂÅöËøô‰ª∂‰∫ãÊÉÖÔºåÂÜç‰∏Ä‰∏™ÂØπ‰∫éËá™Â∑±ÁöÑËØ≠Ë®ÄËÉΩÂäõ‰πü‰∏çÂ§™Ëá™‰ø°„ÄÇ‰∏ÄÂπ¥ÂêéÔºåËøô‰∏™ÊÉ≥Ê≥ï‰∏ÄÁõ¥Âú®Â§ßËÑëÈáåÊå•‰πã‰∏çÂéª„ÄÇ‰∫éÊòØÂøÉÈáåÁõòÁÆóÔºåËã±ÊñáÊñáÊ°£Â§ßÊ¶ÇÊúâ 500 Â§öÈ°µÔºåÂ¶ÇÊûúÊàëÊØèÂ§©ÁøªËØë‰∏§È°µÔºåÂàô‰∏ÄÂπ¥ÂêéÔºåÊÄé‰πàÁùÄ‰πüËÉΩÂ§üÊääËøô‰∏™ÊñáÊ°£ÁøªËØëÂá∫Êù•„ÄÇÂπ∂‰∏îÔºåÂ¶ÇÊûúËÉΩÂ§üÁøªËØëÂà∞ÂõõÈ°µÔºåÂàôÊâÄÈúÄË¶ÅÁöÑÊó∂Èó¥Á´ãÂç≥ÂáèÂ∞ë‰∏ÄÂçä„ÄÇÁøªËØë‰∏ÄÊú¨Ëã±Êñá‰π¶ÔºåÈô§ÂéªËÉΩÂäõÂ§ñÔºåËøòÂæóÁúãËá™Â∑±ÊòØ‰∏çÊòØËÉΩÂ§üÊîæÂºÉÁøªËØëÊó∂ÁöÑÂäüÂà©ÊÉ≥Ê≥ïÔºåËßâÂæóËøô‰πàÂÅöÊòØÂê¶ÂÄºÂæó„ÄÇÂπ∂Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊòØÂê¶ËÉΩÂ§üÂùöÊåÅ‰∏Ä‰∏™ËæÉÈïøËÄåÊó†Âë≥ÁöÑËøáÁ®ãÔºåÊúÄÂêéÂ∞ÜÊñáÊ°£ÁøªËØëÂá∫Êù•„ÄÇÊúÄÂêéÔºåÊàëËøòÊòØ‰∏ãÂÆöÂÜ≥ÂøÉÔºåËØï‰∏ÄËØï„ÄÇ

‰∫éÊòØÊàëÁ¨¨‰∏ÄÊ≠•ÊòØÂ∞Ü PDF Ê†ºÂºèÁöÑËã±ÊñáÊñáÊ°£ËΩ¨Êç¢Êàê Word ÊñáÊ°£ÔºàÊàëÁî®ÂÖ∂‰ªñÁöÑÂ∑•ÂÖ∑ËΩ¨Êç¢ËøáÔºå‰ΩÜÊòØÁªìÊûú‰∏çÊòØÂæàÂ•Ω„ÄÇÂõ†‰∏∫ÂéüÊù•ÁöÑ PDF ÊñáÊ°£‰∏≠ÊúâÂæàÂ§öÁâπÂà´ÁöÑÊ†ºÂºèÔºåÂú® Word ‰∏≠ÂæàÈöæÊéßÂà∂„ÄÇÊâÄ‰ª•‰∏Ä‰∏çÂÅöÔºå‰∫å‰∏ç‰ºëÔºåÂπ≤ËÑÜÊääÊñáÂ≠óÂ§çÂà∂Âá∫Êù•ÔºåÂÜçË∞ÉÊï¥ÂÖ∂Ê†ºÂºè‰∏éÂéüÊù•ÁöÑ PDF Áõ∏Á¨¶„ÄÇÊàë‰∏çÁü•ÈÅìËøô‰πàÂÅöÊòØ‰∏çÊòØÂæàË†¢ÔºåÂπ∂ÊúâËøùÁ®ãÂ∫èÂëòÊáíÁöÑÁæéÂêçÔºÅÔºâ„ÄÇÂÖâËøô‰∏™‰∫ãÊÉÖÂ∞±ËÄó‰∫ÜÊàëËøë‰∏Ä‰∏™ÊòüÊúüÁöÑÊó∂Èó¥Ôºå2016 Âπ¥Êò•ËäÇÂâçÊääËøô‰∏™Â∫ïÊú¨ÂÅöÂ•Ω‰∫ÜÔºåÂπ∂‰∏îÂºÄÂßã‰∫ÜÁøªËØë„ÄÇ

ÂÆûÂú®ÁöÑÔºåÂâçÈù¢ÁöÑÁøªËØëÈÄüÂ∫¶ÊòØÊúâ‰∏ÄÁÇπÊÖ¢Ôºå‰ΩÜÊòØÊÄª‰ΩìÊù•ËØ¥ÔºåËøòÊòØÊåâÁÖßÂéüÂÖàÁöÑËÆæËÆ°ÈÄüÂ∫¶ËøõË°åÁöÑ„ÄÇÂ∞±ÁÆóÂú®ËøáÂπ¥ÁöÑÂá†Â§©ÈáåÔºåÂá†‰πéÊØèÂ§©ÈÉΩÊúâËøõÂ±ï„ÄÇËÄå‰∏îÔºåÁøªËØëÁöÑÈöæÂ∫¶‰∏çÊòØÂæàÂ§ßÔºåÊúÄËÄÉÈ™å‰∫∫ÁöÑÊòØÊØèÂ§©Ë¶ÅÊãøÂá∫‰∏ÄÂÆöÁöÑÊó∂Èó¥Êù•ÂÅöËøô‰∏™‰∫ãÊÉÖ„ÄÇÂõ†‰∏∫‰∏ÄÊó¶ÂÅú‰∏ãÊù•ÔºåÂ∞±‰ºö‰∏∫ÂÅú‰∏ãÊù•ÊâæÁêÜÁî±„ÄÇÂêéÈù¢Â∞±‰ºöÊúâË∂äÊù•Ë∂äÂ§öÁöÑÁêÜÁî±Êù•‰∏∫Âª∂ËøüÂºÄËÑ±„ÄÇÊâÄ‰ª•ÔºåËá™‰ªéÁøªËØëÂºÄÂßãÔºåÊàëÂá†‰πéÊ≤°Êúâ‰∏≠Êñ≠ÊØèÂ§©ÂÅö‰∏ÄÁÇπÁøªËØë„ÄÇÂú®ÁøªËØëÊúÄÂêéÁöÑÂá†‰∏™ÈôÑÂΩï‰∏≠ÔºåÊàëËøòÂ∑ÆÁÇπË¶ÅÊîæÂºÉÁøªËØë‰∏ãÂéªÔºåÂõ†‰∏∫ËßâÂæóÈÇ£‰∫õ‰∏úË•øÁøªËØëÊ≤°Êúâ‰ªÄ‰πàÁî®„ÄÇ‰ΩÜÊòØ‰∏∫‰∫Ü‰øùËØÅÁøªËØëÁöÑÂÆåÊï¥ÊÄßÔºåÂêåÊó∂‰πü‰∏∫ÊääËøô‰∏™‰∫ãÊÉÖÂÅö‚ÄúÂúÜÊª°‚ÄùÔºåÊàëËøòÊòØÂùöÊåÅÊääËøô‰∏™‰∫ãÊÉÖÂÅö‰∏ãÊù•‰∫Ü„ÄÇÊúÄÂêéÂè™Ââ©‰∏ã GPL ‰∏é FDL Ê≤°ÊúâÁøªËØë„ÄÇËøô‰∏§‰∏™ÂçèËÆÆÊØîËæÉÂÖ∂‰ªñÁöÑÈÉ®ÂàÜÊúâÈöæÂ∫¶‰∏Ä‰∫õ„ÄÇÂÖ≥ÈîÆÂú®‰∫éË¶ÅÁøªËØëÂá∫Â∏¶ÁÇπÂçèËÆÆÊÄßË¥®ÔºåËØ≠Ë®ÄÁ≤æÂáÜËÄå‰∏î‰∏•Ë∞®ÔºåÁ°ÆÂÆûÂØπÊàëËÄåË®ÄÔºåËÉΩÂäõËøòÊòØ‰∏çÂ§üÁöÑ„ÄÇËÄå‰∏îËøô‰∏§‰∏™ÂçèËÆÆÔºåÊàëÊÉ≥Âú®‰∫íËÅîÁΩë‰∏äÂ∫îËØ•Â∑≤ÁªèÊúâ‰∫ÜÔºåÊâÄ‰ª•‰πüÂ∞±‰∏çÂÜçÁøªËØë‰∫Ü„ÄÇ

ÁøªËØëÂà∞ÂêéÈù¢ÁöÑÊó∂ÂÄôÔºåËá™Â∑±Á°ÆÂÆûÊÑüËßâÊØîÂéüÊù•Âø´‰∫ÜÔºåÂèØËÉΩÊòØÂõ†‰∏∫ÁÜüÁªÉ‰∫ÜÁöÑÂéüÂõ†„ÄÇÂâ©‰∏ãÁöÑÊï¥ÁêÜ‰πüËä±Êéâ‰∫ÜÊàëÁöÑ‰∏Ä‰∫õÊó∂Èó¥„ÄÇÈÄöËøáÁøªËØëËøô‰∏™‰∫ãÊÉÖÔºåÁ°ÆÂÆû‰ΩøËá™Â∑±ÊúâÂ¶Ç‰∏ãÊî∂Ëé∑Ôºö

@enumerate
@item
Ëá≥Â∞ëÂØπ Word ÊñáÊ°£ÁöÑÊìç‰ΩúÊúâ‰∏ÄÁÇπÁÇπÊèêÂçá„ÄÇ

@item
ËÄÉÈ™åÂπ∂ÊèêÂçá‰∫Ü‰∏Ä‰∏ãËá™Â∑±ÁöÑËÉΩÂäõ„ÄÇ

@item
ÂÜçÈÅáÂà∞ÈïøÁöÑËã±ÊñáÊñáÊ°£ÔºåÂèØËÉΩÂ∞±Ê≤°ÈÇ£‰πàÊÄµ‰∫Ü„ÄÇ

@item
ÁøªËØëËÉΩÂäõÊòØÂê¶ÊúâÂ§ßÁöÑÊèêÈ´òÔºåËøô‰∏™‰∏çÂ•ΩËØ¥Ôºå‰ΩÜÊòØÂ∫îËØ•Êúâ‰∏ÄÁÇπÂêß„ÄÇ

@end enumerate

ËøôÈáåÁöÑÊñáÂ≠óÔºåÂá†‰πéÈÉΩÊòØ‰∏Ä‰∏™Â≠ó‰∏Ä‰∏™Â≠óÁ†ÅËµ∑Êù•ÔºåËÄå‰∏î‰πüÊòØÁ¨¨‰∏ÄÊ¨°ÁøªËØëÔºåÈáåÈù¢ËÇØÂÆöËøòÊòØÊúâÂæàÂ§öÈîôËØØÁöÑÂú∞ÊñπÔºå‰πüÊúâ‰∏Ä‰∫õËØç‰∏çËææÊÑèÁöÑÂú∞ÊñπÔºåÂØπ‰∫éÊ±âËØ≠ÁöÑÊéåÊè°ÊúâÊ¨†ÁÅ´ÂÄôÔºå‰πü‰ºö‰ΩøÂæóÁøªËØëÂá∫Êù•ÁöÑË°åÊñáÊ≤°ÊúâÈÇ£‰πàÁ¨¶Âêà‰∏≠Êñá‰π†ÊÉØÔºåÊàñËÄÖ‰∏çÂ§ü‰ºòÁæé„ÄÇËøô‰∫õÁúüËøòÂæóË¶ÅÂêÑ‰ΩçÊµ∑Ê∂µÔºåÂ¶ÇÊûúÂ§ßÂÆ∂ËßâÂæóËøô‰∏™ÁøªËØëÂØπÂ§ßÂÆ∂Êúâ‰∏ÄÁÇπ‰ΩúÁî®ÔºåÊàëÂ∞±ËßâÂæóËøô‰∫õ‰ªòÂá∫‰πüÂÄºÂæó‰∫Ü„ÄÇÂ¶ÇÊûúËØªËÄÖÊõ¥ÊÖ∑ÊÖ®‰∏ÄÁÇπÔºåËÉΩÂ§üÂëäËØâÊàëÂì™ÈáåÊúâÈóÆÈ¢òÔºåÊàñËÄÖÊúâ‰∏Ä‰∫õÊîπËøõÁöÑÂª∫ËÆÆÈÇ£Â∞±Êõ¥Â•Ω‰∫Ü„ÄÇÂ¶ÇÊûúÊúâËøôÊñπÈù¢ÁöÑÊîπËøõÔºåËØ∑ÂèëÈÇÆ‰ª∂Âà∞ yeyouqun@@163.com„ÄÇ

ÊàëÂ∏åÊúõÊàëÁöÑ‰∏ÄÁÇπÂ∞èÂä™ÂäõÔºå‰πü‰∏∫‰∏≠ÂõΩÁöÑËΩØ‰ª∂‰∫ã‰∏öÂÅö‰∫Ü‰∏ÄÁÇπÁÇπË¥°ÁåÆ„ÄÇ

Âú®ÊúÄÂêéÔºåÂ¶ÇÊûúË¶ÅÊúâ‰ªÄ‰πàÊÑüË∞¢ÁöÑÔºåÈ¶ñÂÖàÂæóË¶ÅÊÑüË∞¢Ëá™Áî±ËΩØ‰ª∂ËøêÂä®ÁöÑÂèëËµ∑ËÄÖ‰ª¨„ÄÇÂ¶ÇÊûúÊ≤°Êúâ‰ªñ‰ª¨ÔºåÂ∞±‰∏ç‰ºöÊúâËá™Áî±ËΩØ‰ª∂Á§æÂå∫Ôºå‰πüÂ∞±‰∏ç‰ºöÊúâ GNU/LinuxÔºå‰πüÂ∞±Ê≤°Êúâ GAWK Ëøô‰∫õ‰ºòÁßÄÁöÑÂ∑•ÂÖ∑„ÄÇÂÖ∂Ê¨°ËøòË¶ÅÊÑüË∞¢ÂéüÊñáÁöÑ‰ΩúËÄÖ„ÄÇÂà´‰∫∫‰πüÊòØËá™Áî±ËΩØ‰ª∂ÁöÑÊã•Ë∂∏ÔºåÂ¶ÇÊûúÊ≤°Êúâ‰ªñ‰ª¨ÁöÑÂÖàÊúü‰ªòÂá∫Ôºå‰πüÂ∞±Ê≤°ÊúâËøô‰∏™ÊñáÊ°£ÁöÑÂ≠òÂú®„ÄÇÁõÆÂâçËøòÂè™ÊúâÊàë‰∏Ä‰∏™‰∫∫Âú®ÁøªËØëËøô‰∏™ÊñáÊ°£ÔºåÂ¶ÇÊûúÂèØ‰ª•ÔºåÊàëÊÉ≥Â∞èÊøÄÂä®Âú∞ÊÑüË∞¢‰∏Ä‰∏ãËá™Â∑±„ÄÇÊàëÂ∏åÊúõ‰ª•ÂêéÊÑüË∞¢ÂàóË°®ËÉΩÂ§üÂèòÂæóÊõ¥Èïø„ÄÇÂ∏åÊúõÊõ¥Â§öÁöÑ‰∫∫ÂèÇ‰∏éÂà∞ÂÆåÂñÑÂÆÉÁöÑËøáÁ®ãÈáåÊù•„ÄÇ

ÂØπ‰∫ÜÔºåÊàëÊÉ≥ÊÑüË∞¢‰∏Ä‰∏ãÊàëÂÑøÂ≠ê„ÄÇÂ•ΩÂ§öÊ¨°ÊàëÊâìÂºÄÁîµËÑëÂºÄÂêØ‰∏ÄÂ§©ÁöÑÁøªËØëÂ∑•‰ΩúÁöÑÊó∂ÂÄôÔºå‰ªñÁªèÂ∏∏‰ºöÂú®ÈîÆÁõò‰∏äÈöèÊÑèÊï≤ÂáªÔºå‰ΩøÂæóÊàëËøòÂæóËä±Êéâ‰∏Ä‰∫õÊó∂Èó¥Êù•Êí§ÈîÄ‰ªñÊâÄÂÅöÁöÑ‚ÄúÂ∑•‰Ωú‚Äù„ÄÇËÄå‰∏îËøòË¶ÅÂö∑ÁùÄË¶ÅÂê¨ „ÄäABCD Ê≠å„Äã‰ªÄ‰πàÁöÑÔºåËøòÂæóÈô™‰ªñÂê¨‰ªñÊâÄËØ¥ÁöÑ‰∏Ä‰∏áÂàÜÈíüÈÇ£‰πà‰πÖ„ÄÇ

‰∏çËá™ÈáèÂäõÁöÑÂè∂‰ΩëÁæ§

2016 Âπ¥ 4 Êúà 

@menu
* History::                     @command{gawk} ‰∏é @command{awk} ÁöÑÂéÜÂè≤„ÄÇ
* Names::                       @command{awk} ÁöÑÂà´Âêç„ÄÇ
* This Manual::                 ‰ΩøÁî®Êú¨@value{DOCUMENT}ÔºõÂåÖÊã¨‰Ω†ÂèØ‰ª•‰ΩøÁî®ÁöÑËæìÂÖ•Êñá‰ª∂Ê†∑‰æã„ÄÇ
* Conventions::                 ÊéíÁâàÁ∫¶ÂÆö„ÄÇ
* Manual History::              Brief history of the GNU project and this
                                @value{DOCUMENT}.
* How To Contribute::           Helping to save the world.
* Acknowledgments::             Acknowledgments.
@end menu

@node History
@unnumberedsec @command{awk} ‰∏é @command{gawk} ÁöÑÂéÜÂè≤
@cindex recipe for a programming language
@cindex programming language, recipe for
@sidebar ÁºñÁ®ãËØ≠Ë®ÄËèúÂçï

@multitable {2 parts} {1 part  @code{egrep}} {1 part  @code{snobol}}
@item @tab 1 ‰ªΩ @code{egrep} @tab 1 ‰ªΩ @code{snobol}@footnote{SNOBOLËØ≠Ë®ÄÔºå‰∏ÄÁßçÈù¢ÂêëÂ≠óÁ¨¶‰∏≤Á¨¶Âè∑ÔºàStriNg Oriented symBOlic LanguageÔºâËØ≠Ë®Ä„ÄÇ‚Äî‚ÄîËØëËÄÖ}
@item @tab 2 ‰ªΩ @code{ed} @tab 3 ‰ªΩ C
@end multitable

Â∞ÜÊâÄÊúâÈÉ®ÂàÜÈÄöËøá @code{lex} ‰∏é @code{yacc} Ê∑∑ÂêàÂú®‰∏ÄËµ∑ÔºåÂπ∂‰∏îËæÖ‰ª•Â∞ëÈáèÊñáÊ°£ÔºåÂπ∂ÂèëÂ∏É„ÄÇ

8 Âπ¥ÂêéÔºåÊ∑ªÂä†Â§ö‰∏Ä‰ªΩ @code{egrep}Ôºå‰ª•Âèä‰∏§‰ªΩÁöÑ C„ÄÇÊñáÊ°£ÂÆåÂ§áÁÑ∂ÂêéÂèëÂ∏É„ÄÇ
@end sidebar

@cindex Aho, Alfred
@cindex Weinberger, Peter
@cindex Kernighan, Brian
@cindex @command{awk}, history of

@command{awk} ÁöÑÂêçÂ≠óÊù•Ê∫ê‰∫éÊúÄÂàùÁöÑËÆæËÆ°ËÄÖÔºöAlfred V.@:
Aho, Peter J.@: Weinberger Âíå Brian W.@: Kernighan„ÄÇ
ÂÆÉÁöÑÁ¨¨‰∏Ä‰∏™ÁâàÊú¨ÂÜô‰∫é 1977 Âπ¥ÁöÑ AT&T Ë¥ùÂ∞îÂÆûÈ™åÂÆ§„ÄÇ
1985 Âπ¥ÔºåÊñ∞ÁâàÊú¨ËØ≠Ë®ÄÈÄöËøáÂºïÂÖ•Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞„ÄÅÂ§öËæìÂÖ•ÊµÅ„ÄÅÊ≠£ÂàôË°®ËææÂºèÔºåËÄå‰ΩøÂæóÂÖ∂ÂäüËÉΩÊõ¥Âä†Âº∫Â§ß„ÄÇ
Êñ∞ÁâàÊú¨ÁöÑ @command{gawk} Âú® Unix System V Release 3.1Ôºà1987 Âπ¥ÔºâÁöÑÊó∂ÂÄôÂ∑≤ÁªèÂπøÊ≥õÂèØÁî®„ÄÇ
ËÄåÂú® System V Release 4Ôºà1989 Âπ¥Ôºâ‰∏≠ÁöÑÁâàÊú¨Ê∑ªÂä†‰∫Ü‰∏Ä‰∫õÊñ∞ÁöÑÁâπÊÄßÔºåÂπ∂Ê∏ÖÁêÜÊéâ‰∫Ü‰∏Ä‰∫õËØ≠Ë®ÄÁöÑ‚ÄúÊöóËßí‚ÄùË°å‰∏∫„ÄÇ
Âú® POSIX ÂëΩ‰ª§ËØ≠Ë®Ä‰ª•ÂèäÂ∑•ÂÖ∑Ê†áÂáÜ‰∏≠ÔºåÂØπ @command{awk}ËßÑËåÉËøõË°åËøõ‰∏ÄÊ≠•ÁöÑÊæÑÊ∏Ö„ÄÇ
@command{gawk} ÁöÑËÆæËÆ°ËÄÖ‰∏éÊúÄÂàùÁöÑ @command{awk} ËÆæËÆ°ËÄÖÂØπ‰∫é POSIX ËßÑËåÉÈÉΩÊúâÁõ∏Â∫îÁöÑÂèçÈ¶à„ÄÇ

@cindex Rubin, Paul
@cindex Fenlason, Jay
@cindex Trueman, David
Paul Rubin Âú® 1986 Âπ¥ÁºñÂÜô‰∫Ü @command{gawk}ÔºåJay Fenlason Ê†πÊçÆ Richard Stallman ÁöÑÂª∫ËÆÆÂÆåÂñÑ‰∫ÜÂÆÉ„ÄÇ
John Woods ‰πüË¥°ÁåÆ‰∫ÜÈÉ®ÂàÜ‰ª£Á†Å„ÄÇÂú® 1988 Âπ¥Âíå 1989 Âπ¥ÔºåDavid Trueman Âú®ÊàëÁöÑÂ∏ÆÂä©‰∏ãÂÆåÂÖ®ÈáçÊûÑ‰∫Ü @command{gawk}Ôºå‰ª•Ëß£ÂÜ≥‰∏éÊõ¥Êñ∞ÁöÑ @command{awk} ÂÖºÂÆπÁöÑÈóÆÈ¢ò„ÄÇ
Â§ßÊ¶ÇÊòØ 1994 Âπ¥ÔºåÊàëÊàê‰∏∫‰∫Ü‰∏ªË¶ÅÁöÑÁª¥Êä§ËÄÖ„ÄÇÁé∞Âú®ÁöÑÁâàÊú¨‰∏ªË¶ÅÁùÄÁúº‰∫é Bug ‰øÆÂ§ç„ÄÅÊÄßËÉΩÊèêÂçáÔºåÊ†áÂáÜÂåñÔºåÊúâÊó∂‰πüÊ∑ªÂä†‰∏Ä‰∫õÊñ∞ÁöÑÁâπÊÄß„ÄÇ

1997 Âπ¥ 5 ÊúàÔºåJ@"urgen Kahrs ËßâÂæóÊúâÂøÖË¶ÅÁî® @command{awk} ËÆøÈóÆÁΩëÁªúÔºåÂú®ÊàëÁöÑ‰∏Ä‰∫õÂ∏ÆÂä©‰∏ãÔºå@command{gawk} Ê∑ªÂä†Ëøõ‰∫ÜËøôÊ†∑ÁöÑÁâπÊÄß„ÄÇ
ÂΩìÊó∂Ôºå‰ªñ‰πüÂÜô‰∫Ü @cite{@value{GAWKINETTITLE}}
Ôºà‰∏Ä‰∏™ÂçïÁã¨ÂèØËé∑ÂèñÁöÑÊñáÊ°£ÔºåÊòØ gawk ÂèëË°åÁâàÊú¨ÁöÑ‰∏ÄÈÉ®ÂàÜÔºâÁöÑ‰∏ª‰ΩìÂÜÖÂÆπ„ÄÇ
‰ªñÁöÑ‰ª£Á†ÅÊúÄÁªàÂú® @command{gawk} 3.1 @value{PVERSION} ÁöÑÊó∂ÂÄôÊàê‰∏∫‰∏ªÊµÅ @command{gawk} ÂèëÂ∏ÉÁâàÊú¨ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

John Haque ÈáçÂÜô‰∫Ü @command{gawk} ÁöÑÂÜÖÈÉ®ÂÆûÁé∞Ôºå‰ª•Êèê‰æõ @command{awk} Á∫ßÁöÑË∞ÉËØïÂô®ÔºåËøô‰∏™ÁâàÊú¨Âú® 2011 Âπ¥ÁöÑ @command{gawk} 4.0 @value{PVERSION} ÂèØÁî®„ÄÇ

Êü•Áúã @ref{Contributors}„ÄÇ

@node Names
@unnumberedsec Áé´Áë∞Âà´Âêç

@cindex @command{awk}, new vs.@: old

@command{awk} ËØ≠Ë®ÄÂ∑≤ÁªèËøõÂåñ‰∫ÜÂ§öÂπ¥ÔºåÂú® @ref{Language History}ÔºåÊúâÂÆåÂÖ®ÁöÑÂàóË°®„ÄÇ
Âú®Êú¨@value{DOCUMENT}‰∏≠ÊâÄÊ∂âÂèäÁöÑÊàë‰ª¨ÂèØ‰ª•Áß∞‰∏∫‚Äúnew @command{awk}‚Äù„ÄÇ
Á±ª‰ººÁöÑÔºå@command{awk} ÁöÑÂéüÂßãÁâàÊú¨Áß∞‰∏∫‚Äúold @command{awk}‚Äù„ÄÇ

Âú®Áé∞Âú®Â§öÊï∞ÁöÑÁ≥ªÁªü‰∏≠Ôºå‰Ω†ËøêË°å @command{awk} Â∑•ÂÖ∑‰Ω†ÈÉΩÊúâ‰∏Ä‰∫õÁâàÊú¨ÁöÑÊñ∞ @command{awk}@footnote{Âè™ÊúâÂú® Solaris ÁöÑÁ≥ªÁªü‰∏≠‰æùÁÑ∂‰ΩøÁî®Êóß @command{awk} ‰Ωú‰∏∫ÈªòËÆ§ÁöÑ @command{awk} Â∑•ÂÖ∑„ÄÇÊõ¥‰∏∫Áé∞‰ª£ÁöÑ @command{awk} Âàô‰Ωç‰∫éËøô‰∫õÁ≥ªÁªü‰∏≠ÁöÑ @file{/usr/xpg6/bin} ÁõÆÂΩï‰∏ã„ÄÇ}„ÄÇ
Â¶ÇÊûú‰Ω†ÁöÑÁ≥ªÁªü‰∏≠ÁöÑÊ†áÂáÜ @command{awk} ÊòØÊóßÁöÑÁâàÊú¨Ôºå‰Ω†Áî®‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊµãËØïÔºåÂ∞±ÂèØ‰ª•ÂæóÂà∞ËøôÊ†∑ÁöÑÁªìÊûúÔºö

@example
$ @kbd{awk 1 /dev/null}
@error{} awk: syntax error near line 1
@error{} awk: bailing out near line 1
@end example

@noindent
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰Ω†Â∫îËØ•ËÉΩÊü•ÊâæÂà∞‰∏ÄÊñ∞ÁâàÊú¨ÁöÑ @command{awk}ÔºåÊàñËÄÖÁõ¥Êé•ÂÆâË£Ö @command{gawk} Âç≥ÂèØ„ÄÇ
Âú®Êú¨@value{DOCUMENT}‰∏≠ÔºåÂ¶ÇÊûúÊâÄÊ∂âÂèäÁöÑÊâÄÊúâËØ≠Ë®ÄÁâπÊÄßÔºåÈÉΩÂú®‰∏Ä‰∏™ÂÆåÊï¥ÂÆûÁé∞‰∫Ü POSIX Ê†áÂáÜÁöÑ @command{awk} ‰∏≠ÊâæÂà∞ÔºåÊàë‰ª¨‰∏∫‰∫ÜÁÆÄÂåñÔºåÂ∞±‰ΩøÁî® @command{awk} Êù•Êåá‰ª£„ÄÇÂΩìÊèêÂà∞ÁöÑÁâπÊÄßÁâπÂÆö‰∫é GNU ÁâàÊú¨ÔºåÊàë‰ª¨Âàô‰ΩøÁî® @command{gawk} Êåá‰ª£„ÄÇ

@node This Manual
@unnumberedsec ‰ΩøÁî®Êú¨‰π¶
@cindex @command{awk}, terms describing

@command{awk} Ëøô‰∏™ËØçÔºåÂç≥Êåá‰ª£ÁâπÂÆöÁöÑÁ®ãÂ∫èÔºå‰πüË°®Á§∫‰Ω†Ë¶ÅÁî®‰∫éÂëäËØâËøô‰∏™Á®ãÂ∫èÊâÄÂÅö‰∫ãÊÉÖÁöÑËØ≠Ë®Ä„ÄÇ
ÂΩìÈúÄË¶ÅÁâπÂà´Â∞èÂøÉÊó∂ÔºåÊàë‰ª¨Áß∞‰πã‰∏∫‚Äú@command{awk} ËØ≠Ë®Ä‚ÄùÔºå‰ª•Âèä‚Äú@command{awk} Â∑•ÂÖ∑‚Äù„ÄÇ
Êú¨@value{DOCUMENT}Êó¢ËØ¥ÊòéÂ¶Ç‰ΩïÁî® @command{awk} ËØ≠Ë®ÄÁºñÂÜôÁ®ãÂ∫èÔºå‰πüËØ¥ÊòéÂ¶Ç‰ΩïÊù•ËøêË°å @command{awk} Â∑•ÂÖ∑„ÄÇ
‚Äú@command{awk} Á®ãÂ∫è‚ÄùÊúØËØ≠ÂàôÊåáÁî® @command{awk} ËØ≠Ë®ÄÁºñÂÜôÁöÑÁ®ãÂ∫è„ÄÇ

@cindex @command{gawk}, @command{awk} and
@cindex @command{awk}, @command{gawk} and
@cindex POSIX @command{awk}

Êú¨‰π¶‰∏ªË¶ÅÊ∂âÂèä POSIX Ê†áÂáÜÊâÄÂÆö‰πâÁöÑ @command{awk} ÁâπÊÄß„ÄÇ‰πüÂåÖÊã¨Âú® @command{gawk} ‰∏≠ÂÆûÁé∞‰∫ÜÁöÑÈÇ£‰∫õÁâπÊÄß„ÄÇËøô‰πàÂ§ÑÁêÜÔºåÂú®‰∫éËØïÂõæÊèèËø∞ @command{gawk} ‰∏éÂÖ∂‰ªñ @command{awk} 
@ifclear FOR_PRINT
ÂÆûÁé∞ÁâàÊú¨@footnote{ÊâÄÊúâËøô‰∫õÂ∑ÆÂºÇÈÉΩÂΩíÈõÜÂú®‚Äúawk ‰∏é gawk ‰πãÈó¥ÁöÑÂ∑ÆÂºÇ‚Äù‰∏ã„ÄÇ}
‰πãÈó¥ÁöÑÂ∑ÆÂºÇ„ÄÇ
@end ifclear
@ifset FOR_PRINT
ÂÆûÁé∞ÁâàÊú¨„ÄÇ
@end ifset
ÊúÄÂêéÔºå‰ºöÊèêÂèäÈÇ£‰∫õÂú® @command{gawk} ‰∏≠ÂÆûÁé∞‰∫ÜÔºå‰ΩÜ‰∏çÂú® @command{awk} POSIX Ê†áÂáÜ‰∏≠ÂÆö‰πâÁöÑÁâπÊÄß„ÄÇ

@ifnotinfo
Êú¨@value{DOCUMENT}Êó¢ÂèØ‰ª•‰Ωú‰∏∫ÊïôÁ®ãÔºåÂèàÂèØ‰ª•‰Ωú‰∏∫ÂèÇËÄÉ„ÄÇÂ¶ÇÊûú‰Ω†ÊòØ‰∏™Êñ∞ÊâãÔºå‰Ω†ÂèØ‰ª•Ë∑≥ËøáÈÇ£‰∫õÂ§çÊùÇÁöÑÈÉ®ÂàÜ„ÄÇ‰Ω†‰πüÂèØ‰ª•ÂøΩÁï•ÈÇ£‰∫õ‰∫§ÂèâÂèÇËÄÉÔºõ‰ªñ‰ª¨‰∏ªË¶ÅÁî®‰∫é‰∏ìÂÆ∂Á∫ßÁî®Êà∑ÔºåÂêåÊó∂‰Ωú‰∏∫‰ø°ÊÅØÂèÇËÄÉ‰ª•ÂèäÁî®‰∫éÊú¨@value{DOCUMENT}ÁöÑ 
@uref{http://www.gnu.org/software/gawk/manual/, HTML}
ÁâàÊú¨„ÄÇ
@end ifnotinfo

Âú®ÂÖ®@value{DOCUMENT}‰∏≠ËøòÂàÜÂ∏ÉÊúâ‰∏Ä‰∫õËæπ‰æßÊ†è„ÄÇ
ÂÆÉ‰ª¨‰∏ªË¶ÅÂØπÁõ∏ÂÖ≥ÁöÑÁÇπËøõË°åÊõ¥ÂÆåÊï¥ÂÖ®Èù¢ÁöÑËß£ÈáäÔºå‰ΩÜÊòØÁ¨¨‰∏ÄÊ¨°ËØªÊú¨@value{DOCUMENT}Êó∂ÂèØËÉΩ‰∏çÂ§™ÊúâÂÖ¥Ë∂£Ê∂âÁåé„ÄÇ
@ifclear FOR_PRINT
ÊâÄÊúâÂú®Ëæπ‰æßÊ†èÁöÑÂÜÖÂÆπ‰ºöÂú®Á¥¢Âºï‰∏≠Âá∫Áé∞„ÄÇ
@end ifclear

Âú®Â§öÊï∞ÊçÆÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨‰ΩøÁî®ÁöÑ‰æãÂ≠êÈÉΩÊòØÂÆåÊï¥ÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ
‰∏Ä‰∫õËøõÈò∂ÈÉ®ÂàÜÁöÑ@value{SECTION}Ôºå‰ªÖÊòæÁ§∫ @command{awk} Á®ãÂ∫èÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ª•Ê≠§Êù•ËØ¥ÊòéÊ≠£Âú®ËøõË°åÊèèËø∞ÁöÑÊ¶ÇÂøµ„ÄÇ

Êú¨@value{DOCUMENT}‰∏ªË¶ÅÁõÆÊ†á‰∫∫Áæ§‰∏ªË¶ÅÈõÜ‰∏≠Âú®ÈÇ£‰∫õËøòÊ≤°Êé•Ëß¶Ëøá @command{awk} ÁöÑ‰∫∫Ôºå‰π¶‰∏≠Áõ∏ÂΩìÂ§öÁöÑ‰ø°ÊÅØÂØπ‰∫é‰∏ìÂÆ∂‰πüÈùûÂ∏∏ÊúâÁî®„ÄÇ
ÂØπ‰∫é @command{awk} POSIX Ê†áÂáÜÁöÑÈÉ®ÂàÜÊõ¥ÊòØÂ¶ÇÊ≠§„ÄÇ
ÂåÖÊã¨Âú® @ref{Library Functions} Âíå
@ifnotdocbook
Âú®
@end ifnotdocbook
@ref{Sample Programs} ÁöÑÊ†∑‰æãÁ®ãÂ∫è„ÄÇËøô‰∫õÊ†∑‰æãÁ®ãÂ∫èÂ∫îËØ•‰ºöÁõ∏ÂΩìÊúâË∂£„ÄÇ

Êú¨@value{DOCUMENT}ÂàÜ‰∏∫Â¶Ç‰∏ãËøô‰∫õÈÉ®ÂàÜÔºö

@c FULLXREF ON

@itemize @value{BULLET}
@item
Á¨¨‰∏ÄÈÉ®ÂàÜÂØπ @command{awk} ËØ≠Ë®Ä‰ª•Âèä @command{gawk} Á®ãÂ∫èËøõË°åËØ¶ÁªÜÊèèËø∞„ÄÇÈÄöËøá‰ªéÊúÄÂü∫Á°ÄÁöÑÂºÄÂßãÔºå‰∏çÊñ≠ËØ¶Ëß£ @command{awk} ÁöÑÊâÄÊúâÁâπÊÄß„ÄÇ
ÂÆÉ‰ª¨ÂåÖÂê´Â¶Ç‰∏ãÁ´†ËäÇÔºö

@c nested
@itemize @value{MINUS}
@item
@ref{Getting Started},
ÂåÖÊã¨‰∏Ä‰∫õ‰ΩøÁî® @command{awk} ÁöÑÂü∫Êú¨ÂÜÖÂÆπ„ÄÇ

@item
@ref{Invoking Gawk},
ÊèèËø∞Â¶Ç‰ΩïËøêË°å @command{gawk}„ÄÅÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÊÑè‰πâÔºå‰ª•ÂèäÂÆÉÂ¶Ç‰ΩïÊù•Êü•Êâæ @command{awk} Á®ãÂ∫èÊ∫ê‰ª£Á†Å„ÄÇ

@item
@ref{Regexp},
ÊÄª‰Ωì‰ªãÁªçÊ≠£ÂàôË°®ËææÂºèÔºåÂ∞§ÂÖ∂ÊòØÈÇ£‰∫õ POSIX @command{awk} ‰ª•Âèä @command{gawk} ÊâÄÊîØÊåÅÁöÑÂÜÖÂÆπ„ÄÇ

@item
@ref{Reading Files},
ÊèèËø∞ @command{awk} Â¶Ç‰ΩïÊù•ËØªÂèñÊï∞ÊçÆ„ÄÇÊú¨Á´†‰∏≠‰ªãÁªçËÆ∞ÂΩïÔºàRecordsÔºâ‰∏éÂüüÔºàFieldsÔºâÁöÑÊ¶ÇÂøµÔºå‰πüÂåÖÊã¨ @code{getline} ÂëΩ‰ª§„ÄÇI/O ÈáçÂÆöÂêëÊòØÈ¶ñÂÖàË¶ÅÊèèËø∞ÁöÑÈÉ®ÂàÜÔºåËÄåÁΩëÁªú I/O ÂàôÁÆÄÂçïÊ∂âÂèä„ÄÇ

@item
@ref{Printing},
‰ªãÁªçÂú® @command{awk} Á®ãÂ∫è‰∏≠Â¶Ç‰Ωï‰ΩøÁî® @code{print} ‰∏é @code{printf} ‰∫ßÁîüËæìÂá∫„ÄÇ

@item
@ref{Expressions},
‰ªãÁªçË°®ËææÂºèÔºåËøô‰∫õË°®ËææÂºèÊòØÊûÑÂª∫Á®ãÂ∫è‰ª£Á†ÅÂùóÔºåÂπ∂ÂÆåÊàêÁõÆÊ†áÁöÑÂü∫Á°Ä„ÄÇ

@item
@ref{Patterns and Actions},
ÊèèËø∞Â¶Ç‰Ωï‰∏∫ÂåπÈÖçËÆ∞ÂΩïÁºñÂÜôÊ®°ÂºèÔºåÂç≥ÂΩìÊüê‰∏™ËÆ∞ÂΩïÂåπÈÖçÊó∂ÊâÄÊâßË°åÁöÑÂä®‰Ωú„ÄÇÂêåÊó∂ËøòÂåÖÊã¨ @command{awk} ‰∏é @command{gawk} ÊâÄ‰ΩøÁî®ÁöÑÈ¢ÑÂÆö‰πâÂèòÈáè„ÄÇ

@item
@ref{Arrays},
ÂåÖÊã¨ @command{awk} ‰∏≠ÁöÑÂîØ‰∏ÄÁöÑÊï∞ÁªÑÁªìÊûÑÔºåÂÖ≥ËÅîÊï∞ÁªÑ„ÄÇÂà†Èô§Êï∞ÁªÑÂÖÉÁ¥†‰ª•ÂèäÊï¥‰∏™Êï∞ÁªÑÔºåÂêåÊó∂‰πüÊ∂âÂèä @command{gawk} ‰∏≠ÁöÑÊï∞ÁªÑÁöÑÊéíÂ∫è„ÄÇ
Âú®Êú¨@value{CHAPTER}ËøòÂåÖÊã¨ @command{gawk} Â¶Ç‰ΩïÊù•Êèê‰æõÂ§öÁª¥Êï∞ÁªÑÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇ

@item
@ref{Functions},
ÊèèËø∞ @command{awk} ‰∏é @command{gawk} ÊâÄÊèê‰æõÁöÑÂÜÖÂª∫ÂáΩÊï∞Ôºå‰ª•ÂèäÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞„ÄÇËÆ®ËÆ∫ @command{gawk} Â¶Ç‰ΩïÊù•Èó¥Êé•Ë∞ÉÁî®ÂáΩÊï∞„ÄÇ

@end itemize

@item
Á¨¨‰∫åÈÉ®ÂàÜÂ±ïÁ§∫Â¶Ç‰Ωï‰ΩøÁî® @command{awk} ‰∏é @command{gawk} Êù•Ëß£ÂÜ≥ÂÆûÈôÖÈóÆÈ¢ò„ÄÇ
ËøôÈáåÊúâÈùûÂ∏∏Â§öÁöÑ‰ª£Á†Å‰æõËØªËÄÖÈòÖËØª‰∏éÂ≠¶‰π†„ÄÇËøô‰∏™ÈÉ®ÂàÜÂåÖÊã¨Â¶Ç‰∏ãÂêÑÁ´†Ôºö

@c nested
@itemize @value{MINUS}
@item
@ref{Library Functions}, Â±ïÁ§∫Â§ßÈáèÁöÑÂèØ‰ª•ÈÄöËøá @command{awk} Á®ãÂ∫èÊù•Ë∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ

@item
@ref{Sample Programs},
ÊúâËÆ∏Â§öÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ

@end itemize

ÈÄöËøáÈòÖËØªËøô‰∏§Á´†ÔºåÂèØ‰ª•ËÆ©‰Ω†ÁúãÂà∞ @command{awk} Á®ãÂ∫èÂ¶Ç‰ΩïÊù•Ëß£ÂÜ≥ÁúüÊ≠£ÁöÑÈóÆÈ¢ò„ÄÇ

@item
Á¨¨‰∏âÈÉ®ÂàÜÂÖ≥Ê≥®ÁâπÂÆö‰∫é @command{gawk} ÁöÑÁâπÊÄßÔºåÂÆÉ‰ª¨ÂåÖÊã¨Â¶Ç‰∏ãÂêÑÁ´†Ôºö

@c nested
@itemize @value{MINUS}
@item
@ref{Advanced Features},
ÊèèËø∞ÂêÑÁßçÈ´òÁ∫ßÁâπÊÄß„ÄÇÂÖ∂‰∏≠ÂåÖÊã¨Â¶ÇÊù•ÊéßÂà∂Êï∞ÁªÑÈÅçÂéÜÁöÑÈ°∫Â∫è„ÄÅ‰∏éÂè¶‰∏Ä‰∏™ËøõÁ®ã‰πãÈó¥ÁöÑÂèåÂêëÈÄö‰ø°„ÄÅÊâßË°å TCP/IP ÈÄö‰ø°„ÄÅÊµãËØÑ‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ

@item
@ref{Internationalization},
ÊèèËø∞Â¶Ç‰ΩïÂ∞ÜÁ®ãÂ∫èÊ∂àÊÅØÂú®ËøêË°åÊó∂ÁøªËØëÊàê‰∏çÂêåËØ≠Ë®ÄÁöÑÁâπÊÄß„ÄÇ

@item
@ref{Debugger}, 
ÊèèËø∞ @command{gawk} Ë∞ÉËØïÂô®„ÄÇ

@item
@ref{Arbitrary Precision Arithmetic},
ÊèèËø∞È´òÁ∫ßÁöÑÊï∞Â≠¶ËÆ°ÁÆóÂ∑•ÂÖ∑„ÄÇ

@item
@ref{Dynamic Extensions}, 
ÊèèËø∞Â¶Ç‰ΩïÈÄöËøáÁºñÂÜô C ‰∏é C++ Êâ©Â±ï‰∏∫ @command{gawk} Ê∑ªÂä†Êñ∞ÂèòÈáè‰∏éÂáΩÊï∞„ÄÇ

@end itemize

@item
@ifclear FOR_PRINT
Á¨¨ÂõõÈÉ®ÂàÜÂåÖÊã¨‰∏Ä‰∫õÈôÑÂΩïÔºåÂêçËØçËß£ÈáäÔºå‰ª•ÂèäÊú¨@value{DOCUMENT}‰ª£Á†ÅÊâÄ‰ΩøÁî®ÁöÑ‰∏§‰∏™ËÆ∏ÂèØ„ÄÇÂÆÉ‰ª¨ÂåÖÂê´Â¶Ç‰∏ãÈôÑÂΩïÔºö
@end ifclear
@ifset FOR_PRINT
Á¨¨ÂõõÈÉ®ÂàÜÂåÖÊã¨Â¶Ç‰∏ãÈôÑÂΩïÔºåÂåÖÊã¨ GNU ÈÄöÁî®ÂÖ¨ÂÖ±ËÆ∏ÂèØÔºö
@end ifset

@itemize @value{MINUS}
@item
@ref{Language History},
ÊèèËø∞ @command{awk} ËØ≠Ë®Ä‰ªéÁ¨¨‰∏Ä‰∏™ÁâàÊú¨Âà∞Áé∞Âú®ÁöÑÊºîÂåñËøáÁ®ã„ÄÇÂêåÊó∂‰πüÊèèËø∞ @command{gawk} Âú®‰∏çÂêåÁöÑÊó∂Èó¥ÂÜÖÊâÄÂºïÂÖ•ÁöÑÁâπÊÄß„ÄÇ

@item
@ref{Installation},
ÊèèËø∞Â¶Ç‰ΩïËé∑Âèñ @command{gawk}ÔºåÂ¶Ç‰ΩïÂú® POSIX ÂÖºÂÆπÁöÑÁ≥ªÁªü‰∏≠ÁºñËØëÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂú®Èùû POSIX Á≥ªÁªü‰∏≠ÁºñËØë‰∏é‰ΩøÁî®ÂÆÉ„ÄÇ
‰ªãÁªçÂ¶Ç‰ΩïÊù•Êä•Âëä @command{gawk} BugÔºå
‰ª•Âèä‰ªãÁªçÂèØ‰ª•Ëá™Áî±Ëé∑Âèñ @command{awk} ÁöÑÂú∞Êñπ„ÄÇ

@ifset FOR_PRINT
@item
@ref{Copying},
Êèê‰æõ‰ΩøÁî® @command{gawk} Ê∫êÁ†ÅÁöÑËÆ∏ÂèØ„ÄÇ

@end ifset

@ifclear FOR_PRINT
@item
@ref{Notes},
ÊèèËø∞Â¶Ç‰ΩïÁ¶ÅÁî® @command{gawk} Êâ©Â±ïÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂêë @command{gawk} Ë¥°ÁåÆÊñ∞‰ª£Á†ÅÔºåËøòÂåÖÊã¨ @command{gawk} Êú™Êù•ÂèØËÉΩÁöÑÂºÄÂèëÊñπÂêë„ÄÇ

@item
@ref{Basic Concepts},
‰∏∫ÈÇ£‰∫õÂàùËØÜËÆ°ÁÆóÁºñÁ®ãÁöÑ‰∫∫Êèê‰æõ‰∏Ä‰∫õÁ≤óÁï•ÁöÑËÉåÊôØËµÑÊñô„ÄÇ

@ref{Glossary}, 
ÂÆö‰πâÂ§ßÂ§öÊï∞ÁöÑÊú¨@value{DOCUMENT}‰∏≠ÊâÄÁî®Âà∞ÁöÑÊúØËØ≠ÁöÑÊÑè‰πâÔºåÂ¶ÇÊûú‰Ω†ÁúãÂà∞‰Ω†‰∏çÁÜüÊÇâÁöÑÔºåÂèØ‰ª•ÂèÇËÄÉËøôÈáå„ÄÇ

@item
@ref{Copying}, and
@ref{GNU Free Documentation License},
Êèê‰æõÊú¨@value{DOCUMENT}‰∏≠Ê∫ê‰ª£Á†Å‰ª•ÂèäÊú¨@value{DOCUMENT}ÊâÄ‰ΩøÁî®Âà∞ÁöÑ‰∏§‰∏™ËÆ∏ÂèØËØÅÂçèËÆÆ„ÄÇ

@end ifclear
@end itemize
@end itemize

@ifset FOR_PRINT
Êú¨@value{DOCUMENT}Áõ∏ÂÖ≥ÁöÑ @command{gawk} ÂèëË°åÁâàÊú¨ÂåÖÂê´‰∫ÜÈ¢ùÂ§ñÁöÑÈôÑÂΩïÂíåÂÖ∂‰ªñÊùêÊñô„ÄÇ
‰∏∫‰∫ÜËäÇÁúÅÁ©∫Èó¥ÔºåÂú®Âç∞Âà∑Áâà‰∏≠Êàë‰ª¨Áï•Ëøá‰∫ÜËøôÈÉ®ÂàÜ„ÄÇ
‰Ω†ÂèØ‰ª•Âú®ÁΩë‰∏äÊâæÂà∞Ëøô‰∫õËµÑÊñôÔºåÈìæÊé•Â¶Ç‰∏ãÔºö

@itemize @value{BULLET}
@item
@uref{http://www.gnu.org/software/gawk/manual/html_node/Notes.html,
The appendix on implementation notes}
ÊèèËø∞Â¶Ç‰ΩïÁ¶ÅÁî® @command{gawk} Êâ©Â±ïÔºåÂ¶Ç‰ΩïÂêë @command{gawk} Ë¥°ÁåÆÊñ∞‰ª£Á†ÅÔºå@command{gawk} Êú™Êù•ÂèØËÉΩÁöÑÂºÄÂèëÊñπÂêëÔºå‰ª•ÂèäÊâ©Â±ï API ÁöÑËÆæËÆ°ÂÜ≥Á≠ñ„ÄÇ

@item
@uref{http://www.gnu.org/software/gawk/manual/html_node/Basic-Concepts.html,
The appendix on basic concepts}
‰∏∫ÈÇ£‰∫õÂàùËØÜËÆ°ÁÆóÁºñÁ®ãÁöÑ‰∫∫Êèê‰æõ‰∏Ä‰∫õÁ≤óÁï•ÁöÑËÉåÊôØËµÑÊñô„ÄÇ

@item
@uref{http://www.gnu.org/software/gawk/manual/html_node/Glossary.html,
The Glossary}
ÂÆö‰πâÂ§ßÂ§öÊï∞ÁöÑÊú¨@value{DOCUMENT}‰∏≠ÊâÄÁî®Âà∞ÁöÑÊúØËØ≠ÁöÑÊÑè‰πâÔºåÂ¶ÇÊûú‰Ω†ÁúãÂà∞‰Ω†‰∏çÁÜüÊÇâÁöÑÔºåÂèØ‰ª•ÂèÇËÄÉËøôÈáå„ÄÇ

@item
@uref{http://www.gnu.org/software/gawk/manual/html_node/GNU-Free-Documentation-License.html,
The GNU FDL}
Êú¨@value{DOCUMENT}ÊâÄ‰ΩøÁî®Âà∞ÁöÑËÆ∏ÂèØËØÅÂçèËÆÆ„ÄÇ

@end itemize

@c ok not to use CHAPTER / SECTION here
Some of the chapters have exercise sections; these have also been
omitted from the print edition but are available online.
@end ifset

@c FULLXREF OFF

@node Conventions
@unnumberedsec ÊéíÁâàÁ∫¶ÂÆö

@cindex Texinfo
Êú¨@value{DOCUMENT}ÊòØÈÄöËøá @uref{http://www.gnu.org/software/texinfo/, Texinfo}@footnote{‰∏ÄÁßçÊñáÊ°£Â§ÑÁêÜËΩØ‰ª∂ÔºåÁî®‰∏ÄÁßçÊ†ºÂºèÂç≥ÂèØ‰ª•ÂÆåÊàêÁΩëÈ°µËæìÂá∫‰ª•ÂèäÊâìÂç∞ËæìÂá∫„ÄÇËøôÁßçÂ∑•ÂÖ∑‰∏ªË¶ÅÁî®‰∫éÁºñÂÜôËΩØ‰ª∂ÊâãÂÜå„ÄÇ‚Äî‚ÄîËØëËÄÖ} ÂÆåÊàêÁöÑ„ÄÇ
ËøôÊòØ‰∏ÄÁßçÊñáÊ°£Ê†ºÂºèÂåñËØ≠Ë®Ä„ÄÇ Âçï‰∏ÄÁöÑ TexInfo Ê∫êÊñá‰ª∂ÔºåÂç≥ÂèØÁî®‰∫é‰∫ßÁîüÂú®Á∫øÁâàÊú¨ÁöÑÊñáÊ°£Ôºå‰πüÂèØ‰ª•‰∫ßÁîüÊâìÂç∞ËæìÂá∫ÁöÑÊñáÊ°£„ÄÇ
@ifnotinfo
Âõ†‰∏∫Ëøô‰∏™ÂéüÂõ†ÔºåÂÖ∂ÊéíÁâàÁ∫¶ÂÆö‰∏é‰Ω†ÊâÄËØªÂÖ∂‰ªñÁöÑ‰π¶ÂèØËÉΩÊúâ‰∏Ä‰∫õÂ∑ÆÂºÇ„ÄÇ
@end ifnotinfo
@ifinfo
Êú¨@value{SECTION}ÁÆÄË¶ÅÂú∞ÊèèËø∞‰∫Ü‰ΩøÁî® Texinfo ÁöÑÊéíÁâàÁ∫¶ÂÆö„ÄÇ
@end ifinfo

‰Ω†Âú®ÂëΩ‰ª§Ë°å‰∏äËæìÂÖ•ÁöÑ‰æãÂ≠êÔºåÁî±ÈÄöÁî®ÁöÑ Shell ‰∏ªÊ¨°ÊèêÁ§∫Á¨¶Ôºå@samp{$} ‰∏é @samp{>} ÂºïÂØº„ÄÇ
ËæìÂÖ•ÂëΩ‰ª§@kbd{Â¶Ç‰∏ã}„ÄÇ
@c 8/2014: @print{} is stripped from the texi to make docbook.
@ifclear FOR_PRINT
ÂëΩ‰ª§Ë°åÁöÑËæìÂá∫Áî±Â≠óÁ¨¶‚Äú@print{}‚ÄùÂºïÂØº„ÄÇËøô‰ª£Ë°®‰∫ÜÂëΩ‰ª§Ë°åÁöÑÂÖ∏ÂûãËæìÂá∫„ÄÇ
@end ifclear
@ifset FOR_PRINT
ÂëΩ‰ª§Ë°åÁöÑËæìÂá∫ÔºàÈÄöÂ∏∏ÊòØÊ†áÂáÜËæìÂá∫ÔºâÔºåÈÄöÂ∏∏Ë°®Áé∞@code{Â¶Ç‰∏ã}„ÄÇ
@end ifset
ÈîôËØØ‰ø°ÊÅØ‰ª•ÂèäÂÖ∂‰ªñÁöÑÂëΩ‰ª§Ë°åÊ†áÂáÜÈîôËØØËæìÂá∫ÂàôÁî±‚Äú@error{}‚ÄùÂºïÂØºÔºå‰æãÂ¶ÇÔºö

@example
$ @kbd{echo hi on stdout}
@print{} hi on stdout
$ @kbd{echo hello on stderr 1>&2}
@error{} hello on stderr
@end example

@ifnotinfo
Âú®ÊñáÊú¨‰∏≠ÔºåÊâÄÊúâ‰∏éÁ®ãÂ∫èÁõ∏ÂÖ≥ÁöÑ‰∏úË•øÔºåÂ¶ÇÂëΩ‰ª§Âêç„ÄÅÂèòÈáèÂíåÂáΩÊï∞Âêç„ÄÅÂ≠ó‰∏≤„ÄÅÊï∞ÊçÆ„ÄÅÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÈÉΩ‰ª• @code{this font} ËøôÊ†∑ÁöÑÂ≠ó‰ΩìÂá∫Áé∞„ÄÇ
‰ª£Á†ÅÊÆµ‰πü‰ª•Áõ∏ÂêåÁöÑÂ≠ó‰ΩìÂëàÁé∞ÔºåÂπ∂Áî®ÂçïÂºïÂè∑Êã¨Ëµ∑Êù•ÔºåË°®Áé∞‰∏∫ @samp{like this}„ÄÇ
Áî±Áî®Êà∑ÊàñËÄÖÁ®ãÂ∫èÂëòÊõøÊç¢ÁöÑÈÉ®ÂàÜ‰ª• @var{this font}ÔºåËøôÊ†∑ÁöÑÂ≠ó‰ΩìÂá∫Áé∞„ÄÇ
ÈÄâÈ°πÊòØÂ¶Ç @option{-f} ËøôÊ†∑ÁöÑÂèÇÊï∞„ÄÇ@value{FFN}Áî± @file{/path/to/ourfile} ËøôÊ†∑ÁöÑ‰∏≤ÊèêÁ§∫„ÄÇ
@ifclear FOR_PRINT
Êúâ‰∫õÈúÄË¶ÅÂº∫Ë∞ÉÁöÑ‰∏úË•ø‰ª• @emph{ËøôÊ†∑} ÁöÑÂ≠ó‰ΩìÂá∫Áé∞„ÄÇ
Â¶ÇÊûúÊüê‰∏ÄÁÇπÈúÄË¶ÅÁâπÂà´Âº∫Ë∞ÉÔºåÂÆÉ‰ª• @strong{ËøôÊ†∑} ÁöÑÂ≠ó‰ΩìÂá∫Áé∞„ÄÇ
@end ifclear
Á¨¨‰∏Ä‰∏™Âá∫Áé∞ÁöÑÊúØËØ≠ÔºåÂêå‰∏Ä‰∏™Âè•Â≠ê‰∏≠ÁöÑÂÖàÂâçÂá∫Áé∞ÁöÑÊúØËØ≠ÔºåÂåÖÊã¨ÂÖ∂ÂÆö‰πâ‰πüÁî®Áõ∏ÂêåÁöÑÂ≠ó‰ΩìÔºåË°®Áé∞‰∏∫ @dfn{ËøôÊ†∑} ÁöÑÂ≠ó‰Ωì„ÄÇ
@end ifnotinfo

‰Ω†‰ªéÈîÆÁõò‰∏äÈîÆÂÖ•ÁöÑÂ≠óÁ¨¶‰πüÁî® @kbd{like this} ËøôÊ†∑ÁöÑÂ≠ó‰ΩìÂëàÁé∞„ÄÇ
ÂØπ‰∫é‰∏Ä‰∫õÁâπÂà´ÁöÑ‚ÄúÊéßÂà∂Â≠óÁ¨¶‚ÄùÔºåËøô‰∫õÂ≠óÁ¨¶ÊòØÈúÄË¶Å‰Ω†ÂêåÊó∂ÈîÆÂÖ• @kbd{CONTROL} ÈîÆ‰ª•ÂèäÂè¶‰∏Ä‰∏™ÈîÆÊù•ËæìÂÖ•„ÄÇ
ÊØîÂ¶Ç @kbd{Ctrl-d} ÈúÄË¶ÅÈ¶ñÂÖàÊåâ‰∏ãÂπ∂‰øùÊåÅ @kbd{CONTROL} ÈîÆÔºåÁÑ∂ÂêéÊï≤Âáª @kbd{d} ÈîÆÔºåÁÑ∂ÂêéÂÜçÈáäÊîæ‰∏§‰∏™ÈîÆ„ÄÇ

‰∏∫‰∫ÜÁÆÄÂçïÂ§ÑÁêÜÔºåÂú®Êú¨@value{DOCUMENT}‰∏≠ÔºåÊàë‰ª¨Êää Brian Kernighan ÁâàÊú¨ÁöÑ @command{awk} Áß∞‰∏∫‚ÄúBWK @command{awk}‚ÄùÔºà@ref{Other Versions}ÔºåÊü•ÁúãËøô‰∏™ÁâàÊú¨‰∏éÂÖ∂‰ªñÁâàÊú¨ÁöÑ‰ø°ÊÅØÔºâ„ÄÇ
@ifset FOR_PRINT
@quotation NOTE
Notes of interest look like this.
@end quotation

@quotation CAUTION
Cautionary or warning notes look like this.
@end quotation
@end ifset

@c fakenode --- for prepinfo
@unnumberedsubsec ÊöóËßí
@cindex Kernighan, Brian
@quotation
@i{ÊöóËßíÊÄªÊòØÂ≠òÂú®ÁöÑ‚Äî‚ÄîÊó†ËÆ∫‰Ω†Â§ö‰πà‰ªîÁªÜÔºåÊÄªÊòØÊúâ‰∏Ä‰∫õÊõ¥Â∞èÁöÑÔºåÈªëÊöóÁöÑÂú∞Êñπ„ÄÇ}
@author Brian Kernighan
@end quotation

@cindex d.c., See dark corner
@cindex dark corner
Âú®Ê≤°ÊúâÂÅö POSIX Ê†áÂáÜÔºà‰ª•ÂèäÊ≤°ÂÜô @cite{@value{TITLE}}Ôºâ‰πãÂâçÔºå@command{awk} ÁâπÊÄßÁöÑÊñáÊ°£Â∞ëÂæóÂèØÊÄúÔºåÁîöËá≥ÊòØÊ≤°ÊúâÊñáÊ°£„ÄÇ
ÂØπ‰∫éËøôÊ†∑ÁöÑÁâπÊÄßÔºàÁªèÂ∏∏Áß∞‰∏∫‚ÄúÊöóËßí‚ÄùÔºâÂú®Ëøô‰∏™@value{DOCUMENT}‰ª•
@iftex
È°µËæπ‰∏äÁöÑÊâãÁîµÂõæÂΩ¢
@value{DARKCORNER}
@end iftex
@ifnottex
``(d.c.).''
@end ifnottex
ÁöÑÂΩ¢ÂºèÊèêÁ§∫„ÄÇ
@ifclear FOR_PRINT
ÂÆÉ‰ª¨‰πüÂá∫Áé∞Âú®Á¥¢Âºï‰∏≠ÁöÑ‚ÄúÊöóËßí‚ÄùÂå∫„ÄÇ
@end ifclear

‰ΩÜÊòØÔºåÊ≠£Â¶ÇÂºÄÊîæÊÄßÂºïËø∞ÊâÄÊèêÁ§∫ÁöÑÔºåÂú®ÂÆö‰πâ‰∏äÂØπÊöóËßíÁöÑË¶ÜÁõñÊòØ‰∏çÂÆåÂÖ®ÁöÑ„ÄÇ

@cindex c.e., See common extensions

ÂØπ‰∫é @command{awk} Ê†áÂáÜËØ≠Ë®ÄÁöÑÊâ©Â±ïÔºåÂæàÂ§ö @command{awk} ÂÆûÁé∞ÈÉΩÊîØÊåÅÔºå‰ªñ‰ª¨Áî®
@ifclear FOR_PRINT
``@value{COMMONEXT},'' ËøõË°åÊ†áÁ§∫ÔºåÂπ∂Âú®Á¥¢Âºï‰∏≠ÁöÑ‚ÄúÈÄöÁî®Êâ©Â±ï‚Äù‰ª•Âèä‚ÄúÊâ©Â±ïÔºåÈÄöÁî®‚Äù‰∏≠ËøõË°åÂàóÂá∫„ÄÇ
@end ifclear
@ifset FOR_PRINT
``@value{COMMONEXT}'' Ê†áËØÜ‚ÄúÈÄöÁî®Êâ©Â±ï‚Äù„ÄÇ
@end ifset

@node Manual History
@unnumberedsec GNU È°πÁõÆÂèäÊú¨‰π¶

@cindex FSF (Free Software Foundation)
@cindex Free Software Foundation (FSF)
@cindex Stallman, Richard

Ëá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÔºàFSFÔºâÊòØ‰∏Ä‰∏™ÈùûËê•Âà©ÊÄßÁªÑÁªáÔºåÂÖ∂‰∏ìÊ≥®‰∫éÂºÄÂèë‰∏éÂèëÂ∏ÉÂèØËá™Áî±ÂàÜÂèëÁöÑËΩØ‰ª∂„ÄÇ
ÂÆÉÁî± Richard M.@: Stallman‚Äî‚ÄîÂç≥ÊúÄÂàùÁöÑ Emacs ÁºñËæëÂô®ÁöÑ‰ΩúËÄÖ‚Äî‚ÄîÂàõÂª∫„ÄÇGNU ÁöÑ Emacs ËΩØ‰ª∂‰πüÊòØÁõÆÂâçÁî®ÂæóÊúÄÂπøÊ≥õÁöÑ Emacs ÁâàÊú¨„ÄÇ

@cindex GNU Project
@cindex GPL (General Public License)
@cindex General Public License, See GPL
@cindex documentation, online

GNU@footnote{GNU Ë°®Á§∫‚ÄúGNU's Not Unix‚Äù„ÄÇ} 
È°πÁõÆÊòØËá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÁöÑÈ°πÁõÆÔºåÂÖ∂ÁõÆÂâç‰æùÁÑ∂ËøòÂú®ÊåÅÁª≠Âú∞‰∏∫ÂàõÂª∫‰∏Ä‰∏™ÂÆåÂÖ®ÂèØËá™Áî±ÂèëÂ∏ÉÔºå‰∏é POSIX ÂÖºÂÆπÁöÑËÆ°ÁÆóÁéØÂ¢ÉËÄåÂä™Âäõ„ÄÇ
Ëá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÈÄöËøá‚ÄúÈÄöÁî®ÂÖ¨ÂÖ±ËØ∑ÂèØ‚ÄùÔºàGPLÔºâÊù•‰øùËØÅÂÖ∂‰∏ãÁöÑËΩØ‰ª∂ÁöÑÊ∫ê‰ª£Á†ÅÂØπ‰∫éÁªàÁ´ØÁî®Êà∑ÊÄªÊòØÂèØÁî®ÁöÑ„ÄÇ
@ifclear FOR_PRINT
GPL ÁöÑÂ§çÊú¨Â∑≤ÁªèÂåÖÂê´Âú®
@ifnotinfo
Êú¨@value{DOCUMENT}‰∏≠
@end ifnotinfo
‰ª•‰æõÂèÇËÄÉ
(@pxref{Copying}).
@end ifclear
GPL ‰πüÂ∫îÁî®‰∫éÁî® C ÂÜôÊàêÁöÑ @command{gawk}„ÄÇË¶ÅÊü•ÊâæÊõ¥Â§öÁöÑÂÖ≥‰∫éËá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºö‰ª•Âèä GNU È°πÁõÆÁöÑÂú®Á∫ø‰ø°ÊÅØÔºå‰Ω†ÂèØ‰ª•Êü•Áúã @uref{http://www.gnu.org, GNU È°πÁõÆÁöÑ‰∏ªÈ°µ}„ÄÇ
Êú¨@value{DOCUMENT}‰πüÂèØ‰ª•‰ªé @uref{http://www.gnu.org/software/gawk/manual/, GNU Á´ôÁÇπ} ‰∏äÈòÖËØª„ÄÇ

@ifclear FOR_PRINT
ShellÔºåÁºñËæëÂô®ÔºàEmacsÔºâÔºåÈ´òÂ∫¶ÂèØÁßªÊ§çÁöÑ C„ÄÅC++ ‰∏é Object-C ÁºñËØëÂô®ÔºåÁ¨¶Âè∑Ë∞ÉËØïÂô®‰ª•ÂèäÂ§ßÈáèÁöÑÂ∞èÂ∑•ÂÖ∑ÔºàÂ¶Ç @command{gawk}ÔºâÔºåÈÉΩÂ∑≤ÁªèÂÆåÊàêÂπ∂ÂèØËá™Áî±Ëé∑Âèñ„ÄÇ
GNU Êìç‰ΩúÁ≥ªÁªüÂÜÖÊ†∏ÔºàHURDÔºâ‰πüÂ∑≤ÁªèÂèëÂ∏ÉÔºåÂè™ÊòØËøòÂ§Ñ‰∫éÂºÄÂèëÁöÑÊó©ÊúüÈò∂ÊÆµ„ÄÇ

@cindex Linux
@cindex GNU/Linux
@cindex operating systems, BSD-based
Âú® GNU Êìç‰ΩúÁ≥ªÁªüÂÆåÂÖ®ÂºÄÂèëÂ•ΩÂâçÔºå‰Ω†Â∫îËØ•ËÄÉËôë‰ΩøÁî® GNU/LinuxÔºå‰∏Ä‰∏™ÂèØËá™Áî±ÂèëÂ∏ÉÁöÑÔºåUnix-like ÁöÑÊìç‰ΩúÁ≥ªÁªüÔºåÁî®‰∫é Intel„ÄÅPower ËøôÊ†∑ÁöÑÊûÑÊû∂ÔºåSun SparcÔºåIBM S/390 Á≠âÂÖ∂‰ªñÁ≥ªÁªü@footnote{ÊúØËØ≠``GNU/Linux''Âú®@ref{Glossary}ËøõË°åËØ¥Êòé„ÄÇ}„ÄÇÂæàÂ§öÁöÑ GNU/Linux ÂèëË°åÁâàÊú¨ÈÉΩÂèØ‰ª•ÈÄöËøá‰∫íËÅîÁΩë‰∏ãËΩΩ„ÄÇ
@end ifclear

@ifnotinfo
‰Ω†Ê≠£Âú®ÈòÖËØªÁöÑËøô‰∏™@value{DOCUMENT}‰πüÊòØÂÖçË¥πÁöÑ‚Äî‚ÄîÊúÄËµ∑Á†ÅÁöÑ„ÄÇ
ËøôÈáåÈù¢ÁöÑ‰ø°ÊÅØÂØπ‰ªª‰Ωï‰∏Ä‰∏™‰∫∫ÈÉΩÊòØÂÖçË¥πÁöÑ„ÄÇ‰πüÂåÖÊã¨‰∏é @command{gawk} Áõ∏ÂÖ≥ÁöÑÔºåÂØπ‰∫éÊú∫Âô®ÂèØËØªÁöÑÊ∫ê‰ª£Á†Å„ÄÇ
ÔºàËä±‰∏ÄÁÇπÊó∂Èó¥ÈòÖËØª‰∏Ä‰∏ãÂú®@ref{GNU Free Documentation License}‰∏≠ÁöÑËá™Áî±ÊñáÊ°£ËÆ∏ÂèØËØÅÂçèËÆÆ„ÄÇÔºâ
@end ifnotinfo

@cindex Close, Diane
Ê≠§@value{DOCUMENT}Â∑≤ÁªèÁªèËøá‰∫ÜÂ§ö‰∏™ÁâàÊú¨„ÄÇPaul Rubin ÂÜô‰∫ÜÁ¨¨‰∏Ä‰ªΩ @cite{The GAWK Manual}ÔºåÂ§ßÊ¶ÇÊúâ40È°µ„ÄÇ
Diane Close ‰∏é Richard Stallman ‰∏∞ÂØå‰∫ÜÂÆÉÔºå‰∫ßÁîü‰∫Ü‰∏Ä‰∏™Â§ßÊ¶Ç 90 È°µÁöÑÁâàÊú¨ÔºåÂÆÉÂè™ÈíàÂØπÊúÄÂàùÁöÑÔºå‚ÄúÊóß‚ÄùÁâàÊú¨ÁöÑ @command{awk}„ÄÇ

Êàë‰ªé 1988 Âπ¥ÁßãÂ§©ÂºÄÂßãÁùÄÊâãÂà∂‰ΩúÈÇ£‰∏™ÁâàÊú¨„ÄÇÈöèÁùÄÂ∑•‰ΩúÁöÑÊé®ËøõÔºåËá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÂá∫Áâà‰∫ÜÂá†‰∏™ÂàùÊ≠•ÁöÑÁâàÊú¨ÔºàÁâàÊú¨Âè∑ 0.@var{x}Ôºâ„ÄÇ
Âú® 1996 Âπ¥Ôºå1.0 ÁâàÊú¨ÈöèÁùÄ @command{gawk} 3.0.0 ÂèëÂ∏É„ÄÇ
Ëá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÂá∫Áâà‰∫ÜÂâç‰∏§‰∏™ÁâàÊú¨Ôºå‰π¶Âêç‰∏∫ @cite{The GNU Awk User's Guide}„ÄÇ
@ifset FOR_PRINT
SSC Âá∫Áâà‰∫ÜËøô‰∏™@value{DOCUMENT}ÁöÑ‰∏§‰∏™ÁâàÊú¨Ôºå‰π¶Âêç‰∏∫ @cite{Effective awk Programming}ÔºåO'Reilly Âú® 2001 Âπ¥Âá∫Áâà‰∫ÜÁ¨¨‰∏âÁâà„ÄÇ
@end ifset

Ëøô‰∏ÄÁâàÁª¥ÊåÅ‰∫Ü‰πãÂâçÁöÑÁâàÊú¨ÁöÑÂü∫Êú¨ÁªìÊûÑ„ÄÇ
FSF 4.0 ÁâàÁöÑÂÜÖÂÆπÂÆåÂÖ®Ê†°ÂØπÂíåÊõ¥Êñ∞‰∫Ü„ÄÇÊâÄÊúâ 4.0 ÁâàÊú¨‰πãÂâçÁöÑ @command{gawk} ÁâàÊú¨ÁöÑÂèÇËÄÉÈÉΩÂà†Âéª‰∫Ü„ÄÇ
ÈÇ£‰∏™ÁâàÊú¨‰∏≠ÂæàÈáçË¶ÅÁöÑ‰∏ÄÁÇπÊòØÂ¢ûÂä†‰∫Ü @ref{Debugger}„ÄÇ

Âú® FSF ÁâàÊú¨‰∏≠Ôºå
@ifclear FOR_PRINT
@value{EDITION} ÁâàÊú¨
@end ifclear
@ifset FOR_PRINT
@value{EDITION}
(O'Reilly Âá∫ÁâàÁöÑÁ¨¨ÂõõÁâà),
@end ifset
ÈáçÊñ∞ÁªÑÁªá‰∫ÜÊñáÊ°£ÂÜÖÂÆπÔºå‰∏ªË¶ÅÁöÑÊõ¥Êñ∞ÊòØÂ¢ûÂä†‰∫Ü @ref{Arbitrary Precision Arithmetic} ‰ª•Âèä @ref{Dynamic Extensions}„ÄÇ

Ëøô‰∏™@value{DOCUMENT}Êú™Êù•‰∏ÄÂÆö‰ºöÊåÅÁª≠‰ºòÂåñ„ÄÇÂ¶ÇÊûú‰Ω†Âú®Ëøô‰∏™@value{DOCUMENT}ÂèëÁé∞‰∫ÜÈîôËØØÔºåËØ∑Êä•ÂëäÂÆÉ„ÄÇ
@ref{Bugs} Ôºå‰Ω†ÂèØ‰ª•ÊâæÂà∞ÂÖ≥‰∫éÊèê‰∫§ÁîµÂ≠êÁâàÈóÆÈ¢òÊä•ÂëäÁöÑ‰ø°ÊÅØ„ÄÇ 

@ifset FOR_PRINT
@c fakenode --- for prepinfo
@unnumberedsec Â¶Ç‰Ωï‰øùÊåÅÊúÄÊñ∞‰ø°ÊÅØ

‰πüËÆ∏‰Ω†Êâã‰∏äÊúâÊØîËøôÈáåÁöÑÁâàÊú¨Êõ¥Êñ∞ÁöÑ @command{gawk} ÁâàÊú¨„ÄÇ
Â¶ÇÊûú‰Ω†ÊÉ≥Áü•ÈÅì‰øÆÊîπ‰∫Ü‰ªÄ‰πàÈÉ®ÂàÜÔºåÈ¶ñÂÖà‰Ω†Â∫îËØ•ÁúãÁúã @command{gawk} ÂèëË°å‰∏≠ÁöÑ @file{NEWS} Êñá‰ª∂„ÄÇ
Ëøô‰∏™Êñá‰ª∂‰∏≠Êèê‰æõ‰∫ÜÊØèÊ¨°ÂèëÂ∏ÉÁöÑÊõ¥Êñ∞Ê¶ÇË¶Å„ÄÇ

ÁÑ∂ÂêéÔºå‰Ω†ÂèØ‰ª•Êü•ÁúãËøô‰∏™this @value{DOCUMENT} @uref{http://www.gnu.org/software/gawk/manual/,
Âú®Á∫øÁâàÊú¨}ÔºåÈòÖËØªÊñ∞ÁâπÊÄßÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ
@end ifset

@ifclear FOR_PRINT
@node How To Contribute
@unnumberedsec Â¶Ç‰ΩïË¥°ÁåÆ

‰Ωú‰∏∫ GNU @command{awk} ÁöÑÁª¥Êä§ËÄÖÔºåÊàëÊõæÁªèÊÉ≥ÁùÄÊàëÂ∫îËØ•ËÉΩÂ§üÁÆ°ÁêÜËøô‰∏ÄÂ§ßÂ†ÜÁöÑÂÖ¨ÂºÄÂèØÂæóÁöÑ @command{awk} Á®ãÂ∫èÔºåÊàëÁîöËá≥ÊãõÂãüËøáË¥°ÁåÆËÄÖ„ÄÇ
‰ªé‰∫íËÅîÁΩëÂèØ‰ª•ÂæóÂà∞ÊàëÊÉ≥Ë¶ÅÁöÑ‰∏úË•øÔºåËÉΩÂ§üÂ∏ÆÂä© @command{gawk} ÁöÑÂèëÂ∏ÉÁâà‰øùÊåÅÂú®‰∏Ä‰∏™ÂèØÁÆ°ÁêÜÁöÑÂ§ßÂ∞è„ÄÇ

ÊúÄÂéüÂßãÁöÑÊùêÊñôÔºåÂ¶ÇÊú¨@value{DOCUMENT}ÔºåËøòÂèØ‰ª•‰ªé @uref{ftp://ftp.freefriends.org/arnold/Awkstuff} Ëé∑Âèñ„ÄÇ
‰∏∫‰∫ÜÊääËøô‰∏™‰∫ãÊÉÖÂÅöÂæóÊõ¥‰∏∫ÂºÄÊîæÂπøÊ≥õÔºåÊàëËøòÁî≥ËØ∑‰∫Ü @code{awk.info} ÂüüÂêç„ÄÇ

‰ΩÜÊòØÔºåÊàëÂèëÁé∞ÊàëÊ≤°ÊúâÊó∂Èó¥ÂÆåÂÖ®Âú∞Êù•ÁÆ°ÁêÜËøô‰∫õÂàÜÂ∏ÉÁöÑ‰ª£Á†ÅÔºöÊñáÊ°£Â∑≤Áªè‰∏çÂÜçÂ¢ûÈïøÔºåËÄåÂüüÂêçÂ∑≤ÁªèÂá†Âπ¥ÂâçÂ∞±‰∏çËÉΩ‰ΩøÁî®‰∫Ü„ÄÇ

2008 Âπ¥ÁöÑÊôö‰∫õÊó∂ÂÄôÔºåÊúâÂøóÊÑøËÄÖËÆæÁ´ã‰∫Ü @command{awk} Áõ∏ÂÖ≥ÁöÑÁΩëÁ´ô‚Äî‚Äî @uref{http://awk.info} ‚Äî‚ÄîÂ∑•‰ΩúÂÅöÂæóÁõ∏ÂΩìÊ£í„ÄÇ

Â¶ÇÊûú‰Ω†ÂÜôËøá‰∏Ä‰∏™ÊúâÂë≥ÁöÑ @command{awk} Á®ãÂ∫èÔºåÊàñËÄÖÂÜô‰∫Ü @command{gawk} Êâ©Â±ïÂπ∂‰∏îÂ∏åÊúõ‰∏éÂÖ∂‰ªñ‰∫∫ÂàÜ‰∫´ÔºåËØ∑Áúã @uref{http://awk.info/?contribute} Êù•‰∫ÜËß£Â¶Ç‰ΩïÂ∞ÜÂÆÉÂèëÂ∏ÉÂà∞ÁΩëÁ´ô‰∏ä„ÄÇ

@ignore
Â¶Ç‰∏äÊâÄËø∞ÔºåËøô‰∏™ÁΩëÁ´ô‰πüÂú®ÂØªÊâæÁª¥Êä§ËÄÖÔºõÂ¶ÇÊûú‰Ω†ÊÑüÂÖ¥Ë∂£ÔºåËØ∑ËÅîÁ≥ªÊàë„ÄÇ
@end ignore

@ignore
ÂÖ∂‰ªñÈìæÊé•Ôºö

http://www.reddit.com/r/linux/comments/dtect/composing_music_in_awk/
@end ignore
@end ifclear

@node Acknowledgments
@unnumberedsec Ëá¥Ë∞¢

ÊúÄÂàùÁöÑ @cite{The GAWK Manual} ÁöÑËá¥Ë∞¢Â¶Ç‰∏ãÔºö

@quotation
ÂæàÂ§öÁöÑ‰∫∫ÈúÄË¶ÅÊÑüË∞¢ÔºåÂõ†‰∏∫‰ªñ‰ª¨Â∏ÆÂä©‰∫ßÁîü‰∫ÜËøô‰∏™ÊâãÂÜå„ÄÇ
Jay Fenlason Êèê‰æõ‰∫ÜËÆ∏Â§öÁöÑÊÉ≥Ê≥ï‰∏é‰æãÂ≠ê„ÄÇ
Richard Mlynarik ‰∏é Robert Chassell Áªô‰∫ÜÊñáÊ°£ÈùûÂ∏∏ÊúâÂ∏ÆÂä©ÁöÑÁÇπËØÑ„ÄÇ
John W.@: ÂÜô‰∫Ü @cite{A Supplemental Document for AWK} ÊñáÊ°£„ÄÇ
UC San Diego ÂåñÂ≠¶ÈÉ®ÁöÑ Pierce ÊåáÂá∫Âá†‰∏™ÈóÆÈ¢òÔºåÊó¢‰∏é @command{awk} ÂÆûÁé∞ÊúâÂÖ≥Ôºå‰πü‰∏éÊâãÂÜåÊúâÂÖ≥Ôºå‰∏çÁÑ∂Ëøô‰∫õÈóÆÈ¢ò‰ºöÈÄÉËøáÊàë‰ª¨ÁöÑÁúºÁùõ„ÄÇ
@end quotation

@cindex Stallman, Richard
ÊàëË¶ÅÊÑüË∞¢ Richard M.@: StallmanÔºåÊÑüË∞¢‰ªñÂØπÁæéÂ•Ω‰∏ñÁïåÁöÑÊÑøÊôØÔºåÂπ∂ÊúâÂãáÊ∞îÊàêÁ´ã FSF Âπ∂ÂºÄÂêØ GNU È°πÁõÆ„ÄÇ

@ifclear FOR_PRINT
Êú¨@value{DOCUMENT}Êõ¥Êó©ÁâàÊú¨ÁöÑËá¥Ë∞¢Â¶Ç‰∏ãÔºö
@end ifclear
@ifset FOR_PRINT
Êú¨@value{DOCUMENT}‰πãÂâçÁöÑÁâàÊú¨ÁöÑËá¥Ë∞¢Â¶Ç‰∏ãÔºö
@end ifset

@quotation
‰∏ãÈù¢ÁöÑ‰∫∫ÔºàÊåâÂ≠óÊØçÈ°∫Â∫èÔºâ‰∏∫Êú¨@value{DOCUMENT}ÁöÑ‰∏çÂêåÁâàÊú¨Êèê‰æõ‰∫ÜÂæàÂ•ΩÁöÑÁÇπËØÑÔºö
Rick AdamsÔºå
Dr.@: Nelson H.F. BeebeÔºå 
Karl BerryÔºå
Dr.@: Michael BrennanÔºå
Rich BurridgeÔºå
Claire CloutierÔºå
Diane CloseÔºå
Scott DeifikÔºå
Christopher (‚ÄúTopher‚Äù) EliotÔºå
Jeffrey FriedlÔºå
Dr.@: Darrel HankersonÔºå
Michal JaegermannÔºå
Dr.@: Richard J.@: LeBlancÔºå
Michael LijewskiÔºå
Pat RankinÔºå
Miriam RobbinsÔºå
Mary SheehanÔºå
Âíå Chuck Toporek„ÄÇ

@cindex Berry, Karl
@cindex Chassell, Robert J.@:
@c @cindex Texinfo
Robert J.@: Chassell Âú®‰ΩøÁî® Texinfo ‰∏äÊèê‰æõ‰∫ÜÈùûÂ∏∏Êúâ‰ª∑ÂÄºÁöÑÂª∫ËÆÆ„ÄÇ
‰ªñ‰πüÂ∫îËØ•ÂæóÂà∞ÁâπÂà´ÊÑüË∞¢ÔºåÂõ†‰∏∫‰ªñËØ¥ÊúçÊàë@emph{‰∏çË¶Å}Áî® @cite{How to Gawk Politely} ËøôÊ†∑ÁöÑÊ†áÈ¢òÊù•ÂëΩÂêçÊú¨@value{DOCUMENT}„ÄÇ
Karl Berry Âú® Texinfo ‰∏≠ÁöÑ @TeX{} ÈÉ®ÂàÜÁªô‰∫à‰∫ÜÁõ∏ÂΩìÂ§ßÁöÑÂ∏ÆÂä©„ÄÇ

@cindex Hartholz, Marshall
@cindex Hartholz, Elaine
@cindex Schreiber, Bert
@cindex Schreiber, Rita
Êàë‰πüË¶ÅÊÑüË∞¢ Marshall ‰∏é Seattle ÁöÑ Elaine Hartholz ÔºåËøòÊúâ Detroit ÁöÑ Bert and Rita Schreiber ÂçöÂ£´Ôºå
‰ªñ‰ª¨Áâ∫Áâ≤‰∫ÜÂ§ßÈáèÁöÑÂÅáÊúüÊó∂Èó¥‚Äî‚Äî‰ªñ‰ª¨Êú¨ÂèØ‰ª•ÂÆâÂÆâÈùôËß£Âú∞Âú®ÂÆ∂ÈáåÂ∫¶Ëøá‚Äî‚Äî‰ΩøÂæóÊàëÂú®Êú¨@value{DOCUMENT}ÁöÑÂà∂‰ΩúÂíå @command{gawk} ‰∏äÁöÑÂ∑•‰ΩúÈÉΩËÉΩËøõÂ±ïÁ•ûÈÄü„ÄÇ

@cindex Hughes, Phil
SSC ÁöÑ Phil Hughes ÂÄüÁªôÊàë‰ªñÁöÑÁ¨îËÆ∞Êú¨ GNU/Linux Á≥ªÁªüÔºå‰∏çÊòØ‰∏ÄÊ¨°ÔºåËÄåÊòØ‰∏§Ê¨°Ôºå‰ªñ‰ª•ËøôÊ†∑ÁöÑ‰∏ÄÁßçÊñπÂºè‰ΩøÊàëÂú®Á¶ªÂºÄÂÆ∂ÁöÑÊó∂ÂÄôÂÅö‰∫ÜÂ§ßÈáèÁöÑÂ∑•‰Ωú„ÄÇ

@cindex Trueman, David
David Trueman Â∫îËØ•ÂæóÂà∞ÁâπÂà´ÁöÑËá¥Ë∞¢„ÄÇ‰ªñËá™ÂëäÂ•ãÂãáÂú∞ÊâøÊãÖËµ∑‰∫Ü‰ºòÂåñ @command{gawk} ÁöÑÂ∑•‰ΩúÔºåÂõ†Ê≠§ @command{gawk} Êâç‰ºöÊâßË°åÂæóÂ¶ÇÊ≠§‰πãÂ•ΩÔºåÊ≤°Êúâ Bug„ÄÇ
Â∞ΩÁÆ°‰ªñÁé∞Âú®‰∏çÂÜç‰ªãÂÖ• @command{gawk} ÁöÑÂ∑•‰ΩúÔºå‰ΩÜÊòØ‰∏é‰ªñÂú®Ëøô‰∏™È°πÁõÆ‰∏ä‰∏ÄËµ∑Â∑•‰ΩúÁõ∏ÂΩìÊÑâÂø´„ÄÇ

@cindex Drepper, Ulrich
@cindex GNITS mailing list
@cindex mailing list, GNITS
GNITS ÈÇÆ‰ª∂ÂàóË°®‰∏≠ÁöÑÈÇ£‰∫õÊó†ÁïèÁöÑÊàêÂëò‰ª¨Ôºå‰ª•ÂèäÊúÄÂÄºÂæóÂ∞äÊï¨ÁöÑ Ulrich Drepper ‰∏∫ËÆæËÆ°ÂõΩÈôÖÂåñÁâπÊÄßÊèê‰æõ‰∫ÜÊó†‰ª∑ÁöÑÂ∏ÆÂä©‰∏éÂèçÈ¶à„ÄÇ

Êù•Ëá™ O'Reilly & Associates ÁöÑ Chuck ToporekÔºåMary SheehanÔºåÂíå Claire CloutierÔºåÂØπ @command{gawk} 3.1 ÁâàÁöÑÊú¨@value{DOCUMENT}Êèê‰æõ‰∫ÜÁºñËæë‰∏äÁöÑÂ∏ÆÂä©Ôºå‰ΩúÂá∫‰∫ÜÈáçË¶ÅË¥°ÁåÆ„ÄÇ
@end quotation

@cindex Beebe, Nelson H.F.@:
@cindex Buening, Andreas
@cindex Collado, Manuel
@cindex Colombo, Antonio
@cindex Davies, Stephen
@cindex Deifik, Scott
@cindex Demaille, Akim
@cindex G., Daniel Richard
@cindex Hankerson, Darrel
@cindex Jaegermann, Michal
@cindex Kahrs, J@"urgen
@cindex Kasal, Stepan
@cindex Malmberg, John
@cindex Pitts, Dave
@cindex Ramey, Chet
@cindex Rankin, Pat
@cindex Schorr, Andrew
@cindex Vinschen, Corinna
@cindex Zaretskii, Eli

Dr.@: Nelson BeebeÔºå
Andreas BueningÔºå
Dr.@: Manuel ColladoÔºå
Antonio ColomboÔºå
Stephen DaviesÔºå
Scott DeifikÔºå
Akim DemailleÔºå
Daniel Richard G.Ôºå
Darrel HankersonÔºå
Michal JaegermannÔºå
J@"urgen KahrsÔºå
Stepan KasalÔºå
John MalmbergÔºå
Dave PittsÔºå
Chet RameyÔºå
Pat RankinÔºå
Andrew SchorrÔºå
Corinna VinschenÔºå
Âíå Eli Zaretskii
ÔºàÊåâÂ≠óÊØçÈ°∫Â∫èÔºâ
ÁªÑÊàê‰∫ÜÁõÆÂâçÁöÑ @command{gawk} ‚ÄúÈúπÈõ≥ÁßªÊ§çÊÄßÂ∞èÁªÑ‚Äù„ÄÇÂ¶ÇÊûúÊ≤°Êúâ‰ªñ‰ª¨ÁöÑËâ∞Ëã¶Â∑•‰Ωú‰∏éÂ∏ÆÂä©Ôºå@command{gawk} ‰∏ç‰ºö‰ªäÂ§©ÊúâÂ¶ÇÊ≠§Á®≥ÂÆöÔºåÂèØÁßªÊ§çÁöÑÁ®ãÂ∫è„ÄÇ‰∏éËøôÊ†∑ÁöÑ‰∏ÄÁæ§Â•Ω‰∫∫Â∞èÁªÑ‰∏ÄËµ∑Â∑•‰ΩúÊõæÁªèÊòØ‰πüÂ∞Ü‰∏ÄÁõ¥ÊòØ‰ª∂Âø´‰πêÁöÑ‰∫ãÊÉÖ„ÄÇ

ËÆ∏Â§ö‰∫∫Ë¥°ÁåÆ‰∫ÜÁõ∏ÂΩìÂ§öÁöÑ‰ª£Á†Å‰∏éÊñáÊ°£Ôºå@ref{Contributors} ÔºåÂÖ∂‰∏≠ÊúâÂÆåÊï¥ÁöÑÂàóË°®„ÄÇ

@ifset FOR_PRINT
@cindex Oram, Andy
ÊÑüË∞¢Êù•Ëá™ O'Reilly Media ÁöÑ Andy Oram„ÄÇ‰ªñÂºÄÂßã‰∫ÜÁ¨¨ÂõõÁâàÁöÑÂá∫ÁâàÔºåÂπ∂‰∏îÂú®Ëøô‰∏™ËøáÁ®ã‰∏≠‰∏ÄÁõ¥Êèê‰æõÊîØÊåÅ„ÄÇ
ÊÑüË∞¢ Jasmine Kwityn ÁöÑÊ†°ÂØπÂ∑•‰Ωú„ÄÇ
@end ifset

Ë∞¢Ë∞¢ Michael Brennan ÂÜôÁöÑÂ∫èË®Ä„ÄÇ

@cindex Duman, Patrice
@cindex Berry, Karl
Ë∞¢Ë∞¢ Patrice Dumas Êñ∞ÂÜôÁöÑ @command{makeinfo} Á®ãÂ∫èÔºå‰πüË∞¢Ë∞¢ Karl Berry ÊåÅÁª≠Â∑•‰Ωú‰ΩøÁî® Texinfo ËøôÊ†∑ÁöÑÊ†áÂøóËØ≠Ë®ÄÂ¶ÇÊ≠§ÁâõB„ÄÇ

@cindex Kernighan, Brian
@cindex Brennan, Michael
@cindex Day, Robert P.J.@:
Robert P.J.@: DayÔºåMichael BrennanÔºåËøòÊúâ Brian KernighanÔºåÈùûÂ∏∏Â•ΩÂøÉÂú∞‰Ωú‰∏∫‰∫ÜÊú¨@value{DOCUMENT} 2015 ÁâàÊú¨ÁöÑÂÆ°Ê†∏ËÄÖ„ÄÇ
‰ªñ‰ª¨ÁöÑÂ∑•‰Ωú‰ΩøÁî®ËÆ©Êú¨@value{DOCUMENT}Ë¥®ÈáèÊõ¥‰ºò„ÄÇ

ÊàëËøòË¶ÅÊÑüË∞¢ Brian KernighanÔºåÂõ†‰∏∫Âú®ÊµãËØï‰∏éË∞ÉËØï @command{gawk} ÊúüÈó¥Êèê‰æõÁöÑÊó†‰ª∑Â∏ÆÂä©Ôºå‰πü‰∏∫‰ªñÂú®ÊæÑÊ∏ÖÊó†Êï∞ÁöÑËØ≠Ë®ÄÁñëÁÇπ‰∏äÁöÑÁöÑÊåÅÁª≠Â∏ÆÂä©‰∏éÂª∫ËÆÆ„ÄÇ
Ê≤°Êúâ‰ªñÁöÑÂ∏ÆÂä©Ôºå@command{gawk} ÂíåÂÆÉÁöÑÊñáÊ°£‰∏ç‰ºöÂÉèÁé∞Âú®Ëøô‰πà‰ºòÁßÄ„ÄÇ

Brian ÊòØ‰∏ÄÊµÅÁ®ãÂ∫èÂëò‰∏éÊäÄÊúØ‰ΩúËÄÖÔºåÊàëË¶ÅÔºàÂèà‰∏ÄÊ¨°ÔºâÊÑüË∞¢‰ªñÔºåÂõ†‰∏∫‰ªñÊåÅÁª≠ÁöÑÂèãË∞ä‰∏é‰∏∫ÊàëÊ†ëÁ´ãËµ∑Êù•ÁöÑËøë 30 Âπ¥ÁöÑÊ®°ËåÉ‰ΩúÁî®„ÄÇ
ÊúâËøôÊ†∑ÁöÑ‰∫∫‰Ωú‰∏∫ËØÑËÆ∫‰∫∫ÁúüÊòØÂ§ßÂπ∏„ÄÇËÄå‰ªñ‰∏ÄÁõ¥‰ª•Êù•ÈÉΩÂ¶ÇÊ≠§Ë∞¶Âçë@enddots{}

@cindex Robbins, Miriam
@cindex Robbins, Jean
@cindex Robbins, Harry
@cindex G-d
ÊàëËøòÂæóÊÑüË∞¢ÊàëÁöÑÂÜÖ‰∫∫ÔºåMiriam„ÄÇÂõ†‰∏∫Â•πÁöÑËÄêÂøÉÔºåÂú®Ëøô‰∏™È°πÁõÆÁöÑÂ§ö‰∏™ÁâàÊú¨‰πãÈó¥‰Ωú‰∏∫Á¨¨‰∏ÄËØªËÄÖÔºåÂêåÊó∂Ëøò‰∏éÊàëÂàÜ‰∫´ÁîµËÑë„ÄÇ
ËøòË¶ÅÊÑüË∞¢ÊàëÁöÑËÄÅÁà∏ËÄÅÂ¶àÔºåÂõ†‰∏∫‰ªñ‰ª¨ÁöÑÁà±‰∏éÁîüËÄåËÇ≤ÊàëÁöÑËâ∞Ëæõ„ÄÇÊúÄÂêéÔºåÊàë‰πüË¶ÅÊääÊàëÁöÑÊÑüË∞¢ÁåÆÁªô G-dÔºåÊòØ‰ªñÁªôÊàë‰∫ÜËÆ∏Â§öÊú∫‰ºöÔºåÁ§ºÁâ©ÔºåËÄåËøô‰∫õÁ§ºÁâ©‰ΩøÊàëËÉΩÂ§üÊõ¥Â•ΩÂú∞Âà©Áî®Ëøô‰∫õÊú∫‰ºö„ÄÇ
@ifnotdocbook
@sp 2
@noindent
Arnold Robbins @*
Nof Ayalon @*
Israel @*
February 2015
@end ifnotdocbook

@ifnotinfo
@part @value{PART1} @command{awk} ËØ≠Ë®Ä
@end ifnotinfo

@ifdocbook

Á¨¨‰∏ÄÈÉ®ÂàÜÂØπ @command{awk} ËØ≠Ë®Ä‰ª•Âèä @command{gawk} Á®ãÂ∫èËøõË°åËØ¶ÁªÜÊèèËø∞„ÄÇÈÄöËøá‰ªéÊúÄÂü∫Á°ÄÁöÑÂºÄÂßãÔºå‰∏çÊñ≠ËØ¶Ëß£ @command{awk} ÁöÑÊâÄÊúâÁâπÊÄß„ÄÇ
ËøôÈÉ®ÂàÜÁöÑÂÜÖÂÆπ‰πüÂåÖÂê´‰∫Ü @command{gawk} ÁöÑËÆ∏Â§öÁâπÊÄßÔºå‰ΩÜ‰∏çÊòØÂÖ®ÈÉ®„ÄÇ
ÂÆÉ‰ª¨ÂåÖÂê´Â¶Ç‰∏ãÁ´†ËäÇÔºö

@itemize @value{BULLET}
@item
@ref{Getting Started}

@item
@ref{Invoking Gawk}

@item
@ref{Regexp}

@item
@ref{Reading Files}

@item
@ref{Printing}

@item
@ref{Expressions}

@item
@ref{Patterns and Actions}

@item
@ref{Arrays}

@item
@ref{Functions}
@end itemize
@end ifdocbook

@node Getting Started
@chapter ÂºÄÂßã @command{awk}
@c @cindex script, definition of
@c @cindex rule, definition of
@c @cindex program, definition of
@c @cindex basic function of @command{awk}
@cindex @command{awk}, function of

@command{awk} ÁöÑÂü∫Êú¨ÂäüËÉΩÂ∞±ÊòØÊü•ÊâæÂÖ∑ÊüêÁßçÊ®°ÂºèÁöÑÊñáÊú¨Ë°åÔºàÊàñËÄÖÂÖ∂‰ªñÂçï‰ΩçÁöÑÊñáÊú¨Ôºâ„ÄÇ
ÂΩìÂåπÈÖçÊüê‰∏™Ê®°ÂºèÂêéÔºå@command{awk} ‰ºöÂØπËØ•Ë°åÊâßË°åÊåáÂÆöÁöÑÂä®‰Ωú„ÄÇ
@command{awk} ÁÑ∂ÂêéÁªßÁª≠ËæìÂÖ•Ë°åÔºåÁõ¥Âà∞Êñá‰ª∂ËæìÂÖ•Â§ÑÁêÜÂÆåÊØï„ÄÇ

@cindex @command{awk}, uses for
@cindex programming languages@comma{} data-driven vs.@: procedural
@cindex @command{awk} programs
@command{awk} ‰∏≠ÁöÑÁ®ãÂ∫è‰∏éÂÖ∂‰ªñËØ≠Ë®ÄÁöÑÁ®ãÂ∫è‰∏çÂêåÔºåÂõ†‰∏∫ @command{awk} Á®ãÂ∫èÊòØ@dfn{Êï∞ÊçÆÈ©±Âä®}ÁöÑÔºàÂç≥‰Ω†ÊèèËø∞‰Ω†Ë¶ÅÂ§ÑÁêÜÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÂëäËØâÁ®ãÂ∫èÊâæÂà∞Áõ∏Â∫îÊï∞ÊçÆÂêéË¶ÅÊâßË°åÁöÑÂ∑•‰ΩúÔºâ„ÄÇ
Â§öÊï∞ÂÖ∂‰ªñËØ≠Ë®ÄÈÉΩÊòØ@dfn{ËøáÁ®ãÂºè}ÁöÑÔºõ‰Ω†ÈúÄË¶ÅÂú®ÈùûÂ∏∏ÁªÜÁöÑÁªÜËäÇ‰∏äÊèèËø∞Á®ãÂ∫èÊØè‰∏ÄË°åË¶ÅÂÅö‰ªÄ‰πà„ÄÇ
ÂΩì‰∏éËøáÁ®ãÂºèËØ≠Ë®ÄÊâì‰∫§ÈÅìÊó∂Ôºå‰∏ÄËà¨ÂæàÈöæÊ∏ÖÊ•öÂú∞ÊèèËø∞‰Ω†ÁöÑÁ®ãÂ∫èÊâÄË¶ÅÂ§ÑÁêÜÁöÑÊï∞ÊçÆ„ÄÇÊ≠£ÊòØÁî±‰∫éËøô‰∏™ÂéüÂõ†Ôºå@command{awk} Á®ãÂ∫èÈùûÂ∏∏ÊòìËØªÊòìÂÜô„ÄÇ

@cindex program, definition of
@cindex rule, definition of
ÂΩìÊâßË°å @command{awk} Á®ãÂ∫èÔºå‰Ω†ÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™@dfn{Á®ãÂ∫è}ÂëäÁü• @command{awk} Êé•‰∏ãÊù•Ë¶ÅÂÅö‰ªÄ‰πà„ÄÇ
Ëøô‰∏™Á®ãÂ∫èÂåÖÊã¨‰∏ÄÁ≥ªÁªüÁöÑ@dfn{ËßÑÂàô}ÔºàÊúâÂèØËÉΩ‰πü‰ºöÂåÖÂê´@dfn{ÂáΩÊï∞ÂÆö‰πâ}Ôºå‰∏Ä‰∫õ‰Ω†Áé∞Âú®ÂèØ‰ª•ÂøΩÁï•ÁöÑÈ´òÁ∫ßÁâπÊÄßÔºõ@pxref{User-defined})Ôºå
ÊØè‰∏™ËßÑÂàôÊåáÂÆö‰∫ÜË¶ÅÊü•ÊâæÁöÑÊ®°Âºè‰ª•Âèä‰∏Ä‰∏™Âú®Êü•ÊâæÂà∞Ê®°ÂºèÊó∂Ë¶ÅÊâßË°åÁöÑÂä®‰Ωú„ÄÇ

Âú®ËØ≠Ê≥ï‰∏äÔºåËßÑÂàôÂåÖÊã¨‰∏Ä‰∏™@dfn{Ê®°Âºè}ÔºåÂêéÈù¢Â∏¶ÁùÄ@dfn{Âä®‰Ωú}„ÄÇÂä®‰ΩúÊòØÂåÖÂê´Âú®Ëä±Êã¨Âè∑‰∏≠ÁöÑÔºå‰∏éÊ®°ÂºèÂàÜÁ¶ª„ÄÇÊØè‰∏ÄË°å‰∏ÄËà¨ÈÉΩÊòØÊñ∞ÁöÑ‰∏çÂêåÁöÑËßÑÂàô„ÄÇ
Âõ†Ê≠§Ôºå@command{awk} Á®ãÂ∫èÁúãËµ∑Êù•ÂÉèËøôÊ†∑Ôºö

@example
@var{pattern} @{ @var{action} @}
@var{pattern} @{ @var{action} @}
@dots{}
@end example

@menu
* Running gawk::                Â¶Ç‰ΩïÊâßË°å @command{awk} Á®ãÂ∫èÔºõÂåÖÊã¨ÂëΩ‰ª§Ë°åËØ≠Ê≥ï„ÄÇ
* Sample Data Files::           Sample data files for use in the @command{awk}
                                programs illustrated in this @value{DOCUMENT}.
* Very Simple::                 A very simple example.
* Two Rules::                   A less simple one-line example using two
                                rules.
* More Complex::                A more complex example.
* Statements/Lines::            Subdividing or combining statements into
                                lines.
* Other Features::              Other Features of @command{awk}.
* When::                        When to use @command{gawk} and when to use
                                other things.
* Intro Summary::               Summary of the introduction.
@end menu

@node Running gawk
@section Â¶Ç‰ΩïÊâßË°å @command{awk} Á®ãÂ∫è 

@cindex @command{awk} programs, running
ÊúâÂá†ÁßçÊñπÂºèÊâßË°å @command{awk} Á®ãÂ∫è„ÄÇÂ¶ÇÊûúÁ®ãÂ∫èÂæàÁü≠ÔºåÊúÄÂ•ΩÁöÑÊñπÂºèÁõ¥Êé•ÂåÖÂê´Âú®Á®ãÂ∫èÁöÑÊâßË°åÂëΩ‰ª§Ë°å‰∏≠ÔºåÂ¶Ç‰∏ãÔºö

@example
awk '@var{program}' @var{input-file1} @var{input-file2} @dots{}
@end example

@cindex command line, formats
ÂΩìÁ®ãÂ∫èÊØîËæÉÈïøÔºåÊõ¥Â•ΩÁöÑÊñπÂºèÊòØÂ∞ÜÂÖ∂ÊîæÂú®‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÔºåÁÑ∂ÂêéÈÄöËøáÂëΩ‰ª§Ë°åÊâßË°åÔºö

@example
awk -f @var{program-file} @var{input-file1} @var{input-file2} @dots{}
@end example

Âú®Êú¨@value{SECTION}‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®‰∏§ÁßçÊñπÂºèÔºå‰ΩÜÊòØÊØèÁßçÊñπÂºèÈÉΩÊúâ‰∏Ä‰∫õÂèòÂåñ„ÄÇ

@menu
* One-shot::                    ËøêË°å‰∏ÄÊ¨°ÊÄß @command{awk} Á®ãÂ∫è„ÄÇ
* Read Terminal::               Using no input files (input from the keyboard
                                instead).
* Long::                        Putting permanent @command{awk} programs in
                                files.
* Executable Scripts::          Making self-contained @command{awk} programs.
* Comments::                    Adding documentation to @command{gawk}
                                programs.
* Quoting::                     More discussion of shell quoting issues.
@end menu

@node One-shot
@subsection ‰∏ÄÊ¨°ÊÄß @command{awk} Á®ãÂ∫è

‰∏ÄÊó¶‰Ω†ÁÜüÊÇâ‰∫Ü @command{awk}Ôºå‰Ω†Â∞±ÂèØ‰ª•Âú®‰ΩøÁî®Êó∂Á´ãÂç≥ËæìÂÖ•‰∏Ä‰∫õÁÆÄÂçïÁöÑÁ®ãÂ∫è„ÄÇ
‰Ω†ÂèØ‰ª•ÊääÁ®ãÂ∫è‰Ωú‰∏∫ @command{awk} ÂëΩ‰ª§Ë°åÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂÉèËøôÊ†∑Ôºö

@example
awk '@var{program}' @var{input-file1} @var{input-file2} @dots{}
@end example

@noindent
Ëøô‰∏™@var{Á®ãÂ∫è}ÂåÖÊã¨‰∏ÄÁ≥ªÂàóÁöÑÊ®°Âºè‰∏éÂä®‰ΩúÔºåÊ≠£Â¶ÇÊó©‰∫õÊó∂ÂÄôÊâÄÊèèËø∞ÁöÑÈÇ£Ê†∑„ÄÇ

@cindex single quote (@code{'})
@cindex @code{'} (single quote)
ËøôÁßçÂëΩ‰ª§Ê†ºÂºèÂëäËØâ @dfn{Shell}ÔºåÊàñËÄÖÂëΩ‰ª§Ë°åËß£ÈáäÂô®ÔºåÂºÄÂêØ @command{awk}ÔºåÂπ∂Áî®ÂÖ∂‰∏≠ÁöÑ@var{Á®ãÂ∫è}Êù•Â§ÑÁêÜËæìÂÖ•Êñá‰ª∂„ÄÇ
@var{Á®ãÂ∫è}ÊòØÁî±ÂçïÂºïÂè∑ÂºïËµ∑Êù•ÁöÑÔºåÂõ†Ê≠§ Shell ‰∏ç‰ºöÂ∞Ü @command{awk} ‰∏≠ÁöÑÁâπÊÆäÂ≠óÁ¨¶Ëß£ÊûêÊàê Shell ÁöÑÂ≠óÁ¨¶„ÄÇ
ÂçïÂºïÂè∑‰πü‰ΩøÁî® Shell Â∞ÜÊâÄÊúâÁöÑ@var{Á®ãÂ∫è}ÈÉΩ‰Ωú‰∏∫ÂçïÁã¨ÁöÑ @command{awk} ÈÉ®ÂàÜÔºåÂèØ‰ª•ËÆ©@var{Á®ãÂ∫è}Â§ö‰∫é‰∏ÄË°å„ÄÇ

@cindex shells, scripts
@cindex @command{awk} programs, running, from shell scripts
ËøôÊ†∑ÁöÑÊñπÂºèÁî®Êù•ÊâßË°åÁü≠ÁöÑÊàñËÄÖ‰∏≠Á≠âÂ§ßÂ∞èÁöÑ @command{awk} Á®ãÂ∫èÊòØÂæàÊñπ‰æøÁöÑÔºåÂõ†‰∏∫ÂÆÉÈÅøÂÖç‰∫ÜË¶ÅÁî®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂Êù•ÂÜô @command{awk} Á®ãÂ∫è„ÄÇ
Ëá™ÂåÖÂê´ÁöÑ Shell ËÑöÊú¨Êõ¥Âä†ÂèØÈù†ÔºåËøôÊ†∑Â∞±‰∏ç‰ºöË∑üÂÖ∂‰ªñÁöÑÊñá‰ª∂ÂºÑÊ∑∑Ê∑Ü„ÄÇ

Âú®Êú¨Á´†ÁöÑÂêéÈù¢ÈÉ®ÂàÜÔºåÂç≥
@ifdocbook
@value{SECTION} 
@end ifdocbook
@ref{Very Simple}ÔºåÊàë‰ª¨‰ºöÂ≠¶‰∏Ä‰∫õÈÇ£‰∫õËá™ÂåÖÂê´ÁöÑÁ®ãÂ∫èÂæàÁü≠ÁöÑ‰æãÂ≠ê„ÄÇ

@node Read Terminal
@subsection ‰∏çÂ∏¶ËæìÂÖ•Êñá‰ª∂ËøêË°å @command{awk} 

@cindex standard input
@cindex input, standard
@cindex input files, running @command{awk} without
‰Ω†‰πüÂèØ‰ª•ËøêË°å @command{awk} Á®ãÂ∫èÔºå‰∏çÂ∏¶ËæìÂÖ•Êñá‰ª∂ÔºåÂ¶ÇÊûú‰Ω†Êï≤ÂÖ•‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ë°åÔºö

@example
awk '@var{program}'
@end example

@noindent
@command{awk} ‰ºö‰Ωø@var{Á®ãÂ∫è}ÂØºÂêëÂà∞@dfn{Ê†áÂáÜËæìÂÖ•}Ôºå‰πüÂ∞±ÊòØËØ¥Ôºå‰Ω†Âú®ÈîÆÁõò‰∏äËæìÂÖ•ÁöÑ‰∏ÄÂàáÈÉΩ‰ºöÊé•Âèó‰∏∫ËæìÂÖ•Êï∞ÊçÆ„ÄÇ
Ëøô‰ºö‰∏ÄÁõ¥ÊåÅÁª≠ÔºåÁõ¥Âà∞‰Ω†ËæìÂÖ• @kbd{Ctrl-d} Êù•Ë°®Á§∫‚Äúend-of-file‚Äù„ÄÇ
@ifset FOR_PRINT
ÔºàÂú®Èùû POSIX Êìç‰ΩúÁ≥ªÁªü‰∏≠Ôºå‚Äúend-of-file‚ÄùÊúâÂèØËÉΩ‰∏çÂêå„ÄÇÔºâ
@end ifset
@ifclear FOR_PRINT
ÔºàÂú®Èùû POSIX Êìç‰ΩúÁ≥ªÁªü‰∏≠Ôºå‚Äúend-of-file‚ÄùÊúâÂèØËÉΩ‰∏çÂêå„ÄÇÂ¶ÇÂú® OS/2 ‰∏≠ÂàôÊòØ @kbd{Ctrl-z}Ôºâ
@end ifclear

@cindex files, input, See input files
@cindex input files, running @command{awk} without
@cindex @command{awk} programs, running, without input files
Â¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºåÁ®ãÂ∫èÊâìÂç∞‰∏ÄÂ∞èÊÆµÂª∫ËÆÆÔºàÊù•Ëá™Áî± Douglas Adams ÁöÑ @cite{The Hitchhiker's Guide to the Galaxy}ÔºâÔºå‰Ωø‰Ω†Ê∂àÈô§ËÆ°ÁÆóÊú∫Á®ãÂ∫èÂ§çÊùÇÊÄßÁöÑÂøßËôëÔºö

@example
$ @kbd{awk 'BEGIN @{ print "Don\47t Panic!" @}'}
@print{} Don't Panic!
@end example

@command{awk} Âú®ËØªÂÖ•‰ªª‰ΩïËæìÂÖ•‰πãÂâçÔºåÂÖàÊâßË°å‰∏é @code{BEGIN} Áõ∏ÂÖ≥ÁöÑËØ≠Âè•„ÄÇ
Â¶ÇÊûúÁ®ãÂ∫è‰∏≠Ê≤°Êúâ‰∫ÜÂÖ∂‰ªñÁöÑ‰ª£Á†Å‰∫ÜÔºåÂÉèËøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑÊÉÖÂÜµ‰∏ÄÊ†∑Ôºå@command{awk} Â∞±Áõ¥Êé•ÁªìÊùüÔºåËÄå‰∏çÊòØËØïÂõæËØªÂèñËá™Â∑±‰∏çÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÁöÑËæìÂÖ•„ÄÇ
@samp{\47} ÊòØ‰∏Ä‰∏™Â∞èÊäÄÂ∑ßÔºàÂêéÈù¢‰ºöËß£ÈáäÔºâÊù•Â∞ÜÂçïÂºïÂè∑ÂºïÂÖ•Á®ãÂ∫èÔºåËøôÊ†∑Â∞±‰∏çÁî®‰ΩøÁî® Shell ‰∏ëÈôãÁöÑÂºïÊñá‰ºé‰ø©„ÄÇ

@quotation ÊèêÁ§∫
Â¶ÇÊûú‰Ω†‰ΩøÁî® BashÔºå‰Ω†ÈúÄË¶ÅÂÖàÊâßË°åÂëΩ‰ª§ @samp{set +H}ÔºåÁÑ∂ÂêéÂÜçÊâßË°åËøô‰∏™‰∫§‰∫íÂºèÁöÑÂëΩ‰ª§Ôºå‰ª•Á¶ÅÁî® C shell ÂºèÁöÑÂëΩ‰ª§ÂéÜÂè≤Ôºå
Âú®ËøôÁßçÊñπÂºè‰∏ã @samp{!} ‰ºöË¢´ÂΩì‰ΩúÁâπÊÆäÂ≠óÁ¨¶„ÄÇÊàë‰ª¨Âª∫ËÆÆ‰Ω†Â∞ÜËøô‰∏™ÂëΩ‰ª§ÊîæÂú®‰Ω†Áî®Êà∑ÁöÑÂêØÂä®Êñá‰ª∂‰∏≠„ÄÇ@footnote{Â¶ÇÂú® Linux Á≥ªÁªü‰∏≠Áî®Êà∑ÁõÆÂΩï‰∏ãÁöÑ .profile Á≠âÊñá‰ª∂‰∏≠„ÄÇ‚Äî‚ÄîËØëËÄÖÊ≥®} 
@end quotation

‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÊ®°Êãü @command{cat} Â∑•ÂÖ∑ÁöÑ @command{awk} Á®ãÂ∫èÔºõÂÆÉÂ§çÂà∂‰Ω†ËæìÂÖ•ÁöÑÂ≠óÁ¨¶ÔºåÁÑ∂ÂêéËæìÂá∫Âà∞Ê†áÂáÜËæìÂá∫‰∏äÔºà‰∏∫‰ªÄ‰πàËøô‰∏™ÂèØ‰ª•ÂÅöÂæóÂà∞Á≠â‰ºöËß£ÈáäÔºâÔºö

@example
$ @kbd{awk '@{ print @}'}
@kbd{Now is the time for all good men}
@print{} Now is the time for all good men
@kbd{to come to the aid of their country.}
@print{} to come to the aid of their country.
@kbd{Four score and seven years ago, ...}
@print{} Four score and seven years ago, ...
@kbd{What, me worry?}
@print{} What, me worry?
@kbd{Ctrl-d}
@end example

@node Long
@subsection ËøêË°åÈïøÁ®ãÂ∫è

@cindex @command{awk} programs, running
@cindex @command{awk} programs, lengthy
@cindex files, @command{awk} programs in
ÊúâÊó∂Ôºå@command{awk} Á®ãÂ∫èÈùûÂ∏∏ÈïøÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊõ¥Êñπ‰æøÁöÑÊñπÊ≥ïÊòØÂ∞ÜÁ®ãÂ∫èÊîæÂú®‰∏Ä‰∏™Áã¨Á´ãÁöÑÊñá‰ª∂‰∏≠„ÄÇ
‰∏∫‰∫ÜÂëäËØâ @command{awk} ÊâßË°åÊüê‰∏™Êñá‰ª∂‰∏≠ÁöÑÁ®ãÂ∫èÔºå‰Ω†Êï≤ÂÖ•Ôºö

@example
awk -f @var{source-file} @var{input-file1} @var{input-file2} @dots{}
@end example

@cindex @option{-f} option
@cindex command line, option @option{-f}
@option{-f} ÂèÇÊï∞ÊåáÁ§∫ @command{awk} Â∑•ÂÖ∑‰ªé @var{source-file} ‰∏≠ËØªÂèñÁ®ãÂ∫èÔºà@pxref{Options}Ôºâ„ÄÇ
‰ªª‰ΩïÁöÑ@value{FN}ÈÉΩÂèØ‰ª•‰Ωú‰∏∫@var{source-file}„ÄÇÂ¶Ç‰Ω†ÂèØ‰ª•ËæìÂÖ•‰∏ãÈù¢ÂëΩ‰ª§Ë°åÔºö

@example
BEGIN @{ print "Don't Panic!" @}
@end example

@noindent
Âà∞Êñá‰ª∂ @file{advice} ‰∏≠ÔºåÁÑ∂ÂêéÊâßË°å‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ë°åÔºö

@example
awk -f advice
@end example

@noindent
‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂÅö‰∏ÄÊ†∑ÁöÑ‰∫ãÊÉÖÔºö

@example
awk 'BEGIN @{ print "Don\47t Panic!" @}'
@end example

@cindex quoting in @command{gawk} command lines
@noindent
Ëøô‰∏™Â∑≤ÁªèÊó©Ëß£ÈáäËøáÔºà@pxref{Read Terminal}Ôºâ„ÄÇ
Ê≥®ÊÑèÔºåÂΩì‰Ω†Áî® @option{-f} ÂèÇÊï∞ÊåáÂÆö@value{FN}Êó∂Ôºå‰Ω†‰∏çÈúÄË¶ÅÊää@value{FN}ÂºïËµ∑Êù•ÔºåÂõ†‰∏∫Â§ßÂ§öÊï∞@value{FN}ÈÉΩ‰∏ç‰ºöÂê´ Shell ÁâπÊÆäÂ≠óÁ¨¶„ÄÇ
Âú®Êñá‰ª∂ @file{advice} ‰∏≠Ôºå@command{awk} Á®ãÂ∫èÂπ∂Ê≤°ÊúâÊääÊñá‰ª∂ÂÜÖÂÆπÁªôÂºïËµ∑Êù•„ÄÇÂºïÂè∑Âè™Âú®ÂëΩ‰ª§Ë°å‰∏äËæìÂÖ•Á®ãÂ∫èÊâçÈúÄË¶Å„ÄÇÔºàÂΩìÁÑ∂ÔºåÊääÁ®ãÂ∫è‰ª£Á†ÅÊîæÂÖ•Êñá‰ª∂‰∏≠Ôºå‰ΩøÂæóÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂºïÂè∑Ôºà‚Äò‚ÄôÔºâÔºåËÄå‰∏çÈúÄË¶ÅÂÉè @samp{\47} ËøôÊ†∑ÁöÑËøõË°åËæìÂÖ•„ÄÇ

@cindex single quote (@code{'}) in @command{gawk} command lines
@cindex @code{'} (single quote) in @command{gawk} command lines
Â¶ÇÊûú‰Ω†ÊÉ≥Ê∏ÖÊ•öÂú∞Ê†áËØÜËøôÊ†∑ÁöÑ @command{awk} Á®ãÂ∫èÔºå‰Ω†ÂèØ‰ª•Áªô@value{FN}Âä†‰∏äÊâ©Â±ïÂêç @file{.awk} „ÄÇ
Ëøô‰∏ç‰ºöÂΩ±Âìç @command{awk} Á®ãÂ∫èÁöÑÊâßË°åÔºå‰ΩÜÁ°ÆÂÆû‰Ωø‚ÄúÂÆ∂Âä°‰∫ã‚ÄùÂÆπÊòì‰∫ÜËÆ∏Â§ö„ÄÇ

@node Executable Scripts
@subsection ÂèØÊâßË°åÁöÑ @command{awk} Á®ãÂ∫è
@cindex @command{awk} programs
@cindex @code{#} (number sign), @code{#!} (executable scripts)
@cindex Unix, @command{awk} scripts and
@cindex number sign (@code{#}), @code{#!} (executable scripts)

Â¶ÇÊûú‰Ω†Â≠¶Ëøá @command{awk}Ôºå‰Ω†ÂèØËÉΩÂ∞±‰ºöÊÉ≥Áî® @samp{#!} ËøôÊ†∑ÁöÑÊú∫Âà∂ÂÜô‰∏Ä‰∏™Ëá™ÂåÖÂê´ÁöÑ @command{awk} ËÑöÊú¨„ÄÇ
Âú®ÂæàÂ§öÁ≥ªÁªü@footnote{@samp{#!} ËøôÊ†∑ÁöÑÊú∫Âà∂ÂèØ‰ª•Âú®GNU/LinuxÔºåÂü∫‰∫é BSD ÁöÑÁ≥ªÁªü‰ª•Âèä Unix Á≥ªÁªü‰∏ä‰ΩøÁî®„ÄÇ}
‰∏ä‰Ω†ÈÉΩÂèØ‰ª•Ëøô‰πàÂπ≤„ÄÇ‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ÊääadviceÊñá‰ª∂ÂÜôÊàêËøôÊ†∑Ôºö

@example
#! /bin/awk -f

BEGIN @{ print "Don't Panic!" @}
@end example

@noindent
ÊääËøô‰∏™Êñá‰ª∂ËÆæÁΩÆÊàêÂèØÊâßË°åÊùÉÈôêÔºàÁî® @command{chmod} Â∑•ÂÖ∑ÔºâÔºåÂú® Shell ‰∏≠ÁÆÄÂçïÂú∞ËæìÂÖ• @samp{advice}Ôºå
Á≥ªÁªüÂ∞±‰ºöÂ∞Ü @command{awk} ÊâßË°åÊàêÂÉè‰Ω†ËæìÂÖ•‰∫Ü @samp{awk -f advice} ‰∏ÄÊ†∑Ôºö

@example
$ @kbd{chmod +x advice}
$ @kbd{advice}
@print{} Don't Panic!
@end example

@noindent
ÔºàÊàë‰ª¨ÂÅáËÆæ‰Ω†Â∑≤ÁªèÂ∞Ü‰Ω†ÁöÑÂΩìÂâçÁõÆÂΩïÊîæÂú®‰∫Ü‰Ω†ÁöÑ Shell ÁöÑÊêúÁ¥¢Ë∑ØÂæÑÂèòÈáè‰∏ã„Äê‰∏ÄËà¨‰∏∫ @code{$PATH}„Äë„ÄÇ
Â¶ÇÊûúÊ≤°ÊúâËøô‰πàÂÅöÔºå‰Ω†Êï≤ÂÖ• @samp{./advice} Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÔºâ

Ëá™ÂåÖÂê´ÁöÑ @command{awk} ËÑöÊú¨Âú®Áî®Êà∑Ë∞ÉÁî®ËÑöÊú¨‰ΩÜ‰∏çÈúÄË¶ÅÁü•ÈÅìÁ®ãÂ∫èÊòØÁî® @command{awk} ÂÆûÁé∞Êó∂ÈùûÂ∏∏ÊúâÁî®„ÄÇ

@sidebar ÁêÜËß£ @samp{#!}
@cindex portability, @code{#!} (executable scripts)

@command{awk} ÊòØ‰∏Ä‰∏™@dfn{Ëß£ÈáäÂûã}ËØ≠Ë®Ä„ÄÇËøôË°®Á§∫Ôºå@command{awk} Â∑•ÂÖ∑Êää‰Ω†ÁöÑÁ®ãÂ∫èËØªÂÖ•ÂêéÔºå‰ºöÊ†πÊçÆ‰Ω†Á®ãÂ∫è‰∏≠ÁöÑÊåá‰ª§Êù•Â§ÑÁêÜ‰Ω†ÁöÑÊï∞ÊçÆ„ÄÇ
ÔºàËøô‰∏çÂêå‰∫é C ËøôÊ†∑ÁöÑ@dfn{ÁºñËØëÂûã}ËØ≠Ë®ÄÔºåÈ¶ñÂÖà‰Ω†ÈúÄË¶ÅÂ∞ÜÂÆÉ‰ª¨ÁºñËØëÊàêÊú∫Âô®‰ª£Á†ÅÔºåËøô‰∫õ‰ª£Á†ÅÂèØ‰ª•Áõ¥Êé•Ë¢´‰Ω†Á≥ªÁªüÁöÑÂ§ÑÁêÜÂô®ÊâßË°å„ÄÇÔºâ
@command{awk} Â∑•ÂÖ∑Âõ†Ê≠§Ë¢´Áß∞‰∏∫@dfn{Ëß£ÈáäÂô®ÔºàinterpreterÔºâ}„ÄÇÂ§öÊï∞ÁöÑÁé∞‰ª£ËØ≠Ë®ÄÈÉΩÊòØËß£ÈáäÊâßË°åÁöÑ„ÄÇ

‰ª• @samp{#!} ÂºÄÂßãÁöÑË°åÂàóÂá∫‰∫ÜË¶ÅÊâßË°åÁöÑËß£ÈáäÂô®Êñá‰ª∂ÁöÑÂÆåÊï¥Ë∑ØÂæÑÔºåÂåÖÊã¨‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂèØÈÄâÂëΩ‰ª§Ë°åÂèÇÊï∞Ë¶Å‰º†ÈÄíÁªôÂØπÂ∫îÁöÑËß£ÈáäÂô®„ÄÇ
Êìç‰ΩúÁ≥ªÁªüÁÑ∂ÂêéÁî®ÁªôÂÆöÁöÑÂèÇÊï∞ÊâßË°åËß£ÈáäÂô®‰ª•ÂèäÊâÄÊúâÁöÑÂèÇÊï∞ÂàóË°®ÊâßË°åË¢´ÊâßË°åÁöÑÁ®ãÂ∫è„ÄÇ
Á¨¨‰∏Ä‰∏™ÂèÇÊï∞Âç≥ÊòØ @command{awk} Á®ãÂ∫èÁöÑÂÆåÊï¥Ë∑ØÂæÑ„ÄÇ
ÂÖ∂‰ªñÁöÑÂèÇÊï∞ÔºåË¶Å‰πàÊòØ @command{awk} ÁöÑÂèÇÊï∞ÔºåË¶Å‰πàÊòØ@value{DF}ÔºåÊàñËÄÖ‰∫åËÄÖÂÖºÊúâ„ÄÇ
ÔºàÊ≥®ÊÑèÔºåÂú®ÂæàÂ§öÁöÑÁ≥ªÁªü‰∏äÔºå@command{awk} ‰ºöÂú® @file{/usr/bin} ÁõÆÂΩï‰∏ãÊâæÂà∞ÔºåËÄå‰∏çÊòØÂú® @file{/bin} ÁõÆÂΩï‰∏ã„ÄÇÔºâ

ÊúâÁöÑÁ≥ªÁªü‰ºöÂ∞ÜËß£ÈáäÂô®ÁöÑÈïøÂ∫¶ÈôêÂà∂Âú® 32 ‰∏™Â≠óÁ¨¶„ÄÇ‰ΩÜËøôÁßçÊÉÖÂÜµÁî®ËΩØËøûÊé•Â∞±ÂèØ‰ª•Ëß£ÂÜ≥„ÄÇ

Âú® @samp{#!} Ë°åÔºå‰Ω†Âú® @command{awk} ÁöÑË∑ØÂæÑÂêéÈù¢ÊúÄÂ•Ω‰∏çÂ•ΩÊîæË∂Ö‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ
Ëøô‰∏ç‰ºöÊúâ‰ΩúÁî®„ÄÇÊìç‰ΩúÁ≥ªÁªü‰ºöÂ∞ÜÈÇ£‰∏ÄË°åÂâ©‰∏ãÁöÑÂÜÖÂÆπÂΩì‰Ωú‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂπ∂‰º†ÈÄíÁªô @command{awk}„ÄÇ
Ëøô‰ºöÂØºËá¥‰∏Ä‰∫õ‰ª§‰∫∫ÁñëÊÉëÁöÑË°å‰∏∫‚Äî‚ÄîÂ§öÊï∞ÂÉèÊòØ @command{awk} ‰ΩøÁî®ÊñπÊ≥ïÁöÑ‰∏Ä‰∫õËØäÊñ≠‰ø°ÊÅØ„ÄÇ

@cindex @code{ARGC}/@code{ARGV} variables, portability and
@cindex portability, @code{ARGV} variable
ÊúÄÂêéÔºå@code{ARGV[0]} ÂèÇÊï∞ÁöÑÂÄºÔºà@pxref{Built-in Variables}Ôºâ‰ºöÊ†πÊçÆÁ≥ªÁªüÁöÑÂêåËÄå‰∏çÂêå„ÄÇ
ÊúâÁöÑÁ≥ªÁªü‰ºöÊää @samp{awk} ‰Ωú‰∏∫ÂÆÉÁöÑÂÄºÔºåËÄåÊúâÁöÑ‰ºöÂ∞Ü @command{awk} ÁöÑÂÆåÊï¥Ë∑ØÂæÑËµãÂÄºÁªôÂÆÉÔºàÂ¶Ç @file{/bin/awk}Ôºâ„ÄÇ
Êúâ‰∏Ä‰∫õ‰ºöÂ∞ÜËÑöÊú¨ÁöÑÊñá‰ª∂ÂêçÔºà@samp{advice}ÔºâËµãÁªôÂÆÉ„ÄÇ
ÊâÄ‰ª•Ôºå‰∏çË¶Å‰æùËµñ‰∫é @code{ARGV[0]} ÁöÑÂÄºÊù•Êèê‰æõÁªô‰Ω†ÁöÑËÑöÊú¨‰ΩøÁî®„ÄÇ
@end sidebar

@node Comments
@subsection @command{awk} Á®ãÂ∫è‰∏≠ÁöÑÊ≥®Èáä
@cindex @code{#} (number sign), commenting
@cindex number sign (@code{#}), commenting
@cindex commenting
@cindex @command{awk} programs, documenting

@dfn{Ê≥®Èáä}ÔºåÂ∞±ÊòØÁ®ãÂ∫è‰∏≠Áªô‰∫∫ËØªÁöÑÊñáÊú¨ÔºõÂÆÉ‰∏çÊòØÂèØÊâßË°åÁ®ãÂ∫èÁöÑ‰∏ÄÈÉ®‰ªΩ„ÄÇÊ≥®ÈáäÂèØ‰ª•Ëß£ÈáäÁ®ãÂ∫èÊòØÂÅö‰ªÄ‰πàÁöÑÔºå‰ª•ÂèäÂ¶Ç‰ΩïÂÅöÁöÑ„ÄÇÂá†‰πéÊâÄÊúâÁöÑÁ®ãÂ∫èËØ≠Ë®ÄÈÉΩ‰ºöÊèê‰æõÊ≥®ÈáäÔºåÂõ†‰∏∫Á®ãÂ∫èÂ¶ÇÊûúÊ≤°ÊúâÂÆÉ‰ª¨ÊòØÈùûÂ∏∏‰∫éÈöæÁêÜËß£ÁöÑ„ÄÇ

Âú® @command{awk} ËØ≠Ë®Ä‰∏≠ÔºåÊ≥®Èáä‰ª• @samp{#} ÂºÄÂ§¥ÁÑ∂ÂêéÊåÅÁª≠Âà∞‰∏ÄË°åÁöÑÁªìÊùü„ÄÇ @samp{#} ‰∏ç‰∏ÄÂÆöË¶ÅÊòØ‰∏ÄË°åÁöÑÂºÄÂßãÂ≠óÁ¨¶„ÄÇ
@command{awk} ‰ºöÂøΩÁï•Êï∞Â≠óÁ¨¶Âè∑ @samp{#} ÂêéÈù¢ÁöÑÂÜÖÂÆπ„ÄÇÂ¶ÇÊàë‰ª¨Â∑≤ÁªèÂú® @file{advice} ‰∏≠ËæìÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÂÜÖÂÆπÔºö

@example
# This program prints a nice, friendly message.  It helps
# keep novice users from being afraid of the computer.
BEGIN    @{ print "Don't Panic!" @}
@end example

‰Ω†ÂèØ‰ª•Â∞ÜÊ≥®Èáä‰πüÂ∏¶ËøõÂëΩ‰ª§Ë°å‰∏≠ÁöÑ‚ÄúÁî®ÂêéÂç≥Êâî‚Äù@command{awk} Á®ãÂ∫è‰∏≠Ôºå‰ΩÜÊòØ‰∏ÄËà¨Êù•ËÆ≤ÔºåËøô‰∏™Áî®Â§Ñ‰∏çÂ§ßÔºõÊ≥®ÈáäÁöÑÁõÆÁöÑÊòØÂ∏Æ‰Ω†ÊàñËÄÖÂÖ∂‰ªñ‰∫∫ÂêéÈù¢ÈòÖËØªÊó∂ÁêÜËß£Á®ãÂ∫è„ÄÇ

@cindex quoting, for small awk programs
@cindex single quote (@code{'}), vs.@: apostrophe
@cindex @code{'} (single quote), vs.@: apostrophe
@quotation Ê≥®ÊÑè
@ref{One-shot}ÔºåÊâÄÊèêÂà∞ÁöÑÔºå‰Ω†ÂèØ‰ª•Â∞Ü‰∏Ä‰∏™‰∏≠Á≠âÂ§ßÂ∞èÁöÑÁ®ãÂ∫èÁî®ÂçïÂºïÂè∑ÂºïËµ∑Êù•„ÄÇËøôÊ†∑Â∞±‰ΩøÂæó‰Ω†ÁöÑ Shell ËÑöÊú¨ÊòØËá™ÂåÖÂê´ÁöÑ‰∫Ü„ÄÇ
‰Ω†Ëøô‰πàÂÅöÁöÑÊó∂ÂÄôÔºå‰Ω†@emph{‰∏çË¶Å}Â∞ÜÊíáÂè∑Ôºà‚ÄôÔºâÊîæÂà∞‰Ω†ÁöÑÊ≥®Èáä‰∏≠ÔºàÊàñËÄÖ‰Ω†ÁöÑÁ®ãÂ∫èÁöÑ‰ªª‰Ωï‰ΩçÁΩÆÔºâ„ÄÇShell ‰ºöÂ∞ÜÈó≠ÂºïÂè∑ÂΩìÂÅöÊï¥‰∏™Á®ãÂ∫èÁöÑÁªìÊùü„ÄÇÁªìÊûúÂ∞±ÊòØÔºåShell ‰ºöÊâìÂç∞Âá∫ÂºïÂè∑‰∏çÂåπÈÖçÁöÑÈîôËØØÔºåËÄåÂ¶ÇÊûú @command{awk} ÂÆûÈôÖÊòØÊâßË°å‰∫ÜÔºå‰πü‰ºöÊâìÂç∞Âá∫ËØ≠Ê≥ïÈîôËØØÁ≠âÂ•áÊÄ™ÁöÑ‰ø°ÊÅØ„ÄÇÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºö

@example
$ @kbd{awk 'BEGIN @{ print "hello" @} # let's be cute'}
>
@end example

Shell È¶ñÂÖàÁúãÂà∞ÂâçÈù¢‰∏§‰∏™ÂºïÂè∑ÂåπÈÖçÔºåÁÑ∂ÂêéÂú®ÂêéÈù¢ÁöÑÊ≥®ÈáäÂèàÁúãÂà∞‰∫Ü‰∏Ä‰∏™ÂºÄÂßãÁöÑÂºïÂè∑„ÄÇ
Âõ†Ê≠§Â∞±ÊúâÁ¨¨‰∫å‰∏™ÊèêÁ§∫ÔºåÂπ∂Á≠âÂæÖËæìÂÖ•„ÄÇÂØπ‰∫é Unix @command{awk}ÔºåÈó≠ÂºïÂè∑‰∏≤‰ºö‰∫ßÁîüËøôÊ†∑ÁöÑÁªìÊûúÔºö

@example
$ @kbd{awk '@{ print "hello" @} # let's be cute'}
> @kbd{'}
@error{} awk: can't open file be
@error{}  source line number 1
@end example

@cindex @code{\} (backslash)
@cindex backslash (@code{\})
Âú® @samp{let's} ‰∏≠ÁöÑÊíáÂè∑ÂâçÈù¢Âä†‰∏Ä‰∏™ËΩ¨‰πâÁ¨¶Ôºà\Ôºâ‰πüÊ≤°Êúâ‰ΩúÁî®ÔºåÂõ†‰∏∫ËΩ¨‰πâÁ¨¶Âú®ÂçïÂºïÂè∑‰∏≠‰πü‰∏çÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÂ≠óÁ¨¶„ÄÇ
‰∏ã‰∏Ä‰∏™@value{SUBSECTION}‰∏≠Êàë‰ª¨‰ºöËß£Èáä Shell ÁöÑÂºïÂè∑ËßÑÂàô„ÄÇ
@end quotation

@node Quoting
@subsection Shell ÂºïÂè∑ÈóÆÈ¢ò
@cindex shell quoting, rules for

@menu
* DOS Quoting::                 Quoting in Windows Batch Files.
@end menu

ÂØπ‰∫éÁü≠Âà∞‰∏≠Á≠âÂ§ßÂ∞èÁöÑ @command{awk} Á®ãÂ∫èËÄåË®ÄÔºåÊúÄÊñπ‰æøÁöÑÊñπÂºèÊòØÂ∞ÜÁ®ãÂ∫èÂú®ÂëΩ‰ª§Ë°å‰∏≠ËæìÂÖ•„ÄÇ
Ëøô‰∏™ÈÄöËøáÂ∞ÜÊï¥‰∏™Á®ãÂ∫èÂåÖÂê´Âú®‰∏ÄÂØπÂçïÂºïÂè∑ÂΩì‰∏≠Âç≥ÂèØ„ÄÇÊó†ËÆ∫Âú®‰∫§‰∫íÂºèÁöÑËæìÂÖ•Á®ãÂ∫èÔºåËøòÊòØÂú®‰∏Ä‰∏™Â§ßÁöÑ Shell ËÑöÊú¨‰∏≠ËæìÂÖ•ÈÉΩÊòØÂèØ‰ª•ÁöÑÔºö

@example
awk '@var{program text}' @var{input-file1} @var{input-file2} @dots{}
@end example

@cindex shells, quoting, rules for
@cindex Bourne shell, quoting rules for
‰∏ÄÊó¶‰Ω†ÈÄöËøá Shell Êù•ËøêË°åÔºåÂØπ‰∫é Shell ÁöÑÂºïÂè∑ËßÑÂàôÊúâÊâÄ‰∫ÜËß£ÊÄªÊòØÂ•ΩÁöÑ„ÄÇ
‰∏ãÈù¢ÁöÑËßÑÂàôÂè™Â∫îÁî®‰∫é POSIX ÂÖºÂÆπÁöÑ Bourne ÂºèÁöÑ Shell ‰∏≠ÔºàÂ¶Ç BashÔºåGNU Bourne-Again ShellÔºâ„ÄÇÂ¶ÇÊûú‰Ω†Áî®ÁöÑÊòØ C ShellÔºåÈÇ£Â∞±ÈúÄË¶Å‰Ω†Ëá™Â§Ñ‰∫Ü„ÄÇ

Âú®Ê∑±ÂÖ•ËßÑÂàô‰πãÂâçÔºåÊàë‰ª¨ÂÖà‰ªãÁªçÊú¨@value{DOCUMENT}‰∏≠ÈÄöÁØáÊâÄ‰ΩøÁî®ÁöÑÊ¶ÇÂøµÔºåÂÆÉ‰ª¨Â∞±ÊòØ @dfn{null}ÔºåÊàñËÄÖ empty ‰∏≤„ÄÇ

null string Â∞±ÊòØÂú®Â≠óÁ¨¶Êï∞ÊçÆ‰∏≠Ê≤°ÊúâÂÄº„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÂ∞±ÊòØÁ©∫ÁöÑ„ÄÇÂú® @command{awk} Á®ãÂ∫è‰∏≠ÂÜôÊàêËøôÊ†∑Ôºö@code{""}„ÄÇ
Âú® Shell ‰∏≠ÔºåÂÆÉÂèØ‰ª•ÂÜôÊàêÂçïÊàñËÄÖÂèåÂºïÂè∑ÁöÑÂΩ¢ÂºèÔºö@code{""} ÊàñËÄÖ @code{''}„ÄÇËôΩËØ¥ null string ‰∏≠Ê≤°ÊúâÂ≠óÁ¨¶Ôºå‰ΩÜÊòØÁ°ÆÂÆûÊòØÂ≠òÂú®ÁöÑ„ÄÇ
‰æãÂ¶Ç‰∏ãÈù¢ÁöÑÊåá‰ª§Ôºö

@example
$ @kbd{echo ""}
@end example

@noindent
Âú®ËøôÈáåÔºå@command{echo} Â∑•ÂÖ∑Êî∂Âà∞Âçï‰∏ÄÁöÑÂèÇÊï∞ÔºåÂ∞±ÁÆóÂèÇÊï∞‰∏≠Ê≤°ÊúâÂ≠óÁ¨¶Âú®ÂÖ∂‰∏≠„ÄÇ
Âú®Êú¨@value{DOCUMENT}ÁöÑÂêéÁª≠ÈÉ®ÂàÜÔºåÊàë‰ª¨‰ΩøÁî®ÊúØËØ≠ @dfn{null string} ‰ª•Âèä @dfn{empty string} Êù•Ë°®Á§∫ËøôÊ†∑ÁöÑ‰∏≤„ÄÇÁé∞Âú®Âú®ÂºïÂè∑ËßÑÂàô‰∏≠Ôºö

@itemize @value{BULLET}
@item
Ë¢´ÂºïËµ∑Êù•ÁöÑÈ°πÂèØ‰ª•‰∏éÊ≤°ÊúâË¢´ÂºïËµ∑Êù•È°πËøûÊé•Ôºå‰πüÂèØ‰ª•‰∏éÂ∑≤ÁªèÂºïËµ∑Êù•ÁöÑÈ°πËøõË°åËøûÊé•„ÄÇShell ‰ºöÂ∞ÜÂÆÉ‰ª¨ÂÖ®ÈÉ®ËΩ¨Êç¢ÊàêÂëΩ‰ª§ÁöÑÂèÇÊï∞„ÄÇ

@item
Âú®ÂºïËµ∑Êù•ÁöÑ‰∏≤‰∏≠ÔºåÂú®‰ªª‰ΩïÂçï‰∏™Â≠óÁ¨¶ÂâçÁöÑÂèçÊñúÊù†Ôºà@samp{\}ÔºâÈÉΩ‰ºöË¢´ Shell ÁßªÈô§ÔºåËÄåÂ∞ÜË¢´ÂºïËµ∑Êù•ÁöÑÂ≠óÁ¨¶‰º†ÈÄíÁªôÂëΩ‰ª§„ÄÇ

@item
@cindex @code{\} (backslash), in shell commands
@cindex backslash (@code{\}), in shell commands
@cindex single quote (@code{'}), in shell commands
@cindex @code{'} (single quote), in shell commands
ÂçïÂºïÂè∑‰øùÊä§Âú®ÂºÄ‰∏éÈó≠ÂºïÂè∑‰πãÈó¥ÁöÑÊâÄÊúâÂ≠óÁ¨¶„ÄÇShell ‰∏ç‰ºöÂØπ‰∏≤‰∏≠ÁöÑ‰∏úË•øÂÅö‰ªª‰ΩïËß£ÊûêÔºåÂπ∂ÂéüÊ†∑Âú∞‰º†ÈÄíÁªôÂëΩ‰ª§„ÄÇ@emph{‰∏çÂèØËÉΩ}Âú®‰∏Ä‰∏™ÂçïÂºïÂè∑‰∏≠ÂµåÂÖ•ÂçïÂºïÂè∑„ÄÇ
ÂèÇËÄÉ @ref{Comments} ‰∏≠ÁöÑ‰æãÂ≠êÔºåÁúãÁúãÂ¶ÇÊûú‰Ω†Ëøô‰πàÂÅö‰ºöÊúâ‰ªÄ‰πàÁªìÊûú„ÄÇ

@item
@cindex double quote (@code{"}), in shell commands
@cindex @code{"} (double quote), in shell commands
ÂèåÂºïÂè∑‰øùÊä§ÂºÄÂºïÂè∑‰∏éÈó≠ÂºïÂè∑‰πãÈó¥ÁöÑÂ§ßÂ§öÊï∞ÊçÆÂ≠ó‰∏≤„ÄÇShell Âè™ÂÅöÊúÄÂ∞èÁöÑÂèòÈáè‰∏éÂëΩ‰ª§ÁöÑÊõøÊç¢„ÄÇ‰∏çÂêåÁöÑ Shell ÂØπ‰∫éÂèåÂºïÂè∑ÁöÑÂ§ÑÁêÜÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ

Áî±‰∫éÂú®ÂèåÂºïÂè∑‰∏≠ÔºåÁâπÂÆöÁöÑÂ≠óÁ¨¶ÊòØ‰ºöË¢´ Shell Â§ÑÁêÜÁöÑÔºåÂõ†Ê≠§‰ªñ‰ª¨Âú®‰∏≤‰∏≠‰∏ÄÂÆöË¶ÅËøõË°å@dfn{ËΩ¨‰πâ}„ÄÇ
Ë¶ÅÊ≥®ÊÑèËøô‰∫õÁ¨¶Âè∑@samp{$}Ôºå@samp{`}Ôºå@samp{\} Âíå @samp{"}„ÄÇËøô‰∫õÁ¨¶Âè∑Â¶ÇÊûúË¶ÅÂéüÊ†∑Âú∞‰º†ÈÄíÁªôÁ®ãÂ∫è‰∏≠Ôºå‰Ω†Â∞±ÈúÄË¶ÅÂú®‰∏≤‰∏≠Áî®ÂèçÊñúÊù†Ôºà@samp{\} ÔºâËøõË°åËΩ¨‰πâ„ÄÇ
ÔºàÂâçÂØºÁöÑÂèçÊñúÊù†Ôºà@samp{\}Ôºâ‰ºöÂÖàË¢´ËøáÊª§Êéâ„ÄÇÔºâ
‰Ω†ÂèØ‰ª•ÂèÇËÄÉ
@ifnotinfo
‰πãÂâçÁöÑ
@end ifnotinfo
Âú® @ref{Read Terminal} ‰∏≠ÁöÑ‰æãÂ≠êÔºö

@example
awk 'BEGIN @{ print "Don\47t Panic!" @}'
@end example

@noindent
ÂèØ‰ª•ÂÜôÊàêËøôÊ†∑ÁöÑÂΩ¢ÂºèÔºö

@example
$ @kbd{awk "BEGIN @{ print \"Don't Panic!\" @}"}
@print{} Don't Panic!
@end example

@cindex single quote (@code{'}), with double quotes
@cindex @code{'} (single quote), with double quotes
Ê≥®ÊÑèÂú®ÂèåÂºïÂè∑‰∏≠ÁöÑÂçïÂºïÂè∑‰∏çÊòØÁâπÊÆäÁ¨¶Âè∑„ÄÇ

@item
Á©∫‰∏≤ÔºàNull stringÔºâÂ¶ÇÊûúÂá∫Áé∞Âú®ÈùûÁ©∫‰∏≤‰∏≠Êó∂Ôºå‰ºöË¢´ÁßªÈô§ÔºåËÄåÊòæÂºèÁöÑÁ©∫‰∏≤‰ºöË¢´‰øùÁïô„ÄÇ‰æãÂ¶ÇÔºöÂèØ‰ª•Â∞ÜÂüüÂàÜÈöîÁ¨¶ @code{FS} ÊåáÂÆö‰∏∫Á©∫‰∏≤Ôºànull stringÔºâÔºåÂèØ‰ª•Ëøô‰πàÊù•Ôºö

@example
awk -F "" '@var{program}' @var{files} # correct
@end example

@noindent
@cindex null strings in @command{gawk} arguments, quoting and
ËÄå‰∏çË¶ÅËøô‰πàÊù•Ôºö

@example
awk -F"" '@var{program}' @var{files}  # wrong!
@end example

@noindent
Âú®Á¨¨‰∫å‰∏™‰æãÂ≠ê‰∏≠Ôºå@command{awk} ‰ºöÂ∞ùËØï‰ΩøÁî®Á®ãÂ∫èÁöÑÊñáÊú¨‰Ωú‰∏∫ @code{FS} ÁöÑÂÄºÔºåÁ¨¨‰∏Ä‰∏™@value{FN}‰ºöÂÅö‰∏∫Á®ãÂ∫èÁöÑÊñáÊú¨ÔºÅ
Ëøô‰ºöÂØºËá¥Âú®ÊúÄÂ•ΩÁöÑÊÉÖÂÜµ‰∏ãÊòØËØ≠Ê≥ïÈîôËØØÔºåËÄåÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ã‰ºöÂØºËá¥‰ª§‰∫∫Ë¥πËß£ÁöÑË°å‰∏∫„ÄÇ
@end itemize

@cindex quoting in @command{gawk} command lines, tricks for
Ê∑∑Áî®ÂçïÂèåÂºïÂè∑ÊòØÊØîËæÉÈ∫ªÁÉ¶ÁöÑ„ÄÇ‰Ω†ÈúÄË¶ÅÁî®‰∏Ä‰∫õ Shell ÁöÑ‰ºé‰ø©ÔºåÂ¶ÇÔºö

@example
$ @kbd{awk 'BEGIN @{ print "Here is a single quote <'"'"'>" @}'}
@print{} Here is a single quote <'>
@end example

@noindent
Ëøô‰∏™Á®ãÂ∫è‰∏≠ÂåÖÊã¨‰∏â‰∏™ËøûÊé•ÁöÑÂºï‰∏≤„ÄÇÁ¨¨‰∏Ä‰∏™‰∏éÁ¨¨‰∏â‰∏™ÈÉΩÊòØÂçïÂºïÂè∑‰∏≤ÔºåËÄåÁ¨¨‰∫å‰∏™ÊòØÂèåÂºïÂè∑‰∏≤„ÄÇ

Ëøô‰∏™ÂÖ∂ÂÆûÂèØ‰ª•ÁÆÄÂåñ‰∏∫Ôºö

@example
$ @kbd{awk 'BEGIN @{ print "Here is a single quote <'\''>" @}'}
@print{} Here is a single quote <'>
@end example

@noindent
Ëøô‰∏™ÂæóË¶Å‰Ω†Ëá™Â∑±ÁúãÂì™‰∏™Êõ¥Â•ΩËØª„ÄÇ

Âè¶‰∏Ä‰∏™‰ΩøÁî®ÂèåÂºïÂè∑ÁöÑÈÄâÊã©ÔºåÂ∞±ÊòØËΩ¨Êç¢ÂÜÖÂµåÁöÑÔºå@command{awk} Â±ÇÁöÑÂèåÂºïÂè∑„ÄÇ

@example
$ @kbd{awk "BEGIN @{ print \"Here is a single quote <'>\" @}"}
@print{} Here is a single quote <'>
@end example

@noindent
ËøôÁßçÈÄâÊã©‰ºöÈùûÂ∏∏ÁóõËã¶ÔºåÂõ†‰∏∫ÂèåÂºïÂè∑ÔºåÂèçÊñúÊù†Ôºà@samp{\}Ôºâ‰ª•ÂèäÁæéÂÖÉÁ¨¶Âè∑Ôºà@samp{$}ÔºâÂú®È´òÁ∫ßÁöÑ @command{awk} Á®ãÂ∫è‰∏≠ÊòØÂæàÊôÆÈÅçÁöÑ„ÄÇ

Á¨¨‰∏â‰∏™ÈÄâÊã©ÊòØ‰ΩøÁî®ËΩ¨‰πâÁöÑÂçïÂèåÂºïÂè∑Â≠óÁ¨¶ÁöÑÂØπÂ∫îÁ†ÅÁöÑÂÖ´ËøõÂà∂Â∫èÂàóÔºà@pxref{Escape Sequences}ÔºâÔºåÂ¶Ç‰∏ãÔºö

@example
$ @kbd{awk 'BEGIN @{ print "Here is a single quote <\47>" @}'}
@print{} Here is a single quote <'>
$ @kbd{awk 'BEGIN @{ print "Here is a double quote <\42>" @}'}
@print{} Here is a double quote <">
@end example

@noindent
ËøôÁúãËµ∑Êù•Â∞±ÊºÇ‰∫ÆÂ§ö‰∫ÜÔºå‰ΩÜÊòØ‰Ω†ÈúÄË¶ÅÊ≥®ÈáäÂ•ΩÊâÄËΩ¨‰πâÁöÑ‰∏úË•øÊòØ‰ªÄ‰πà„ÄÇ

Á¨¨Âõõ‰∏™ÈÄâÊã©Â∞±ÊòØ‰ΩøÁî®ÂëΩ‰ª§Ë°åÂºèÁöÑÂèòÈáèËµãÂÄºÔºåÂ¶Ç‰∏ãÔºö

@example
$ @kbd{awk -v sq="'" 'BEGIN @{ print "Here is a single quote <" sq ">" @}'}
@print{} Here is a single quote <'>
@end example

ÔºàÂú®ËøôÈáåÔºå‰∏§‰∏™‰∏≤Â∏∏Èáè‰ª•Âèä @code{sq} ÁöÑÂÄº‰ºöË¢´ËøûÊé•Ëµ∑Êù•Êàê‰∏∫‰∏Ä‰∏™Âçï‰∏ÄÁöÑ‰∏≤ÔºåÁÑ∂ÂêéÁî® @code{print} ÊâìÂç∞Âá∫Êù•„ÄÇÔºâ

Â¶ÇÊûú‰Ω†Á°ÆÂÆûÂú®Á®ãÂ∫è‰∏≠Âç≥ÈúÄË¶ÅÂçïÂºïÂè∑‰πüÈúÄË¶ÅÂèåÂºïÂè∑Ôºå‰Ω†ÊúÄÂ•ΩÊòØÂ∞ÜÂÆÉ‰ª¨ÁßªÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂‰∏≠„ÄÇÂú®Êñá‰ª∂ÈáåÔºåShell ‰∏ç‰ºöËß£Êûê‰Ω†ÁöÑÁ®ãÂ∫èÊâÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇ

@node DOS Quoting
@subsubsection MS-Windows ÊâπÂ§ÑÁêÜÊñá‰ª∂‰∏≠ÁöÑÂºïÂè∑ÈóÆÈ¢ò

@ignore
Date: Wed, 21 May 2008 09:58:43 +0200 (CEST)
From: jeroen.brink@inter.NL.net
Subject: (g)awk "contribution"
To: arnold@skeeve.com
Message-id: <42220.193.172.132.34.1211356723.squirrel@webmail.internl.net>

Hello Arnold,

maybe you can help me out. Found your email on the GNU/awk online manual
pages.

I've searched hard to figure out how, on Windows, to print double quotes.
Couldn't find it in the Quotes area, nor on google or elsewhere. Finally i
figured out how to do this myself.

How to print all lines in a file surrounded by double quotes (on Windows):

gawk "{ print \"\042\" $0 \"\042\" }" <file>

Maybe this is a helpfull tip for other (Windows) gawk users. However, i
don't have a clue as to where to "publish" this tip! Do you?

Kind regards,

Jeroen Brink
@end ignore

Â∞ΩÁÆ°Êú¨@value{DOCUMENT}‰∏≠‰∏ÄËà¨Âè™ÈíàÂØπ POSIX Á≥ªÁªü‰ª•Âèä POSIX ShellÔºå‰∏ãÈù¢ÁöÑÈóÆÈ¢ò‰πüÂÄºÂæó‰∏∫Áî®Êà∑ÊèêÂá∫Êù•„ÄÇ

@cindex Brink, Jeroen
ÂæÆËΩØ Windows Á≥ªÁªü‰∏≠ÁöÑ Shell Áî®ÂèåÂºïÂè∑Êù•ÂºïÂ≠ó‰∏≤„ÄÇÂõ†Ê≠§ÔºåÊØîËæÉÈöæÊàñËÄÖ‰∏çÂèØËÉΩÂú®ÂëΩ‰ª§Ë°åËÑöÊú¨‰∏≠ÈÄöËøáËΩ¨‰πâÁöÑÊñπÂºèÊù•ÂåÖÂê´ÂèåÂºïÂè∑„ÄÇ
Â§öË∞¢ Jeroen Brink Êèê‰æõ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºåÂëàÁé∞Êñá‰ª∂‰∏≠ÁöÑÊØè‰∏ÄË°åÈÉΩÂπ∂Áî®ÂèåÂºïÂè∑ÂºïËµ∑Êù•Ôºö

@example
gawk "@{ print \"\042\" $0 \"\042\" @}" @var{file}
@end example


@node Sample Data Files
@section ‰æãÂ≠ê‰∏≠‰ΩøÁî®ÁöÑ@value{DDF}

@cindex input files, examples
@cindex @code{mail-list} file
Êú¨@value{DOCUMENT}‰∏≠ÊâÄ‰ΩøÁî®Âà∞ÁöÑ‰æãÂ≠êÔºå‰∏ªË¶Å‰ªé‰∏§‰∏™Ê†∑‰æã@value{DF}‰∏≠ËæìÂÖ•Êï∞ÊçÆ„ÄÇ
Á¨¨‰∏Ä‰∏™ÊòØ @file{mail-list} Êñá‰ª∂ÔºåÈáåÈù¢Â±ïÁ§∫‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑ‰∫∫ÂêçÔºåÂêåÊó∂ËøòÊúâ‰ªñ‰ª¨ÁöÑÈÇÆ‰ª∂Âú∞ÂùÄÔºå‰ª•ÂèäÁõ∏ÂÖ≥ÁöÑ‰∏™‰∫∫‰ø°ÊÅØ„ÄÇ
Á¨¨‰∫å‰∏™ÊòØ @file{inventory-shipped} Êñá‰ª∂ÔºåÂåÖÂê´‰∫ÜÊØèÊúàÁöÑÂèëË¥ßÊÉÖÂÜµ„ÄÇ‰∏§‰∏™Êñá‰ª∂‰∏≠ÔºåÊØè‰∏ÄË°åÈÉΩÁß∞‰∏∫‰∏ÄÊù°@dfn{ËÆ∞ÂΩï}„ÄÇ

Âú® @file{mail-list} Êñá‰ª∂‰∏≠ÔºåÊØè‰∏™ËÆ∞ÂΩïÂåÖÊã¨‰∫Ü‰∫∫ÂêçÔºå‰ªñ/Â•πÁöÑÁîµËØùÂè∑Á†ÅÔºå‰ªñ/Â•πÁöÑÈÇÆ‰ª∂Âú∞ÂùÄÔºå‰ª•Âèä‰ªñ/Â•π‰∏é‰ΩúËÄÖÊú¨‰∫∫ÁöÑÂÖ≥Á≥ª„ÄÇ
ÂàóÁî®Ë°åÊù•ËøõË°åÂàÜÈöî„ÄÇÊúÄÂêé‰∏ÄÂàó‰∏≠ÁöÑ @samp{A} Ë°®Á§∫Áõ∏ËØÜÁöÑ‰∫∫„ÄÇ@samp{F} Ë°®Á§∫Áõ∏Â∫îÁöÑ‰∫∫ÊòØÊúãÂèãÂÖ≥Á≥ªÔºå@samp{R} Ë°®Á§∫Áõ∏Â∫îÁöÑ‰∫∫ÊòØ‰∫≤Â±ûÂÖ≥Á≥ªÔºö

@example
@c system if test ! -d eg      ; then mkdir eg      ; fi
@c system if test ! -d eg/lib  ; then mkdir eg/lib  ; fi
@c system if test ! -d eg/data ; then mkdir eg/data ; fi
@c system if test ! -d eg/prog ; then mkdir eg/prog ; fi
@c system if test ! -d eg/misc ; then mkdir eg/misc ; fi
@c file eg/data/mail-list
Amelia       555-5553     amelia.zodiacusque@@gmail.com    F
Anthony      555-3412     anthony.asserturo@@hotmail.com   A
Becky        555-7685     becky.algebrarum@@gmail.com      A
Bill         555-1675     bill.drowning@@hotmail.com       A
Broderick    555-0542     broderick.aliquotiens@@yahoo.com R
Camilla      555-2912     camilla.infusarum@@skynet.be     R
Fabius       555-1234     fabius.undevicesimus@@ucb.edu    F
Julie        555-6699     julie.perscrutabor@@skeeve.com   F
Martin       555-6480     martin.codicibus@@hotmail.com    A
Samuel       555-3430     samuel.lanceolis@@shu.edu        A
Jean-Paul    555-2127     jeanpaul.campanorum@@nyu.edu     R
@c endfile
@end example

@cindex @code{inventory-shipped} file
@file{inventory-shipped} Êñá‰ª∂‰∏≠ÁöÑÊï∞ÊçÆË°®Á§∫‰∫ÜÂú®‰∏ÄÂπ¥‰∏≠ÁöÑÂèëË¥ß‰ø°ÊÅØ„ÄÇ
ÊØè‰∏™ËÆ∞ÂΩïÈÉΩÂåÖÊã¨‰∏Ä‰∏™ÊúàÁªøËâ≤ÈõÜË£ÖÁÆ±ÁöÑÂèëË¥ßÊï∞ÔºåÁ∫¢ÁÆ±ÁõíË£ÖÁöÑÂèëË¥ßÊï∞ÁªüËÆ°ÔºåÊ©ôËâ≤ÁöÑË¢ãË£ÖÁöÑÂèëË¥ßÊï∞ÁªüËÆ°Ôºå‰ª•ÂèäËìùËâ≤ÂåÖË£ÖÁöÑÂèëË¥ßÊï∞ÁªüËÆ°„ÄÇËøôÈáåÈù¢Êúâ 16 Êù°ËÆ∞ÂΩïÔºåÂåÖÊã¨‰∫Ü‰∫Ü‰∏ä‰∏ÄÂπ¥ÊúÄÂêé 12 ‰∏™ÊúàÁöÑÊï∞ÊçÆÔºå‰ª•ÂèäÊú¨Âπ¥ÁöÑÂâç 4 ‰∏™ÊúàÁöÑÊï∞ÊçÆ„ÄÇÁî®Á©∫Ë°åÂàÜÈöî‰∫ÜÂπ¥‰ªΩÔºö

@example
@c file eg/data/inventory-shipped
Jan  13  25  15 115
Feb  15  32  24 226
Mar  15  24  34 228
Apr  31  52  63 420
May  16  34  29 208
Jun  31  42  75 492
Jul  24  34  67 436
Aug  15  34  47 316
Sep  13  55  37 277
Oct  29  54  68 525
Nov  20  87  82 577
Dec  17  35  61 401

Jan  21  36  64 620
Feb  26  58  80 652
Mar  24  75  70 495
Apr  21  70  74 514
@c endfile
@end example

‰∏äÈù¢ÁöÑÊñá‰ª∂ÂåÖÂê´Âú® @command{gawk} ÂèëÂ∏ÉÁâàÊú¨Ôºå‰Ωç‰∫éÁõÆÂΩï @file{awklib/eg/data} ‰∏≠„ÄÇ

@node Very Simple
@section ‰∏Ä‰∫õÁÆÄÂçï‰æãÂ≠ê

‰∏ãÈù¢ÁöÑÂëΩ‰ª§Ë°åÊâßË°å‰∫Ü‰∏Ä‰∏™ÂæàÁÆÄÂçïÁöÑ @command{awk} Á®ãÂ∫èÔºåÂ∞±ÊòØÊü•Êâæ @file{mail-list} Êñá‰ª∂‰∏≠ÁöÑÂ≠óÁ¨¶‰∏≤ @samp{li}
Ôºà‰∏ÄÁªÑÂ≠óÁ¨¶Áß∞‰∏∫‰∏Ä‰∏™@dfn{Â≠óÁ¨¶‰∏≤}ÔºåËøô‰∏™ÊòØÂü∫‰∫éËã±ËØ≠‰∏≠ÁöÑÊúØËØ≠@dfn{‰∏≤}ÁöÑÁî®Ê≥ïÔºåÂ¶Ç‚Äú‰∏Ä‰∏≤ÁèçÁè†‚ÄùÊàñËÄÖ‚ÄúÁÅ´ËΩ¶‰∏≠ÁöÑ‰∏Ä‰∏≤ËΩ¶Âé¢‚ÄùÔºâÔºö

@example
awk '/li/ @{ print $0 @}' mail-list
@end example

@noindent
Â¶ÇÊûúË°å‰∏≠ÂåÖÊã¨‰∫Ü @samp{li} Ôºå‰ªñ‰ª¨Â∞±‰ºöË¢´ÊâìÂç∞Âá∫Êù•ÔºåÂõ†‰∏∫ @w{@samp{print $0}} ÁöÑÊÑèÊÄùÂ∞±ÊòØÊâìÂç∞ÂΩìÂâçË°å„ÄÇ
ÔºàÂè™ÂÜô @samp{print} ÁöÑÊÑèÊÄùÊòØ‰∏ÄÊ†∑ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•Áî® @samp{print} ‰ª£Êõø @w{@samp{print $0}}„ÄÇÔºâ

‰Ω†Â∫îËØ•Ê≥®ÊÑèÂà∞ @command{awk} Á®ãÂ∫è‰∏≠Âú®‰∏≤ @samp{li} ‰∏§ËæπÁöÑÊñúÊù†Ôºà@samp{/}Ôºâ„ÄÇ
Ëøô‰∏™ÊñúÊù†ÊåáÁ§∫‰∫Ü @samp{li} ÊòØË¶ÅÊêúÁ¥¢ÁöÑ‰∏úË•ø„ÄÇËøôÁßçÊ®°ÂºèÁß∞‰∏∫@dfn{Ê≠£ÂàôË°®ËææÂºè}ÔºåËøô‰∏™Áü•ËØÜÁÇπ‰ºöÂú®ÂêéÈù¢Ê∂âÂèäÔºà@pxref{Regexp}Ôºâ„ÄÇ
Ëøô‰∏™Ê®°ÂºèÂÖÅËÆ∏ÂåπÈÖçÂçïËØçÁöÑÈÉ®ÂàÜ„ÄÇÂú® @command{awk} Á®ãÂ∫è‰∏§ËæπÁî±ÂçïÂºïÂè∑ÂºïËµ∑Êù•ÔºåÂõ†Ê≠§‰∏ç‰ºöËß£ÊûêÂÖ∂‰∏≠ÁöÑ‰ªª‰ΩïÂ≠óÁ¨¶„ÄÇ

‰∏ãÈù¢ÊòØËøô‰∏™Á®ãÂ∫èÁöÑËæìÂá∫:

@example
$ @kbd{awk '/li/ @{ print $0 @}' mail-list}
@print{} Amelia       555-5553     amelia.zodiacusque@@gmail.com    F
@print{} Broderick    555-0542     broderick.aliquotiens@@yahoo.com R
@print{} Julie        555-6699     julie.perscrutabor@@skeeve.com   F
@print{} Samuel       555-3430     samuel.lanceolis@@shu.edu        A
@end example

@cindex actions, default
@cindex patterns, default
Âú® @command{awk} ÁöÑËßÑÂàô‰∏≠ÔºåÂç≥ÂèØ‰ª•ÁúÅÁï•Ê®°ÂºèÔºå‰πüÂèØ‰ª•ÁúÅÁï•Áõ∏ÂÖ≥ÁöÑÂä®‰ΩúÔºå‰ΩÜ‰∏çËÉΩ‰∏§ËÄÖÈÉΩÁúÅÁï•„ÄÇÂ¶ÇÊûúÊ®°ÂºèÁúÅÁï•‰∫ÜÔºåÈÇ£‰πàÂä®‰ΩúÁöÑÊâßË°åÂ∞±‰ºöÈíàÂØπ@emph{ÊâÄÊúâÁöÑ}ËæìÂÖ•Ë°å„ÄÇ
Â¶ÇÊûúÂä®‰ΩúË¢´ÁúÅÁï•‰∫ÜÔºåÈÇ£‰πàÈªòËÆ§ÁöÑËøêË°åÂ∞±ÊòØÊâìÂç∞ÊâÄÊúâÁöÑÂåπÈÖçË°å„ÄÇ

@cindex actions, empty
Âõ†Ê≠§ÔºåÊàë‰ª¨‰∏çÁÆ°‰æãÂ≠ê‰∏≠ÁöÑÂä®‰ΩúÔºàÂç≥ @code{print} ËØ≠Âè•‰ª•ÂèäËä±Êã¨Âè∑ÔºâÔºåÁªìÊûú‰πüÊòØ‰∏ÄÊ†∑ÁöÑÔºö@command{awk} ‰ºöÊâìÂç∞ÊâÄÊúâÂåπÈÖç‰∫Ü @samp{li} Â≠ó‰∏≤ÁöÑË°å„ÄÇÂ¶ÇÊûúÁúÅÁï•‰∫Ü @code{print} ËØ≠Âè•ÔºåËÄå‰øùÁïôËä±Êã¨Âè∑ÔºåÂàôÂä®‰Ωú‰ºö‰ªÄ‰πà‰πü‰∏çÂÅöÔºàÂç≥‰∏ç‰ºöÊúâË°åË¢´ËæìÂá∫Ôºâ„ÄÇ

@cindex @command{awk} programs, one-line examples
ÂÆûÈôÖÁöÑ @command{awk} Á®ãÂ∫èÂ§ßÂ§öÂè™Êúâ‰∏Ä‰∏§Ë°åÈïø„ÄÇ‰∏ãÈù¢Êî∂ÈõÜ‰∫Ü‰∏Ä‰∫õÊúâÁî®ËÄåÁü≠Â∞èÁöÑÁ®ãÂ∫èÔºå‰ª•‰æø‰∫é‰Ω†ÂºÄÂßã‰ΩøÁî® @command{awk}„ÄÇ
ÂÖ∂‰∏≠Êúâ‰∫õÁ®ãÂ∫èÂåÖÊã¨ÁöÑÁâπÊÄßÁõÆÂâçËøòÊ≤°ÊúâÊ∂âÂèäÔºàÂØπ‰∫éÁ®ãÂ∫èÁöÑÊèèËø∞ÂèØ‰ª•ÊèêÁ§∫‰Ω†Êé•‰∏ãÊù•Â∞ÜÂÅö‰ªÄ‰πàÔºå‰ΩÜ‰∏çÈúÄË¶Å‰Ω†ÂÖàËØªÂÆåÊú¨@value{DOCUMENT}ÂêéÊàê‰∏∫‰∏ìÂÆ∂ÂêéÂÜçÊù•ÈòÖËØªÁ®ãÂ∫èÔºÅÔºâ
Â§ßÂ§öÊï∞ÁöÑ‰æãÂ≠êÈÉΩ‰ΩøÁî®Âêç‰∏∫ @file{data} ÁöÑ@value{DF}„ÄÇËøô‰ªÖÊòØ‰∏™Âç†‰ΩçÁ¨¶ÔºõÂ¶ÇÊûú‰Ω†Ëá™Â∑±‰ΩøÁî®Ëøô‰∫õÁ®ãÂ∫èÔºåÊõøÊç¢Êàê‰Ω†Ëá™Â∑±ÁöÑ@value{FN}ÁöÑ @file{data} Êñá‰ª∂Â∞±Â•Ω‰∫Ü„ÄÇ
‰∏∫‰∫ÜÂêéÁª≠ÂèÇËÄÉÔºö‰∏ÄËà¨Êù•ËÆ≤Ë¶ÅÂÆåÊàêÂêåÊ†∑‰∏Ä‰ª∂‰∫ãÔºå@command{awk} ÂèØ‰ª•Êúâ‰∏çÊ≠¢‰∏ÄÁßçÊñπÊ≥ï„ÄÇÂú®Êüê‰∏™Êó∂ÂÄôÔºå‰Ω†ÂèØËÉΩÊÉ≥ÂõûËøáÂ§¥Êù•ÁúãËøô‰∫õ‰æãÂ≠êÔºåÁúãÊòØÂê¶ËÉΩÂ§üÊÉ≥Âá∫Êõ¥Â§öÊñπÊ≥ïÊù•ÂÅöËøôÈáåÂ±ïÁ§∫ÁöÑÁõ∏ÂêåÁöÑ‰∫ãÊÉÖ„ÄÇ

@itemize @value{BULLET}
@item
ÊâìÂç∞Â§ß‰∫é 80 ‰∏™Â≠óÁ¨¶ÁöÑË°åÔºö

@example
awk 'length($0) > 80' data
@end example

ËøôÈáåÂîØ‰∏ÄÁöÑËßÑÂàôÂ∞±ÊòØÊúâ‰∏Ä‰∏™ÂÖ≥Á≥ªË°®ËææÂºè‰Ωú‰∏∫Ê®°ÂºèÔºå‰ΩÜÊòØÊ≤°ÊúâÂä®‰Ωú„ÄÇÂõ†Ê≠§ÂÆÉÁî®ÁöÑÊòØÈªòËÆ§Âä®‰ΩúÔºåÂ∞±ÊòØÊâìÂç∞ËÆ∞ÂΩïÔºàËæìÂÖ•Ë°åÔºâ„ÄÇ

@item
ÊâìÂç∞ÊúÄÈïøÁöÑË°åÁöÑÈïøÂ∫¶Ôºö

@example
awk '@{ if (length($0) > max) max = length($0) @}
     END @{ print max @}' data
@end example

ËøôÈáå‰∏é @code{END} ÂÖ≥ËÅîÁöÑ‰ª£Á†ÅÔºå‰ºöÂú®ÊâÄÊúâÁöÑË°åËØªÂÖ•ÂêéÊâßË°åÔºõÂÆÉ‰∏é @code{BEGIN} ÂàöÂ•ΩÁõ∏Âèç„ÄÇ

@cindex @command{expand} utility
@item
ÊâìÂç∞ @file{data} Êñá‰ª∂‰∏≠ÊúÄÈïøÁöÑË°åÁöÑÈïøÂ∫¶Ôºö

@example
expand data | awk '@{ if (x < length($0)) x = length($0) @}
                   END @{ print "maximum line length is " x @}'
@end example

Ëøô‰∏™‰æãÂ≠ê‰∏éÂâçÈù¢ÁöÑÊúâ‰∏Ä‰∫õ‰∏çÂêåÔºöËæìÂÖ•ÊòØÈÄöËøá @command{expand} Â∑•ÂÖ∑ÔºåÂ∞Ü TABs ËΩ¨Êç¢ÊàêÁ©∫Ê†º„ÄÇÂõ†Ê≠§ÈïøÂ∫¶ÁöÑÊØîËæÉÂÆûÈôÖ‰∏äÊòØÂà∞ÊúÄÂè≥ËæπÁöÑÂàóÊï∞ÔºåËÄå‰∏çÊòØÊØè‰∏ÄË°åÁöÑËæìÂÖ•Â≠óÁ¨¶Êï∞„ÄÇ

@item
ÊâìÂç∞Ëá≥Â∞ëÊúâ‰∏Ä‰∏™ÂüüÁöÑË°åÔºö

@example
awk 'NF > 0' data
@end example

Ëøô‰∏™ÊòØÊúÄÂ•ΩÁöÑÂà†Èô§Á©∫ÁôΩË°åÁöÑÊñπÊ≥ïÔºàÂç≥ÊòØÔºåÂàõÂª∫‰∏Ä‰∏™‰∏éÊóßÊñá‰ª∂‰∏ÄÊ†∑ÁöÑÊñá‰ª∂Ôºå‰ΩÜÊòØÁßªÈô§‰∫ÜÂÖ∂‰∏≠ÁöÑÁ©∫ÁôΩË°åÔºâ„ÄÇ

@item
ÊâìÂç∞‰ªé 0 Âà∞ 100 ÔºàÂåÖÂê´ 0 Âíå 100ÔºâÁöÑ7‰∏™ÈöèÊú∫Êï∞Ôºö

@example
awk 'BEGIN @{ for (i = 1; i <= 7; i++)
                 print int(101 * rand()) @}'
@end example

@item
ÊâìÂç∞@var{Â§ö‰∏™Êñá‰ª∂}‰∏≠ÊÄªÂÖ±ÁöÑÂ≠óËäÇÊï∞Ôºö

@example
ls -l @var{files} | awk '@{ x += $5 @}
                   END @{ print "total bytes: " x @}'
@end example

@item
ÊâìÂç∞@var{Â§ö‰∏™Êñá‰ª∂}ÊâÄ‰ΩøÁî®ÁöÑ KB ÊÄªÊï∞Ôºö

@c Don't use \ continuation, not discussed yet
@c Remember that awk does floating point division,
@c no need for (x+1023) / 1024
@example
ls -l @var{files} | awk '@{ x += $5 @}
   END @{ print "total K-bytes:", x / 1024 @}'
@end example

@item
ÊâìÂç∞ÊâÄÊúâÁî®Êà∑ÁöÑÁôªÂΩïÂêçÁöÑÊéíÂ∫èÂàóË°®Ôºö

@example
awk -F: '@{ print $1 @}' /etc/passwd | sort
@end example

@item
ÊâìÂç∞Êñá‰ª∂ÁöÑË°åÊï∞Ôºö

@example
awk 'END @{ print NR @}' data
@end example

@item
ÊâìÂç∞@value{DF}‰∏≠ÁöÑÂÅ∂Êï∞Ë°åÔºö

@example
awk 'NR % 2 == 0' data
@end example

Â¶ÇÊûú‰Ω†‰ΩøÁî®Ë°®ËææÂºè @samp{NR % 2 == 1}ÔºåÂàôÁ®ãÂ∫èÂ∞ÜÊâìÂç∞Âá∫Â•áÊï∞Ë°å„ÄÇ
@end itemize

@node Two Rules
@section ‰∏§ËßÑÂàôÁöÑ‰æãÂ≠ê
@cindex @command{awk} programs

@command{awk} Â∑•ÂÖ∑‰ªéÊñá‰ª∂‰∏≠‰∏ÄÊ¨°ËØªÂèñ‰∏ÄË°å„ÄÇÂØπ‰∫éÊØè‰∏ÄË°åÔºå@command{awk} ÈÉΩÊòØÂ∞ùËØï‰∏éÊØè‰∏™Ê®°ÂºèËøõË°åÂåπÈÖç„ÄÇÂ¶ÇÊûúÊúâÂá†‰∏™Ê®°Âºè‰∏éÂÖ∂ÂåπÈÖçÔºåÂàôÂá†‰∏™Âä®‰ΩúÈÉΩ‰ºöÊåâÁÖßÂåπÈÖçÁöÑÈ°∫Â∫èË¢´ÊâßË°å„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊ®°ÂºèÂåπÈÖç‰∏äÔºåÂàô‰∏ç‰ºöÊúâÂä®‰Ωú‰ºöÊâßË°å„ÄÇ

ÂΩìÂ§ÑÁêÜ‰∫ÜÂåπÈÖçË°åÁöÑÊâÄÊúâËßÑÂàôÂêéÔºà‰πüËÆ∏‰πüÊ≤°ÊúâÔºâÔºå@command{awk} ‰ºöËØªÂèñ‰∏ã‰∏ÄË°å„ÄÇÔºà‰ΩÜÊòØÔºå@pxref{Next Statement}Ôºå
@ifdocbook
‰∏é @ref{Nextfile Statement} ‰∏≠ÁöÑÁõ∏ÂÖ≥Áü•ËØÜ„ÄÇÔºâ
@end ifdocbook
@ifnotdocbook
‰∏é @pxref{Nextfile Statement}.)
@end ifnotdocbook
Ëøô‰∏™ËøáÁ®ã‰∏ÄÁõ¥ÊåÅÁª≠Âà∞Êñá‰ª∂ËØªÂèñÂÆåÊØï„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ @command{awk} Á®ãÂ∫èÂåÖÂê´‰∫Ü‰∏§‰∏™ËßÑÂàôÔºö

@example
/12/  @{ print $0 @}
/21/  @{ print $0 @}
@end example

@noindent
Á¨¨‰∏Ä‰∏™ËßÑÂàôÁî®Â≠óÁ¨¶‰∏≤ @samp{12} ‰Ωú‰∏∫Ê®°ÂºèÔºå‰ª•Âèä @samp{print $0} ‰Ωú‰∏∫Âä®‰Ωú„ÄÇÁ¨¨‰∫å‰∏™ËßÑÂàôÁî® @samp{21} ‰Ωú‰∏∫Ê®°ÂºèÔºå‰πüÁî® @samp{print $0} ‰Ωú‰∏∫Âä®‰Ωú„ÄÇÊØè‰∏™ËßÑÂàôÁöÑÂä®‰ΩúÈÉΩÁî®Ëá™Â∑±ÁöÑËä±Êã¨Âè∑ÂåÖÂê´Ëµ∑Êù•„ÄÇ

Ëøô‰∏™Á®ãÂ∫èÊâìÂç∞ÊØè‰∏ÄË°åÂåÖÂê´Êúâ @samp{12} @emph{ÊàñËÄÖ} @samp{21} ÁöÑË°å„ÄÇÂ¶ÇÊûúÊúâ‰∏ÄË°åÂåÖÂê´‰∫Ü‰∏§‰∏™‰∏≤ÔºåÂàô‰ºöÊâìÂç∞‰∏§Ê¨°ÔºåÊØè‰∏™ËßÑÂàô‰∏ÄÊ¨°„ÄÇ

Â¶ÇÊûúÊàë‰ª¨ÂêåÊó∂ÂØπÊàë‰ª¨ÁöÑ‰∏§‰∏™@value{DF}ÔºåÂç≥ @file{mail-list} Êñá‰ª∂‰∏é @file{inventory-shipped} Êñá‰ª∂ÊâßË°åËøô‰∏™Á®ãÂ∫è‰ºöÊúâ‰ªÄ‰πàÁªìÊûúÔºö

@example
$ @kbd{awk '/12/ @{ print $0 @}}
>      @kbd{/21/ @{ print $0 @}' mail-list inventory-shipped}
@print{} Anthony      555-3412     anthony.asserturo@@hotmail.com   A
@print{} Camilla      555-2912     camilla.infusarum@@skynet.be     R
@print{} Fabius       555-1234     fabius.undevicesimus@@ucb.edu    F
@print{} Jean-Paul    555-2127     jeanpaul.campanorum@@nyu.edu     R
@print{} Jean-Paul    555-2127     jeanpaul.campanorum@@nyu.edu     R
@print{} Jan  21  36  64 620
@print{} Apr  21  70  74 514
@end example

@noindent
ÁïôÊÑèÂú® @file{mail-list} Êñá‰ª∂‰∏≠ÁöÑ @samp{Jean-Paul} ÂºÄÂ§¥ÁöÑË°åÔºåÂÆÉË¢´ÊâìÂç∞‰∫Ü‰∏§Ê¨°Ôºå‰∏Ä‰∏™ËßÑÂàô‰∏ÄÊ¨°„ÄÇ

@node More Complex
@section Â§çÊùÇ‰∏ÄÁÇπÁöÑ‰æãÂ≠ê

ÁõÆÂâçÊàë‰ª¨Â∑≤ÁªèÊéåÊè°‰∏Ä‰∫õÂü∫Êú¨ÁöÑÊäÄËÉΩÔºåÁé∞Âú®Êàë‰ª¨ÂÜçÁúã‰∏Ä‰∏ã @command{awk} ÂÖ∏ÂûãÂú∞ËøòËÉΩÂÅö‰∫õ‰ªÄ‰πà‰∫ãÊÉÖ„ÄÇËøô‰∏™‰æãÂ≠êÂ±ïÁ§∫‰∫Ü @command{awk} Â¶Ç‰ΩïË¢´Áî®Êù•ÂÅöÊ±áÊÄªÔºåÈÄâÊã©‰ª•ÂèäÈáçÊñ∞ÂÆâÊéíÂè¶‰∏Ä‰∏™Â∑•ÂÖ∑ÁöÑËæìÂá∫„ÄÇÊâÄÁî®Âà∞ÁöÑÁâπÊÄßËøòÊ≤°ÊúâÊ∂âÂèäÔºåÂõ†Ê≠§‰Ω†‰∏çË¶ÅÊãÖÂøÉ‰∏çÁêÜËß£ÊâÄÊúâÁöÑÁªÜËäÇÔºö

@example
ls -l | awk '$6 == "Nov" @{ sum += $5 @}
             END @{ print sum @}'
@end example

@cindex @command{ls} utility
Ëøô‰∏™ÂëΩ‰ª§ÊâìÂç∞ÂΩìÂâçÁõÆÂΩï‰∏ãÔºåÊúÄÂêéÁöÑ‰øÆÊîπÊó∂Èó¥‰∏∫ÂçÅ‰∏ÄÊúà‰ªΩÁöÑÊâÄÊúâÊñá‰ª∂ÁöÑÊÄªÂÖ±ÁöÑÂ≠óËäÇÊï∞„ÄÇ
@w{@samp{ls ‚Äìl}} ÊòØËøôÊï¥‰ΩìÂëΩ‰ª§ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÁî®‰∫éÊòæÁ§∫‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÁöÑÊñá‰ª∂ÔºåÂåÖÊã¨Êñá‰ª∂ÁöÑÂ§ßÂ∞è‰ª•ÂèäÊúÄÂêé‰øÆÊîπÊó∂Èó¥„ÄÇÂÆÉÁöÑËæìÂá∫Á±ª‰ºº‰∫éËøôÊ†∑Ôºö

@example
-rw-r--r--  1 arnold   user   1933 Nov  7 13:05 Makefile
-rw-r--r--  1 arnold   user  10809 Nov  7 13:03 awk.h
-rw-r--r--  1 arnold   user    983 Apr 13 12:14 awk.tab.h
-rw-r--r--  1 arnold   user  31869 Jun 15 12:20 awkgram.y
-rw-r--r--  1 arnold   user  22414 Nov  7 13:03 awk1.c
-rw-r--r--  1 arnold   user  37455 Nov  7 13:03 awk2.c
-rw-r--r--  1 arnold   user  27511 Dec  9 13:07 awk3.c
-rw-r--r--  1 arnold   user   7989 Nov  7 13:03 awk4.c
@end example

@noindent
@cindex line continuations, with C shell
Á¨¨‰∏Ä‰∏™ÂüüÂåÖÂê´‰∫ÜËØªÂÜôÊùÉÈôêÔºåÁ¨¨‰∫å‰∏™ÂüüÂåÖÂê´‰∫ÜÊñá‰ª∂ÁöÑÁ°¨ËøûÊé•@footnote{Á°¨ÈìæÊé•(hard linkÔºå ‰πüÁß∞ÈìæÊé•)Â∞±ÊòØ‰∏Ä‰∏™Êñá‰ª∂ÁöÑ‰∏Ä‰∏™ÊàñÂ§ö‰∏™Êñá‰ª∂Âêç„ÄÇÂ§öÊï∞Êñá‰ª∂Á≥ªÁªüÂèØ‰ª•Áî®Â§ö‰∏™Êñá‰ª∂Âêç‰∏éÂêå‰∏Ä‰∏™Êñá‰ª∂ËøõË°åÈìæÊé•ÔºåËøô‰∫õÊñá‰ª∂ÂêçÂèØ‰ª•Âú®Âêå‰∏ÄÁõÆÂΩïÊàñ‰∏çÂêåÁõÆÂΩï„ÄÇ‰∏Ä‰∏™Êñá‰ª∂ÊúâÂá†‰∏™Êñá‰ª∂ÂêçÔºåÂ∞±ËØ¥ËØ•Êñá‰ª∂ÁöÑÈìæÊé•Êï∞‰∏∫Âá†„ÄÇËøô‰∏™‰∏éËΩØÈìæÊé•‰∏çÂêåÔºåËΩØËøûÊé•ÊòØÊåáÂêëÊñá‰ª∂ÂêçÁöÑÊñá‰ª∂„ÄÇÂà†Èô§ÊâÄÊúâÁ°¨ËøûÊé•ÊâçËÉΩÂà†Èô§Êñá‰ª∂„ÄÇÂà†Èô§Ë¢´ËΩØËøûÊé•ÁöÑÊåáÂêëÁöÑÊñá‰ª∂ÔºàÂ¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™Á°¨ËøûÊé•ÔºâÂ∞±ÂèØ‰ª•Âà†Èô§Êñá‰ª∂Êú¨Ë∫´„ÄÇ‚Äî‚ÄîËØëËÄÖÊ≥®}
‰∏™Êï∞ÔºåÁ¨¨‰∏â‰∏™ÂüüÊòæÁ§∫‰∫ÜÊñá‰ª∂ÁöÑÂ±û‰∏ª‰ø°ÊÅØ„ÄÇÁ¨¨Âõõ‰∏™ÂüüÊòæÁ§∫ÁöÑÊñá‰ª∂ÁöÑÁî®Êà∑‰ø°ÊÅØ„ÄÇÁ¨¨‰∫î‰∏™ÂüüÊòæÁ§∫‰∫ÜÊñá‰ª∂ÁöÑÂ≠óËäÇÂ§ßÂ∞è„ÄÇÁ¨¨ÂÖ≠„ÄÅ‰∏É„ÄÅÂÖ´‰∏™ÂüüÂàÜÂà´ÂåÖÊã¨Êñá‰ª∂ÊúÄÂêé‰øÆÊîπÊó∂Èó¥ÁöÑÊúàÔºåÊó•‰∏éÊó∂Èó¥„ÄÇÊúÄÂêéÔºåÁ¨¨‰πù‰∏™ÂüüÂåÖÂê´‰∫Ü@value{FN}„ÄÇ

@c @cindex automatic initialization
@cindex initialization, automatic
Âú® @command{awk} Á®ãÂ∫è‰∏≠ @samp{$6 == ‚ÄúNov‚Äù} Â∞±ÊòØÁî®Êù•Âà§Êñ≠ @w{@samp{ls ‚Äìl}} ËæìÂá∫ÁöÑÁ¨¨ÂÖ≠‰∏™ÂüüÊòØÂê¶‰∏∫ @samp{Nov} ÁöÑË°®ËææÂºè„ÄÇ
Â¶ÇÊûúÊØèÊ¨°ÁöÑËæìÂÖ•Ë°åÁöÑÁ¨¨ÂÖ≠‰∏™ÂüüÂåπÈÖçÂ≠ó‰∏≤ @samp{Nov} Ôºå@command{awk} Â∞±‰ºöÊâßË°å @samp{sum += $5}„ÄÇ
Ëøô‰∏™‰ºöÂä†‰∏äÁ¨¨‰∫î‰∏™ÂüüÔºàÊñá‰ª∂Â§ßÂ∞èÔºâÂà∞ÂèòÈáè @code{sum} ‰∏≠„ÄÇÁªìÊûúÂ∞±ÊòØÔºåÂΩì @command{awk} ÂÆåÊàê‰∫ÜÊâÄÊúâË°åÁöÑËæìÂÖ•Êó∂Ôºå@code{sum} Â∞±ÂåÖÂê´‰∫ÜÂåπÈÖçÊ®°ÂºèÁöÑÊâÄÊúâÊñá‰ª∂ÁöÑÂ§ßÂ∞è„ÄÇÔºàËøôÂèØ‰ª•Â∑•‰ΩúÊòØÂõ†‰∏∫ @command{awk} ÁöÑÂèòÈáè‰ºöÈªòËÆ§ÂàùÂßãÂåñ‰∏∫ 0„ÄÇÔºâ

ÊúÄÂêé‰∏ÄË°åÂ§ÑÁêÜÂêéÔºå@command{END} ËßÑÂàôÂ∞±‰ºöÊâßË°åÔºåÂπ∂ÊâìÂç∞Âá∫ @code{sum} ÁöÑÂÄºÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠‰∏∫ 80600„ÄÇ

Ëøô‰∫õ‰∏™È´òÁ∫ßÁöÑ @command{awk} ÊäÄÊúØ‰ºöÂú®ÂêéÈù¢ÁöÑ@value{SECTION}‰∏≠Ê∂âÂèäÔºà@pxref{Action Overview}Ôºâ„ÄÇÂú®‰Ω†Â≠¶‰π†Âà∞Ëøô‰∫õÈ´òÁ∫ßÊäÄÊúØÂâçÔºå‰Ω†Âè™ÈúÄË¶ÅÁü•ÈÅì @command{awk} Â¶Ç‰ΩïËß£Êûê‰Ω†ÁöÑËæìÂÖ•Âπ∂ÊòæÁ§∫‰Ω†ÁöÑËæìÂá∫„ÄÇÈÄöËøáÊìç‰ΩúÂêÑ‰∏™ÂüüÂπ∂‰ΩøÁî® @code{print} ËØ≠Âè•Ôºå‰Ω†Â∞±ÂèØ‰ª•‰∫ßÁîü‰∏Ä‰∫õÁõ∏ÂΩìÊúâÁî®ÁöÑÔºå‰ª§‰∫∫Âç∞Ë±°Ê∑±ÂàªÁöÑÊä•Ë°®„ÄÇ

@node Statements/Lines
@section @command{awk} ËØ≠Âè•‰∏éË°å
@cindex line breaks
@cindex newlines

ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºå@command{awk} Á®ãÂ∫èÁöÑÊØè‰∏ÄË°åÈÉΩÊòØ‰∏Ä‰∏™Áã¨Á´ãÁöÑËØ≠Âè•ÊàñËÄÖ‰∏Ä‰∏™Áã¨Á´ãÁöÑËßÑÂàôÔºåÁ±ª‰ºº‰∫éÔºö

@example
awk '/12/  @{ print $0 @}
     /21/  @{ print $0 @}' mail-list inventory-shipped
@end example

@cindex @command{gawk}, newlines in
‰ΩÜÊòØ @command{gawk} ‰ºöÂøΩÁï•‰∏ãÈù¢Á¨¶Âè∑ÂêéÈù¢ÁöÑ‰ªª‰ΩïÊñ∞Ë°åÔºö

@example
,    @{    ?    :    ||    &&    do    else
@end example

@noindent
‰ªª‰Ωï‰∏Ä‰∏™Êñ∞Ë°åÈÉΩ‰ºöËÆ§‰∏∫ÊòØ‰∏Ä‰∏™ËØ≠Âè•@footnote{ËøôÈáåÁöÑ @samp{?} ‰∏é @samp{:} ÊòØ‰∏Ä‰∏™‰∏âÂÖÉÊìç‰ΩúÁ¨¶Ë°®ËææÂºèÔºå@ref{Conditional Exp} ‰∏≠ËøõË°å‰∫ÜÊèèËø∞„ÄÇ
Âú® @samp{?} ‰∏é @samp{:} ‰πãÂêéËøõË°åÊñ≠Ë°åÊòØ‰∏Ä‰∏™Â∞èÊâ©Â±ïÔºåÂ¶ÇÊûúÊåáÂÆö‰∫Ü@option{--posix} ÂèÇÊï∞(@pxref{Options})ÔºåÂàôËøô‰∏™ÁâπÊÄßÂ∞±‰ºöË¢´Á¶ÅÁî®„ÄÇ}
ÁöÑÁªìÊùü„ÄÇ

@cindex @code{\} (backslash), continuing lines and
@cindex backslash (@code{\}), continuing lines and
Âú®Êñ∞ÁöÑ‰∏ÄË°å‰ºö‰∏≠Ê≠¢‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Êää‰∏ÄË°åÂëΩ‰ª§ÂÜôÊàê‰∏§Ë°åÔºå‰Ω†ÂèØ‰ª•Âú®Á¨¨‰∏ÄË°åÁöÑÊú´Â∞æÂä†‰∏äÂèçÊñúÊù†Ôºà@samp{\}ÔºâÊù•@dfn{Áª≠ÂÜô}Ëøô‰∏™ÂëΩ‰ª§„ÄÇ
‰∏∫‰∫ÜËØÜÂà´‰∏ÄË°åÁöÑÂêéÁª≠Â≠óÁ¨¶ÔºàÁª≠Ë°åÔºâÔºåÔºà @samp{\} ÔºâÂèçÊñúÊù†ÂøÖÈ°ªÊòØË°åÁöÑÁªìÊùüÂ≠óÁ¨¶„ÄÇ
ÂèçÊñúÊù†ÂèØ‰ª•ÂÜôÂú®Ëøô‰∏™ÂëΩ‰ª§ÁöÑ‰ªª‰ΩïÂú∞ÊñπÔºåÂç≥‰ΩøÂú®‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÊàñËÄÖÊ≠£ÂàôË°®ËææÂºèÁöÑ‰∏≠Èó¥‰πüÂèØ‰ª•„ÄÇÂ¶ÇÔºö
@example
awk '/This regular expression is too long, so continue it\
 on the next line/ @{ print $1 @}'
@end example

@noindent
@cindex portability, backslash continuation and
Êàë‰ª¨‰∏ÄËà¨‰∏çÂú®Êàë‰ª¨ÁöÑÁ®ãÂ∫è‰ª£Á†Å‰∏≠Âà©Áî®ÂèçÊñúÊù†Êù•Áª≠Ë°å„ÄÇ@command{gawk} ÂØπ‰∫é‰∏ÄË°åÁöÑÈïøÂ∫¶Ê≤°ÊúâÈôêÂà∂ÔºåÂõ†Ê≠§ÂèçÊñúÊù†Áª≠Ë°åÂπ∂ÈùûÊòØÂøÖË¶ÅÁöÑ„ÄÇËøô‰ªÖÊòØ‰ΩøÂæóÁ®ãÂ∫èÊõ¥ÊúâÂèØËØªÊÄß„ÄÇÂõ†‰∏∫Ëøô‰∏™ÂéüÂõ†Ôºå‰πü‰∏∫Ê∏ÖÊô∞Ëµ∑ËßÅÔºåÊàë‰ª¨Â∞ΩÈáè‰øùËØÅÊú¨@value{DOCUMENT}‰∏≠‰ª£Á†ÅÁöÑËØ≠Âè•ÁöÑÁü≠Â∞è„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑ‰ª£Á†ÅÊòØÂÜôÂú®ÂçïÁã¨ÁöÑÊñá‰ª∂ËÄå‰∏çÊòØÂëΩ‰ª§Ë°å‰∏≠ÔºåÈÇ£‰πàÂèçÊñúÊù†Â∞±ÊúÄÊúâÁî®‰∫Ü„ÄÇÂêåÊó∂‰Ω†‰πüÈúÄË¶ÅÁü•ÈÅì‰∏çÂêåÁöÑÂèëÂ∏ÉÁâàÊú¨ÁöÑ @command{awk} ÂØπ‰∫éÂèçÊñúÊù†Âú®‰ΩïÂ§Ñ‰ΩøÁî®ÊòØÊúâÁâπÊÆäÂú∞ÊñπÁöÑ„ÄÇÂõ†Ê≠§Ôºå‰∏∫‰∫ÜËÉΩÊúÄÂ§ßÂåñ‰Ω†ÁöÑ‰ª£Á†ÅÁöÑÂèØÁßªÊ§çÊÄßÔºåÊúÄÂ•Ω‰∏çË¶ÅÊää‰Ω†ÁöÑ‰ª£Á†ÅË°åÂú®Â≠ó‰∏≤ÊàñËÄÖÊ≠£ÂàôË°®ËææÂºè‰∏≠Èó¥Êñ≠Ë°åÂàÜÂºÄ„ÄÇ
@c 10/2000: gawk, mawk, and current bell labs awk allow it,
@c solaris 2.7 nawk does not. Solaris /usr/xpg4/bin/awk does though!  sigh.

@cindex @command{csh} utility
@cindex backslash (@code{\}), continuing lines and, in @command{csh}
@cindex @code{\} (backslash), continuing lines and, in @command{csh}
@quotation Ê≥®ÊÑè
@emph{ÂèçÊñúÊù†Áª≠Ë°å‰∏ç‰ºöÂú® C Shell ‰∏≠ÊúâÊïà„ÄÇ}ÂÆÉÂè™Âú®Áã¨Á´ãÁöÑ @command{awk} Á®ãÂ∫èÊñá‰ª∂ÔºåÊàñËÄÖ‰∏ÄÊ¨°ÊÄßÁöÑÁ®ãÂ∫è‰∏≠ÊúâÁî®Ôºå@emph{ÂâçÊèêÊòØ}‰Ω†‰ΩøÁî®ÁöÑÊòØ POSIX ÂÖºÂÆπÁöÑ ShellÔºå‰æãÂ¶Ç Unix Bourne Shell ÊàñËÄÖ Bash„ÄÇ‰ΩÜÊòØ C Shell ÁöÑË°®Áé∞‰∏çÂêåÔºÅ‰Ω†ÈúÄË¶ÅÂú®Ë°å‰∏≠‰ΩøÁî®‰∏§‰∏™ÂèçÊñúÊù†ÔºåÁÑ∂ÂêéÂÜçÂÜôÂÖ•Êñ∞Ë°å„ÄÇÂú®‰ΩøÁî® C Shell Êó∂‰Ω†‰πüÈúÄË¶ÅÁïôÊÑè @command{awk} Á®ãÂ∫è‰∏≠ÁöÑ@emph{ÊØè‰∏Ä‰∏™}Êñ∞Ë°åÈÉΩÈúÄË¶ÅÂèçÊñúÊù†ËΩ¨‰πâ„ÄÇ‰Ωú‰∏∫ËØ¥ÊòéÂ¶Ç‰∏ãÔºö

@example
% @kbd{awk 'BEGIN @{ \}
? @kbd{  print \\}
? @kbd{      "hello, world" \}
? @kbd{@}'}
@print{} hello, world
@end example

@noindent
ËøôÈáåÈù¢Ôºå@samp{%} ‰∏é @samp{?} ÈÉΩÊòØ C Shell ÁöÑ‰∏ª„ÄÅÊ¨°ÊèêÁ§∫Á¨¶Ôºå‰∏éÊ†áÂáÜÁöÑ Shell ÁöÑ @samp{$} ‰∏é @samp{>} Á±ª‰ºº„ÄÇ

‰∏éÂâçÈù¢‰∏Ä‰∏™‰æãÂ≠êÁõ∏ÊØîÔºåÁúãÁúã POSIX ÂÖºÂÆπÁöÑ Shell Â¶Ç‰ΩïÊù•ÂÆåÊàêÔºö

@example
$ @kbd{awk 'BEGIN @{}
>   @kbd{print \}
>       @kbd{"hello, world"}
> @kbd{@}'}
@print{} hello, world
@end example
@end quotation

@command{awk} ÊòØ‰∏Ä‰∏™Èù¢ÂêëË°åÁöÑËØ≠Ë®Ä„ÄÇÊØè‰∏Ä‰∏™ËßÑÂàôÁöÑÂä®‰ΩúÈÉΩ‰∏éÊ®°ÂºèÂú®Âêå‰∏ÄË°å„ÄÇ‰∏∫‰∫ÜÂ∞ÜÂÆÉ‰ª¨ÂàÜÈöîÂú®‰∏çÂêåÁöÑË°åÔºå‰Ω†@emph{ÂøÖÈ°ª}‰ΩøÁî®ÂèçÊñúÊù†Êù•ËøõË°åÁª≠Ë°åÔºõÊ≤°Êúâ‰ªñÈÄâÈ°π„ÄÇ

@cindex backslash (@code{\}), continuing lines and, comments and
@cindex @code{\} (backslash), continuing lines and, comments and
@cindex commenting, backslash continuation and
ËøòÊúâ‰∏Ä‰∏™‰∫ãÊÉÖË¶ÅËÆ∞‰ΩèÔºå‰∏çË¶ÅÂ∞ÜÂèçÊñúÊù†‰∏éÊ≥®ÈáäÊ∑∑Áî®„ÄÇ@command{awk} Âè™Ë¶ÅÁúãÂà∞ @samp{#} ÂºÄÂßã‰∏Ä‰∏™Ê≥®ÈáäÔºåÂ∞±‰ºöÂøΩÁï•‰∏ÄË°å‰∏≠@emph{ÊâÄÊúâÁöÑ}ÂêéÁª≠ÈÉ®ÂàÜ„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{gawk 'BEGIN @{ print "dont panic" # a friendly \}
> @kbd{                                   BEGIN rule}
> @kbd{@}'}
@error{} gawk: cmd. line:2:                BEGIN rule
@error{} gawk: cmd. line:2:                ^ syntax error
@end example

@noindent
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁúãËµ∑Êù•ÂèçÊñúÊù†‰ºöÂ∞ÜÊ≥®ÈáäÁª≠Âà∞‰∏ã‰∏ÄË°å„ÄÇ‰ΩÜÊòØÔºåÂèçÊñúÊù†-Êñ∞Ë°åËøôÊ†∑ÁöÑÁªÑÂêà‰ªéÊù•‰∏ç‰ºöË¢´Ê≥®ÊÑèÂà∞ÔºåÂõ†‰∏∫ÂÆÉÂú®Ê≥®Èáä‰∏≠Ë¢´ËóèËµ∑Êù•‰∫Ü„ÄÇÂõ†Ê≠§Ôºå@code{BEGIN} ‰ºöË¢´ËßÜ‰Ωú‰∏Ä‰∏™ËØ≠Ê≥ïÈîôËØØ„ÄÇ

@cindex statements, multiple
@cindex @code{;} (semicolon), separating statements in actions
@cindex semicolon (@code{;}), separating statements in actions
ÂΩì @command{awk} ÁöÑ‰∏Ä‰∏™ËßÑÂàô‰∏≠ÁöÑËØ≠Âè•ÂæàÁü≠Ôºå‰Ω†ÊÉ≥ÊääÂÆÉ‰ª¨ÊîæÂú®Âêå‰∏ÄË°åÔºåËøô‰∏™ÂèØÈÄöËøáËØ≠Âè•‰πãÈó¥Áî®ÂàÜÂè∑Ôºà@samp{;}ÔºâËøõË°åÂàÜÈöî„ÄÇËøô‰πüÂêåÊ†∑ÈÄÇÂ∫î‰∫éËßÑÂàôÊú¨Ë∫´„ÄÇÂõ†Ê≠§ÔºåÂú®Êú¨@value{SECTION}‰∏≠Â±ïÁ§∫ÁöÑÁ®ãÂ∫è‰πüÂèØ‰ª•ÂÜôÂú®ËøôÊ†∑Ôºö

@example
/12/ @{ print $0 @} ; /21/ @{ print $0 @}
@end example

@quotation ÊèêÁ§∫
ÈúÄË¶ÅÂ£∞ÊòéÁöÑ‰∏ÄÁÇπÊòØÔºåÁî®‰∏Ä‰∏™ÂàÜÂè∑ÂàÜÈöîÂêå‰∏ÄË°å‰∏≠ÁöÑËßÑÂàôÂπ∂‰∏çÊòØ @command{awk} ËØ≠Ë®ÄÁöÑÈ¶ñÂàõ„ÄÇ‰∏∫‰∫Ü‰∏éÂú®‰∏Ä‰∏™Âä®‰ΩúÁöÑËØ≠Âè•Â§ÑÁêÜ‰øùÊåÅ‰∏ÄËá¥ÔºåËøôÊâçÂä†ÂÖ•Âà∞ @command{awk} ‰∏≠ÁöÑ„ÄÇ
@end quotation

@node Other Features
@section @command{awk} ÁöÑÂÖ∂‰ªñÁâπÊÄß

@cindex variables
@command{awk} ËØ≠Ë®ÄÊèê‰æõ‰∫ÜÈùûÂ∏∏Â§öÁöÑÈ¢ÑÂÆö‰πâÁöÑÔºåÊàñËÄÖ@dfn{ÂÜÖÂª∫ÁöÑ}ÂèòÈáèÔºåÂèØËÆ©‰Ω†ÁöÑÁ®ãÂ∫è‰ªé @command{awk} Ëé∑Âèñ‰ø°ÊÅØ„ÄÇ‰πüÊúâ‰∫õÂèòÈáèÈõÜÊòØËÆ©‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÊéßÂà∂ @command{awk} Â¶Ç‰ΩïÂ§ÑÁêÜ‰Ω†ÁöÑÊï∞ÊçÆ„ÄÇ

Âè¶Â§ñÔºå@command{awk} ‰πüÊèê‰æõ‰∫ÜÂæàÂ§öÁöÑÂÜÖÂª∫ÂáΩÊï∞ÔºåÊù•ÂÅö‰∏Ä‰∫õÈÄöÁî®ÊÄßÁöÑËÆ°ÁÆó‰∏éÂ≠ó‰∏≤Áõ∏ÂÖ≥ÁöÑÊìç‰Ωú„ÄÇ@command{gawk} Êèê‰æõ‰∫ÜÂÜÖÂª∫ÁöÑÂáΩÊï∞Áî®Êù•Â§ÑÁêÜÊó∂Èó¥Êà≥ÔºåÊâßË°å‰ΩçÊìç‰ΩúÔºå‰ª•ÂèäËøêË°åÊó∂ÁöÑÂ≠ó‰∏≤ÁøªËØëÔºàÂõΩÈôÖÂåñÔºâÔºåÁ°ÆÂÆöÂèòÈáèÁöÑÁ±ªÂûã‰ª•ÂèäÊï∞ÊçÆÊéíÂ∫è„ÄÇ

ÂΩìÊàë‰ª¨ÂºÄÂèë @command{awk} ËØ≠Ë®ÄÁ®ãÂ∫èÊó∂ÔºåÊàë‰ª¨‰ºö‰ªãÁªçÂ§öÊï∞ÁöÑÂèòÈáè‰∏éÂáΩÊï∞Ôºå‰ªñ‰ª¨‰ºöÂú® @ref{Built-in Variables}Ôºå‰ª•Âèä @ref{Built-in}ÔºåÊúâÁ≥ªÁªüÁöÑÊèèËø∞„ÄÇ

@node When
@section ‰ΩïÊó∂‰ΩøÁî® @command{awk}

@cindex @command{awk}, uses for
ÁõÆÂâçÔºåÊàë‰ª¨Â∑≤Áªè‰∫ÜËß£‰∫Ü‰∏Ä‰∫õ @command{awk} ÂèØ‰ª•ÂÅöÁöÑ‰∫ãÊÉÖÔºå‰Ω†ÂèØËÉΩÊúâÁñëÈóÆ @command{awk} ÂØπ‰Ω†Êúâ‰ªÄ‰πàÁî®Â§Ñ„ÄÇÈÄöËøá‰ΩøÁî®ÂÖ∂‰ªñÂ∑•ÂÖ∑Á®ãÂ∫èÔºåÊõ¥È´òÁ∫ßÁöÑÊ®°ÂºèÔºåÂüüÂàÜÈöîÁ¨¶ÔºåÁÆóÊúØËØ≠Âè•‰ª•ÂèäÂÖ∂‰ªñÁöÑÈÄâÊã©ÊñπÊ°àÔºå‰Ω†ÂèØ‰ª•‰∫ßÁîüÊõ¥‰∏∫Â§çÊùÇÁöÑËæìÂá∫„ÄÇ
@command{awk} ÂØπ‰∫é‰ªéÂ§ßÈáèÁöÑÂéüÂßãÊï∞ÊçÆ‰∫ßÁîüÊä•Ë°®ÁöÑÂú∫ÊôØ‰∏≠ÈùûÂ∏∏Áî®ÊúâÔºåÂ¶Ç‰ªéÂÖ∂‰ªñÁöÑÂ∑•ÂÖ∑ÔºåÂ¶Ç @command{ls} ÁöÑËæìÂá∫‰∏≠Ê±áÊÄª‰ø°ÊÅØ„ÄÇÔºà@ref{More Complex}Ôºâ

Áî® @command{awk} ËØ≠Ë®ÄÂÜôÁöÑÁ®ãÂ∫è‰∏ÄËà¨‰ºöÊØîËæÉÂÖ∂‰ªñÁöÑËØ≠Ë®ÄÊâÄÂÜôÁöÑÁ®ãÂ∫èË¶ÅÁü≠„ÄÇËøô‰ΩøÂæó @command{awk} Á®ãÂ∫èÈùûÂ∏∏ÂÆπÊòìÁªÑÂêà‰∏é‰ΩøÁî®„ÄÇ
@command{awk} Â∏∏Â∏∏Âú®‚ÄúÁî®ÂêéÂç≥‰∏¢‚ÄùÁöÑÂú∫ÊôØ‰∏≠Âø´ÈÄüÂÆûÁé∞‰Ω†ÁöÑ‰ª£Á†Å„ÄÇÁî±‰∫é @command{awk} ÊòØËß£ÈáäÂûãÁöÑÔºåËøôÂ∞±ÈÅøÂÖç‰∫ÜÂú®ÁºñËæë-ÁºñËØë-ÊµãËØï-Ë∞ÉËØïËøôÊ†∑ÁöÑÁ®ãÂ∫èÂºÄÂèëÊµÅÁ®ãÁöÑÁºñËØëÊµÅÁ®ãÔºåËÄåËøô‰∏™ÊµÅÁ®ãÈÄöÂ∏∏ÈÉΩÊØîËæÉÈïø„ÄÇ

@cindex Brian Kernighan's @command{awk}
‰πüÊúâÈùûÂ∏∏Â§çÊùÇ @command{awk} Á®ãÂ∫èÔºåÂåÖÊã¨‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÂèØÈáçÂÆö‰ΩçÁöÑ‰∏∫
@ifclear FOR_PRINT
 8 ‰ΩçÂæÆÂ§ÑÁêÜÂÜôÁöÑÊ±áÁºñÂô®Ôºà@pxref{Glossary}ÔºåÂèñÂæóËØ¶ÁªÜ‰ø°ÊÅØÔºâÔºå
@end ifclear
@ifset FOR_PRINT
 8 ‰ΩçÂæÆÂ§ÑÁêÜÂÜôÁöÑÊ±áÁºñÂô®Ôºå
@end ifset
‰ª•Âèä‰∏∫‰∏ìÁî®ÁöÑ Prolog ËÆ°ÁÆóÊú∫ÂÜôÁöÑÂæÆ‰ª£Á†ÅÁöÑÊ±áÁºñÂô®„ÄÇËµ∑ÂàùÁöÑ @command{awk} ÁöÑËÉΩÂäõÊ≤°ÊúâÂäûÊ≥ïÂÆåÊàêËøô‰πàÂ§çÊùÇÁöÑ‰ªªÂä°Ôºå‰ΩÜÊòØÁé∞‰ª£ÁâàÊú¨ÁöÑ @command{awk} ÂàôÂÖ∑Â§á‰∫ÜËøôÊ†∑ÁöÑËÉΩÂäõ„ÄÇ

@cindex @command{awk} programs, complex
Â¶ÇÊûú‰Ω†ÂèëÁé∞‰Ω†ÂèØËÉΩÈúÄË¶ÅÂÜôÂ•ΩÂá†ÁôæË°åÁöÑ @command{awk} Á®ãÂ∫è‰ª£Á†ÅÔºå‰Ω†ÊàñËÆ∏Â∫îËØ•ËÄÉËôë‰ΩøÁî®ÂÖ∂‰ªñÁöÑÁºñÁ®ãËØ≠Ë®ÄÔºåShell Â∞±ÂØπÂ≠ó‰∏≤Â§ÑÁêÜ‰∏éÂåπÈÖçÂ∞±ÂæàÂú®Ë°åÔºõ
Âè¶Â§ñÔºåÂÆÉ‰πüÂèØ‰ª•ËÆ©‰Ω†ÂÖÖÂàÜ‰ΩøÁî®Á≥ªÁªü‰∏≠ÁöÑÂº∫Â§ßÂ∑•ÂÖ∑„ÄÇPython Âú®È´òÂ±ÇÁ∫ß‰∏äÁöÑËØ≠Ë®ÄÁºñÁ®ãÊñπ‰æøÊÄß‰∏é‰ΩøÁî®Á≥ªÁªüÂ∑•ÂÖ∑‰πãÈó¥Êèê‰æõ‰∫ÜÂæàÂ•ΩÁöÑÂπ≥Ë°°„ÄÇ
@footnote{ÂÖ∂‰ªñÁöÑÊµÅË°åÁöÑÂ∑•ÂÖ∑ÂåÖÊã¨ Ruby ‰∏é Perl„ÄÇ}

@node Intro Summary
@section ÊÄªÁªì

@c FIXME: Review this chapter for summary of builtin functions called.
@itemize @value{BULLET}
@item
@command{awk} Á®ãÂ∫èÁî±@var{Ê®°Âºè}-@var{Âä®‰Ωú}ÂØπÁªÑÊàê„ÄÇ

@item
Ê≤°Êúâ@var{Ê®°Âºè}ÁöÑ@var{Âä®‰Ωú}‰πü‰ºöËøêË°å„ÄÇÂØπ‰∫éÊ≤°Êúâ@var{Ê®°Âºè}ÁöÑÈªòËÆ§@var{Âä®‰Ωú}Â∞±ÊòØ @samp{@{ print $0 @}} „ÄÇ

@item
Ë¶Å‰πà‰ΩøÁî®
 @samp{awk '@var{program}' @var{files}} 
ÊàñËÄÖ
 @samp{awk -f @var{program-file} @var{files}} 
Êù•ËøêË°å @command{awk} „ÄÇ

@item
‰Ω†ÂèØ‰ª•‰ΩøÁî®ÁâπÊÆäÁöÑ @samp{#!} Â≠ó‰∏≤ÊîæÂú® @command{awk} Á®ãÂ∫èÁöÑÁ¨¨‰∏ÄË°åÊù•Áõ¥Êé•ÊâßË°å„ÄÇ

@item
@command{awk} Á®ãÂ∫èÁöÑÊ≥®Èáä‰ª• @samp{#} ÂºÄÂßãÔºåÂπ∂ÊåÅÁª≠Âà∞Âêå‰∏ÄË°åÁöÑÁªìÊùü„ÄÇ

@item
ÂΩìÂú®ÂÜôÂ§ßÁöÑËÑöÊú¨ÁöÑ‰∏ÄÈÉ®‰ªΩÊó∂Ôºå@command{awk} Êó∂ÂÄôË¶ÅÊ≥®ÊÑèÂºïÂè∑ÈóÆÈ¢òÔºàÊàñËÄÖ MS-Windows ÁöÑÊâπÂ§ÑÁêÜÊñá‰ª∂Ôºâ„ÄÇ

@item
ÂèØ‰ª•‰ΩøÁî®ÂèçÊñúÊù†Êù•ËøõË°åÊ∫ê‰ª£Á†ÅÁª≠Ë°å„ÄÇ‰πüÂèØ‰ª•Âú®ÈÄóÂè∑ @samp{,} ÔºåÂºÄÂ§ßÊã¨Âè∑ @samp{@{} ÔºåÈóÆÂè∑ @samp{?} ÔºåÂÜíÂè∑ @samp{:}Ôºå@samp{||}Ôºå@samp{&&}Ôºå@samp{do}Ôºå‰∏é @samp{else} ÂêéÈù¢Ëá™Âä®Áª≠Ë°å„ÄÇ
@end itemize


@node Invoking Gawk
@chapter ËøêË°å @command{awk} ‰∏é @command{gawk}


Êú¨@value{CHAPTER}ÁöÑÂÜÖÂÆπÂåÖÊã¨Â¶Ç‰ΩïÊù•ËøêË°å @command{awk} Ôºå‰ªãÁªç POSIX Ê†áÂáÜÁöÑ‰∏é @command{gawk} ÁâπÂÆöÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºå
‰ª•Âèä @command{awk} ‰∏é @command{gawk} ‰∏çÂ∏¶ÂèÇÊï∞ËøêË°åÊó∂ÁöÑÊÉÖÂΩ¢„ÄÇÂêéÈù¢ÂÜçÊ∂âÂèä @command{gawk} Â¶Ç‰ΩïÊù•ÊêúÁ¥¢Êñá‰ª∂ÔºåÂú®ËØªÂèñÂÖ∂‰ªñÊñá‰ª∂ÁöÑÂêåÊó∂‰ªéÊ†áÂáÜËæìÂÖ•ËØªÂèñÊï∞ÊçÆÔºå@command{gawk} ÁöÑÁéØÂ¢ÉÂèòÈáèÔºåÈÄÄÂá∫Áä∂ÊÄÅÔºå‰ΩøÁî®ÂåÖÂê´Êñá‰ª∂Ôºå‰ª•ÂèäÈÇ£‰∫õËøáÊó∂ÁöÑÔºåÊú™ÊñáÊ°£ÂåñÁöÑÈÄâÈ°π‰∏éÁâπÊÄß„ÄÇ

Êú¨@value{CHAPTER}‰∏≠ÁöÑËÆ∏Â§öÁâπÊÄß‰∏éÈÄâÈ°πÂú®ÂêéÈù¢ÁöÑ@value{CHAPTER}‰∏≠‰ºöÊõ¥ËØ¶ÁªÜÂú∞ËØ¥Êòé„ÄÇÂèØ‰ª•Ë∑≥ËøáÊú¨@value{CHAPTER}‰∏≠ÈÇ£‰∫õ‰Ω†Áé∞Âú®‰∏çÊÑüÂÖ¥Ë∂£ÁöÑÂÜÖÂÆπ„ÄÇ

@menu
* Command Line::                How to run @command{awk}.
* Options::                     Command-line options and their meanings.
* Other Arguments::             Input file names and variable assignments.
* Naming Standard Input::       How to specify standard input with other
                                files.
* Environment Variables::       The environment variables @command{gawk} uses.
* Exit Status::                 @command{gawk}'s exit status.
* Include Files::               Including other files into your program.
* Loading Shared Libraries::    Loading shared libraries into your program.
* Obsolete::                    Obsolete Options and/or features.
* Undocumented::                Undocumented Options and Features.
* Invoking Summary::            Invocation summary.
@end menu

@node Command Line
@section Ë∞ÉÁî® @command{awk}
@cindex command line, invoking @command{awk} from
@cindex @command{awk}, invoking
@cindex arguments, command-line, invoking @command{awk}
@cindex options, command-line, invoking @command{awk}

Êúâ‰∏§ÁßçÊñπÂºèÊù•ËøêË°å @command{awk}‚Äî‚ÄîÂ∏¶ÊòæÂºèÁ®ãÂ∫èÁöÑÊñπÂºèÊàñËÄÖÊòØ‰∏ÄÂà∞Â§ö‰∏™ÁöÑÁ®ãÂ∫èÊñá‰ª∂ÊñπÂºè„ÄÇ‰∏ãÈù¢ÊòØ‰∏§ÁßçËøêË°åÊñπÂºèÁöÑÊ®°ÂºèÔºõÂú® [@dots{}] ‰∏≠ÂåÖÊã¨ÂÜÖÂÆπÊòØÂèØÈÄâÔºö

@display
@command{awk} [@var{options}] @option{-f} @var{progfile} [@option{--}] @var{file} @dots{}
@command{awk} [@var{options}] [@option{--}] @code{'@var{program}'} @var{file} @dots{}
@end display

@cindex GNU long options
@cindex long options
@cindex options, long
Èô§ÊîØÊåÅ‰º†ÁªüÁöÑÂçïÂ≠óÊØçÁöÑ POSIX ÈÄâÈ°πÂ§ñÔºå @command{gawk} ‰πüÊîØÊåÅ GNU ÈïøÊ†ºÂºèÁöÑÈÄâÈ°π„ÄÇ

@cindex dark corner, invoking @command{awk}
@cindex lint checking, empty programs
‰πüÂèØ‰ª•Áî®Á©∫Á®ãÂ∫èÁöÑÊñπÂºèË∞ÉÁî® @command{awk}Ôºö

@example
awk '' datafile1 datafile2
@end example

@cindex @option{--lint} option
@noindent
‰ΩÜÊòØÔºåËøôÊ†∑ÂÅöÂü∫Êú¨Ê≤°‰ªÄ‰πàÁî®„ÄÇÂΩìÁ®ãÂ∫èÂÜÖÂÆπ‰∏∫Á©∫Êó∂Ôºå@command{awk} ‰ºöÂÆâÈùôÂú∞ÈÄÄÂá∫„ÄÇ
@value{DARKCORNER}
Â¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠ËøõË°å‰∫ÜÊåáÂÆö‰∫Ü @option{--lint} ÂèÇÊï∞Ôºå@command{gawk} ‰ºöË≠¶ÂëäËØ¥ÔºåÁ®ãÂ∫è‰∏∫Á©∫„ÄÇ

@node Options
@section ÂëΩ‰ª§Ë°åÂèÇÊï∞
@cindex options, command-line
@cindex command line, options
@cindex GNU long options
@cindex options, long

ÈÄâÈ°π‰ª•Ê®™Êù†ÂºÄÂßãÔºåÂêéÈù¢Êé•‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇGNU È£éÊ†ºÁöÑÈïøÈÄâÈ°πÔºåÂàôÊòØ‰∏§‰∏™Ê®™Êù†ÂêéÈù¢Â∏¶ÂÖ≥ÈîÆÂ≠ó„ÄÇÂÖ≥ÈîÆÂ≠óÂèØ‰ª•ÊòØÁº©ÂÜôÁöÑÔºåÂè™Ë¶ÅÁº©ÂÜô‰ΩøÂæóÈÄâÈ°πÊòØÂèØËØÜÂà´ÁöÑÂîØ‰∏ÄÊ†áËØÜÂç≥ÂèØ„ÄÇÂ¶ÇÊûúÈÄâÈ°πÂ∏¶ÂèÇÊï∞ÔºåË¶Å‰πàÊòØÂÖ≥ÈîÆÂ≠óÂêéÈù¢Áõ¥Êé•Ë∑ü‰∏Ä‰∏™Á≠â‰∫éÂè∑Ôºà@samp{=}ÔºâÂä†‰∏äÂèÇÊï∞ÁöÑÂÄºÔºåË¶Å‰πàÊòØÂÖ≥ÈîÆÂ≠ó‰∏éÂèÇÊï∞ÁöÑÂÄºÈÄöËøáÁ©∫Ê†ºÂàÜÈöî„ÄÇÂ¶ÇÊûúÁâπÂÆöÁöÑÈÄâÈ°πÊúâÂ§ö‰∏™ÂÄºÔºåÈÇ£‰πàÂè™ÊúâÊúÄÂêé‰∏Ä‰∏™ÂÄºÊúâÊïà„ÄÇ

@cindex POSIX @command{awk}, GNU long options and
@command{gawk} ÁöÑÊØè‰∏Ä‰∏™ÈïøÈÄâÈ°πÈÉΩÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑ POSIX È£éÊ†ºÁöÑÁü≠ÈÄâÈ°π„ÄÇÈïøÁü≠ÈÄâÈ°πÂú®ÊâÄÊúâÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÈÉΩÂèØ‰ª•‰∫íÁõ∏ÊõøÊç¢ÁöÑ„ÄÇ‰∏ãÈù¢ÁöÑÂàóË°®ÂàóÂá∫‰∫Ü POSIX Ê†áÂáÜ‰∏≠ËßÑÂÆöÁöÑÈÄâÈ°πÔºö

@table @code
@item -F @var{fs}
@itemx --field-separator @var{fs}
@cindex @option{-F} option
@cindex @option{--field-separator} option
@cindex @code{FS} variable, @code{--field-separator} option and
Set the @code{FS} variable to @var{fs}
ËÆæÁΩÆ @code{FS} ÂèòÈáèÁöÑÂÄº‰∏∫ @var{fs}Ôºà@pxref{Field Separators}Ôºâ„ÄÇ

@item -f @var{source-file}
@itemx --file @var{source-file}
@cindex @option{-f} option
@cindex @option{--file} option
@cindex @command{awk} programs, location of
‰ªé@var{Ê∫êÁ®ãÂ∫èÊñá‰ª∂}‰∏≠ËØªÂèñ @command{awk} Á®ãÂ∫èÔºåËÄå‰∏çÊòØÁ¨¨‰∏Ä‰∏™ÈùûÈÄâÈ°πÁöÑÂèÇÊï∞„ÄÇËøô‰∏™ÈÄâÈ°πÂèØ‰ª•ÊåáÂÆöÂ§öÊ¨°Ôºõ@command{awk} ÁöÑÁ®ãÂ∫èÂèØ‰ª•Áî±ÊØè‰∏Ä‰∏™ÊåáÂÆöÁöÑ@var{Ê∫êÁ®ãÂ∫èÊñá‰ª∂}ËøûÊé•ËÄåÊàê„ÄÇ

@item -v @var{var}=@var{val}
@itemx --assign @var{var}=@var{val}
@cindex @option{-v} option
@cindex @option{--assign} option
@cindex variables, setting
Âú®ÊâßË°åÁ®ãÂ∫è@emph{‰πãÂâç}ÔºåËÆæÁΩÆ@var{ÂèòÈáè}ÂÄº‰∏∫ @var{val}„ÄÇËøô‰∏™ÂèòÈáèÂú® @code{BEGIN} ËßÑÂàô‰∏≠ÂèØÁî®Ôºà@pxref{Other Arguments}Ôºâ„ÄÇ

@option{-v} ÈÄâÈ°πÂè™ÂèØ‰ª•ËÆæÁΩÆ‰∏Ä‰∏™ÂèòÈáèÔºõ‰ΩÜÊòØÂèØ‰ª•‰ΩøÁî®Â§öÊ¨°ÔºåÂ¶ÇÊ≠§Êù•ËÆæÁΩÆÂè¶‰∏Ä‰∏™ÂèòÈáèÁöÑÂÄºÔºö
@samp{awk @w{-v foo=1} @w{-v bar=2} @dots{}} „ÄÇ

@cindex predefined variables, @code{-v} option@comma{} setting with
@cindex variables, predefined @code{-v} option@comma{} setting with
@quotation Ê≥®ÊÑè
‰ΩøÁî® @option{-v} ÈÄâÈ°πËÆæÁΩÆÂÜÖÁΩÆÂèòÈáèÁöÑÂÄºÂèØËÉΩÂØºËá¥‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÁªìÊûú„ÄÇ@command{awk} Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•ÈáçÊñ∞ËÆæÁΩÆËøô‰∫õÂèòÈáèÁöÑÂÄºÔºåËÄåÂøΩÁï•‰Ω†ÊåáÂÆöÁöÑ‰ªª‰ΩïÂàùÂßãÂÄº„ÄÇ
@end quotation

@item -W @var{gawk-opt}
@cindex @option{-W} option
ÈÄâÊã©‰∏Ä‰∏™ÂÆûÁé∞ÊúâÂÖ≥ÁöÑÈÄâÈ°π„ÄÇËøôÊòØ‰∏∫ÁâπÂÆöÂÆûÁé∞ËÄåÊèê‰æõÁöÑ‰∏ÄÁßç POSIX ËΩ¨Êç¢„ÄÇËøô‰∏™ÈÄâÈ°π‰πüÊúâ‰∏Ä‰∏™ GNU È£éÊ†ºÁöÑÈïøÈÄâÈ°π„ÄÇÊ≥®ÊÑèÈïøÈÄâÈ°πÊòØÂèØ‰ª•Áº©ÂÜôÁöÑÔºåÂè™Ë¶Å‰øùËØÅÁº©ÂÜôÊòØÂîØ‰∏ÄÁöÑÂç≥ÂèØ„ÄÇÁâπÂÆö‰∫é @command{gawk} ÁöÑÈÄâÈ°πÁöÑÂÆåÊï¥ÂàóË°®‰∏ãÈù¢‰ºöÂàóÂá∫„ÄÇ

@item --
@cindex command line, options, end of
@cindex options, command-line, end of
ÊåáÁ§∫ÂëΩ‰ª§Ë°åÈÄâÈ°πÁöÑÁªìÊùü„ÄÇÂêéÁª≠ÁöÑÂèÇÊï∞‰∏ç‰ºöË¢´ËØÜÂà´‰∏∫ÈÄâÈ°πÔºåÂç≥‰ΩøÂÆÉ‰ª¨‰ª• @samp{-} ÂºÄÂßã„ÄÇ
ÂØπ‰∫é @option{--} ÁöÑËß£ÈáäÊòØÂèÇÁÖß POSIX ÁöÑÂèÇÊï∞ÂàÜÊûê‰π†ÊÉØ„ÄÇ

@cindex @code{-} (hyphen), filenames beginning with
@cindex hyphen (@code{-}), filenames beginning with
Â¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™@value{FN}‰ª• @samp{-} ÂºÄÂßãÔºåËøô‰∏™ÂèÇÊï∞ÂàôÈùûÂ∏∏ÊúâÁî®ÔºåÊàñËÄÖÂú® Shell ËÑöÊú¨ÈáåÔºå@value{FN}‰ºöÁî±Áî®Êà∑Êù•ÊåáÂÆö„ÄÇÂú®ÊääÂèÇÊï∞‰º†ÈÄíÁªô @command{awk} Á®ãÂ∫è‰∏äÔºåËøô‰∏™ÂèÇÊï∞‰πüÈùûÂ∏∏ÊúâÁî®„ÄÇÊü•Áúã @ref{Getopt Function}„ÄÇ
@end table

‰∏ãÈù¢ÁöÑÈÄâÈ°πÊòØÁâπÂÆö‰∫é @command{gawk} ÁöÑÈÄâÈ°πÔºö

@c Have to use @asis here to get docbook to come out right.
@table @asis
@item @option{-b}
@itemx @option{--characters-as-bytes}
@cindex @option{-b} option
@cindex @option{--characters-as-bytes} option
ÊåáÂÆö @command{gawk} Â∞ÜËæìÂÖ•ÁöÑÊï∞ÊçÆÊåâÁÖßÂçïÂ≠óËäÇÁöÑÊñπÂºèÂØπÂæÖ„ÄÇÂè¶Â§ñÔºåÊâÄÊúâÁöÑÁî± @code{print} ÊàñËÄÖ @code{printf} ÁöÑËæìÂá∫‰πü‰ª•ÂçïÂ≠óËäÇÁöÑÊñπÂºèÂØπÂæÖ„ÄÇ

Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ºöÊåâÁÖß POSIX ÁöÑÊ†áÂáÜÔºåÊåâÁÖßÂΩìÂâçËØ≠Ë®ÄËÆæÁΩÆÊù•Â§ÑÁêÜËæìÂÖ•Êï∞ÊçÆÔºà@pxref{Locales}Ôºâ„ÄÇ
ËøôÂ∏∏Â∏∏ÂØºËá¥Â∞ÜÂ§öÂ≠óËäÇÂ≠óÁ¨¶ËΩ¨Êç¢‰∏∫ÂÆΩÂ≠óÁ¨¶ÔºàÂÜÖÈÉ®Â§ÑÁêÜ‰∫ÜÔºâÔºåÂΩìËæìÂÖ•ÁöÑÊï∞ÊçÆ‰∏çÊòØÊúâÊïàÁöÑÂ§öÂ≠óËäÇÂ≠óÁ¨¶Êó∂ÔºåËøôÂèØËÉΩÂØºËá¥‰∏Ä‰∫õÈóÆÈ¢òÊàñËÄÖÁñëÊÉë„ÄÇËøô‰∏™ÈÄâÈ°πÁÆÄÂçïÂú∞ÂëäËØâ @command{gawk} Ôºå‚ÄúÂà´Á¢∞ÊàëÁöÑÊï∞ÊçÆÔºÅ‚Äù

@item @option{-c}
@itemx @option{--traditional}
@cindex @option{-c} option
@cindex @option{--traditional} option
@cindex compatibility mode (@command{gawk}), specifying
ÊåáÂÆöÂÖºÂÆπÊ®°ÂºèÔºåÂú®ËøôÁßçÊ®°Âºè‰∏ã @command{awk} ÁöÑ GNU Êâ©Â±ï‰ºöË¢´Á¶ÅÁî®ÔºåËøôÊ†∑ @command{gawk} ÁöÑË°®Áé∞Â∞±Ë∑ü BWK @command{awk} ‰∏ÄËá¥„ÄÇ
@ref{POSIX/GNU}ÔºåÂÖ∂‰∏≠Ê±áÊÄª‰∫ÜÊâÄÊúâÁöÑÊâ©Â±ï„ÄÇ
@ifclear FOR_PRINT
‰πüÂèØ‰ª•ÂèÇËÄÉ @ref{Compatibility Mode}„ÄÇ
@end ifclear

@item @option{-C}
@itemx @option{--copyright}
@cindex @option{-C} option
@cindex @option{--copyright} option
@cindex GPL (General Public License), printing
ÊâìÂç∞ÁÆÄÂçïÁâàÊú¨ÁöÑÈÄöÁî®ËÆ∏ÂèØËØÅÂçèËÆÆÔºàGeneral Public LicenseÔºåGPLÔºâÁÑ∂ÂêéÈÄÄÂá∫„ÄÇ

@item @option{-d}[@var{file}]
@itemx @option{--dump-variables}[@code{=}@var{file}]
@cindex @option{-d} option
@cindex @option{--dump-variables} option
@cindex dump all variables of a program
@cindex @file{awkvars.out} file
@cindex files, @file{awkvars.out}
@cindex variables, global, printing list of
ÊâìÂç∞ÁªèËøáÊéíÂ∫èÁöÑÂÖ®Â±ÄÂèòÈáèÔºå‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÁ±ªÂûãÔºå‰ª•ÂèäÊúÄÁªàÂÄºÂà∞ @var{file} ‰∏≠„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõ @var{file} ÂèÇÊï∞ÔºåÂ∞±ÊääËøô‰∏™ÂàóË°®ÊâìÂç∞Âà∞‰∏Ä‰∏™ @file{awkvars.out} ÁöÑÊñá‰ª∂‰∏≠ÔºåÂπ∂ËæìÂá∫Âú®ÂΩìÂâçÁõÆÂΩï„ÄÇÂ¶ÇÊûúÊèê‰æõ‰∫Ü @var{file} ÂèÇÊï∞ÔºåÂú® @option{-d} ÂèÇÊï∞‰∏é @var{file} ‰πãÈó¥‰∏çËÉΩÊúâÁ©∫Ê†º„ÄÇ

@cindex troubleshooting, typographical errors@comma{} global variables
Êü•ÁúãÂÖ®Â±ÄÂèòÈáèÂàóË°®ÔºåÊòØ‰∏ÄÁßçÊü•ÊâæÁ®ãÂ∫è‰∏≠ËæìÂÖ•ÈîôËØØÁöÑ‰∏ÄÁßçÂ•ΩÊñπÊ≥ï„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁ®ãÂ∫èÂæàÂ§ßÔºåËÄåÂáΩÊï∞ÂæàÂ§öÊó∂ÔºåÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÈÄâÈ°πÔºåÊù•Á°ÆÂÆö‰Ω†ÁöÑÂáΩÊï∞ÊòØÂê¶ÊúâËøôÁßçÊÉÖÂÜµÔºåÂç≥Êú¨Êù•‰ΩøÁî®Êú¨Âú∞ÂèòÈáèÂç¥ÈîôËØØÂú∞‰ΩøÁî®‰∫ÜÂÖ®Â±ÄÂèòÈáè„ÄÇÔºàËøô‰∏™Âú®Â∞ÜÂèòÈáèÂêçÂëΩ‰ª§‰∏∫ @code{i}Ôºå@code{j} Á≠âÁ≠âÂêçÂ≠óÁöÑÊÉÖÂÜµ‰∏ãÂ∞§ÂÖ∂ÂÆπÊòìÂá∫Èîô„ÄÇÔºâ

@item @option{-D}[@var{file}]
@itemx @option{--debug}[@code{=}@var{file}]
@cindex @option{-D} option
@cindex @option{--debug} option
@cindex @command{awk} debugging, enabling
ÂêØÁî® @command{awk} Á®ãÂ∫èË∞ÉËØïÔºà@pxref{Debugging}Ôºâ„ÄÇ
ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåË∞ÉËØïÂô®‰ªéÈîÆÁõò‰∏≠‰∫§‰∫íÂºèÂú∞ËØªÂÖ•ÂëΩ‰ª§„ÄÇÂèØÈÄâÂèÇÊï∞ @var{file} ÂèØ‰ª•ËÆ©‰Ω†ÊåáÂÆöÂú®Êñá‰ª∂‰∏≠ÁöÑÂëΩ‰ª§Ë°åÂàóË°®ÔºåËÄå‰∏çÊòØ‰∫§‰∫íÂú∞ËæìÂÖ•„ÄÇ
Â¶ÇÊûú‰Ω†Êèê‰æõ‰∫Ü @var{file} ÂèÇÊï∞ÔºåÂàôÂú® @option{-D} ‰∏é @var{file} ‰πãÈó¥‰∏çËÉΩÊúâÁ©∫Ê†º„ÄÇ

@item @option{-e} @var{program-text}
@itemx @option{--source} @var{program-text}
@cindex @option{-e} option
@cindex @option{--source} option
@cindex source code, mixing
Âú® @var{program-text} ‰∏≠ÊåáÂÆöÊ∫ê‰ª£Á†Å„ÄÇËøô‰∏™ÈÄâÈ°πÂèØ‰ª•ËÆ©‰Ω†Ê∑∑Áî®ÈÄöËøáÊñá‰ª∂‰∏éÈÄöËøáÂëΩ‰ª§Ë°åÊù•Êèê‰æõÊ∫ê‰ª£Á†ÅÁöÑÊñπÂºè„ÄÇËøô‰∏™ÈÄâÈ°πÂú®‰Ω†ÊúâËá™Â∑±ÁöÑÂ∫ìÂáΩÊï∞Ë¶Å‰ΩøÁî®Ôºå‰ΩÜÊòØ‰Ω†ÂèàÈÄöËøáÂëΩ‰ª§Ë°åÊù•ËΩ¨ÂÖ•Á®ãÂ∫èÁöÑÊÉÖÂÜµ‰∏ãÈùûÂ∏∏ÊúâÁî®„ÄÇÔºà@pxref{AWKPATH Variable}Ôºâ„ÄÇ

@item @option{-E} @var{file}
@itemx @option{--exec} @var{file}
@cindex @option{-E} option
@cindex @option{--exec} option
@cindex @command{awk} programs, location of
@cindex CGI, @command{awk} scripts for
‰∏é @option{-f} ÂèÇÊï∞Á±ª‰ººÔºå@command{awk} ‰ªé @var{file} ‰∏≠ËØªÂèñÁ®ãÂ∫è„ÄÇ‰∏é @option{-f} Áõ∏ÊØîÔºåÊúâ‰∏§‰∏™‰∏çÂêåÔºö

@itemize @value{BULLET}
@item
Ëøô‰∏™ÈÄâÈ°π‰ºöÁªìÊùüÈÄâÈ°πÁöÑÂ§ÑÁêÜÔºõ‰ªª‰ΩïÂú®ÂëΩ‰ª§Ë°å‰∏äÂêéÁª≠ÁöÑÂÖ∂‰ªñÂèÇÊï∞ÈÉΩÂ∞ÜÁõ¥Êé•‰º†ÈÄíÁªô @command{awk} Á®ãÂ∫è„ÄÇ

@item
ÂëΩ‰ª§ÂèòÈáèËµãÂÄºÂΩ¢Âºè @samp{@var{var}=@var{value}} ‰πüÂ∞ÜÁ¶ÅÊ≠¢„ÄÇ
@end itemize

Ëøô‰∏™ÈÄâÈ°πÂú®ÂÜô WWW CGI Á®ãÂ∫èÊó∂ÈÄöËøá URL ‰º†ÁªüÂèÇÊï∞Êó∂ÈùûÂ∏∏ÊúâÁî®„ÄÇÈÄöËøáËøô‰∏™ÈÄâÈ°πÂèØ‰ª•Èò≤Ê≠¢‰∏Ä‰∫õÊúâÂÆ≥ÁöÑÔºàÊàñËÄÖÂÖ∂‰ªñÁöÑÔºâÁî®Êà∑Â∞ÜÈÄâÈ°πÔºåËµãÂÄº‰ª•Âèä @command{awk} Ê∫ê‰ª£Á†ÅÔºàÈÄöËøá @option{-e} ÈÄâÈ°πÔºâ‰º†ÈÄíÁªô CGI Â∫îÁî®„ÄÇ
@footnote{Ë¶ÅËé∑ÂèñÊõ¥Â§öÁöÑÁªÜËäÇÔºåËØ∑ÂèÇËÄÉ @uref{http://www.ietf.org/rfc/rfc3875,
RFC 3875} ÁöÑ Section 4.4„ÄÇ
‰πüÂèØ‰ª•Êü•Áúã @uref{http://lists.gnu.org/archive/html/bug-gawk/2014-11/msg00022.html, ÂèëÈÄÅÂà∞ @command{gawk} ÁöÑ bug mailing ÂàóË°®‰∏≠ÁöÑËß£Èáä}„ÄÇ}
Ëøô‰∏™ÈÄâÈ°πÈúÄË¶Å‰∏é @samp{#!} ËÑöÊú¨‰∏ÄËµ∑‰ΩøÁî®Ôºà@pxref{Executable Scripts}ÔºâÔºå‰æãÂ¶ÇËøôÊ†∑Ôºö

@example
#! /usr/local/bin/gawk -E

@var{awk program here @dots{}}
@end example

@item @option{-g}
@itemx @option{--gen-pot}
@cindex @option{-g} option
@cindex @option{--gen-pot} option
@cindex portable object files, generating
@cindex files, portable object, generating
ÂàÜÊûêÊ∫êÁ®ãÂ∫è‰∏≠ÁöÑÂ∑≤ÁªèÂÅö‰∫ÜÁøªËØëÊ†áÂøóÊâÄÊúâÂ≠ó‰∏≤Â∏∏ÈáèÔºåÂπ∂‰∫ßÁîü‰∏Ä‰∏™ GNU @command{gettext} ÂèØÁßªÊ§çÁöÑÂØπË±°Ê®°ÊùøÊñá‰ª∂Âà∞Ê†áÂáÜËæìÂá∫‰∏ä„ÄÇ
@ref{Internationalization}ÔºåÊù•ÂèñÂæóËøô‰∏™ÈÄâÈ°πÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ

@item @option{-h}
@itemx @option{--help}
@cindex @option{-h} option
@cindex @option{--help} option
@cindex GNU long options, printing list of
@cindex options, printing list of
@cindex printing, list of options
ÊâìÂç∞‚Äú‰ΩøÁî®ÊñπÂºè‚Äù‰ø°ÊÅØÔºåÊ±áÊÄª @command{gawk} Êé•Êî∂ÁöÑÈïø„ÄÅÁü≠È£éÊ†ºÁöÑÈÄâÈ°πÁÑ∂ÂêéÈÄÄÂá∫„ÄÇ

@item @option{-i} @var{source-file}
@itemx @option{--include} @var{source-file}
@cindex @option{-i} option
@cindex @option{--include} option
@cindex @command{awk} programs, location of
‰ªé @var{source-file} ËØªÂèñ @command{awk} Ê∫êÂ∫ì„ÄÇËøô‰∏™ÈÄâÈ°π‰∏éÂú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÁöÑ @code{@@include} Á≠âÂêå„ÄÇ
‰πüÈùûÂ∏∏Á±ª‰ºº‰∫é @option{-f} ÈÄâÈ°πÔºå‰ΩÜÊòØÊúâ‰∏§‰∏™ÈáçË¶ÅÁöÑ‰∏çÂêå„ÄÇ
È¶ñÂÖàÔºåÂΩì @option{-i} ÊåáÂÆöÊó∂ÔºåÂ¶ÇÊûúÊ∫êÁ®ãÂ∫è‰πãÂâçÂ∑≤ÁªèË£ÖËΩΩËøá‰∫ÜÔºåÂàô‰∏ç‰ºöÂÜçË¢´Ë£ÖËΩΩÔºåËÄåÂΩì‰ΩøÁî® @option{-f} Êó∂Ôºå@command{gawk} ÊÄªÊòØ‰ºöË£ÖËΩΩÊ∫êÊñá‰ª∂„ÄÇ
Á¨¨‰∫åÔºåÁî±‰∫éËøô‰∏™ÈÄâÈ°πÁõÆÁöÑÊòØÁî®‰∫éÂ∫ìÁ±ªÂûãÁöÑ‰ª£Á†ÅÔºå@command{gawk} ‰∏ç‰ºöÂ∞ÜËøô‰∫õÊñá‰ª∂ËØÜÂà´Êàê‰∏ªÁ®ãÂ∫èÁöÑËøûÁª≠ËæìÂÖ•„ÄÇ
Âõ†Ê≠§ÔºåÂú®Â§ÑÁêÜ‰∫Ü @option{-i} ÂèÇÊï∞ÂêéÔºå@command{gawk} ËøòÊòØÂ∏åÊúõÈÄöËøáÂëΩ‰ª§Ë°åÁöÑ @option{-f} ÂèÇÊï∞Êù•ÂèñÂæó‰∏ªÁ®ãÂ∫èÊ∫ê‰ª£Á†Å„ÄÇ

@item @option{-l} @var{ext}
@itemx @option{--load} @var{ext}
@cindex @option{-l} option
@cindex @option{--load} option
@cindex loading, extensions
ËΩΩÂÖ•‰∏Ä‰∏™Âêç‰∏∫ @var{ext} ÁöÑÂä®ÊÄÅÊâ©Â±ï„ÄÇÊâ©Â±ïÂ≠òÂÇ®‰∏∫Á≥ªÁªüÁöÑÂÖ±‰∫´Âä®ÊÄÅÂ∫ì„ÄÇ
Ëøô‰∏™ÈÄâÈ°π‰ΩøÁî® @env{AWKLIBPATH} ÂèòÈáèÊù•ÊêúÁ¥¢Â∫ì„ÄÇÊ≠£Á°ÆÁöÑÂ∫ìÂêéÁºÄ‰ºöÊ†πÊçÆÁ≥ªÁªüÈªòËÆ§Êèê‰æõÔºåÂõ†Ê≠§‰Ω†‰∏çÈúÄË¶ÅÊåáÂÆöÊâ©Â±ïÂêç„ÄÇ
Êâ©Â±ïÁöÑÂàùÂßãÂåñÂáΩÊï∞‰∏∫ @code{dl_load()}„ÄÇ
Âè¶Â§ñ‰∏Ä‰∏™ÈÄâÈ°πÂ∞±ÊòØÈÄöËøáÂú®Á®ãÂ∫è‰∏≠ÈÄöËøá @code{@@load} ÂÖ≥ÈîÆÂ≠óÊù•Ë£ÖËΩΩÂÖ±‰∫´Â∫ì„ÄÇ
Ëøô‰∏™È´òÁ∫ßÁâπÊÄßÁöÑËØ¶ÁªÜËØ¥ÊòéÂú® @ref{Dynamic Extensions}„ÄÇ

@item @option{-L}[@var{value}]
@itemx @option{--lint}[@code{=}@var{value}]
@cindex @option{-l} option
@cindex @option{--lint} option
@cindex lint checking, issuing warnings
@cindex warnings, issuing
ÂØπ‰∫éÂèØÁñëÁöÑÊàñËÄÖ‰∏çÂèØÁßªÊ§çÂà∞ÂÖ∂‰ªñ @command{awk} ÂÆûÁé∞ÁöÑÁªìÊûúÊèêÂá∫ÂëäË≠¶„ÄÇ
Â¶ÇÊûúÊèê‰æõ‰∫Ü @var{value}ÔºåÂàô @option{-L} ÂèÇÊï∞‰∏é @var{value} ‰πãÈó¥‰∏çÂèØ‰ª•ÊúâÁ©∫Ê†º„ÄÇ
‰∏Ä‰∫õË≠¶Âëä‰ºöÂú®Á¨¨‰∏ÄÊ¨°ËØªÂÖ•Á®ãÂ∫èÊó∂Â∞±‰ºöÁªôÂá∫„ÄÇËÄåÂÖ∂‰ªñÁöÑ‰∏Ä‰∫õ‰ºöÂú®ËøêË°åÊó∂ÁªôÂá∫„ÄÇÂΩìÂèØÈÄâÂèÇÊï∞ÁöÑÂÄºÊòØ @samp{fatal}Ôºålint Ë≠¶ÂëäÂ∞±Êàê‰∫ÜËá¥ÂëΩÈîôËØØ„ÄÇ
ËøôÂèØËÉΩÊúâÁÇπÂ§∏Âº†Ôºå‰ΩÜÊòØËøôÁ°ÆÂÆûËÉΩÂ§üÂà∫ÊøÄÂºÄÂèëËÄÖÂºÄÂèëÂá∫Êõ¥Âä†‚ÄúÂπ≤ÂáÄ‚ÄùÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ
Â¶ÇÊûúÂèØÈÄâÂèÇÊï∞ÁöÑÂÄº‰∏∫ @samp{invalid}ÔºåÂàôÂè™ÊúâÂú®Á°ÆÂÆûÊòØÊó†ÊïàÁöÑÊÉÖÂÜµ‰∏ãÊâç‰ºöÂèëÂá∫ÂëäË≠¶„ÄÇÔºàËøô‰∏™ËøòÊ≤°ÊúâÂÆåÂÖ®ÂÆûÁé∞Ôºâ

Êúâ‰∫õÂëäË≠¶Âè™ÊâìÂç∞‰∏ÄÊ¨°ÔºåÂ∞±ÁÆóËøôÊ†∑ÁöÑÂèØÁñëÁªìÊûúÂú®‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è‰∏≠Âá∫Áé∞Â§öÊ¨°„ÄÇ
Âõ†Ê≠§ÔºåÂΩìÂéªÈô§‰∫ÜÁî± @option{--lint} ÊâÄÊä•ÂëäÁöÑÈóÆÈ¢òÊó∂Ôºå‰Ω†Â∫îËØ•Ë¶Å‰ªîÁªÜÊ£ÄÊü•‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÊâÄÊúâ‰∏çÊÅ∞ÂΩìÁöÑÁªìÊûÑ„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁ®ãÂ∫è‰∏çÈïøÔºåÂÅöËøô‰∏™Â∑•‰Ωú‰πü‰∏ç‰ºöÊàê‰∏∫‰ªÄ‰πàË¥üÊãÖ„ÄÇ

@item @option{-M}
@itemx @option{--bignum}
@cindex @option{-M} option
@cindex @option{--bignum} option
Âº∫Âà∂ÂØπ‰∫éÊï∞ÊçÆËÆ°ÁÆó‰ΩøÁî®‰ªªÊÑèÁ≤æÂ∫¶„ÄÇËøô‰∏™ÈÄâÈ°πÂ¶ÇÊûúÂú® @command{gawk} ÁºñËØëÊó∂Ê≤°Êúâ‰ΩøÁî® GNU MPFR ‰ª•Âèä MP Â∫ìÊó∂Ôºå‰∏ç‰ºöËµ∑‰ΩúÁî®„ÄÇÔºàÊü•Áúã @ref{Arbitrary Precision Arithmetic}Ôºâ
@item @option{-n}
@itemx @option{--non-decimal-data}
@cindex @option{-n} option
@cindex @option{--non-decimal-data} option
@cindex hexadecimal values@comma{} enabling interpretation of
@cindex octal values@comma{} enabling interpretation of
@cindex troubleshooting, @code{--non-decimal-data} option
ÂêØÁî®Ëá™Âä®ÁöÑÂØπËæìÂÖ•Êï∞ÊçÆÁöÑÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂ÂÄºÁöÑËá™Âä®Ëß£ÈáäÔºàÊü•Áúã @ref{Nondecimal Data}Ôºâ„ÄÇ

@quotation Ê≥®ÊÑè
Ëøô‰∏™ÈÄâÈ°πÊúâÂèØËÉΩ‰∏•ÈáçÁ†¥ÂùèÊóßÁöÑÁ®ãÂ∫èÔºåÂõ†Ê≠§Ë¶ÅÂ∞èÂøÉ‰ΩøÁî®„ÄÇÂêåÊó∂‰πüÊèêÁ§∫ÔºåËøô‰∏™ÂèÇÊï∞ÂèØËÉΩÂú® @command{gawk} ÁöÑÂêéÈù¢ÁöÑÁâàÊú¨‰ºöË¢´ÂèñÊ∂à„ÄÇ
@end quotation

@item @option{-N}
@itemx @option{--use-lc-numeric}
@cindex @option{-N} option
@cindex @option{--use-lc-numeric} option
ÂΩìÂàÜÊûêÊï∞ÂÄºËæìÂÖ•Êï∞ÊçÆÊó∂ÔºåÂº∫Âà∂‰ΩøÁî®ÂΩìÂâçÁöÑËØ≠Ë®ÄËÆæÁΩÆÔºàcurrent localeÔºâÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÂ≠óÁ¨¶„ÄÇÔºàÊü•Áúã @ref{Locales}Ôºâ

@item @option{-o}[@var{file}]
@itemx @option{--pretty-print}[@code{=}@var{file}]
@cindex @option{-o} option
@cindex @option{--pretty-print} option
ÂêØÁî® @command{awk} Á®ãÂ∫èÁöÑÁÆÄÂçïÊâìÂç∞„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËæìÂá∫Á®ãÂ∫èË¢´ÂàõÂª∫Âú®‰∏Ä‰∏™Êñá‰ª∂Âêç‰∏∫ @file{awkprof.out} Êñá‰ª∂‰∏≠ÔºàÊü•Áúã @ref{Profiling}Ôºâ„ÄÇ
ÂèØÈÄâÂèÇÊï∞ @var{file} ÂèØ‰ª•ËÆ©‰Ω†ÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™‰∏çÂêåÁöÑ@value{FN}Áî®‰∫éËæìÂá∫„ÄÇÂ¶ÇÊûú‰Ω†Êèê‰æõ‰∫Ü @var{file} ÂèÇÊï∞ÔºåÂàô @option{-o} ÈÄâÈ°π‰∏é @var{file} ‰πãÈó¥‰∏çËÉΩÊúâÁ©∫Ê†º„ÄÇ

@quotation ÊèêÁ§∫
Áî±‰∫é @command{gawk} ÊºîÂåñÁöÑÊñπÂºèÔºåÊúâËøô‰∏™ÂèÇÊï∞Êó∂Ôºå‰Ω†ÁöÑÁ®ãÂ∫è‰æùÁÑ∂‰ºöÊâßË°å„ÄÇËøô‰∏™‰ºöÂú®‰∏ã‰∏Ä‰∏™‰∏ªË¶ÅÁâàÊú¨ÂèëÁîüÂèòÂåñÔºåÂõ†Ê≠§ @command{gawk} ‰ªÖÁÆÄÂåñÊâìÂç∞Á®ãÂ∫èÔºåËÄå‰∏çÊòØÊâßË°åÂÆÉ„ÄÇ
@end quotation

@item @option{-O}
@itemx @option{--optimize}
@cindex @option{--optimize} option
@cindex @option{-O} option
ÂêØÁî®Êüê‰∫õÁ®ãÂ∫èÂÜÖÈÉ®Ë°®ËææÂºèÁöÑ‰ºòÂåñ„ÄÇÂú®Ê≠§Êó∂ÔºåËøô‰∏™‰ªÖ‰ªÖÂåÖÊã¨‰∏Ä‰∫õÁÆÄÂçïÁöÑÂ∏∏ÈáèÊäòÂè†„ÄÇ 

@item @option{-p}[@var{file}]
@itemx @option{--profile}[@code{=}@var{file}]
@cindex @option{-p} option
@cindex @option{--profile} option
@cindex @command{awk} profiling, enabling
ÂêØÁî® @command{awk} Á®ãÂ∫èÈááÊ†∑ÂàÜÊûêÔºàÊü•Áúã @ref{Profiling}Ôºâ„ÄÇ
ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÈááÊ†∑ÂàÜÊûê‰ºöÁîüÊàêÊñá‰ª∂Âêç‰∏∫ @file{awkprof.out}„ÄÇ
ÂèØÈÄâÂèÇÊï∞ @var{file} ÂèØ‰ª•ËÆ©‰Ω†ÊåáÂÆö‰∏Ä‰∏™‰∏çÂêåÁöÑ@value{FN}„ÄÇÂ¶ÇÊûú‰Ω†ÊåáÂÆö‰∫Ü @var{file} ÂèÇÊï∞ÔºåÂàôÂú® @option{-p} ÈÄâÈ°π‰∏é @var{file} ÂèÇÊï∞‰πãÈó¥‰∏çËÉΩÊúâÁ©∫Ê†º„ÄÇ
ÈááÊ†∑ÂàÜÊûêÁªìÊûú‰∏≠Âú®Â∑¶ËæπÂåÖÊã¨Á®ãÂ∫è‰∏≠ÁöÑÊØèÊù°ËØ≠Âè•ÁöÑÊâßË°åÊ¨°Êï∞Ôºå‰ª•ÂèäÊØè‰∏™ÂáΩÊï∞ÁöÑÂáΩÊï∞Ë∞ÉÁî®Ê¨°Êï∞„ÄÇ

@item @option{-P}
@itemx @option{--posix}
@cindex @option{-P} option
@cindex @option{--posix} option
@cindex POSIX mode
@cindex @command{gawk}, extensions@comma{} disabling
‰∏•Ê†ºÊåâ POSIX Ê®°ÂºèÊù•„ÄÇËøô‰∏™Á¶ÅÁî®ÊâÄÊúâÁöÑ @command{gawk} Êâ©Â±ïÔºàÂ∞±ÂÉè @option{--traditional} ‰∏ÄÊ†∑ÔºâÔºåÂπ∂Á¶ÅÁî®ÊâÄÊúâ‰∏çÂ±û‰∫é POSIX ÁöÑÊâ©Â±ïÔºå

@itemize @value{BULLET}

@cindex newlines
@cindex whitespace, newlines as
@item
ÂΩì @code{FS} Á≠â‰∫éÂçï‰∏™Á©∫Ê†ºÊó∂ÔºåÊñ∞Ë°å‰∏ç‰ºöÂÉèÁ©∫Ê†º‰∏ÄÊ†∑Áî®Êù•ËøõË°åÂüüÂàÜÈöîÔºàÊü•Áúã @ref{Fields}Ôºâ„ÄÇ

@item
Âú® @samp{?} ÊàñËÄÖ @samp{:} Âêé‰∏çËÉΩÊñ≠Ë°åÔºàÊü•Áúã @ref{Conditional Exp}Ôºâ„ÄÇ


@cindex @code{FS} variable, as TAB character
@item
ÊåáÂÆö @samp{-Ft} Êó∂Ôºå‰∏çËÉΩÂ∞Ü @code{FS} ÁöÑÂÄºËÆæÁΩÆ‰∏∫Âçï‰∏ÄÁöÑ TAB Â≠óÁ¨¶ÔºàÊü•Áúã @ref{Field Separators}Ôºâ„ÄÇ

@cindex locale decimal point character
@cindex decimal point character, locale specific
@item
ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÂ≠óÁ¨¶Áî®Êù•ÂàÜÊûêËæìÂÖ•Êï∞ÊçÆÔºàÊü•Áúã @ref{Locales}Ôºâ„ÄÇ
@end itemize

@c @cindex automatic warnings
@c @cindex warnings, automatic
@cindex @option{--traditional} option, @code{--posix} option and
@cindex @option{--posix} option, @code{--traditional} option and
Â¶ÇÊûú‰Ω†Âç≥Êèê‰æõ‰∫Ü @option{--traditional} ‰∏é @option{--posix} ÂèÇÊï∞Âú®ÂëΩ‰ª§Ë°å‰∏≠Ôºå@option{--posix} ‰ºö‰ºòÂÖàÊâßË°å„ÄÇ@command{gawk} Âàô‰ºöËæìÂá∫‰∏Ä‰∏™Ë≠¶Âëä„ÄÇ

@item @option{-r}
@itemx @option{--re-interval}
@cindex @option{-r} option
@cindex @option{--re-interval} option
@cindex regular expressions, interval expressions and
Âú® regexps ‰∏≠ÂÖÅËÆ∏Âå∫Èó¥Ë°®ËææÂºèÔºàÊü•Áúã @ref{Regexp Operators}Ôºâ„ÄÇÁé∞Âú®Ëøô‰∏™ÊòØ @command{gawk} ÁöÑÈªòËÆ§Ë°å‰∏∫„ÄÇËøô‰∏™ÂèÇÊï∞‰øùÁïô‰∏ãÊù•ÔºåÂç≥‰∏∫‰∫ÜË∫´ÂêéÁöÑÂÖºÂÆπÊÄßÔºå‰πü‰∏∫‰∫Ü‰∏é @option{--traditional} ÁªÑÂêà‰ΩøÁî®„ÄÇ

@item @option{-S}
@itemx @option{--sandbox}
@cindex @option{-S} option
@cindex @option{--sandbox} option
@cindex sandbox mode
Á¶ÅÁî® @code{system()} ÂáΩÊï∞ÔºåÁî® @code{getline} ËøõË°åËæìÂÖ•ÈáçÂÆöÂêëÔºåÁî® @code{print}Ôºå@code{printf} ‰ª•ÂèäÂä®ÊÄÅÊâ©Â±ïÊù•ËøõË°åËæìÂá∫ÈáçÂÆöÂêë„ÄÇ
ÂΩì‰Ω†Ë¶ÅÊâßË°åÊù•Ê∫êÊúâÊúâÁñëÈóÆÁöÑ @command{awk} Ê∫ê‰ª£Á†ÅÊó∂Ôºå‰∏∫‰∫ÜÁ°Æ‰øùËÑöÊú¨‰∏ç‰ºöËÆøÈóÆ‰Ω†ÁöÑÁ≥ªÁªüÔºàËÄå‰∏çÊòØÈÄöËøáÊåáÂÆöËæìÂÖ•@value{DF}ÔºâÔºåËøô‰∏™ÂèÇÊï∞Â∞§ÂÖ∂ÊúâÁî®„ÄÇ

@item @option{-t}
@itemx @option{--lint-old}
@cindex @option{-L} option
@cindex @option{--lint-old} option
ÂΩìÁõ∏Â∫îÁöÑÁªìÊûÑÂú® Version 7 Unix Ëµ∑ÂàùÂßãÁöÑ @command{awk} ÁâàÊú¨‰∏≠‰∏çÂèØÁî®Êó∂ÔºåÂèëÂá∫ÂëäË≠¶ÔºàÊü•Áúã @ref{V7/SVR3.1}Ôºâ„ÄÇ

@item @option{-V}
@itemx @option{--version}
@cindex @option{-V} option
@cindex @option{--version} option
@cindex @command{gawk}, versions of, information about@comma{} printing
ÊâìÂç∞Ëøô‰∏™ @command{gawk} ÁöÑÁâàÊú¨‰ø°ÊÅØ„ÄÇËøô‰∏™ÂèØ‰ª•ËÆ©‰Ω†Á°ÆÂÆö‰Ω†ÁöÑ @command{gawk} ÁâàÊú¨ÊòØ‰∏çÊòØ‰∏é Free Software Foundation ÂèëÂ∏ÉÁöÑÊúÄÊñ∞ÁâàÊú¨ÂåπÈÖç„ÄÇ
Âú® Bug Êä•Âëä‰∏≠‰πüÈùûÂ∏∏ÊúâÁî®ÔºàÊü•Áúã @ref{Bugs}Ôºâ„ÄÇ
@end table

Âè™Ë¶ÅÊèê‰æõ‰∫ÜÁ®ãÂ∫èÊñáÊú¨ÔºåÂ¶ÇÊûúÊúâÈÄâÈ°πÁî±‰∫éË≠¶ÂëäËÄåË¢´Ê†áÂøó‰∏∫Êó†ÊïàÔºåÂøΩÁï•ÂÆÉÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ

@cindex @option{-F} option, @option{-Ft} sets @code{FS} to TAB
Âú®ÂÖºÂÆπÊ®°ÂºèÈáåÔºåÊúâ‰∏™ÁâπÊÆäÁöÑÂú∞ÊñπÔºåÂ¶ÇÊûúÊûú @var{fs} ÁöÑÂÄºÈÄöËøá @option{-F} ÂèÇÊï∞ËÆæÁΩÆ‰∏∫ @samp{t} ÔºåÈÇ£‰πà @code{FS} Â∞±‰ºöË¢´ËÆæÁΩÆÊàê TAB Â≠óÁ¨¶Ôºà@code{"\t"}Ôºâ„ÄÇ
ËøôÁßçÊÉÖÂÜµÂè™ÊúâÂú®‰ΩøÁî® @option{--traditional} Êó∂Êâç‰ºö‰∏∫ÁúüÔºåËÄå‰∏çÊòØ @option{--posix}ÔºàÊü•Áúã @ref{Field Separators}Ôºâ„ÄÇ

@cindex @option{-f} option, multiple uses
@option{-f} ÂèÇÊï∞ÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏≠‰ΩøÁî®Â§öÊ¨°„ÄÇ
@command{awk} Â∞Ü‰ªéÂ§ö‰∏™Êñá‰ª∂‰∏≠ËØªÂèñÁ®ãÂ∫èÔºåÂ∞±Â•ΩÂÉèËøô‰∫õÊñá‰ª∂Â∑≤ÁªèÂêàÂπ∂Êàê‰∫Ü‰∏Ä‰∏™Â§ßÁöÑÊñá‰ª∂„ÄÇËøôÁßçÊñπÂºèÂú®ÂàõÂª∫ @command{awk} ÂáΩÊï∞Â∫ìÊó∂ÈùûÂ∏∏ÊúâÁî®„ÄÇËøô‰∫õÂáΩÊï∞Âè™ÈúÄË¶ÅÂÜô‰∏ÄÊ¨°ÔºåÁÑ∂Âêé‰ªéÊüê‰∏™Ê†áÂáÜÁöÑ‰ΩçÁΩÆÂèñÁî®ÔºåËÄå‰∏çÊòØÂú®ÊØè‰∏™ÂçïÁã¨ÁöÑÊñá‰ª∂‰∏≠ÂåÖÂê´„ÄÇ@option{-i} ÂèÇÊï∞Âú®Ëøô‰∏™ÊñπÈù¢ÁöÑËÄÉËôë‰πüÁ±ª‰ºº„ÄÇÔºàÊ≠£Â¶Ç @ref{Definition Syntax}Ôºå‰∏≠ÊâÄÊèêÂà∞ÁöÑÔºåËøô‰∫õÂáΩÊï∞ÂêçÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇÔºâ

Ê†áÂáÜÁöÑ @command{awk} ‰∏≠ÔºåÂ∞±ÁÆóÁ®ãÂ∫èÊòØÈÄöËøáÈîÆÁõòËæìÂÖ•ÁöÑÔºåÈÄöËøá @samp{-f /dev/tty} ÂÆåÊàêÔºåÂ∫ìÂáΩÊï∞‰πüËøòÊòØÂèØ‰ª•‰ΩøÁî®ÁöÑ„ÄÇ
ËæìÂÖ•Á®ãÂ∫èÂêéÔºåÈîÆÂÖ• @kbd{Ctrl-d}ÔºàÊñá‰ª∂ÁªìÊùüÁ¨¶ÔºâÊù•ÁªìÊùü„ÄÇÔºà‰Ω†‰πüÂèØ‰ª•‰ΩøÁî® @samp{-f -} Êù•‰ªéÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñÁ®ãÂ∫èÊ∫ê‰ª£Á†ÅÔºåÂè™ÊòØËøô‰∏™Êó∂ÂÄôÔºå‰Ω†Â∞±‰∏çËÉΩÂêåÊó∂‰ΩøÁî®Ê†áÂáÜËæìÂÖ•‰Ωú‰∏∫Êï∞ÊçÆÁöÑËæìÂÖ•Ê∫ê„ÄÇÔºâ

Áî±‰∫éÊ†áÂáÜ @command{awk} ‰∏≠Ê∑∑Áî®Ê∫êÊñá‰ª∂‰∏éÂëΩ‰ª§Ë°å @command{awk} Á®ãÂ∫èÔºåÊòæÂæóÊúâ‰∏Ä‰∫õÁ¨®ÊãôÔºåÊâÄ‰ª• @command{gawk} Êèê‰æõ‰∫Ü‰∏Ä‰∏™ @option{-e} ÈÄâÈ°π„ÄÇ
ËøôÂπ∂‰∏çÈúÄË¶Å‰Ω†Êä¢Âç†Ê†áÂáÜËæìÂÖ•Êù•ËæìÂÖ•Ê∫ê‰ª£Á†ÅÔºåËÄåÊòØËÆ©‰Ω†ÂæàÂÆπÊòìÂú∞Ê∑∑Âêà‰ΩøÁî®ÂëΩ‰ª§Ë°å‰∏éÂ∫ìÊ∫ê‰ª£Á†ÅÔºàÊü•Áúã @ref{AWKPATH Variable}Ôºâ„ÄÇ
‰∏é @option{-f} ‰∏ÄÊ†∑Ôºå@option{-e} ‰∏é @option{-i} ÈÄâÈ°π‰πüÂèØ‰ª•Âú®ÂëΩ‰ª§‰∏≠Â§öÊ¨°‰ΩøÁî®„ÄÇ

@cindex @option{-e} option
Â¶ÇÊûúÊ≤°Êúâ @option{-f} ÊàñËÄÖ @option{-e} ÈÄâÈ°πÊåáÂÆöÔºå@command{gawk} ‰ºö‰ΩøÁî®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÈùûÈÄâÈ°πÂèÇÊï∞‰Ωú‰∏∫Á®ãÂ∫èÁöÑÊ∫ê‰ª£Á†Å„ÄÇ

@cindex @env{POSIXLY_CORRECT} environment variable
@cindex lint checking, @env{POSIXLY_CORRECT} environment variable
@cindex POSIX mode
Â¶ÇÊûúÁéØÂ¢ÉÂèòÈáè @env{POSIXLY_CORRECT} Â≠òÂú®Ôºå@command{gawk} Â∞±‰ºö‰∏•Ê†ºÂú∞ÊåâÁÖß POSIX Ê®°ÂºèÊâßË°åÔºåÂ∞±Â¶Ç‰Ω†Êèê‰æõ‰∫Ü @option{--posix} ÂèÇÊï∞‰∏ÄÊ†∑„ÄÇ
ËÆ∏Â§öÁöÑ GNU Á®ãÂ∫èÈÉΩÊü•ÊâæËøô‰∏™ÁéØÂ¢ÉÂèòÈáèÊù•Á¶ÅÁî®‰∏é POSIX Ê†áÂáÜÊúâÂÜ≤Á™ÅÁöÑÊâ©Â±ïÔºå‰ΩÜÊòØ @command{gawk} ÁöÑË°å‰∏∫Êúâ‰∏Ä‰∫õ‰∏çÂêåÔºö
Â∞±ÁÆóÊüê‰∏™ÁâπÊÄß‰∏é POSIX Ê≤°ÊúâÂÜ≤Á™ÅÔºåÂÆÉ‰πüÁ¶ÅÁî®ÊâÄÊúâÁöÑÊâ©Â±ïÔºåÁÑ∂ÂêéÊåâÁÖß‰∏•Ê†ºÁöÑ POSIX Ê†áÂáÜÊ®°ÂºèÊâßË°å„ÄÇ
Â¶ÇÊûúÊåáÂÆö‰∫Ü @option{--lint} ÈÄâÈ°πÔºå@command{gawk} ‰ºöÂõ†‰∏∫ @env{POSIXLY_CORRECT} ËÄåÂºÄÂêØ POSIX Ê®°ÂºèÔºåÁÑ∂Âêé‰ºöËæìÂá∫Ë≠¶Âëä‰ø°ÊÅØÔºåËØ¥ POSIX Ê®°ÂºèÂ∑≤ÁªèÂêØÁî®„ÄÇ
‰∏ÄËà¨Êù•ËØ¥Ôºå‰Ω†ÂèØËÉΩ‰ºöÂú®‰Ω†ÁöÑ Shell ÁöÑÂêØÂä®ËÑöÊú¨‰∏≠ËÆæÁΩÆËøô‰∏™ÂèòÈáè„ÄÇ
ÂØπ‰∫é‰∏é Bourne Shell ÂÖºÂÆπÁöÑ Shell Êù•ËØ¥ÔºàÂ¶Ç BashÔºâÔºå‰Ω†ÂèØ‰ª•Â∞Ü‰∏ãÈù¢ÁöÑË°åÂä†ÂÖ•Âà∞Áî®Êà∑‰∏ªÁõÆÂΩïÁöÑ @file{.profile} Êñá‰ª∂‰∏≠Ôºö

@example
POSIXLY_CORRECT=true
export POSIXLY_CORRECT
@end example

@cindex @command{csh} utility, @env{POSIXLY_CORRECT} environment variable
ÂØπ‰∫é‰∏é C shell ÂÖºÂÆπÁöÑ shellÔºå@footnote{‰∏çÂª∫ËÆÆËøô‰πàÂÅö„ÄÇ}‰Ω†ÂèØ‰ª•Â∞Ü‰∏ãÈù¢ÁöÑË°åÂä†ÂÖ•Âà∞Áî®Êà∑‰∏ªÁõÆÂΩïÁöÑ @file{.login} Êñá‰ª∂‰∏≠Ôºö

@example
setenv POSIXLY_CORRECT true
@end example

@cindex portability, @env{POSIXLY_CORRECT} environment variable
ÂØπ‰∫éÊØèÊó•ÁöÑÂ∑•‰ΩúÁéØÂ¢ÉÔºåËÆæÁΩÆ @env{POSIXLY_CORRECT} ÂèòÈáèÂπ∂‰∏çÂÄºÂæóÂª∫ËÆÆÔºå‰ΩÜÊòØÂØπ‰∫éÊµãËØï‰Ω†ÁöÑÁ®ãÂ∫èÂú®ÂÖ∂‰ªñÁéØÂ¢É‰∏≠ÁöÑÂèØÁßªÊ§çÊÄßÂàôÊúâÁõ∏ÂΩì‰ΩúÁî®„ÄÇ

@node Other Arguments
@section ÂÖ∂‰ªñÂëΩ‰ª§Ë°åÂèÇÊï∞
@cindex command line, arguments
@cindex arguments, command-line

ÂØπ‰∫éÂëΩ‰ª§Ë°å‰∏≠ÁöÑÈ¢ùÂ§ñÂèÇÊï∞Ôºå‰∏ÄËà¨ÈÉΩ‰ºöË¢´ÂΩì‰ΩúËæìÂÖ•Êñá‰ª∂Êù•ÂØπÂæÖÔºåÂπ∂‰æùÊ¨°Â§ÑÁêÜ„ÄÇ
‰ΩÜÊòØÂÖ∑Êúâ @code{@var{var}=@var{value}}ÔºàÂ∞Ü @var{value} ËµãÂÄºÁªôÂèòÈáè @var{var}ÔºâÂΩ¢ÂºèÁöÑÂèÇÊï∞ÔºåÂç¥Âπ∂‰∏ç‰Ωú‰∏∫‰∏Ä‰∏™ËæìÂÖ•Êñá‰ª∂ÊåáÂÆö„ÄÇ
ÔºàÊü•Áúã @ref{Assignment Options}„ÄÇÔºâ
Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå@var{count=1} ÊòØ‰∏Ä‰∏™ÂèòÈáèËµãÂÄºÔºåËÄå‰∏çÊòØ@value{FN}Ôºö

@example
awk -f program.awk file1 count=1 file2
@end example

@cindex @command{gawk}, @code{ARGIND} variable in
@cindex @code{ARGIND} variable, command-line arguments
@cindex @code{ARGV} array, indexing into
@cindex @code{ARGC}/@code{ARGV} variables, command-line arguments
ÊâÄÊúâÂëΩ‰ª§Ë°åÂèÇÊï∞ÈÉΩÂèØ‰ª•ÈÄöËøá @code{ARGV} Êï∞ÁªÑË¢´ @command{awk} Á®ãÂ∫èÂæóÂà∞ÔºàÊü•Áúã @ref{Built-in Variables}Ôºâ„ÄÇ
ÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏éÁ®ãÂ∫èÊñáÊú¨ÔºàÂ¶ÇÊûúÊúâÔºâÈÉΩÂú® @code{ARGV} ‰∏≠ÂøΩÁï•Êéâ‰∫Ü„ÄÇÂÖ∂‰ªñÁöÑÂèÇÊï∞ÔºåÂåÖÊã¨ÂèòÈáèËµãÂÄºÔºåÈÉΩÂåÖÂê´Âú®‰∫ÜËøô‰∏™Êï∞ÁªÑ‰∏≠„ÄÇÈöèÁùÄÂØπ @code{ARGV} ÂèÇÊï∞ÁöÑÂ§ÑÁêÜÔºå
@command{gawk} ‰ºöËÆæÁΩÆ @code{ARGIND} ÁöÑÂÄº‰∏∫ @code{ARGV} Êï∞ÁªÑÁöÑÁ¥¢ÂºïÔºå‰ª•ËÆ∞ÂΩïÂΩìÂâçÁöÑÂÖÉÁ¥†‰ΩçÁΩÆ„ÄÇ

@c FIXME: One day, move the ARGC and ARGV node closer to here.
ÈÄöËøáÊõ¥Êîπ @code{ARGC} ‰∏é @code{ARGV} ÁöÑÂÄºÔºå‰Ω†ÂèØ‰ª•ÊéßÂà∂ @command{awk} Â§ÑÁêÜËæìÂÖ•Êñá‰ª∂ÁöÑÊñπÂºèÔºõËøô‰∏™ÂÜÖÂÆπÂú® @ref{ARGC and ARGV}Ôºå‰ºöÊúâÊõ¥ËØ¶ÁªÜÁöÑÊèèËø∞„ÄÇ

@cindex input files, variable assignments and
@cindex variable assignments and input files
ÂØπÊñá‰ª∂ÂêçÂèÇÊï∞‰∏éËµãÂÄºÂèòÈáèÂèÇÊï∞ÁöÑÂå∫ÂàÜÊòØÂú® @command{awk} Âú®ÂáÜÂ§áÊâìÂºÄ‰∏ã‰∏Ä‰∏™ËæìÂÖ•Êñá‰ª∂Êó∂Â§ÑÁêÜÁöÑ„ÄÇ
Âú®ÈÇ£‰∏™ÊâßË°åÁÇπÔºå@command{awk} ‰ºöÊ£ÄÊü•@value{FN}ÔºåÁúãÂÆÉÊòØ‰∏Ä‰∏™Êñá‰ª∂ËøòÊòØ‰∏Ä‰∏™ÂèòÈáèËµãÂÄºÔºõÂ¶ÇÊûúÊòØÔºå@command{awk} ‰ºöËÆæÁΩÆÈÇ£‰∏™ÂèòÈáèËÄå‰∏çÊòØÊâìÂºÄÊñá‰ª∂ËøõË°åËØªÊìç‰Ωú„ÄÇ

Âõ†Ê≠§ÔºåÂú®Â§ÑÁêÜÂÆåÊâÄÊúâ‰πãÂâçÁöÑÊñá‰ª∂ÂêéÔºåÂèòÈáèÂ∞±‰ºöË¢´ËÆæÁΩÆÊàêÁõ∏Â∫îÁöÑÂÄº„ÄÇ
ÁâπÂà´ÁöÑÔºå‰ª•ËøôÁßçÊñπÂºèÂØπÂèòÈáèËøõË°åÁöÑËµãÂÄºÔºåÂú® @code{BEGIN} ËßÑÂàôÔºàÊü•Áúã @ref{BEGIN/END}Ôºâ‰∏≠ÊòØ@emph{‰∏çÂèØ}ËÆøÈóÆÂà∞ÁöÑÔºå
Âõ†‰∏∫Ëøô‰∏™ËßÑÂàôÂú® @command{awk} ÂºÄÂßãÊâ´ÊèèÂèÇÊï∞ÂàóË°®‰πãÂâçÂ∞±Â∑≤ÁªèÊâßË°å‰∫Ü„ÄÇ

@cindex dark corner, escape sequences
Âú®ÂëΩ‰ª§Ë°å‰∏äÊâÄÁªôÁöÑËµãÂÄºÂèòÈáè‰ºöÊåâÁÖßËΩ¨‰πâÁöÑÊñπÂºèËøõË°åÂ§ÑÁêÜÔºàÊü•Áúã @ref{Escape Sequences}Ôºâ„ÄÇ
@value{DARKCORNER}

Âú®‰∏Ä‰∫õÈùûÂ∏∏Êó©ÊúüÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÂΩìÂèòÈáèËµãÂÄºÂèÇÊï∞Âá∫Áé∞Âú®‰ªª‰Ωï@value{FN}‰πãÂâçÔºå
ÂàôËµãÂÄºÊìç‰Ωú‰ºöÂèëÁîüÂú® @code{BEGIN} ËßÑÂàôÊâßË°å@emph{‰πãÂâç}„ÄÇ
@command{awk} ÁöÑË°å‰∏∫Âõ†Ê≠§Â∞±‰∏ç‰∏ÄËá¥‰∫ÜÔºõ‰∏Ä‰∫õÂëΩ‰ª§Ë°åËµãÂÄº‰ºöÂú® @code{BEGIN} ËßÑÂàô‰∏≠Â∞±ÂèØ‰ª•‰ΩøÁî®ÔºåËÄåÂÖ∂‰ªñÁöÑÂàô‰∏çÂèØ‰ª•„ÄÇ
ÈùûÂ∏∏‰∏çÂπ∏ÁöÑÊòØÔºå‰∏Ä‰∫õÂ∫îÁî®Á®ãÂ∫èÂç¥‰æùËµñ‰∫éËøôÊ†∑ÁöÑ‚ÄúÁâπÊÄß‚Äù„ÄÇÂΩì @command{awk} ÂèòÂæóÊõ¥‰∏ÄËá¥ÁöÑÊó∂ÂÄôÔºå@option{-v} ÈÄâÈ°πÂ∞±Áî®Êù•ÂçèË∞ÉÂ∫îÁî®‰æùËµñ‰∫éËøôÁßçÊóßË°å‰∏∫ÁöÑ‰ª£Á†Å„ÄÇ

ÂèòÈáèËµãÂÄºÁâπÊÄß‰ºöÂú®ËÆæÁΩÆ @code{RS}Ôºå@code{OFS} Âíå @code{ORS} ÂèòÈáèÁöÑÂÄºÊó∂ÈùûÂ∏∏Êúâ‰ΩúÁî®ÔºåËøô‰∏™ÂèòÈáèÁî®Êù•Âú®Êâ´Êèè@value{DF}Êó∂ÊéßÂà∂ËæìÂÖ•ËæìÂá∫Ê†ºÂºè„ÄÇÂêåÊó∂ÔºåÂ¶ÇÊûú @command{awk} Ë¶ÅÂ§öÊ¨°Êâ´Êèè@value{DF}Êó∂ÔºåÁî®Êù•ÊéßÂà∂Áä∂ÊÄÅ‰πüÈùûÂ∏∏ÊúâÁî®„ÄÇ‰æãÂ¶ÇÔºö

@cindex files, multiple passes over
@example
awk 'pass == 1  @{ @var{pass 1 stuff} @}
     pass == 2  @{ @var{pass 2 stuff} @}' pass=1 mydata pass=2 mydata
@end example

Êúâ‰∫ÜÂèòÈáèËµãÂÄºÁâπÊÄßÂêéÔºåÁî® @option{-F} ÂèÇÊï∞Êù•ËÆæÁΩÆ @code{FS} ÁöÑÂÄºÔºå‰∏•Ê†ºÊù•ËØ¥Â∞±‰∏çÈÇ£‰πàÂøÖË¶Å‰∫Ü„ÄÇËøôÈáå‰øùÁïô‰∏ãÊù•Âè™ÊòØ‰∏∫‰∫ÜÂÖºÂÆπÂéÜÂè≤ÁâàÊú¨„ÄÇ

@node Naming Standard Input
@section ÂëΩÂêçÊ†áÂáÜËæìÂÖ•

ÂæàÂ§öÊÉÖÂÜµ‰∏ãÔºå‰Ω†Â∏åÊúõÂêåÊó∂‰ªéÊ†áÂáÜËæìÂÖ•‰∏éÊñá‰ª∂‰∏≠ËæìÂÖ•Êï∞ÊçÆÔºå‰Ω†Â∏åÊúõËØª‰∏Ä‰∏™Êñá‰ª∂ÔºåÂÜç‰ªéÊ†áÂáÜËæìÂÖ•ÁöÑÁÆ°ÈÅì‰∏≠ËØªÂÖ•Êï∞ÊçÆÔºåÁÑ∂ÂêéÂÜçËØªÂè¶‰∏Ä‰∏™Êñá‰ª∂„ÄÇ

Â∞ÜÊ†áÂáÜËæìÂÖ•ÂëΩÂêçÁöÑÊñπÂºèÔºåÂØπÊâÄÊúâÁâàÊú¨ÁöÑ @command{awk}ÔºåÈÉΩÊòØ‰ΩøÁî®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂáèÂè∑ÔºåÊàñËÄÖËØ¥ÊòØÊ®™Êù† @samp{-} Ôºå‰æãÂ¶ÇÔºö

@example
@var{some_command} | awk -f myprog.awk file1 - file2
@end example

@noindent
Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@command{awk} È¶ñÂÖàËØªÂèñÊñá‰ª∂ @file{file1}ÔºåÁÑ∂Âêé‰ªé @var{some_command} ÁöÑËæìÂá∫‰∏≠ËØªÂÖ•Êï∞ÊçÆÔºåÊúÄÂêé‰ªé @file{file2} ‰∏≠ËØªÂèñÊï∞ÊçÆ„ÄÇ

ÂΩì‰Ω†‰ΩøÁî® @code{getline} Êù•ËØªÂèñÊñá‰ª∂Êó∂Ôºå‰Ω†‰πüÂèØ‰ª•Áî® @code{"-"} Êù•ÂëΩÂêçÊ†áÂáÜËæìÂÖ•ÔºàÊü•Áúã @ref{Getline/File}Ôºâ„ÄÇ

Âè¶Â§ñÔºå@command{gawk} ‰πüÂèØ‰ª•ËÆ©‰Ω†Âú®ÂëΩ‰ª§Ë°åÊàñËÄÖÁ®ãÂ∫èÊñá‰ª∂‰∏≠ÊåáÂÆöÁâπÊÆäÁöÑ@value{FN} @file{/dev/stdin}„ÄÇ
‰∏Ä‰∫õÁâàÊú¨ÁöÑ @command{awk} ‰πüÊîØÊåÅËøôÁßçÊñπÂºèÔºå‰ΩÜËøôÂπ∂‰∏çÊòØÊ†áÂáÜ„ÄÇÔºàÊúâ‰∫õÊìç‰ΩúÁ≥ªÁªüÂú®Êñá‰ª∂Á≥ªÁªü‰∏≠Êèê‰æõÊñá‰ª∂ @file{/dev/stdin}ÔºõËÄå @command{gawk} ÊÄªÊòØËá™Â∑±Êù•Â§ÑÁêÜËøô‰∏™Êñá‰ª∂„ÄÇÔºâ

@node Environment Variables
@section @command{gawk} ‰ΩøÁî®ÁöÑÁéØÂ¢ÉÂèòÈáè 
@cindex environment variables used by @command{gawk}

ÊúâÂæàÂ§öÁöÑÁéØÂ¢ÉÂèòÈáè‰ºöÂΩ±ÂìçÂà∞ @command{gawk} ÁöÑË°å‰∏∫„ÄÇ

@menu
* AWKPATH Variable::            Searching directories for @command{awk}
                                programs.
* AWKLIBPATH Variable::         Searching directories for @command{awk} shared
                                libraries.
* Other Environment Variables:: The environment variables.
@end menu

@node AWKPATH Variable
@subsection ÁéØÂ¢ÉÂèòÈáè @env{AWKPATH}
@cindex @env{AWKPATH} environment variable
@cindex directories, searching for source files
@cindex search paths, for source files
@cindex differences in @command{awk} and @command{gawk}, @env{AWKPATH} environment variable
@ifinfo
‰πãÂâçÁöÑ@value{SECTION}‰∏≠ÊèèËø∞‰∫Ü @command{awk} Á®ãÂ∫èÊñá‰ª∂ÊÄéÊ†∑Âú®ÂëΩ‰ª§Ë°å‰∏≠Áî® @option{-f} ÈÄâÈ°πÂëΩÂêç„ÄÇ
@end ifinfo
Âú®Â§ßÂ§öÁöÑ @command{awk} ÂÆûÁé∞‰∏≠Ôºå‰Ω†ÂèØ‰ª•ÊåáÂÆö‰∏∫ÊØè‰∏™Á®ãÂ∫èÊñá‰ª∂ÊåáÂÆöÁ°ÆÂÆöÁöÑË∑ØÂæÑÂêçÔºåÈô§ÈùûÊñá‰ª∂Â∞±Âú®ÂΩìÂâçÁõÆÂΩï„ÄÇ
‰ΩÜÊòØÔºåÂ¶ÇÊûúÈÄöËøá @option{-f} ÊàñËÄÖ @option{-i} ÈÄâÈ°πÊâÄÊèê‰æõÁöÑ@value{FN}‰∏≠Ê≤°ÊúâÂåÖÊã¨ÁõÆÂΩïÂàÜÈöîÁ¨¶ @samp{/}Ôºå@command{gawk} Âàô‰ºöÂú®‰∏ÄÁ≥ªÂàóÁöÑÁõÆÂΩï‰∏≠ËøõË°åÊêúÁ¥¢
ÔºàÁß∞‰∏∫@dfn{ÊêúÁ¥¢Ë∑ØÂæÑ}ÔºâÔºå‰∏Ä‰∏™Êé•‰∏Ä‰∏™Âú∞Êü•ÊâæÊòØÂê¶ÊúâÊåáÂÆöÁöÑÊñá‰ª∂Âêç„ÄÇ

Ëøô‰∫õÊêúÁ¥¢Ë∑ØÂæÑÂåÖÊã¨‰∏ÄÁ≥ªÂàóÁöÑÁî±ÂÜíÂè∑ÂàÜÈöîÁöÑË∑ØÂæÑÂêç„ÄÇ@footnote{Âú® MS-Windows ‰∏é MS-DOS ‰∏≠Âàô‰ΩøÁî®ÂàÜÂè∑‚Äú;‚Äù„ÄÇ} 
@command{gawk} ‰ªé @env{AWKPATH} ÁéØÂ¢ÉÂèòÈáè‰∏≠ÂèñÂæóÂÆÉÁöÑÊêúÁ¥¢Ë∑ØÂæÑ„ÄÇÂ¶ÇÊûú‰∏çÂ≠òÂú®Ëøô‰∏™ÂèòÈáèÔºåÊàñËÄÖËøô‰∏™ÂèòÈáè‰∏∫Á©∫Ôºå@command{gawk} ‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑË∑ØÂæÑÔºàÂêéÈù¢ËØ¥ÊòéÔºâ„ÄÇ

ÊêúÁ¥¢Ë∑ØÂæÑÁâπÊÄßÁî®Êù•ÂàõÂª∫ÈÄöÁî®ÁöÑ @command{awk} ÂáΩÊï∞Â∫ìÈùûÂ∏∏ÊúâÁî®„ÄÇ
Â∫ìÊñá‰ª∂ÂèØ‰ª•ÊîæÂú®‰∏Ä‰∏™Ê†áÂáÜÁöÑÈªòËÆ§ÁõÆÂΩï‰∏≠ÔºåÁÑ∂ÂêéÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆö‰∏Ä‰∏™Áü≠ÁöÑ@value{FN}„ÄÇ‰∏çÁÑ∂ÁöÑËØùÔºå‰Ω†ÈúÄË¶ÅËæìÂÖ•ÊØè‰∏™Êñá‰ª∂ÁöÑÂÆåÊï¥Ë∑ØÂæÑ„ÄÇ

ÈÄöËøá‰ΩøÁî® @option{-i} ÊàñËÄÖ @option{-f} ÈÄâÈ°πÔºå‰Ω†ÁöÑÂëΩ‰ª§Ë°å @command{awk} Á®ãÂ∫èÂèØ‰ª•Âà©Áî® @command{awk} ÁöÑÂ∫ìÊñá‰ª∂
ÔºàÊü•Áúã @ref{Library Functions}Ôºâ„ÄÇ
Â¶ÇÊûúÊòØÂú®ÂÖºÂÆπÊ®°Âºè‰∏≠ÔºåË∑ØÂæÑÊêúÁ¥¢Âπ∂Ê≤°ÊúâÂÆûÁé∞ÔºåÂõ†Ê≠§ÔºåËÄåÂØπ‰∫é @option{--traditional} ‰∏é @option{--posix} Ê®°ÂºèÔºåÊêúÁ¥¢Ë∑ØÂæÑ‰∏çÂèØÁî®„ÄÇ
Êü•Áúã @ref{Options}„ÄÇ

Â¶ÇÊûúÊ∫ê‰ª£Á†ÅÊñá‰ª∂Ê≤°ÊúâÂú®ÂàùÂßãÁöÑË∑ØÂæÑ‰∏≠ÊâæÂà∞ÔºåÂàôË∑ØÂæÑÊêúÁ¥¢‰ºöÂú®@value{FN}ÂêéÈù¢Âä†‰∏Ä‰∏™ @samp{.awk} ÂêéÁºÄÂêçÂêéÂÜçÊâßË°åÊêúÁ¥¢„ÄÇ

@command{gawk} ÁöÑË∑ØÂæÑÊêúÁ¥¢Êú∫Âà∂‰∏é Shell ÁöÑÊú∫Âà∂ÊúâÁÇπÁ±ª‰ºº„ÄÇ
ÔºàÂèØ‰ª•Êü•Áúã @uref{http://www.gnu.org/software/bash/manual/,
@cite{Bourne-Again Shell ÊâãÂÜå}}„ÄÇÔºâ
ÂÆÉÂ∞ÜÁ©∫ÁöÑË∑ØÂæÑÈ°πËßÜ‰∏∫ÂΩìÂâçË∑ØÂæÑ„ÄÇÔºà‰∏Ä‰∏™Á©∫È°πÁî±‰∏Ä‰∏™ÂÜíÂè∑ÂºÄÂßãÔºåÊàñËÄÖ‰ª•ÂÜíÂè∑ÁªìÊùüÁöÑË∑ØÂæÑÔºåÊàñËÄÖ‰∏§‰∏™Á¥ßÊé•ÁùÄÁöÑÂÜíÂè∑Ë°®Á§∫ [@samp{::}]„ÄÇÔºâ

@quotation ÊèêÁ§∫
Ë¶ÅÂ∞ÜÂΩìÂâçË∑ØÂæÑÂåÖÊã¨Âú®Ë∑ØÂæÑ‰∏≠ÔºåË¶Å‰πàÂú®È°πÁõÆ‰∏≠Êîæ‰∏Ä‰∏™ÁÇπÂè∑ @file{.} ÊàñËÄÖÂÜô‰∏Ä‰∏™Á©∫ÁöÑË∑ØÂæÑÈ°π„ÄÇ

@command{gawk} ‰πãÂâçÁöÑÂá†‰∏™‰∏çÂêåÁâàÊú¨‰ºöÊòæÁ§∫Âú∞Âú®ÂΩìÂâçÁõÆÂΩïËøõË°åÊêúÁ¥¢Ôºå‰∏çÁÆ°ÊòØÂú®ÊêúÁ¥¢Ë∑ØÂæÑÂâçËøòÊòØÂêé„ÄÇ
Âú®@value{PVERSION} 4.1.2 Ëøô‰∏™ÁâàÊú¨‰∏≠ÔºåÂàô‰∏çÂÜçËøô‰πàÂ§ÑÁêÜÔºõÂ¶ÇÊûú‰Ω†Â∏åÊúõÊêúÁ¥¢ÂΩìÂâçÁõÆÂΩïÔºå‰Ω†ÂøÖÈ°ªÂåÖÊã¨‰∏Ä‰∏™ÁÇπ @file{.} ‰Ωú‰∏∫‰∏Ä‰∏™Áã¨Á´ãÁöÑÈ°πÔºåË¶Å‰πàÂú®ÊêúÁ¥¢Ë∑ØÂæÑ‰∏≠Âä†ÂÖ•‰∏Ä‰∏™Á©∫È°π„ÄÇ
@end quotation

@env{AWKPATH} ÁöÑÈªòËÆ§Ë∑Ø‰πàÊòØÔºö
@samp{.:/usr/local/share/awk}„ÄÇ
@footnote{‰Ω†ÁöÑ @command{gawk} ÁâàÊú¨ÂèØËÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁõÆÂΩïÔºõËøô‰æùËµñ‰∫é @command{gawk} ÊòØÂ¶Ç‰ΩïË¢´ÊûÑÂª∫‰∏éÂÆâË£ÖÁöÑ„ÄÇ
ÂÆûÈôÖÁöÑË∑ØÂæÑÊòØ @code{$(datadir)} Âú® @command{gawk} ÈÖçÁΩÆÊó∂ÊâÄ‰∫ßÁîüÁöÑÂÄº„ÄÇÂ∞ΩÁÆ°Â¶ÇÊ≠§Ôºå‰∏ÄËà¨Êù•ËØ¥‰Ω†‰πü‰∏çÈúÄË¶ÅÊãÖÂøÉ„ÄÇ}
Áî±‰∫é @file{.} ÂåÖÊã¨Âú®‰∫ÜÂºÄÂßãÂ§ÑÔºå@command{gawk} ‰ºöÈ¶ñÂÖàÊêúÁ¥¢ÂΩìÂâçÁõÆÂΩïÔºåÁÑ∂ÂêéÂÜçÊêúÁ¥¢ @file{/usr/local/share/awk}„ÄÇ
Âú®ÂÆûË∑µ‰∏≠ÔºåËøôÊÑèÂë≥ÁùÄ‰Ω†ÂæàÂ∞ëÈúÄË¶ÅÊõ¥Êîπ @env{AWKPATH} ÁöÑÂÄº„ÄÇ

@command{gawk} Â∞ÜÂÖ∂‰ΩøÁî®ÁöÑÊêúÁ¥¢Ë∑ØÂæÑÁöÑÂÄºÊîæÂú® @code{ENVIRON["AWKPATH"]} ÂÖÉÁ¥†‰∏≠„ÄÇ
ËøôÊèê‰æõ‰∫ÜÂèØ‰ª•ËÆ©‰Ω†Âú® @command{awk} Á®ãÂ∫è‰∏≠ËÆøÈóÆÊêúÁ¥¢Ë∑ØÂæÑÁöÑÊú∫Âà∂„ÄÇ

Â∞ΩÁÆ°‰Ω†ÂèØ‰ª•Âú®Á®ãÂ∫è‰∏≠Êõ¥Êîπ @code{ENVIRON["AWKPATH"]} ÁöÑÂÄºÔºå‰ΩÜËøô‰∏ç‰ºöÂΩ±ÂìçÊ≠£Âú®ÊâßË°åÁöÑÁ®ãÂ∫èÁöÑË°å‰∏∫„ÄÇ
ÂéüÂõ†Â¶Ç‰∏ãÔºö@env{AWKPATH} ÊòØÁî®Êù•‰Ωú‰∏∫ÊêúÁ¥¢Á®ãÂ∫èÊñá‰ª∂ÁöÑÁéØÂ¢ÉÂèòÈáè„ÄÇ
‰∏ÄÊó¶‰Ω†ÁöÑÁ®ãÂ∫èËøêË°åËµ∑Êù•ÔºåÊâÄÊúâÁöÑÊñá‰ª∂ÈÉΩÂ∑≤ÁªèÊêúÁ¥¢Âà∞‰∫ÜÔºå@command{gawk} Â∞±‰∏çÂÜçÈúÄË¶Å @env{AWKPATH} ÂèòÈáè‰∫Ü„ÄÇ

@node AWKLIBPATH Variable
@subsection ÁéØÂ¢ÉÂèòÈáè @env{AWKLIBPATH}
@cindex @env{AWKLIBPATH} environment variable
@cindex directories, searching for loadable extensions
@cindex search paths, for loadable extensions
@cindex differences in @command{awk} and @command{gawk}, @code{AWKLIBPATH} environment variable

@env{AWKLIBPATH} ÁéØÂ¢ÉÂèòÈáè‰∏é @env{AWKPATH} ÂèòÈáèÁ±ª‰ººÔºå‰ΩÜÊòØÊòØÁî±Êù•ÊêúÁ¥¢ÂèØË£ÖËΩΩÁöÑÊâ©Â±ïÔºàÂ≠òÂÇ®‰∏∫Á≥ªÁªüÁöÑÂÖ±‰∫´Â∫ìÔºâÔºåËÄå‰∏çÊòØÁî®Êù•ÊêúÁ¥¢Ê∫ê‰ª£Á†ÅÊñá‰ª∂Ôºå
Ëøô‰∫õÊâ©Â±ïÁî± @option{-l} ÈÄâÈ°πËøõË°åÊåáÂÆö„ÄÇÂ¶ÇÊûúÊâ©Â±ïÊ≤°ÊúâÊâæÂà∞Ôºå‰ºöÂú®ÊêúÁ¥¢ÂÆåÊàêÂêéÂä†‰∏äÊÅ∞ÂΩìÁöÑÂÖ±‰∫´Â∫ìÂêéÁºÄÂêéÂÜçÊ¨°ÊêúÁ¥¢„ÄÇ
‰æãÂ¶ÇÔºåÂú® GNU/Linux Á≥ªÁªü‰∏≠ÔºåÂêéÁºÄÊòØ @samp{.so}„ÄÇ
ÊêúÁ¥¢Ë∑ØÂæÑ‰πüÂèØ‰ª•Áî®‰∫éÁî® @code{@@load} ÂÖ≥ÈîÆËØçËøõË°åÁöÑÊâ©Â±ïË£ÖËΩΩÔºàÊü•Áúã @ref{Loading Shared Libraries}Ôºâ„ÄÇ

Â¶ÇÊûú @env{AWKLIBPATH} Âú®ÁéØÂ¢ÉÂèòÈáè‰∏≠‰∏çÂ≠òÂú®ÔºåÊàñËÄÖ‰∏∫Á©∫Ôºå@command{gawk} ‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑË∑ØÂæÑÔºå
‰∏ÄËà¨ÊòØ @samp{/usr/local/lib/gawk}Ôºå‰ΩÜËøô‰πü‰ºöÁî±‰∫é @command{gawk} ÊûÑÂª∫ÁöÑÊñπÂºèËÄåÊúâ‰∏çÂêå„ÄÇ

@command{gawk} ‰ºöÂ∞ÜÊêúÁ¥¢Ë∑ØÂæÑÁöÑÂÄºÂ≠òÊîæ‰∫é @code{ENVIRON["AWKLIBPATH"]} ‰∏≠„ÄÇËøôÊ†∑ÔºåÂú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÂèØ‰ª•ÂæóÂà∞ÂÆûÈôÖÁöÑÊêúÁ¥¢Ë∑ØÂæÑ„ÄÇ

@node Other Environment Variables
@subsection ÂÖ∂‰ªñÁöÑÁéØÂ¢ÉÂèòÈáè
ËøòÊúâÂæàÂ§öÁöÑÁéØÂ¢ÉÂèòÈáè‰ºöÂΩ±Âìç @command{gawk} ÁöÑË°å‰∏∫Ôºå‰ΩÜÊòØÂÆÉ‰ª¨ÈÉΩÊØîËæÉÁâπÊÆä„ÄÇ‰∏ãÈù¢ÁöÑÂèòÈáèÈÉΩÊòØ‰∏ÄËà¨ÁöÑÁî®Êà∑‰ΩøÁî®Ôºö

@table @env
@item GAWK_MSEC_SLEEP
ÊåáÂÆöËøûÊé•ÈáçËØïÁöÑÈó¥ÈöîÔºå‰ª•ÊØ´Áßí‰∏∫Âçï‰Ωç„ÄÇÂú®‰∏çÊîØÊåÅ @code{usleep()} Ë∞ÉÁî®ÁöÑÁ≥ªÁªü‰∏äÔºåËøô‰∏™ÂÄº‰∏∫Âêë‰∏äËàçÂÖ•‰∏∫Êï¥Êï∞Áßí„ÄÇ

@item GAWK_READ_TIMEOUT
ÊåáÂÆö @command{gawk} Âú®ËøîÂõûÂá∫ÈîôÂâçÔºåÁ≠âÂæÖËæìÂÖ•ÁöÑÊØ´ÁßíÊï∞„ÄÇÊü•Áúã @ref{Read Timeout}„ÄÇ

@item GAWK_SOCK_RETRIES
ÊéßÂà∂ @command{gawk} ÈáçËØïÂèåÂêë TCP/IP ÔºàSocketÔºâËøûÊé•ÁöÑÊ¨°Êï∞„ÄÇÊü•Áúã @ref{TCP/IP Networking}„ÄÇ

@item POSIXLY_CORRECT
ÂØºËá¥ @command{gawk} ÂàáÊç¢Âà∞ POSIX ÂÖºÂÆπÊ®°ÂºèÔºåÂπ∂Á¶ÅÁî®ÊâÄÊúâÁöÑ‰º†ÁªüÁöÑ‰∏é GNU Êâ©Â±ï„ÄÇÊü•Áúã @ref{Options}„ÄÇ
@end table

‰∏ãÈù¢ÁöÑÁéØÂ¢ÉÂèòÈáèÁî± @command{gawk} ÁöÑÂºÄÂèëËÄÖÁî®‰∫éÊµãËØï‰∏éË∞ÉÊµãÁõÆÁöÑ„ÄÇÂÆÉ‰ª¨‰ºöÊîπÂèò„ÄÇËøô‰∫õÂèòÈáèÊòØÔºö

@table @env
@item AWKBUFSIZE
Ëøô‰∏™ÂèòÈáèÂè™ÂΩ±ÂìçÂú® POSIX ÂÖºÂÆπÁ≥ªÁªü‰∏äÁöÑ @command{gawk}„ÄÇ
Â¶ÇÊûúÂÄºÊòØ @samp{exact}Ôºå@command{gawk} ‰ºö‰ΩøÁî®ËæìÂÖ•Êñá‰ª∂ÁöÑÂ§ßÂ∞è‰Ωú‰∏∫ÂÜÖÂ≠òÁºìÂ≠òÁöÑÂ§ßÂ∞èÔºåÊù•Áî®ËøõË°å I/O ÁöÑÂàÜÈÖç„ÄÇÂÖ∂‰ªñÊÉÖÂÜµ‰∏ãÁöÑÂÄºÂàôÊòØ‰∏Ä‰∏™Êï¥Êï∞ÂÄºÔºå
@command{gawk} ‰ΩøÁî®Ëøô‰∏™ÂÄºËøõË°åÁºìÂ≠òÁöÑÂàÜÈÖç„ÄÇÔºàÂΩìËøô‰∏™ÂèòÈáèÊ≤°ÊúâËÆæÁΩÆÔºå@command{gawk} ‰ΩøÁî®Êñá‰ª∂Â§ßÂ∞è‰∏éÈªòËÆ§ÂùóÂ§ßÂ∞è‰∏§ËÄÖ‰∏≠ÁöÑÂ∞èÁöÑÊï∞ÂÄºÔºå
Ëøô‰∏ÄËà¨Êù•ËØ¥ËÄÖÊòØÊñá‰ª∂Á≥ªÁªüÁöÑ I/O ÂùóÂ§ßÂ∞è„ÄÇÔºâ

@item AWK_HASH
Â¶ÇÊûúËøô‰∏™ÂèòÈáèÂ≠òÂú®ÔºåÂÄº‰∏∫ @samp{gst} Ôºå@command{gawk} ‰ºöÂàáÊç¢‰ΩøÁî®Êù•Ëá™‰∫é GNU Smalltalk ÁöÑÂìàÂ∏åÂáΩÊï∞Êù•ÁÆ°ÁêÜÊï∞ÁªÑ„ÄÇËøô‰∏™ÂáΩÊï∞ÊØîÊ†áÂáÜÁöÑÂáΩÊï∞Ë¶ÅÁ®çÂø´„ÄÇ

@item AWKREADFUNC
Â¶ÇÊûúËøô‰∏™ÂèòÈáèÂ≠òÂú®Ôºå@command{gawk} ‰ºöÂàáÊç¢Êàê‰∏ÄÊ¨°‰∏ÄË°åÂú∞ËØªÂèñÊñá‰ª∂ÔºåËÄå‰∏çÊòØÊï¥ÂùóÂú∞ËØª„ÄÇËøô‰∏™ÂèòÈáèÁöÑÂ≠òÂú®ÊòØ‰∏∫‰∫ÜË∞ÉËØïÂú® non-POSIX Êìç‰ΩúÁ≥ªÁªü‰∏äÊñá‰ª∂Á≥ªÁªüÁöÑÈóÆÈ¢òÔºåÂú®Ëøô‰∏™Á≥ªÁªü‰∏äÁöÑ I/O ÊòØ‰ª•ËÆ∞ÂΩïÊù•ËøõË°åËØªÂèñËÄå‰∏çÊòØ‰ª•ÂùóÁöÑÊñπÂºè„ÄÇ

@item GAWK_MSG_SRC
Â¶ÇÊûúËøô‰∏™ÂèòÈáèÂ≠òÂú®Ôºå@command{gawk} ‰ºöÂú®‰∫ßÁîüÁöÑË≠¶Âëä‰ø°ÊÅØ‰∏éËá¥ÂëΩ‰ø°ÊÅØ‰∏≠Âä†ÂÖ•@value{FN}‰∏éË°åÂè∑„ÄÇÂÆÉÁöÑÁõÆÁöÑÊòØÂ∏ÆÂä©ÂàÜÁ¶ªÊ∂àÊÅØÊ∫êÔºåÂõ†‰∏∫ÊúâÂèØËÉΩÊúâÂ§ö‰∏™Âú∞Êñπ‰ºö‰∫ßÁîüÁõ∏ÂêåÁöÑË≠¶ÂëäÊàñËÄÖÈîôËØØ‰ø°ÊÅØ„ÄÇ

@item GAWK_LOCALE_DIR
ÊåáÊòéÁºñËØëÂ•ΩÁöÑ‰ø°ÊÅØÂØπË±°Êñá‰ª∂ÁöÑ‰ΩçÁΩÆ„ÄÇÂú® @command{gawk} ÂºÄÂßãËøêË°åÁöÑÊó∂ÂÄôÔºåËøô‰∏™ÂèòÈáèË¢´‰º†ÈÄíÁªô @code{bindtextdomain()} ÂáΩÊï∞„ÄÇ

@item GAWK_NO_DFA
Â¶ÇÊûúËøô‰∏™ÂèòÈáèÂ≠òÂú®Ôºå@command{gawk} ‰∏ç‰ºö‰ΩøÁî® DFA regexp ÂåπÈÖçÂô®
@footnote{Ê≠£ÂàôÂºïÊìé‰∏ªË¶ÅÂèØ‰ª•ÂàÜ‰∏∫‰∏§Â§ßÁ±ªÔºö‰∏ÄÁßçÊòØ DFAÔºàÁ°ÆÂÆöÁöÑÊúâÁ©∑Ëá™Âä®Êú∫ÔºåDeterministic finite automatonÔºâÔºå‰∏ÄÁßçÊòØ NFAÔºàÈùûÁ°ÆÂÆöÁöÑÊúâÁ©∑Ëá™Âä®Êú∫ÔºåNon-deterministic finite automaton)„ÄÇËøô‰∏§ÁßçÂºïÊìéÈÉΩÊúâ‰∫ÜÂæà‰πÖÁöÑÂéÜÂè≤ÔºåÂΩì‰∏≠‰πüÁî±Ëøô‰∏§ÁßçÂºïÊìé‰∫ßÁîü‰∫ÜÂæàÂ§öÂèò‰ΩìÔºÅ‰∫éÊòØ POSIX ÁöÑÂá∫Âè∞ËßÑÈÅø‰∫Ü‰∏çÂøÖË¶ÅÂèò‰ΩìÁöÑÁªßÁª≠‰∫ßÁîü„ÄÇËøôÊ†∑‰∏ÄÊù•Ôºå‰∏ªÊµÅÁöÑÊ≠£ÂàôÂºïÊìéÂèàÂàÜ‰∏∫ 3 Á±ªÔºö‰∏Ä„ÄÅDFAÔºå‰∫å„ÄÅ‰º†ÁªüÂûãNFAÔºå‰∏â„ÄÅPOSIX NFA„ÄÇDFA ÂºïÊìéÂú®Á∫øÊÄßÂºèÁä∂ÊÄÅ‰∏ãÊâßË°åÔºåÂõ†‰∏∫ÂÆÉ‰ª¨‰∏çË¶ÅÊ±ÇÂõûÊ∫ØÔºàÂπ∂Âõ†Ê≠§ÂÆÉ‰ª¨Ê∞∏Ëøú‰∏çÊµãËØïÁõ∏ÂêåÁöÑÂ≠óÁ¨¶‰∏§Ê¨°Ôºâ„ÄÇDFA ÂºïÊìéËøòÂèØ‰ª•Á°Æ‰øùÂåπÈÖçÊúÄÈïøÁöÑÂèØËÉΩÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ‰ΩÜÊòØÔºåÂõ†‰∏∫ DFA ÂºïÊìéÂè™ÂåÖÂê´ÊúâÈôêÁöÑÁä∂ÊÄÅÔºåÊâÄ‰ª•ÂÆÉ‰∏çËÉΩÂåπÈÖçÂÖ∑ÊúâÂèçÂêëÂºïÁî®ÁöÑÊ®°ÂºèÔºõÂπ∂‰∏îÂõ†‰∏∫ÂÆÉ‰∏çÊûÑÈÄ†ÊòæÂºèÊâ©Â±ïÔºåÊâÄ‰ª•ÂÆÉ‰∏çÂèØ‰ª•ÊçïËé∑Â≠êË°®ËææÂºè„ÄÇ‚Äî‚ÄîËØëËÄÖÊ≥®}
Êù•ËøõË°å‚ÄúÂÆÉÂåπÈÖç‰πàÔºü‚ÄùÁ±ªÂûãÁöÑÂåπÈÖçÊµãËØï„ÄÇËøô‰ºöÂØºËá¥ @command{gawk} Êõ¥ÊÖ¢„ÄÇÂÆÉÁöÑÁõÆÁöÑÊòØÂ∏ÆÂä©ÂàÜÈöî‰∏§‰∏™ @command{gawk} ÂÜÖÈÉ®‰ΩøÁî®ÁöÑ regexp ÂåπÈÖçÂô®„ÄÇÔºàÊú¨Êù•Â∫îËØ•ÊòØÊ≤°Êúâ‰ªÄ‰πàÂ∑ÆÂºÇÁöÑÔºå‰ΩÜÊòØÂÅ∂Â∞îÊúâÊó∂ÁêÜËÆ∫‰∏éÂÆûÈôÖÁõ∏‰∫í‰∏çÂ§™ÂêàÊãç„ÄÇÔºâ

@item GAWK_NO_PP_RUN
ÂΩì @command{gawk} ÊåáÂÆö @option{--pretty-print} ÈÄâÈ°πÊó∂ÔºåÂ¶ÇÊûúÂ≠òÂú®Ëøô‰∏™ÂèòÈáèÔºåÂÆÉÂ∞Ü‰∏ç‰ºöÊâßË°åÁ®ãÂ∫è„ÄÇ

@quotation Ê≥®ÊÑè
Ëøô‰∏™ÂèòÈáèÂú®‰∏ã‰∏™ÁâàÊú¨ÂèëÂ∏ÉÊó∂‰∏ç‰ºöÁªßÁª≠Â≠òÂú®„ÄÇ
@end quotation

@item GAWK_STACKSIZE
ÊåáÂÆö @command{gawk} ÂÜÖÈÉ®Ê±ÇÂÄºÊ†àÁöÑÂ¢ûÈïøÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúÈúÄË¶ÅÂ¢ûÈïøÁöÑËØù„ÄÇ

@item INT_CHAIN_MAX
ÊåáÂÆö @command{gawk} ÁÆ°ÁêÜÁöÑÁî±Êï¥Êï∞ËøõË°åÁ¥¢ÂºïÁöÑÊï∞ÁªÑ‰∏≠ÁöÑÂìàÂ∏åÈìæÁöÑÂÖÉÁ¥†ÁöÑÊúÄÂ§ßÊï∞ÂÄº„ÄÇ

@item STR_CHAIN_MAX
ÊåáÂÆö @command{gawk} ÁÆ°ÁêÜÁöÑÁî±Â≠ó‰∏≤ËøõË°åÁ¥¢ÂºïÁöÑÊï∞ÁªÑ‰∏≠ÁöÑÂìàÂ∏åÈìæÁöÑÂÖÉÁ¥†ÁöÑÊúÄÂ§ßÊï∞ÂÄº„ÄÇ

@item TIDYMEM
Â¶ÇÊûúËøô‰∏™ÂèòÈáèÂ≠òÂú®Ôºå@command{gawk} Âàô‰ΩøÁî® GNU C Â∫ì‰∏≠ÁöÑ @code{mtrace()} Â∫ìË∞ÉÁî®Êù•Ë∑üË∏™ÂèØËÉΩÁöÑÂÜÖÂ≠òÊ≥ÑÈú≤„ÄÇ
@end table

@node Exit Status
@section @command{gawk} ÁöÑÈÄÄÂá∫Áä∂ÊÄÅ

@cindex exit status, of @command{gawk}
Â¶ÇÊûú‰ΩøÁî®‰∏Ä‰∏™Êï∞ÂÄºÊù•‰∏é @code{exit} ËØ≠Âè•‰∏ÄËµ∑‰ΩøÁî®ÔºàÊü•Áúã @ref{Exit Statement}ÔºâÔºå@command{gawk} ÂàôÁî®Ëøô‰∏™Êï∞ÂÄºÂÅö‰∏∫ÂÆÉÁöÑÈÄÄÂá∫Áä∂ÊÄÅÊï∞ÂÄº„ÄÇ

Âê¶ÂàôÔºåÂ¶ÇÊûúÂú®ÊâßË°å‰∏≠Ê≤°ÊúâÂèëÁîüÈîôËØØÔºå@command{gawk} ÂàôÁî® C ÁöÑÂ∏∏Èáè @code{EXIT_SUCCESS} ÈÄÄÂá∫ÔºåËøô‰∏ÄËà¨‰∏∫ 0„ÄÇ

Â¶ÇÊûúÂá∫Áé∞‰∫ÜÈîôËØØÔºå@command{gawk} Âàô‰ΩøÁî® C Â∏∏Èáè @code{EXIT_FAILURE} ÈÄÄÂá∫ÔºåËøô‰∏ÄËà¨ÊòØ 1„ÄÇ

Â¶ÇÊûú @command{gawk} Áî±‰∫éËá¥ÂëΩÈîôËØØËÄåÈÄÄÂá∫ÔºåÂàôÈÄÄÂá∫Áä∂ÊÄÅ‰∏∫ 2„ÄÇÂú® non-POSIX Á≥ªÁªü‰∏äÔºåËøô‰∏™ÂÄºÂèØËÉΩ‰ºöË¢´ÂΩ±Â∞Ñ‰∏∫ @code{EXIT_FAILURE}„ÄÇ

@node Include Files
@section Âú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÂåÖÂê´ÂÖ∂‰ªñÁöÑÊñá‰ª∂

@c Panos Papadopoulos <panos1962@gmail.com> contributed the original
@c text for this section.

Êú¨@value{SECTION}‰∏≠ÊâÄÊèèËø∞ÁöÑÁâπÊÄßÈÉΩÊòØ @command{gawk} ÊâÄÁã¨ÊúâÁöÑ„ÄÇ

@cindex @code{@@include} directive
@cindex file inclusion, @code{@@include} directive
@cindex including files, @code{@@include} directive
@code{@@include} ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•Áî®Êù•ËØªÂèñ @command{awk} Â§ñÈÉ®ÁöÑÊ∫êÊñá‰ª∂„ÄÇËøôËµã‰∫à‰∫Ü‰Ω†Â∞ÜÂ§ßÁöÑ @command{awk} Ê∫êÁ®ãÂ∫èÊãÜÂàÜ‰∏∫Êõ¥Â∞èÁöÑÔºåÂèØÁÆ°ÁêÜÁöÑ‰ª£Á†ÅÂùóÁöÑËÉΩÂäõÔºå‰πüÂèØ‰ª•ËÆ©‰Ω†Â§çÁî®ÈÄöÁî®ÁöÑ @command{awk} Ê∫ê‰ª£Á†Å„ÄÇËøôÂ∞±ÊòØËØ¥Ôºå‰Ω†ÂèØ‰ª•Â∞ÜÂÆûÁé∞ÁâπÂÆö‰ªªÂä°ÁöÑ @command{awk} ÂáΩÊï∞ÁªÑÁªáÊàêÂ§ñÈÉ®Êñá‰ª∂„ÄÇ
ÈÄöËøá @code{@@include} ÂÖ≥ÈîÆÂ≠ó‰∏é @env{AWKPATH} ÁéØÂ¢ÉÂèòÈáèÊê≠ÈÖç‰ΩøÁî®ÔºåËøô‰∫õÊñá‰ª∂ÂèØ‰ª•ÂÉèÂáΩÊï∞Â∫ì‰∏ÄÊ†∑Ë¢´‰ΩøÁî®„ÄÇÊ≥®ÊÑèÔºåÊ∫êÊñá‰ª∂‰πüÂèØ‰ª•ÈÄöËøá @option{-i} ÈÄâÈ°πÂåÖÂê´ËøõÊù•„ÄÇ

ËÆ©Êàë‰ª¨Áúã‰∏™‰æãÂ≠ê„ÄÇÊàë‰ª¨ÂêØÂä®‰∏§‰∏™Â∞èÁöÑÔºàÊ≤°Âï•Áî®ÁöÑÔºâ@command{awk} ËÑöÊú¨ÔºåÂêçÂ≠ó‰∏∫ @file{test1} ‰∏é @file{test2}„ÄÇËøôÈáåÊòØ @file{test1} ÁöÑËÑöÊú¨Ôºö

@example
BEGIN @{
    print "This is script test1."
@}
@end example

@noindent
ËøôÈáåÊòØ @file{test2} ÁöÑÔºö

@example
@@include "test1"
BEGIN @{
    print "This is script test2."
@}
@end example

Áî® @command{gawk} ÊâßË°å @file{test2} ‰∫ßÁîü‰∫Ü‰∏ãÈù¢ÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f test2}
@print{} This is script test1.
@print{} This is script test2.
@end example

@command{gawk} ÊâßË°å @file{test2} ËÑöÊú¨ÔºåËÄåËøôËÑöÊú¨ÈÄöËøá @code{@@include} ÂÖ≥ÈîÆÂ≠óÂåÖÂê´‰∫Ü @file{test1}„ÄÇ
Âõ†Ê≠§ÔºåÂåÖÂê´Â§ñÈÉ®ÁöÑ @command{awk} Ê∫ê‰ª£Á†ÅÔºå‰Ω†ÂèØ‰ª•Âè™‰ΩøÁî® @code{@@include}ÔºåÂêéÈù¢Âä†‰∏äË¶ÅÂåÖÂê´ÁöÑÊñá‰ª∂ÂêçÔºåÂπ∂Áî®ÂèåÂºïÂè∑ÂºïËµ∑Êù•„ÄÇ

@quotation ÊèêÁ§∫
Ë¶ÅËÆ∞‰ΩèÔºåËøôÊòØ‰∏™ËØ≠Ë®ÄÁªìÊûÑÔºåÂπ∂‰∏î@value{FN}‰∏çËÉΩÊòØ‰∏™‰∏≤ÂèòÈáèÔºåËÄåÂè™ËÉΩÊòØ‰∏Ä‰∏™Âú®ÂèåÂºïÂè∑‰∏≠ÁöÑ‰ª£Ë°®ÂÖ∂Ëá™Ë∫´ÁöÑÂ≠ó‰∏≤Â∏∏Èáè„ÄÇ
@end quotation

Êñá‰ª∂ÂåÖÂê´ÊúâÂèØËÉΩÊòØÂÜÖÂµåÁöÑÔºõ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÊúâÁ¨¨‰∏â‰∏™ËÑöÊú¨ÔºåÂêçÂ≠ó‰∏∫ @file{test3}Ôºö

@example
@@include "test2"
BEGIN @{
    print "This is script test3."
@}
@end example

@noindent
Áî® @command{gawk} ÊâßË°åËÑöÊú¨ @file{test3} Âàô‰ºö‰∫ßÁîü‰∏ãÈù¢ÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f test3}
@print{} This is script test1.
@print{} This is script test2.
@print{} This is script test3.
@end example

@value{FN}‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÁõÆÂΩïÂêç„ÄÇÂ¶ÇÔºö

@example
@@include "../io_funcs"
@end example

@noindent
ÊàñËÄÖÔºö

@example
@@include "/usr/awklib/network"
@end example

@noindent
‰∏äÈù¢‰∏§‰∏™Ê†ºÂºèÈÉΩÊòØÊ≠£Á°ÆÁöÑ„ÄÇ@env{AWKPATH} ÁéØÂ¢ÉÂèòÈáèÂú®‰ΩøÁî® @code{@@include} Êó∂‰ºö‰∫ßÁîüÂ∑®Â§ßÂ•ΩÂ§Ñ„ÄÇÂú® @code{@@include} ‰ΩøÁî® @env{AWKPATH} ÁéØÂ¢ÉÂèòÈáèÁöÑËßÑÂàôÔºåÂú®ÂëΩ‰ª§Ë°åÊêúÁ¥¢‰∏≠‰πüÊòØ‰∏ÄÊ†∑ÈÄÇÂ∫îÁöÑÔºàÊü•Áúã @ref{AWKPATH Variable}Ôºâ„ÄÇ

Áî®ËøôÊù•ÊûÑÂª∫ @command{gawk} ÁöÑÂáΩÊï∞Â∫ìÈùûÂ∏∏ÊúâÁî®„ÄÇÂ¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™Â§ßÁöÑÔºåÈùûÂ∏∏ÊúâÁî®ÁöÑÈÄöÁî® @command{awk} ÂáΩÊï∞ËÑöÊú¨Ôºå‰Ω†Â∞±ÂèØ‰ª•Â∞Ü‰ªñ‰ª¨ÊãÜÂàÜ‰∏∫‰∏Ä‰∏™‰∏™Â∫ìÊñá‰ª∂ÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∫õÊñá‰ª∂ÊîæÂú®‰∏Ä‰∏™ÁâπÂÆöÁõÆÂΩï„ÄÇÁÑ∂Âêé‰Ω†ÂèØ‰ª•Â∞ÜËøô‰∫õ‚ÄúÂ∫ì‚ÄùÂåÖÂê´ËøõÊù•„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®Êñá‰ª∂ÁöÑÂÖ®Ë∑ØÂæÑÔºå‰πüÂèØ‰ª•ÈÄöËøáËÆæÁΩÆ @env{AWKPATH} ÁéØÂ¢ÉÂèòÈáèÔºåÁÑ∂Âêé‰ΩøÁî® @code{@@include}ÔºåÂπ∂‰ªÖ‰ΩøÁî®ÂÖ®Ë∑ØÂæÑÂêçÁöÑÊñá‰ª∂ÂêçÈÉ®ÂàÜÂç≥ÂèØ„ÄÇ
ÂΩìÁÑ∂Ôºå‰Ω†‰πüÂèØ‰ª•Â∞ÜÂ∫ìÊñá‰ª∂ÊîæÂú®‰∏çÊ≠¢‰∏Ä‰∏™ÁõÆÂΩï‰∏ãÔºõÊõ¥Â§çÊùÇÁöÑÂ∑•‰ΩúÁéØÂ¢ÉÊòØËøôÊ†∑ÁöÑÔºå‰Ω†Áî®Â§ö‰∏™ÁõÆÂΩïÊù•ÁªÑÁªáÈúÄË¶ÅÂåÖÂê´ÁöÑÊñá‰ª∂„ÄÇ

Áî±‰∫éÂèØ‰ª•ÈÄöËøáÂ§ö‰∏™ @option{-f} ÈÄâÈ°πÊù•ÊåáÂÆö‰∏™Êñá‰ª∂Ôºå@code{@@include} ËøôÊ†∑ÁöÑÊú∫Âà∂Âπ∂‰∏ç‰∏•Ê†ºÈúÄË¶Å„ÄÇ
‰ΩÜÊòØÔºå@code{@@include} ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•Â∏Æ‰Ω†ÊûÑÂª∫Ëá™ÂåÖÂê´ÁöÑ @command{gawk} Á®ãÂ∫èÔºåËøôÊ†∑ÂèØ‰ª•ÈÅøÂÖçÂÜôÂ§çÊùÇÔºåÂ§ö‰ΩôÁöÑÂëΩ‰ª§Ë°å„ÄÇÁâπÂà´ÊòØÔºå@code{@@include} Âú®ÂÜô CGI ËÑöÊú¨Êù•ËøêË°åÁΩëÁªúÈ°µÈù¢Êó∂ÈùûÂ∏∏ÊúâÁî®„ÄÇ

Â¶ÇÂú® @ref{AWKPATH Variable}ÔºåÊâÄÊèêÂà∞ÁöÑÔºåÂΩìÂâçÁöÑÁõÆÂΩïÊÄªÊòØÂåÖÂê´Âú®Êñá‰ª∂ @env{AWKPATH} ÊêúÁ¥¢Ë∑ØÂæÑÁöÑÁ¨¨‰∏Ä‰∏™‰ΩçÁΩÆÔºåËøô‰πüÂêåÊ†∑Â∫îÁî®‰∫é @code{@@include} Êú∫Âà∂„ÄÇ

@node Loading Shared Libraries
@section Âú®‰Ω†ÁöÑÁ®ãÂ∫èË£ÖÂÖ•Âä®ÊÄÅÊâ©Â±ï

Êú¨@value{SECTION}ÊèèËø∞ÁöÑ‰πüÊòØ @command{gawk} ÁöÑÁâπÊÄß„ÄÇ

@cindex @code{@@load} directive
@cindex loading extensions, @code{@@load} directive
@cindex extensions, loading, @code{@@load} directive
@code{@@load} ÂÖ≥ÈîÆÂ≠óÔºåÂèØ‰ª•Áî®Êù•ËØªÂèñÂ§ñÈÉ®ÁöÑ @command{awk} Êâ©Â±ïÔºàÂ≠òÂÇ®‰∏∫Á≥ªÁªüÂÖ±‰∫´Â∫ìÔºâ„ÄÇ
Ëøô‰∏™Êú∫Âà∂ÂèØ‰ª•ËÆ©‰Ω†‰ΩøÁî®ÁºñËØëËøáÁöÑ‰ª£Á†ÅÊù•ÂÆûÁé∞ÈùûÂ∏∏È´òÁöÑÊâßË°åÊÄßËÉΩÔºåÂπ∂‰∏î/ÊàñËÄÖ‰ΩøÁî®‰ΩøÁî®‰∏Ä‰∫õ @command{awk} ËØ≠Ë®ÄÊâÄ‰∏çÊîØÊåÅÁöÑËÉΩÂäõ„ÄÇ
@env{AWKLIBPATH} ÂèòÈáèÊù•Áî®ËøõË°åÊâ©Â±ïÁöÑÊêúÁ¥¢„ÄÇ‰ΩøÁî® @code{@@load} Êú∫Âà∂ÂÆåÂÖ®‰∏é‰ΩøÁî®ÂëΩ‰ª§Ë°åÈÄâÈ°π @option{-l} Á≠âÂêå„ÄÇ

Â¶ÇÊûúÊâ©Â±ï‰∏ÄÂºÄÂßãÊ≤°ÊúâÂú® @env{AWKLIBPATH} ‰∏≠ÊâæÂà∞Ôºå‰ºöÈÄöËøáÁªô@value{FN}ÈôÑÂä†‰∏äÈªòËÆ§Âä®ÊÄÅÂ∫ìÊâ©Â±ïÂêçÂÜçÊêúÁ¥¢‰∏ÄÊ¨°„ÄÇ‰æãÂ¶ÇÔºåÂú® GNU/Linux Á≥ªÁªü‰∏≠ÔºåËøô‰∏™ÂêéÁºÄÂêçÊòØ @samp{.so} Ôºö

@example
$ @kbd{gawk '@@load "ordchr"; BEGIN @{print chr(65)@}'}
@print{} A
@end example

@noindent
‰∏äÈù¢ÁöÑ‰ª£Á†Å‰∏é‰∏ãÈù¢ÁöÑ‰æãÂ≠êÁ≠âÂêåÔºö

@example
$ @kbd{gawk -lordchr 'BEGIN @{print chr(65)@}'}
@print{} A
@end example

@noindent
ÂØπ‰∫éÂëΩ‰ª§Ë°åÁöÑ‰ΩøÁî®Ôºå@option{-l} ÈÄâÈ°πÊõ¥Âä†Êñπ‰æøÔºå‰ΩÜÊòØ @code{@@load} Áî®Êù•Âú®‰Ω†ÁöÑ @command{awk} Ê∫ê‰ª£Á†Å‰∏≠ÂµåÂÖ•ÂøÖÈ°ªÁöÑÊâ©Â±ï‰πüÈùûÂ∏∏ÊúâÁî®„ÄÇ

@ref{Dynamic Extensions}ÔºåËØ¶ÁªÜËß£Èáä‰∫ÜÂ¶Ç‰ΩïÔºàÁî® C ÊàñËÄÖ C++ÔºâÊù•ÂÜôÊâ©Â±ïÔºåËøô‰∫õÊâ©Â±ïÂèØ‰ª•Áî® @code{@@load} Êù•Ë£ÖËΩΩÔºå‰πüÂèØ‰ª•Áî® @option{-l} ÈÄâÈ°πÊù•Ë£ÖËΩΩ„ÄÇ
Âú®ËøôÁ´†Èáå‰πüËø∞Âèä‰∫Ü @code{ordchr} Êâ©Â±ï„ÄÇ

@node Obsolete
@section Â∑≤ÁªèÂèñÊ∂àÁöÑÈÄâÈ°π‰ª•ÂèäÁâπÊÄß 

@c update this section for each release!

@cindex options, deprecated
@cindex features, deprecated
@cindex obsolete features
Êú¨@value{SECTION}ÊâÄÊ∂âÂèäÁöÑÁâπÊÄß‰ª•Âèä/ÊàñËÄÖÂëΩ‰ª§Ë°åÈÄâÈ°πÔºåÊù•Ëá™‰πãÂâçÁöÑ @command{gawk} ÂèëÂ∏ÉÁâàÊú¨„ÄÇ
Ëøô‰∫õÁâπÊÄßÔºåÂëΩ‰ª§Ë°åÈÄâÈ°πË¶Å‰πàÂ∑≤Áªè‰∏çÂÜçÂèØÁî®ÔºåË¶Å‰πàÊòØËôΩÁÑ∂ÊòØËøòÊîØÊåÅÔºå‰ΩÜÊòØÂ∑≤ÁªèÊ†áÂøó‰∏∫ÊîæÂºÉÁä∂ÊÄÅ(ÊÑèÂë≥ÁùÄÂÆÉ‰ª¨Âú®‰∏ã‰∏™ÁâàÊú¨‰∏≠Â∞Ü@emph{‰∏çÂÜç}ÂèØÁî®)„ÄÇ

ËøõÁ®ãÁõ∏ÂÖ≥ÁöÑÁâπÊÆäÊñá‰ª∂ @file{/dev/pid}Ôºå@file{/dev/ppid}Ôºå@file{/dev/pgrpid}Ôºå‰∏é @file{/dev/user} Â∑≤ÁªèÂú® @command{gawk} 3.1 ÁâàÊú¨ÂèñÊ∂à‰∫ÜÔºå‰ΩÜÊòØËøòÂèØ‰ª•‰ΩøÁî®„ÄÇ
Âà∞ 4.0 @value{PVERSION}ÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ª¨Â∞Ü‰∏çÂÜçË¢´ @command{gawk} ËØÜÂà´„ÄÇÔºàËÄåÊòØ‰ΩøÁî® @code{PROCINFO}ÔºåÊü•Áúã @ref{Auto-set}„ÄÇÔºâ

@ignore
This @value{SECTION}
is thus essentially a place holder,
in case some option becomes obsolete in a future version of @command{gawk}.
@end ignore

@node Undocumented
@section Êú™ËÆ∞ËΩΩÁöÑÈÄâÈ°π‰∏éÁâπÊÄß 
@cindex undocumented features
@cindex features, undocumented
@cindex Skywalker, Luke
@cindex Kenobi, Obi-Wan
@cindex Jedi knights
@cindex Knights, jedi
@quotation
@i{‰ΩøÁî®Ê∫ê‰ª£Á†ÅÔºåÁ•ùÂ•ΩËøêÔºÅ}
@author Obi-Wan
@end quotation

@cindex shells, sea
Êú¨@value{SECTION}ÁâπÊÑèÁïôÁ©∫„ÄÇ

@ignore
@c If these came out in the Info file or TeX document, then they wouldn't
@c be undocumented, would they?

@command{gawk} has one undocumented option:

@table @code
@item -W nostalgia
@itemx --nostalgia
Print the message @samp{awk: bailing out near line 1} and dump core.
This option was inspired by the common behavior of very early versions of
Unix @command{awk} and by a t--shirt.
The message is @emph{not} subject to translation in non-English locales.
@c so there! nyah, nyah.
@end table

Early versions of @command{awk} used to not require any separator (either
a newline or @samp{;}) between the rules in @command{awk} programs.  Thus,
it was common to see one-line programs like:

@example
awk '@{ sum += $1 @} END @{ print sum @}'
@end example

@command{gawk} actually supports this but it is purposely undocumented
because it is bad style.  The correct way to write such a program
is either:

@example
awk '@{ sum += $1 @} ; END @{ print sum @}'
@end example

@noindent
or:

@example
awk '@{ sum += $1 @}
     END @{ print sum @}' data
@end example

@noindent
@xref{Statements/Lines}, for a fuller explanation.

You can insert newlines after the @samp{;} in @code{for} loops.
This seems to have been a long-undocumented feature in Unix @command{awk}.

Similarly, you may use @code{print} or @code{printf} statements in the
@var{init} and @var{increment} parts of a @code{for} loop.  This is another
long-undocumented ``feature'' of Unix @command{awk}.

@end ignore

@node Invoking Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
‰ΩøÁî® @samp{awk '@var{program}' @var{files}} ÊàñËÄÖ @samp{awk -f @var{program-file} @var{files}} Êù•ËøêË°å @command{awk}„ÄÇ

@item
ÂØπÊâÄÊúâÁâàÊú¨ÁöÑ @command{awk}ÔºåÊúâ‰∏â‰∏™Ê†áÂáÜÁöÑÈÄâÈ°πÔºåÂç≥ @option{-f}Ôºå@option{-F} ‰∏é @option{-v}„ÄÇ
@command{gawk} ÊîØÊåÅËøôÂá†‰∏™ÈÄâÈ°πÔºå‰πüÊîØÊåÅÂÖ∂‰ªñËÆ∏Â§öÁöÑÈÄâÈ°πÔºå‰ª•Âèä GNU È£éÊ†ºÁöÑÈïøÈÄâÈ°π„ÄÇ

@item
ÈùûÈÄâÈ°πÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞ÈÄöÂ∏∏‰ºöË¢´ÂΩìÂÅö@value{FN}ÂØπÂæÖÔºåÈô§ÈùûÂÆÉ‰ªñÊúâ @samp{@var{var}=@var{value}} ËøôÊ†∑ÁöÑÂΩ¢ÂºèÔºåËøôÁßçÂΩ¢Âºè‰∏ãÔºå‰ºöÂú® @command{awk} Â§ÑÁêÜËæìÂÖ•Êñá‰ª∂Êó∂ÊâßË°åÂèòÈáèËµãÂÄºËØ≠Âè•„ÄÇ

@item
ÊâÄÊúâÁöÑÈùûÈÄâÈ°πÂëΩ‰ª§Ë°åÂèÇÊï∞Ôºå‰∏çÂåÖÊã¨Á®ãÂ∫èÊñáÊú¨ÔºåÈÉΩ‰ºöÂ≠òÊîæ‰∫é @code{ARGV} Êï∞ÁªÑ‰∏≠ÔºåË∞ÉÊï¥ @code{ARGC} ‰∏é @code{ARGV} ‰ºöÂΩ±Âìç @command{awk} Â§ÑÁêÜËæìÂÖ•ÁöÑÊñπÂºè„ÄÇ

@item
Âú®ÂëΩ‰ª§Ë°å‰∏≠Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂáèÂè∑Ôºà@samp{-}ÔºâÊù•ÊåáÂÆöÊ†áÂáÜËæìÂÖ•„ÄÇ
@command{gawk} ‰πüÂèØ‰ª•ËÆ©‰Ω†‰ΩøÁî®ÁâπÊÆä@value{FN} @file{/dev/stdin}„ÄÇ

@item
@command{gawk} ‰ºöÂÖ≥Ê≥®‰∏ÄÁ≥ªÂàóÁöÑÁéØÂ¢ÉÂèòÈáèÔºå@env{AWKPATH}Ôºå@env{AWKLIBPATH} ‰∏é @env{POSIXLY_CORRECT} ÊòØÊúÄÈáçË¶ÅÁöÑÂá†‰∏™„ÄÇ

@item
@command{gawk} ÁöÑÈÄÄÂá∫Áä∂ÊÄÅÂêëË∞ÉÁî®ÂÆÉÁöÑÁ®ãÂ∫è‰º†ÈÄí‰∫ÜÁõ∏Â∫îÁöÑ‰ø°ÊÅØ„ÄÇÂú®Á®ãÂ∫è‰ª£Á†Å‰∏≠‰ΩøÁî® @code{exit} ËØ≠Âè•Êù•ËÆæÁΩÆ @command{awk} Á®ãÂ∫èÁöÑÈÄÄÂá∫Áä∂ÊÄÅ„ÄÇ

@item
@command{gawk} ÂèØ‰ª•Â∞ÜÂÖ∂‰ªñÁöÑ @command{awk} Ê∫ê‰ª£Á†ÅÂåÖÂê´Âú®Âà∞‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠Ôºå
ËøôÊòØÈÄöËøá @code{@@include} ËØ≠Âè•‰ª•Âèä/ÊàñËÄÖ @option{-i} ‰∏é @option{-f} ÂëΩ‰ª§Ë°åÂèÇÊï∞Êù•ÂÆûÁé∞ÁöÑ„ÄÇ

@item
ÈÄöËøá @code{@@load} ËØ≠Âè•‰∏é/ÊàñËÄÖ @option{-l} ÈÄâÈ°πÔºå‰Ω†ÂèØ‰ª•Â∞Ü‰ΩøÁî® C ÊàñËÄÖ C++ ÁºñËØëÁöÑÂÖ∂‰ªñÈôÑÂä†ÂäüËÉΩÊ®°ÂùóÔºàÊâ©Â±ïÔºâÂºïÂÖ•‰Ω†ÁöÑÁ®ãÂ∫è„ÄÇ
ÔºàËøô‰∏™È´òÁ∫ßÁâπÊÄß‰ºöÂú® @ref{Dynamic Extensions}Ôºå‰∏≠ËøõË°åËØ¶ÁªÜËØ¥Êòé„ÄÇÔºâ
@end itemize

@node Regexp
@chapter Ê≠£ÂàôË°®ËææÂºè
@cindex regexp
@cindex regular expressions

@dfn{Ê≠£ÂàôË°®ËææÂºè}Ôºå‰πüÁß∞‰∏∫ @dfn{regexp}ÔºåÊòØÊèèËø∞Â≠ó‰∏≤ÈõÜÁöÑÊñπÊ≥ï„ÄÇÁî±‰∫éÊ≠£ÂàôË°®ËææÂºèÊòØ @command{awk} Á®ãÂ∫èÊúÄÂü∫Á°ÄÁöÑÈÉ®ÂàÜÔºå
ÂÆÉ‰ª¨ÁöÑÊ†ºÂºè‰∏é‰ΩøÁî®ÊúâÂøÖË¶ÅÁî®ÂçïÁã¨ÁöÑ@value{CHAPTER}Êù•ËøõË°åËß£Êûê„ÄÇ

@cindex forward slash (@code{/}) to enclose regular expressions
@cindex @code{/} (forward slash) to enclose regular expressions
Âú®ÊñúÊù†ÂØπÔºà@samp{/}Ôºâ‰∏≠ÂåÖÊã¨ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂú® @command{awk} ‰∏≠Áß∞‰∏∫Ê®°ÂºèÔºåÁî®‰ª•ÂåπÈÖçÈÇ£‰∫õÂ±û‰∫éËøô‰∏™Â≠ó‰∏≤ÈõÜÁöÑËæìÂÖ•ËÆ∞ÂΩï„ÄÇ
ÊúÄÁÆÄÂçïÁöÑÊ≠£ÂàôË°®ËææÂºèÂ∞±ÊòØ‰∏Ä‰∏≤Â≠óÁ¨¶Â∫èÂàóÔºåÊï∞Â≠óÊàñËÄÖ‰∫åËÄÖÂÖºËÄåÊúâ‰πã„ÄÇËøôÊ†∑ÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖç‰ªªÊÑèÂÖ∑ÊúâËøô‰∏™Â≠óÁ¨¶Â∫èÂàóÁöÑÂ≠ó‰∏≤„ÄÇ
ÊâÄ‰ª•Ê≠£ÂàôË°®ËææÂºè @samp{foo} ÂåπÈÖç‰ªªÊÑèÂåÖÂê´ @samp{foo} ÁöÑÂ≠ó‰∏≤„ÄÇËøôÊ†∑ÔºåÊ®°Âºè @code{/foo/} ÂåπÈÖç‰ªªÊÑèÁöÑËæìÂÖ•ËÆ∞ÂΩïÔºå
Âè™Ë¶ÅËøô‰∏™ËÆ∞ÂΩïÂú®@emph{‰ªªÊÑè‰ΩçÁΩÆ}ÂåÖÂê´Ëøô‰∏â‰∏™ËøûÁª≠ÁöÑÂ≠óÁ¨¶Â∫èÂàó @samp{foo} Â•ΩÂèØ„ÄÇÂÖ∂‰ªñÁ±ªÂûãÁöÑÊ≠£ÂàôË°®ËææÂºèÂèØ‰ª•ËÆ©‰Ω†ÊåáÂÆöÊõ¥Â§çÊùÇÁöÑÂ≠ó‰∏≤Á±ª„ÄÇ

@ifnotinfo
Âú®Êú¨Á´†ÁöÑÂºÄÂßãÁöÑ‰æãÂ≠êÔºåÈÉΩÊòØÊØîËæÉÁÆÄÂçïÁöÑ„ÄÇÂΩìÊàë‰ª¨Êõ¥Ê∑±ÂÖ•Âú∞Ëß£ÈáäÊ≠£ÂàôË°®ËææÂºèÂ¶Ç‰ΩïÂ∑•‰ΩúÊó∂ÔºåÂ∞±‰ºöÂÜô‰∏Ä‰∫õÊõ¥Â§çÊùÇÁöÑ‰æãÂ≠ê„ÄÇ
@end ifnotinfo

@menu
* Regexp Usage::                How to Use Regular Expressions.
* Escape Sequences::            How to write nonprinting characters.
* Regexp Operators::            Regular Expression Operators.
* Bracket Expressions::         What can go between @samp{[...]}.
* Leftmost Longest::            How much text matches.
* Computed Regexps::            Using Dynamic Regexps.
* GNU Regexp Operators::        Operators specific to GNU software.
* Case-sensitivity::            How to do case-insensitive matching.
* Regexp Summary::              Regular expressions summary.
@end menu

@node Regexp Usage
@section Â¶Ç‰Ωï‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè

@cindex regular expressions, as patterns
Ê≠£ÂàôË°®ËææÂºèÈÄöËøá‰∏§‰∏™ÊñúÊù†ÂåÖÂê´Ëµ∑Êù•ËøõË°å‰ΩøÁî®„ÄÇÁÑ∂ÂêéÊ≠£ÂàôË°®ËææÂºèÂ∞±‰ºöÂØπËÆ∞ÂΩïÁöÑÊï¥‰∏™ÊñáÊú¨ËøõË°åÊµãËØï„ÄÇÔºàÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂè™ÈúÄË¶ÅÊåâÈ°∫Â∫èÂåπÈÖçÊñáÊú¨ÁöÑ‰∏ÄÈÉ®‰ªΩÂ∞±ËÉΩÂ§üÊàêÂäüÊµãËØïÂåπÈÖç‰∏éÂê¶„ÄÇÔºâ‰æãÂ¶ÇÔºå‰∏ãÈù¢Âè™ÈúÄË¶ÅËÆ∞ÂΩïÁöÑ‰ªªÊÑè‰ΩçÁΩÆÂá∫Áé∞ @samp{li} ‰∏≤ÔºåÂ∞±ÊâìÂç∞ÂÆÉÁöÑÁ¨¨‰∫å‰∏™ÂüüÔºö

@example
$ @kbd{awk '/li/ @{ print $2 @}' mail-list}
@print{} 555-5553
@print{} 555-0542
@print{} 555-6699
@print{} 555-3430
@end example

@cindex regular expressions, operators
@cindex operators, string-matching
@c @cindex operators, @code{~}
@cindex string-matching operators
@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@c @cindex operators, @code{!~}
@cindex @code{if} statement, use of regexps in
@cindex @code{while} statement, use of regexps in
@cindex @code{do}-@code{while} statement, use of regexps in
@c @cindex statements, @code{if}
@c @cindex statements, @code{while}
@c @cindex statements, @code{do}
Ê≠£ÂàôË°®ËææÂºè‰πüÂèØ‰ª•Áî®‰∫éÂåπÈÖçË°®ËææÂºè„ÄÇËøô‰∫õË°®ËææÂºè‰∏≠‰Ω†ÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™Ë¶ÅÂåπÈÖçÁöÑ‰∏≤ÔºõËÄå‰∏çÈúÄË¶ÅÊï¥‰∏™ÁöÑËæìÂÖ•ËÆ∞ÂΩï„ÄÇ
Êúâ‰∏§‰∏™Êìç‰ΩúÁ¨¶Êù•ÊâßË°åÂåπÈÖçÔºå‰∏Ä‰∏™ÊòØ @samp{~}Ôºå‰∏Ä‰∏™ÊòØ @samp{!~}„ÄÇ
Ëøô‰∫õË°®ËææÂºèÂèØ‰ª•Áî®‰ΩúÊ®°ÂºèÈÉ®ÂàÜÔºå‰πüÂèØ‰ª•Áî®Âú® @code{if} ËØ≠Âè•Ôºå@code{while} ËØ≠Âè•Ôºå@code{for} ËØ≠Âè•Ôºå‰ª•Âèä @code{do} ËØ≠Âè•„ÄÇ
ÔºàÊü•Áúã @ref{Statements}„ÄÇÔºâ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûú @var{exp}ÔºàÂ≠òÊúâÂ≠ó‰∏≤ÔºâÂåπÈÖç @var{regexp} Âàô‰ºö‰∏∫ÁúüÔºö

@example
@var{exp} ~ /@var{regexp}/
@end example

@noindent
‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂåπÈÖçÔºåÊàñËÄÖÈÄâÊã©ÊâÄÊúâÁöÑËæìÂÖ•ËÆ∞ÂΩï‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Âüü‰∏≠Êüê‰∏™Âú∞ÊñπÂ≠òÂú®Â§ßÂ≠óÁöÑÂ≠óÊØç @samp{J} Ôºö

@example
$ @kbd{awk '$1 ~ /J/' inventory-shipped}
@print{} Jan  13  25  15 115
@print{} Jun  31  42  75 492
@print{} Jul  24  34  67 436
@print{} Jan  21  36  64 620
@end example

‰∏ãÈù¢ÊâßË°å‰∏ÄÊ†∑ÁöÑÂäüËÉΩÔºö

@example
awk '@{ if ($1 ~ /J/) print @}' inventory-shipped
@end example

‰∏ã‰∏™‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûúË°®ËææÂºè @var{exp}ÔºàÂ≠òÊúâÂ≠ó‰∏≤Ôºâ@emph{‰∏ç}ÂåπÈÖç regexp Âàô‰∏∫ÁúüÔºö

@example
@var{exp} !~ /@var{regexp}/
@end example

‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÂåπÈÖçÊàñËÄÖÈÄâÊã©ÊâÄÊúâÁöÑÔºåÁ¨¨‰∏Ä‰∏™Âüü‰∏çÂåÖÂê´Â§ßÂÜôÂ≠óÊØç @samp{J} ÁöÑËÆ∞ÂΩïÔºö

@example
$ @kbd{awk '$1 !~ /J/' inventory-shipped}
@print{} Feb  15  32  24 226
@print{} Mar  15  24  34 228
@print{} Apr  31  52  63 420
@print{} May  16  34  29 208
@dots{}
@end example

@cindex regexp constants
@cindex constant regexps
@cindex regular expressions, constants, See regexp constants
ÂΩì regexp Ë¢´ÊñúÊù†ÂåÖÂê´Êó∂ÔºåÂ¶Ç @code{/foo/} Êàë‰ª¨Áß∞‰πã‰∏∫@dfn{Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè}ÔºåÂ∞±Á±ª‰ºº‰∫é @code{5.27} ÊòØ‰∏Ä‰∏™Êï∞ÂÄºÂ∏∏Èáè‰ª•Âèä @code{"foo"} ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏Èáè‰∏ÄÊ†∑„ÄÇ

@node Escape Sequences
@section ËΩ¨‰πâÂ∫èÂàó

@cindex escape sequences, in strings
@cindex backslash (@code{\}), in escape sequences
@cindex @code{\} (backslash), in escape sequences
Êúâ‰∫õÂ≠óÁ¨¶‰∏çËÉΩÂ§üÂéüÊ†∑Âú∞Âú®Â≠ó‰∏≤Â∏∏ÈáèÔºà@code{"foo"}ÔºâÊàñËÄÖÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà@code{/foo/}Ôºâ‰∏≠„ÄÇ
Áõ∏ÂèçÔºåÂÆÉ‰ª¨ÈúÄË¶ÅÊîæÂú®@dfn{ËΩ¨‰πâÂ∫èÂàó}‰∏≠ÔºåÂú®Ëøô‰∏™Â∫èÂàó‰∏≠ÔºåÂ≠óÁ¨¶‰ºöÁî®‰∏Ä‰∏™ÂèçÊñúÊù†Ôºà@samp{\}ÔºâÂºÄÂßã„ÄÇ
ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™Áî®Ê≥ïÂ∞±ÊòØÂú®‰∏Ä‰∏™ÂèåÂºïÂè∑Â≠ó‰∏≤Â∏∏Èáè‰∏≠ÂåÖÂê´Ëøõ‰∏Ä‰∏™ÂèåÂºïÂè∑„ÄÇÁî±‰∫éÂÖâÂèåÂºïÂè∑‰ºöÁªìÊùü‰∏Ä‰∏™‰∏≤ÔºåÂú®Â≠ó‰∏≤‰∏≠Ôºå‰Ω†ÂøÖÈ°ª‰ΩøÁî® @samp{\"} Êù•Ë°®Á§∫‰∏Ä‰∏™ÂÆûÈôÖÁöÑÂèåÂºïÂè∑„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{awk 'BEGIN @{ print "He said \"hi!\" to her." @}'}
@print{} He said "hi!" to her.
@end example

ÂèçÊñúÊù†Â≠óÁ¨¶Ëá™Â∑±Êú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™‰∏çËÉΩ‰ª•ÈÄöÂ∏∏ÊñπÂºèÂåÖÂê´ÁöÑÂ≠óÁ¨¶Ôºõ‰Ω†ÂøÖÈ°ªËæìÂÖ• @samp{\\} Êù•Â∞ÜÂèçÊñúÊù†ÂåÖÂê´ËøõÂ≠ó‰∏≤ÊàñËÄÖÊ≠£ÂàôË°®ËææÂºè‰∏≠„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÂ≠ó‰∏≤ÁöÑÂÜÖÂÆπ‰∏∫ @samp{"} ‰∏é @samp{\}ÔºåÂàôÂøÖÈ°ªÂÜôÊàê @code{"\"\\"}„ÄÇ

ÂÖ∂‰ªñÁöÑËΩ¨‰πâÂ≠óÁ¨¶ÊòØ‰∏Ä‰∫õÂ¶Ç TAB ÊàñËÄÖÊç¢Ë°åÁ¨¶ËøôÊ†∑ÁöÑ‰∏çÂèØÊâìÂç∞Â≠óÁ¨¶„ÄÇÊ≤°‰ªÄ‰πà‰∏úË•øÂèØ‰ª•ÈòªÊ≠¢‰Ω†ËæìÂÖ•Â§ßÂ§öÊï∞ÁöÑ‰∏çÂèØÊâìÂç∞Â≠óÁ¨¶Âà∞Â≠ó‰∏≤Â∏∏ÈáèÊàñËÄÖÊ≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰∏≠Ôºå‰ΩÜÈÇ£ÁúãËµ∑Êù•Â•á‰∏ëÊó†ÊØî„ÄÇ

‰∏ãÈù¢ÁöÑÂàóË°®ÂàóÂá∫‰∫ÜÊâÄÊúâÁöÑÂú® @command{awk} ‰∏≠‰ΩøÁî®ÁöÑËΩ¨‰πâÁöÑÂ≠óÁ¨¶‰ª•ÂèäÂÖ∂ÂØπÂ∫îÁöÑÂ≠óÁ¨¶„ÄÇÈô§ÈùûÂè¶Â§ñÊèêÁ§∫ÔºåÊâÄÊúâËøô‰∫õËΩ¨‰πâÂ≠óÁ¨¶Âç≥ÂèØÁî®‰∫éÂ≠ó‰∏≤Â∏∏Èáè‰πüÁî®‰∫éÊ≠£ÂàôË°®ËææÂºèÔºö

@table @code
@item \\
 Â≠óÁ¨¶ÂèçÊñúÊù† @samp{\}„ÄÇ

@c @cindex @command{awk} language, V.4 version
@cindex @code{\} (backslash), @code{\a} escape sequence
@cindex backslash (@code{\}), @code{\a} escape sequence
@item \a
 ‚Äúalert‚ÄùÂ≠óÁ¨¶Ôºå@kbd{Ctrl-g}ÔºåASCII ‰ª£Á†Å 7ÔºàBELÔºåÂìçÈìÉÔºâ„ÄÇÔºàËøôÈÄöÂ∏∏ÊòØÂà∂ÈÄ†‰∏Ä‰∫õÂèØ‰ª•Âê¨ÂæóÂà∞ÁöÑÂô™Â£∞„ÄÇÔºâ

@cindex @code{\} (backslash), @code{\b} escape sequence
@cindex backslash (@code{\}), @code{\b} escape sequence
@item \b
 ÈÄÄÊ†ºÔºå@kbd{Ctrl-h}ÔºåASCII ‰ª£Á†Å8ÔºàBSÔºâ„ÄÇ

@cindex @code{\} (backslash), @code{\f} escape sequence
@cindex backslash (@code{\}), @code{\f} escape sequence
@item \f
 Êç¢È°µÔºå@kbd{Ctrl-l}ÔºåASCII ‰ª£Á†Å 12ÔºàFFÔºâ„ÄÇ

@cindex @code{\} (backslash), @code{\n} escape sequence
@cindex backslash (@code{\}), @code{\n} escape sequence
@item \n
 Êç¢Ë°åÔºå@kbd{Ctrl-j}ÔºåASCII ‰ª£Á†Å 10ÔºàLFÔºâ„ÄÇ

@cindex @code{\} (backslash), @code{\r} escape sequence
@cindex backslash (@code{\}), @code{\r} escape sequence
@item \r
 ÂõûËΩ¶Ôºå@kbd{Ctrl-m}ÔºåASCII ‰ª£Á†Å13ÔºàCRÔºâ„ÄÇ

@cindex @code{\} (backslash), @code{\t} escape sequence
@cindex backslash (@code{\}), @code{\t} escape sequence
@item \t
 Ê∞¥Âπ≥Ë∑≥Ê†ºÔºå@kbd{Ctrl-i}ÔºåASCII ‰ª£Á†Å9ÔºàHTÔºâ„ÄÇ

@c @cindex @command{awk} language, V.4 version
@cindex @code{\} (backslash), @code{\v} escape sequence
@cindex backslash (@code{\}), @code{\v} escape sequence
@item \v
 ÂûÇÁõ¥Ë∑≥Ê†ºÔºå@kbd{Ctrl-k}ÔºåASCII ‰ª£Á†Å11ÔºàVTÔºâ„ÄÇ

@cindex @code{\} (backslash), @code{\}@var{nnn} escape sequence
@cindex backslash (@code{\}), @code{\}@var{nnn} escape sequence
@item \@var{nnn}
 ÂÖ´ËøõÂà∂ÂÄº @var{nnn}Ôºå@var{nnn} Ë°®Á§∫ 1 Âà∞ 3 ‰ΩçÁöÑ @samp{0} Âà∞ @samp{7} ‰πãÈó¥ÁöÑÊï∞Â≠ó„ÄÇÂ¶ÇÔºåASCII ESC Â≠óÁ¨¶ÁöÑ‰ª£Á†ÅÊòØ @samp{\033}„ÄÇ

@c @cindex @command{awk} language, V.4 version
@c @cindex @command{awk} language, POSIX version
@cindex @code{\} (backslash), @code{\x} escape sequence
@cindex backslash (@code{\}), @code{\x} escape sequence
@cindex common extensions, @code{\x} escape sequence
@cindex extensions, common@comma{} @code{\x} escape sequence
@item \x@var{hh}@dots{}
 ÂçÅÂÖ≠ËøõÂà∂ÂÄº @var{hh}Ôºå@var{hh} Ë°®Á§∫ÂçÅÂÖ≠ËøõÂà∂Êï∞Â≠óÔºà@samp{0} Âà∞ @samp{9}Ôºå‰ª•Âèä @samp{A} Âà∞ @samp{F} ÊàñËÄÖ @samp{a} Âà∞ @samp{f}ÔºâÂ∫èÂàó„ÄÇ
Á±ª‰ºº‰∫é ISO C ‰∏≠ÁöÑÁªìÊûÑÔºåËΩ¨Êç¢Â∫èÂàó‰∏ÄÁõ¥Âª∂Áª≠Âà∞Á¨¨‰∏Ä‰∏™ÈùûÂçÅÂÖ≠ËøõÂà∂ÁöÑÊï∞Â≠ó‰∏∫Ê≠¢„ÄÇ
@value{COMMONEXT}‰ΩÜÊòØÔºå‰ΩøÁî®‰∏§‰∏™‰ª•‰∏äÁöÑÂçÅÂÖ≠ËøõÂà∂ÁöÑÊï∞Â≠ó‰ºö‰∫ßÁîüÊú™ÂÆö‰πâÁöÑÁªìÊûú„ÄÇÔºà@samp{\x} ËΩ¨‰πâÂ∫èÂàóÂú® POSIX @command{awk} ‰∏≠‰∏çË¢´ÊîØÊåÅ„ÄÇÔºâ

@quotation Ê≥®ÊÑè
‰∏ã‰∏Ä‰∏™ @command{gawk} ÁöÑ‰∏ªË¶ÅÁâàÊú¨‰ºöÊúâÊîπÂèòÔºå‰ºö‰ΩøÁî®Âà∞ @samp{\x} ÂêéÈù¢Ë∑ü‰∏§‰∏™ÊúÄÂ§ßÁöÑÂçÅÂÖ≠ËøõÂà∂Êï∞Â≠óÁöÑÊÉÖÂÜµ„ÄÇ
@end quotation

@cindex @code{\} (backslash), @code{\/} escape sequence
@cindex backslash (@code{\}), @code{\/} escape sequence
@item \/
A literal slash (necessary for regexp constants only).
 Â≠óÈù¢ÊñúÊù†Â≠óÁ¨¶ÔºàÂú®Ê≠£ÂàôË°®ËææÂºèÁöÑÂ∏∏Èáè‰∏≠‰ΩøÁî®Ôºâ„ÄÇÂΩì‰Ω†Ë¶ÅÂú®‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºè‰∏≠Âä†ÂÖ•ÊúâÂèçÊñúÊù†ÁöÑË°®ËææÂºèÂ∏∏ÈáèÊó∂‰ΩøÁî®
ÔºàÂ¶Ç @code{/.*:\/home\/[[:alnum:]]+:.*/} Á¨¶Âè∑‰ºöÂú® @ref{Bracket Expressions} ËÆ®ËÆ∫„ÄÇÔºâ
Áî±‰∫éÊ≠£ÂàôË°®ËææÂºèÈÄöËøáÊñúÊù†Êù•ÂàÜÈöîÔºåÊâÄ‰ª•Â¶ÇÊûúÊñúÊù†ÊòØÂÖ∂‰∏≠ÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰Ω†Â∞±ÈúÄË¶ÅËøõË°åËΩ¨‰πâÔºå‰ª•ÈÄöÁü• @command{awk} ÁªßÁª≠Â§ÑÁêÜÊ≠£ÂàôË°®ËææÂºèÂêéÈù¢ÁöÑÈÉ®ÂàÜ„ÄÇ

@cindex @code{\} (backslash), @code{\"} escape sequence
@cindex backslash (@code{\}), @code{\"} escape sequence
@item \"
 Â≠óÈù¢ÂèåÂºïÂè∑Ôºà‰ªÖÂú®Â≠ó‰∏≤Â∏∏Èáè‰∏≠‰ΩøÁî®Ôºâ„ÄÇËøô‰∏™Â∫èÂàóÂΩì‰Ω†Ë¶ÅÂú®‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏Èáè‰∏≠ÂåÖÂê´ÂèåÂºïÂè∑Êó∂‰ΩøÁî®
 Ôºà‰æãÂ¶Ç @code{"He said \"hi!\" to her."}Ôºâ„ÄÇ
 Áî±‰∫éÂèåÂºïÂè∑Áî®Êù•ÂàÜÈöîÂ≠ó‰∏≤ÔºåÊâÄ‰ª•ÂΩìÂú®Â≠ó‰∏≤‰∏≠ÊúâÂèåÂºïÂè∑Êó∂Ôºå‰Ω†ÈúÄË¶ÅËøõË°åËΩ¨‰πâÔºå‰ª•ÈÄöÁü• @command{awk} ÁªßÁª≠Â§ÑÁêÜÂ≠ó‰∏≤ÂêéÈù¢ÁöÑÈÉ®ÂàÜ„ÄÇ
@end table

Âú® @command{gawk} ÁöÑÊ≠£ÂàôË°®ËææÂºè‰∏≠ÔºåÊúâËÆ∏Â§öÁöÑ‰ª•ÂèçÊñúÊù†ÂºÄÂßã‰∏§Â≠óÁ¨¶Â∫èÂàóÊúâÂÖ≥ÁâπÊÆäÁöÑÊÑè‰πâ„ÄÇÊü•Áúã @ref{GNU Regexp Operators}„ÄÇ

Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÔºåÂú®‰ªªÊÑèÂ≠óÁ¨¶ÂâçÁöÑÂèçÊñúÊù†Ôºå‰∏çÂú®ÂâçÈù¢ÁöÑÂàóË°®‰∏≠Ôºå‰πüÊ≤°ÊúâÂú® @ref{GNU Regexp Operators} ‰∏≠ÔºåÂÖ∂‰∏ã‰∏Ä‰∏™Â≠óÁ¨¶Âàô‰ºöÊåâÂ≠óÈù¢ÁöÑÂ§ÑÁêÜ„ÄÇ
Â∞±ÁÆóÂÆÉÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊòØÊ≠£ÂàôË°®ËææÂºèÁöÑÊìç‰ΩúÁ¨¶„ÄÇ‰æãÂ¶Ç @code{/a\+b/} ÂåπÈÖç3‰∏™Â≠óÁ¨¶ÁöÑ‰∏≤ @samp{a+b} „ÄÇ

@cindex backslash (@code{\}), in escape sequences
@cindex @code{\} (backslash), in escape sequences
@cindex portability
‰∏∫‰∫ÜÂÆåÂÖ®ÂèØÁßªÊ§çÔºå‰∏çË¶Å‰ΩøÁî®‰ªª‰ΩïÊ≤°ÊúâÂú®ÂâçÈù¢ÂàóË°®ÂàóÂá∫ÁöÑÂ≠óÁ¨¶ÊàñËÄÖÂú®‰∏çÊòØÊ≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶Â≠óÁ¨¶Ââç‰ΩøÁî®ÂèçÊñúÊù†„ÄÇ

@c 11/2014: Moved so as to not stack sidebars
@sidebar Â∏∏ËßÑÂ≠óÁ¨¶ÂâçÁöÑÂèçÊñúÊù†
@cindex portability, backslash in escape sequences
@cindex POSIX @command{awk}, backslashes in string constants
@cindex backslash (@code{\}), in escape sequences, POSIX and
@cindex @code{\} (backslash), in escape sequences, POSIX and

@cindex troubleshooting, backslash before nonspecial character
Â¶ÇÊûú‰Ω†Âú®Â≠ó‰∏≤Â∏∏Èáè‰∏≠ÁöÑÊüê‰∏™Êú™Âú®ÂâçÈù¢ÁöÑÂàóË°®‰∏≠ÂàóÂá∫ÁöÑÂ≠óÁ¨¶Ââç‰ΩøÁî®ÂèçÊñúÊù†ÔºåPOSIX @command{awk} ÊúâÊÑèÂú∞‰ΩøËøôÁßçÊÉÖÂÜµ‰∏∫Êú™ÂÆö‰πâ„ÄÇÊúâ‰∏§‰∏™ÈÄâÊã©Ôºö

@c @cindex automatic warnings
@c @cindex warnings, automatic
@cindex Brian Kernighan's @command{awk}
@table @asis
@item ÊääÂèçÊñúÊù†ÂéªÊéâ
ËøôÊ≠£ÊòØ BWK @command{awk} ‰∏é @command{gawk} ‰∏§ËÄÖÊâÄÂÅöÁöÑ„ÄÇ
‰æãÂ¶Ç @code{"a\qc"} ‰∏é @code{"aqc"} ‰∏ÄÊ†∑„ÄÇ
ÔºàÂõ†‰∏∫ËøôÊòØÂæàÂÆπÊòìÂºïÂÖ•ÔºåÂèàÂÆπÊòìÈîôËøáÁöÑ BugÔºå@command{gawk} ‰ºöÁªô‰∫àË≠¶Âëä„ÄÇÔºâ
ËÄÉËôë @samp{FS = @w{"[ \t]+\|[ \t]+"}} ‰ΩøÁî®Á´ñÁ∫ø @samp{|} ‰ª•ÂèäÂë®ËæπÁöÑÁ©∫ÁôΩ‰Ωú‰∏∫ÂüüÂàÜÈöîÁ¨¶Ôºå
ËøôÊó∂ÔºåÈúÄË¶ÅÂú®Â≠ó‰∏≤‰∏≠‰ΩøÁî®‰∏§‰∏™ÂèçÊñúÊù†Ôºö@samp{FS = @w{"[ \t]+\\|[ \t]+"}}„ÄÇÔºâ
@c I did this!  This is why I added the warning.

@cindex @command{gawk}, escape sequences
@cindex Unix @command{awk}, backslashes in escape sequences
@cindex @command{mawk} utility
@item ‰øùÁïôÂèçÊñúÊù†
Êúâ‰∏Ä‰∫õ @command{awk} ÂÆûÁé∞‰ºöËøô‰πàÂÅö„ÄÇÂú®ËøôÁßçÂÆûÁé∞‰∏≠ÔºåËæìÂÖ• @code{"a\qc"} Â∞Ü‰∏éËæìÂÖ• @code{"a\\qc"} Áõ∏Âêå„ÄÇ
@end table
@end sidebar

ÊÄªÁªì‰∏Ä‰∏ãÔºö

@itemize @value{BULLET}
@item
ÂØπ‰∫éÂ≠ó‰∏≤Â∏∏Èáè‰∏éÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºåÂâçÈù¢ÂàóË°®‰∏≠ÁöÑËΩ¨‰πâÂ∫èÂàóÈÉΩÊòØ‰ºöÈ¶ñÂÖàÂ§ÑÁêÜ„ÄÇÂ§ÑÁêÜÁöÑÊó∂Èó¥ÈùûÂ∏∏Èù†ÂâçÔºå@command{awk} ‰∏ÄËØªÂÆå‰Ω†ÁöÑÁ®ãÂ∫èÔºåÂ∞±Â§ÑÁêÜ‰∫Ü„ÄÇ

@item
Â∏∏ÈáèÊ≠£ÂàôË°®ËææÂºèÊàñËÄÖÂä®ÊÄÅÊ≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @ref{Computed Regexps}ÔºâÔºå@command{gawk} ÈÉΩ‰ºöÂ§ÑÁêÜÂàóÂú® @ref{GNU Regexp Operators} ‰∏≠ÁöÑÊìç‰ΩúÁ¨¶„ÄÇ

@item
Âú®ÂÖ∂‰ªñÁöÑÁ¨¶Âè∑Ââç‰ΩøÁî®ÂèçÊñúÊù†ÔºåÈÉΩË°®Á§∫ÊääËøô‰∏™Á¨¶Âè∑ÊåâÂ≠óÈù¢Â§ÑÁêÜ„ÄÇ
@end itemize

@sidebar ËΩ¨‰πâÂÖÉÂ≠óÁ¨¶
@cindex metacharacters, escape sequences for

ÂÅáËÆæ‰Ω†‰ΩøÁî®ÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂ËΩ¨‰πâÊù•Êèê‰∫§Ê≠£ÂàôË°®ËææÂºèÁöÑÂÖÉÂ≠óÁ¨¶ÔºàÊü•Áúã @ref{Regexp Operators}ÔºâÔºå@command{awk} ÊòØÂê¶Â∞ÜËøô‰∫õÂ≠óÁ¨¶ÂÅö‰∏∫Â≠óÈù¢Â≠óÁ¨¶ËøòÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶Ôºü

@cindex dark corner, escape sequences, for metacharacters
Áî±‰∫éÂéÜÂè≤ÂéüÂõ†ÔºåËøôÊ†∑ÁöÑÂ≠óÁ¨¶ÊòØÊåâÁÖßÂ≠óÈù¢Â≠óÁ¨¶Êù•Â§ÑÁêÜÁöÑ„ÄÇ
@value{DARKCORNER}
ÁÑ∂ËÄåÔºåPOSIX Ê†áÂáÜÂç¥Ë°®Á§∫ÂÆÉ‰ª¨Â∫îËØ•Ë¢´ÂΩìÊàêÁúüÊ≠£ÁöÑÂÖÉÂ≠óÁ¨¶Ôºå@command{gawk} ÂàôÊòØËøô‰πàÂ§ÑÁêÜÁöÑ„ÄÇ
Âú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºå@command{gawk} Âú®Ê≠£ÂàôË°®ËææÂºèÂ∏∏‰∏≠‰ºöÂ∞ÜËøô‰∫õËΩ¨‰πâÁöÑÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂ÁöÑÂ≠óÁ¨¶ÊåâÂ≠óÈù¢Â§ÑÁêÜ„ÄÇÂõ†Ê≠§ @code{/a\52b/} ‰∏é @code{/a\*b/} Á≠âÂêå„ÄÇ
@end sidebar

@node Regexp Operators
@section Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶
@cindex regular expressions, operators
@cindex metacharacters in regular expressions

‰Ω†ÂèØ‰ª•Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠‰∏éÁâπÂÆöÂ≠óÁ¨¶ËøõË°åÁªÑÂêàÔºåÁß∞‰∏∫@dfn{Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶}ÊàñËÄÖ@dfn{ÂÖÉÂ≠óÁ¨¶}ÔºåÊù•ÁªôÊ≠£Â∏∏Ë°®ËææÂºèÂä†ÂÖ•Êõ¥Âä†Âº∫Â§ßÁöÑËÉΩÂäõ‰∏éÂ§öÊ†∑ÊÄß„ÄÇ

Âú®ÂâçËäÇ @ref{Escape Sequences} ‰∏≠ÊâÄÊèèËø∞ÁöÑËΩ¨‰πâÂ≠óÁ¨¶ÔºåÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠‰πüÊòØÊúâÊïàÁöÑ„ÄÇ
ÂÆÉ‰ª¨ÈÄöËøáÂèçÊñúÊù† @samp{\} ÂºïÂÖ•ÔºåÁÑ∂ÂêéÂú®Â§ÑÁêÜÊ≠£ÂàôË°®ËææÂºèÁ¨¨‰∏ÄÊ≠•ÔºåË¢´ËØÜÂà´ÊàêÊàñËÄÖËΩ¨Êç¢ÊàêÁõ∏Â∫îÁöÑÁúüÂÆûÂ≠óÁ¨¶„ÄÇ

‰∏ãÈù¢ÊòØÂÖÉÂ≠óÁ¨¶ÂàóË°®„ÄÇÊâÄÊúâÁöÑÈÇ£‰∫õÊú™ÂàóÂú®Ê≠§ÁöÑÔºåÈùûËΩ¨‰πâÂ∫èÂàóÔºåÂ∞±ÊòØ‰ª£Ë°®‰ªñ‰ª¨Ëá™Â∑±Ôºö

@c Use @asis so the docbook comes out ok. Sigh.
@table @asis
@cindex backslash (@code{\}), regexp operator
@cindex @code{\} (backslash), regexp operator
@item @code{\}
Ëøô‰∏™ÂèñÊ∂à‰∫ÜÊüê‰∏™Â≠óÁ¨¶ÁöÑÂú®ÂåπÈÖçÊó∂ÁöÑÁâπÊÆäÂê´‰πâÔºåÂ¶Ç @samp{\$} Â∞±ÊòØÂåπÈÖçÂ≠óÁ¨¶ @samp{$} „ÄÇ

@cindex regular expressions, anchors in
@cindex Texinfo, chapter beginnings in files
@cindex @code{^} (caret), regexp operator
@cindex caret (@code{^}), regexp operator
@item @code{^}
ËøôÈáåÂåπÈÖçÂ≠ó‰∏≤ÁöÑÂºÄÂ§¥„ÄÇ@samp{^@@chapter} ÂåπÈÖçÂ≠ó‰∏≤ÂºÄÂ§¥ÁöÑ @samp{@@chapter}ÔºåÂ¶ÇÂèØ‰ª•Áî®Êù•ËØÜÂà´ Texinfo ‰∏≠Á´†ÁöÑÂºÄÂ§¥„ÄÇ
@samp{^} ‰πüË¢´Áß∞‰∏∫@dfn{ÈîöÂÆöÁ¨¶}ÔºåÂõ†‰∏∫ÂÆÉÂ∞±ÊòØÂ∞ÜÊ®°ÂºèËÆæÂÆöÊàêÂåπÈÖçÂ≠ó‰∏≤ÁöÑÂºÄÂ§¥„ÄÇ

Ë¶Å‰∫ÜËß£ @samp{^} Âπ∂‰∏çÊòØÂåπÈÖçÂÜÖÂµåÂú®Â≠ó‰∏≤‰∏≠Ë°åÂ§¥ÔºàÂç≥ @samp{\n} Â≠óÁ¨¶Ê≠£Âè≥ËæπÁöÑÁÇπÔºâ„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Êù°‰ª∂Ë°®ËææÂºè‰∏ç‰∏∫ÁúüÔºö

@example
if ("line1\nLINE 2" ~ /^L/) @dots{}
@end example

@cindex @code{$} (dollar sign), regexp operator
@cindex dollar sign (@code{$}), regexp operator
@item @code{$}
Ëøô‰∏™‰∏é @samp{^} Á±ª‰ººÔºå‰ΩÜÊòØÂåπÈÖçÁöÑÊòØ‰∏≤Â∞æ„ÄÇÂ¶Ç @samp{p$} ÂåπÈÖç‰ª• @samp{p} ÁªìÂ∞æÁöÑ‰∏≤„ÄÇ
@samp{$} ÊòØ‰∏™ÈîöÂÆöÁ¨¶Ôºå‰ΩÜÊòØ‰∏çÂåπÈÖçÂÜÖÂµåÂú®Â≠ó‰∏≤‰∏≠Ë°åÂ∞æÔºàÂú® @samp{\n} ÊåâË°åÁ¨¶Ê≠£ÂâçÁöÑ‰ΩçÁΩÆÔºâ„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÁöÑÊù°‰ª∂ËøîÂõûÈùûÁúü„ÄÇ

@example
if ("line1\nLINE 2" ~ /1$/) @dots{}
@end example

@cindex @code{.} (period), regexp operator
@cindex period (@code{.}), regexp operator
@item @code{.} (period)
ÂåπÈÖçÂçï‰∏™Â≠óÁ¨¶Ôºå@emph{ÂåÖÊã¨}Êç¢Ë°åÁ¨¶„ÄÇ
Â¶Ç @samp{.P} ÂåπÈÖç‰ªªÊÑèÂ≠óÁ¨¶ÂêéÈù¢Ë∑ü @samp{P} ÁöÑ‰ªªÊÑèÂ≠ó‰∏≤„ÄÇÈÄöËøá‰ΩøÁî®ËøûÊé•Á¨¶ÔºåÊàë‰ª¨ÂèØ‰ª•ÊûÑÈÄ†ËøôÊ†∑ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂ¶Ç @samp{U.A}Ôºå Êù•ÂåπÈÖç‰ªªÊÑèÁöÑ‰∏âÂ≠óÁ¨¶Â∫èÂàóÔºåÂÖ∂‰ª• @samp{U} ÂºÄÂ§¥Ôºå‰ª• @samp{A} ÁªìÂ∞æ„ÄÇ

@cindex POSIX @command{awk}, period (@code{.})@comma{} using
Âú®‰∏•Ê†ºÁöÑ POSIX Ê®°ÂºèÔºàÊü•Áúã @ref{Options}Ôºâ‰∏ãÔºå@samp{.} ‰∏çÂåπÈÖç @sc{nul}ÔºàÁ©∫ÔºâÂ≠óÁ¨¶ÔºåËØ•Â≠óÁ¨¶ÊâÄÊúâÁöÑ‰ΩçÈÉΩË¢´ÁΩÆÊàê‰∫Ü 0„ÄÇ
Âê¶ÂàôÔºå@sc{nul} Â∞±Âè™ÊòØÂè¶‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{awk} ÂèØËÉΩ‰∏çËÉΩÂåπÈÖç @sc{nul} Â≠óÁ¨¶„ÄÇ

@cindex @code{[]} (square brackets), regexp operator
@cindex square brackets (@code{[]}), regexp operator
@cindex bracket expressions
@cindex character sets, See Also bracket expressions
@cindex character lists, See bracket expressions
@cindex character classes, See bracket expressions
@item @code{[}@dots{}@code{]}
Ëøô‰∏úË•øÂè´@dfn{ÊñπÊã¨Âè∑Ë°®ËææÂºè}„ÄÇ@footnote{Âú®ÂÖ∂‰ªñËØ¥Ê≥ï‰∏≠Ôºå‰Ω†ÂèØËÉΩ‰ºöÁúãÂà∞ÊñπÊã¨Âè∑Ë°®ËææÂºèÊåáÁöÑÊòØË¶Å‰πàÊòØ‰∏Ä‰∏™@dfn{Â≠óÁ¨¶ÈõÜ}ÔºåÊàñËÄÖ@dfn{Â≠óÁ¨¶Á±ªÂûã}ÔºåÊàñËÄÖÊòØ‰∏Ä‰∏™@dfn{Â≠óÁ¨¶ÂàóË°®}„ÄÇ}
ÂÆÉË¶ÅÂåπÈÖçÁöÑÊòØÂåÖÂê´Âú®ÊñπÊã¨Âè∑‰∏≠ÁöÑ‰ªªÊÑè@emph{‰∏Ä‰∏™}Â≠óÁ¨¶„ÄÇ
‰æãÂ¶ÇÔºå@samp{[MVX]} ÂåπÈÖçÂ≠óÁ¨¶ @samp{M}Ôºå@samp{V} ÊàñËÄÖ @samp{X} ‰∏≠ÁöÑ‰∏Ä‰∏™„ÄÇÂèØ‰ª•Âú®ÊñπÊã¨Âè∑‰∏≠ÊîæÂÖ•‰ªÄ‰πàÂ≠óÁ¨¶ÁöÑÂÆåÊï¥ËÆ®ËÆ∫Âú® @ref{Bracket Expressions}„ÄÇ

@cindex bracket expressions, complemented
@item @code{[^}@dots{}@code{]}
Ëøô‰∏™ÊòØ@dfn{ÊñπÊã¨Âè∑Áõ∏ÂèçË°®ËææÂºè}„ÄÇÂú®Â≠óÁ¨¶ @samp{[} ÂêéÈù¢ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶@emph{ÂøÖÈ°ª}ÊòØ @samp{^}„ÄÇ
ËøôÈáåÂåπÈÖç@emph{Èô§‰∫Ü}ÊñπÊã¨Âè∑‰∏≠ÂàóÂá∫ÁöÑÈÇ£‰∫õÂ≠óÁ¨¶„ÄÇ‰æãÂ¶ÇÔºå@samp{[^awk]}ÔºåÂåπÈÖç‰∏çÊòØ @samp{a}Ôºå@samp{w}Ôºå@samp{k} ÁöÑÂ≠óÁ¨¶„ÄÇ

@cindex @code{|} (vertical bar)
@cindex vertical bar (@code{|})
@item @code{|}
Ëøô‰∏™ÊòØ@dfn{ÈÄâÊã©Êìç‰ΩúÁ¨¶}ÔºåÁî®Êù•ÊåáÂÆöÂÖ∂‰ªñÈÄâÊã©„ÄÇ
@samp{|} Âú®ÊâÄÊúâÁöÑÊ≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶‰∏≠ÂÖ∑ÊúâÊúÄ‰ΩéÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ
‰æãÂ¶ÇÔºå@samp{^P|[aeiiouy]} Ë¶Å‰πàÂåπÈÖç @samp{^P}ÔºåË¶Å‰πàÂåπÈÖç @samp{[aeiouy]}„ÄÇ
Â∞±ÊòØËØ¥ÔºåÂåπÈÖç‰ªªÊÑè‰ª• @samp{P} ÂºÄÂ§¥ÁöÑÂ≠ó‰∏≤ÔºåÊàñËÄÖÂåÖÂê´ÔºàÂú®Â≠ó‰∏≤‰∏≠ÁöÑ‰ªª‰∏Ä‰ΩçÁΩÆÔºâËã±ËØ≠ÂÖÉÈü≥Â≠óÊØçÁöÑÂ≠ó‰∏≤„ÄÇ

ÈÄâÊã©Êìç‰Ωú‰ºöÂú®Ê≠£ÂàôË°®ËææÂºèÁöÑ‰∏§ËæπÂèñ‰∏≠ÊúÄÂ§ßÂèØËÉΩÊÄßÁöÑ‰∏ÄËæπ„ÄÇ

@cindex @code{()} (parentheses), regexp operator
@cindex parentheses @code{()}, regexp operator
@item @code{(}@dots{}@code{)}
ÂúÜÊã¨Âè∑Áî®Êù•ÂØπÊ≠£ÂàôË°®ËææÂºèËøõË°åÁªÑÂêàÔºåÂ¶ÇÁÆóÊ≥ï‰∏≠ÁöÑÁ±ª‰ºº„ÄÇ‰ªñ‰ª¨ÂèØ‰ª•Â∞ÜÂÖ∑ÊúâÈÄâÊã©Êìç‰ΩúÁ¨¶ @samp{|} ÁöÑÊ≠£ÂàôË°®ËææÂºèÁªÑÂêàËµ∑Êù•„ÄÇ
‰æãÂ¶Ç @samp{@@(samp|code)\@{[^@}]+\@}]+\@}} 
ËÉΩÂ§üÂåπÈÖç @samp{@@code@{foo@}} ‰∏é @samp{@@samp@{bar@}}„ÄÇ
ÔºàËøôÈáå Texinfo ÁöÑÊ†ºÂºèÊéßÂà∂Â∫èÂàó„ÄÇ @samp{+} Âú®Êú¨ÂàóË°®‰∏≠ÂêéÈù¢Ëß£Èáä„ÄÇÔºâ

@cindex @code{*} (asterisk), @code{*} operator, as regexp operator
@cindex asterisk (@code{*}), @code{*} operator, as regexp operator
@item @code{*}
Ëøô‰∏™Á¨¶Âè∑Ë°®ËææÂâçÈù¢ÁöÑÊ≠£ÂàôË°®ËææÂºèÂèØ‰ª•ÈáçÂ§çÂ§öÊ¨°Êù•ÊâæÂåπÈÖç„ÄÇ
‰æãÂ¶Ç @samp{ph*} ‰∏≠Â∞Ü @samp{*} Á¨¶Âè∑ÊîæÂú®ÂâçÈù¢ÁöÑ @samp{h} ÂêéÈù¢ÔºåÊù•Êü•Êâæ‰∏Ä‰∏™ @samp{p} ÂêéÈù¢Ë∑üË∑üÈöè‰ªªÊÑèÂ§ö‰∏™ @samp{h} ÁöÑÂåπÈÖç‰∏≤„ÄÇËøô‰πü‰ºöÂåπÈÖç‰ªÖÊúâ @samp{p}ÔºåËÄåÂêéÈù¢Ê≤°Êúâ @samp{h} ÁöÑÊÉÖÂÜµ„ÄÇ

Âú®ÁêÜËß£ @samp{*} Â¶Ç‰ΩïÂ∑•‰Ωú‰∏äÈù¢ÔºåÊúâ‰∏§‰∏™ÂæÆÂ¶ôÁöÑÂú∞ÊñπË¶ÅÊ≥®ÊÑè„ÄÇÁ¨¨‰∏ÄÔºå@samp{*} Âè™Â∫îÁî®Âú®ÂÖ∂ÂâçÈù¢ÁöÑÂçïÁã¨Ê≠£ÂàôË°®ËææÂºèÁªÑ‰ª∂Ôºà‰æãÂ¶ÇÔºåÂú® @samp{ph*} ‰∏≠ÔºåÂè™‰ΩúÁî®‰∫é @samp{h}Ôºâ„ÄÇ
Ë¶Å‰Ωø @samp{*} Â∫îÁî®Âú®‰∏Ä‰∏™Êõ¥Â§ßÁöÑÂ≠êË°®ËææÂºè‰∏≠ÔºåÂàô‰ΩøÁî®Êã¨Âè∑Ôºö@samp{(ph)*} ÂåπÈÖç @samp{ph}Ôºå@samp{phph}Ôºå@samp{phphph} Á≠âÁ≠â„ÄÇ

Á¨¨‰∫åÔºå@samp{*} ‰ºöÊü•ÊâæÂ∞ΩÂèØËÉΩÂ§öÁöÑÈáçÂ§ç„ÄÇÂ¶ÇÊûúË¶ÅÂåπÈÖçÁöÑÊñáÊú¨‰∏∫ @samp{phhhhhhhhhhhhhhooey}ÔºåÂàô @samp{ph*} ‰ºöÂåπÈÖçÊâÄÊúâÁöÑ @samp{h} „ÄÇ

@cindex @code{+} (plus sign), regexp operator
@cindex plus sign (@code{+}), regexp operator
@item @code{+}
Êú¨Á¨¶Âè∑Á±ª‰ºº‰∫é @samp{*}ÔºåÂè™ÊòØÂÖ∂ÂâçÈù¢ÁöÑË°®ËææÂºèËá≥Â∞ëË¶ÅÂåπÈÖç‰∏ÄÊ¨°„ÄÇËøôÂ∞±ÊòØËØ¥Ôºå@samp{wh+y} ‰ºöÂåπÈÖç @samp{why}Ôºå‰ª•Âèä @samp{whhy}Ôºå‰ΩÜÊòØ‰∏ç‰ºöÂåπÈÖç @samp{wy}ÔºåËÄå @samp{wh*y} Âàô‰ºöÂåπÈÖçÊâÄÊúâÁöÑ‰∏â‰∏™„ÄÇ

@cindex @code{?} (question mark), regexp operator
@cindex question mark (@code{?}), regexp operator
@item @code{?}
Ëøô‰∏™Á¨¶Âè∑Á±ª‰ºº‰∫é @samp{*}ÔºåÂè™ÊòØÂÖ∂ÂâçÈù¢ÁöÑË°®ËææÂºèÂè™ËÉΩÂåπÈÖçË¶Å‰πà‰∏ÄÊ¨°ÔºåË¶Å‰πà‰∏çÂåπÈÖç„ÄÇ‰æãÂ¶ÇÔºå@samp{fe?d} ÂåπÈÖç @samp{fed} ‰∏é @samp{fd}ÔºåËÄå‰∏çÊòØÂÖ∂‰ªñÁöÑ‰ªÄ‰πà„ÄÇ

@cindex interval expressions, regexp operator
@item @code{@{}@var{n}@code{@}}
@itemx @code{@{}@var{n}@code{,@}}
@itemx @code{@{}@var{n}@code{,}@var{m}@code{@}}
Âú®Ëä±Êã¨Âè∑‰∏≠‰∏éÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∏™ÊàñËÄÖ‰∏§‰∏™Êï∞ÂÄºË°®Á§∫‰∏ÄÁßç@dfn{Âå∫Èó¥Ë°®ËææÂºè}„ÄÇ
Â¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™Êï∞ÂÄºÂú®Ëä±Êã¨Âè∑‰∏≠ÔºåÂàôÂâçÈù¢ÁöÑË°®ËææÂºèÈáçÂ§ç @var{n} Ê¨°„ÄÇ
Â¶ÇÊûúÊúâ‰∏§‰∏™Êï∞ÂÄºÔºåÂπ∂‰ª•ÈÄóÂè∑ÂàÜÈöîÔºåÂàôÂâçÈù¢ÁöÑË°®ËææÂºèÈáçÂ§ç @var{n} Âà∞ @var{m} Ê¨°„ÄÇ
Â¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™Êï∞ÂÄºÔºåÂêéÈù¢Ë∑ü‰∏Ä‰∏™ÈÄóÂè∑ÔºåÂàôÂâçÈù¢ÁöÑË°®ËææÂºèËá≥Â∞ëË¶ÅÈáçÂ§ç @var{n} Ê¨°„ÄÇ

@table @code
@item wh@{3@}y
ÂåπÈÖç @samp{whhhy}Ôºå ‰ΩÜ‰∏çÂåπÈÖç @samp{why} or @samp{whhhhy} „ÄÇ

@item wh@{3,5@}y
Âè™ÂåπÈÖç @samp{whhhy}Ôºå@samp{whhhhy}ÔºåÊàñËÄÖ @samp{whhhhhy} „ÄÇ

@item wh@{2,@}y
ÂåπÈÖç @samp{whhy}Ôºå@samp{whhhy}ÔºåÁ≠âÁ≠â„ÄÇ
@end table

@cindex POSIX @command{awk}, interval expressions in
Âå∫Èó¥Ë°®ËææÂºèÂú® @command{awk} ‰∏äÂéÜÊù•‰∏çÂèóÊîØÊåÅ„ÄÇÂêéÈù¢Êàê‰∏∫ POSIX Ê†áÂáÜÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩøÂæó @command{awk} ‰∏é @command{egrep} ‰πãÈó¥Áõ∏‰∫í‰øùÊåÅ‰∏ÄËá¥„ÄÇ

@cindex @command{gawk}, interval expressions and
ÊúÄÂºÄÂßãÊó∂ÔºåÁî±‰∫éÊóßÁöÑÁ®ãÂ∫èÂèØËÉΩÂú®Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰∏≠‰ΩøÁî® @samp{@{} ‰∏é @samp{@}}Ôºå@command{gawk} Âõ†Ê≠§Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠@emph{‰∏ç}ÂåπÈÖçÂå∫Èó¥Ë°®ËææÂºè„ÄÇ

‰ΩÜÊòØ‰ªé 4.0 ÂºÄÂßãÔºå@command{gawk} ÂºÄÂßãÈªòËÆ§ÂåπÈÖçÂå∫Èó¥Ë°®ËææÂºè„ÄÇËøôÊòØÂõ†‰∏∫‰∏é POSIX Ê†áÂáÜÂÖºÂÆπÔºåÁõ∏ÊØî‰∫é‰∏éÊóßÁöÑÁ®ãÂ∫èÂÖºÂÆπÔºåÂâçËÄÖÊõ¥‰∏∫ÈáçË¶Å„ÄÇ

ÂØπ‰∫éÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠‰ΩøÁî® @samp{@{} ‰∏é @samp{@}} ÁöÑÁ®ãÂ∫èÔºåÂ•ΩÁöÑÂÆûË∑µÊòØÂ∞Ü‰ªñ‰ª¨Áî®ÂèçÊñúÊù†ËøõË°åËΩ¨‰πâ„ÄÇ
ËøôÊ†∑ÁöÑËØùÔºå‰Ω†ÁöÑÊ≠£ÂàôË°®ËææÂºèÂ∞±ÊòØÊúâÊïàÁöÑÔºåÂπ∂Âú®‰ªª‰ΩïÂÖ∂‰ªñÁöÑÁâàÊú¨‰∏≠ÂèØÁî®„ÄÇ@footnote{Â¶ÇÊûú‰Ω†Âú®Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶ÊàñËÄÖÂáΩÊï∞‰∏≠‰ΩøÁî®Â≠ó‰∏≤Â∏∏ÈáèÔºå‰Ω†ÈúÄË¶Å‰ΩøÁî®‰∏§‰∏™ÂèçÊñúÊù†„ÄÇ}

ÊúÄÂêéÔºåÂΩì @samp{@{} ‰∏é @samp{@}} Âá∫Áé∞Âú®Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰∏≠Ôºå‰ΩÜ‰∏çÊòØ‰ª•‰∏ÄÁßçÂèØ‰ª•Ë¢´Ëß£Èáä‰∏∫Âå∫Èó¥Ë°®ËææÂºèÁöÑÊñπÂºèÔºàÂ¶Ç @code{/q@{a@}/}ÔºâÔºåÈÇ£‰πà‰ªñ‰ª¨Â∞±Âè™Ë°®Á§∫Ëá™Â∑±„ÄÇ
@end table

@cindex precedence, regexp operators
@cindex regular expressions, operators, precedence of
Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠Ôºå@samp{*}Ôºå@samp{+} ‰ª•Âèä @samp{?} Êìç‰ΩúÁ¨¶ÔºåÂåÖÊã¨Ëä±Êã¨Âè∑ @samp{@{} ‰∏é @samp{@}}ÔºåÂÖ∑ÊúâÊúÄÈ´òÁöÑ‰ºòÂÖàÁ∫ßÔºå
ÁÑ∂ÂêéÊòØËøûÊé•Êìç‰ΩúÁ¨¶ÔºåÊúÄÂêéÊâçÊòØ @samp{|}ÔºåÂú®Êï∞Â≠¶‰∏äÔºåÊã¨Âè∑ÂèØ‰ª•ÊîπÂèòÊìç‰ΩúÁ¨¶ÁöÑÁªÑÂêàÊñπÂºè„ÄÇ

@cindex POSIX @command{awk}, regular expressions and
@cindex @command{gawk}, regular expressions, precedence
Âú® POSIX @command{awk} ‰∏≠‰∏é @command{gawk} ‰∏≠Ôºå@samp{*}Ôºå@samp{+} ‰ª•Âèä @samp{?} Êìç‰ΩúÁ¨¶ÔºåÂ¶ÇÊûúÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÔºåÂÆÉ‰ª¨ÂâçÈù¢Ê≤°Êúâ‰ªª‰ΩïÂ≠óÁ¨¶‰∫ÜÔºåÈÇ£‰πàÂÆÉÂ∞±‰ª£Ë°®ÂÆÉ‰ª¨Ëá™Â∑±„ÄÇ
Â¶Ç @code{/+/} ÂåπÈÖç‰∏Ä‰∏™Â≠óÈù¢Âä†Âè∑„ÄÇ‰ΩÜÊòØÔºåÂæàÂ§öÂÖ∂‰ªñÁöÑ @command{awk} ÁâàÊú¨‰ºöÊääËøôÊ†∑ÁöÑÁî®Ê≥ïËßÜ‰∏∫ËØ≠Ê≥ïÈîôËØØ„ÄÇ

Â¶ÇÊûú @command{gawk} Âú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂå∫Èó¥Ë°®ËææÂºèÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇ

@node Bracket Expressions
@section ‰ΩøÁî®ÊñπÊã¨Âè∑Ë°®ËææÂºè
@cindex bracket expressions
@cindex bracket expressions, range expressions
@cindex range expressions (regexps)
@cindex character lists in regular expression

Â¶ÇÂâçÈù¢ÊâÄÊèêÂà∞ÁöÑÔºåÊñπÊã¨Âè∑Ë°®ËææÂºèÂåπÈÖçÂú®Êã¨Âè∑‰∏≠ÂàóÂá∫ÁöÑ‰ªªÊÑèÂ≠óÁ¨¶„ÄÇ

Âú®ÊñπÊã¨Âè∑Ë°®ËææÂºèÂÜÖÔºå‰∏Ä‰∏™@dfn{ËåÉÂõ¥Ë°®ËææÂºè}Áî±‰∏§‰∏™Áî®ËøûÂ≠óÁ¨¶ÂàÜÈöîÁöÑÂ≠óÁ¨¶ÁªÑÊàê„ÄÇÂÆÉÂåπÈÖç‰ª•Á≥ªÁªüÁöÑÊú¨Âú∞Â≠óÁ¨¶ÈõÜÊéíÂ∫èÔºåÂπ∂Â§Ñ‰∫éËøô‰∏§‰∏™Â≠óÁ¨¶Èó¥ÁöÑÁ¨¶Âè∑„ÄÇÂ¶Ç @samp{[0-9]} ‰∏é @samp{[0123456789]} Á≠âÂêå„ÄÇ
ÔºàÊü•Áúã @ref{Ranges and Locales}ÔºåÂØπ POSIX Ê†áÂáÜ‰∏é @command{gawk} ÂèòÂåñËøáÁ®ãÁöÑËß£ÈáäÔºåËøô‰∏ªË¶ÅÊòØÊúâ‰∏Ä‰∫õÂéÜÂè≤ÂÖ¥Ë∂£ÊâÄÂú®„ÄÇÔºâ

@uref{http://www.unicode.org, Unicode Â≠óÁ¨¶ÁºñÁ†ÅÊ†áÂáÜ} ÁöÑÊµÅË°åÔºåÂ∏¶Êù•‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÂ∞èÈóÆÈ¢ò„ÄÇÊñπÊã¨Âè∑Ë°®ËææÂºèÂÜÖ‰ΩøÁî®ÁöÑÂÖ´ËøõÂà∂ÂíåÂçÅÂÖ≠ËøõÂà∂ÁöÑËΩ¨ÁßªÂ∫èÂàóÔºåÂè™ËÉΩË°®Á§∫ÂçïÂ≠óËäÇÁöÑÂ≠óÁ¨¶ÔºàÁºñÁ†ÅËåÉÂõ¥Âú® 0-256 ‰πãÈó¥ÁöÑÂ≠óÁ¨¶Ôºâ„ÄÇ‰∏∫‰∫ÜÂåπÈÖçÁºñÁ†ÅËåÉÂõ¥Â§ß‰∫é 256 ÁöÑÂ≠óÁ¨¶ÔºåËØ∑Áõ¥Êé•ËæìÂÖ•Â§öÂ≠óËäÇÂ≠óÁ¨¶ÁöÑÁºñÁ†Å„ÄÇ

@cindex @code{\} (backslash), in bracket expressions
@cindex backslash (@code{\}), in bracket expressions
@cindex @code{^} (caret), in bracket expressions
@cindex caret (@code{^}), in bracket expressions
@cindex @code{-} (hyphen), in bracket expressions
@cindex hyphen (@code{-}), in bracket expressions
‰∏∫‰∫ÜÂåÖÊã¨Ëøô‰∫õÂ≠óÁ¨¶ @samp{\}Ôºå@samp{]}Ôºå@samp{-}ÔºåÊàñËÄÖ @samp{^} Âú®ÊñπÊã¨Âè∑Ë°®ËææÂºè‰∏≠ÔºåÂ∞ÜÂú®ÂÆÉ‰ª¨‰πãÂâç‰ΩøÁî® @samp{\}ÔºåÂ¶ÇÔºö

@example
[d\]]
@end example

@noindent
‰ºöÂåπÈÖç @samp{d} ÊàñËÄÖ @samp{]}ÔºåÂè¶Â§ñÔºåÂ¶ÇÊûú‰Ω†Â∞Ü @samp{]} Â∞±ÊîæÂú®ÂºÄÊñπÊã¨Âè∑ @samp{[} ÁöÑÂêéÈù¢ÔºåÂàôÈó≠ÊñπÊã¨Âè∑‰ºö‰ª•ÂÖ∂Â≠óÈù¢Â≠óÁ¨¶ÂØπÂæÖÂπ∂ËøõË°åÂåπÈÖç„ÄÇ

@cindex POSIX @command{awk}, bracket expressions and
@cindex Extended Regular Expressions (EREs)
@cindex EREs (Extended Regular Expressions)
@cindex @command{egrep} utility
ÂØπ‰∫éÂú®ÊñπÊã¨Âè∑‰∏≠ÁöÑ @samp{\} Ë°®ËææÂºèÂØπÂæÖ‰∏äÔºå‰∏éÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞ÊòØÂÖºÂÆπÁöÑÔºå‰πüÊòØ POSIX Ê†áÂáÜÊâÄË¶ÅÊ±ÇÁöÑ„ÄÇ
Âú® @command{awk} ‰∏≠ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÊòØ POSIX EREsÔºàÊâ©Â±ïÊ≠£ÂàôË°®ËææÂºèÔºåExtended Regular ExpressionsÔºâËßÑËåÉÁöÑ‰∏Ä‰∏™Ë∂ÖÈõÜ„ÄÇ
POSIX ÁöÑÊâ©Â±ïÊ≠£ÂàôË°®ËææÂºèÂü∫‰∫é‰º†ÁªüÁöÑ @command{egrep} Â∑•ÂÖ∑ÊâÄÊé•ÂèóÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ

@cindex bracket expressions, character classes
@cindex POSIX @command{awk}, bracket expressions and, character classes
@dfn{Â≠óÁ¨¶Á±ª}ÊòØÂú® POSIX Ê†áÂáÜ‰∏≠ÂºïÂÖ•ÁöÑ‰∏Ä‰∏™ÁâπÊÄß„ÄÇÂ≠óÁ¨¶Á±ªÊòØ‰∏ÄÁßçÁâπÊÆäÁöÑÁ¨¶Âè∑ÔºåÁî®ÂÖ∂Êù•Ë°®Ëø∞ÂÖ∑ÊúâÁâπÂÆöÂ±ûÊÄßÁöÑ‰∏ÄÁ±ªÂ≠óÁ¨¶ÁöÑÂàóË°®Ôºå‰ΩÜÊòØÂÆûÈôÖÁöÑÂ≠óÁ¨¶Áî±‰∫éÂõΩÂÆ∂ÁöÑ‰∏çÂêåÔºå‰ª•Âèä/ÊàñËÄÖÂ≠óÁ¨¶ÈõÜÁöÑ‰∏çÂêåËÄå‰∏çÂêå„ÄÇÂ¶ÇÔºåÂØπ‰∫éÂ≠óÊØçÁ±ªÁöÑÁ¨¶Âè∑ÔºåÂú®ÁæéÂõΩ‰∏éÊ≥ïÂõΩ‰πãÈó¥Â∞±‰∏ç‰∏ÄÊ†∑„ÄÇ

Ê≠£ÂàôË°®ËææÂºèÁöÑÂ≠óÁ¨¶Á±ªÔºåÂè™ÊúâÂú®‰∏Ä‰∏™ÊñπÊã¨Âè∑Ë°®ËææÂºè‰∏≠ÁöÑÊñπÊã¨Âè∑@emph{ÂÜÖÈÉ®}Êâç‰ºöÊúâÊïà„ÄÇ
Â≠óÁ¨¶Á±ªÁî± @samp{[:}Ôºå‰∏Ä‰∏™‰ª£Ë°®Á±ªÁöÑÂÖ≥ÈîÆÂ≠óÔºå‰ª•Âèä @samp{:]} ÁªÑÊàêÔºå@ref{table-char-classes} ÂàóÂá∫‰∫ÜÁî± POSIX Ê†áÂáÜÂÆö‰πâÁöÑÂ≠óÁ¨¶Á±ª„ÄÇ

@float Table,table-char-classes
@caption{POSIX Â≠óÁ¨¶Á±ª}
@multitable @columnfractions .15 .85
@headitem Á±ª @tab Âê´‰πâ
@item @code{[:alnum:]} @tab Â≠óÊØçÊï∞Â≠óÂ≠óÁ¨¶
@item @code{[:alpha:]} @tab Â≠óÊØçÂ≠óÁ¨¶
@item @code{[:blank:]} @tab Á©∫Ê†º‰∏é TAB Â≠óÁ¨¶
@item @code{[:cntrl:]} @tab ÊéßÂà∂Â≠óÁ¨¶
@item @code{[:digit:]} @tab Êï∞Â≠óÂ≠óÁ¨¶
@item @code{[:graph:]} @tab ÂèØËßÅÂèØÊâìÂç∞ÁöÑÂ≠óÁ¨¶ÔºàÁ©∫Ê†ºÊòØÂèØÊâìÂç∞ÁöÑÔºå‰ΩÜÊòØÊòØ‰∏çÂèØËßÅÁöÑÔºåËÄå @samp{a} ÂàôÂÖºËÄåÊúâ‰πãÔºâ
@item @code{[:lower:]} @tab Â∞èÂÜôÂ≠óÊØçÂ≠óÁ¨¶
@item @code{[:print:]} @tab ÂèØÊâìÂç∞Â≠óÁ¨¶ÔºàÈÇ£‰∫õ‰∏çÊòØÊéßÂà∂Â≠óÁ¨¶ÁöÑÂ≠óÁ¨¶Ôºâ
@item @code{[:punct:]} @tab Ê†áÁÇπÂ≠óÁ¨¶ÔºàÈÇ£‰∫õ‰∏çÊòØÂ≠óÊØçÔºåÊï∞Â≠óÔºåÊéßÂà∂‰ª•ÂèäÁ©∫Ê†ºÂ≠óÁ¨¶ÁöÑÂ≠óÁ¨¶Ôºâ
@item @code{[:space:]} @tab Á©∫Ê†ºÂ≠óÁ¨¶ÔºàÂ¶ÇÁ©∫Ê†ºÔºåTABÔºå‰ª•ÂèäÂõûÊ°£ÔºåÁ≠âÔºâ
@item @code{[:upper:]} @tab Â≠óÊØçÁöÑÂ§ßÂÜôÂ≠óÁ¨¶
@item @code{[:xdigit:]} @tab ÂçÅÂÖ≠ËøõÂà∂ÁöÑÊï∞Â≠óÁöÑÂ≠óÁ¨¶
@end multitable
@end float

‰æãÂ¶ÇÔºåÂú® POSIX Ê†áÂáÜÂâçÔºå‰Ω†ÂøÖÈ°ªÁî®ËøôÊ†∑ÁöÑË°®ËææÂºè @code{/[A-Za-z0-9]/} Êù•ÂåπÈÖçÂ≠óÊØçÊï∞Â≠óÂ≠óÁ¨¶„ÄÇ
Â¶ÇÊûú‰Ω†ÁöÑÂ≠óÁ¨¶ÈõÜÊúâÂè¶‰∏ÄÂ•óÂ≠óÊØçÂ≠óÁ¨¶ÔºåËøô‰∏™Â∞±‰∏ç‰ºöÂåπÈÖçÂÆÉ‰ª¨„ÄÇ
ÈÄöËøá POSIX ÁöÑÂ≠óÁ¨¶Á±ªÔºå‰Ω†ÂèØÂÜôÊàêËøôÊ†∑ @code{/[[:alnum:]]/} Êù•ÂåπÈÖç‰Ω†ÁöÑÂ≠óÁ¨¶ÈõÜ‰∏≠ÁöÑÂ≠óÊØç‰∏éÊï∞Â≠ó„ÄÇ
@c Thanks to
@c Date: Tue, 01 Jul 2014 07:39:51 +0200
@c From: Hermann Peifer <peifer@gmx.eu>
Êúâ‰∏Ä‰∫õÂ∑•ÂÖ∑ÁöÑÊ≠£ÂàôË°®ËææÂºèÊèê‰æõ‰∫Ü‰∏ÄÁßçÈùûÊ†áÂáÜÁöÑ @samp{[:ascii:]} Â≠óÁ¨¶Á±ªÔºå@command{awk} ÂàôÊ≤°ÊúâÊèê‰æõ„ÄÇ‰ΩÜÊòØÔºå‰Ω†ÂèØ‰ª•ËøôÊ†∑ @samp{[\x00-\x7F]} Êù•Ê®°ÊãüËøôÁßçÁªìÊûÑ„ÄÇ
Ëøô‰ºöÂåπÈÖçÊï∞ÂÄº‰∏ä‰∏∫ 0 Âà∞ 127 ‰πãÈó¥ÁöÑÔºåÂÆö‰πâÂú® ASCII Â≠óÁ¨¶ÈõÜ‰∏≠ÁöÑÂ≠óÁ¨¶„ÄÇÂà©Áî®ÂÖ∂ÂèçÁöÑÂ≠óÁ¨¶ÂàóË°®Ôºà@samp{[^\x00-\x7F]}ÔºâÂèØ‰ª•ÂåπÈÖç‰ªª‰Ωï‰∏™‰∏çÂú® ASCII ‰∏≠ÁöÑÂçïÂ≠óËäÇÂ≠óÁ¨¶„ÄÇ

@cindex bracket expressions, collating elements
@cindex bracket expressions, non-ASCII
@cindex collating elements
Êúâ‰∏§‰∏™È¢ùÂ§ñÁöÑÂ∫èÂàóÂèØ‰ª•Âá∫Áé∞Âú®ÊñπÊã¨Âè∑Ë°®ËææÂºè‰∏≠ÔºåËøô‰∫õÁî®Êù•Â∫îÁî®Âà∞Èùû ASCII Â≠óÁ¨¶ÈõÜ‰∏≠ÔºåËøô‰∫õÂ≠óÁ¨¶ÈõÜÊúâÁöÑÂçïÁ¨¶Âè∑ÔºàÁß∞‰∏∫@dfn{ÈõÜÂêàÂÖÉÁ¥†}ÔºâÂèØ‰ª•Áî±Â§ö‰∏™Â≠óÁ¨¶Êù•Ë°®Á§∫„ÄÇ
ÂÆÉ‰ª¨‰πüÂèØ‰ª•ÊúâÂá†‰∏™Â≠óÁ¨¶ÊòØÁ≠âÂêåÁöÑÔºå‰ª•ËøõË°å@dfn{Ê†°ÂØπ}ÔºåÊéíÂ∫èÁ≠âÁõÆÁöÑ„ÄÇÔºàÂ¶ÇÂú®Ê≥ïËØ≠‰∏≠ÔºåÊôÆÈÄöÂ≠óÊØç ``e'' Êúâ‰∏Ä‰∏™ÈáçÈü≥Â≠óÊØç ``@`e'' ÊòØÁ≠âÂêåÁöÑ„ÄÇÔºâËøô‰∫õÂ∫èÂàóÊòØÔºö

@table @asis
@cindex bracket expressions, collating symbols
@cindex collating symbols
@item ÈõÜÂêàÁ¨¶Âè∑
Âú® @samp{[.} ‰∏é @samp{.]} ‰πãÈó¥ÁöÑÔºåÂ§öÂ≠óÁ¨¶ÈõÜÂêàÂÖÉÁ¥†„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú @samp{ch} ÊòØ‰∏Ä‰∏™ÈõÜÂêàÂÖÉÁ¥†ÔºåËøôÊ†∑ @samp{[[.ch.]]} Â∞±ÊòØÂèØ‰ª•ÂåπÈÖçËøôÊ†∑ÁöÑÈõÜÂêàÂÖÉÁ¥†ÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇËÄå @samp{[ch]} ÂàôÊòØÂåπÈÖç @samp{c} ÊàñËÄÖ @samp{h} ÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ

@cindex bracket expressions, equivalence classes
@item Á≠âÂêåÁ±ª
ÁâπÂÆö‰∫éÂ≠óÁ¨¶ÈõÜÁöÑÁî®‰∫éÂëΩÂêçÁ≠âÂêåÂ≠óÁ¨¶ÂàóË°®„ÄÇÂÖ∂ÂêçÂ≠óÁî± @samp{[=} ‰∏é @samp{=]} ÂåÖÂê´„ÄÇ
Â¶ÇÂêçÂ≠ó @samp{e} ÂèØ‰ª•Áî®Êù•Ë°®Á§∫ÊâÄÊúâÁöÑ ``e,'' ``@^e,'' ``@`e,'' ‰∏é ``@'e.''„ÄÇ
Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@samp{[[=e=]]} Â∞±ÊòØÁî®Êù•ÂåπÈÖç @samp{e}Ôºå@samp{@^e}Ôºå@samp{@'e}ÔºåÊàñËÄÖ @samp{@`e} ÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ
@end table

Ëøô‰∏™ÁâπÊÄßÂú®ÈÇ£‰∫õÈùûËã±ËØ≠ÁöÑÂ≠óÁ¨¶ÈõÜ‰∏≠ÈùûÂ∏∏ÊúâÁî®„ÄÇ

@cindex internationalization, localization, character classes
@cindex @command{gawk}, character classes and
@cindex POSIX @command{awk}, bracket expressions and, character classes
@quotation Ê≥®ÊÑè
@command{gawk} ÂΩìÂâçÊâÄ‰ΩøÁî®ÁöÑ‰∏Ä‰∫õÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÂ∫ìÔºåÂè™ËÉΩËØÜÂà´ POSIX Â≠óÁ¨¶Á±ªÔºõÂÆÉ‰ª¨Êó†Ê≥ïËØÜÂà´ÈõÜÂêàÁ¨¶Âè∑ÊàñËÄÖÁ≠âÂêåÁ±ª„ÄÇ
@end quotation
@c maybe one day ...

Âú®‰∏Ä‰∏™ÊñπÊã¨Âè∑Ë°®ËææÂºèÂÜÖÔºå‰∏Ä‰∏™ÂºÄÊñπÊã¨Âè∑Ôºà@samp{[}Ôºâ‰Ωú‰∏∫ÂÆÉÊú¨Ë∫´Êù•‰ΩøÁî®ÔºåËÄå‰∏çË°®Á§∫‰∏Ä‰∏™Â≠óÁ¨¶Á±ªÔºåÈõÜÂêàÂÖÉÁ¥†ÊàñËÄÖÁ≠âÂêåÁ±ª„ÄÇ
@samp{.} Âíå @samp{*} ÂêåÁêÜ„ÄÇ

@node Leftmost Longest
@section ÂåπÈÖçÂ§öÂ∞ëÔºü

@cindex regular expressions, leftmost longest match
@c @cindex matching, leftmost longest
ËÄÉËôë‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö

@example
echo aaaabcd | awk '@{ sub(/a+/, "<A>"); print @}'
@end example

Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî® @code{sub()} ÂáΩÊï∞Êù•ÊîπÂèòËæìÂÖ•ËÆ∞ÂΩï„ÄÇ
Ôºà@code{sub()} Áî®Á¨¨‰∫å‰∏™ÂèÇÊï∞ÊõøÊç¢Ôºå‰ªªÊÑèÂåπÈÖçÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÊñáÊú¨ÂÜÖÂÆπÔºåÊü•Áúã @ref{String Functions}„ÄÇÔºâ
ËøôÈáåÔºåÊ≠£ÂàôË°®ËææÂºè @code{/a+/} Ë°®Á§∫‚Äú‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ @samp{a} Â≠óÁ¨¶‚ÄùÔºåÂπ∂Â∞ÜÂÖ∂ÊõøÊç¢‰∏∫Êñá‰ª∂ @samp{<A>} „ÄÇ

ËæìÂÖ•‰∏≠ÂåÖÊã¨ 4 ‰∏™ @samp{a} Â≠óÁ¨¶„ÄÇ@command{awk}Ôºà‰ª•Âèä POSIXÔºâÊ≠£ÂàôË°®ËææÂºèÊÄªÊòØÂåπÈÖçÊúÄÂ∑¶Ëæπ@emph{ÊúÄÈïø}ÁöÑËæìÂÖ•Â≠óÁ¨¶Â∫èÂàó„ÄÇ
Âõ†Ê≠§ÔºåÊâÄÊúâÁöÑ 4 ‰∏™ @samp{a} Â≠óÁ¨¶ÈÉΩÂ∞ÜË¢´ @samp{<A>} ÊõøÊç¢„ÄÇ

@example
$ @kbd{echo aaaabcd | awk '@{ sub(/a+/, "<A>"); print @}'}
@print{} <A>bcd
@end example

ÂØπ‰∫éÁÆÄÂçïÁöÑÂåπÈÖç/‰∏çÂåπÈÖçÁöÑÊµãËØïÔºåËøôÂ∞±Âπ∂‰∏çÂ§™ÈáçË¶ÅÔºå‰ΩÜÊòØÂΩìÊâßË°åÊñáÊú¨ÂåπÈÖç‰∏éÊõøÊç¢Êó∂Ôºå
Â¶Ç @code{match()}Ôºå@code{sub()}Ôºå@code{gsub()} ‰∏é @code{gensub()} Á≠âÂáΩÊï∞ÊâÄÊâßË°åÁöÑÔºåËøô‰∏™ÁâπÁÇπÂ∞±ÈùûÂ∏∏ÈáçË¶Å‰∫Ü„ÄÇ
@ifinfo
@ref{String Functions} ‰∏≠ÊèèËø∞‰∫ÜÊõ¥Â§öÂÖ≥‰∫éËøô‰∫õÂáΩÊï∞ÁöÑ‰ø°ÊÅØ„ÄÇ
@end ifinfo
ÁêÜËß£Ëøô‰∏™ÂéüÂàôÂØπ‰∫éÂü∫Êú¨Ê≠£ÂàôË°®ËææÂºèÂàÜÈöîÁöÑËÆ∞ÂΩï‰πüÈùûÂ∏∏ÈáçË¶ÅÔºàÊü•Áúã @ref{Records}Ôºå‰πüÂèØÊü•Áúã @ref{Field Separators}Ôºâ„ÄÇ

@node Computed Regexps
@section ‰ΩøÁî®Âä®ÊÄÅÊ≠£ÂàôË°®ËææÂºè

@cindex regular expressions, computed
@cindex regular expressions, dynamic
@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@c @cindex operators, @code{~}
@c @cindex operators, @code{!~}
Âú® @samp{~} ÊàñËÄÖ @samp{!~} Êìç‰ΩúÁ¨¶ÁöÑÂè≥ÊâãËæπÔºå‰∏ç‰∏ÄÂÆöÈúÄË¶Å‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà‰æãÂ¶ÇÁî®ÊñúÊù†ÂàÜÈöîËøô‰∫õÁöÑÂ≠ó‰∏≤ÔºâÔºå‰πüÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑË°®ËææÂºè„ÄÇ
Âú®ÂøÖË¶ÅÁöÑÊÉÖÂÜµ‰∏ãÔºåË°®ËææÂºè‰ºöË¢´Ê±ÇÂÄºÔºåÊàñËÄÖËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÔºõËøô‰∏™Â≠ó‰∏≤Âç≥Ë¢´Áî®‰∫éÂΩìÂÅöÊ≠£ÂàôË°®ËææÂºè„ÄÇ
‰ª•ËøôÁßçÊñπÂºèËÆ°ÁÆóÁöÑË°®ËææÂºèÁß∞‰∏∫@dfn{Âä®ÊÄÅÊ≠£ÂàôË°®ËææÂºè}ÊàñËÄÖ@dfn{ËÆ°ÁÆóÂûãÊ≠£ÂàôË°®ËææÂºè}Ôºö

@example
BEGIN @{ digits_regexp = "[[:digit:]]+" @}
$0 ~ digits_regexp    @{ print @}
@end example

@noindent
‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂ∞Ü @code{digits_regexp} ËÆæÁΩÆÊàêÊèèËø∞‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Êï∞Â≠óÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂπ∂ÊµãËØïËæìÂÖ•ËÆ∞ÂΩïÊòØÂê¶ÂåπÈÖçËøô‰∏™Ë°®ËææÂºè„ÄÇ

@quotation ÊèêÁ§∫
ÂΩì‰ΩøÁî® @samp{~} ‰∏é @samp{!~} Êìç‰ΩúÁ¨¶Êó∂ÔºåË¶Å‰∫ÜËß£‰ΩøÁî®ËøôÊ†∑ÁöÑÁî®ÊñúÊù†Ë°®ÂºèÁöÑÊ≠£ÂàôË°®ËææÂºèÂ≠ó‰∏≤Â∏∏Èáè‰∏éÁî®ÂèåÂºïÂè∑Êã¨Ëµ∑Êù•ÁöÑÊ≠£ÂàôË°®ËææÂºè‰πãÈó¥ÁöÑ‰∏çÂêå„ÄÇ
Â¶ÇÊûú‰Ω†ÂáÜÂ§á‰ΩøÁî®Â≠ó‰∏≤Â∏∏ÈáèÔºå‰Ω†Â∞±ÂøÖÈ°ªÂæóÁêÜËß£Â≠ó‰∏≤ÂÆûÈôÖ‰∏ä‰ºöË¢´Êâ´Êèè‰∏§ÈÅçÔºõÁ¨¨‰∏ÄÊ¨°ÊòØ @command{awk} ËØªÂèñ‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÊó∂ÂÄôÔºåÁ¨¨‰∫åÊ¨°ÊòØÂΩìË¶ÅÊâßË°å‰∏éÊìç‰ΩúÁ¨¶Â∑¶ËæπÁöÑÂ≠ó‰∏≤‰∏éÂè≥ËæπÁöÑÊ®°ÂºèÁ¨¶ËøõË°åÂåπÈÖçÁöÑÊó∂ÂÄô„ÄÇ
ËøôÂØπ‰∫éÊâÄÊúâÊ±ÇÂÄº‰∏∫Â≠ó‰∏≤ÁöÑË°®ËææÂºèÈÉΩÊòØÂ¶ÇÊ≠§ÔºàÂ¶ÇÂâç‰æã‰∏≠ÁöÑ @code{digits_regexp}ÔºâÔºåËÄåÂπ∂‰∏çÊ≠¢ÊòØÂ≠ó‰∏≤Â∏∏ÈáèÊâçÂ¶ÇÊ≠§„ÄÇ
@end quotation

@cindex regexp constants, slashes vs.@: quotes
@cindex @code{\} (backslash), in regexp constants
@cindex backslash (@code{\}), in regexp constants
@cindex @code{"} (double quote), in regexp constants
@cindex double quote (@code{"}), in regexp constants
Â≠ó‰∏≤‰ºöË¢´Êâ´Êèè‰∏§Ê¨°‰ºöÊúâ‰ªÄ‰πà‰∏çÂêåÂë¢ÔºüÁ≠îÊ°àÊòØ‰∏éËΩ¨‰πâÂ∫èÂàóÊúâÂÖ≥ÔºåÂ∞§ÂÖ∂ÊòØÂèçÊñúÊù†„ÄÇ‰∏∫‰∫ÜÂ∞ÜÂèçÊñúÊù†Âä†ÂÖ•Âà∞Ê≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÂ≠ó‰∏≤Ôºå‰Ω†ÈúÄË¶ÅËæìÂÖ•‰∏§‰∏™ÂèçÊñúÊù†„ÄÇ

‰æãÂ¶ÇÔºå@code{/\*/} ÊòØÂ≠óÁ¨¶ @samp{*} ÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇÂè™ÈúÄË¶Å‰∏Ä‰∏™ÂèçÊñúÊù†„ÄÇÂ¶ÇÊûú‰Ω†Ë¶ÅÂú®Â≠ó‰∏≤Âú®ÂÆûÁé∞Áõ∏ÂêåÁöÑ‰∫ãÊÉÖÔºå‰Ω†Â∞±ÂæóËæìÂÖ• @code{"\\*"}„ÄÇ
Á¨¨‰∏Ä‰∏™ÂèçÊñúÊù†ËΩ¨‰πâÁ¨¨‰∫å‰∏™ÂèçÊñúÊù†ÔºåÂõ†Ê≠§ÂÆûÈôÖÁöÑÂ≠ó‰∏≤ÊâçÂåÖÂê´‰∏§‰∏™Â≠óÁ¨¶ÔºåÂç≥ @samp{\} ‰∏é @samp{*} „ÄÇ

@cindex troubleshooting, regexp constants vs.@: string constants
@cindex regexp constants, vs.@: string constants
@cindex string constants, vs.@: regexp constants
ÂÅáËÆæ‰Ω†Êó¢‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰∏éÂ≠ó‰∏≤Â∏∏ÈáèÊù•ÊèèËø∞Ê≠£ÂàôË°®ËææÂºèÔºå‰Ω†ËØ•Â¶Ç‰ΩïÊù•ÈÄâÊã©‰ΩøÁî®ÔºüÁ≠îÊ°àÊòØÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºåÊúâÂá†‰∏™ÂéüÂõ†Ôºö

@itemize @value{BULLET}
@item
Â≠ó‰∏≤Â∏∏ÈáèÂÜôËµ∑Êù•Êõ¥Â§çÊùÇÔºåËØªËµ∑Êù•‰πüÊõ¥Èöæ„ÄÇ‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰Ωø‰Ω†ÁöÑÁ®ãÂ∫èÂ∞ëÂá∫Èîô„ÄÇ‰∏çÁêÜËß£‰∏§ÁßçÂ∏∏Èáè‰πãÈó¥ÁöÑÂ∑ÆÂºÇÂ∏∏Â∏∏ÊòØÈîôËØØ‰πãÊ∫ê„ÄÇ

@item
Áî®Ê≠£ÂàôË°®Â§ßÂºèÂ∏∏ÈáèÊõ¥Âä†È´òÊïà„ÄÇ@command{awk} ‰ºöÊ≥®ÊÑèÂà∞‰Ω†Êèê‰æõÊ≠£ÂàôË°®ËææÂºèÔºå‰ºöÂ∞ÜÂÆÉÂ≠òÊàêËÉΩÂ§üÊõ¥Âä†È´òÊïàÂú∞ËøõË°åÊ®°ÂºèÂåπÈÖçÁöÑÂΩ¢Âºè„ÄÇÂΩì‰ΩøÁî®Â≠ó‰∏≤Â∏∏ÈáèÔºå@command{awk} ÂàôÈ¶ñÂÖàÈúÄË¶ÅÂ∞ÜÂÖ∂ËΩ¨Êç¢ÊàêÂÜÖÈÉ®ÂΩ¢ÂºèÁÑ∂ÂêéÊâçÊâßË°åÊ®°ÂºèÂåπÈÖç„ÄÇ

@item
‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÊòØ‰∏ÄÁßçÊõ¥Â•ΩÁöÑÂΩ¢ÂºèÔºåËÉΩÂ§üÊõ¥ÂÆπÊòìÁúãÊ∏Ö‰Ω†Ë¶ÅËøõË°åÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖç„ÄÇ
@end itemize

@sidebar Âú®Âä®ÊÄÅÊ≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÊñπÊã¨Âè∑Ë°®ËææÂºè‰∏≠‰ΩøÁî® @code{\n} 
@cindex regular expressions, dynamic, with embedded newlines
@cindex newlines, in dynamic regexps

‰∏Ä‰∫õÊóßÁâàÊú¨ÁöÑ @command{awk} ‰∏çËÉΩÂ§üÂú®Âä®ÊÄÅÊ≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÊñπÊã¨Âè∑Ë°®ËææÂºèÈáå‰ΩøÁî®Êç¢Ë°åÁ¨¶ @samp{\n}Ôºö

@example
$ @kbd{awk '$0 ~ "[ \t\n]"'}
@error{} awk: newline in character class [
@error{} ]...
@error{}  source line number 1
@error{}  context is
@error{}        $0 ~ "[ >>>  \t\n]" <<<
@end example

@cindex newlines, in regexp constants
‰ΩÜÊòØÂú®Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰∏≠Âç¥Ê≤°ÊúâÈóÆÈ¢òÔºö

@example
$ @kbd{awk '$0 ~ /[ \t\n]/'}
@kbd{here is a sample line}
@print{} here is a sample line
@kbd{Ctrl-d}
@end example

@command{gawk} Ê≤°ÊúâËøô‰∏™ÈóÆÈ¢òÔºåÂπ∂‰∏îÂú®ÂÆûË∑µ‰∏≠‰πüÂæàÂ∞ëÂá∫Áé∞Ôºå‰ΩÜÊòØÂú®ÂêéÈù¢ÁöÑ‰ΩøÁî®‰∏≠ÔºåÂàôÂÄºÂæóÊ≥®ÊÑè‰∏Ä‰∏ã„ÄÇ
@end sidebar

@node GNU Regexp Operators
@section ÁâπÂÆö‰∫é @command{gawk} ÁöÑÊ≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶

@c This section adapted (long ago) from the regex-0.12 manual

@cindex regular expressions, operators, @command{gawk}
@cindex @command{gawk}, regular expressions, operators
@cindex operators, GNU-specific
@cindex regular expressions, operators, for words
@cindex word, regexp definition of
GNU ËΩØ‰ª∂Âú®Â§ÑÁêÜÊ≠£ÂàôË°®ËææÂºèÊó∂Êèê‰æõ‰∫ÜËÆ∏Â§öÈ¢ùÂ§ñÁöÑÊ≠£ÂàôÊìç‰ΩúÁ¨¶„ÄÇ
Âú®Êú¨@value{SECTION}‰∏≠ÂàóÂá∫ÁöÑÊìç‰ΩúÁ¨¶ÊòØ @command{gawk} ÁâπÊúâÁöÑÔºå‰ªñ‰ª¨Âú®ÂÖ∂‰ªñÁöÑ @command{awk} ‰∏≠ÊòØÊ≤°ÊúâÁöÑ„ÄÇËøô‰∫õÊìç‰ΩúÁ¨¶Â§öÊï∞ÊòØÁî®Êù•Â§ÑÁêÜÂ≠óÔºàÂçïËØçÔºâÂåπÈÖç„ÄÇ
ÂØπ‰∫éÊàë‰ª¨ÁöÑÁõÆÁöÑËÄåË®ÄÔºå‰∏Ä‰∏™@dfn{ÂçïËØç}Â∞±ÊòØ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Â≠óÊØç„ÄÅÊï∞Â≠óÊàñËÄÖ‰∏ãÂàíÁ∫øÔºà@samp{_}ÔºâÁöÑËøûÁª≠Â∫èÂàóÔºö

@table @code
@c @cindex operators, @code{\s} (@command{gawk})
@cindex backslash (@code{\}), @code{\s} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\s} operator (@command{gawk})
@item \s
ÂåπÈÖç‰ªªÊÑèÁöÑÁ©∫ÁôΩÂ≠óÁ¨¶Ôºå‰Ω†ÂèØÁúãÊàêÊòØ @w{@samp{[[:space:]]}} Áº©ÂÜô„ÄÇ

@c @cindex operators, @code{\S} (@command{gawk})
@cindex backslash (@code{\}), @code{\S} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\S} operator (@command{gawk})
@item \S
ÂåπÈÖç‰ªªÊÑèÈùûÁ©∫ÁôΩÂ≠óÁ¨¶ÔºåÂèØ‰ª•ÁúãÊàêÊòØ @w{@samp{[^[:space:]]}} ÁöÑÁº©ÂÜô„ÄÇ

@c @cindex operators, @code{\w} (@command{gawk})
@cindex backslash (@code{\}), @code{\w} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\w} operator (@command{gawk})
@item \w
ÂåπÈÖç‰ªªÊÑèÁªÑÊàêÂçïËØçÁöÑÂ≠óÁ¨¶Ôºå‰πüÂ∞±ÊòØÂåπÈÖç‰ªªÊÑèÁöÑÂ≠óÊØçÔºåÊï∞Â≠óÊàñËÄÖ‰∏ãÂàíÁ∫ø„ÄÇÂèØ‰ª•ÁúãÊàê‰∏∫ @w{@samp{[[:alnum:]_]}} ÁöÑÁº©ÂÜô„ÄÇ

@c @cindex operators, @code{\W} (@command{gawk})
@cindex backslash (@code{\}), @code{\W} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\W} operator (@command{gawk})
@item \W
ÂåπÈÖç‰ªªÊÑèÁöÑÈùûÁªÑÊàêÂçïËØçÁöÑÂ≠óÁ¨¶ÔºåÂèØ‰ª•ÁúãÊàêÊòØ @w{@samp{[^[:alnum:]_]}} ÁöÑÁº©ÂÜô„ÄÇ

@c @cindex operators, @code{\<} (@command{gawk})
@cindex backslash (@code{\}), @code{\<} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\<} operator (@command{gawk})
@item \<
ÂåπÈÖçÂçïËØçÂºÄÂßãÁöÑÁ©∫‰∏≤ÔºåÂ¶Ç @code{/\<away/} ÂåπÈÖç @samp{away}Ôºå‰ΩÜÊòØ‰∏çÂåπÈÖç @samp{stowaway} „ÄÇ

@c @cindex operators, @code{\>} (@command{gawk})
@cindex backslash (@code{\}), @code{\>} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\>} operator (@command{gawk})
@item \>
ÂåπÈÖçÂçïËØçÂêéÁöÑÁ©∫‰∏≤ÔºåÂ¶Ç @code{/stow\>/} ÂåπÈÖç @samp{stow}Ôºå‰ΩÜÊòØ‰∏çÂåπÈÖç @samp{stowaway} „ÄÇ

@c @cindex operators, @code{\y} (@command{gawk})
@cindex backslash (@code{\}), @code{\y} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\y} operator (@command{gawk})
@cindex word boundaries@comma{} matching
@item \y
ÂåπÈÖçÂçïËØç‰∏§ËæπÁöÑÁ©∫‰∏≤ÔºàÂ¶ÇÂçïËØçÁöÑËæπÁïåÔºâ„ÄÇÂ¶Ç @samp{\yballs?\y} ÂåπÈÖç @samp{ball} ÊàñËÄÖ @samp{balls}Ôºå‰Ωú‰∏∫ÂçïÁã¨ÁöÑÂçïËØç„ÄÇ

@c @cindex operators, @code{\B} (@command{gawk})
@cindex backslash (@code{\}), @code{\B} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\B} operator (@command{gawk})
@item \B
ÂåπÈÖçÂçïËØç‰∏≠‰ªªÊÑè‰∏§‰∏™ÁªÑÊàêÂçïËØçÂ≠óÁ¨¶Èó¥ÁöÑÁ©∫‰∏≤Ôºå‰æãÂ¶Ç @code{/\Brat\B/} ÂåπÈÖç @samp{crate}Ôºå‰ΩÜÊòØ‰∏çÂåπÈÖç @samp{dirty rat} „ÄÇ@samp{\B} ÁöÑÂèçÈù¢ÂÆûÈôÖÂ∞±ÊòØ @samp{\y} „ÄÇ
@end table

@cindex buffers, operators for
@cindex regular expressions, operators, for buffers
@cindex operators, string-matching, for buffers
ËøòÊúâËøò‰∏§‰∏™Êìç‰ΩúÁ¨¶Áî®Âú®ÁºìÂ≠ò‰∏≠ÔºåÂú® Emacs ÈáåÔºå@dfn{ÁºìÂ≠ò}ÂæàËá™ÁÑ∂ÁöÑÂ∞±ÊòØ‰∏Ä‰∏™ Emacs ÁºìÂ≠ò„ÄÇÂú®ÂÖ∂‰ªñÁöÑ GNU Á®ãÂ∫è‰∏≠ÔºåÂåÖÊã¨ @command{gawk}ÔºåÂèØ‰ª•ËÆ§‰∏∫Êï¥‰∏™Ë¶ÅÂåπÈÖçÁöÑÂ≠ó‰∏≤Â∞±ÊòØ‰∏Ä‰∏™ÁºìÂ≠ò„ÄÇËøô‰∏§‰∏™Êìç‰ΩúÁ¨¶ÊòØÔºö

@table @code
@item \`
@c @cindex operators, @code{\`} (@command{gawk})
@cindex backslash (@code{\}), @code{\`} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\`} operator (@command{gawk})
ÂåπÈÖçÁºìÂ≠òÔºàÂ≠ó‰∏≤ÔºâÁöÑÂºÄÂßãÂ§ÑÁöÑÁ©∫‰∏≤„ÄÇ

@c @cindex operators, @code{\'} (@command{gawk})
@cindex backslash (@code{\}), @code{\'} operator (@command{gawk})
@cindex @code{\} (backslash), @code{\'} operator (@command{gawk})
@item \'
ÂåπÈÖçÁºìÂ≠òÔºàÂ≠ó‰∏≤ÔºâÁöÑÁªìÊùüÂ§ÑÁöÑÁ™óÂè£„ÄÇ
@end table

@cindex @code{^} (caret), regexp operator
@cindex caret (@code{^}), regexp operator
@cindex @code{?} (question mark), regexp operator
@cindex question mark (@code{?}), regexp operator
Áî±‰∫é @samp{^} ‰∏é @samp{$} ÊÄªÊòØ‰ºöÂåπÈÖçÂ≠ó‰∏≤ÁöÑÂºÄÂ§¥‰∏éÁªìÂ∞æÔºåËøô‰∏™Êìç‰ΩúÁ¨¶Ê≤°ÊúâÁªô @command{awk} Â∏¶Êù•‰ªÄ‰πàÊñ∞ÁöÑÂäüËÉΩ„ÄÇÊèê‰æõËøô‰∫õÊìç‰ΩúÁ¨¶Âè™ÊòØ‰∏∫‰∫Ü‰∏éÂÖ∂‰ªñÁöÑ GNU ËΩØ‰ª∂‰øùÊåÅÂÖºÂÆπÊÄß„ÄÇ

@cindex @command{gawk}, word-boundary operator
@cindex word-boundary operator (@command{gawk})
@cindex operators, word-boundary (@command{gawk})
Âú®ÂÖ∂‰ªñÁöÑ GNU ËΩØ‰ª∂‰∏≠ÔºåÂçïËØçËæπÁïåÊìç‰ΩúÁ¨¶ÊòØ @samp{\b} „ÄÇ‰ΩÜÊòØËøô‰∏™‰∏é @command{awk} ËØ≠Ë®ÄÂÆö‰πâ @samp{\b} ÊòØ‰∏Ä‰∏™ÈÄÄÊ†ºÊúâÂÜ≤Á™ÅÔºåÂõ†Ê≠§ @command{gawk} ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™‰∏çÂêåÁöÑÂ≠óÊØç„ÄÇ‰∏Ä‰∏™ÂèØÈÄâÊã©ÁöÑÊñπÊ≥ïÂ∞±ÊòØÂú® GNU Êìç‰ΩúÁ¨¶‰∏≠ÂøÖÈ°ªËæìÂÖ•ÂèåÂèçÊñúÊù†Ôºå‰ΩÜÊòØËøô‰∏™Áî®Êù•Ëµ∑‰ª§‰∫∫ÁñëÊÉë„ÄÇÂΩìÂâçÁöÑÊñπÊ≥ïÂ∞±ÊòØÂú®‰ΩøÁî® @samp{\y}ÔºåËøôÊ†∑ GNU ‰∏≠ÁöÑ @samp{\b} Âú®‰∏§‰∏™ÊÅ∂Ê£ç‰∏≠Â∞±Âá∫Áé∞ÂæóÂ∞ë‰∏Ä‰∫õ„ÄÇ

@cindex regular expressions, @command{gawk}, command-line options
@cindex @command{gawk}, command-line options, and regular expressions
ÊúâÂá†‰∏™ÂëΩ‰ª§Ë°åÂèÇÊï∞ÔºàÊü•Áúã @ref{Options}ÔºâÂèØ‰ª•ÊéßÂà∂ @command{gawk} Â¶Ç‰ΩïÊù•Ëß£ÈáäÊ≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÂ≠óÁ¨¶Ôºö

@table @asis
@item No options
Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ºöÊèê‰æõÊâÄÊúâÁöÑ POSIX Ê≠£ÂàôË°®ËææÂºèÁöÑËÆæÊñΩÔºå
‰ª•Âèä
@ifnotinfo
ÂâçÈù¢ÊâÄÊèèËø∞ÁöÑÈÇ£‰∫õ GNU Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶„ÄÇ
@end ifnotinfo
@ifnottex
@ifnotdocbook
ÈÇ£‰∫õÂú® @ref{Regexp Operators} ÊèèËø∞ÁöÑ GNU Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶„ÄÇ
@end ifnotdocbook
@end ifnottex

@item @code{--posix}
Âè™ÂåπÈÖç POSIX Ê≠£ÂàôË°®ËææÂºèÔºåGNU Êìç‰ΩúÁ¨¶Ê≤°ÊúâÁâπÊÆäÂê´‰πâÔºàÂ¶Ç @samp{\w} Â∞±ÊòØÂåπÈÖçÂ≠óÈù¢ÁöÑ @samp{w}Ôºâ„ÄÇÂå∫Èó¥Ë°®ËææÂºè‰πüÂèØÁî®„ÄÇ

@cindex Brian Kernighan's @command{awk}
@item @code{--traditional}
ÂåπÈÖç‰º†ÁªüÁöÑ @command{awk} Ê≠£ÂàôË°®ËææÂºè„ÄÇ
GNU Êìç‰ΩúÁ¨¶Ê≤°ÊúâÁâπÊÆäÂê´‰πâÔºåÂπ∂‰∏îÂå∫Èó¥Ë°®ËææÂºè‰πü‰∏çÂèØÁî®„ÄÇÂõ†‰∏∫ BWK @command{awk} ÊîØÊåÅÂÆÉ‰ª¨Ôºå
POSIX ÁöÑÂ≠óÁ¨¶Á±ªÔºà@samp{[[:alnum:]]} Á≠âÔºâÂèØÁî®„ÄÇÁî±ÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂ÊèèËø∞ÁöÑËΩ¨‰πâÂ≠óÁ¨¶Â∫èÂàó‰ºöÊåâÂ≠óÈù¢Â§ÑÁêÜÔºåÂ∞±ÁÆóÂÆÉ‰ª¨‰ª•Ê≠£ÂàôË°®ËææÂºèÁöÑÂÖÉÂ≠óÁ¨¶Âá∫Áé∞„ÄÇ

@item @code{--re-interval}
Â¶ÇÊûúÊåáÂÆö‰∫Ü @option{--traditional}ÔºåÂàôÂèØ‰ª•Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠‰ΩøÁî®Âå∫Èó¥Ë°®ËææÂºè„ÄÇÂê¶ÂàôÂå∫Èó¥Ë°®ËææÂºèÊòØÈªòËÆ§ÂèØÁî®ÁöÑ„ÄÇ
@end table

@node Case-sensitivity
@section ÂåπÈÖçÊó∂ÁöÑÂ§ßÂ∞èÂÜô

@cindex regular expressions, case sensitivity
@cindex case sensitivity, regexps and
Â§ßÂ∞èÂÜôÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÈùûÂ∏∏ÈáçË¶ÅÔºåÊó†ËÆ∫ÊòØÂåπÈÖçÊ≠£Â∏∏Â≠óÁ¨¶ÔºàÂ¶ÇÈùûÂÖÉÂ≠óÁ¨¶ÔºâËøòÊòØÂú®ÊñπÊã¨Âè∑Ë°®ËææÂºè‰∏≠„ÄÇÂõ†Ê≠§ @samp{w} Âè™ÂåπÈÖçÂ∞èÂÜôÁöÑ @samp{w}ÔºåËÄå‰∏çÊòØÂ§ßÂÜôÁöÑ @samp{W} „ÄÇ

‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÂ∞±ÊòØ‰ΩøÁî®ÊñπÊã¨Âè∑Ë°®ËææÂºè‚Äî‚ÄîÂ¶Ç @samp{[Ww]}„ÄÇ
‰ΩÜÊòØË¶ÅÁªèÂ∏∏‰ΩøÁî®ÁöÑÊó∂ÂÄôÂ∞±ÊúâÁÇπÁÉ¶‰∫ÜÔºå‰πü‰ΩøÂæóÊ≠£ÂàôË°®ËææÂºèÊõ¥ÈöæËØª„ÄÇÊúâÂèØ‰ª•Êúâ‰∏§‰∏™ÂÖ∂‰ªñÊñπÊ≥ïÂèØ‰ª•ÈÄâÊã©„ÄÇ

Á¨¨‰∏ÄÁßçÊñπÊ≥ïÔºåÂ∞±ÊòØÂú®Ë¶ÅËøõË°å‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÂåπÈÖçÁöÑÂú∞ÊñπÔºåÁî®ÂÜÖÂª∫ÁöÑÂáΩÊï∞ tolower() ÊàñËÄÖ toupper() ÔºàÂΩìÁÑ∂ËøòÊ≤°ËÆ®ËÆ∫ËøáÔºõÂèØ‰ª•Êü•Áúã @ref{String Functions}Ôºâ
Â∞ÜÂÖ∂ËΩ¨Êç¢ÊàêÂêå‰∏ÄÁßçÂ§ßÂ∞èÂÜô„ÄÇ‰æãÂ¶ÇÔºö

@example
tolower($1) ~ /foo/  @{ @dots{} @}
@end example

@noindent
Â∞ÜÁ¨¨‰∏Ä‰∏™ÂüüËΩ¨Êç¢ÊàêÂ∞èÂÜôÔºåÁÑ∂ÂêéÂØπÂÖ∂ËøõË°åÂåπÈÖç„ÄÇËøô‰∏™Âú® POSIX ÂÖºÂÆπÁöÑ @command{awk} ‰∏≠ÊòØÂèØ‰ª•‰ΩøÁî®ÁöÑ„ÄÇ

@cindex @command{gawk}, regular expressions, case sensitivity
@cindex case sensitivity, @command{gawk}
@cindex differences in @command{awk} and @command{gawk}, regular expressions
@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@cindex @code{IGNORECASE} variable, with @code{~} and @code{!~} operators
@cindex @command{gawk}, @code{IGNORECASE} variable in
@c @cindex variables, @code{IGNORECASE}
Âè¶Â§ñ‰∏Ä‰∏™ÊñπÊ≥ïÔºåÂè™Âú® @command{gawk} ‰∏≠‰ΩøÁî®ÔºåÂ∞±ÊòØËÆæÁΩÆÂèòÈáè @code{IGNORECASE} ‰∏∫ÈùûÈõ∂ÂÄº
ÔºàÊü•Áúã @ref{Built-in Variables}Ôºâ„ÄÇ
ÂΩì @code{IGNORECASE} ‰∏∫ÈùûÈõ∂Êó∂Ôºå@emph{ÊâÄÊúâ}ÁöÑÊ≠£ÂàôË°®ËææÂºè‰ª•Â≠ó‰∏≤Êìç‰ΩúÈÉΩ‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô„ÄÇ

Âä®ÊÄÅÂú∞ÊîπÂèò @code{IGNORECASE} ÁöÑÂÄºÔºåÂ∞±ÂèØ‰ª•ÊéßÂà∂Á®ãÂ∫èËøêË°åÊó∂ÁöÑÂ§ßÂ∞èÂÜôÂ§ÑÁêÜÊñπÂºè„ÄÇÂ§ßÂ∞èÂÜôÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊòØÂå∫ÂàÜÁöÑÔºå
Âõ†‰∏∫ @code{IGNORECASE} ÔºàÂÉèÂÖ∂‰ªñÂ§ßÂ§öÊï∞ÂèòÈáè‰∏ÄÊ†∑ÔºâË¢´ÂàùÂßãÂåñ‰∏∫0Ôºö

@example
x = "aB"
if (x ~ /ab/) @dots{}   # this test will fail

IGNORECASE = 1
if (x ~ /ab/) @dots{}   # now it will succeed
@end example

‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå‰Ω†‰∏çËÉΩÈÄöËøá @code{IGNORECASE} Êù•‰ΩøÁâπÂÆöÁöÑËßÑÂàôÊòØÂ§ßÂ∞èÂÜô‰∏çÂå∫ÂàÜÁöÑÔºåËÄåÂÖ∂‰ªñÁöÑËßÑÂàôÂàôÊòØÂå∫ÂàÜÁöÑ„ÄÇ
Âõ†‰∏∫Ê≤°ÊúâÁõ¥Êé•ÁöÑÊñπÊ≥ïÊù•ËÆæÁΩÆ @code{IGNORECASE} ‰ª•ÈíàÂØπÁâπÂÆöÁöÑËßÑÂàô„ÄÇ
@footnote{ÊúâÁªèÈ™åÁöÑ C ‰∏é C++ Á®ãÂ∫èÂëò‰ºöÊ≥®ÊÑèÂà∞ÔºåÈÄöËøá‰ΩøÁî®ËøôÊ†∑ 
@samp{IGNORECASE = 1 && /foObAr/ @{ @dots{} @}} Âíå 
@samp{IGNORECASE = 0 || /foobar/ @{ @dots{} @}} ÁöÑÊñπÂºèÔºåËøôÁßçÊÉÖÂÜµÊòØÂèØËÉΩÁöÑ„ÄÇ
‰ΩÜÊòØËøôÂ§öÂ∞ëÊúâÁÇπÂê´Á≥äÔºåÂõ†Ê≠§Êàë‰ª¨‰∏çÂª∫ËÆÆËøô‰πàÂπ≤„ÄÇ}
Â¶ÇÊûúË¶ÅËøô‰πàÂÅöÔºåË¶Å‰πà‰ΩøÁî®ÊñπÊã¨Âè∑Ë°®ËææÂºèÊàñËÄÖ‰ΩøÁî® tolower() ÊñπÊ≥ïÔºå‰ΩÜÊòØ‰Ω†ÂèØ‰ª•ÂØπ @code{IGNORECASE} ÊâÄÂÅöÁöÑ‰∫ãÊÉÖÔºåÂ∞±ÊòØÂä®ÊÄÅÂú∞‰∏∫ÊâÄÊúâËßÑÂàôÂºÄÂÖ≥Â§ßÂ∞èÂÜôÂå∫ÂàÜÂäüËÉΩ„ÄÇ

@code{IGNORECASE} ‰πüÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏äËÆæÁΩÆÔºåÊàñËÄÖÂú® @code{BEGIN} ËßÑÂàô‰∏≠ËÆæÁΩÆ
ÔºàÊü•Áúã @ref{Other Arguments}Ôºå‰πüÂèØ‰ª•ÂèÇËÄÉ @ref{Using BEGIN/END}Ôºâ„ÄÇ
Âú®ÂëΩ‰ª§Ë°å‰∏äËÆæÁΩÆ @code{IGNORECASE} ‰ΩøÂæóÁ®ãÂ∫è‰∏çÁî®Êõ¥ÊîπÂ∞±ÂèØ‰ª•ËøõË°å‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÁöÑÂåπÈÖç„ÄÇ

@c @cindex ISO 8859-1
@c @cindex ISO Latin-1
Âú®Â§öÂ≠óËäÇÂ≠óÁ¨¶ÁöÑÂå∫Âüü‰∏≠ÔºåÂ§ßÂ∞èÂÜôÂ≠óÁ¨¶ÊòØÁ≠âÂêåÁöÑÔºåÂàôÊòØÊ†πÊçÆÂÆÉ‰ª¨Âú®Â≠óÁ¨¶ÈõÜ‰∏≠ÁöÑÂÆΩÂ≠óÁ¨¶ÂÄºÊù•ËøõË°åÊµãËØïÁöÑ„ÄÇ
Âê¶ÂàôÂ≠óÁ¨¶Â∞±ÊòØÊåâÁÖß ISO-8859-1ÔºàISO Latin-1ÔºâÂ≠óÁ¨¶ÈõÜËøõË°åÊµãËØïÁöÑ„ÄÇ
Ëøô‰∏™Â≠óÁ¨¶ÈõÜÊòØ‰º†Áªü 128 ASCII Â≠óÁ¨¶ÁöÑË∂ÖÈõÜÔºåÂÆÉ‰πüÊèê‰æõ‰∫ÜËÆ∏Â§öÁöÑÂ≠óÁ¨¶ÂèØÁî®‰∫éÊ¨ßÊ¥≤ËØ≠Ë®Ä„ÄÇ 
@footnote{Â¶ÇÊûú‰Ω†‰∏ç‰∫ÜËß£Ëøô‰∫õÔºå‰∏çÁî®ÊãÖÂøÉÔºåËøô‰ªÖ‰ªÖÊÑèÂë≥ÁùÄ gawk ÂèØ‰ª•ÂÅöÊ≠£Á°ÆÁöÑ‰∫ãÊÉÖ„ÄÇ}

Â¶ÇÊûú @command{gawk} ÊòØÂú®ÂÖºÂÆπÊ®°Âºè‰∏≠ÔºåÂàô @code{IGNORECASE} ÁöÑÂÄº‰∏ç‰ºöÊúâÂΩ±ÂìçÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇÂ§ßÂ∞èÂÜôÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÈÉΩÊòØÂå∫ÂàÜÁöÑ„ÄÇ

@node Regexp Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Ê≠£ÂàôË°®ËææÂºèÊèèËø∞‰∫ÜË¶ÅË¢´ÂåπÈÖçÁöÑÂ≠ó‰∏≤ÈõÜ„ÄÇÂú® @command{awk} ‰∏≠ÔºåÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÂÜôÊàêËøôÊ†∑Ôºö@code{/}@dots{}@code{/}„ÄÇ

@item
Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÂèØ‰ª•Âú®Ê®°Âºè‰∏éÊù°‰ª∂Ë°®ËææÂºè‰∏≠ÂçïÁã¨‰ΩøÁî®ÔºåÊàñËÄÖÂà©Áî® @samp{~} ‰∏é @samp{!~} Êìç‰ΩúÁ¨¶‰ΩøÂÖ∂Êàê‰∏∫ÂåπÈÖçË°®ËææÂºèÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

@item
ËΩ¨‰πâÂ∫èÂàóÂèØ‰ª•ËÆ©‰Ω†ËæìÂÖ•‰∏çÂèØÊâìÂç∞Â≠óÁ¨¶Ôºå‰πüÂèØ‰ª•ËÆ©‰Ω†Â∞ÜÊ≠£ÂàôË°®ËææÂºèÁöÑÂÖÉÂ≠óÁ¨¶‰Ωú‰∏∫Â≠óÈù¢Â≠óÁ¨¶Âú®Ë°®ËææÂºè‰∏≠ËøõË°åÂåπÈÖç„ÄÇ

@item
Ê≠£ÂàôË°®ËææÂºèÊìç‰ΩúÁ¨¶ÂèØ‰ª•Êèê‰æõÁªÑÂêàÔºåÈÄâÊã©‰ª•ÂèäÈáçÂ§çÂäüËÉΩ„ÄÇ

@item
ÊñπÊã¨Âè∑Ë°®ËææÂºè‰Ωø‰Ω†Êñπ‰æøÂú∞ÊåáÂÆö‰∏Ä‰∏™Â≠óÁ¨¶ÈõÜÂêàÔºåÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÊüê‰∏™ÁÇπËøõË°åÂåπÈÖç„ÄÇÂú®ÊñπÊã¨Âè∑Ë°®ËææÂºè‰∏≠„ÄÇPOSIX Â≠óÁ¨¶Á±ªÂèØ‰ª•ÊåáÂÆö‰∏ÄÁªÑÂå∫ÂüüÂ≠óÁ¨¶Êó†ÂÖ≥ÁöÑÂ≠óÁ¨¶„ÄÇ

@item
Ê≠£ÂàôË°®ËææÂºè‰ºöÂåπÈÖçÊúÄÂ∑¶ÊúÄÈïøÁöÑÂ≠ó‰∏≤„ÄÇËøôÂØπ‰∫é‰Ω†ÈúÄË¶Å‰∫ÜËß£ÂåπÈÖçÁöÑÂå∫ÂüüËåÉÂõ¥Êó∂ÊòØÊúâÊÑè‰πâÁöÑÔºåÂÉèÊñá‰ª∂ÊõøÊç¢Ôºå‰ª•ÂèäËÆ∞ÂΩïÂàÜÈöîÁ¨¶ÊòØÊ≠£ÂàôË°®ËææÂºèËøôÁßçÊÉÖÂÜµ„ÄÇ

@item
ÂåπÈÖçË°®ËææÂºèÂèØ‰ª•‰ΩøÁî®Âä®ÊÄÅÁöÑÊ≠£ÂàôË°®ËææÂºèÔºàÂ¶ÇÂ≠ó‰∏≤ÂÄºÊåâÁÖßÊ≠£ÂàôË°®ËææÂºèÂØπÂæÖÔºâ„ÄÇ

@item
@command{gawk} ÁöÑ @code{IGNORECASE} ÂèòÈáèÂèØ‰ª•ËÆ©‰Ω†ÊéßÂà∂Ê≠£ÂàôË°®ËææÂºèÂåπÈÖçÊó∂ÁöÑÂ§ßÂ∞èÂå∫ÂàÜÊÉÖÂÜµ„ÄÇÂú®ÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{awk} ‰∏≠Ôºå‰ΩøÁî® tolower() ÊàñËÄÖ toupper ()„ÄÇ

@end itemize


@node Reading Files
@chapter ËØªÂèñËæìÂÖ•Êñá‰ª∂

@cindex reading input files
@cindex input files, reading
@cindex input files
@cindex @code{FILENAME} variable
Âú®ÂÖ∏ÂûãÁöÑ @command{awk} Á®ãÂ∫è‰∏≠Ôºå@command{awk} Ë¶Å‰πà‰ªéÊ†áÂáÜËæìÂÖ•ÔºàÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂ∞±ÊòØÈîÆÁõòÔºå‰ΩÜÊòØÂ∏∏Â∏∏ÊòØÂÖ∂‰ªñÁ®ãÂ∫èÂëΩ‰ª§ÁöÑÁÆ°ÈÅìËæìÂÖ•ÔºâÔºå
Ë¶Å‰πà‰ªé‰Ω†Âú® @command{awk} ÂëΩ‰ª§Ë°å‰∏äÊåáÂÆöÁöÑÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆ„ÄÇÂ¶ÇÊûú‰Ω†ÊåáÂÆö‰∫ÜËæìÂÖ•Êñá‰ª∂Ôºå@command{awk} ‰ºöÊåâÈ°∫Â∫è‰ªé‰∏≠ËØªÂèñÔºåÂπ∂Âú®‰∏ã‰∏Ä‰∏™Êñá‰ª∂‰πãÂâçÂ§ÑÁêÜÂÖ∂‰∏≠ÁöÑÊï∞ÊçÆ„ÄÇ
ÂΩìÂâçÊ≠£Âú®Â§ÑÁêÜÁöÑÊñá‰ª∂ÂèØ‰ª•‰ªéÂèÇÂÆö‰πâÁöÑÂèòÈáè @code{FILENAME} ‰∏≠ÂèñÂæóÔºàÊü•Áúã @ref{Built-in Variables}Ôºâ„ÄÇ

@cindex records
@cindex fields
ËæìÂÖ•Âçï‰ΩçÁß∞‰∏∫@dfn{ËÆ∞ÂΩï}ÔºåÂπ∂Âà©Áî®‰Ω†Êèê‰æõÁöÑËßÑÂàô‰∏ÄÊ¨°Â§ÑÁêÜ‰∏Ä‰∏™ËÆ∞ÂΩïÔºåÊØè‰∏™ËÆ∞ÂΩï‰∏ÄË°å„ÄÇÊØè‰∏™ËÆ∞ÂΩï‰ºöË¢´Ëá™Âä®ÂäõÂú∞ÊãÜÂàÜÊàêÂá†‰∏™ÂùóÔºåÁß∞‰∏∫@dfn{Âüü}„ÄÇ
ËøôÊ†∑Á®ãÂ∫èÂ∞±ËÉΩÂ§üÊõ¥Â•ΩÂú∞Â§ÑÁêÜËÆ∞ÂΩïÁöÑ‰∏çÂêåÈÉ®ÂàÜ„ÄÇ

@cindex @code{getline} command
Âú®ÊûÅÂ∞ëÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØËÉΩÈúÄË¶Å‰ΩøÁî® @code{getline} ÂëΩ‰ª§Êù•ËØªÂèñÊï∞ÊçÆ„ÄÇ@code{getline} ÈùûÂ∏∏ÊúâÁî®Ôºå‰∏ÄÊòØÂÖ∂ÂèØ‰ª•‰ªéÂ§ßÈáèÁöÑÊñá‰ª∂‰∏≠ÊòæÁ§∫Âú∞ËæìÂÖ•Ôºå‰∫åÊòØÂú®ËØªÂèñÊñá‰ª∂Êó∂ÔºåËøô‰∫õÊñá‰ª∂‰∏çÈúÄË¶ÅÂú®ÂëΩ‰ª§Âú∞‰∏≠ÊåáÂÆö
ÔºàÊü•Áúã @ref{Getline}Ôºâ„ÄÇ

@menu
* Records::                     Controlling how data is split into records.
* Fields::                      An introduction to fields.
* Nonconstant Fields::          Nonconstant Field Numbers.
* Changing Fields::             Changing the Contents of a Field.
* Field Separators::            The field separator and how to change it.
* Constant Size::               Reading constant width data.
* Splitting By Content::        Defining Fields By Content
* Multiple Line::               Reading multiline records.
* Getline::                     Reading files under explicit program control
                                using the @code{getline} function.
* Read Timeout::                Reading input with a timeout.
* Command-line directories::    What happens if you put a directory on the
                                command line.
* Input Summary::               Input summary.
* Input Exercises::             Exercises.
@end menu

@node Records
@section ËæìÂÖ•Â¶Ç‰ΩïÊãÜÂàÜ‰∏∫ËÆ∞ÂΩï

@cindex input, splitting into records
@cindex records, splitting input into
@cindex @code{NR} variable
@cindex @code{FNR} variable
@command{awk} Â∞ÜËæìÂÖ•ÊãÜÂàÜ‰∏∫ËÆ∞ÂΩï‰∏éÂüüÔºåÁÑ∂ÂêéËæìÂÖ•Âà∞‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠„ÄÇÂêåÊó∂Ôºå@command{awk} ËÆ∞ÂΩï‰ªéÂΩìÂâçËæìÂÖ•Êñá‰ª∂‰∏≠Â∑≤ÁªèËØªÂèñÁöÑËÆ∞ÂΩïÊï∞„ÄÇ
Ëøô‰∏™ÂÄºÂ≠òÂÇ®Âú®È¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{FNR} ‰∏≠ÔºåÂú®Â§ÑÁêÜ‰∏ã‰∏Ä‰∏™Êñá‰ª∂Êó∂ÔºåÂÆÉ‰ºöË¢´ÈáçÁΩÆ‰∏∫ 0„ÄÇ
Âè¶‰∏Ä‰∏™È¢ÑÂÆö‰πâÁöÑÂèòÈáèÁß∞‰∏∫ @code{NR}ÔºåÊù•Áî®ËÆ∞ÂΩï‰ªéÊâÄÊúâ@value{DF}‰∏≠Â∑≤ÁªèËØªÂèñËæìÂÖ•ËÆ∞ÂΩïÁöÑÊÄªÊï∞„ÄÇÂÆÉ‰ªé 0 ÂºÄÂßãÔºå‰ΩÜÊòØ‰∏ç‰ºöËá™Âä®ÈáçËÆæ‰∏∫ 0„ÄÇ

@menu
* awk split records::           How standard @command{awk} splits records.
* gawk split records::          How @command{gawk} splits records.
@end menu

@node awk split records
@subsection Ê†áÂáÜ @command{awk} ÁöÑËÆ∞ÂΩïÊãÜÂàÜ

@cindex separators, for records
@cindex record separators
ËÆ∞ÂΩïÈÄöËøáË¢´Áß∞‰∏∫@dfn{ËÆ∞ÂΩïÂàÜÈöîÁ¨¶}ÁöÑÂ≠óÁ¨¶ÂàÜÈöî„ÄÇÈªòËÆ§ÁöÑÂàÜÈöîÁ¨¶ÊòØÊç¢Ë°åÁ¨¶Ôºà@samp{\n}Ôºâ„ÄÇ
ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàËÆ∞ÂΩïÈªòËÆ§ÈÉΩÊòØ‰∏ÄË°å‰∏ÄË°åÁöÑ„ÄÇ
Ë¶Å‰ΩøÁî®‰∏çÂêåÁöÑÂ≠óÁ¨¶Êù•ËøõË°åËÆ∞ÂΩïÂàÜÈöîÔºåÁÆÄÂçïÂú∞ÁªôÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{RS} ËµãÂÄºÂç≥ÂèØ„ÄÇ

@cindex newlines, as record separators
@cindex @code{RS} variable
‰∏éÂÖ∂‰ªñÁöÑÂèòÈáèÁ±ª‰ººÔºå@code{RS} ÁöÑÂÄºÂèØ‰ª•Âú® @command{awk} Á®ãÂ∫è‰∏≠ÈÄöËøáÊìç‰ΩúÁ¨¶ @samp{=} Êù•ÊîπÂèòÔºàÊü•Áúã @ref{Assignment Ops}Ôºâ„ÄÇ
Êñ∞ÁöÑËÆ∞ÂΩïÂàÜÈöîÁ¨¶ÂèØ‰ª•Áî®ÂºïÂè∑ÂºïËµ∑Êù•ÔºåÂç≥ÊåáÁ§∫‰∏∫‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏Èáè„ÄÇ‰∏ÄËà¨Âú∞ÔºåËøô‰πàÂÅöÁöÑÊ≠£Á°ÆÊó∂Èó¥ÊòØÂú®Á®ãÂ∫èÊâßË°åÁöÑÂºÄÂßãÔºåÂπ∂Âú®ËÆ∞ÂΩïÊú™ËæìÂÖ•‰πãÂâçÔºåÂõ†Ê≠§Â∞±ÂèØ‰ª•‰ªéÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÂºÄÂßãËøõË°åÂ§ÑÁêÜ„ÄÇ
Ë¶ÅËøô‰πàÂÅöÔºåÂèØ‰ª•‰ΩøÁî®ÁâπÊÆäÁöÑ @code{BEGIN} Ê®°ÂºèÔºàÊü•Áúã @ref{BEGIN/END}Ôºâ„ÄÇ‰æãÂ¶ÇÔºö

@example
awk 'BEGIN @{ RS = "u" @}
     @{ print $0 @}' mail-list
@end example

@noindent
Âú®ËØªÂèñ‰ªª‰ΩïËæìÂÖ•‰πãÂâçÔºåÂ∞Ü @code{RS} ÁöÑÂÄºÊîπÊàê @samp{u} „ÄÇ
Êñ∞ÁöÑÂÄºÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÂÆÉÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÊòØÂ≠óÊØç @samp{u}ÔºõÂÖ∂ÁªìÊûúÂ∞±ÊòØÔºåËÆ∞ÂΩïÈÉΩË¢´Â≠óÊØç @samp{u} ËøõË°åÂàÜÈöî„ÄÇ
ÁÑ∂ÂêéËæìÂÖ•Êñá‰ª∂Ë¢´ËØªÂèñÔºå@command{awk} Á®ãÂ∫èÁöÑÁ¨¨‰∫å‰∏™ËßÑÂàôÔºàÊ≤°ÊúâÊ®°ÂºèÁöÑÂä®‰ΩúÔºâÊâìÂç∞ÊØè‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇ
Âõ†‰∏∫ÊØè‰∏™ @code{print} ËØ≠Âè•ÈÉΩ‰ºöÂú®ËæìÂá∫ÁöÑÊú´Â∞æÊ∑ªÂä†‰∏Ä‰∏™Êç¢Ë°åÁ¨¶Ôºå
ÊâÄ‰ª•Ôºå‰∏ãÈù¢Ëøô‰∏™ @command{awk} Á®ãÂ∫èÂ∞±ÊòØÂ∞ÜÊØè‰∏™Â≠óÊØç @samp{u} Êç¢Êàê‰∫ÜÊç¢Ë°åÁ¨¶„ÄÇ
‰∏ãÈù¢ÊòØÊâßË°åÁ®ãÂ∫èÂú®‰ΩøÁî® @file{mail-list} ‰Ωú‰∏∫ËæìÂÖ•Êñá‰ª∂Êó∂ÁöÑËæìÂá∫Ôºö

@example
$ @kbd{awk 'BEGIN @{ RS = "u" @}}
>      @kbd{@{ print $0 @}' mail-list}
@print{} Amelia       555-5553     amelia.zodiac
@print{} sq
@print{} e@@gmail.com    F
@print{} Anthony      555-3412     anthony.assert
@print{} ro@@hotmail.com   A
@print{} Becky        555-7685     becky.algebrar
@print{} m@@gmail.com      A
@print{} Bill         555-1675     bill.drowning@@hotmail.com       A
@print{} Broderick    555-0542     broderick.aliq
@print{} otiens@@yahoo.com R
@print{} Camilla      555-2912     camilla.inf
@print{} sar
@print{} m@@skynet.be     R
@print{} Fabi
@print{} s       555-1234     fabi
@print{} s.
@print{} ndevicesim
@print{} s@@
@print{} cb.ed
@print{}     F
@print{} J
@print{} lie        555-6699     j
@print{} lie.perscr
@print{} tabor@@skeeve.com   F
@print{} Martin       555-6480     martin.codicib
@print{} s@@hotmail.com    A
@print{} Sam
@print{} el       555-3430     sam
@print{} el.lanceolis@@sh
@print{} .ed
@print{}         A
@print{} Jean-Pa
@print{} l    555-2127     jeanpa
@print{} l.campanor
@print{} m@@ny
@print{} .ed
@print{}      R
@print{}
@end example

@noindent
Ê≥®ÊÑèÂêçÂ≠ó‰∏∫ @samp{Bill} ÁöÑÈÇ£‰∏ÄÈ°πÊ≤°ÊúâË¢´ÊãÜÂàÜ„ÄÇÂú®ÂàùÂßãÁöÑ@value{DF}‰∏≠ÔºàÊü•Áúã @ref{Sample Data Files}ÔºâÔºåÈÇ£‰∏ÄË°åÊòØËøôÊ†∑ÁöÑÔºö

@example
Bill         555-1675     bill.drowning@@hotmail.com       A
@end example

@noindent
ÈáåÈù¢‰∏çÂåÖÂê´ @samp{u}ÔºåÂõ†Ê≠§Ê≤°ÊúâÁêÜÁî±Ë¶ÅÂàÜÈöîËÆ∞ÂΩïÔºå‰∏çÂÉèÂÖ∂‰ªñÁöÑÈÉ®ÂàÜÔºåÂÆÉ‰ª¨ÊØè‰∏™ÈÉΩÊúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ @samp{u} Âá∫Áé∞„ÄÇÂÆûÈôÖ‰∏äÔºåËøô‰∏™ËÆ∞ÂΩï‰ºöË¢´ÂΩìÂâç‰∏Ä‰∏™ËÆ∞ÂΩïÁöÑ‰∏ÄÈÉ®ÂàÜÔºõËæìÂá∫Êó∂ÂàÜÈöî‰ªñ‰ª¨ÁöÑÊç¢Ë°åÁ¨¶ÊòØÂéüÊù•@value{DF}‰∏≠ÁöÑÊç¢Ë°åÁ¨¶ÔºåËÄå‰∏çÊòØ @command{awk} ÂêéÊù•ÊâìÂç∞ËÆ∞ÂΩïÊó∂Âä†‰∏äÁöÑ„ÄÇ

@cindex record separators, changing
@cindex separators, for records
Âè¶‰∏Ä‰∏™ÊñπÊ≥ïÂ∞±ÊòØÂà©Áî®ÂèòÈáèËµãÂÄºÁâπÊÄßÔºåÂú®ÂëΩ‰ª§Ë°å‰∏äÊîπÂèòËÆ∞ÂΩïÂàÜÈöîÁ¨¶ÔºàÊü•Áúã @ref{Other Arguments}ÔºâÔºö

@example
awk '@{ print $0 @}' RS="u" mail-list
@end example

@noindent
ËøôÈáåÂ∞ÜÂú®Â§ÑÁêÜ @file{mail-list} ‰πãÂâçÂ∞Ü @code{RS} ËÆæÁΩÆÊàê @samp{u} „ÄÇ

Âà©Áî®Á±ª‰ºº‰∫é @samp{u} ËøôÊ†∑ÁöÑÂ≠óÊØçÂ≠óÁ¨¶‰Ωú‰∏∫ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶ÊúâÂèØËÉΩ‰∫ßÁîüÂ•áÊÄ™ÁöÑÁªìÊûú„ÄÇ
‰ΩøÁî®ÁâπÂà´‰∏ÄÁÇπÁöÑÂ≠óÁ¨¶ÔºåÂ¶Ç @samp{/} Êõ¥ÂèØËÉΩÂú®Â§ßÂ§öÊï∞‰æãÂ≠ê‰∏≠‰∫ßÁîüÊ≠£Á°ÆÁöÑÁªìÊûúÔºå‰ΩÜÊòØËøô‰πü‰∏çÊòØÊâìÂåÖÁ•®ÁöÑ‰∫ãÊÉÖ„ÄÇÁªàÊûÅÊñπÊ≥ïÂ∞±ÊòØÔºöË¶Å‰∫ÜËß£‰Ω†ÁöÑÊï∞ÊçÆ„ÄÇ

‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè‰Ωú‰∏∫ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶ÔºåÂΩì @command{gawk} ÂÆåÂÖ®‰∏é POSIX ÂÖºÂÆπÊó∂ÔºåÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÊÉÖÂÜµ‰ºöÂá∫Áé∞
ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ‰∏ãÈù¢ÔºàÊûÅÁ´ØÊÉÖÂÜµÔºâÁöÑÁÆ°Á®ã‰ºöÊâìÂç∞‰ª§‰∫∫ÊÉäËÆ∂ÁöÑ @samp{1} Ôºö

@example
$ @kbd{echo | gawk --posix 'BEGIN @{ RS = "a" @} ; @{ print NF @}'}
@print{} 1
@end example

ËøôÈáåÊúâ‰∏Ä‰∏™ÂüüÔºåÂè™ÂåÖÂê´‰∏Ä‰∏™Êç¢Ë°åÁ¨¶„ÄÇÂÜÖÂª∫ÂèòÈáè @code{NF} ÁöÑÂÄºÂ∞±ÊòØÂΩìÂâçËÆ∞ÂΩïÁöÑÂüüÁöÑÊï∞Èáè„ÄÇ
ÔºàÂú®Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ºöÂ∞ÜÊç¢Ë°åÁ¨¶ÂΩìÂÅöÁ©∫Ê†ºÂ§ÑÁêÜÔºå‰ºöÊâìÂç∞ @samp{0} ‰Ωú‰∏∫ÁªìÊûú„ÄÇ@command{awk} Â§ßÂ§öÊï∞ÂÖ∂‰ªñÁâàÊú¨ÈÉΩÊòØËøô‰πàË°®Áé∞ÁöÑ„ÄÇÔºâ

@cindex dark corner, input files
ÂΩìËæìÂÖ•Êñá‰ª∂ÁªìÊùüÂêéÔºåÂ∞±‰ºöÁªìÊùüÂΩìÂâçÁöÑËæìÂÖ•ËÆ∞ÂΩïÔºåÂ∞±ÁÆóÊñá‰ª∂ÁöÑÊúÄÂêé‰∏Ä‰∏™Â≠óÁ¨¶‰∏çÂú® @code{RS} Èáå„ÄÇ
@value{DARKCORNER}

@cindex empty strings
@cindex null strings
@cindex strings, empty, See null strings
Á©∫‰∏≤ @code{""}ÔºàÂç≥Ê≤°Êúâ‰ªª‰ΩïÂ≠óÁ¨¶ÁöÑ‰∏≤ÔºâÂØπ‰∫é @code{RS} ÁöÑÂÄºÊù•ËØ¥ÔºåÊúâÁùÄÁâπÊÆäÁöÑÂê´‰πâ„ÄÇ
Âç≥Ë°®Á§∫ËÆ∞ÂΩï‰πãÈó¥ÊòØÈÄöËøá‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á©∫Ë°åÊù•ÂàÜÈöîÁöÑÔºåËÄå‰∏çÊòØÂÖ∂‰ªñÁöÑ‰ªÄ‰πàÂ≠óÁ¨¶„ÄÇÊü•Áúã @ref{Multiple Line}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑÁªÜËäÇ„ÄÇ

Â¶ÇÊûú‰Ω†Âú® @command{awk} Á®ãÂ∫è‰∏≠‰∏≠ÈÄîÊîπÂèò @code{RS} ÁöÑÂÄºÔºåÊñ∞ÁöÑÂÄºÂ∞ÜÁî®Êù•ÂÅöÂêéÁª≠ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶Ôºå‰ΩÜÊòØÂΩìÂâçÁöÑËÆ∞ÂΩï‰ºöÁªßÁª≠ÊåâÂéüÊù•ÁöÑÊñπÂºèÂ§ÑÁêÜ„ÄÇ

@cindex @command{gawk}, @code{RT} variable in
@cindex @code{RT} variable
@cindex records, terminating
@cindex terminating records
@cindex differences in @command{awk} and @command{gawk}, record separators
@cindex regular expressions, as record separators
@cindex record separators, regular expressions as
@cindex separators, for records, regular expressions as
ÂΩìËÆ∞ÂΩïÂ∞æÂ∑≤ÁªèÁ°ÆÂÆöÂ•Ω‰∫ÜÔºå@command{gawk} ËÆæÁΩÆÂèòÈáè @code{RT} ÁöÑÂÄº‰∏∫ËæìÂÖ•Êñá‰ª∂‰∏≠ÂåπÈÖç @code{RS} ÁöÑÊñáÊú¨„ÄÇ

@node gawk split records
@subsection ‰ΩøÁî® @command{gawk} ÂàÜÂâ≤ËÆ∞ÂΩï

@cindex common extensions, @code{RS} as a regexp
@cindex extensions, common@comma{} @code{RS} as a regexp
ÂΩì‰ΩøÁî® @command{gawk} Êó∂Ôºå@code{RS} ÁöÑÂÄºÂπ∂‰∏çÂ±ÄÈôê‰∫éÂçï‰∏™Â≠óÁ¨¶ÁöÑÂ≠ó‰∏≤Ôºå
ÂÆÉ‰πüÂèØ‰ª•ÊòØ‰ªª‰ΩïÁöÑÊ≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @ref{Regexp}Ôºâ„ÄÇ@value{COMMONEXT}
‰∏ÄËà¨Êù•ËØ¥ÔºåÊØè‰∏™ËÆ∞ÂΩïÈÉΩÂú®‰∏ã‰∏™ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÁöÑÊñá‰ª∂‰∏≤Âú∞ÊñπÁªìÊùüÔºõËÄå‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÂàôÂºÄÂßã‰∫éËØ•ÂåπÈÖçÊñáÊú¨ÁöÑÂú∞Êñπ„ÄÇ
Ëøô‰∏™‰∏ÄËà¨ÁöÑÂéüÂàôÂú®ÈÄöÂ∏∏ÁöÑÊÉÖÂÜµ‰∏ãÊòØ‰πàÂ∑•‰ΩúÁöÑÔºåÊ≠§Êó∂ @code{RS} Âè™ÂåÖÊã¨‰∏Ä‰∏™Êç¢Ë°åÁ¨¶Ôºö
ËÆ∞ÂΩïÁªìÊùü‰∫é‰∏ã‰∏Ä‰∏™ÂåπÈÖç‰∏≤ÁöÑÂºÄÂßãÂ§ÑÔºàËæìÂÖ•‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™Êç¢Ë°åÁ¨¶ÔºâÔºåÁÑ∂Âêé‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÂ∞±ÂºÄÂßã‰∫éÂàöÊâçÂåπÈÖç‰∏≤ÁöÑÂêéÈù¢ÔºàÂç≥‰∏ã‰∏ÄË°åÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶Â§ÑÔºâ„ÄÇÁî±‰∫éÊç¢Ë°åÁ¨¶ÂåπÈÖç @code{RS}ÔºåÊâÄ‰ª•ÂÖ∂Âπ∂‰∏çÊòØ‰ªª‰ΩïËÆ∞ÂΩïÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

ÂΩì @code{RS} Âè™ÊòØÂçï‰∏ÄÁöÑ‰∏Ä‰∏™Â≠óÁ¨¶Êó∂Ôºå@code{RT} ÂåÖÂê´Áõ∏ÂêåÁöÑÂçï‰∏ÄÂ≠óÁ¨¶„ÄÇ
‰ΩÜÊòØÔºåÂΩì@code{RS} ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊó∂Ôºå@code{RT} ÂåÖÂê´ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÁöÑÂÆûÈôÖÁöÑËæìÂÖ•ÊñáÊú¨„ÄÇ

Â¶ÇÊûúËæìÂÖ•Êñá‰ª∂ÁªìÊùüÊó∂‰πüÊ≤°ÊúâÊñáÊú¨ÂåπÈÖç @code{RS}Ôºå@command{gawk} Â∞Ü @code{RT} ËÆæÁΩÆÊàêÁ©∫‰∏≤„ÄÇ

‰∏ãÈù¢ÁöÑ‰æãÂ≠êËß£Èáä‰∫ÜËøô‰∏§‰∏™ÁâπÊÄß„ÄÇ‰æãÂ≠ê‰∏≠Â∞Ü @code{RS} ËÆæÁΩÆÊàê‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºåË°®ËææÂºèË¶Å‰πàÂåπÈÖçÊç¢Ë°åÁ¨¶ÔºåË¶Å‰πàÊòØ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Â§ßÂÜôÂ≠óÊØçÁöÑÂ∫èÂàóÔºåÂÖ∂ÂâçÂØºÂπ∂‰∏î/ÊàñËÄÖÂÖ∂Êú´Â∞æÂ∏¶ÊúâÂèØÈÄâÁöÑÁ©∫ÁôΩÁ¨¶„ÄÇ

@example
$ @kbd{echo record 1 AAAA record 2 BBBB record 3 |}
> @kbd{gawk 'BEGIN @{ RS = "\n|( *[[:upper:]]+ *)" @}}
>             @kbd{@{ print "Record =", $0,"and RT = [" RT "]" @}'}
@print{} Record = record 1 and RT = [ AAAA ]
@print{} Record = record 2 and RT = [ BBBB ]
@print{} Record = record 3 and RT = [
@print{} ]
@end example

@noindent
ÊñπÊã¨Âè∑ÂãæÂãíÂá∫ @code{RT} ÁöÑÂÜÖÂÆπÔºåËÆ©‰Ω†ÂèØÁúãÂà∞‰∫ÜÂâçÈù¢‰∏éÂêéÈù¢ÁöÑÁ©∫ÁôΩ„ÄÇ@code{RT} ÁöÑÁªàÂÄºÊòØ‰∏Ä‰∏™Êç¢Ë°åÁ¨¶„ÄÇ
ÂèØ‰ª•Êü•Áúã @ref{Simple Sed}ÔºåÊù•ÁúãÁúãÊõ¥ÊúâÁî®ÁöÑ‰ª•Ê≠£ÂàôË°®ËææÂºè‰Ωú‰∏∫ @code{RS} ‰∏é @code{RT} ÁöÑ‰æãÂ≠ê„ÄÇ

Â¶ÇÊûú‰Ω†Â∞Ü @code{RS} ËÆæÁΩÆÂú®ÂèØ‰ª•ÊúâÂèØÈÄâÁªìÊùüÊñáÊú¨ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂ¶Ç @samp{RS = "abc(XYZ)?"}Ôºå
Áî±‰∫éÂÆûÁé∞‰∏äÁöÑÈôêÂà∂Ôºå@command{gawk} ÊúâÂèØËÉΩÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÁöÑÂâçÈÉ®ÂàÜÔºåËÄå‰∏ç‰ºöÂåπÈÖçÂêéÈù¢ÁöÑÂèØÈÄâÈÉ®ÂàÜÔºåÂ∞§ÂÖ∂ÊòØÂèØÈÄâÁöÑÁªìÂ∞æÂåπÈÖçÂæàÈïøÁöÑÊÉÖÂÜµ„ÄÇ
@command{gawk} ‰ºöËØïÂõæÈÅøÂÖçËøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÁõÆÂâçÔºåÂπ∂‰∏ç‰øùËØÅÁªù‰∏ç‰ºöÂèëÁîüËøô‰∏™ÊÉÖÂÜµÔºàÂç≥‰∏çÂåπÈÖçÁªìÂ∞æÂèØÈÄâÈÉ®ÂàÜ‚Äî‚Äî‚ÄîËØëËÄÖÔºâ„ÄÇ

@quotation ÊèêÁ§∫
Ë¶ÅËÆ∞‰ΩèÔºåÂú® @command{awk} ‰∏≠Ôºå@samp{^} ‰∏é @samp{$} ÈîöÂÆöÂÖÉÂ≠óÁ¨¶ÂåπÈÖçÂ≠ó‰∏≤ÁöÑÂºÄÂßã‰∏éÁªìÊùüÔºåËÄå‰∏çÊòØË°åÁöÑÂºÄÂßã‰∏éÁªìÊùü„ÄÇ
ËøôÊ†∑ÁöÑÁªìÊûúÂ∞±ÊòØÔºåÂ¶ÇÊûúÊúâËøôÊ†∑ÁöÑË°®ËææÂºè @samp{RS = "^[[:upper:]]"} ÂèØ‰ª•Âè™ÂåπÈÖçÊñá‰ª∂ÁöÑÂºÄÂ§¥„ÄÇ
ËøôÊòØÂõ†‰∏∫ @command{gawk} Â∞ÜËæìÂÖ•Êñá‰ª∂Áúã‰ΩúÊòØ‰∏Ä‰∏™ÂåÖÂê´Êç¢Ë°åÁ¨¶ÁöÑÈïø‰∏≤„ÄÇÂõ†Ê≠§ÊúÄÂ•ΩÈÅøÂÖçÂú® @code{RS} ÁöÑÂÄº‰∏≠Âê´ÊúâÈîöÂÆöÁ¨¶„ÄÇ
@end quotation

@cindex differences in @command{awk} and @command{gawk}, @code{RS}/@code{RT} variables
Â∞Ü @code{RS} ËÆæÁΩÆÊàê‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºå‰ª•Âèä @code{RT} ÂèòÈáèÊòØ @command{gawk} ÁöÑÊâ©Â±ïÔºõÂÆÉ‰ª¨Âú®ÂÖºÂÆπÊ®°Âºè‰∏ãÊòØ‰∏çÂèØÁî®ÁöÑÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ
Âú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºåÂè™Êúâ @code{RS} ÂÄºÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶‰ºöÁî®Êù•Á°ÆÂÆöËÆ∞ÂΩïÁöÑÁªìÊùü„ÄÇ

@sidebar @code{RS = "\0"} ÊòØ‰∏çÂèØÁßªÊ§çÁöÑ
@cindex portability, data files as single record
ÊúâÈÇ£‰πàÂá†Ê¨°Ôºå‰Ω†ÂèØËÉΩÊÉ≥Â∞ÜÊï¥‰∏™@value{DF}‰Ωú‰∏∫‰∏Ä‰∏™ÂçïÁã¨ÁöÑËÆ∞ÂΩï„ÄÇ
ÂîØ‰∏ÄËÉΩÂ§üÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩÁöÑÂ∞±ÊòØÂ∞Ü @code{RS} ÁöÑÂÄºËÆæÁΩÆÊàê‰∏ç‰ºöÂú®ËæìÂÖ•Êñá‰ª∂‰∏≠Âá∫Áé∞ÁöÑÂ≠óÁ¨¶„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÁ®ãÂ∫èÊØîËæÉÈöæÂÅöÂà∞Âú®‰ªªÊÑèÁöÑËæìÂÖ•Êñá‰ª∂‰∏≠ÈÉΩÊòØÊ≠£Á°ÆÁöÑ„ÄÇ

‰Ω†ÂèØËÉΩËÆ§‰∏∫ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂØπ‰∫éÊñáÊú¨Êñá‰ª∂Êù•ËØ¥ÔºåÊâÄÊúâ‰ΩçÈÉΩÁî± 0 ÁªÑÊàêÁöÑ @sc{nul} Â≠óÁ¨¶ÔºåÈÄÇÂêà‰Ωú‰∏∫ @code{RS} ÁöÑÂÄºÔºö

@example
BEGIN @{ RS = "\0" @}  # whole file becomes one record?
@end example

@cindex differences in @command{awk} and @command{gawk}, strings, storing
@command{gawk} ÂÆûÈôÖ‰∏äÊé•ÂèóËøôÊ†∑ÁöÑËæìÂÖ•ÔºåÂπ∂‰∏î‰ΩøÁî® @sc{nul} Â≠óÁ¨¶‰Ωú‰∏∫ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶„ÄÇ
ËøôÂØπ‰∫éÁâπÂÆöÁöÑÁâπÊÆäÊñá‰ª∂ÊòØÂèØ‰ª•ÁöÑÔºå‰æãÂ¶ÇÂú® GNU/Linux Á≥ªÁªü‰∏äÁöÑÊñá‰ª∂ @file{/proc/environ}ÔºåÂÆûÈôÖ‰∏ä @sc{nul} Â≠óÁ¨¶ÂÆûÈôÖ‰∏äÊòØËÆ∞ÂΩïÂàÜÈöîÁ¨¶„ÄÇ
ÂèØÊòØÔºåÂØπ‰∫éÂ§ßÂ§öÊï∞ÁöÑ @command{awk} ÂÆûÁé∞Êù•ËØ¥ÔºåËøôÊòØ‰∏çÂèØÁßªÊ§çÁöÑ„ÄÇ

@cindex dark corner, strings, storing
Â§ßÂ§öÊï∞ÁöÑÂÖ∂‰ªñ @command{awk} ÂÆûÁé∞@footnote{Ëá≥Â∞ëÊàë‰ª¨ÊâÄÁü•ÈÅìÁöÑÈÇ£‰∫õ„ÄÇ}ÂÜÖÈÉ®Â∞ÜÂ≠ó‰∏≤Â≠òÊàê C È£éÊ†ºÁöÑÂ≠ó‰∏≤„ÄÇ
ËÄå C È£éÊ†ºÁöÑÂ≠ó‰∏≤‰ΩøÁî® @sc{nul} ÂÅö‰∏∫Â≠ó‰∏≤ÁöÑÁªìÊùüÁ¨¶ÔºåÊïàÊûúÂ∞±ÊòØ @samp{RS = "\0"} ‰∏é @samp{RS = ""} ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ
@value{DARKCORNER}

Êñ∞ËøëÁöÑ @command{mawk} ÁöÑÁâàÊú¨‰πüÂèØ‰ª•‰ΩøÁî® @sc{nul} Â≠óÁ¨¶‰Ωú‰∏∫ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶„ÄÇ
‰ΩÜÊòØÔºåËøôÊòØ‰∏™ÁâπÊÆäÊÉÖÂÜµÔºö@command{mawk} ‰∏çÂÖÅËÆ∏Âú®Â≠ó‰∏≤‰∏≠ÂµåÂÖ• @sc{nul} Â≠óÁ¨¶„ÄÇÔºàËøôÂèØËÉΩÂú® @command{mawk} ÁöÑÂêéÁª≠ÁâàÊú¨‰∏≠‰ºöÊîπÂèò„ÄÇÔºâ

@cindex records, treating files as
@cindex treating files, as single records
ÈÄöËøá @ref{Readfile Function}ÔºåÊù•Êü•Áúã‰∏Ä‰∫õÊúâË∂£ÁöÑÊñπÊ≥ïÊù•ËØªÂèñÊï¥‰∏™Êñá‰ª∂„ÄÇ
Â¶ÇÊûú‰Ω†‰ΩøÁî® @command{gawk}ÔºåÊü•Áúã @ref{Extension Sample Readfile}ÔºåÊù•ÈÄâÊã©ÂÖ∂‰ªñÁöÑÈÄâÈ°π„ÄÇ
@end sidebar

@node Fields
@section Ê£ÄÊü•Âüü

@cindex examining fields
@cindex fields
@cindex accessing fields
@cindex fields, examining
@cindex POSIX @command{awk}, field separators and
@cindex field separators, POSIX and
@cindex separators, field, POSIX and
ÂΩì @command{awk} ËØªÂèñËæìÂÖ•ËÆ∞ÂΩïÊó∂ÔºåËÆ∞ÂΩïÊòØËá™Âä®Âú∞Ë¢´ @command{awk} Â∑•ÂÖ∑ÂàÜÊûêÊàñËÄÖÂàÜÈöîÊàêÁß∞‰∏∫@dfn{Âüü}ÁöÑÂùó„ÄÇ
ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂüüÊòØÈÄöËøá@dfn{Á©∫ÁôΩ}ËøõË°åÂàÜÈöîÁöÑÔºåÂÉè‰∏ÄË°å‰∏≠ÁöÑÂçïËØç‰∏ÄÊ†∑„ÄÇ
@command{awk} ‰∏≠ÁöÑÁ©∫ÁôΩÁ¨¶Ë°®Á§∫‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á©∫Ê†º„ÄÅTABsÔºåÊàñËÄÖÊç¢Ë°åÁ¨¶ÊâÄÁªÑÊàêÁöÑ‰∏≤Ôºõ
@footnote{Âú® POSIX awkÔºåÊç¢Ë°åÁ¨¶‰∏çË¢´ËÆ§‰∏∫ÊòØÁî®Êù•ËøõË°åÂüüÂàÜÈöîÁöÑÁ©∫ÁôΩÁ¨¶„ÄÇ}
ÔºàÂÖ∂‰ªñÁöÑÂ≠óÁ¨¶Â¶ÇÂõûÊ°£Á¨¶ÔºåÂûÇÁõ¥Ë∑≥Ê†ºÁ≠âÔºâË¢´ÂÖ∂‰ªñËØ≠Ë®ÄËÆ§‰∏∫ÊòØÁ©∫ÁôΩÁ¨¶ÁöÑËøô‰∫õÁ¨¶Âè∑ÈÉΩ@emph{‰∏ç}Ë¢´ @command{awk} ËØÜÂà´‰∏∫Á©∫ÁôΩÁ¨¶„ÄÇ

ÂüüÁöÑÁî®Â§ÑÊòØ‰∏∫‰∫ÜËÆ©‰Ω†ÂèØ‰ª•ÂæàÊñπ‰æøÂú∞ÊåáÂÆöËøô‰∫õËÆ∞ÂΩïÁöÑÂùó„ÄÇ‰Ω†‰∏çÂøÖ‰∏ÄÂÆöË¶Å‰ΩøÁî®‰ªñ‰ª¨Ôºå‰Ω†ÂèØ‰ª•Êìç‰ΩúÊï¥‰∏™ËÆ∞ÂΩïÔºå
‰ΩÜÊòØÂüüÂèØ‰ª•‰ΩøÂæó @command{awk} Á®ãÂ∫èÂèòÂæóÈùûÂ∏∏Âº∫Â§ß„ÄÇ

@cindex field operator @code{$}
@cindex @code{$} (dollar sign), @code{$} field operator
@cindex dollar sign (@code{$}), @code{$} field operator
@cindex field operators@comma{} dollar sign as
‰Ω†‰ΩøÁî®ÁæéÂÖÉÁ¨¶Âè∑Ôºà@samp{$}ÔºâÊù•ÊåáÂÆö @command{awk} Á®ãÂ∫è‰∏≠ÁöÑÂüüÔºåÁ¨¶Âè∑ÂêéÈù¢Ë∑üÁöÑÊòØÂüüÁöÑÁºñÂè∑„ÄÇ
Âõ†Ê≠§Ôºå@code{$1} Ë°®Á§∫ÊòØÁ¨¨‰∏Ä‰∏™ÂüüÔºå@code{$2} ÊòØÁ¨¨‰∫å‰∏™Á≠âÁ≠â„ÄÇ
Ôºà‰∏çÂÉè Unix Shell ‰∏≠ÔºåÂüüÁöÑÁºñÂè∑Âè™Ë¢´ÈôêÂà∂Áî®Âçï‰∏™Êï∞Â≠óÔºå‰æãÂ¶ÇÔºå@code{$127} ÊòØËÆ∞ÂΩï‰∏≠ÁöÑÁ¨¨ 127 ‰∏™Âüü„ÄÇÔºâÂÅáËÆæ‰∏ãÈù¢ÁöÑË°åÊòØËæìÂÖ•Ë°åÔºö

@example
This seems like a pretty nice example.
@end example

@noindent
ËøôÈáåÁ¨¨‰∏Ä‰∏™ÂüüÔºåÊàñËÄÖ @code{$1} ÊòØ @samp{This}ÔºåÁ¨¨‰∫å‰∏™ÂüüÔºåÊàñËÄÖËØ¥ @code{$2} ÊòØ @samp{seems} Á≠âÁ≠â„ÄÇ
Ê≥®ÊÑèÊúÄÂêé‰∏Ä‰∏™ÂüüÔºåÂç≥ @code{$7} ÊòØ @samp{example.} „ÄÇ
Âõ†‰∏∫Âú® @samp{e} ‰∏é @samp{.} ‰πãÈó¥Ê≤°ÊúâÁ©∫Ê†ºÔºåÂõ†Ê≠§ÁÇπÂè∑Ë¢´ËÆ§‰∏∫ÊòØÁ¨¨‰∏É‰∏™ÂüüÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

@cindex @code{NF} variable
@cindex fields, number of
@code{NF} ÊòØÈ¢ÑÂÆö‰πâÂèòÈáèÔºåÁî®Êù•ËÆ∞ÂΩïÂΩìÂâçËÆ∞ÂΩïÁöÑÂüüÊï∞Èáè„ÄÇ@command{awk} Âú®ÊØèÊ¨°ËØªÂèñËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºå‰ºöËá™Âä®Êõ¥Êñ∞ @code{NF} ÁöÑÂÄº„ÄÇ
Êó†ËÆ∫ËÆ∞ÂΩï‰∏≠ÊúâÂ§öÂ∞ë‰∏™ÂüüÔºåÂÖ∂ÊúÄÂêé‰∏Ä‰∏™ÂüüÈÉΩÂèØ‰ª•Áî® @code{$NF} Êù•Ë°®Á§∫„ÄÇÂõ†Ê≠§Âú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå@code{$NF} ‰∏é @code{$7} Áõ∏ÂêåÔºåÂç≥ @samp{example.} „ÄÇ
Â¶ÇÊûú‰Ω†ÊåáÂÆöÂüüË∂ÖËøá‰∫ÜÊúÄÂêé‰∏Ä‰∏™ÂüüÔºàÂ¶Ç‰∏äÈù¢ÁöÑÂè™Êúâ 7 ‰∏™ÂüüÁöÑ‰æãÂ≠ê‰∏≠ÊåáÂÆö @code{$8}ÔºâÔºå
‰Ω†‰ºöÂæóÂà∞‰∏Ä‰∏™Á©∫‰∏≤ÔºàÂ¶ÇÊûúÁî®‰ΩúÊï∞ÂÄºÊìç‰Ωú‰∏≠ÔºåÂàô‰Ω†‰ºöÂæóÂà∞ 0„ÄÇÔºâ

@code{$0} ÁúãËµ∑Êù•ÂÉèÁî®Êù•Ë°®Á§∫Á¨¨ 0 ‰∏™ÂüüÔºå‰ΩÜËøôÊòØ‰∏™ÁâπÂà´ÊÉÖÂÜµÔºåÂÆÉ‰ª£Ë°®ÁöÑÊòØÊï¥‰∏™ËæìÂÖ•ËÆ∞ÂΩï„ÄÇ
ÂΩì‰Ω†‰∏ç‰ΩøÁî®Âçï‰∏™ÁöÑÂüüÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÂèòÈáè„ÄÇËøôÈáåÊúâÊõ¥Â§öÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{awk '$1 ~ /li/ @{ print $0 @}' mail-list}
@print{} Amelia       555-5553     amelia.zodiacusque@@gmail.com    F
@print{} Julie        555-6699     julie.perscrutabor@@skeeve.com   F
@end example

@noindent
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰ºöÊâìÂç∞Êñá‰ª∂ @file{mail-list} ‰∏≠ÁöÑÊØè‰∏ÄÊù°ËÆ∞ÂΩïÔºåÂÖ∂Á¨¨ 1 ‰∏™Âüü‰∏≠ÂåÖÂê´ @samp{li} Â≠ó‰∏≤„ÄÇ

‰Ωú‰∏∫ÊØîËæÉÔºå‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰ºöÂú®@emph{Êï¥‰∏™ËÆ∞ÂΩï}‰∏≠Êü•Êâæ @samp{li} Â≠ó‰∏≤ÔºåÁÑ∂ÂêéÊâìÂç∞ÂåπÈÖçÁöÑËÆ∞ÂΩï‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™‰∏éÊúÄÂêé‰∏Ä‰∏™ÂüüÔºö

@example
$ @kbd{awk '/li/ @{ print $1, $NF @}' mail-list}
@print{} Amelia F
@print{} Broderick R
@print{} Julie F
@print{} Samuel A
@end example

@node Nonconstant Fields
@section ÈùûÂ∏∏Êï∞ÂüüÁºñÂè∑
@cindex fields, numbers
@cindex field numbers

ÂüüÁºñÂè∑‰∏ç‰∏ÄÂÆöË¶ÅÊòØ‰∏Ä‰∏™Â∏∏Êï∞„ÄÇ@command{awk} Á®ãÂ∫è‰∏≠ÁöÑ‰ªªÊÑèË°®ËææÂºèÈÉΩÂèØ‰ª•Áî®Âú® @samp{$} ÁöÑÂêéÈù¢Êù•ÊåáÂÆö‰∏Ä‰∏™Âüü„ÄÇË°®ËææÂºèÁöÑÂÄºÊåáÂÆö‰∫Ü‰∏Ä‰∏™ÂüüÁºñÂè∑„ÄÇÂ¶ÇÊûúÊûúÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™Êï∞ÂÄºÔºåÂàôÂ∞Ü‰ºöË¢´ËΩ¨Êç¢Êàê‰∏Ä‰∏™Êï∞ÂÄº„ÄÇÁúã‰∏ãÈù¢‰æãÂ≠êÔºö

@example
awk '@{ print $NR @}'
@end example

@noindent
ÂõûÂøÜ‰∏Ä‰∏ãÔºå@code{NR} ÊòØÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÊâÄËØªÂèñÁöÑËÆ∞ÂΩïÊï∞Ôºö
ÂΩìËØªÂèñÁ¨¨‰∏Ä‰∏™ËÆ∞ÂΩïÊó∂ @code{NR} ‰∏∫ 1ÔºåÂΩìËØªÂèñÁ¨¨‰∫å‰∏™ËÆ∞ÂΩïÊó∂ @code{NR} ‰∏∫ 2ÔºåÁ≠âÁ≠â„ÄÇ
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰ºöÊâìÂç∞Á¨¨‰∏Ä‰∏™ËÆ∞ÂΩïÁöÑÁ¨¨‰∏Ä‰∏™ÂüüÔºåÁ¨¨‰∫å‰∏™ËÆ∞ÂΩïÁöÑÁ¨¨‰∫å‰∏™ÂüüÁ≠âÁ≠â„ÄÇÂØπ‰∫é 20 ‰∏™ËÆ∞ÂΩïÔºåÁ¨¨ 20 ‰∏™ÂüüÁöÑÂÄº‰ºöË¢´ÊâìÂç∞Ôºõ
ÊúÄÂèØËÉΩÁöÑÊÉÖÂÜµÊòØÔºåËÆ∞ÂΩïÂ∞ë‰∫é 20 ‰∏™ÂüüÔºåÂõ†Ê≠§Ëøô‰ºöÊâìÂç∞‰∏Ä‰∏™Á©∫Ë°å„ÄÇËøôÈáåÊúâÂè¶Â§ñ‰∏Ä‰∏™‰æãÂ≠êÔºåÊù•Áî®Âè¶‰∏Ä‰∏™Ë°®ËææÂºèÊù•ËÆ°ÁÆóÂüüÂüüÁºñÂè∑Ôºö

@example
awk '@{ print $(2*2) @}' mail-list
@end example

@command{awk} ‰ºöÂØπ @samp{(2*2)} Ë°®ËææÂºèËøõË°åÊ±ÇÂÄºÔºåÂπ∂Áî®ÂÖ∂ÂÄº‰Ωú‰∏∫ÂüüÁöÑÁºñÂè∑ÔºåÂπ∂ÊâìÂç∞ËØ•Âüü„ÄÇ
@samp{*} ‰ª£Ë°®‰πòÊ≥ïÊìç‰ΩúÔºå‰ºöÂú® @samp{$} ‰πãÂâçÂÆåÊàêÔºõÂΩìÂú®ÂüüÁºñÂè∑Ë°®ËææÂºè‰∏≠Êúâ‰∫åÂÖÉÊìç‰ΩúÁ¨¶
@footnote{@dfn{‰∫åÂÖÉÊìç‰ΩúÁ¨¶}ÔºåÂ¶ÇÊûú @samp{*} Áî®‰∫é‰πòÊ≥ïÔºå‰ºö‰ΩøÁî®‰∏§‰∏™Êìç‰ΩúÊï∞„ÄÇ‰πãÊâÄ‰ª•Ë¶ÅÂÅöËøôÊ†∑ÁöÑÂå∫ÂàÜÔºå
ÊòØÂõ†‰∏∫ @command{awk} ‰πüÊúâ‰∏ÄÂÖÉÊìç‰ΩúÁ¨¶ÔºàÂè™Êúâ‰∏Ä‰∏™Êìç‰ΩúÊï∞Ôºâ‰ª•Âèä‰∏âÂÖÉÊìç‰ΩúÁ¨¶Ôºà‰∏â‰∏™Êìç‰ΩúÊï∞Ôºâ„ÄÇ}
Â≠òÂú®Êó∂ÔºåËøôÈÉΩÊòØÂøÖË¶ÅÁöÑ„ÄÇËøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÊâìÂç∞ @file{mail-list} Êñá‰ª∂‰∏≠ÊØè‰∏ÄË°å‰∏≠ÂÖ≥Á≥ªÁöÑÁ±ªÂûãÔºàÁ¨¨ 4 ‰∏™ÂüüÔºâ„ÄÇ
ÔºàÊâÄÊúâÁöÑ @command{awk} Êìç‰ΩúÁ¨¶ÈÉΩÊåâÁÖß‰ºòÂÖàÁ∫ßÈôçÂ∫èÂàóÂá∫Âú® @ref{Precedence}„ÄÇÔºâ

Â¶ÇÊûúÂüüÁºñÂè∑ÊúÄÁªàËÆ°ÁÆó‰∏∫ 0Ôºå‰Ω†Â∞±‰ºöÂæóÂà∞Êï¥‰∏™ËÆ∞ÂΩï„ÄÇÂõ†Ê≠§Ôºå@samp{$(2-2)} ‰∏é @code{$0} ÁöÑÂÄºÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ
Ë¥üÁöÑÂüüÁºñÂè∑ÊòØÊó†ÊïàÁöÑÔºõËøô‰πàÂÅö‰∏ÄËà¨‰ºöÂØºËá¥Á®ãÂ∫èÁöÑÁªìÊùü„ÄÇÔºàPOSIX Ê†áÂáÜÊ≤°ÊúâÂÆö‰πâÂú®‰ΩøÁî®Ë¥üÁöÑÂüüÁºñÂè∑ÊòØ‰ºö‰∫ßÁîü‰ªÄ‰πàÊÉÖÂÜµ„ÄÇ
@command{gawk} ‰ºöÊ≥®ÊÑèÂà∞ËøôÊ†∑ÁöÑ‰ΩøÁî®ÊñπÂºèÔºåÂπ∂ÁªìÊùüÊï¥‰∏™Á®ãÂ∫è„ÄÇÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞Â§ÑÁêÜÊñπÂºèÂèØËÉΩ‰∏çÂêå„ÄÇÔºâ

Â¶ÇÂú® @ref{Fields} ‰∏≠ÊâÄÊèêÂà∞ÁöÑÔºå@command{awk} Â∞ÜÂΩìÂâçËÆ∞ÂΩïÁöÑÂüüÊï∞ÁõÆÂ≠òÂÇ®Âú®ÂÜÖÂª∫ÁöÑÂèòÈáè @code{NF} ‰∏≠ÔºàÊü•Áúã @ref{Built-in Variables}Ôºâ„ÄÇ
Âõ†Ê≠§Ôºå@code{$NF} Ë°®ËææÂºèÂÖ∑Êúâ‰∏Ä‰∏™ÁâπÂà´ÁöÑÁâπÊÄß‚Äî‚ÄîÂ∞±ÊòØ‰ºöÁõ¥Êé•ÂØπ @code{NF} Ê±ÇÂÄºÔºåÂπ∂Â∞ÜËøô‰∏™ÂÄº‰Ωú‰∏∫ÂüüÁºñÂè∑„ÄÇ

@node Changing Fields
@section Êõ¥ÊîπÂüüÂÜÖÂÆπ

@cindex fields, changing contents of
@command{awk} ÊâÄÁúãÂà∞ÁöÑÂüüÂÜÖÂÆπÔºåÊòØÂèØ‰ª•Âú® @command{awk} Á®ãÂ∫è‰∏≠Êõ¥ÊîπÁöÑÔºåËøô‰ºöÊõ¥Êîπ @command{awk} ËÉΩÁúãÂà∞ÂΩìÂâçËæìÂÖ•ËÆ∞ÂΩïÁöÑÁªìÊûú„ÄÇÔºàËøô‰∏™ËæìÂÖ•ÂÆûÈôÖ‰∏äËøòÊ≤°ÊúâË¢´Â§ÑÁêÜÔºõ@command{awk} ‰∏ç‰ºö‰øÆÊîπËæìÂÖ•Êñá‰ª∂„ÄÇÔºâËÄÉËôë‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ª•ÂèäÂÆÉÁöÑËæìÂá∫Ôºö

@example
$ @kbd{awk '@{ nboxes = $3 ; $3 = $3 - 10}
>        @kbd{print nboxes, $3 @}' inventory-shipped}
@print{} 25 15
@print{} 32 22
@print{} 24 14
@dots{}
@end example

@noindent
‰∏äÈù¢ÁöÑÁ®ãÂ∫èÔºåÈ¶ñÂÖà‰øùÂ≠òÁ¨¨‰∏â‰∏™ÂüüÁöÑÂéüÂßãÁöÑÂÄºÂà∞ÂèòÈáè @code{nboxes} ‰∏≠„ÄÇ
@samp{-} Âè∑Ë°®Á§∫Áõ∏ÂáèÔºåÂõ†Ê≠§Á®ãÂ∫èÈáçÊñ∞ÂØπÁ¨¨‰∏â‰∏™ÂüüÔºåÂç≥ @code{$3} ËøõË°åËµãÂÄº‰∏∫Á¨¨‰∏â‰∏™ÂüüÁöÑÂéüÂßãÂÄºÂáè 10Ôºö
@samp{$3 - 10} „ÄÇÔºàÊü•Áúã @ref{Arithmetic Ops}.Ôºâ
ÁÑ∂ÂêéÊâìÂç∞Á¨¨‰∏â‰∏™ÂüüÁöÑÊóßÂÄº‰∏éÊñ∞ÂÄºÔºàÂ∫ìÊàø‰∏≠Êúâ‰∫∫Âá∫Èîô‰∫ÜÔºåÂØºËá¥Âú®ÁõòÁÇπÁ∫¢ÁõíÂ≠êÊó∂ÂØºËá¥‰∫Ü‰∏ç‰∏ÄËá¥„ÄÇÔºâ

Ë¶Å‰ΩøËøô‰∏™ËÉΩÂ§üÂ∑•‰ΩúÔºåÂàô @code{$3} ÁöÑÊñá‰ª∂ÂøÖÈ°ªÊòØ‰∏Ä‰∏™Êï∞ÂÄºÔºõËÄåÂ≠óÁ¨¶‰∏≤‰πüÂøÖÈ°ªËΩ¨Êç¢ÊàêÊï∞ÂÄº‰ª•ËøõË°åÁÆóÊ≥ïËÆ°ÁÆó„ÄÇËÄåÂáèÊ≥ïÊâÄÂæóÁöÑÁªìÊûú‰πü‰ºöËΩ¨ÂåñÊàêÂ≠ó‰∏≤ÔºåÂπ∂Êàê‰∏∫Á¨¨‰∏â‰∏™ÂüüÁöÑÂÄº„ÄÇ
Êü•Áúã @ref{Conversion}„ÄÇ

ÂΩìÊüê‰∏™ÂüüÁöÑÂÄºË¢´Êõ¥Êîπ‰∫ÜÂêéÔºàÂ¶Ç @command{awk} ÊâÄËßÅÁöÑÔºâÔºåËæìÂÖ•ËÆ∞ÂΩïÁöÑÊñáÊú¨Â∞±‰ºöË¢´ÈáçÊñ∞ËÆ°ÁÆóÔºå‰ª•Â∞ÜÊñ∞ÁöÑÂüüÂåÖÂê´Âú®ÊóßÁöÑÂüüÊâÄÂú®ÁöÑ‰ΩçÁΩÆ„ÄÇ
Êç¢Âè•ËØùËØ¥Ôºå@code{$0} ‰ºöÂèòÊõ¥‰ª•ÂèçÊò†ÂèòÂåñÁöÑÂüü„ÄÇÂõ†Ê≠§ÔºåËøô‰∏™Á®ãÂ∫è‰ºöÊâìÂç∞ËæìÂÖ•Êñá‰ª∂ÁöÑÂ§çÊú¨ÔºåÂêåÊó∂ÔºåÊØèË°å‰∏≠ÁöÑÁ¨¨‰∫å‰∏™Âüü‰ºöÂáèÂéª 10Ôºö

@example
$ @kbd{awk '@{ $2 = $2 - 10; print $0 @}' inventory-shipped}
@print{} Jan 3 25 15 115
@print{} Feb 5 32 24 226
@print{} Mar 5 24 34 228
@dots{}
@end example

ÁªôÂüüËåÉÂõ¥‰πãÂ§ñÁöÑÂüüËµãÂÄº‰πüÊòØÂèØ‰ª•ÁöÑÔºåÂ¶ÇÔºö

@example
$ @kbd{awk '@{ $6 = ($5 + $4 + $3 + $2)}
> @kbd{       print $6 @}' inventory-shipped}
@print{} 168
@print{} 297
@print{} 301
@dots{}
@end example

@cindex adding, fields
@cindex fields, adding
@noindent
Êàë‰ª¨Âú®‰∏äÈù¢ÂàõÂª∫‰∫Ü @code{$6}ÔºåÂÆÉÁöÑÂÄºÂèçÊò†‰∫ÜÂüü @code{$2}Ôºå@code{$3}Ôºå@code{$4} ‰∏é @code{$5} ÁöÑÂíå„ÄÇ
@samp{+} ‰ª£Ë°®Âä†Êìç‰Ωú„ÄÇÂØπ‰∫éÊñá‰ª∂ @file{inventory-shipped} Êù•ËØ¥Ôºå@code{$6} Ë°®Á§∫‰∫ÜÁâπÂÆöÊúà‰ªΩ‰∏≠ÔºåÂ∑≤ÁªèÂèëÈÄÅÁöÑÂåÖË£πÁöÑÊÄªÊï∞„ÄÇ

ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂüüÔºå‰ºöÊîπÂèò @command{awk} ÁöÑÈíàÂØπÂΩìÂâçÁöÑËæìÂÖ•ËÆ∞ÂΩïÂÜÖÈÉ®Â§çÊú¨Ôºå‰πüÂ∞±ÊòØ @code{$0} ÁöÑÂÄº„ÄÇ
Âõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†Âú®Ê∑ªÂä†‰∫Ü‰∏Ä‰∏™ÂüüÂêéÊâßË°å @samp{print $0}ÔºåÂØºËá¥ËæìÂá∫ÁªìÊûú‰πü‰ºöÂåÖÊã¨Êñ∞ÁöÑÂüüÔºåÂêåÊó∂Áõ∏Â∫îÊï∞ÈáèÁöÑÂüüÂàÜÈöîÁ¨¶‰ºöÊèíÂÖ•Âà∞ÂÖ∂Êú¨Ë∫´‰∏éÂâç‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÂüü‰πãÈó¥„ÄÇ

@cindex @code{OFS} variable
@cindex output field separator, See @code{OFS} variable
@cindex field separators, See Also @code{OFS}
ËøôÊ†∑ÁöÑÈáçÊñ∞ËÆ°ÁÆóÊó¢Âèó @code{NF} ÁöÑÂΩ±ÂìçÔºå‰πü‰ºöÂΩ±Âìç @code{NF}ÔºàÂüüÊï∞ÈáèÔºõÊü•Áúã @ref{Fields}Ôºâ„ÄÇ
Â¶ÇÊûúÔºå@code{NF} ÁöÑÂÄºË¢´ËÆæÁΩÆÊàê‰Ω†ÂàõÂª∫ÁöÑÂüüÁöÑÊúÄÂ§ßÂÄº„ÄÇ
@code{$0} ÁöÑÁ°ÆÂàáÊ†ºÂºè‰πüÂêåÊ†∑Âèó‰∏Ä‰∏™Êú™ËÆ®ËÆ∫ÁöÑÁâπÊÄßÁöÑÂΩ±ÂìçÔºö
@dfn{ËæìÂá∫ÂüüÂàÜÈöîÁ¨¶}Ôºå@code{OFS}ÔºåËØ•ÂàÜÈöîÁ¨¶Áî®Êù•ÂàÜÈöîÂüüÔºàÊü•Áúã @ref{Output Separators}Ôºâ„ÄÇ

‰ΩÜÊòØÔºå‰ªÖ‰ªÖ@emph{ÂèÇËÄÉ}‰∏Ä‰∏™ÂüüËåÉÂõ¥Â§ñÁöÑÂüüÔºåÂπ∂@emph{‰∏ç‰ºö}ÊîπÂèò @code{$0} ÁöÑÂÄºÔºå‰πü@emph{‰∏ç‰ºö}ÊîπÂèò @code{NF} ÁöÑÂÄº„ÄÇÂèÇËÄÉËåÉÂõ¥‰πãÂ§ñÁöÑÂüü‰ªÖ‰ºö‰∫ßÁîü‰∏™Á©∫‰∏≤ÔºåÂ¶ÇÔºö

@example
if ($(NF+1) != "")
    print "can't happen"
else
    print "everything is normal"
@end example

@noindent
‰∏äÈù¢ÁöÑ‰æãÂ≠êÂ∫îÂΩìÊâìÂç∞ @samp{everything is normal}ÔºåÂõ†‰∏∫ @code{NF+1} ‰∏ÄÂÆö‰ºöË∂ÖËøáÂüüËåÉÂõ¥„ÄÇ
ÔºàÊü•Áúã @ref{If Statement}ÔºåÊù•Ëé∑ÂèñÂÖ≥‰∫é @command{awk} ÁöÑ @code{if-else} ËØ≠Âè•ÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ
Êü•Áúã @ref{Typing and Comparison}ÔºåÊù•Ëé∑Âèñ @samp{!=} Êìç‰ΩúÁ¨¶ÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇÔºâ

Áü•ÈÅìËøôÊ†∑ÁöÑ‰∫ãÂÆû‰πüÈùûÂ∏∏ÈáçË¶ÅÔºöÂØπ‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÂüüËµãÂÄº‰ºöÊîπÂèò @code{$0} ÁöÑÂÄºÔºå‰ΩÜÊòØ‰∏ç‰ºöÊîπÂèò @code{NF} ÁöÑÂÄºÔºåÂ∞±ÁÆó‰Ω†ÁªôËøô‰∏™ÂüüËµãÁªô‰∏Ä‰∏™Á©∫‰∏≤„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{echo a b c d | awk '@{ OFS = ":"; $2 = ""}
>                       @kbd{print $0; print NF @}'}
@print{} a::c:d
@print{} 4
@end example

@noindent
Áõ∏Â∫îÁöÑÂüüËøòÊòØÂ≠òÂú®ÁöÑÔºåÂè™ÊòØÂÖ∑Êúâ‰∏Ä‰∏™Á©∫ÂÄºÔºåÂú® @samp{a} ‰∏é @samp{c} ‰πãÈó¥Áî®ÂÜíÂè∑ËøõË°å‰∫ÜÂàÜÈöî„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòæÁ§∫ÔºåÂ¶ÇÊûú‰Ω†ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂüüÔºå‰ºöÂèëÁîü‰ªÄ‰πàÊ†∑ÁöÑÊÉÖÂÜµÔºö

@example
$ @kbd{echo a b c d | awk '@{ OFS = ":"; $2 = ""; $6 = "new"}
>                       @kbd{print $0; print NF @}'}
@print{} a::c:d::new
@print{} 6
@end example

@noindent
‰∏≠Èó¥ÁöÑÂüüÔºå@code{$5} ‰ºö‰ª•Á©∫ÂÄºÂàõÂª∫ÔºàÁî±Á¨¨‰∫åÂØπÁ¥ßÈÇªÁöÑÂÜíÂè∑ÊåáÁ§∫ÔºâÔºå@code{NF} ÁöÑÂÄºÂàôÊõ¥Êñ∞‰∏∫ 6„ÄÇ

@cindex dark corner, @code{NF} variable, decrementing
@cindex @code{NF} variable, decrementing
ÂáèÂ∞ë @code{NF} ÁöÑÂÄºÔºåÂ∞Ü‰ºöÂ∞ÜÊñ∞ÂÄºÂêéÈù¢ÁöÑÂüüÂÖ®ÈÉ®‰∏¢ÂºÉÔºåÂπ∂ÈáçÊñ∞ËÆ°ÁÆó @code{$0} ÁöÑÂÄº„ÄÇ
@value{DARKCORNER}
‰∏ãÈù¢ÊòØËøôÊ†∑ÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{echo a b c d e f | awk '@{ print "NF =", NF;}
> @kbd{                          NF = 3; print $0 @}'}
@print{} NF = 6
@print{} a b c
@end example

@cindex portability, @code{NF} variable@comma{} decrementing
@quotation Ê≥®ÊÑè
‰∏Ä‰∫õÁâàÊú¨ÁöÑ @command{awk} ÂΩì @code{NF} ÈÄíÂáèÊó∂‰∏ç‰ºöÈáçÂª∫ @code{$0}„ÄÇ
@end quotation

ÊúÄÁªàÔºåÊúâÊú∫‰ºöÂú®ÂêàÈÄÇÁöÑÊó∂Êú∫Âº∫Âà∂ @command{awk} Âà©Áî®ÂΩìÂâçÁöÑÂüü‰∏é @code{OFS} ÂÄºÈáçÊñ∞Êï¥‰∏™ËÆ∞ÂΩï„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÁõÆÁöÑÔºå‰ΩøÁî®‰∏ãÈù¢ÁúãËµ∑Êù•Ê≤°Áî®ÁöÑËµãÂÄºËØ≠Âè•Ôºö

@example
$1 = $1   # force record to be reconstituted
print $0  # or whatever else with $0
@end example

@noindent
ËøôÂº∫Âà∂ @command{awk} ÈáçÂª∫ËÆ∞ÂΩï„ÄÇÂ¶ÇËøôÈáåÊâÄÁ§∫ÔºåÊ∑ªÂä†Áõ∏Â∫îÁöÑÊ≥®ÈáäÊòØÊúâÂ∏ÆÂä©ÁöÑ„ÄÇ

ËøôÊòØ @code{$0} ‰∏éËÆ∞ÂΩï‰πãÈó¥ÂÖ≥Á≥ªÁöÑÁîüÂä®‰ΩìÁé∞„ÄÇ
‰ªª‰ΩïÂØπ @code{$0} ÁöÑËµãÂÄºÈÉΩ‰ºöÂØºËá¥ @command{awk} Âà©Áî®@emph{ÂΩìÂâç}ÁöÑ @code{FS} ÂÄºÂØπËÆ∞ÂΩïËøõË°åÈáçÊñ∞ÂàÜÊûê„ÄÇ
Ëøô‰πüÂêåÊ†∑‰ΩøÁî®‰∫éÂÜÖÂª∫ÁöÑÂáΩÊï∞ÂØπ‰∫é @code{$0} ÁöÑÊõ¥ÊîπÔºå‰æãÂ¶Ç @code{sub()} ‰ª•Âèä @code{gsub()}ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ

@sidebar ÁêÜËß£ @code{$0}

ËÆ∞‰Ωè @code{$0} ÊòØ@emph{Êï¥‰∏™}ËÆ∞ÂΩïËøô‰∏ÄÁÇπÈùûÂ∏∏ÈáçË¶ÅÔºåÁü•ÈÅì‰ªñÊòØÈÄöËøáËæìÂÖ•Ëé∑ÂèñÁöÑÔºåËøô‰∏ÄÁÇπ‰πüÂêåÊ†∑ÈáçË¶Å„ÄÇ
ÂÆÉÂåÖÂê´‰ªª‰ΩïÁöÑÂâçÂØº‰∏éÂêéÁºÄÁöÑÁ©∫ÁôΩÁ¨¶Ôºå‰πüÂ∞±ÊòØÂàÜÈöîÂüüÁöÑÁ©∫ÁôΩÁ¨¶ÔºàÊàñËÄÖÂÖ∂‰ªñÁöÑÂàÜÈöîÂ≠óÁ¨¶Ôºâ„ÄÇ

ÈÄöËøáÁÆÄÂçïÂú∞ËÆæÁΩÆ @code{FS} ÊàñËÄÖ @code{OFS} ÁöÑÂÄºÊù•ÊîπÂèòÂüüÂàÜÈöîÁ¨¶ÔºåÂπ∂ÊúüÊúõÁÆÄÂçïÁöÑ @samp{print} ÊàñËÄÖ @samp{print $0} ÊâìÂç∞ÁöÑÊó∂Êñ∞ËÆ∞ÂΩïÁöÑÂÄºÔºå
ÊòØ‰∏™Â∏∏ËßÅÁöÑÈîôËØØ„ÄÇ

‰ΩÜÊòØËøô‰∏ç‰ºöÊúâ‰ΩúÁî®ÔºåÂõ†‰∏∫ÂØπ‰∫éÊõ¥ÊîπËÆ∞ÂΩïÊú¨Ë∫´‰ªÄ‰πà‰πüÊ≤°ÊúâÂÅö„ÄÇÁõ∏ÂèçÁöÑÔºå‰Ω†ÂøÖÈ°ªÂº∫Âà∂ËÆ∞ÂΩïË¶ÅËøõË°åÈáçÂª∫ÔºåÂÖ∏ÂûãÁöÑÊÉÖÂÜµÂ∞±ÊòØÂà©Áî®Â¶Ç @samp{$1 = $1} ËøôÊ†∑ÁöÑËØ≠Âè•Êù•Ëß¶Âèë„ÄÇ
@end sidebar


@node Field Separators
@section ÊåáÂÆöËÆ∞ÂΩïÂ¶Ç‰ΩïËøõË°åÂàÜÈöî

@menu
* Default Field Splitting::      How fields are normally separated.
* Regexp Field Splitting::       Using regexps as the field separator.
* Single Character Fields::      Making each character a separate field.
* Command Line Field Separator:: Setting @code{FS} from the command line.
* Full Line Fields::             Making the full line be a single field.
* Field Splitting Summary::      Some final points and a summary table.
@end menu

@cindex @code{FS} variable
@cindex fields, separating
@cindex field separators
@cindex fields, separating
@dfn{ÂüüÂàÜÈöîÁ¨¶}Ë¶Å‰πàÊòØ‰∏Ä‰∏™Âçï‰∏™Â≠óÁ¨¶ÔºåÊàñËÄÖÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºå
‰ª•ÊéßÂà∂ @command{awk} Â∞ÜËæìÂÖ•ËÆ∞ÂΩïÂàÜÈöîÊàêÂüü„ÄÇ@command{awk} Êâ´ÊèèËæìÂÖ•ËÆ∞ÂΩïÁöÑÂ≠óÁ¨¶Â∫èÂàó‰ª•ÂåπÈÖçÂàÜÈöîÁ¨¶ÔºõÂüüÂàôÊòØÂåπÈÖç‰πãÈó¥ÁöÑÊñáÊú¨„ÄÇ

Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ΩøÁî®Â≠êÂºπÁ¨¶Ôºà@bullet{}Ôºâ‰∏™Ë°®Á§∫ËæìÂá∫‰πãÈó¥ÁöÑÁ©∫Èó¥„ÄÇÂ¶ÇÊûúÂüüÂàÜÈöîÁ¨¶ÊòØ @samp{oo} ÁÑ∂Âêé‰∏ãÈù¢ÁöÑË°åÔºö

@example
moo goo gai pan
@end example

@noindent
Â∞ÜË¢´ÂàÜÊàê‰∏â‰∏™ÂüüÔºö@samp{m}Ôºå@samp{@bullet{}g}Ôºå and @samp{@bullet{}gai@bullet{}pan} „ÄÇ
Ê≥®ÊÑèÁ¨¨‰∫å‰∏™‰∏éÁ¨¨‰∏â‰∏™Âüü‰∏≠ÁöÑÂâçÂØºÁ©∫Èó¥„ÄÇ

@cindex troubleshooting, @command{awk} uses @code{FS} not @code{IFS}
ÂüüÂàÜÈöîÁ¨¶Áî±È¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{FS} Ë°®Á§∫„ÄÇ
Shell Á®ãÂ∫èÂëòË¶ÅÊ≥®ÊÑèÔºö@command{awk} @emph{‰∏ç}‰ΩøÁî®Áî± POSIX ÂÖºÂÆπ Shell
Ôºà‰æãÂ¶Ç Unix Bourne shellÔºå@command{sh}ÔºåÊàñËÄÖ BashÔºâ‰ΩøÁî®ÁöÑÂêçÂ≠ó @code{IFS}„ÄÇ

@cindex @code{FS} variable, changing value of
@code{FS} ÁöÑÂÄºÂèØ‰ª•Âú® @command{awk} ÁöÑÁ®ãÂ∫èÂΩì‰∏≠‰ΩøÁî®ËµãÂÄºÊìç‰ΩúÁ¨¶Êù•ËøõË°åÊîπÂèòÔºå@samp{=} ÔºàÊü•Áúã @ref{Assignment Ops}Ôºâ„ÄÇ
‰∏ÄËà¨Êù•ËØ¥ÔºåËøõË°åËµãÂÄºÁöÑÊ≠£Á°ÆÊó∂Êú∫‰∏ÄËà¨ÊòØÂú®ÊâßË°åÁöÑÂºÄÂßãÔºåÂπ∂Âú®‰ªª‰ΩïËÆ∞ÂΩïËøòÊ≤°ÊúâË¢´Â§ÑÁêÜ‰πãÂâçÔºåÂõ†Ê≠§Á¨¨‰∏ÄÊù°ËÆ∞ÂΩï‰ºöÈÄöËøáÊ≠£Á°ÆÁöÑÂàÜÈöîÁ¨¶ËøõË°åÂ§ÑÁêÜ„ÄÇ
‰∏∫‰∫ÜÂÆûÁé∞ËøôÊ†∑ÁöÑËµãÂÄºÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® @code{BEGIN} Ê®°ÂºèÔºàÊü•Áúã @ref{BEGIN/END}Ôºâ„ÄÇ
‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ∞Ü @code{FS} ÁöÑÂÄºËÆæÁΩÆÊàêÂ≠ó‰∏≤ @code{","}Ôºö

@example
awk 'BEGIN @{ FS = "," @} ; @{ print $2 @}'
@end example

@cindex @code{BEGIN} pattern
@noindent
Â¶ÇÊûúËæìÂÖ•ÁöÑË°å‰∏∫Ôºö

@example
John Q. Smith, 29 Oak St., Walamazoo, MI 42139
@end example

@noindent
Ëøô‰∏™ @command{awk} Á®ãÂ∫è‰ºöÊèêÂèñÂπ∂ÊâìÂç∞Â≠ó‰∏≤ @samp{@bullet{}29@bullet{}Oak@bullet{}St.} „ÄÇ

@cindex field separators, choice of
@cindex regular expressions as field separators
@cindex field separators, regular expressions as
ÊúâÊó∂ÔºåËæìÂÖ•Êï∞ÊçÆ‰∏≠ÂåÖÂê´ÊúâÂàÜÈöîÁ¨¶ÔºåÂõ†Ê≠§Ê≤°ÊúâÊåâ‰Ω†ÊâÄÈ¢ÑÊúüÁöÑÊñπÂºèÂØπÊàñËÄÖÂàÜÈöî„ÄÇÂ¶ÇÔºåÂú®Êàë‰ª¨ÂàöÊâç‰ΩøÁî®ÁöÑ‰æãÂ≠ê‰∏≠Ôºå‰∫∫Âêç‰∏≠ÊúâÂèØËÉΩÊúâÁß∞Ë∞ìÊàñËÄÖÂêéÁºÄÔºåÂ¶ÇÔºö

@example
John Q. Smith, LXIX, 29 Oak St., Walamazoo, MI 42139
@end example

@noindent
ÂêåÊ†∑ÁöÑÁ®ãÂ∫èÔºå‰ºöÊèêÂèñ @samp{@bullet{}LXIX} ËÄå‰∏çÊòØ @samp{@bullet{}29@bullet{}Oak@bullet{}St.} „ÄÇ
Â¶ÇÊûú‰Ω†È¢ÑÊúüÂÖ∂ÊâìÂç∞ÁöÑÊòØÂú∞ÂùÄÔºå‰Ω†Â∞±‰ºöÊÑüËßâÂà∞ÂæàÂ•áÊÄ™„ÄÇ
ÁªàÊûÅÊñπÊ≥ïÊòØË¶Å‰ªîÁªÜÈÄâÊã©‰Ω†ÁöÑÊï∞ÊçÆÁªìÊûÑÂíåÂàÜÈöîÁ¨¶‰ª•ÈÅøÂÖçËøôÊ†∑ÁöÑÈóÆÈ¢ò„ÄÇ
ÔºàÂ¶ÇÊûúÊûúÊï∞ÊçÆÁöÑÊ†ºÂºèÂπ∂‰∏çÂ•ΩÂ§ÑÁêÜÔºå‰πüÂèØ‰ª•ÂÖàÂ∞ÜÂÆÉÁî®Âè¶‰∏Ä‰∏™Á®ãÂ∫èÂÖàËæìÂá∫Êù•ËøõË°åÊü•Áúã„ÄÇÔºâ


@node Default Field Splitting
@subsection Ê†áÂáÜÁöÑÂüüÂàÜÈöîÁ¨¶Á©∫ÁôΩÁ¨¶

@cindex newlines, as field separators
@cindex whitespace, as field separators
ÈÄöÂ∏∏ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂüüÊòØÈÄöËøáÁ©∫ÁôΩÁ¨¶Â∫èÂàóËøõË°åÂàÜÈöîÁöÑÔºàÁ©∫Ê†ºÔºåTABsÔºåÊàñËÄÖÊç¢Ë°åÁ¨¶ÔºâÔºåËÄå‰∏çÊòØÈÄöËøáÂçï‰∏™Á©∫Ê†º„ÄÇ
‰∏ÄË°å‰∏≠ÁöÑ‰∏§‰∏™ËøûÁª≠Á©∫Ê†º‰∏ç‰ºöÂàÜÈöîÂá∫‰∏Ä‰∏™Á©∫Âüü„ÄÇÂüüÂàÜÈöîÁ¨¶ @code{FS} ÁöÑÈªòËÆ§ÂÄºÊòØÂåÖÂê´‰∏Ä‰∏™Á©∫Ê†ºÁöÑÂ≠ó‰∏≤ÔºåÂç≥ @w{@code{" "}}„ÄÇ
Â¶ÇÊûú @command{awk} Â∞ÜËøô‰∏™ÂÄºÊåâÁÖßÈÄöÂ∏∏ÁöÑÊñπÊ≥ïËß£ÈáäÔºåÊØè‰∏™Á©∫Ê†ºÈÉΩ‰ºöÂàÜÈöîÂá∫‰∏Ä‰∏™ÂüüÂá∫Êù•Ôºå‰ªéËÄåÂØºËá¥‰∏ÄË°å‰∏≠ÁöÑËøûÁª≠‰∏§‰∏™Á©∫Ê†º‰ºöÂú®‰ªñ‰ª¨‰πãÈó¥‰∫ßÁîü‰∏Ä‰∏™Á©∫Âüü„ÄÇ
Ê≤°Êúâ‰∫ßÁîüËøôÁßçÊÉÖÂÜµÔºåÊòØÂõ†‰∏∫ @code{FS} ÂÄº‰∏≠ÁöÑÂçï‰∏™Á©∫Ê†ºÊòØ‰∏ÄÁßçÁâπÊÆäÊÉÖÂÜµ‚Äî‚ÄîÂÖ∂Áî®Êù•ÊåáÂÆöÂüüÂàÜÈöîÁöÑÈªòËÆ§ÊñπÂºè„ÄÇ

Â¶ÇÊûú @code{FS} ÊòØÂÖ∂‰ªñÁöÑ‰ªªÊÑèÂçï‰∏™Â≠óÁ¨¶ÔºåÂ¶Ç @code{","}ÔºåÂàôÊØè‰∏Ä‰∏™ËøôÊ†∑ÁöÑÂ≠óÁ¨¶Âá∫Áé∞ÔºåÈÉΩ‰ºöÂàÜÈöîÂá∫‰∏§‰∏™ÂüüÂá∫Êù•„ÄÇ
‰∏§‰∏™ËøûÁª≠Âá∫Áé∞ÔºåÂ∞±‰ºöÂàÜÈöîÂá∫‰∏Ä‰∏™Á©∫Âüü„ÄÇÂ¶ÇÊûúËøô‰∏™Â≠óÁ¨¶Âá∫Áé∞Âú®ÂºÄÂ§¥ÊàñËÄÖÁªìÂ∞æÔºå‰πü‰ºö‰∫ßÁîü‰∏Ä‰∏™Á©∫Âüü„ÄÇ
Á©∫Ê†ºÊòØÂîØ‰∏Ä‰∏Ä‰∏™‰∏çÊåâËøôÁßçËßÑÂàôÂ§ÑÁêÜÁöÑÂ≠óÁ¨¶„ÄÇ

@node Regexp Field Splitting
@subsection ‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂàÜÈöîÂüü
@cindex regular expressions, as field separators
@cindex field separators, regular expressions as
ÂâçÈù¢ÁöÑ@value{SUBSECTION}ËÆ®ËÆ∫‰∫Ü‰ΩøÁî®Âçï‰∏™Â≠óÁ¨¶ÊàñËÄÖÁÆÄÂçï‰∏≤‰Ωú‰∏∫ @code{FS} ÂÄºÁöÑÊÉÖÂÜµ„ÄÇÊõ¥ÈÄöÂ∏∏ÁöÑÊÉÖÂÜµÔºå@code{FS} ÁöÑÂÄºÂèØ‰ª•ÂåÖÂê´‰ªªÊÑèÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏ÄÊ¨°ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÂ∞±‰ºöÂàÜÈöîÂüü„ÄÇÂ¶Ç‰∏ãÈù¢ÁöÑËµãÂÄºÔºö

@example
FS = ", \t"
@end example

@noindent
ÊØè‰∏Ä‰∏™ËæìÂÖ•Ë°å‰∏≠ÔºåÂåπÈÖçÈÄóÂè∑ÂêéÈù¢Ë∑üÁùÄ‰∏Ä‰∏™Á©∫Ê†º‰∏é‰∏Ä‰∏™ TAB Â≠óÁ¨¶ÁöÑÊñáÊú¨Âå∫ÔºåÈÉΩÂ∞ÜÊàê‰∏∫‰∏Ä‰∏™ÂàÜÈöîÁ¨¶„ÄÇ
@ifinfo
Ôºà@samp{\t} ÊòØ‰∏Ä‰∏™@dfn{ËΩ¨‰πâÂ∫èÂàó}Ôºå‰ª£Ë°®‰∏Ä‰∏™ TAB Â≠óÁ¨¶ÔºõÊü•Áúã @ref{Escape Sequences} ÂÖ≥‰∫éÁ±ª‰ººÁöÑËΩ¨‰πâÂ∫èÂàóÁöÑÂÆåÊï¥ÂàóË°®„ÄÇÔºâ
@end ifinfo

Âú®‰∏Ä‰∏™‰∏çÊòØÂ§™ÊôÆÈÄöÁöÑÊ≠£ÂàôË°®ËææÂºè‰æãÂ≠ê‰∏≠Ôºå‰ºöÂ∞ùËØïÁî®Âçï‰∏™Á©∫Ê†ºÊù•ÂàÜÈöîÂüüÔºå‰∏éÂçï‰∏™ÁöÑÈÄóÂè∑‰∏ÄÊ†∑ÁöÑÊñπÂºè„ÄÇ
@code{FS} ÂèØ‰ª•Ë¢´ËÆæÁΩÆÊàê @w{@code{"[@ ]"}}ÔºàÂ∑¶ÊñπÊã¨Âè∑ÔºåÁ©∫Ê†ºÔºåÂè≥ÊñπÊã¨Âè∑Ôºâ„ÄÇ
Ëøô‰∏™Ê≠£ÂàôË°®ËææÂºèÂè™ÂåπÈÖçÂçï‰∏™Á©∫Ê†ºËÄå‰∏çÊòØÂÖ∂ÂÆÉÁöÑÔºàÊü•Áúã @ref{Regexp}Ôºâ„ÄÇ

@samp{FS = @w{" "}}ÔºàÂçïÁ©∫Ê†ºÔºâ‰∏é @samp{FS = @w{"[ \t\n]+"}}ÔºàÂåπÈÖç‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á©∫Ê†ºÔºåTABs ‰∏éÊç¢Ë°åÁ¨¶Ôºâ‰πãÈó¥Â≠òÂú®‰∏Ä‰∏™ÈáçÂ§ßÁöÑÂ∑ÆÂºÇ„ÄÇ
ÂØπ‰∫é FS ÁöÑ‰∏§‰∏™ÂÄºÔºåÂüüÈÉΩ‰ºöË¢´ËøûÁª≠ÁöÑÔºàÂá∫Áé∞Â§ö‰∏™Áõ∏ÈÇªÁöÑÔºâÁ©∫Ê†º„ÄÅTABs„ÄÅ‰∏éÊç¢Ë°åÁ¨¶ÂàÜÈöî„ÄÇ
‰ΩÜÊòØÔºåÂΩì @code{FS} ÁöÑÂÄºÊòØ @w{@code{" "}} Êó∂Ôºå@command{awk} È¶ñÂÖàÂ∞ÜËÆ∞ÂΩïÁöÑÂâçÂêéÁ©∫ÁôΩÁ¨¶ÈÉΩÂéªÊéâÔºåÁÑ∂ÂêéÊâçÂéªÂÜ≥ÂÆöÂüüÊâÄÂú®ÁöÑÂå∫Âüü„ÄÇ‰æãÂ¶Ç‰∏ãÈù¢ÁöÑÁÆ°Á®ã‰ºöÊâìÂç∞ @samp{b} Ôºö

@example
$ @kbd{echo ' a b c d ' | awk '@{ print $2 @}'}
@print{} b
@end example

@noindent
‰ΩÜÊòØËøô‰∏™ÁÆ°Á®ã‰ºöÊâìÂç∞ @samp{a}ÔºàÊ≥®ÊÑè‰∏Ä‰∏ãÂú®ÊØè‰∏™Â≠óÊØçÂâçÂêé‰∏§È¢ùÂ§ñÁ©∫Ê†ºÔºâÔºö

@example
$ @kbd{echo ' a  b  c  d ' | awk 'BEGIN @{ FS = "[ \t\n]+" @}}
>                                  @kbd{@{ print $2 @}'}
@print{} a
@end example

@noindent
@cindex null strings
@cindex strings, null
@cindex empty strings, See null strings
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™ÂüüÊòØ nullÔºåÊàñËÄÖÁß∞‰∏∫Á©∫„ÄÇ

Áï•ÂéªËÆ∞ÂΩïÁöÑÂâçÂêéÁ©∫ÁôΩÁ¨¶Âú® @code{$0} ÊòØÂ¶ÇÊûú‰ΩïÊù•ÈáçÊñ∞ËÆ°ÁÆó‰πü‰ºöÊúâ‰ΩúÁî®„ÄÇÂ¶ÇÔºåËÄÉÂØü‰∏ãÈù¢ÁöÑÁÆ°Á®ãÔºö

@example
$ @kbd{echo '   a b c d' | awk '@{ print; $2 = $2; print @}'}
@print{}    a b c d
@print{} a b c d
@end example

@noindent
Á¨¨‰∏Ä‰∏™ print ËØ≠Âè•ÊâìÂç∞Âá∫Ë¢´ËØªÊó∂ÁöÑÂÜÖÂÆπÔºåÂπ∂‰∏îÂâçÂ§¥ÁöÑÁ©∫ÁôΩÊòØ‰øùÁïô‰∫ÜÁöÑ„ÄÇ
ÂØπ‰∫é @code{$2} ÂüüÁöÑËµãÂÄº‰ºöÂØºËá¥ @code{$0} ÁöÑÈáçÂª∫ÔºåÂπ∂‰∏îÂ∞Ü @code{$1} Âà∞ @code{$NF} ÁöÑËÆ∞ÂΩïÂêàÂπ∂Âú®‰∏ÄËµ∑Ôºå
Áõ∏‰∫í‰πãÈó¥Áî® @code{OFS} ÁöÑÂÄºËøõË°åÂàÜÈöîÔºàÈªòËÆ§ÊÉÖÂÜµ‰∏ã‰πüÊòØÁ©∫Ê†ºÔºâ„ÄÇ
Âõ†‰∏∫ÂâçÂØºÁöÑÁ©∫ÁôΩÂú®Êü•Êâæ @code{$1} Êó∂Â∑≤ÁªèË¢´ÂøΩÁï•‰∫ÜÔºåÊâÄ‰ª•ÂÆÉ‰∏çÂÜçÊòØÊñ∞ÁöÑ @code{$0} ÁöÑ‰∏ÄÈÉ®‰ªΩ„ÄÇ
ÊúÄÁªàÔºåÊúÄÂêéÁöÑ‰∏Ä‰∏™ @code{print} ËØ≠Âè•ÊâìÂç∞ÁöÑÊòØÊñ∞ÁöÑ @code{$0}„ÄÇ

@cindex @code{FS}, containing @code{^}
@cindex @code{^} (caret), in @code{FS}
@cindex dark corner, @code{^}, in @code{FS}
‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÊù•ÂàÜÈöîËÆ∞ÂΩïÊó∂ÔºåÊúâ‰∏Ä‰∏™È¢ùÂ§ñÁöÑÁªÜËäÇ‰πãÂ§ÑË¶Å‰∫ÜËß£„ÄÇ
ËøôÂú® POSIX Ê†áÂáÜÂú®Ê≤°ÊúâÁ°ÆÂÆöÔºå‰πüÂú®Ê≤°ÂÖ∂‰ªñÂú∞ÊñπËØ¥ÊòéÔºåÂà∞Â∫ï @samp{^} Âú®ÂüüÂàÜÈöîÊó∂Ë°®Á§∫‰ªÄ‰πà„ÄÇÊòØÂè™ÂåπÈÖçÊï¥‰∏™ËÆ∞ÂΩïÁöÑÂºÄÂßãÔºüËøòÊòØÂüüÂàÜÈöîÂá∫ÁöÑÊñ∞‰∏≤ÔºüÂõ†Ê≠§‰∏çÂêåÁöÑÁâàÊú¨ÁöÑ @command{awk} ÂØπ‰∫éËøô‰∏™ÈóÆÈ¢òÁöÑÂõûÁ≠î‰πüÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ‰Ω†‰∏çË¶Å‰æùËµñ‰∫é‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÁöÑÁâπÂÆöË°å‰∏∫Ë°®Áé∞„ÄÇ
@value{DARKCORNER}

@cindex Brian Kernighan's @command{awk}
‰Ωú‰∏∫ÊèêÁ§∫‰ø°ÊÅØÔºåBWK @command{awk} ÂÖÅËÆ∏ @samp{^} Âè™ÂåπÈÖçËÆ∞ÂΩïÁöÑÂºÄÂ§¥„ÄÇ
@command{gawk} ‰πüËøô‰πàÂ§ÑÁêÜ„ÄÇÂ¶ÇÔºö

@example
$ @kbd{echo 'xxAA  xxBxx  C' |}
> @kbd{gawk -F '(^x+)|( +)' '@{ for (i = 1; i <= NF; i++)}
> @kbd{                            printf "-->%s<--\n", $i @}'}
@print{} --><--
@print{} -->AA<--
@print{} -->xxBxx<--
@print{} -->C<--
@end example

@node Single Character Fields
@subsection ÂêÑÂ≠óÁ¨¶ÁöÜ‰∏∫ÂàÜÈöîÁ¨¶

@cindex common extensions, single character fields
@cindex extensions, common@comma{} single character fields
@cindex differences in @command{awk} and @command{gawk}, single-character fields
@cindex single-character fields
@cindex fields, single-character
ÊúâÈÇ£‰πàÂá†Ê¨°Ôºå‰Ω†ÂèØËÉΩÊÉ≥ÊµãËØï‰∏Ä‰∏ãÂçïÁã¨Âú∞ÊØè‰∏™Â≠óÁ¨¶‰Ωú‰∏∫ÂàÜÈöîÁ¨¶ÁöÑÊÉÖÂÜµ„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºå
Âú® @command{gawk} ‰∏≠‰Ω†Âè™ÈúÄË¶ÅÁÆÄÂçïÂú∞Â∞ÜÁ©∫‰∏≤Ôºà@code{""}ÔºâËµãÂÄºÁªô @code{FS} Âç≥ÂèØ„ÄÇ@value{COMMONEXT}
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåËÆ∞ÂΩï‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠óÁ¨¶ÈÉΩÂ∞ÜÊàê‰∏∫‰∏Ä‰∏™ÂàÜÈöîÁ¨¶„ÄÇÂ¶ÇÔºö

@example
$ @kbd{echo a b | gawk 'BEGIN @{ FS = "" @}}
>                  @kbd{@{}
>                      @kbd{for (i = 1; i <= NF; i = i + 1)}
>                          @kbd{print "Field", i, "is", $i}
>                  @kbd{@}'}
@print{} Field 1 is a
@print{} Field 2 is
@print{} Field 3 is b
@end example

@cindex dark corner, @code{FS} as null string
@cindex @code{FS} variable, as null string
‰º†Áªü‰∏äÔºå@code{FS} Á≠â‰∫é @code{""} ÁöÑË°å‰∏∫Âπ∂‰∏çÊòØÁ°ÆÂÆöÁöÑ„ÄÇ
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåUnix @command{awk} ÁöÑÂ§ßÂ§öÊï∞ÁâàÊú¨Âè™ÊòØÁÆÄÂçïÂú∞Â∞ÜÊï¥‰∏™ËÆ∞ÂΩïÂΩìÂÅö‰∏Ä‰∏™Âüü„ÄÇ
@value{DARKCORNER}
Âú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂ¶ÇÊûú @code{FS} ÊòØ‰∏Ä‰∏™Á©∫‰∏≤ÔºåÈÇ£‰πà @command{gawk} ‰πü‰ºöÊåâÁÖß‰∏äÈù¢ÁöÑÊñπÂºèËøõË°åÂ§ÑÁêÜ„ÄÇ

@node Command Line Field Separator
@subsection ‰ªéÂëΩ‰ª§Ë°å‰∏≠ËÆæÁΩÆ @code{FS}
@cindex @option{-F} option, command-line
@cindex field separator, on command line
@cindex command line, @code{FS} on@comma{} setting
@cindex @code{FS} variable, setting from command line

@code{FS} ÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏≠ÈÄöËøá @option{-F} ÈÄâÈ°πËøõË°åËÆæÁΩÆÔºåÂ¶ÇÔºö

@example
awk -F, '@var{program}' @var{input-files}
@end example

@noindent
ËÆæÁΩÆ @code{FS} ÁöÑÂÄº‰∏∫ @samp{,}ÔºåÊ≥®ÊÑèÈÄâÈ°π‰ΩøÁî®ÁöÑÊòØ‰∏Ä‰∏™Â§ßÂÜôÁöÑ @samp{F}ÔºåËÄå‰∏çÊòØÂ∞èÂÜôÁöÑ @samp{f}„ÄÇ
ÂêéËÄÖ @option{-f} ÈÄâÈ°πÊåáÂÆö‰∫ÜÂåÖÂê´ @command{awk} Á®ãÂ∫èÁöÑÊñá‰ª∂„ÄÇ

ÂèÇÊï∞ @option{-F} ÁöÑËµãÂÄºÊñπÂºèÂíåÈ¢ÑÂÆö‰πâÂèÇÊï∞ @code{FS} ÁöÑËµãÂÄºÊñπÂºèÂÆåÂÖ®‰∏ÄÊ†∑„ÄÇ
‰ªª‰ΩïÂú®ÂüüÂàÜÈöîÂ≠óÁ¨¶‰∏≠ÁöÑÁâπÊÆäÂ≠óÁ¨¶ÈÉΩÂøÖÈ°ªËøõË°åÈÄÇÂΩìÂú∞ËΩ¨‰πâ„ÄÇ
Â¶Ç‰ΩøÁî®‰∏Ä‰∏™ @samp{\} Áî®‰Ωú‰∏Ä‰∏™ÂüüÂàÜÈöîÁ¨¶Ôºå‰Ω†ÈúÄË¶ÅËøôÊ†∑Êù•ËæìÂÖ•Ôºö

@example
# same as FS = "\\"
awk -F\\\\ '@dots{}' files @dots{}
@end example

@noindent
@cindex @code{\} (backslash), as field separator
@cindex backslash (@code{\}), as field separator
Áî±‰∫é @samp{\} Ë¶ÅÂú® shell ‰∏≠Áî®ÂºïÂè∑ÂºïËµ∑Êù•Ôºå@command{awk} ‰ºöÁúãÂà∞ @samp{-F\\}„ÄÇ
‰πãÂêé @command{awk} ‰ºöÂ§ÑÁêÜ @samp{\\} ËΩ¨‰πâÂ≠óÁ¨¶Ôºå
ÔºàÊü•Áúã @ref{Escape Sequences}ÔºâÔºåÊúÄÂêéÔºå‰∫ßÁîü‰∏Ä‰∏™ÂçïÁã¨ÁöÑ @samp{\} Áî®‰ΩúÂüüÂàÜÈöîÁ¨¶„ÄÇ

@c @cindex historical features
Êúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑ‰æãÂ≠êÔºåÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºå
Â¶ÇÊûú @option{-F} ÁöÑÂèÇÊï∞ÊòØ @samp{t}ÔºåÂàô @code{FS} ‰ºöË¢´ËÆæÁΩÆÊàê TAB Á¨¶Âè∑„ÄÇ
Â¶ÇÊûú‰Ω†Âú® Shell ‰∏≠ËæìÂÖ• @samp{-F\t}ÔºåÊ≤°ÊúâËøõË°å‰ªª‰ΩïËΩ¨‰πâÔºåÂàô @samp{\} ‰ºöË¢´Âà†Èô§Êéâ„ÄÇ
ÊâÄ‰ª•Ôºå@command{awk} ‰ºö‰∫ÜËß£Âà∞‰Ω†ÊòØÁúüÁöÑÊÉ≥Áî® TABs Êù•ÂàÜÈöîËÆ∞ÂΩïÔºåËÄå‰∏çÊòØ @samp{t} „ÄÇ
Â¶ÇÊûú‰Ω†Á°ÆÂÆûÊòØË¶ÅÁî® @samp{t} Êù•ÂàÜÈöîËÆ∞ÂΩïÔºåÂàôÂú®ÂëΩ‰ª§Ë°å‰∏≠‰ΩøÁî® @samp{-v FS="t"} ÊàñËÄÖ @samp{-F"[t]"} „ÄÇ
Â¶ÇÊûú‰∏çÊòØÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºå‰ΩøÁî® @samp{-F '\t'} Êù•ÊåáÂÆö TABs Êù•ÂÅöÂüüÂàÜÈöîÁ¨¶„ÄÇ

‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨Âà©Áî®‰∏Ä‰∏™Âêç‰∏∫ @file{edu.awk} ÁöÑÁ®ãÂ∫èÊñá‰ª∂ÔºåÂÖ∂‰∏≠ÂåÖÊã¨‰∫Ü @code{/edu/} Ê®°ÂºèÔºå
‰ª•ÂèäÂä®‰Ωú @samp{print $1}Ôºö

@example
/edu/   @{ print $1 @}
@end example

Êàë‰ª¨Â∞Ü @code{FS} ÁöÑÂÄºËÆæÁΩÆÊàê @samp{-} Â≠óÁ¨¶ÔºåÂπ∂ÊääÁ®ãÂ∫èËøêË°åÂú®Êñá‰ª∂ @file{mail-list} ‰∏ä„ÄÇ
‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÊâìÂç∞Âá∫ÈÇ£‰∫õÂ∑•‰ΩúÂú®Â§ßÂ≠¶ÊàñËÄÖÂú®‰∏äÂ§ßÂ≠¶ÁöÑ‰∫∫ÁöÑÂêçÂ≠óÂàóË°®Ôºå‰ª•Âèä‰ªñ‰ª¨ÁîµËØùÂè∑Á†ÅÁöÑÂâç‰∏â‰∏™Êï∞Â≠óÔºö

@example
$ @kbd{awk -F- -f edu.awk mail-list}
@print{} Fabius       555
@print{} Samuel       555
@print{} Jean
@end example

@noindent
Ê≥®ÊÑèÁ¨¨‰∏âË°åËæìÂá∫ÔºåÁ¨¨‰∏âË°åÂÜÖÂÆπÂú®ÂéüÊñá‰ª∂ÊòØËøôÊ†∑ÁöÑÔºö

@example
Jean-Paul    555-2127     jeanpaul.campanorum@@nyu.edu     R
@end example

@samp{-} ÊòØ‰∫∫ÂêçÁöÑ‰∏ÄÈÉ®ÂàÜÔºå‰ΩÜÊòØÂç¥Ë¢´Áî®Êù•‰Ωú‰∫ÜÂüüÂàÜÈöîÁ¨¶ÔºåËÄå‰∏çÊòØÊåâÁÖßÈ¢ÑÊÉ≥ÁöÑÈÇ£Ê†∑Áî®ÁîµËØùÂè∑Á†Å‰∏≠ÁöÑ @samp{-} Êù•ÂÅöÂàÜÈöîÁ¨¶„ÄÇËøôËØ¥Êòé‰∫ÜÔºå‰Ω†ÈúÄË¶Å‰ªîÁªÜÂú∞ÈÄâÊã©‰Ω†ÁöÑÂüüÂàÜÈöîÁ¨¶„ÄÇ

@cindex Unix @command{awk}, password files@comma{} field separators and
‰πüËÆ∏ÔºåÂ§ßÂ§öÊï∞‰ΩøÁî®ÂçïÂ≠óÁ¨¶‰Ωú‰∏∫ÂüüÂàÜÈöîÁöÑÊÉÖÂÜµ‰∏ãÂá∫Áé∞Âú®Â§ÑÁêÜ Unix Á≥ªÁªüÁöÑÂØÜÁ†ÅÊñá‰ª∂„ÄÇÂú®ËÆ∏Â§öÁöÑ Unix Á≥ªÁªü‰∏≠ÔºåÊØè‰∏™Áî®Êà∑Âú®Á≥ªÁªüÁöÑÂØÜÁ†ÅÊñá‰ª∂‰∏≠ÈÉΩÊúâ‰∏Ä‰∏™È°πÔºå‰∏ÄË°å‰∏ÄÁî®Êà∑„ÄÇËøô‰∫õË°å‰∏≠ÁöÑ‰ø°ÊÅØÊòØÁî®ÂÜíÂè∑ÂàÜÈöîÁöÑ„ÄÇÁ¨¨‰∏Ä‰∏™ÂüüÊòØÁî®Êà∑ÁöÑÁôªÂΩïÂêçÔºåÁ¨¨‰∫åÈ°πÊòØÁî®Êà∑Â∑≤ÁªèÂä†ÂØÜËøáÁöÑÂØÜÁ†ÅÔºåÊàñËÄÖÊòØÂΩ±Â≠êÂØÜÁ†ÅÔºàÂΩ±Â≠êÂØÜÁ†ÅÂ∞±ÊòØÂú®Á¨¨‰∫å‰∏™Âüü‰∏≠Áî® @samp{x} ‰ª£ÊõøÁöÑÂØÜÁ†Å„ÄÇÔºâÂØÜÁ†ÅÊñá‰ª∂ÁöÑÈ°πÁúãËµ∑Êù•ÂèØËÉΩÂ¶Ç‰∏ãÔºö

@cindex Robbins, Arnold
@example
arnold:x:2076:10:Arnold Robbins:/home/arnold:/bin/bash
@end example

‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÊêúÁ¥¢Á≥ªÁªüÁöÑÂØÜÁ†ÅÊñá‰ª∂Âπ∂ÊêúÊâìÂç∞ÈÇ£‰∫õÁî®Êà∑ÁöÑÂÖ®ÂêçÊ≤°ÊúâÂ≠òÂú®ÁöÑÈ°πÔºö

@example
awk -F: '$5 == ""' /etc/passwd
@end example

@node Full Line Fields
@subsection ‰∏ÄË°åÂç≥‰∏ÄÂüü 

ÊúâÊó∂ÂÄôÔºåÂ∞ÜÊï¥Ë°åÂΩìÊàê‰∏Ä‰∏™ÂüüÈùûÂ∏∏ÊúâÁî®ÔºåËøôÂè™Ë¶ÅÁÆÄÂçïÂú∞Â∞Ü @code{FS} ËÆæÁΩÆÊàê @samp{\n}ÔºàÊç¢Ë°åÁ¨¶ÔºâÂç≥ÂèØÔºåËøô‰πüÊòØÂèØÁßªÊ§çÁöÑÔºö
@footnote{ÊÑüË∞¢ Andrew Schorr ÊâÄÂÅöÁöÑÊèêÁ§∫„ÄÇ}

@example
awk -F'\n' '@var{program}' @var{files @dots{}}
@end example

@noindent
ÂΩì‰Ω†Ëøô‰πàÂÅöÊó∂Ôºå@code{$1} ‰∏é @code{$0} ‰∏ÄÊ†∑„ÄÇ

@sidebar ÊîπÂèò @code{FS} ‰∏ç‰ºöÂΩ±ÂìçÂüü

@cindex POSIX @command{awk}, field separators and
@cindex field separator, POSIX and
Ê†πÊçÆ POSIX Ê†áÂáÜÔºå@command{awk} ÁöÑË°å‰∏∫Ëµ∑Êù•Â∞±Â∞±ÂÉèËÆ∞ÂΩïÂú®Ë¢´ËØªÂèñÁöÑÊó∂ÂÄôÂ∞±Â∑≤ÁªèÂàÜÈöî‰∫Ü„ÄÇ
ËøôÊÑèÊÄùÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûú‰Ω†Âú®ËÆ∞ÂΩïËØªÂèñÂêéÂÜçÊõ¥Êîπ @code{FS} ÁöÑÂÄºÔºåÂüüÁöÑÂÄºÔºàÂ¶Ç‰ªñ‰ª¨Â¶Ç‰ΩïË¢´ÂàÜÂâ≤ÔºâÂ∫îËØ•ÂèçÊò†ÁöÑÊòØÊóßÁöÑ @code{FS} ÁöÑÊÉÖÂÜµÔºå
ËÄå‰∏çÊòØÊñ∞ÁöÑ„ÄÇ

@cindex dark corner, field separators
@cindex @command{sed} utility
@cindex stream editors
‰ΩÜÊòØÔºåËÆ∏Â§öÁöÑÊóßÁöÑ @command{awk} ÂÆûÁé∞‰∏çÊòØËøô‰πàÂ§ÑÁêÜÁöÑ„ÄÇ
Áõ∏ÂèçÔºåËøô‰∫õÂÆûÁé∞ÊòØÂΩìË¶Å‰ΩøÁî®ÂüüÊó∂ÔºåÊâçÂºÄÂßãËøõË°åÂàÜÂâ≤„ÄÇÂüü‰ΩøÁî®@emph{ÂΩìÂâç}ÁöÑ @code{FS} ÂÄºÊù•ËøõË°åÂàÜÂâ≤„ÄÇ
@value{DARKCORNER}
Ëøô‰∏™Ë°å‰∏∫ÂæàÈöæËøõË°åËØÜÂà´„ÄÇ
‰∏ãÈù¢ÁöÑ‰æãÂ≠êËß£Èáä‰∫Ü‰∏§ÁßçÊñπÊ≥ïÁöÑÂ∑ÆÂºÇÔºö

@example
sed 1q /etc/passwd | awk '@{ FS = ":" ; print $1 @}'
@end example

@noindent
‰∏ÄËà¨ÈÉΩÊâìÂç∞Ôºö

@example
root
@end example

@noindent
ËøôÊòØÂú®‰∏Ä‰∏™‰∏çÊ≠£Á°ÆÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÁöÑË°å‰∏∫ÔºåËÄå @command{gawk} Âàô‰ºöÊâìÂç∞Êñá‰ª∂ÁöÑÁ¨¨‰∏ÄË°åÁöÑÊï¥Ë°åÔºåÂ¶ÇÔºö

@example
root:x:0:0:Root:/:
@end example

Ôºàsed ÂëΩ‰ª§
@footnote{@command{sed} Â∑•ÂÖ∑Áß∞‰∏∫‚ÄúÊµÅÁºñËæëÂô®‚Äù„ÄÇÂÆÉÁöÑË°å‰∏∫‰πüÁî± POSIX Ê†áÂáÜÊù•ÂÆö‰πâ„ÄÇ}
ÊâìÂç∞Êñá‰ª∂ @file{/etc/passwd} ÁöÑÁ¨¨‰∏ÄË°å„ÄÇÔºâ
@end sidebar

@node Field Splitting Summary
@subsection ÂüüÂàÜÂâ≤ÊÄªÁªì 

ÂΩì‰Ω†Áªô @code{FS} ËµãÂÄº‰∏∫‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏ÈáèÁöÑÊó∂ÂÄôÔºåË¶ÅËÆ∞‰ΩèËøô‰∏™ÈùûÂ∏∏ÈáçË¶ÅÔºåÂÖ∂‰∏é @command{awk} Ê≠£Â∏∏ÁöÑÂ≠óÁ¨¶Â§ÑÁêÜÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑ„ÄÇ
‰æãÂ¶ÇÔºöUnix @command{awk} ‰∏é @command{gawk}ÔºåËøôÊ†∑ÁöÑËµãÂÄº @samp{FS = "\.."} ‰ºöÂ∞Ü @code{".."} ËµãÂÄºÁªô @code{FS}
ÔºàÂèçÊñúÊù†‰ºöË¢´ÂéªÊéâÔºâ„ÄÇ
Ëøô‰∏™ËµãÂÄºÂàõÂª∫‰∫Ü‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèË°®Á§∫‚ÄúÂüüÁî±‰∏§‰∏™Â≠óÁ¨¶ËøõË°åÂàÜÂâ≤„ÄÇ‚Äù
Â¶ÇÊûú‰Ω†Á°ÆÂÆûÊÉ≥Áî®‰∏Ä‰∏™ÁÇπÂè∑Ôºà@samp{.}ÔºâÂêéÈù¢Ë∑ü‰∏Ä‰∏™Â≠óÁ¨¶Êù•ÂàÜÂâ≤ÂüüÔºå‰ΩøÁî® @samp{FS = "\\.."}„ÄÇ

‰∏ãÈù¢ÊòØÂü∫‰∫é @code{FS} ÁöÑÂÄºÁöÑÂüüÂàÜÂâ≤ÁöÑÊÄªÁªìÔºà@samp{==} Ë°®Á§∫Á≠â‰∫éÔºâÔºö

@table @code
@item FS == " "
ÂüüÁî±ËøûÁª≠ÁöÑÁ©∫Ê†ºËøõË°åÂàÜÂâ≤„ÄÇËÆ∞ÂΩïÁöÑÂâçÂêéÁöÑÁ©∫ÁôΩ‰ºöË¢´ÂøΩÁï•„ÄÇËøôÊòØÈªòËÆ§ÂàÜÂâ≤ÊñπÂºè„ÄÇ

@item FS == @var{‰ªªÊÑèÂçï‰∏™Â≠óÁ¨¶}
ÂüüÁî±Âçï‰∏™Â≠óÁ¨¶ËøõË°åÂàÜÂâ≤„ÄÇ
Â§ö‰∏™ËøûÁª≠ÁöÑÂ≠óÁ¨¶‰ºöÂàÜÂâ≤Âá∫Á©∫ÂüüÔºåÂ§¥„ÄÅÂ∞æÁöÑÂá∫Áé∞‰πü‰∏ÄÊ†∑„ÄÇÂ≠óÁ¨¶ÁîöËá≥ÂèØ‰ª•ÊòØÊ≠£ÂàôË°®ËææÂºèÁöÑÂÖÉÂ≠óÁ¨¶ÔºåÂπ∂‰∏î‰πü‰∏çÈúÄË¶ÅËøõË°åËΩ¨‰πâ„ÄÇ

@item FS == @var{regexp}
ÂüüÁî±ÂåπÈÖç @var{regexp} ÁöÑÊ≠£ÂàôË°®ËææÂºèÂ≠óÁ¨¶‰∏≤ËøõË°åÂàÜÂâ≤„ÄÇÂâçÂêéÂåπÈÖç‰ºöÂàÜÂâ≤Âá∫Á©∫Â≠óÁ¨¶„ÄÇ

@item FS == ""
ËÆ∞ÂΩï‰∏≠ÁöÑÊØè‰∏™Â≠óÁ¨¶ÈÉΩÊòØÂàÜÈöîÁ¨¶„ÄÇÔºàËøôÊòØ‰∏Ä‰∏™ÈÄöÁî®Êâ©Â±ïÔºõ‰ΩÜÊòØÊ≤°ÊúâÁî± POSIX Ê†áÂáÜÂÆö‰πâ„ÄÇÔºâ
@end table

@sidebar @code{FS} ‰∏é @code{IGNORECASE}

@emph{‰ªÖ‰ªÖ}ÂΩìÂüüÂàÜÂâ≤Á¨¶ @code{FS} ÁöÑÂÄºÊòØÊ≠£ÂàôË°®ËææÂºèÊó∂Ôºå@code{IGNORECASE} ÂèòÈáèÔºàÊü•Áúã @ref{User-modified}Ôºâ
‰ºöÂΩ±ÂìçÂà∞ÂàÜÂâ≤„ÄÇ
ÂΩì @code{FS} ÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠óÁ¨¶Êó∂ÔºåÂàôÊ≤°ÊúâÂΩ±ÂìçÔºåÂç≥‰ΩøÂ≠óÁ¨¶ÊòØ‰∏Ä‰∏™Â≠óÊØç„ÄÇÂõ†Ê≠§‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
FS = "c"
IGNORECASE = 1
$0 = "aCa"
print $1
@end example

@noindent
ËæìÂá∫‰∏∫ @samp{cCa}„ÄÇ
Â¶ÇÊûú‰Ω†Á°ÆÂÆûÊÉ≥Áî®Â≠óÊØçÂ≠óÁ¨¶Êù•ÂàÜÂâ≤ÂüüËÄåÂøΩÁï•Â§ßÂ∞èÂÜôÔºåÂ∞±‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÔºåÂπ∂Áî±ÂÆÉÊù•‰∏∫‰Ω†Â§ÑÁêÜËøôÊ†∑ÁöÑÈóÆÈ¢ò
ÔºàÂ¶ÇÔºå@samp{FS = "[c]"}Ôºâ„ÄÇ
Âú®Ëøô‰∏™‰æãÂ≠êÔºå@code{IGNORECASE} ‰ºö‰∫ßÁîüÊïàÊûú„ÄÇ
@end sidebar


@node Constant Size
@section ËØªÂèñÂõ∫ÂÆöÂÆΩÂ∫¶Êï∞ÊçÆ

@cindex data, fixed-width
@cindex fixed-width data
@cindex advanced features, fixed-width data

@c O'Reilly doesn't like it as a note the first thing in the section.
Êú¨@value{SECTION}ËÆ®ËÆ∫ @command{gawk} ‰∏Ä‰∏™È´òÁ∫ßÁâπÊÄß„ÄÇÂ¶ÇÊûú‰Ω†ÊòØ @command{awk} Êñ∞ÊâãÔºå‰Ω†ÂèØ‰ª•Á¨¨‰∏ÄÊ¨°ÈòÖËØªÊó∂Ë∑≥Ëøá„ÄÇ

@command{gawk} Êèê‰æõ‰∫ÜÂ§ÑÁêÜÂõ∫ÂÆöÂÆΩÂ∫¶ÂüüÁöÑÂäüËÉΩÔºåËÄå‰∏çÈúÄË¶ÅÁâπÂà´ÁöÑÂüüÂàÜÂâ≤Á¨¶„ÄÇ
‰æãÂ¶ÇÔºåËøôÁßçÁâπÊÄßÂèØËÉΩÂá∫Áé∞Âú®ÊóßÁöÑ Fortran Á®ãÂ∫èÁöÑËæìÂÖ•Êï∞ÊçÆ‰∏≠ÔºåÂÖ∂‰∏≠Êï∞Â≠óÈÉΩÊòØËøûÁª≠Âá∫Áé∞ÁöÑÔºõ
ÊàñËÄÖÊòØÂá∫Áé∞Âú®‰∏Ä‰∫õÁ®ãÂ∫èÁöÑËæìÂá∫ÁªìÊûú‰∏≠ÔºåËøô‰∫õÁ®ãÂ∫èÁöÑËÆæËÆ°‰∏çËÄÉËôëÂ∞ÜÂÆÉÁöÑËæìÂá∫ÁªìÊûú‰Ωú‰∏∫ÂÖ∂‰ªñÁ®ãÂ∫èÁöÑËæìÂÖ•Êï∞ÊçÆ„ÄÇ

‰Ωú‰∏∫ÂêéËÄÖÁöÑ‰∏Ä‰∏™‰æãÂ≠êÂ∞±ÊòØË°®ÔºåÂÆÉÁöÑÊØè‰∏ÄÂàóÈÄöËøáÂà©Áî®ÂèØÂèòÁöÑÊï∞Â≠óÊàñËÄÖÁ©∫Ê†ºÊù•ÂØπÈΩêÔºå@emph{Á©∫ÁöÑÂüüÂàôÂÖ®ÊòØÁ©∫Ê†º}„ÄÇ
ÂæàÊòéÊòæÁöÑÔºå@command{awk} ÁöÑ‰∏ÄËà¨ÂüüÂàÜÂâ≤ÊòØÂü∫‰∫é @code{FS} ÁöÑÂÄºÔºå‰∏ç‰ºöÂú®ËøôÊ†∑ÁöÑ‰æãÂ≠ê‰∏≠Â∑•‰ΩúÂæóÂ•Ω„ÄÇ
Â∞ΩÁÆ°‰∏Ä‰∏™ÂèØÁßªÊ§çÁöÑ @command{awk} Á®ãÂ∫èÂèØ‰ª•‰ΩøÁî®‰∏ÄÁ≥ªÂàóÁöÑ @code{substr()} Ë∞ÉÁî®Êù•Â§ÑÁêÜ @code{$0}ÔºàÊü•Áúã @ref{String Functions}ÔºâÔºåÂú®Â§ÑÁêÜÊúâÂæàÂ§öÂüüÔºåÂπ∂‰∏îÊï∞ÊçÆÈáèÂ∑®Â§ßÊó∂ÔºåËøôÊòØ‰∏ÄÂæàËπ©ËÑö‰πü‰ΩéÊïàÁöÑÊñπÊ≥ï„ÄÇ

@cindex troubleshooting, fatal errors, field widths@comma{} specifying
@cindex @command{w} utility
@cindex @code{FIELDWIDTHS} variable
@cindex @command{gawk}, @code{FIELDWIDTHS} variable in
Â∞ÜËæìÂÖ•ËÆ∞ÂΩïÂàÜÂâ≤ÊàêÂõ∫ÂÆöÂÆΩÂ∫¶ÁöÑÂüüÔºåÈÄöËøáÊåáÂÆö‰∏Ä‰∏™ÂåÖÂê´Á©∫Ê†ºÂàÜÂâ≤ÁöÑÊï∞Â≠óÂà∞ÂÜÖÂª∫ÂèòÈáè @code{FIELDWIDTHS} Êù•ÂÆûÁé∞„ÄÇ
ÊØè‰∏Ä‰∏™Êï∞Â≠óË°®Á§∫‰∫ÜÂüüÁöÑÂÆΩÂ∫¶Ôºå@emph{ÂåÖÂê´}‰∫ÜÂüü‰πãÈó¥ÁöÑÂàó„ÄÇ
Â¶ÇÊûú‰Ω†ÊÉ≥ÂøΩÁï•Âüü‰πãÈó¥ÁöÑÂàóÔºåÂàôÂèØ‰ª•ÊåáÂÆöÂàÜÁ¶ªÁöÑÂüüÂÆΩÂ∫¶ÔºåÂàôÂêéÈù¢ÁöÑÂ§ÑÁêÜ‰ºöÂøΩÁï•ÊéâÂÆÉ„ÄÇÊåáÂÆö‰∏Ä‰∏™Ë¥üÁöÑÂüüÂÆΩÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇ
‰∏ãÈù¢ÁöÑÊï∞ÊçÆÊòØ Unix Â∑•ÂÖ∑ @command{w} ÁöÑËæìÂá∫„ÄÇËøô‰∏™Áî®Êù•ÊºîÁ§∫ @code{FIELDWIDTHS} ÁöÑ‰ΩøÁî®ÈùûÂ∏∏ÊúâÁî®Ôºö

@example
@group
 10:06pm  up 21 days, 14:04,  23 users
User     tty       login@  idle   JCPU   PCPU  what
hzuo     ttyV0     8:58pm            9      5  vi p24.tex
hzang    ttyV3     6:37pm    50                -csh
eklye    ttyV5     9:53pm            7      1  em thes.tex
dportein ttyV6     8:17pm  1:47                -csh
gierd    ttyD3    10:00pm     1                elm
dave     ttyD4     9:47pm            4      4  w
brent    ttyp0    26Jun91  4:46  26:46   4:41  bash
dave     ttyq4    26Jun9115days     46     46  wnewmail
@end group
@end example

‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰ΩøÁî®‰∏äÈù¢ÁöÑËæìÂÖ•ÔºåÂ∞ÜÁ©∫Èó≤Êó∂Èó¥ËΩ¨Êç¢‰∏∫ÁßíÊï∞ÔºåÂπ∂ÊâìÂç∞ËæìÂá∫Â§¥‰∏§‰∏™ÂüüÂπ∂ËÆ°ÁÆóÁ©∫Èó≤Êó∂Èó¥Ôºö

@example
BEGIN  @{ FIELDWIDTHS = "9 6 10 6 7 7 35" @}
NR > 2 @{
    idle = $4
    sub(/^ +/, "", idle)   # strip leading spaces
    if (idle == "")
        idle = 0
    if (idle ~ /:/) @{
        split(idle, t, ":")
        idle = t[1] * 60 + t[2]
    @}
    if (idle ~ /days/)
        idle *= 24 * 60 * 60

    print $1, $2, idle
@}
@end example

@quotation ÊèêÁ§∫
‰∏äÈù¢ÁöÑÁ®ãÂ∫è‰ΩøÁî®‰∫Ü‰∏Ä‰∫õ @command{awk} Êàë‰ª¨ÁõÆÂâçËøòÊ≤°ÊúâËÆ®ËÆ∫ÁöÑÁâπÊÄß„ÄÇ
@end quotation

ÊâßË°å‰∏äÈù¢ÁöÑÁ®ãÂ∫èÔºå‰∫ßÁîü‰∫ÜÂ¶Ç‰∏ãËæìÂá∫Ôºö

@example
hzuo      ttyV0  0
hzang     ttyV3  50
eklye     ttyV5  0
dportein  ttyV6  107
gierd     ttyD3  1
dave      ttyD4  0
brent     ttyp0  286
dave      ttyq4  1296000
@end example

Âè¶‰∏Ä‰∏™Âõ∫ÂÆöÂÆΩÂ∫¶ËæìÂÖ•Êï∞ÊçÆ‰æãÂ≠êÔºàÂèØËÉΩÊõ¥Â§çÊùÇÔºâÊòØÊù•Ëá™‰∫éÊäïÁ•®Á´ô„ÄÇ
Âú®ÁæéÂõΩÁöÑ‰∏Ä‰∫õÂú∞Âå∫ÔºåÊäïÁ•®ËÄÖ‰ºöÂ∞Ü‰ªñ‰ª¨ÁöÑÈÄâÊã©Âú®ËÆ°ÁÆóÊú∫Âç°‰∏äÊâì‰∏äÂ≠î„ÄÇ
ÁÑ∂ÂêéÂ§ÑÁêÜËøô‰∫õÂç°Ôºå‰ªéËÄåÁªüËÆ°ÁâπÂÆöÁöÑÂÄôÈÄâËÄÖÊàñËÄÖÁâπÂÆöÁöÑÈóÆÈ¢ò„ÄÇ
Áî±‰∫éÊäïÁ•®ËÄÖÂèØ‰ª•‰∏çÈÄâÊã©Êüê‰∫õÈóÆÈ¢òÔºåÂõ†Ê≠§Âç°‰∏äÁöÑÊüê‰∫õÂàóÂèØËÉΩÊòØÁ©∫ÁöÑ„ÄÇ
Â§ÑÁêÜËøôÁ±ªÊï∞ÊçÆÁöÑ @command{awk} Á®ãÂ∫èÂèØ‰ª•‰ΩøÁî® @code{FIELDWIDTHS} ÁâπÊÄßÊù•ÁÆÄÂåñÊï∞ÊçÆÁöÑËØªÂèñ„ÄÇ
ÔºàÂΩìÁÑ∂ÔºåËÆ© @command{gawk} ÈÄâÊã©Âú®ÈÄâ‰∏æÂç°ÈòÖËØªÂô®‰∏äÁöÑÁ≥ªÁªüÊòØÂè¶‰∏Ä‰∏™ÈóÆÈ¢òÔºÅÔºâ

@cindex @command{gawk}, splitting fields and
Âêë @code{FS} ËµãÂÄº‰ºöËÆ© @command{gawk} ‰ΩøÁî® @code{FS} Êù•ËøõË°åÂüüÂàÜÂâ≤„ÄÇ
‰ΩøÁî® @samp{FS = FS} Êù•ÂÆåÊàêËøôÊ†∑ÁöÑÂäüËÉΩÔºåËÄå‰∏çÈúÄË¶ÅÁü•ÈÅìÂΩìÂâçÁöÑ @code{FS} ÂÄº„ÄÇ
‰∏∫‰∫Ü‰∫ÜËß£ÂΩìÂâçÊ≠£Âú®‰ΩøÁî®ÁöÑÂüüÂàÜÂâ≤Á≠ñÁï•ÔºåÂèØ‰ª•‰ΩøÁî® @code{PROCINFO["FS"]}
ÔºàÊü•Áúã @ref{Auto-set}Ôºâ„ÄÇ
Â¶ÇÊûúÊòØÂ∏∏ËßÑÁöÑÂàÜÂâ≤Á≠ñÁï•ÔºåÂàôËøîÂõûÁöÑÂÄºÊòØ @code{"FS"}Ôºå
Â¶ÇÊûúÊòØÂõ∫ÂÆöÂÆΩÂ∫¶ÁöÑÂàÜÂâ≤Á≠ñÁï•ÂàôËøîÂõûÁöÑÊòØ @code{"FIELDWIDTHS"}Ôºö

@example
if (PROCINFO["FS"] == "FS")
    @var{regular field splitting} @dots{}
else if  (PROCINFO["FS"] == "FIELDWIDTHS")
    @var{fixed-width field splitting} @dots{}
else
    @var{content-based field splitting} @dots{} @ii{(see next @value{SECTION})}
@end example

ÂΩìË¶ÅÂÜô‰∏Ä‰∏™ÈúÄË¶Å‰∏¥Êó∂ÊîπÂèò @code{FS} ÊàñËÄÖ @code{FIELDWIDTHS} Á≠ñÁï•ÁöÑÂáΩÊï∞Êó∂Ôºå
Ëøô‰∏™ÂäüËÉΩÂàôÈùûÂ∏∏ÊúâÁî®„ÄÇËøô‰∏™ÂáΩÊï∞ËØª‰∏Ä‰∫õËÆ∞ÂΩïÂêéÔºåÁÑ∂ÂêéÊÅ¢Â§çÂàùÂßãÈÖçÁΩÆ
ÔºàÊü•Áúã @ref{Passwd Functions}ÔºåÊúâËøôÁßçÂáΩÊï∞ÁöÑ‰æãÂ≠êÔºâ„ÄÇ

@node Splitting By Content
@section ‰ª•ÂÜÖÂÆπÂÆö‰πâÂüü

@c O'Reilly doesn't like it as a note the first thing in the section.
Êú¨@value{SECTION}‰∏≠ÔºåËÆ®ËÆ∫‰∏Ä‰∏™ @command{gawk} ÁöÑÈ´òÁ∫ßÁâπÊÄß„ÄÇÂ¶ÇÊûú‰Ω†ÊòØ‰∏Ä @command{awk} Êñ∞ÊâãÔºåÁ¨¨‰∏ÄÊ¨°ÈòÖËØªÊó∂Ôºå‰Ω†ÂèØ‰ª•Ë∑ØËøáËøô‰∏ÄËäÇ„ÄÇ

@cindex advanced features, specifying field content
ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂΩì‰ΩøÁî® @code{FS} Á≠ñÁï•Êó∂Ôºå@command{gawk} Â∞ÜÂüüÂÆö‰πâ‰∏∫ËÆ∞ÂΩïÁöÑ‰∏ÄÈÉ®‰ªΩÔºåÂÆÉ‰ª¨Âá∫Áé∞Âú®ÊØè‰∏™ÂüüÂàÜÂâ≤Á¨¶‰πãÈó¥„ÄÇ
Êç¢Ë®Ä‰πãÔºå@code{FS} ÂÆö‰πâ‰∫ÜÂüü@emph{‰∏çÊòØ‰ªÄ‰πà}ÔºåËÄå‰∏çÊòØÂüü@emph{ÊòØ‰ªÄ‰πà}„ÄÇ
‰ΩÜÊòØÔºåÊúâÈÇ£‰πà‰∏Ä‰∫õÊó∂ÂÄôÔºå‰Ω†Á°ÆÂÆûÈúÄË¶ÅÊåâÁÖßÂüüÊòØ‰ªÄ‰πàÊù•ÂÆö‰πâÂÆÉ‰ª¨ÔºåËÄå‰∏çÊòØÂÆÉ‰ª¨‰∏çÊòØ‰ªÄ‰πàÊù•ÂÆö‰πâ„ÄÇ

ÊúÄËá≠ÁöÑ‰æãÂ≠êÂ∞±ÊòØÊâÄË∞ìÁöÑ@dfn{ÈÄóÂè∑ÂàÜÈöî}Êï∞ÊçÆÔºàCSVÔºâ„ÄÇ
ËÆ∏Â§öÁöÑË°®ÂçïÁ®ãÂ∫èÔºåÈÉΩÂèØ‰ª•Â∞Ü‰ªñ‰ª¨ÁöÑÊï∞ÊçÆËæìÂá∫‰∏∫ÊñáÊú¨Êñá‰ª∂Ôºå
Ëøô‰∫õËÆ∞ÂΩïÈÉΩ‰ª•Êç¢Ë°åÁ¨¶ÁªìÊùüÔºåÂêåÊó∂ÈÄöËøáÈÄóÂè∑ÂàÜÈöî„ÄÇ
Â¶ÇÊûúÂè™ÊúâÈÄóÂè∑Êù•ÂàÜÂâ≤Êï∞ÊçÆÔºåËøô‰∏™Â∞±‰∏çÊòØÈóÆÈ¢ò„ÄÇ
ÈóÆÈ¢òÊòØÔºåÂΩìÂÖ∂‰∏≠ÁöÑÊüê‰∏™Âüü‰∏≠@emph{Êúâ}ÈÄóÂè∑Êó∂„ÄÇ
Âú®ËøôÊ†∑ÁöÑÁä∂ÂÜµ‰∏ãÔºåÂ§ßÂ§öÊï∞ÊçÆÁöÑÁ®ãÂ∫èÈÉΩÂ∞ÜÂüüÁî®ÂèåÂºïÂè∑ÂºïËµ∑Êù•„ÄÇ
@footnote{CSV Ê†ºÂºèÁº∫‰πèÊ≠£ÂºèÁöÑÊ†áÂáÜÂÆö‰πâÂ§öÂπ¥Ôºå
@uref{http://www.ietf.org/rfc/rfc4180.txt, RFC 4180} Ê†áÂáÜÂåñ‰∫ÜÂ§öÊï∞ÁöÑÈÄöÁî®ÂÆûË∑µ„ÄÇ}
ÊâÄ‰ª•ÔºåÊàë‰ª¨ÂèØËÉΩÊúâÂ¶Ç‰∏ãËøôÊ†∑ÁöÑÊï∞ÊçÆÔºö

@example
@c file eg/misc/addresses.csv
Robbins,Arnold,"1234 A Pretty Street, NE",MyTown,MyState,12345-6789,USA
@c endfile
@end example

@cindex @command{gawk}, @code{FPAT} variable in
@cindex @code{FPAT} variable
@code{FPAT} ÂèòÈáè‰∏∫ËøôÊ†∑ÁöÑÈóÆÈ¢òÊèê‰æõ‰∫ÜËß£ÂÜ≥ÊñπÊ°à„ÄÇ@code{FPAT} ÁöÑÂÄºÂ∫îËØ•ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ≠ó‰∏≤„ÄÇËøô‰∏™Ë°®ËææÂºèÊèèËø∞‰∫ÜÊØè‰∏™ÂüüÁöÑÂÜÖÂÆπ„ÄÇ

Âú®‰∏äÈù¢ÊâÄÂàóÁöÑ CSV Êï∞ÊçÆ‰∏≠Ôºå
ÊØè‰∏™ÂüüË¶Å‰πàÊòØ‚Äú‰∏ÄÂàáÈÉΩ‰∏çÊòØÈÄóÂè∑Ôºå‚ÄùÊàñËÄÖ‚Äú‰∏Ä‰∏™ÂèåÂºïÂè∑Ôºå‰∏ÄÂàá‰∏çÊòØÂèåÂºïÂè∑Ôºå‰∏Ä‰∏™Èó≠ÂèåÂºïÂè∑„ÄÇ‚Äù
Â¶ÇÊûúÂÜôËøôÊ†∑ÁöÑ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºàÊü•Áúã @ref{Regexp}ÔºâÔºå
Êàë‰ª¨ÊúâËøôÊ†∑ÁöÑÊ≠£ÂàôË°®ËææÂºè @code{/([^,]+)|("[^"]+")/}„ÄÇ
ÊääËøô‰∏™Ê≠£ÂàôË°®ËææÂºè‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤ÔºåÈúÄË¶ÅÊàë‰ª¨ËΩ¨‰πâÂÖ∂‰∏≠ÁöÑÂèåÂºïÂè∑Ôºå‰∫éÊòØÂÆÉÂ∞±ÂèòÊàê‰∫ÜËøôÊ†∑Ôºö

@example
FPAT = "([^,]+)|(\"[^\"]+\")"
@end example

ÊòØÈ™°Â≠êÊòØÈ©¨ÔºåÊãâÂá∫Êù•Ê∫úÊ∫úÔºåËøôÊòØÊù•ÂàÜÊûê‰∏äÈù¢Êï∞ÊçÆÁöÑÁÆÄÂçïÁ®ãÂ∫èÔºö

@example
@c file eg/misc/simple-csv.awk
BEGIN @{
    FPAT = "([^,]+)|(\"[^\"]+\")"
@}

@{
    print "NF = ", NF
    for (i = 1; i <= NF; i++) @{
        printf("$%d = <%s>\n", i, $i)
    @}
@}
@c endfile
@end example

ÂΩìËøêË°åÊó∂ÔºåÊàë‰ª¨ÂèØ‰ª•ÂæóÂà∞‰∏ãÈù¢ÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f simple-csv.awk addresses.csv}
NF =  7
$1 = <Robbins>
$2 = <Arnold>
$3 = <"1234 A Pretty Street, NE">
$4 = <MyTown>
$5 = <MyState>
$6 = <12345-6789>
$7 = <USA>
@end example

Ê≥®ÊÑèÂê´Âú® @code{$3} ÈáåÁöÑÈÄóÂè∑„ÄÇ

ËøôÁßçÂ§ÑÁêÜ CSV Êï∞ÊçÆÁ±ªÂûãÁöÑÁõ¥Êé•ÊèêÂçáÊòØÂú®ÂèåÂºïÂè∑Âá∫Áé∞Êó∂Ôºå‰ºöËá™Âä®ÁßªÈô§ÂÆÉ‰ª¨ÔºåÂ¶ÇÂÉèËøôÊ†∑ÁöÑÔºö

@example
if (substr($i, 1, 1) == "\"") @{
    len = length($i)
    $i = substr($i, 2, len - 2)    # Get text within the two quotes
@}
@end example

‰∏é @code{FS} ‰∏ÄËµ∑Ôºå@code{IGNORECASE} ÂèòÈáè‰ºöÂΩ±Âìç @code{FPAT} Á±ªÂûãÁöÑÂüüÂàÜÂâ≤Á≠ñÁï•
ÔºàÊü•Áúã @ref{User-modified}Ôºâ„ÄÇ

Áªô @code{FPAT} ËµãÂÄºÔºå‰ºöË¶ÜÁõñ @code{FS} ‰∏é @code{FIELDWIDTHS} Á≠ñÁï•„ÄÇ
‰∏é @code{FIELDWIDTHS}, ‰∏≠ÁöÑ @code{PROCINFO["FS"]} ÁöÑÂÄºÁ±ª‰ººÔºå
Â¶ÇÊûúÈááÁî®ÁöÑÊòØÂü∫‰∫éÂÜÖÂÆπÁöÑÂüüÂàÜÂâ≤Á≠ñÁï•ÔºåÂÖ∂ÂÄºÂ∞ÜÊòØ @code{"FPAT"}„ÄÇ

@quotation ÊèêÁ§∫
Êúâ‰∏Ä‰∫õÁ®ãÂ∫èËæìÂá∫ÁöÑ CSV Êï∞ÊçÆ‰ºöÂåÖÂê´Êç¢Ë°åÁ¨¶Âú®ÂèåÂºïÂè∑‰πãÈó¥„ÄÇ
@command{gawk} Ê≤°ÂäûÊ≥ïÂ§ÑÁêÜËøô‰∏™ÈóÆÈ¢ò„ÄÇÂ∞±ÁÆóÊòØÁ¨¶Âè∑Ê≠£ËßÑÁöÑ CSV ËßÑËåÉÁöÑÊï∞ÊçÆÔºå‰πüÊó†ËÉΩ‰∏∫Âäõ„ÄÇ
@code{FPAT} Êú∫Âà∂‰∏∫Â§ßÂ§öÊï∞ÊÉÖÂΩ¢Êèê‰æõ‰∫Ü‰∏ÄÁßç‰ºòÈõÖÁöÑËß£ÂÜ≥ÊñπÊ≥ïÔºå@command{gawk} ÁöÑÂºÄÂèëËÄÖÂØπÊ≠§‰πüÈùûÂ∏∏Êª°ÊÑè„ÄÇ
@end quotation

Ê≠£Â¶ÇÊâÄÂÜôÁöÑÔºå@code{FPAT} ÊâÄ‰ΩøÁî®ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåË¶ÅÁ§∫ÊØè‰∏™ÂüüÂåÖÂê´Ëá≥Â∞ë‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇÁõ¥Êé•Êõ¥ÊîπÔºàÊõ¥ÊîπÁ¨¨‰∏Ä‰∏™ @samp{+} ‰∏∫ @samp{*}ÔºâÂÖÅËÆ∏ÂüüÂèØ‰∏∫Á©∫Ôºö

@example
FPAT = "([^,]*)|(\"[^\"]+\")"
@end example

@c FIXME: 4/2015
@c Consider use of FPAT = "([^,]*)|(\"[^\"]*\")"
@c (star in latter part of value) to allow quoted strings to be empty.
@c Per email from Ed Morton <mortoneccc@comcast.net>

ÊúÄÂêéÔºå@code{patsplit()} ÂáΩÊï∞‰πüÂÆûÁé∞Áõ∏ÂêåÁöÑÂäüËÉΩÔºå
Áî®Êù•ÂØπÂ∏∏ËßÑÁöÑÂ≠óÁ¨¶ËøõË°åÂàÜÂâ≤ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ

ÊÄªÁªì‰∏Ä‰∏ãÔºå@command{gawk} Êèê‰æõ‰∏âÁßçÁã¨Á´ãÁöÑÊñπÊ≥ïÊù•Â∞ÜËæìÂÖ•ËÆ∞ÂΩïÂàÜÂâ≤ÊàêËÆ∞ÂΩï„ÄÇ
Ëøô‰∫õÊú∫Âà∂ÈÄöËøá‰∏â‰∏™ÂèòÈáèÊù•ÂÆûÁé∞ÔºåÂç≥ @code{FS}Ôºå@code{FIELDWIDTHS}ÔºåÊàñËÄÖ @code{FPAT}Ôºå
Ë∞ÅÊúÄÂêéË¢´ËµãÂÄºÔºåÂàôÈááÁî®Áõ∏Â∫îÁöÑÂØπÂ∫îÁöÑÊú∫Âà∂„ÄÇ

@node Multiple Line
@section Â§öË°åËÆ∞ÂΩï

@cindex multiple-line records
@cindex records, multiline
@cindex input, multiline records
@cindex files, reading, multiline records
@cindex input, files, See input files
Âú®‰∏Ä‰∫õÊï∞ÊçÆ‰∏≠ÔºåÂçïË°åÊó†Ê≥ïÊñπ‰æøÂú∞ÂåÖÂê´ÊâÄÊúâÁöÑ‰ø°ÊÅØÂú®‰∏Ä‰∏™È°π‰∏≠„ÄÇÂú®ËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Â§öË°åËÆ∞ÂΩï„ÄÇÂÆûÁé∞Ëøô‰∏™ÊñπÂºèÁöÑÁ¨¨‰∏ÄÊ≠•ÊòØÈÄâÊã©‰Ω†ÁöÑÊï∞ÊçÆÊ†ºÂºè„ÄÇ

@cindex record separators, with multiline records
ÂÖ∂‰∏≠‰∏Ä‰∏™ÊäÄÂ∑ßÊòØ‰ΩøÁî®‰∏Ä‰∏™‰∏çÂ∏∏Áî®ÁöÑÂ≠óÁ¨¶ÊàñËÄÖÂ≠ó‰∏≤Êù•ÂàÜÂâ≤Êï∞ÊçÆ„ÄÇ
‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Êç¢È°µÁ¨¶ÔºàÂú® @command{awk} ‰∏≠ÂÜôÊàê @samp{\f}ÔºåÂêå C ËØ≠Ë®ÄÔºâÊù•ÂàÜÂâ≤‰ªñ‰ª¨Ôºå
‰ΩøÂæóÊØè‰∏™ËÆ∞ÂΩïÊòØÊñá‰ª∂‰∏≠ÁöÑ‰∏Ä‰∏™È°µ„ÄÇ
Êé•ÁùÄÔºåÂ∞ÜÂèòÈáè @code{RS} ÁöÑÂÄºËÆæÁΩÆÊàê @samp{\f}ÔºàÂè™ÂåÖÂê´‰∏Ä‰∏™Êç¢È°µÁ¨¶ÁöÑÂ≠ó‰∏≤Ôºâ„ÄÇ
‰ªªÊÑèÂÖ∂‰ªñÁöÑÂ≠óÁ¨¶‰πüÊòØÂèØ‰ª•Áî®ÁöÑÔºåÂè™Ë¶ÅÂÆÉ‰ª¨‰∏çÊòØËÆ∞ÂΩïÊï∞ÊçÆÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

@cindex @code{RS} variable, multiline records and
Âè¶‰∏Ä‰∏™ÊäÄÂ∑ßÊòØÁî®‰∏Ä‰∏™Á©∫Ë°åÊù•ÂàÜÈöîËÆ∞ÂΩïÔºåÁÑ∂ÂêéÈÄöËøá‰∏Ä‰∏™ÁâπÊÆäÁöÑÂÄºÔºåÂç≥‰∏Ä‰∏™Á©∫‰∏≤ËµãÂÄºÁªô @code{RS}Ôºå
‰ª•ÊèêÁ§∫ËÆ∞ÂΩïÊòØÈÄöËøá‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Á©∫Ë°åÊù•ËøõË°åÂàÜÈöîÁöÑ„ÄÇ
ÂΩì @code{RS} Ë¢´ËÆæÁΩÆÊàêÁ©∫‰∏≤ÔºåÊØèÊù°ËÆ∞ÂΩïÂ∞±ÊòØÁªìÊùü‰∫éÁ¨¨‰∏Ä‰∏™Á©∫Ë°å„ÄÇ‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÁõ¥Âà∞ÂêéÁª≠ÈÅáÂà∞ÁöÑÁ¨¨‰∏Ä‰∏™ÈùûÁ©∫Ë°åÂºÄÂßã„ÄÇ‰∏çÁÆ°Âú®Ë°å‰∏≠Âá∫Áé∞Â§öÂ∞ëÁ©∫Ë°åÔºåÂÆÉ‰ª¨ÈÉΩÂÆûÈôÖÂàÜÈöî‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇÔºàÁ©∫Ë°åÂøÖÈ°ªÊòØÂÆåÂÖ®Á©∫ÁöÑÔºåÂåÖÂê´Á©∫Ê†ºÁöÑ‰πü‰∏çÁÆó„ÄÇÔºâ

@cindex leftmost longest match
@cindex matching, leftmost longest
‰Ω†ÂèØ‰ª•ÈÄöËøáÂ∞Ü‰∏≤ @code{"\n\n+"} ËµãÂÄºÁªô @code{RS}ÔºåÂèñÂæó‰∏é @samp{RS = ""} ‰∏ÄÊ†∑ÁöÑÊïàÊûú„ÄÇ
Ëøô‰∏™Ê≠£ÂàôË°®ËææÂºèÂåπÈÖçËÆ∞ÂΩïÁªìÂ∞æ‰∏Ä‰∏™Âà∞Â§ö‰∏™Êç¢Ë°åÁ¨¶„ÄÇ
Âè¶Â§ñÔºåÊ≠£ÂàôË°®ËææÂºèÊÄªÊòØÂåπÈÖçÊúÄÈïøÁöÑÂèØËÉΩÂ∫èÂàóÔºàÊü•Áúã @ref{Leftmost Longest}Ôºâ„ÄÇ
Âõ†Ê≠§Ôºå‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÂºÄÂßã‰∫éÂêéÁª≠ÁöÑÁ¨¨‰∏Ä‰∏™ÈùûÁ©∫Ë°åÔºå‰∏çÁÆ°‰∏ÄË°å‰∏≠Âá∫Áé∞Â§öÂ∞ëÁöÑÁ©∫Ë°åÔºå‰ªñ‰ª¨ÈÉΩ‰ºöËÆ§‰∏∫ÊòØ‰∏Ä‰∏™ËÆ∞ÂΩïÂàÜÈöîÁ¨¶„ÄÇ

@cindex dark corner, multiline records
‰ΩÜÊòØÔºå@samp{RS = ""} ‰∏é @samp{RS = "\n\n+"} ‰∏§ËÄÖ‰πãÈó¥Êúâ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂ∑ÆÂà´„ÄÇ
Á¨¨‰∏Ä‰∏™ÊÉÖÂΩ¢‰∏ãÔºåËæìÂÖ•ÁöÑ@value{DF}ÁöÑÂâçÂØºÁ©∫Ë°å‰ºöË¢´ÂøΩÁï•ÔºåÂπ∂‰∏îÂ¶ÇÊûúÊñá‰ª∂ÁöÑÊúÄÂêé‰∏ÄÊù°ËÆ∞ÂΩïÂêéÈù¢Ê≤°ÊúâÈ¢ùÂ§ñÁöÑ‰∏Ä‰∏™Á©∫Ë°åÔºåÊúÄÂêéÁöÑÊç¢Ë°åÁ¨¶‰ºöË¢´‰ªéËÆ∞ÂΩï‰∏≠Âà†Èô§„ÄÇ‰ΩÜÊòØÂú®Á¨¨‰∫åÁßçÊÉÖÂÜµ‰∏ãÔºåËøô‰∏™ÁâπÊÆäÂ§ÑÁêÜËøáÁ®ã‰∏ç‰ºöÊâßË°å„ÄÇ
@value{DARKCORNER}

@cindex field separator, in multiline records
@cindex @code{FS}, in multiline records
Áé∞Âú®ÔºåËæìÂÖ•Â∑≤ÁªèË¢´ÂàÜÂâ≤ÊàêËÆ∞ÂΩïÔºåÁ¨¨‰∫åÊ≠•ÊòØÂ∞ÜËÆ∞ÂΩïÂàÜÂâ≤ÊàêÂüü„ÄÇ
‰∏ÄÁßçÊñπÊ≥ïÊòØÁî®ÈÄöÂ∏∏ÁöÑÊñπÂºèÊòØÂ∞ÜËÆ∞ÂΩïÂàÜÂâ≤ÊàêÂüü„ÄÇ
Âú®‰∏ãÈù¢ËøôÁßçÁâπÊÆäÊÉÖÂÜµ‰∏ãÔºåËøôÊòØ‰∏ÄÁßçÈªòËÆ§Â§ÑÁêÜÊñπÂºè„ÄÇ
ÂΩì @code{RS} Ë¢´ËÆæÁΩÆÊàê‰∫ÜÁ©∫‰∏≤Ôºå@emph{Âπ∂‰∏î} @code{FS} Ë¢´ËÆæÁΩÆÊàêÂçï‰∏™Â≠óÁ¨¶ÁöÑÊó∂ÂÄôÔºåÊç¢Ë°åÁ¨¶ÊÄªÊòØË¢´‰Ωú‰∏∫ÂüüÂàÜÈöîÁ¨¶„ÄÇ
Êó†ËÆ∫Áî± @code{FS} ÂàÜÂâ≤ÁöÑÁªìÊûúÊòØ‰ªÄ‰πàÔºåËøôÈÉΩ‰ºöË¢´Âä†ÂÖ•ÊúÄÁªàÁöÑÂüüÂàÜÂâ≤ÁªìÊûúÈáåÈù¢„ÄÇ
@footnote{ÂΩì @code{FS} ‰∏∫Á©∫‰∏≤Ôºà@code{""}ÔºâÊàñËÄÖÊ≠£ÂàôË°®ËææÂºèÔºå
Ëøô‰∏™ÁâπÊÆäÁöÑÁâπÊÄßÊ≤°ÊúâÂ∫îÁî®Âú® @code{RS} ‰∏≠„ÄÇ
‰ΩÜÊòØÂç¥ÂèØ‰ª•Â∫îÁî®Âú®ÂΩìÂüüÂàÜÈöîÁ¨¶‰∏∫ÈªòËÆ§Á©∫Ê†ºÊó∂Ôºö@samp{FS = @w{" "}} ÊÉÖÂÜµ‰∏≠„ÄÇ}

Ëøô‰∏™ÁâπÊÆäÁöÑ‰æãÂ§ñÁöÑÂéüÂßãÂä®Êú∫ÂèØËÉΩÊòØ‰∏∫‰∫ÜÊèê‰æõÂú®ÈªòËÆ§Âú∫ÊôØ‰∏ãÊúâÁî®ÁöÑË°å‰∏∫Ôºà‰æãÂ¶Ç @code{FS} Á≠â‰∫é @w{@code{" "}} Êó∂Ôºâ„ÄÇÂΩì
‰Ω†Á°ÆÂÆû‰∏çÊÉ≥Áî®Êç¢Ë°åÁ¨¶Êù•ÂàÜÈöîÂüüÊó∂ÔºåËøô‰∏™ÁâπÊÄßÂèØËÉΩÂ∞±‰ºöÊúâÈóÆÈ¢òÔºåÂõ†‰∏∫Ê≤°ÊúâÊñπÊ≥ïÂèØ‰ª•ÈÅøÂÖçÂÆÉ„ÄÇ
‰ΩÜÊòØÔºå‰Ω†ÂèØ‰ª•ÈÄöËøá @code{split()} ÂáΩÊï∞Êù•ÊâãÂ∑•ÂàÜËß£ËÆ∞ÂΩïÊù•‰øÆÂ§çËøô‰∏™ÈóÆÈ¢ò
ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
Â¶ÇÊûú‰Ω†Êúâ‰∏Ä‰∏™ÂçïÂ≠óÁ¨¶ÁöÑÂüüÂàÜÈöîÁ¨¶Ôºå‰Ω†ÂèØ‰ª•Áî®Âè¶Â§ñ‰∏ÄÁßçÊñπÂºèÊù•Ëß£ÂÜ≥Ëøô‰∏™ÁâπÊÄßÂ∏¶Êù•ÁöÑÈóÆÈ¢òÔºåÂè™ÈúÄË¶ÅÂ∞Ü @code{FS} ËÆæÁΩÆÊàêËøô‰∏™ÂçïÂ≠óÁ¨¶ÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ
‰æãÂ¶ÇÔºåÂ¶ÇÊûúÂüüÂàÜÈöîÁ¨¶ÊòØ‰∏Ä‰∏™ÁôæÂè∑ÔºåË¶Å‰ΩøÁî® @samp{FS = "%"}ÔºåËÄå‰∏çË¶Å‰ΩøÁî® @samp{FS = "[%]"}„ÄÇ

ÂØπÂüüËøõË°åÂàÜÂâ≤ÁöÑÂè¶Â§ñ‰∏Ä‰∏™ÊñπÊ≥ïÊòØÂ∞ÜÊØè‰∏™ÂüüÊîæÂú®‰∏Ä‰∏™Ë°å‰∏≠Ôºö‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩÔºåÂè™ÈúÄË¶ÅÂ∞ÜÂèòÈáè @code{FS} ËÆæÁΩÆÊàêÂ≠ó‰∏≤ @code{"\n"}„ÄÇ
ÔºàËøô‰∏™ÂçïÂ≠óÁ¨¶ÂàÜÈöîÁ¨¶ÂåπÈÖç‰∏Ä‰∏™Êç¢Ë°åÁ¨¶„ÄÇÔºâ‰∏Ä‰∏™ÂÆûÈôÖÁöÑ‰ª•ËøôÁßçÊñπÂºèËøõË°åÁªÑÁªáÁöÑ@value{DF}ÂèØËÉΩÂ∞±ÊòØÈÇÆ‰ª∂ÂàóË°®Ôºå
Âú®Ëøô‰∏™ÂàóË°®‰∏≠ÔºåÁ©∫Ë°åÁî®Êù•ÂàÜÈöîÈ°πÁõÆ„ÄÇËÄÉËôë‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ @file{addresses} ÁöÑÈÇÆ‰ª∂ÂàóË°®ÔºåÁúãËµ∑Êù•ÂÉè‰∏ãÈù¢ËøôÊ†∑Ôºö

@example
Jane Doe
123 Main Street
Anywhere, SE 12345-6789

John Smith
456 Tree-lined Avenue
Smallville, MW 98765-4321
@dots{}
@end example

@noindent
‰∏ãÈù¢ÂàôÊòØ‰∏Ä‰∏™Â§ÑÁêÜËØ•Êñá‰ª∂ÁöÑÁÆÄÂçïÁöÑÁ®ãÂ∫èÔºö

@example
# addrs.awk --- simple mailing list program

# Records are separated by blank lines.
# Each line is one field.
BEGIN @{ RS = "" ; FS = "\n" @}

@{
      print "Name is:", $1
      print "Address is:", $2
      print "City and State are:", $3
      print ""
@}
@end example

ÊâßË°åÂêéÔºå‰∫ßÁîüÂ¶Ç‰∏ãÁöÑËæìÂá∫Ôºö

@example
$ @kbd{awk -f addrs.awk addresses}
@print{} Name is: Jane Doe
@print{} Address is: 123 Main Street
@print{} City and State are: Anywhere, SE 12345-6789
@print{}
@print{} Name is: John Smith
@print{} Address is: 456 Tree-lined Avenue
@print{} City and State are: Smallville, MW 98765-4321
@print{}
@dots{}
@end example

Âú® @ref{Labels Program}ÔºåÊü•Áúã‰∏Ä‰∏™Êõ¥ÂÆûÈôÖÁöÑÁ®ãÂ∫èÊù•Â§ÑÁêÜÈÇÆ‰ª∂ÂàóË°®„ÄÇ
‰∏ãÈù¢ÁöÑÂàóË°®ÊÄªÁªì‰∫ÜËÆ∞ÂΩïÂü∫‰∫é 
@ifinfo
@code{RS}
Ôºà@samp{==} ÁöÑÊÑèÊÄùÊòØ‚ÄúÁ≠â‰∫é‚ÄùÔºâ
@end ifinfo
@ifnotinfo
@code{RS}
@end ifnotinfo
 ÁöÑÂÄºÁöÑËÆ∞ÂΩïÂàÜÂâ≤ÊñπÂºèÔºö

@table @code
@item RS == "\n"
ËÆ∞ÂΩïÈÄöËøáÊç¢Êù•Á¨¶Êù•ËøõË°åÂàÜÂâ≤Ôºà@samp{\n}Ôºâ„ÄÇ
Âú®ÊïàÊûú‰∏äÔºå@value{DF}‰∏≠ÁöÑÊØè‰∏ÄË°åÈÉΩÊòØ‰∏Ä‰∏™ËÆ∞ÂΩïÔºåÂåÖÊã¨Á©∫Ë°å„ÄÇËøôÊòØÈªòËÆ§Ë°å‰∏∫„ÄÇ

@item RS == @var{‰ªªÊÑèÂçïÁã¨Â≠óÁ¨¶}
ËÆ∞ÂΩïÈÄöËøáÂ≠óÁ¨¶Êù•ËøõË°åÂàÜÂâ≤„ÄÇÂ§ö‰∏™ËøûÁª≠ÁöÑÂ≠óÁ¨¶‰ºöÂàÜÂâ≤Âá∫Á©∫ËÆ∞ÂΩï„ÄÇ

@item RS == ""
ËÆ∞ÂΩïÈÄöËøá‰∏ÄËøû‰∏≤ÁöÑÁ©∫Ë°åËøõË°åÂàÜÂâ≤„ÄÇÂΩì @code{FS} ÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠óÁ¨¶Êó∂ÔºåÂàôÊç¢Ë°åÁ¨¶ÊÄª‰ºöË°®Áé∞‰∏∫ÂüüÂàÜÈöîÁ¨¶Ôºå
‰∏çÁÆ° @code{FS} Êúâ‰ªÄ‰πàÊ†∑ÁöÑÂÄº„ÄÇÊñá‰ª∂ÁöÑÂ§¥Â∞æÁöÑÊç¢Ë°åÁ¨¶‰ºöË¢´ÂøΩÁï•Êéâ„ÄÇ

@item RS == @var{regexp}
ËÆ∞ÂΩïÈÄöËøáÂåπÈÖç @var{regexp} Ê≠£ÂàôË°®ËææÂºèÁöÑÂ≠óÁ¨¶‰∏≤Êù•ËøõË°åÂàÜÂâ≤„ÄÇ
Êñá‰ª∂Â§¥Â∞æÁöÑÁ©∫Ë°å‰ºöÂàÜÂâ≤Âá∫Á©∫ÁöÑËÆ∞ÂΩï„ÄÇÔºàËøôÊòØ @command{gawk} ÁöÑÊâ©Â±ïÔºõÂú® POSIX ‰∏≠Ê≤°ÊúâÂØπËøôÁßçÊÉÖÂΩ¢ËøõË°åÂÆö‰πâ„ÄÇÔºâ
@end table

@cindex @command{gawk}, @code{RT} variable in
@cindex @code{RT} variable
Â¶ÇÊûú‰∏çÊòØÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºå
@command{gawk} ËÆæÁΩÆ @code{RT} ÁöÑÂÄº‰∏∫ËæìÂÖ•Êï∞ÊçÆ‰∏≠ÂåπÈÖçÁî± @code{RS} ÊåáÂÆöÁöÑÂÄºÁöÑÊñáÊú¨„ÄÇ
‰ΩÜÊòØÔºåÂ¶ÇÊûúËæìÂÖ•Êñá‰ª∂ÁªìÊùüËæìÂÖ•ËÄåÊ≤°ÊúâÂåπÈÖç @code{RS}ÔºåÂàô @command{gawk} ‰ºöÂ∞Ü @code{RT} ÁöÑÂÄºËÆæÁΩÆÊàêÁ©∫‰∏≤„ÄÇ

@node Getline
@section Áî® @code{getline} ËæìÂÖ•Êï∞ÊçÆ

@cindex @code{getline} command, explicit input with
@cindex input, explicit
Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÊàë‰ª¨ÈÉΩÊòØ‰ªé @command{awk} ÁöÑ‰∏ªË¶ÅËæìÂÖ•ÊµÅ‰∏≠Ëé∑ÂèñÊï∞ÊçÆÔºå
Ë¶Å‰πàÊòØÊ†áÂáÜËæìÂÖ•ÔºàÈÄöÂ∏∏ÊòØ‰Ω†ÁöÑÈîÆÁõòÔºåÊúâÊó∂ÊòØÂÖ∂‰ªñÁ®ãÂ∫èÁöÑËæìÂá∫ÔºâÊàñËÄÖÈÄöËøáÂëΩ‰ª§Ë°åÊåáÂÆöÁöÑÊñá‰ª∂„ÄÇ
@command{awk} ËØ≠Ë®ÄÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÂÜÖÂª∫ÂëΩ‰ª§ @code{getline} ÂèØ‰ª•Áî®Êù•ÊòæÂºèÂú∞Âú®‰Ω†ÁöÑÊéßÂà∂‰∏ãËØªÂèñËæìÂÖ•„ÄÇ

@code{getline} ÂëΩ‰ª§ÊúâÂá†Áßç‰∏çÂêåÁöÑ‰ΩøÁî®ÊñπÂºèÔºåÂπ∂‰∏îÂàùÂ≠¶ËÄÖÊúÄÂ•Ω@emph{‰∏çË¶Å}‰ΩøÁî®„ÄÇ
‰∏ãÈù¢ÁöÑ @code{getline} ‰ΩøÁî®‰æãÂ≠ê‰ª•ÂèäÁõ∏Â∫îÁöÑËß£ÈáäÂåÖÊã¨‰∫Ü‰∏Ä‰∫õÁõÆÂâçËøòÊ≤°ÊúâÊ∂âÂèäÁöÑÁü•ËØÜ„ÄÇ
Âõ†Ê≠§ÔºåÂΩì‰Ω†ÈòÖËØª‰∫Ü
@ifinfo
Êú¨@value{DOCUMENT}
@end ifinfo
@ifhtml
Êú¨@value{DOCUMENT}
@end ifhtml
@ifnotinfo
@ifnothtml
ÁöÑÁ¨¨‰∏Ä„ÄÅ‰∫åÈÉ®ÂàÜ
@end ifnothtml
@end ifnotinfo
ÁöÑÂâ©‰∏ãÁöÑÈÉ®ÂàÜ@emph{‰πãÂêé}ÔºåÂÜçÂõûËøáÂ§¥Êù•Â≠¶‰π† @code{getline} Ôºå
Âàô‰Ω†‰ºöÊõ¥‰∫ÜËß£ @command{awk} ÊòØÂ¶Ç‰ΩïËøõË°åÂ∑•‰ΩúÁöÑ„ÄÇ

@cindex @command{gawk}, @code{ERRNO} variable in
@cindex @code{ERRNO} variable, with @command{getline} command
@cindex differences in @command{awk} and @command{gawk}, @code{getline} command
@cindex @code{getline} command, return values
@cindex @option{--sandbox} option, input redirection with @code{getline}

@code{getline} ÂëΩ‰ª§Êü•ÁúãÂà∞‰∏Ä‰∏™ËÆ∞ÂΩïÊó∂ÂàôËøîÂõû 1Ôºå Â¶ÇÊûúÈÅáÂà∞Êñá‰ª∂ÁªìÊùüÊó∂ÂàôËøîÂõû 0„ÄÇ
Â¶ÇÊûúÂú®ËØªÂèñÊï∞ÊçÆÊó∂ÂèëÁîü‰∫ÜÈîôËØØÔºåÂ¶ÇÊñá‰ª∂‰∏çËÉΩË¢´ÊâìÂºÄÔºåÂàô @code{getline} ËøîÂõû @minus{}1„ÄÇ
Âú®Ëøô‰∏™ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} Â∞ÜÂèòÈáè @code{ERRNO} ÁöÑÂÄºËÆæÁΩÆÊàêÊâÄÈÅáÂà∞ÁöÑÈîôËØØÁöÑÊèèËø∞Â≠ó‰∏≤„ÄÇ

Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå@var{command} ‰ª£Ë°® shell ÂëΩ‰ª§ÁöÑÂ≠ó‰∏≤ÂÄº„ÄÇ

@quotation ÊèêÁ§∫
ÂΩì @option{--sandbox} ÊåáÂÆöÊó∂ÔºàÊü•Áúã @ref{Options}ÔºâÔºå‰ªéÊñá‰ª∂ÔºåÁÆ°ÈÅìÊàñËÄÖÂπ∂Á®ã ‰∏≠ËØªÂèñË°åÊï∞ÊçÆÊòØË¢´Á¶ÅÊ≠¢ÁöÑ„ÄÇ
@end quotation

@menu
* Plain Getline::               Using @code{getline} with no arguments.
* Getline/Variable::            Using @code{getline} into a variable.
* Getline/File::                Using @code{getline} from a file.
* Getline/Variable/File::       Using @code{getline} into a variable from a
                                file.
* Getline/Pipe::                Using @code{getline} from a pipe.
* Getline/Variable/Pipe::       Using @code{getline} into a variable from a
                                pipe.
* Getline/Coprocess::           Using @code{getline} from a coprocess.
* Getline/Variable/Coprocess::  Using @code{getline} into a variable from a
                                coprocess.
* Getline Notes::               Important things to know about @code{getline}.
* Getline Summary::             Summary of @code{getline} Variants.
@end menu

@node Plain Getline
@subsection ‰∏çÂ∏¶ÂèÇÊï∞Ë∞ÉÁî® @code{getline}

@code{getline} ÂëΩ‰ª§ÂèØ‰ª•‰∏çÂ∏¶ÂèÇÊï∞Êù•‰ªéÂΩìÂâçÊñá‰ª∂‰∏≠ËØªÂèñËæìÂÖ•„ÄÇ
Âú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåÂ∞±ÊòØËØªÂèñ‰∏ã‰∏Ä‰∏™ËæìÂÖ•ËÆ∞ÂΩïÂπ∂Â∞ÜÂÖ∂ÂàÜÂâ≤‰∏∫Âüü„ÄÇÂΩì‰Ω†Â∑≤ÁªèÂÆåÊàêÂΩìÂâçËÆ∞ÂΩïÁöÑÂ§ÑÁêÜÔºå
‰ΩÜÊòØÂØπ‰∫é‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÊÉ≥@emph{È©¨‰∏ä}ÂÅö‰∏Ä‰∫õÂ§ÑÁêÜÁöÑÊÉÖÂÜµ‰∏ãÈùûÂ∏∏ÊúâÁî®„ÄÇ‰æãÂ¶ÇÔºö

@example
# Remove text between /* and */, inclusive
@{
    if ((i = index($0, "/*")) != 0) @{
        out = substr($0, 1, i - 1)  # leading part of the string
        rest = substr($0, i + 2)    # ... */ ...
        j = index(rest, "*/")       # is */ in trailing part?
        if (j > 0) @{
            rest = substr(rest, j + 2)  # remove comment
        @} else @{
            while (j == 0) @{
                # get more text
                if (getline <= 0) @{
                    print("unexpected EOF or error:", ERRNO) > "/dev/stderr"
                    exit
                @}
                # build up the line using string concatenation
                rest = rest $0
                j = index(rest, "*/")   # is */ in trailing part?
                if (j != 0) @{
                    rest = substr(rest, j + 2)
                    break
                @}
            @}
        @}
        # build up the output line using string concatenation
        $0 = out rest
    @}
    print $0
@}
@end example

@c 8/2014: Here is some sample input:
@ignore
mon/*comment*/key
rab/*commen
t*/bit
horse /*comment*/more text
part 1 /*comment*/part 2 /*comment*/part 3
no comment
@end ignore

Ëøô‰∏™ @command{awk} Á®ãÂ∫è‰ªéËæìÂÖ•‰∏≠Âà†Èô§ C È£éÊ†ºÁöÑÊ≥®ÈáäÔºà@samp{/* @dots{} */}Ôºâ„ÄÇ
ÂÖ∂‰∏≠Áî®Âà∞ÁöÑ‰∏Ä‰∫õÁâπÊÄßÊàë‰ª¨ËøòÊ≤°ÊúâËÆ≤Âà∞ÔºåÂåÖÊã¨Â≠ó‰∏≤ÂêàÂπ∂
ÔºàÊü•Áúã @ref{Concatenation}ÔºâÔºå
‰ª•Âèä @code{index()}Ôºå@code{substr()} ÂÜÖÂª∫ÂáΩÊï∞Á≠â
ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
ÈÄöËøáÊõøÊç¢ @samp{print $0} ‰∏∫ÂÖ∂‰ªñÁöÑËØ≠Âè•Ôºå‰Ω†ÂèØ‰ª•ÊâßË°åÊõ¥‰∏∫Â§çÊùÇÁöÑ‰ªéËæìÂÖ•‰∏≠Âà†Èô§Ê≥®ÈáäÁöÑÂ§ÑÁêÜÔºå‰æãÂ¶ÇÊêúÁ¥¢Ê≠£ÂàôË°®ËææÂºèÁ≠â„ÄÇ
ÔºàËøô‰∏™Á®ãÂ∫èÊúâ‰∏Ä‰∏™ÂæàÂæÆÂ∞èÁöÑÁªÜËäÇ‚Äî‚ÄîÂ∞±ÊòØÂ¶ÇÊûú‰∏Ä‰∏™Ê≥®ÈáäÂú®Êú¨Ë°åÁªìÊùüÔºåÂêåÊó∂Âú®Âêå‰∏ÄË°åÂèàÂºÄÂêØÂè¶‰∏Ä‰∏™Ê≥®ÈáäÔºåËøô‰∏™Á®ãÂ∫è‰∏ç‰ºöÁîüÊïà„ÄÇÔºâ

ËøôÁßç‰ΩøÁî® @code{getline} ÁöÑÊñπÂºèÔºå‰ºöËÆæÁΩÆ @code{$0} ÁöÑ @code{NF}Ôºå@code{NR}Ôºå@code{FNR}Ôºå@code{RT} ÂèòÈáè„ÄÇ

@quotation ÊèêÁ§∫
@code{$0} ÁöÑÊñ∞ÂÄºÁî®‰∫éÊµãËØïÊé•ÊâÄÊúâÊé•‰∏ãÊù•ÁöÑÊ®°Âºè„ÄÇ
@code{$0} Âú®Ëß¶ÂèëÊâßË°å @code{getline} Ë∞ÉÁî®ÁöÑËßÑÂàôÁöÑÊúÄÂàùÂßãÂ∞±‰ºö‰∏¢Â§±„ÄÇ
Âè¶‰∏ÄÊñπÈù¢Ôºå@code{next} ËØ≠Âè•ËØªÂèñ‰∏Ä‰∏™Êñ∞ÁöÑËÆ∞ÂΩïÔºåÂπ∂‰∏îÁ´ãÂç≥‰ªéÁ®ãÂ∫è‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ËßÑÂàôÂºÄÂßãÂ§ÑÁêÜÂÆÉ„ÄÇ
Êü•Áúã @ref{Next Statement}„ÄÇ
@end quotation
@node Getline/Variable
@subsection Â∞Ü @code{getline} ËµãÂÄºÁªôÂèòÈáè
@cindex @code{getline} into a variable
@cindex variables, @code{getline} command into@comma{} using

‰Ω†‰πüÂèØ‰ª•‰ΩøÁî® @samp{getline @var{var}} Â∞Ü‰ªé @command{awk} ÁöÑËæìÂÖ•ÁöÑ‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáè„ÄÇ
ËøôÊ≤°ÊúâÂÅö‰ªª‰ΩïÈíàÂØπÊï∞ÊçÆÁöÑÂ§ÑÁêÜ„ÄÇ‰æãÂ¶ÇÔºåÂÅáËÆæ‰∏ã‰∏ÄË°åÊòØ‰∏Ä‰∏™Ê≥®ÈáäÊàñËÄÖ‰∏Ä‰∏™ÁâπÊÆäÂ≠ó‰∏≤Ôºå‰Ω†ÊÉ≥ËØªÂèñÂÆÉÁöÑÂêåÊó∂Ôºå‰∏çËß¶Âèë‰ªª‰ΩïËßÑÂàô„ÄÇ
ËøôÁßçÂΩ¢ÂºèÁöÑ @code{getline} Ë∞ÉÁî®ÂèØ‰ª•ËÆ©‰Ω†ËØªÂèñË°åÂπ∂‰∏îÂ∞ÜÂÖ∂Â≠òÂú®‰∏Ä‰∏™ÂèòÈáè‰∏≠Ôºå
Âõ†Ê≠§Ôºå‰∏ªÂæ™ÁéØ‰∏≠ read-a-line-and-check-each-ruleÔºàËØªÂèñ‰∏ÄË°åÂπ∂Ê£ÄÊü•ÊØè‰∏™ËßÑÂàôÔºâÁöÑ @command{awk} Âæ™ÁéØÂ∞±Áúã‰∏çÂà∞Ëøô‰∏™ËÆ∞ÂΩï‰∫Ü„ÄÇ
‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∫§Êç¢ËæìÂÖ•‰∏≠ÁöÑ‰∏§Ë°åÔºö

@example
@{
     if ((getline tmp) > 0) @{
          print tmp
          print $0
     @} else
          print $0
@}
@end example

@noindent
‰æãÂ≠ê‰∏≠‰ΩøÁî®‰∏ãÈù¢ÁöÑËæìÂÖ•Ôºö

@example
wan
tew
free
phore
@end example

@noindent
Âπ∂‰∫ßÁîüÂ¶Ç‰∏ãÁöÑÁªìÊûúÔºö

@example
tew
wan
phore
free
@end example

Ëøô‰πà‰ΩøÁî® @code{getline} ÂëΩ‰ª§‰ªÖËÆæÁΩÆÂèòÈáè @code{NR}Ôºå@code{FNR} ‰ª•Âèä @code{RT}ÔºàÂΩìÁÑ∂ËøòÊúâÂèòÈáè @var{var}Ôºâ„ÄÇ
ËÆ∞ÂΩï‰∏ç‰ºöË¢´ÂàÜÂâ≤ÊàêÂüüÔºåÂõ†Ê≠§ÂüüÁöÑÂÄºÔºàÂåÖÊã¨ @code{$0}Ôºâ‰ª•Âèä @code{NF} ÁöÑÂÄºÈÉΩ‰∏ç‰ºöÊîπÂèò„ÄÇ

@node Getline/File
@subsection ‰ΩøÁî® @code{getline} ËØªÂèñÊñá‰ª∂

@cindex @code{getline} from a file
@cindex input redirection
@cindex redirection of input
@cindex @code{<} (left angle bracket), @code{<} operator (I/O)
@cindex left angle bracket (@code{<}), @code{<} operator (I/O)
@cindex operators, input/output
‰ΩøÁî® @samp{getline < @var{file}} Êù•‰ªé @var{file} ‰∏≠ËØªÂèñËÆ∞ÂΩï„ÄÇ
Âú®ËøôÈáåÔºå@var{file} ÊòØ‰∏Ä‰∏™Ê±ÇÂÄº‰∏∫Â≠ó‰∏≤ÁöÑË°®ËææÂºèÔºåÂπ∂Áî®ÂÖ∂ÊåáÂÆö@value{FN}„ÄÇ
@samp{< @var{file}} Áß∞‰∏∫ÈáçÂÆöÂêëÔºåÂõ†‰∏∫ÂÆÉÂ∞ÜËæìÂÖ•ÂÆöÂêë‰∏∫Âè¶‰∏Ä‰∏™‰∏çÂêåÁöÑ‰ΩçÁΩÆ„ÄÇ
‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂΩìÂÆÉÈÅáÂà∞‰ªéÂΩìÂâçËæìÂÖ•Êñá‰ª∂ËæìÂÖ•ÁöÑËÆ∞ÂΩï‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂüüÁöÑÂÄº‰∏∫ 10 Êó∂Ôºå
Âàô‰ªéÊñá‰ª∂ @file{secondary.input} ‰∏≠ËØªÂèñËæìÂÖ•ËÆ∞ÂΩïÔºö
Here, @var{file} is a string-valued expression that

@example
@{
    if ($1 == 10) @{
         getline < "secondary.input"
         print
    @} else
         print
@}
@end example

Áî±‰∫é‰∏ªËæìÂÖ•ÊµÅÊ≤°ÊúâË¢´‰ΩøÁî®ÔºåÂèòÈáè @code{NR} ‰ª•Âèä @code{FNR} ÁöÑÂÄºÊòØ‰∏ç‰ºöÊîπÂèòÁöÑ„ÄÇ‰ΩÜÊòØÔºåÂÆÉÊâÄËØªÂèñÁöÑËÆ∞ÂΩï‰ºöË¢´Ê≠£Â∏∏Âú∞ÂàÜÂâ≤ÊàêÂüüÔºå
Âõ†Ê≠§ @code{$0} ‰ª•ÂèäÂÖ∂‰ªñÂüüÁöÑÂÄºÊòØ‰ºöÊîπÂèòÁöÑÔºåÂõ†Ê≠§ÂØºËá¥ @code{NF} ‰∏é @code{RT} ÁöÑÂÄºÊòØ‰ºöÊîπÂèòÁöÑ„ÄÇ

@cindex POSIX @command{awk}, @code{<} operator and
@c Thanks to Paul Eggert for initial wording here
Ê†πÊçÆ POSIX Ê†áÂáÜÔºå@samp{getline < @var{expression}} Â¶ÇÊûú @samp{$} ‰∏≠ÂåÖÂê´Êú™Êã¨Ëµ∑Êù•ÁöÑÈô§ @samp{$} ÁöÑÊìç‰ΩúÁ¨¶Êó∂Ôºå
Âàô‰ºö‰∫ßÁîüÊ≠ß‰πâ„ÄÇ‰æãÂ¶Ç @samp{getline < dir "/" file} Â∞±ÊòØÊúâÊ≠ß‰πâÁöÑÔºåÂõ†‰∏∫ËøûÊé•Êìç‰ΩúÁ¨¶
ÔºàËøòÊú™ËÆ®ËÆ∫Âà∞ÔºåÊü•Áúã @ref{Concatenation}ÔºâÊòØÊ≤°ÊúâË¢´Êã¨Ëµ∑Êù•ÁöÑ„ÄÇ
Â¶ÇÊûú‰Ω†ÁöÑÁ®ãÂ∫èË¶ÅËÉΩÂ§üÁßªÊ§çÂà∞ÊâÄÊúâÁöÑ @command{awk} ÂÆûÁé∞‰∏≠Ôºå‰Ω†Â∫îËØ•Ëøô‰πàÂÜô @samp{getline < (dir "/" file)}„ÄÇ

@node Getline/Variable/File
@subsection ‰ªéÊñá‰ª∂‰∏≠ @code{getline} Âà∞ÂèòÈáè
@cindex variables, @code{getline} command into@comma{} using

‰ΩøÁî® @samp{getline @var{var} < @var{file}} Êù•‰ªéÊñá‰ª∂ @var{file} ‰∏≠ËØªÂèñËæìÂÖ•Ôºå
Âπ∂‰∏îÂ∞ÜÂÖ∂Â≠òÊîæÂú®ÂèòÈáè @var{var} ‰∏≠„ÄÇÂ¶ÇÂâçÊâÄÁ§∫ÔºåÊñá‰ª∂ @var{file} ÊòØ‰∏Ä‰∏™Ê±ÇÂÄº‰∏∫Â≠ó‰∏≤ÁöÑÂèòÈáèÔºåÁªìÊûú‰∏≠ÂåÖÊã¨Ë¶ÅË¢´ËØªÂèñÁöÑÊñá‰ª∂„ÄÇ

Âú®Ëøô‰∏™ÁâàÊú¨ÁöÑ @code{getline} ‰∏≠ÔºåÊ≤°Êúâ‰∏Ä‰∏™È¢ÑÂÆö‰πâÁöÑÂèòÈáè‰ºöÊîπÂèòÔºåËÆ∞ÂΩï‰πü‰∏ç‰ºöË¢´ÂàÜÂâ≤ÊàêÂüü„ÄÇ
ÂîØ‰∏ÄÊîπÂèòÁöÑÂ∞±ÊòØ @var{var} ÂèòÈáè„ÄÇ
@footnote{Ëøô‰∏™‰∏çÂ§™ÊòØËøô‰πàÂõû‰∫ã„ÄÇ@code{RT} Âú® @code{RS} ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊó∂ÂèØËÉΩ‰ºöÊîπÂèò„ÄÇ}
‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂ§çÂà∂ÊâÄÊúâÁöÑËæìÂÖ•Êñá‰ª∂Âà∞ËæìÂá∫ÔºåÈô§‰∫ÜÂ¶ÇÊûúËÆ∞ÂΩïÂÜÖÂÆπ‰∏∫ @w{@samp{@@include @var{filename}}}„ÄÇ
ËøôÊ†∑ÁöÑËÆ∞ÂΩï‰ºöË¢´Êñá‰ª∂ @var{filename} ÊõøÊç¢Ôºö

@example
@{
     if (NF == 2 && $1 == "@@include") @{
          while ((getline line < $2) > 0)
               print line
          close($2)
     @} else
          print
@}
@end example

Ê≥®ÊÑèËøôÈáåÁöÑÂè¶Â§ñÁöÑËæìÂÖ•Êñá‰ª∂ÁöÑÂêçÂ≠óÊòØÂ¶Ç‰ΩïÊûÑÂª∫Âà∞Á®ãÂ∫è‰∏≠ÁöÑÔºõ
ÂÆÉÊòØÁõ¥Êé•‰ªéÊï∞ÊçÆ‰∏≠Êù•ÁöÑÔºåÈÄöËøá @code{@@include} Ë°åÁöÑÁ¨¨ 2 ‰∏™ÂüüÊù•ÊåáÂÆöÁöÑ„ÄÇ

@code{close()} ÂáΩÊï∞ÁöÑË∞ÉÁî®ÊòØ‰∏∫‰∫Ü‰øùËØÅÂ¶ÇÊûú @code{@@include} Âú®ËæìÂÖ•Êñá‰ª∂‰∏≠Âá∫Áé∞‰∏§Ê¨°ÔºåÊñá‰ª∂ÁöÑÂÜÖÂÆπ‰πü‰ºöË¢´ÊåáÂÆö‰∏§Ê¨°„ÄÇ
Êü•Áúã @ref{Close Files And Pipes}„ÄÇ

Ëøô‰∏™Á®ãÂ∫èÁöÑ‰∏çË∂≥Â∞±ÊòØ‰∏çËÉΩÂ§ÑÁêÜÂÜÖÂµå @code{@@include} ÁöÑÊÉÖÂÜµ
Ôºà‰æãÂ¶ÇÔºå@code{@@include} ËØ≠Âè•ÂåÖÂê´Âú®Ë¢´ÂåÖÂê´ÁöÑÊñá‰ª∂‰∏≠ÔºâÔºå
Â¶Ç‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÂÆèÂ§ÑÁêÜÂô®ÊâÄÊâßË°åÁöÑÂäüËÉΩ„ÄÇÂú® @ref{Igawk Program}ÔºåÊü•ÁúãÂ§ÑÁêÜÂÜÖÂµå @code{@@include} ËØ≠Âè•ÁöÑÁ®ãÂ∫è„ÄÇ

@node Getline/Pipe
@subsection ‰ªéÁÆ°ÈÅì‰∏≠‰ΩøÁî® @code{getline} 

@c From private email, dated October 2, 1988. Used by permission, March 2013.
@cindex Kernighan, Brian
@quotation
@i{
ÂÖ®Áü•ÂÖ®ËÉΩÂ§™ÈÅ•ËøúÔºåËøòÊòØÂÖ≥Ê≥®ÁªÜËäÇÊõ¥ÊúâÁî®„ÄÇ
}
@author Brian Kernighan
@end quotation

@cindex @code{|} (vertical bar), @code{|} operator (I/O)
@cindex vertical bar (@code{|}), @code{|} operator (I/O)
@cindex input pipeline
@cindex pipe, input
@cindex operators, input/output
ÂëΩ‰ª§ÁöÑËæìÂÖ•‰πüÂèØ‰ª•Ë¢´ÈÄöËøá‰ΩøÁî® @samp{@var{command} | getline} Êù•‰ª•ÁÆ°ÈÅìËæìÂá∫Áªô @code{getline}„ÄÇ
Âú®ËøôÁßçÊÉÖÂΩ¢‰∏≠Ôºå@var{command} ÊòØ‰∏Ä‰∏™ Shell ÂëΩ‰ª§Ôºå
ÂêåÊó∂ÔºåÂÆÉÁöÑËæìÂá∫‰ºöË¢´‰ª•ÁÆ°ÈÅìÂΩ¢ÂºèËæìÂá∫Áªô @command{awk} Êù•‰Ωú‰∏∫ËæìÂÖ•„ÄÇËøôÁßçÂΩ¢ÂºèÁöÑ @code{getline} ‰ªéÁÆ°ÈÅì‰∏≠‰∏ÄÊ¨°ËØªÂèñ‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇ
Â¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂ§çÂà∂ÂÆÉÁöÑËæìÂÖ•Âà∞ËæìÂá∫‰∏≠ÔºåÊéíÈô§ÈÇ£‰∫õ‰ª• @samp{@@execute} ÂºÄÂ§¥ÁöÑË°åÔºåËøô‰∫õË°å‰ºöË¢´ÊõøÊç¢‰∏∫Â∞ÜË°åÁöÑÂâ©‰∏ãÁöÑÂÜÖÂÆπÂΩìÂÅö Shell ÂëΩ‰ª§ÊâßË°åÊó∂‰∫ßÁîüÁöÑËæìÂá∫Ôºö

@example
@{
     if ($1 == "@@execute") @{
          tmp = substr($0, 10)        # Remove "@@execute"
          while ((tmp | getline) > 0)
               print
          close(tmp)
     @} else
          print
@}
@end example

@noindent
@code{close()} ÂáΩÊï∞‰øùËØÅ‰∏§‰∏™Áõ∏ÂêåÁöÑ @samp{@@execute} Ë°åÔºåÂëΩ‰ª§‰ºöÊâßË°åÁõ∏Â∫îÊ¨°Êï∞„ÄÇ
@ifnottex
@ifnotdocbook
Êü•Áúã @ref{Close Files And Pipes}„ÄÇ
@end ifnotdocbook
@end ifnottex
@c This example is unrealistic, since you could just use system
ÂÅáËÆæÊúâ‰∏ãÈù¢ÁöÑËæìÂÖ•Ôºö

@example
foo
bar
baz
@@execute who
bletch
@end example

@noindent
Á®ãÂ∫èÂèØËÉΩ‰∫ßÁîüÂ¶Ç‰∏ãÁöÑËæìÂá∫Ôºö

@cindex Robbins, Bill
@cindex Robbins, Miriam
@cindex Robbins, Arnold
@example
foo
bar
baz
arnold     ttyv0   Jul 13 14:22
miriam     ttyp0   Jul 13 14:23     (murphy:0)
bill       ttyp1   Jul 13 14:23     (murphy:0)
bletch
@end example

@noindent
Ê≥®ÊÑèËøô‰∏™Á®ãÂ∫è‰ºöÊâßË°åÂëΩ‰ª§ @command{who} ÁÑ∂ÂêéÊâìÂç∞Âá∫ÁªìÊûú„ÄÇ
ÔºàÂ¶ÇÊûú‰Ω†ÊµãËØïËøô‰∏™Á®ãÂ∫èÔºå‰Ω†ÂèØËÉΩ‰ºöÂæóÂà∞‰∏çÂêåÁöÑÁªìÊûúÔºåËøô‰æùËµñ‰∫é‰Ω†ÊâÄÁôªÂÖ•ÁöÑÁ≥ªÁªü„ÄÇÔºâ

ËøôÊ†∑ÁöÑ @code{getline} ÂΩ¢Âºè‰ºöÂ∞ÜËÆ∞ÂΩïÂàÜÂâ≤ÊàêÂüüÔºåÂπ∂ËÆæÁΩÆ @code{NF} ÁöÑÂÄºÔºåÂπ∂ÈáçÊñ∞ËÆ°ÁÆó @code{$0} ÁöÑÂÄº„ÄÇ@code{NR} ‰∏é @code{FNR} ÁöÑÂÄº‰∏ç‰ºöÊîπÂèòÔºå@code{RT} ÁöÑÂÄºÂàô‰ºöË¢´ËÆæÁΩÆ„ÄÇ

@cindex POSIX @command{awk}, @code{|} I/O operator and
@c Thanks to Paul Eggert for initial wording here
Ê†πÊçÆ POSIX Ê†áÂáÜÔºå@samp{@var{expression} | getline} Ë°®ËææÂºè‰∏≠Ôºå
Â¶ÇÊûú @var{expression} ÂåÖÂê´‰∫ÜÊú™Ë¢´Êã¨Ëµ∑Êù•ÁöÑÈô§ @samp{$} ‰πãÂ§ñÁöÑÊìç‰ΩúÁ¨¶Êó∂ÔºåÂàô‰ºöÊòØÊúâÊ≠ß‰πâÁöÑ„ÄÇ
‰æãÂ¶ÇÔºå@samp{@w{"echo "} "date" | getline} Áî±‰∫éËøûÊé•Êìç‰ΩúÁ¨¶Ê≤°ÊúâË¢´Êã¨Ëµ∑Êù•Ôºå Âõ†Ê≠§Ëøô‰∏™ËØ≠Âè•ÊòØÊúâÊ≠ß‰πâÁöÑ„ÄÇ
Â¶ÇÊûú‰Ω†ÊÉ≥‰Ω†ÁöÑÁ®ãÂ∫èÂèØ‰ª•ÊúâÁßªÊ§çÂà∞ÊâÄÊúâÁöÑ @command{awk} ÂÆûÁé∞ÈáåÔºå‰Ω†Â∫îËØ•Ëøô‰πàÂÜôÔºö @samp{(@w{"echo "} "date") | getline}„ÄÇ

@cindex Brian Kernighan's @command{awk}
@cindex @command{mawk} utility
@quotation ÊèêÁ§∫
‰∏çÂπ∏ÁöÑÊòØÔºå@command{gawk} Âú®ÂØπÂæÖÂÉèËøôÊ†∑ÁöÑÁªìÊûÑ @samp{@w{"echo "} "date" | getline} Êó∂ÊòØ‰∏ç‰∏ÄËá¥ÁöÑ„ÄÇ
Â§ßÂ§öÊï∞ÁöÑÁâàÊú¨ÔºåÂåÖÊã¨ÁõÆÂâçÁöÑÁâàÊú¨ÔºåÈÉΩÂ∞ÜÂÖ∂ÁúãÊàê @samp{@w{("echo "} "date") | getline}„ÄÇ
ÔºàËøô‰πüÊòØ BWK @command{awk} ÁöÑË°å‰∏∫Ôºâ
Êúâ‰∏Ä‰∫õÁâàÊú¨Âàô‰ºöÂ∞ÜÂÖ∂ÁúãÊàê @samp{@w{"echo "} ("date" | getline)}„ÄÇÔºàËøôÊòØ @command{mawk} ÁöÑË°å‰∏∫Ôºâ
ÁÆÄÂçïÂú∞ËØ¥„ÄÇÊòæÂºèÂú∞‰ΩøÁî®Êã¨Âè∑ÔºåÂ∞±‰∏çÁî®ÊãÖÂøÉËøô‰∫õÈóÆÈ¢ò„ÄÇ
@end quotation

@node Getline/Variable/Pipe
@subsection ‰ªéÁÆ°ÈÅì‰∏≠ @code{getline} Âà∞ÂèòÈáè
@cindex variables, @code{getline} command into@comma{} using

ÂΩì‰ΩøÁî® @samp{@var{command} | getline @var{var}} ËøôÁßçÂΩ¢ÂºèÔºåÂç≥ @var{command} ÂëΩ‰ª§ÁöÑËæìÂá∫ÈÄöËøáÁÆ°ÈÅìÂèëÈÄÅÁªô @code{getline}Ôºå
Âπ∂Â∞ÜÂÖ∂Â≠òÂÇ®Âú®ÂèòÈáè @var{var} ‰∏≠„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂà©Áî® @command{date} Â∑•ÂÖ∑Ôºå
ËØªÂèñÂΩìÂâçÁöÑÊó•Êúü‰∏éÊó∂Èó¥Âà∞ÂèòÈáè @code{current_time} ‰∏≠ÔºåÁÑ∂ÂêéÊâìÂç∞ÂÆÉÔºö

@example
BEGIN @{
     "date" | getline current_time
     close("date")
     print "Report printed on " current_time
@}
@end example

Âú®Ëøô‰∏™ÁâàÊú¨ÁöÑ @code{getline} ‰∏≠ÔºåÊ≤°Êúâ‰ªª‰ΩïÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè‰ºöÊîπÂèòÔºåËÆ∞ÂΩï‰πü‰∏ç‰ºöÂàÜÂâ≤ÊàêÂüüÔºå‰ΩÜÊòØ @code{RT} ‰ºöË¢´ËÆæÂÆö„ÄÇ

@ifinfo
@c Thanks to Paul Eggert for initial wording here
According to POSIX, @samp{@var{expression} | getline @var{var}} is ambiguous if
@var{expression} contains unparenthesized operators other than
@samp{$}; for example, @samp{@w{"echo "} "date" | getline @var{var}} is ambiguous
because the concatenation operator is not parenthesized. You should
write it as @samp{(@w{"echo "} "date") | getline @var{var}} if you want your
program to be portable to other @command{awk} implementations.
@end ifinfo

@node Getline/Coprocess
@subsection ‰ªéÂπ∂Á®ã‰∏≠‰ΩøÁî® @code{getline}
@cindex coprocesses, @code{getline} from
@cindex @code{getline} command, coprocesses@comma{} using from
@cindex @code{|} (vertical bar), @code{|&} operator (I/O)
@cindex vertical bar (@code{|}), @code{|&} operator (I/O)
@cindex operators, input/output
@cindex differences in @command{awk} and @command{gawk}, input/output operators

‰ªéÁÆ°ÈÅì‰∏≠ @code{getline} ËØªÂèñËæìÂÖ•ÊòØÂçïÂêëÊìç‰Ωú„ÄÇ
ÈÄöËøá @samp{@var{command} | getline} ÂêØÂä®ÁöÑÂëΩ‰ª§ command Âè™‰ºöÂ∞ÜÊï∞ÊçÆÂèëÈÄÅ@emph{Âà∞}‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ

ÊúâÊó∂ÂÄôÔºå‰Ω†ÂèØËÉΩ‰ºöÊÉ≥ÂèëÈÄÅÊï∞ÊçÆÂà∞Âè¶‰∏Ä‰∏™Á®ãÂ∫èÁî®‰∫éÂ§ÑÁêÜÔºåÂπ∂Â∞ÜÁªìÊûúËøîÂõûÊù•„ÄÇ
@command{gawk} ÂèØ‰ª•ÂêØÂä®‰∏Ä‰∏™@dfn{Âπ∂Á®ã}ÔºåÂêåÊó∂ÂÖÅËÆ∏ÂèåÂêëÈÄö‰ø°„ÄÇ
ËøôÊòØÈÄöËøá @samp{|&} Êìç‰ΩúÁ¨¶Êù•ÂÆûÁé∞ÁöÑ„ÄÇÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏≠Ôºå‰Ω†È¶ñÂÖàÂ∞ÜÊï∞ÊçÆÂÜôÂà∞Âπ∂Á®ã‰∏≠ÔºåÁÑ∂ÂêéÂ∞ÜÁªìÊûúËØªÂèñÂõûÊù•ÔºåÂ¶Ç‰∏ãÈù¢ÊâÄÁ§∫Ôºö

@example
print "@var{some query}" |& "db_server"
"db_server" |& getline
@end example

@noindent
‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Â∞ÜËØ∑Ê±ÇÂèëÈÄÅÂà∞ @command{db_server} ‰∏≠ÁÑ∂ÂêéËØªÂèñÁªìÊûú„ÄÇ

@code{NR} ‰∏é @code{FNR} ÁöÑÂÄº‰∏ç‰ºöÂèòÊõ¥ÔºåÂõ†‰∏∫‰∏ªËæìÂÖ•ÊµÅÊ≤°ÊúâË¢´‰ΩøÁî®„ÄÇ‰ΩÜÊòØÔºåËÆ∞ÂΩï‰ºöÊåâÊ≠£Â∏∏ÊñπÂºèÂàÜÂâ≤ÊàêÂüüÔºåÂõ†Ê≠§‰ºöÊîπÂèò @code{$0} ÁöÑÂÄºÔºåÂÖ∂‰ªñÂüüÁöÑÂÄºÔºå‰ª•Âèä @code{NF} Ë∑ü @code{RT} ÁöÑÂÄº„ÄÇ

Âπ∂Á®ãÊòØ‰∏Ä‰∏™È´òÁ∫ßÁâπÊÄß„ÄÇÂú®ËøôÈáåËÆ®ËÆ∫ÊòØÂõ†‰∏∫Ëøô@value{SECTION}Ë∑ü @code{getline} ÊúâÂÖ≥„ÄÇ
Êü•Áúã @ref{Two-way I/O}ÔºåËøôÈáåÂπ∂Á®ã‰ºöÊõ¥ËÆ®ËÆ∫ÂæóÊõ¥Ê∑±ÂÖ•‰∏Ä‰∫õ„ÄÇ

@node Getline/Variable/Coprocess
@subsection ‰ΩøÁî®Âπ∂Á®ã @code{getline} Âà∞ÂèòÈáè 
@cindex variables, @code{getline} command into@comma{} using

ÂΩì‰Ω†‰ΩøÁî® @samp{@var{command} |& getline @var{var}}Ôºå
Âπ∂Á®ã @var{command} ÁöÑËæìÂá∫‰ºöÈÄöËøá‰∏Ä‰∏™ÂèåÂêëÁÆ°ÊñóÁÆ°ÈÅìÂèëÈÄÅÂà∞ @code{getline} ‰∏≠ÔºåÂπ∂‰øùÂ≠òÂú®ÂèòÈáè @var{var} ‰∏≠„ÄÇ

Âú®Ëøô‰∏™ÁâàÊú¨ÁöÑ @code{getline} ‰∏≠ÔºåÊ≤°Êúâ‰ªª‰ΩïÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè‰ºöÊîπÂèòÔºåËÆ∞ÂΩï‰πü‰∏ç‰ºöÂàÜÂâ≤ÊàêÂüü„ÄÇ
ÂîØ‰∏ÄÂèòÂåñÁöÑÊòØÂèòÈáè @var{var}Ôºå‰ΩÜÊòØ @code{RT} ÁöÑÂÄº‰ºöË¢´ËÆæÂÆö„ÄÇ

@ifinfo
Coprocesses are an advanced feature. They are discussed here only because
this is the @value{SECTION} on @code{getline}.
@xref{Two-way I/O},
where coprocesses are discussed in more detail.
@end ifinfo

@node Getline Notes
@subsection ÂõûÈ°æ @code{getline}
Ëøô‰∏ãÈù¢ÊúâÂá†ÁÇπÂÖ≥‰∫é @code{getline} ÁöÑÂÜÖÂÆπÈúÄË¶ÅÁïôÊÑèÔºö

@itemize @value{BULLET}
@item
ÂΩì @code{getline} ÊîπÂèò‰∫Ü @code{$0} ‰∏é @code{NF} ÁöÑÂÄºÊó∂Ôºå@command{awk} ‰∏ç‰ºöËá™Âä®Ë∑≥Âà∞Á®ãÂ∫èÁöÑÂºÄÂßãÂπ∂ÊµãËØïÊñ∞ÁöÑËÆ∞ÂΩï‰∏éÊ®°Âºè„ÄÇ‰ΩÜÊòØÊñ∞ÁöÑËÆ∞ÂΩï‰ºöÂåπÈÖç‰ªªÊÑèÂêéÂêéÁª≠ËßÑÂàô„ÄÇ

@cindex differences in @command{awk} and @command{gawk}, implementation limitations
@cindex implementation issues, @command{gawk}, limits
@cindex @command{awk}, implementations, limits
@cindex @command{gawk}, implementation issues, limits
@item
‰∏Ä‰∫õÈùûÂ∏∏ËÄÅÁöÑ @command{awk} ÂÆûÁé∞ÈôêÂà∂‰∫Ü @command{awk} Á®ãÂ∫èÂèØ‰ª•ÊâìÂºÄÁöÑÁÆ°Á∫øÁöÑÊï∞ÈáèÂ∞±ÊòØ 1 ‰∏™„ÄÇ
Âú® @command{gawk} ‰∏≠ÔºåÊ≤°ÊúâËøôÊ†∑ÁöÑÈôêÂà∂„ÄÇ‰Ω†ÂèØ‰ª•ÊâìÂºÄ‰Ω†ÊÉ≥Ë¶ÅÁöÑÂú®Êìç‰ΩúÁ≥ªÁªüÈôêÂà∂‰∏ãÁöÑÁÆ°Á∫øÔºà‰ª•ÂèäÂπ∂Á®ãÔºâÊï∞Èáè„ÄÇ

@cindex side effects, @code{FILENAME} variable
@cindex @code{FILENAME} variable, @code{getline}@comma{} setting with
@cindex dark corner, @code{FILENAME} variable
@cindex @code{getline} command, @code{FILENAME} variable and
@cindex @code{BEGIN} pattern, @code{getline} and
@item
Â¶ÇÊûú‰Ω†Âú® @code{BEGIN} ËßÑÂàô‰∏≠‰ΩøÁî® @code{getline} ËÄåÊ≤°ÊúâÈáçÂÆöÂêëÁ¨¶ÔºåÂàô‰ºöÂá∫Áé∞‰∏Ä‰∏™ÊúâË∂£ÁöÑÂâØ‰ΩúÁî®„ÄÇ
Áî±‰∫é‰∏Ä‰∏™Êú™ÈáçÂÆöÂêëÁöÑ @code{getline} ‰ºö‰ªéÂëΩ‰ª§Ë°å‰∏≠ÁöÑÊï∞ÊçÆÊñá‰ª∂‰∏≠ËØªÂèñÊï∞ÊçÆÔºå
Á¨¨‰∏Ä‰∏™ @code{getline} ÂëΩ‰ª§‰ºöÂØºËá¥ @command{awk} ËÆæÁΩÆ @code{FILENAME} ÁöÑÂÄº„ÄÇ
Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ã„ÄÇ@code{FILENAME} ‰∏ç‰ºöÂú® @code{BEGIN} ËßÑÂàôÂÜÖÊúâÂÄºÔºåÁî±‰∫é‰Ω†ËøòÊ≤°ÊúâÂºÄÂßãÂ§ÑÁêÜÂëΩ‰ª§Ë°å@value{DF}„ÄÇ
@value{DARKCORNER}
ÔºàÊü•Áúã @ref{BEGIN/END} ‰∏é @ref{Auto-set}„ÄÇÔºâ

@item
Âú® @code{getline} ‰∏≠‰ΩøÁî® @code{FILENAME}Ôºà@samp{getline < FILENAME}ÔºâÊúâÂèØËÉΩÂØºËá¥Âõ∞ÊÉë„ÄÇ
@command{awk} Âà©Áî®ÂΩìÂâçÊñá‰ª∂ÊâìÂºÄ‰∏Ä‰∏™Áã¨Á´ãÁöÑËæìÂÖ•ÊµÅ„ÄÇ
‰ΩÜÊòØ‰∏çÈÄöËøá‰ΩøÁî®ÂèòÈáèÔºå@code{$0} ‰∏é @code{NF} ÁöÑÂÄº‰πüËøò‰ºöÊîπÂèò„ÄÇ
Â¶ÇÊûú‰Ω†Ëøô‰πàÂÅöÔºåÊúâÂèØËÉΩÊòØÂÅ∂ÁÑ∂Ôºå‰Ω†Â∫îËØ•ÈáçÊñ∞ËÄÉËôë‰Ω†Âà∞Â∫ïÊÉ≥Ë¶Å‰ªÄ‰πàÁªìÊûú„ÄÇ

@item
@ifdocbook
‰∏ã‰∏Ä@value{SECTION}Ôºå
@end ifdocbook
@ifnotdocbook
@ref{Getline Summary}Ôºå
@end ifnotdocbook
Êèê‰æõ‰∫Ü @code{getline} ‰∏çÂêåÂèò‰ΩìÂèäÂú®Áõ∏Â∫îÊÉÖÂÜµ‰∏ãÂèóÂΩ±ÂìçÁöÑÂèòÈáèÁöÑÊÄªÁªìË°®„ÄÇ
‰πüÂÄºÂæóÊ≥®ÊÑèÔºåÈÇ£‰∫õÂèò‰Ωì‰∏ç‰ΩøÁî®ÈáçÂÆöÂêëÔºåÂ¶ÇÊûúÂØºËá¥‰∫Ü @command{awk} ÈáçÊñ∞ËØªÂèñ‰∏Ä‰∏™Êñ∞ÁöÑËæìÂÖ•Êñá‰ª∂Ôºå‰πüÂèØ‰ª•ÂØºËá¥ @code{FILENAME} ÁöÑÊõ¥Êñ∞„ÄÇ

@item
@cindex Moore, Duncan
Â¶ÇÊûúÊ≠£Âú®Ë¢´ËµãÂÄºÁöÑÂèòÈáèÊòØ‰∏Ä‰∏™Â∏¶ÂâØÊïàÂ∫îÁöÑË°®ËææÂºèÔºåÂàô‰∏çÂêåÁöÑ @command{awk} ÁâàÊú¨‰ºöÊúâ‰∏çÂêåÁöÑË°®Áé∞„ÄÇ
Ëøô‰æùËµñ‰∫éÊÄéÊ†∑Á¢∞Âà∞‚Äúend-of-file‚Äù„ÄÇ
‰∏Ä‰∫õÁâàÊú¨‰∏≠‰∏çËøô‰∫õË°®ËææÂºè‰∏çÁîüÊïàÔºõËÆ∏Â§öÁâàÊú¨ÔºàÂåÖÊã¨ @command{gawk}Ôºâ‰ºöÁîüÊïà„ÄÇ
ËøôÊòØ‰∏Ä‰∏™‰æãÂ≠êÔºåÊÑüË∞¢Duncan MooreÔºö

@ignore
Date: Sun, 01 Apr 2012 11:49:33 +0100
From: Duncan Moore <duncan.moore@@gmx.com>
@end ignore

@example
BEGIN @{
    system("echo 1 > f")
    while ((getline a[++c] < "f") > 0) @{ @}
    print c
@}
@end example

@noindent
ËøôÈáåÔºåÂâØÊïàÂ∫îÊòØ @samp{++c} „ÄÇÂ¶ÇÊûúÊñá‰ª∂ÁªìÊùüÊó∂Ôºå@code{c} ÊòØÂê¶ÊòØÂú® @code{a} ÁöÑÂÖÉÁ¥†Ë¢´ËµãÂÄº‰πãÂâçËøõË°åÈÄíÂ¢û‰πàÔºü

@command{gawk} Â∞Ü @code{getline} ÊåâÁÖßÂáΩÊï∞Ë∞ÉÁî®Êù•ÂØπÂæÖÔºåÂπ∂Âú®Â∞ùËØïËØªÂèñ @file{f} ‰πãÂâçÂØπË°®ËææÂºè @samp{a[++c]} ËøõË°åÊ±ÇÂÄº„ÄÇ
‰ΩÜÊòØÔºåÂú® @command{awk} ÁöÑÊüê‰∫õÁâàÊú¨‰∏≠ÔºåÂΩìÂÆÉÁü•ÈÅìÊúâÂ≠ó‰∏≤ÂÄºË¶ÅËøõË°åËµãÂÄºÊó∂ÔºåÊâç‰ºöÂØπË°®ËææÂºèÊ±ÇÂÄº„ÄÇ
@end itemize

@node Getline Summary
@subsection @code{getline} Âèò‰ΩìÊÄªÁªì
@cindex @code{getline} command, variants

@ref{table-getline-variants} ÊÄªÁªì‰∫Ü @code{getline} ÁöÑ8‰∏™Âèò‰ΩìÔºåÂπ∂Âàó‰∏æ‰∫ÜÂú®ÊØèÁßçÂèò‰Ωì‰∏ã‰ºöË¢´ËÆæÁΩÆÁöÑÈ¢ÑÂÆö‰πâÂèòÈáèÔºå‰ª•ÂèäÂèò‰ΩìÊòØÂê¶ÊòØ @command{gawk} ÁöÑÊ†áÂáÜÊâ©Â±ï„ÄÇ
ÊèêÁ§∫ÔºöÂØπÊØè‰∏™Âèò‰ΩìÔºå@command{gawk} ÈÉΩ‰ºöËÆæÁΩÆÈ¢ÑÂÆö‰πâÂèòÈáè @code{RT}„ÄÇ

@float Table,table-getline-variants
@caption{@code{getline} Âèò‰ΩìÂèäÂÖ∂ËÆæÁΩÆÁöÑÂèòÈáè}
@multitable @columnfractions .33 .38 .27
@headitem Variant @tab Effect @tab @command{awk} / @command{gawk}
@item @code{getline} @tab Sets @code{$0}, @code{NF}, @code{FNR}, @code{NR}, and @code{RT} @tab @command{awk}
@item @code{getline} @var{var} @tab Sets @var{var}, @code{FNR}, @code{NR}, and @code{RT} @tab @command{awk}
@item @code{getline <} @var{file} @tab Sets @code{$0}, @code{NF}, and @code{RT} @tab @command{awk}
@item @code{getline @var{var} < @var{file}} @tab Sets @var{var} and @code{RT} @tab @command{awk}
@item @var{command} @code{| getline} @tab Sets @code{$0}, @code{NF}, and @code{RT} @tab @command{awk}
@item @var{command} @code{| getline} @var{var} @tab Sets @var{var} and @code{RT} @tab @command{awk}
@item @var{command} @code{|& getline} @tab Sets @code{$0}, @code{NF}, and @code{RT} @tab @command{gawk}
@item @var{command} @code{|& getline} @var{var} @tab Sets @var{var} and @code{RT} @tab @command{gawk}
@end multitable
@end float

@node Read Timeout
@section Â∏¶Ë∂ÖÊó∂ÁöÑËæìÂÖ•ËØªÂèñ
@cindex timeout, reading input

@cindex differences in @command{awk} and @command{gawk}, read timeouts
Êú¨@value{SECTION}ËÆ®ËÆ∫ÁöÑÁâπÊÄßÊòØ @command{gawk} ÊâÄÁã¨ÊúâÁöÑ„ÄÇ

Âú®ËØªÂèñÈîÆÁõò‰∏ä„ÄÅÁÆ°ÈÅì„ÄÅÂèåÂêëÈÄö‰ø°ÔºåÂåÖÊã¨ TCP/IP Â•óÊé•Â≠ó‰∏≠ËØªÂèñËæìÂÖ•ÁöÑÊó∂ÂÄôÔºå‰Ω†ÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™‰∏∫ÊØ´ÁßíÂçï‰ΩçË∂ÖÊó∂Êó∂Èó¥„ÄÇ
ËøôÂèØ‰ª•Âú®ÊØè‰∏™ËæìÂÖ•ÔºåÊØè‰∏™ÂëΩ‰ª§ÊàñËÄÖÊØè‰∏™ËøûÊé•ÁöÑÂü∫Á°Ä‰∏äÊù•ÊåáÂÆö„ÄÇÊâÄÊúâËøô‰∫õÈÉΩÂèØ‰ª•ÊåáÂÆö @code{PROCINFO} Êï∞ÁªÑ‰∏≠ÁöÑÊüê‰∏™ÂÖÉÁ¥†ÁöÑÂÄºÊù•ÂÆûÁé∞
ÔºàÊü•Áúã @ref{Auto-set}ÔºâÔºö

@example
PROCINFO["input_name", "READ_TIMEOUT"] = @var{timeout in milliseconds}
@end example

Â¶ÇÊûúËÆæÁΩÆ‰∫ÜËøôÊ†∑ÁöÑÊó∂Èó¥Ôºå@command{gawk} Ë∂ÖÊó∂ÂêéÔºåÂ¶ÇÊûúÊ≤°ÊúâÂú®ÊåáÂÆöÁöÑË∂ÖÊó∂Êó∂Èó¥ÂÜÖËØªÂèñÂà∞Êï∞ÊçÆÔºåÂàô‰ºöËøîÂõû‰∏Ä‰∏™Â§±Ë¥•Áä∂ÊÄÅ„ÄÇ
‰æãÂ¶ÇÔºåTCP ÂÆ¢Êà∑Á´ØÂèØ‰ª•Âú®ÊåáÂÆöÊó∂Èó¥ÂêéÔºåÂÜ≥ÂÆöÊòØÊîæÂºÉÊé•Êî∂‰ªéÊúçÂä°Âô®ËøîÂõûÁöÑÂìçÂ∫î„ÄÇ

@example
Service = "/inet/tcp/0/localhost/daytime"
PROCINFO[Service, "READ_TIMEOUT"] = 100
if ((Service |& getline) > 0)
    print $0
else if (ERRNO != "")
    print ERRNO
@end example

‰∏ãÈù¢ÂàôÊòØ‰ªé user ÈÇ£Èáå
@footnote{ËøôÈáåÂÅáËÆæÊ†áÂáÜËæìÂÖ•Â∞±ÊòØÈîÆÁõò„ÄÇ}
ËøõË°å‰∫§‰∫íÂºèËØªÂÜôÔºåÂπ∂‰∏î‰∏çÁ≠âÂæÖË∂ÖËøá 5 ÁßíÔºö

@example
PROCINFO["/dev/stdin", "READ_TIMEOUT"] = 5000
while ((getline < "/dev/stdin") > 0)
    print $0
@end example

Â¶ÇÊûúÊ≤°ÊúâÊï∞ÊçÆËæìÂÖ•Ôºå@command{gawk} ‰ºöÂú®Á≠âÂæÖÊåáÂÆöÁöÑË∂ÖÊó∂Êó∂ÊúüÂêéÔºåÁªìÊùüËØªÊìç‰ΩúÔºåÂπ∂ËøîÂõûÂ§±Ë¥•Ôºå
ÂêåÊó∂ËÆæÁΩÆ @code{ERRNO} ÁöÑÂÄº‰∏∫ÊÅ∞ÂΩìÁöÑÂÄº„ÄÇË¥üÂÄºÊàñËÄÖ 0 ÁöÑË∂ÖÊó∂Êó∂Èó¥Ôºå‰∏é‰∏çÊåáÂÆöË∂ÖÊó∂Êó∂Èó¥‰∏ÄÊ†∑„ÄÇ

Ë∂ÖÊó∂Êó∂Èó¥‰πüÂèØ‰ª•ËÆæÁΩÆÂú®Âú®ÊòæÂºèÁöÑÂæ™ÁéØ‰∏≠Êù•ËØªÂèñÈîÆÁõòËæìÂÖ•ÔºåÈÄöËøáËØªÂèñËøô‰∫õËæìÂÖ•Êù•ÂØπÊ®°ÂºèËøõË°åÂåπÈÖçÔºåÂ¶ÇÔºö

@example
$ @kbd{gawk 'BEGIN @{ PROCINFO["-", "READ_TIMEOUT"] = 5000 @}}
> @kbd{@{ print "You entered: " $0 @}'}
@kbd{gawk}
@print{} You entered: gawk
@end example

Âú®Ëøô‰∏™ÊÉÖÂΩ¢‰∏ãÔºåÂ¶ÇÊûúÂú®5Áßí‰πãÂÜÖÂèçÂ∫îÂ§±Ë¥•Ôºå‰ºöÂØºËá¥Â¶Ç‰∏ãÈîôËØØ‰ø°ÊÅØÔºö

@example
@error{} gawk: cmd. line:2: (FILENAME=- FNR=1) fatal: error reading input file `-': Connection timed out
@end example

Ë∂ÖÊó∂ÊàñËÄÖÂèòÊõ¥Ë∂ÖÊó∂ÂèØ‰ª•Âú®‰ªªÊÑèÊó∂Èó¥ÔºåÂπ∂Âú®‰∏ãÊ¨°‰ªéËæìÂÖ•ËÆæÂ§á‰∏≠ËØªÂèñÊó∂‰∫ßÁîüÊïàÊûú„ÄÇ
Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨‰ªé 1 ÁßíÂºÄÂßãÔºåÂπ∂‰∏çÊñ≠Êåâ 1/10 ÁßíÁöÑÊó∂Èó¥ÈÄíÂáèÔºåÁõ¥Âà∞ÊúâËæìÂÖ•Âà∞ËææÔºö

@example
PROCINFO[Service, "READ_TIMEOUT"] = 1000
while ((Service |& getline) > 0) @{
    print $0
    PROCINFO[Service, "READ_TIMEOUT"] -= 100
@}
@end example

@quotation ÊèêÁ§∫
‰Ω†‰∏çÂèØ‰ª•ÂÅáËÆæËØªÊìç‰ΩúÂú®ËØªÂèñ‰∫ÜÁ¨¨ 10 ‰∏™ËÆ∞ÂΩïÂêé‰ºöÈòªÂ°û„ÄÇ
ÊúâÂèØËÉΩ @command{gawk} Á¨¨‰∏ÄÊ¨°ËØªÂèñÊó∂Â∞±ËØªÂèñ‰∫ÜÂ§ö‰∫é‰∏Ä‰∏™ÁöÑËÆ∞ÂΩïÂπ∂ÁºìÂ≠òËµ∑Êù•„ÄÇ
Âõ†‰∏∫Ëøô‰∏™ÂéüÂõ†ÔºåÂú®‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊîπÂèòË∂ÖÊó∂ÂÄº‰∏çÊòØÁâπÂà´ÊúâÁî®„ÄÇ
@end quotation

Â¶ÇÊûú @code{PROCINFO} ÂÖÉÁ¥†Ê≤°ÊúâËÆæÁΩÆÔºåÂπ∂‰∏î @env{GAWK_READ_TIMEOUT} ÁéØÂ¢ÉÂèòÈáèÂ≠òÂú®Ôºå
@command{gawk} ‰ºö‰ΩøÁî®Ëøô‰∏™ÂèòÈáèÁöÑÂÄºÊù•ÂàùÂßãÂåñË∂ÖÊó∂ÂÄº„ÄÇÂîØ‰∏ÄÂú∞‰ΩøÁî®ÁéØÂ¢ÉÂèòÈáèÊù•ÊåáÂÆöË∂ÖÊó∂ÂÄºÊúâËøôÊ†∑ÁöÑ‰∏Ä‰∏™Áº∫Èô∑ÔºåÂ∞±ÊòØ‰∏çËÉΩÂ§üÊåâÁÖßÊØèÂëΩ‰ª§ÊàñËÄÖÊØè‰∏™ËøûÊé•Âú∞ËøõË°åÊéßÂà∂„ÄÇ

@command{gawk} ‰ºöËÆ§‰∏∫Ë∂ÖÊó∂‰∫ã‰ª∂ÊòØ‰∏Ä‰∏™ÈîôËØØ„ÄÇ
Â∞±ÁÆóÂêéÁª≠ÂØπ‰∫éËæìÂÖ•ËÆæÂ§áÁöÑËØªÂèñÊòØÊàêÂäüÁöÑ„ÄÇËøôÊòØ‰∏Ä‰∏™ÈôêÂà∂ÔºåËøô‰πüË°®Á§∫‰Ω†‰∏çÂèØ‰ª•Áî®Ëøô‰∏™Êù•Â§çÁî®‰∏§‰∏™ÊàñËÄÖÊõ¥Â§öÁöÑËæìÂÖ•Ê∫ê„ÄÇ

ËµãÂÄº‰∏Ä‰∏™Ë∂ÖÊó∂ÂÄºÔºåÂèØ‰ª•ÈÅøÂÖçËØªÊìç‰Ωú‰∏ÄÁõ¥Ë¢´ÈòªÂ°û„ÄÇ‰ΩÜÊòØË¶ÅËÆ∞‰ΩèÔºåËøòÊúâÂÖ∂‰ªñÁöÑÊñπÊ≥ïÊù•Á≠âÂæÖËæìÂÖ•ËÆæÁΩÆÂáÜÂ§áÂ∞±Áª™„ÄÇ‰∏Ä‰∏™ÁΩëÁªúÂÆ¢Êà∑Á´ØÂú®ÂèØ‰ª•ËØªÂèñÊï∞ÊçÆ‰πãÂâçÂèØËÉΩÈúÄË¶ÅÁ≠âÂæÖÂæàÈïøÁöÑÊó∂Èó¥Êù•Âª∫Á´ãËøûÊé•ÔºåÊàñËÄÖË¶ÅÂæàÈïøÁöÑÊó∂Èó¥Êù•ÊâìÂºÄ FIFO ÁâπÊÆäÊñá‰ª∂‰ª•ËøõË°åËØªÂèñÔºåËøôÊó∂‰ºö‰∏ÄÁõ¥ÈòªÂ°ûÔºåÁõ¥Âà∞ÂÖ∂‰ªñÁöÑËøõÁ®ãÊâìÂºÄËøô‰∏™ÁâπÊÆäÊñá‰ª∂Âπ∂ËøõË°åÂÜô„ÄÇ

@node Command-line directories
@section ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÁõÆÂΩï
@cindex differences in @command{awk} and @command{gawk}, command-line directories
@cindex directories, command-line
@cindex command line, directories on

Ê†πÊçÆ POSIX Ê†áÂáÜÔºåÂú® @command{awk} ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆöÁöÑÊñá‰ª∂ÂêçÂøÖÈ°ªÊòØÊñáÊú¨Êñá‰ª∂ÔºõÂ¶ÇÊûú‰∏çÊòØÂàô‰ºöÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇ
Â§ßÂ§öÊï∞ @command{awk} ÁâàÊú¨Â∞ÜÂëΩ‰ª§Ë°å‰∏äÊåáÂÆöÁõÆÂΩïÁúãÊàêÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇ

Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} Âú®ÂëΩ‰ª§Ë°å‰∏äÊåáÂÆöÁõÆÂΩï‰ºö‰∫ßÁîü‰∏Ä‰∏™ÂëäË≠¶Ôºå‰ΩÜÊòØ‰ºöÂøΩÁï•ÂÆÉ„ÄÇ
ËøôËÆ©‰Ω†Âú® awk Á®ãÂ∫è‰∏≠‰ΩøÁî® shell ÈÄöÈÖçÁ¨¶ÂèòÂæóÊõ¥ÂÆπÊòìÔºö

@example
$ @kbd{gawk -f whizprog.awk *}        @ii{Directories could kill this program}
@end example

Â¶ÇÊûúÊåáÂÆö‰∫Ü @option{--posix} ÊàñËÄÖ @option{--traditional} ÈÄâÈ°πÔºå
@command{gawk} Âàô‰ºöÂ∞ÜÂú®ÂëΩ‰ª§Ë°å‰∏äÊåáÂÆöÁõÆÂΩïËßÜ‰∏∫Ëá¥ÂëΩÈîôËØØ„ÄÇ

Êü•Áúã @ref{Extension Sample Readdir}ÔºåÊúâ‰∏Ä‰∏™ÊñπÂºèÊù•Âú® @command{awk} Á®ãÂ∫èÂ∞ÜÁõÆÂΩïËßÜ‰∏∫ÊúâÁî®ÁöÑÊï∞ÊçÆ„ÄÇ

@node Input Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Ê†πÊçÆ @code{RS} ÁöÑÂÄºÔºåËæìÂÖ•‰ºöË¢´ÂàÜÂâ≤ÊàêËÆ∞ÂΩïÔºåÂèØËÉΩÂ¶Ç‰∏ãÔºö

@multitable @columnfractions .25 .35 .40
@headitem Value of @code{RS} @tab Records are split on @dots{} @tab @command{awk} / @command{gawk}
@item Any single character @tab That character @tab @command{awk}
@item The empty string (@code{""}) @tab Runs of two or more newlines @tab @command{awk}
@item A regexp @tab Text that matches the regexp @tab @command{gawk}
@end multitable

@item
@code{FNR} Ë°®Á§∫Â∑≤Áªè‰ªéÂΩìÂâçËæìÂÖ•Êñá‰ª∂‰∏≠ËØªÂèñ‰∫ÜÂ§öÂ∞ëËÆ∞ÂΩïÔºå@code{NR} ÂàôË°®Âàô‰ªéÊâÄÊúâÁöÑÊñá‰ª∂ÊÄªËØªÂèñ‰∫ÜÂ§öÂ∞ëËÆ∞ÂΩï„ÄÇ

@item
@command{gawk} ËÆæÁΩÆ @code{RT} ÁöÑÂÄº‰∏∫ÈÄöËøá @code{RS} ÂåπÈÖçÁöÑÊñáÊú¨„ÄÇ

@item
Â∞ÜËæìÂÖ•ÂàÜÂâ≤ÊàêËÆ∞ÂΩïÂêéÔºå@command{awk} ‰ºöËøõ‰∏ÄÊ≠•Â∞ÜËÆ∞ÂΩïÂàÜÂâ≤Êàê‰∏çÂêåÁöÑÂüüÔºåÁß∞‰∏∫ @code{$1}Ôºå@code{$2} Á≠âÁ≠â„ÄÇ
@code{$0} ÊòØÊï¥‰∏™ËÆ∞ÂΩïÔºå@code{NF} Ë°®Á§∫ÊúâÂ§öÂ∞ë‰∏™Âüü„ÄÇÈªòËÆ§ÁöÑÂàÜÂâ≤ÂüüÁöÑÊñπÂºèÊòØÂú®Á©∫ÁôΩÁ¨¶‰πãÈó¥ÁöÑÂ≠óÁ¨¶„ÄÇ

@item
ÂüüÂèØ‰ª•ÈÄöËøáÂèòÈáèÊù•ËøõË°åÂèÇËÄÉÔºåÂ¶Ç @code{$NF}„ÄÇÂüü‰πüÂèØ‰ª•Ë¢´ËµãÂÄºÔºåËøô‰ºöÂØºËá¥ @code{$0} ÂÜçÊ¨°Ë¢´‰ΩøÁî®Êó∂Ôºå‰ºöË¢´ÈáçÊñ∞ËÆ°ÁÆó„ÄÇ
ÂØπÂ§ß‰∫é @code{NF} ÁöÑÂÄºÁöÑÂüüËøõË°åËµãÂÄºÂèØ‰ª•ÂàõÂª∫Êñ∞ÁöÑÂüüÔºåÂπ∂ÈáçÂª∫ËÆ∞ÂΩïÔºåÈÄöËøá @code{OFS} Êù•ÂàÜÂâ≤Âüü„ÄÇ
Â¢ûÂ§ß @code{NF} ÁöÑÂÄº‰πü‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇÂáèÂ∞ë @code{NF} ÁöÑÂÄºÔºå‰ºö‰∏¢ÂºÉË∂ÖËøá @code{NF} ‰πãÂ§ñÁöÑÂüüÔºåÂπ∂ÈáçÂª∫ËÆ∞ÂΩï„ÄÇ

@item
ÂüüÂàÜÂâ≤ÊØîËÆ∞ÂΩïÂàÜÂâ≤Ë¶ÅÂ§çÊùÇ‰∏Ä‰∫õÔºö

@multitable @columnfractions .40 .40 .20
@headitem Field separator value @tab Fields are split @dots{} @tab @command{awk} / @command{gawk}
@item @code{FS == " "} @tab On runs of whitespace @tab @command{awk}
@item @code{FS == @var{any single character}} @tab On that character @tab @command{awk}
@item @code{FS == @var{regexp}} @tab On text matching the regexp @tab @command{awk}
@item @code{FS == ""}  @tab Such that each individual character is a separate field @tab @command{gawk}
@item @code{FIELDWIDTHS == @var{list of columns}} @tab Based on character position @tab @command{gawk}
@item @code{FPAT == @var{regexp}} @tab On the text surrounding text matching the regexp @tab @command{gawk}
@end multitable

@item
‰ΩøÁî® @samp{FS = "\n"} ‰ºö‰ΩøÊï¥‰∏™ËÆ∞ÂΩïÊàê‰∏∫‰∏Ä‰∏™ÂüüÔºàÂÅáËÆæÁî®Êç¢Ë°åÁ¨¶Êù•ÂàÜÈöîËÆ∞ÂΩïÔºâ„ÄÇ

@item
@code{FS} ÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åÈÄâÈ°π @option{-F} ËøõË°åËÆæÁΩÆÔºå‰πüÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°å‰∏≠ÁöÑÂèòÈáèËµãÂÄºÊñπÂºèËøõË°åËÆæÁΩÆ„ÄÇ

@item
ÈÄöËøá @code{PROCINFO["FS"]} Êù•Êü•ÁúãÊ≠£Âú®Ë¢´Áî®‰∫éËøõË°åÂüüÂàÜÂâ≤ÁöÑÊñπÂºè„ÄÇ

@item
‰ΩøÁî® @code{getline} ÂèäÂÖ∂‰∏çÂêåÁöÑÊ†ºÂºèÊù•‰ªéÈªòËÆ§ÁöÑËæìÂÖ•ÊµÅ‰πãÂ§ñÁöÑÊñá‰ª∂ÔºåÁÆ°ÈÅìÊàñËÄÖÂπ∂Á®ãÁ≠âÂú∞ÊñπËØªÂèñËÆ∞ÂΩï„ÄÇ

@item
‰ΩøÁî® @code{PROCINFO[@var{file}, "READ_TIMEOUT"]} Êù•ÂØπ‰ªé @var{file} Êñá‰ª∂ËØªËøõË°åË∂ÖÊó∂ËÆæÁΩÆ„ÄÇ

@item
Ê†áÂáÜÁöÑ @command{awk} ‰∏≠ÔºåÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆöÁõÆÂΩïÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØÔºõ
@command{gawk} Âú®Èùû POSIX Ê®°Âºè‰∏≠‰ºöÂøΩÁï•ÂÆÉ‰ª¨„ÄÇ

@end itemize

@c EXCLUDE START
@node Input Exercises
@section ÁªÉ‰π†

@enumerate
@item
‰ΩøÁî® @code{FIELDWIDTHS} ÂèòÈáèÔºàÊü•Áúã @ref{Constant Size}ÔºâÔºåÂÜô‰∏Ä‰∏™Á®ãÂ∫èÊù•ËØªÂèñÈÄâ‰∏æÊï∞ÊçÆÔºå
Ëøô‰∫õÊï∞ÊçÆ‰∏≠ÊØè‰∏™ËÆ∞ÂΩï‰ª£Ë°®‰∏Ä‰∏™ÊäïÁ•®ËÄÖÁöÑÈÄâÁ•®„ÄÇÊûÑÈÄ†‰∏Ä‰∏™ÊñπÂºèÊù•ÂÆö‰πâÂàóÂ¶Ç‰ΩïÊù•‰∏éÊØè‰∏™ÊäïÁ•®È°πËøõË°åÂÖ≥ËÅîÔºåÂπ∂ÊâìÂç∞ÊÄªÁöÑÁ•®Êï∞Ôºå
ÂåÖÊã¨ÊØè‰∏™È°πÁöÑÂºÉÊùÉÁ•®Êï∞„ÄÇ

@item
Âú® @ref{Plain Getline} ‰∏≠ÔºåÊúâ‰∏Ä‰∏™Á®ãÂ∫èÊù•‰ªéËæìÂÖ•‰∏≠ÁßªÈô§ C È£éÊ†ºÁöÑÊ≥®ÈáäÔºà@samp{/* @dots{} */})„ÄÇ
ÈÇ£‰∏™Á®ãÂ∫èÂú®‰∏Ä‰∏™Ë°å‰∏≠ÁªìÊùü‰∏Ä‰∏™Ê≥®ÈáäÔºåÂêåÊó∂ÂºÄÂêØÂè¶‰∏Ä‰∏™Ê≥®ÈáäÊó∂Â∑•‰Ωú‰∏çÊ≠£Á°Æ„ÄÇÂèØ‰ª•ÂÅö‰∏Ä‰∫õÂæàÂ∞èÁöÑÂèòÊõ¥Â∞±ÂèØ‰ª•Êù•‰øÆÂ§çÂÆÉÔºåÂ¶Ç‰ΩïÊù•ÂÅöÔºü

@end enumerate
@c EXCLUDE END

@node Printing
@chapter ÊâìÂç∞ËæìÂá∫

@cindex printing
@cindex output, printing, See printing
Â§ßÂ§öÊï∞ÁºñÁ®ãË°å‰∏∫Â∞±ÊòØ@dfn{ÊâìÂç∞}ÊàñËÄÖËØ¥ÊòØËæìÂá∫‰∏Ä‰∫õÊàñËÄÖÂÖ®ÈÉ®ÁöÑËæìÂÖ•„ÄÇ
‰ΩøÁî® @code{print} ËØ≠Âè•ËøõË°åÁÆÄÂçïÁöÑËæìÂá∫ÔºåÂà©Áî® @code{printf} ËØ≠Âè•ËøõË°åÊ†ºÂºèÂåñËæìÂá∫„ÄÇ
Âú®ÂÜ≥ÂÆöÊâìÂç∞@emph{Âì™‰∏™}ÂÄºÁöÑÂú∫ÊôØ‰∏ãÔºå@code{print} ËØ≠Âè•Ê≤°‰ªÄ‰πàÈôêÂà∂„ÄÇ
‰ΩÜÊòØÊúâ‰∏§‰∏™‰æãÂ§ñÔºå‰Ω†Êó†Ê≥ïÊåáÂÆöÂÆÉ‰ª¨@emph{Â¶Ç‰Ωï}Êù•ÊâìÂç∞ÂÆÉ‰ª¨‚Äî‚ÄîÂ§öÂ∞ëÂàóÔºåÊòØÂê¶‰ΩøÁî®ÂπÇÊñπÂºèÁ≠âÁ≠â„ÄÇ
ÔºàÂØπ‰∫éËøô‰∫õ‰æãÂ§ñÔºåÊü•Áúã @ref{Output Separators} Âíå @ref{OFMT}Ôºâ
ÂØπ‰∫éËßÑËåÉÁöÑÊâìÂç∞Ôºå‰Ω†ÈúÄË¶Å @code{printf} ËØ≠Âè•ÔºàÊü•Áúã @ref{Printf}Ôºâ„ÄÇ

@cindex @code{print} statement
@cindex @code{printf} statement
Èô§‰∫ÜÂü∫Êú¨ÁöÑ‰∏éÊ†ºÂºèÂåñÁöÑÊâìÂç∞ÔºåÊú¨@value{CHAPTER}Ëøò‰ºöËÆ®ËÆ∫ I/O ÈáçÂÆöÂêëÂà∞Êñá‰ª∂‰∏éÁÆ°ÈÅìÁöÑÁõ∏ÂÖ≥ÈóÆÈ¢òÔºå
‰ªãÁªç‰∏Ä‰∫õ @command{gawk} ÂÜÖÈÉ®‰ΩøÁî®ÁöÑÁâπÊÆäÁöÑ@value{FN}ÔºåËøòËÆ®ËÆ∫ @code{close()} Ëøô‰∏™ÂÜÖÂª∫ÂáΩÊï∞„ÄÇ

@menu
* Print::                       The @code{print} statement.
* Print Examples::              Simple examples of @code{print} statements.
* Output Separators::           The output separators and how to change them.
* OFMT::                        Controlling Numeric Output With @code{print}.
* Printf::                      The @code{printf} statement.
* Redirection::                 How to redirect output to multiple files and
                                pipes.
* Special FD::                  Special files for I/O.
* Special Files::               File name interpretation in @command{gawk}.
                                @command{gawk} allows access to inherited file
                                descriptors.
* Close Files And Pipes::       Closing Input and Output Files and Pipes.
* Output Summary::              Output summary.
* Output Exercises::            Exercises.
@end menu

@node Print
@section @code{print} ËØ≠Âè•

Âà©Áî® @code{print} ËøõË°åÁÆÄÂçïÁöÑÔºåÊ†áÂáÜÂåñÁöÑËæìÂá∫„ÄÇÂè™ÈúÄË¶ÅÊåáÂÆöË¶ÅÊâìÂç∞ÁöÑÂ≠ó‰∏≤‰ª•ÂèäÊï∞Â≠óÔºåÂπ∂Áî®ÈÄóÂè∑ÂàÜÈöîÂÆÉ‰ª¨„ÄÇÂÆÉ‰ª¨ËæìÂá∫Êó∂Áî®ÁÆÄÂçïÁöÑÁ©∫Ê†ºËøõË°åÂàÜÈöîÔºåÂπ∂Âú®ÊúÄÂêéÈôÑÂä†‰∏äÊç¢Ë°åÁ¨¶„ÄÇËØ≠Âè•ÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@example
print @var{item1}, @var{item2}, @dots{}
@end example

@noindent
Êï¥‰∏™ÁöÑÈ°πÁõÆÂàóË°®ÂèØ‰ª•Áî®Êã¨Âè∑Êã¨Ëµ∑Êù•Ôºå‰ΩÜÊòØÂèØÈÄâÁöÑ„ÄÇ
Â¶ÇÊûúÈ°πÁõÆË°®ËææÂºè‰ΩøÁî®‰∫Ü @samp{>} ËøôÊ†∑ÁöÑÂÖ≥Á≥ªÊìç‰ΩúÁ¨¶ÔºåÂàôÊã¨Âè∑ÊòØÂøÖÈ°ªÁöÑÔºõÂê¶Âàô‰ºö‰∫ßÁîü‰ª§‰∫∫Âõ∞ÊÉëÁöÑËæìÂá∫ÈáçÂÆöÂêë
ÔºàÊü•Áúã @ref{Redirection}Ôºâ„ÄÇ

Ë¶ÅÊâìÂç∞ÁöÑÈ°πÔºåÂèØ‰ª•ÊòØÂ∏∏ÈáèÂ≠ó‰∏≤ÔºåÊï∞ÂÄºÔºåÂΩìÂâçËÆ∞ÂΩïÁöÑÂüüÔºàÂ¶Ç @code{$1}ÔºâÔºåÂèòÈáèÔºå‰ª•Âèä‰ªªÊÑèÁöÑ @command{awk} Ë°®ËææÂºè„ÄÇÊï∞ÂÄº‰ºöË¢´ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤ÔºåÁÑ∂ÂêéÂÜçÊâìÂç∞„ÄÇ

@cindex records, printing
@cindex lines, blank, printing
@cindex text, printing
ÁÆÄÂçïÁöÑ @samp{print} ËØ≠Âè•ÔºåÂêåÊó∂Ê≤°ÊúâÂ∏¶‰ªª‰ΩïÊâìÂç∞È°πÔºåÁ≠âÂêå‰∫é @samp{print $0}ÔºöÂç≥ÊâìÂç∞Êï¥‰∏™ÁöÑÂΩìÂâçËÆ∞ÂΩï„ÄÇ
Ë¶ÅÊâìÂç∞‰∏Ä‰∏™Á©∫Ë°åÔºåÂàô‰ΩøÁî® @samp{print ""}„ÄÇ
Ë¶ÅÊâìÂ≠óÂõ∫ÂÆöÁöÑÊñáÊú¨ÁâáÔºå‰ΩøÁî®Â≠ó‰∏≤Â∏∏ÈáèÔºåÂ¶Ç @w{@code{"Don't Panic"}} ËøôÊ†∑ÁöÑÈ°π„ÄÇ
Â¶ÇÊûú‰Ω†ÂøòËÆ∞‰ΩøÁî®ÂèåÂºïÂè∑Â≠óÁ¨¶ÔºåÂàôÊñá‰ª∂‰ºöË¢´ÂΩìÊàê @command{awk} Ë°®ËææÂºèÔºåËøôÊ†∑ÊúâÂèØËÉΩ‰ºö‰∫ßÁîü‰∏Ä‰∏™ÈîôËØØ„ÄÇË¶ÅËÆ∞‰ΩèÔºåÂú®‰ªªÊÑè‰∏§‰∏™Ë¶ÅÊâìÂç∞ÁöÑÈ°πÁõÆ‰πãÈó¥Á©∫Ê†ºÊòØË¶ÅÊâìÂç∞ÁöÑ„ÄÇ

Ê≥®ÊÑè @code{print} ËØ≠Âè•ÊòØ‰∏Ä‰∏™ËØ≠Âè•ÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™Ë°®ËææÂºè‚Äî‚Äî‰Ω†‰∏çËÉΩ‰ΩøÁî®Âú®Ê®°Âºè-Âä®‰ΩúËØ≠Âè•‰∏≠ÁöÑÊ®°ÂºèÈÉ®ÂàÜ„ÄÇ

@node Print Examples
@section @code{print} ËØ≠Âè•‰æãÂ≠ê

ÊØè‰∏Ä‰∏™ @code{print} ËØ≠Âè•Ëá≥Â∞ë‰ºö‰∫ßÁîü‰∏ÄË°åËæìÂá∫„ÄÇ‰ΩÜÊòØ‰∏çÈôê‰∫éÂè™ËæìÂá∫‰∏ÄË°å„ÄÇÂ¶ÇÊòØÈ°πÁõÆ‰∏≠ÁöÑÂÄºÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÂπ∂ÂåÖÂê´‰∏Ä‰∏™Êç¢Ë°åÁ¨¶ÔºåÂàôÊç¢Ë°åÁ¨¶‰ºö‰∏éÂâ©‰∏ãÁöÑ‰∏≤‰∏ÄËµ∑ËæìÂá∫„ÄÇ‰∏Ä‰∏™Âçï‰∏ÄÁöÑ @code{print} ËØ≠Âè•ÂèØ‰ª•ÊåâËøôÁßçÊñπÂºèÈ¶ñÂÖà‰ªªÊÑèË°åÊï∞„ÄÇ

@cindex newlines, printing
‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÊâìÂç∞ÂÜÖÂµå‰∫Ü
@ifinfo
Êç¢Ë°åÁ¨¶
Ôºà@samp{\n} ÊòØ‰∏Ä‰∏™ËΩ¨‰πâÂ∫èÂàóÔºåÁî®Êù•Ë°®Á§∫Êç¢Ë°åÁ¨¶ÔºõÂèÇËÄÉ @ref{Escape Sequences} Ôºâ
@end ifinfo
@ifhtml
Êç¢Ë°åÁ¨¶
Ôºà@samp{\n} ÊòØ‰∏Ä‰∏™ËΩ¨‰πâÂ∫èÂàóÔºåÁî®Êù•Ë°®Á§∫Êç¢Ë°åÁ¨¶ÔºõÂèÇËÄÉ @ref{Escape Sequences} Ôºâ
@end ifhtml
@ifnotinfo
@ifnothtml
Êç¢Ë°åÁ¨¶
@end ifnothtml
@end ifnotinfo
ÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{awk 'BEGIN @{ print "line one\nline two\nline three" @}'}
@print{} line one
@print{} line two
@print{} line three
@end example

@cindex fields, printing
‰∏ã‰∏Ä‰∏™‰æãÂ≠êÔºå‰ºöËøêË°åÂú®Êñá‰ª∂ @file{inventory-shipped} ‰∏äÔºåÂπ∂ÊâìÂç∞ÊØè‰∏™ËæìÂÖ•ËÆ∞ÂΩïÁöÑÂâç‰∏§‰∏™ÂüüÔºåÂÆÉ‰ª¨‰πãÈó¥ÊúâÁ©∫Ê†ºÔºö

@example
$ @kbd{awk '@{ print $1, $2 @}' inventory-shipped}
@print{} Jan 13
@print{} Feb 15
@print{} Mar 15
@dots{}
@end example

@cindex @code{print} statement, commas, omitting
@cindex troubleshooting, @code{print} statement@comma{} omitting commas
Â∏∏ËßÅÁöÑ‰ΩøÁî® @code{print} ËØ≠Âè•ÁöÑÈîôËØØÊòØÁúÅÁï•‰∫ÜÈ°πÁõÆ‰πãÈó¥ÁöÑÈÄóÂè∑„ÄÇËøôÂ∏∏‰ºöÂØºËá¥Âú®ËæìÂá∫‰∏≠ÊâÄÊúâÁöÑÈ°πÁõÆÊå§Âú®‰∫Ü‰∏Ä‰∫õÔºåÁõ∏‰∫í‰πãÈó¥Ê≤°ÊúâÁ©∫Ê†º„ÄÇÂéüÂõ†Âú®‰∫éÂú® @command{awk} ‰∏≠ÔºåÂπ∂Âàó‰∏§‰∏™Â≠ó‰∏≤Ë°®Á§∫ÁöÑÊòØÂêàÂπ∂ÂÆÉ‰ª¨„ÄÇËøôÊòØÁõ∏ÂêåÁöÑÁ®ãÂ∫èÔºå‰ΩÜÊòØÊ≤°ÊúâÈÄóÂè∑ÁöÑÊÉÖÂÜµÔºö

@example
$ @kbd{awk '@{ print $1 $2 @}' inventory-shipped}
@print{} Jan13
@print{} Feb15
@print{} Mar15
@dots{}
@end example

@cindex @code{BEGIN} pattern, headings@comma{} adding
ÂØπ‰∫é‰∏çÁÜüÊÇâ @file{inventory-shipped} Êñá‰ª∂ÁöÑËØªËÄÖÔºå
‰∏äÈù¢ÁöÑ‰∏§‰∏™‰æãÂ≠êÁöÑËæìÂá∫Ê≤°‰ªÄ‰πàÊÑè‰πâ„ÄÇÂºÄÂ§¥ÁöÑË°åÂèØËÉΩÊõ¥Ê∏ÖÊ•ö„ÄÇ
ËÆ©Êàë‰ª¨Âú®Êàë‰ª¨ÁöÑÊúà‰ªΩÔºà@code{$1}ÔºâË°®‰ª•ÂèäÂ∑≤ÁªèÂèëÈÄÅÁöÑËìùÂåÖÔºà@code{$2}Ôºâ‰∏≠Ê∑ªÂä†‰∏Ä‰∫õÂ§¥ÈÉ®‰ø°ÊÅØÔºö
Êàë‰ª¨‰ΩøÁî® @code{BEGIN} ÔºàÂèÇËÄÉ @ref{BEGIN/END}ÔºâÊù•ÂÆûÁé∞ÔºåËøôÊ†∑Â§¥ÈÉ®Âè™‰ºöÊâìÂç∞‰∏ÄÊ¨°Ôºö

@example
awk 'BEGIN @{  print "Month Crates"
              print "----- ------" @}
           @{  print $1, $2 @}' inventory-shipped
@end example

@noindent
ÂΩìÊâßË°åÊó∂ÔºåÁ®ãÂ∫èÊâìÂç∞Â¶Ç‰∏ãÔºö

@example
Month Crates
----- ------
Jan 13
Feb 15
Mar 15
@dots{}
@end example

@noindent
ÁÑ∂ËÄåÔºåÂîØ‰∏ÄÁöÑÈóÆÈ¢òÊòØÂ§¥ÈÉ®‰ø°ÊÅØ‰∏éË°®Êï∞ÊçÆÂπ∂Ê≤°ÊúâÂØπÈΩê„ÄÇÊàë‰ª¨ÂèØ‰ª•Âú®ÂÖ∂‰∏≠ÊâìÂç∞‰∏Ä‰∫õÁ©∫Ê†ºÊù•‰øÆÂ§çËøô‰∏™ÈóÆÈ¢òÔºö

@example
@group
awk 'BEGIN @{ print "Month Crates"
             print "----- ------" @}
           @{ print $1, "     ", $2 @}' inventory-shipped
@end group
@end example

@cindex @code{printf} statement, columns@comma{} aligning
@cindex columns, aligning
Â¶ÇÊûúË¶Å‰øÆÂ§çÁöÑÂàóÊúâÂæàÂ§öÔºåËøôÊ†∑ÁöÑ‰øÆÂ§çÊñπÂºè‰ºöÈùûÂ∏∏ÁπÅÁêê„ÄÇËÆ°ÁÆó‰∏§‰∏â‰∏™ÂàóÊòØÂæàÁÆÄÂçïÁöÑÔºå
‰ΩÜÊòØË∂ÖËøáËøô‰∏™Êï∞ÁöÑÊó∂ÂÄôÔºåÊâÄËÄóÁöÑÊó∂Èó¥Â∞±ÂæàÂ§ö‰∫Ü„ÄÇ
ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî® @code{printf} ËØ≠Âè•ÂéüÂõ†ÔºàÊü•Áúã @ref{Printf}ÔºâÔºõÂÆÉÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™ÁâπÂà´ÂäüËÉΩÂ∞±ÊòØÂØπÈΩêÊï∞ÊçÆÂàó„ÄÇ

@cindex line continuations, in @code{print} statement
@cindex @code{print} statement, line continuations and
@quotation ÊèêÁ§∫
‰Ω†ÂèØ‰ª•ÂØπ @code{print} ÊàñËÄÖ @code{printf} ËøõË°åÁª≠Ë°åÔºåÂè™ÈúÄË¶ÅÁÆÄÂçïÂú∞Âú®‰ªªÊÑèÁöÑÈÄóÂè∑ÂêéÈù¢ÊîæÁΩÆ‰∏Ä‰∏™Êç¢Ë°åÁ¨¶Âç≥ÂèØ„ÄÇ
ÔºàÊü•Áúã @ref{Statements/Lines}Ôºâ„ÄÇ
@end quotation

@node Output Separators
@section ËæìÂá∫ÂàÜÈöîÁ¨¶

@cindex @code{OFS} variable
Â¶ÇÂâçÊâÄËø∞Ôºå@code{print} ËØ≠Âè•ÂåÖÂê´‰∫ÜÁî±ÈÄóÂè∑ÂàÜÈöîÁöÑÈ°πÁõÆÂàóË°®„ÄÇ
Âú®ËæìÂá∫‰∏≠ÔºåÈ°πÁõÆ‰∏ÄËà¨ÊòØÁî®Á©∫Ê†ºËøõË°åÂàÜÈöî„ÄÇ‰ΩÜÊòØ‰πü‰∏ç‰∏ÄÂÆöÈùûË¶ÅËøôÊ†∑ÔºåÁ©∫Ê†ºÂè™ÊòØÈªòËÆ§ÊÉÖÂÜµ„ÄÇ
‰ªªÊÑèÁöÑÂ≠ó‰∏≤ÈÉΩÂèØ‰ª•Áî®Êù•ÂΩìÊàêÊòØËæìÂá∫ÂàÜÈöî‰ºöÔºåÂè™ÈúÄË¶ÅËÆæÂÆöÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{OFS}„ÄÇ
Ëøô‰∏™ÂèòÈáèÂàùÂßãÂÄºÂ∞±ÊòØ‰∏≤ @w{@code{" "}}Ôºà‰∏Ä‰∏™Á©∫Ê†ºÔºâ„ÄÇ

Êï¥‰∏™ÁöÑ @code{print} ËØ≠Âè•ËæìÂá∫Áß∞‰∏∫‰∏Ä‰∏™@dfn{ËæìÂá∫ËÆ∞ÂΩïÔºàoutput recordÔºâ}„ÄÇ
ÊØè‰∏Ä‰∏™ @code{print} ËØ≠Âè•ËæìÂá∫‰∏Ä‰∏™ËæìÂá∫ËÆ∞ÂΩïÔºåÁÑ∂ÂêéËæìÂá∫‰∏Ä‰∏™@dfn{ËæìÂá∫ËÆ∞ÂΩïÂàÜÈöîÁ¨¶}ÔºàÊàñËÄÖ @code{ORS}Ôºâ„ÄÇ
@code{ORS} ÁöÑÂàùÂßãÂÄº‰∏∫‰∏≤ @code{"\n"}Ôºà‰∏Ä‰∏™Êç¢Ë°åÁ¨¶Ôºâ„ÄÇÂõ†Ê≠§ÔºåÊØè‰∏Ä‰∏™ @code{print} ËØ≠Âè•‰∫ßÁîü‰∏Ä‰∏™ÂçïÁã¨ÁöÑË°å„ÄÇ

@cindex output, records
@cindex output record separator, See @code{ORS} variable
@cindex @code{ORS} variable
@cindex @code{BEGIN} pattern, @code{OFS}/@code{ORS} variables, assigning values to
‰∏∫‰∫ÜÊîπÂèòËæìÂá∫Âüü‰ª•ÂèäËÆ∞ÂΩïÁöÑÂàÜÈöîÊñπÂºèÔºåÁªôÂèòÈáè @code{OFS} ‰ª•Âèä @code{ORS} ËµãÂÄºÂç≥ÂèØ„ÄÇ
ÈÄöÂ∏∏ÂÅöËøô‰ª∂‰∫ãÁöÑÂú∞ÊñπÂ∞±ÊòØ @code{BEGIN} ËßÑÂàôÈáåÔºàÊü•Áúã @ref{BEGIN/END}ÔºâÔºå
Âõ†Ê≠§ÔºåÂú®‰ªªÊÑèÁöÑËæìÂÖ•Ë¢´Â§ÑÁêÜ‰πãÂâçÂ∞±ÂèØ‰ª•Â∞±Áª™„ÄÇ‰πüÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÂØπÂÖ∂ËøõË°åËµãÂÄºÔºåÈúÄË¶ÅÊîæÂú®ËæìÂÖ•Êñá‰ª∂‰πãÂâçÔºå
ÊàñËÄÖ‰ΩøÁî® @option{-v} ÂëΩ‰ª§Ë°åÈÄâÈ°πÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ
‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊâìÂç∞ËÆ∞ÂΩïÁöÑÁ¨¨‰∏Ä‰∏éÁ¨¨‰∫å‰∏™ÂüüÔºåÂπ∂Áî®ÂàÜÂè∑ÂàÜÈöîÔºåÂπ∂Âú®ÊØè‰∏™Êç¢Ë°åÁ¨¶ÁöÑÂêéÈù¢Â¢ûÂä†‰∏Ä‰∏™Á©∫Ë°åÔºö

@example
$ @kbd{awk 'BEGIN @{ OFS = ";"; ORS = "\n\n" @}}
>            @kbd{@{ print $1, $2 @}' mail-list}
@print{} Amelia;555-5553
@print{}
@print{} Anthony;555-3412
@print{}
@print{} Becky;555-7685
@print{}
@print{} Bill;555-1675
@print{}
@print{} Broderick;555-0542
@print{}
@print{} Camilla;555-2912
@print{}
@print{} Fabius;555-1234
@print{}
@print{} Julie;555-6699
@print{}
@print{} Martin;555-6480
@print{}
@print{} Samuel;555-3430
@print{}
@print{} Jean-Paul;555-2127
@print{}
@end example

Â¶ÇÊûú @code{ORS} ÁöÑÂÄº‰∏≠‰∏çÂåÖÂê´Êç¢Ë°åÁ¨¶ÔºåÁ®ãÂ∫èÁöÑËæìÂá∫Â∞±‰ºöÊå§Âú®‰∏ÄË°å‰∏≠„ÄÇ

@node OFMT
@section ÊéßÂà∂ @code{print} ÁöÑÊï∞Â≠óËæìÂá∫ 
@cindex numeric, output format
@cindex formats@comma{} numeric output
ÂΩìÁî® @code{print} ËØ≠Âè•ÊâìÂç∞Êï∞ÂÄºÊó∂Ôºå@command{awk} ÂÜÖÈÉ®‰ºöÂ∞ÜÊØè‰∏Ä‰∏™Êï∞ÂÄºËΩ¨Êç¢Êàê‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÔºåÁÑ∂ÂêéÊâìÂç∞ÂÆÉ„ÄÇ
@command{awk} ‰ΩøÁî® sprintf ÂáΩÊï∞Êù•ÂÅöËøôÊ†∑ÁöÑËΩ¨Êç¢ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
ÁõÆÂâçÔºåÂè™ÈúÄË¶ÅÁü•ÈÅì @code{sprintf()} Êé•Âèó‰∏Ä‰∏™Ê†ºÂºèËßÑËåÉÔºàÂ≠ó‰∏≤ÔºâÁî®‰ª•ÂëäËØâÂ¶Ç‰ΩïÊù•ÂØπÊï∞Â≠óÊàñËÄÖÂ≠ó‰∏≤Â¶Ç‰ΩïËøõË°åÊ†ºÂºèÂåñÔºåÂπ∂‰∏îÊï∞Â≠óÊúâÂæàÂ§öÁßçÊñπÂºèÊù•ËøõË°åÊ†ºÂºèÂåñ„ÄÇ
‰∏çÂêåÁöÑÊ†ºÂºèËßÑËåÉ‰ºöÂú® 
@ref{Control Letters} 
‰∏≠ËÆ®ËÆ∫ÂæóÊõ¥Âä†ËØ¶ÁªÜ„ÄÇ

@cindexawkfunc{sprintf}
@cindex @code{OFMT} variable
@cindex output, format specifier@comma{} @code{OFMT}
È¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{OFMT} ÂåÖÂê´‰∫Ü @code{print} Êó∂ÊÉ≥Â∞ÜÊï∞ÂÄºËΩ¨Êç¢ÊàêÂ≠ó‰∏≤Ôºå
‰ΩøÁî® @code{sprintf} Êó∂ÁöÑÊ†ºÂºèËßÑËåÉ„ÄÇ@code{OFMT} ÁöÑÈªòËÆ§ÁöÑÂÄºÊòØ @code{"%.6g"}„ÄÇ
@code{print} ÊâìÂç∞Êï∞Â≠óÁöÑÊ†ºÂºèÂèØËÉΩÈÄöËøáÁªô @code{OFMT} Ëµã‰∫à‰∏çÂêåÁöÑÊ†ºÂºèËßÑËåÉÊù•ÊîπÂèòÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊâÄÁ§∫Ôºö

@example
$ @kbd{awk 'BEGIN @{}
>   @kbd{OFMT = "%.0f"  # print numbers as integers (rounds)}
>   @kbd{print 17.23, 17.54 @}'}
@print{} 17 18
@end example

@noindent
@cindex dark corner, @code{OFMT} variable
@cindex POSIX @command{awk}, @code{OFMT} variable and
@cindex @code{OFMT} variable, POSIX @command{awk} and
Ê†πÊçÆ POSIX Ê†áÂáÜÔºåÂ¶ÇÊûú @code{OFMT} ÂåÖÂê´ÁöÑ‰∏çÊòØÊµÆÁÇπËΩ¨Êç¢ËßÑËåÉÁöÑÂÖ∂‰ªñ‰ªªÊÑèÊï∞ÂÄºÔºå‰ºö‰∫ßÁîüÊú™ÂÆö‰πâÁöÑ @command{awk} Ë°å‰∏∫„ÄÇ
@value{DARKCORNER}

@node Printf
@section ‰ΩøÁî® @code{printf} ËØ≠Âè•ÁæéÂåñÊâìÂç∞

@cindex @code{printf} statement
@cindex output, formatted
@cindex formatting output
‰∏∫‰∫ÜÊØî @code{print} Êèê‰æõÊõ¥Âä†Á≤æÂáÜÂú∞ÊéßÂà∂ËæìÂá∫Ê†ºÂºèÔºåÂèØ‰ª•‰ΩøÁî® @code{printf}„ÄÇ@code{printf} ÂèØ‰ª•ÊåáÂÆöÊØè‰∏™È°πÁõÆÁöÑÂÆΩÂ∫¶Ôºå‰ª•Âèä‰∏ÄÁ≥ªÂàóÁöÑÊï∞ÂÄºËæìÂá∫Ê†ºÂºèÔºàÂ¶Ç‰ΩøÁî®ÁöÑÊòØ‰ªÄ‰πàÂü∫Êï∞ÔºåÊòØÂê¶ÊâìÂç∞ÂπÇÊåáÊï∞ÂΩ¢ÂºèÔºåÊòØÂê¶ÊâìÂç∞Á¨¶Âè∑Ôºå‰ª•ÂèäÂú®Â∞èÊï∞ÁÇπÂêéË¶ÅÊâìÂç∞Â§ö‰∏™‰ΩçÁ≠âÔºâ„ÄÇ

@menu
* Basic Printf::                Syntax of the @code{printf} statement.
* Control Letters::             Format-control letters.
* Format Modifiers::            Format-specification modifiers.
* Printf Examples::             Several examples.
@end menu

@node Basic Printf
@subsection ‰ΩøÁî® @code{printf} ËØ≠Âè•ÁæéÂåñÊâìÂç∞

@cindex @code{printf} statement, syntax of
‰∏Ä‰∏™ÁÆÄÂçïÁöÑ @code{printf} ËØ≠Âè•ÊòØËøôÊ†∑ÁöÑÔºö

@example
printf @var{format}, @var{item1}, @var{item2}, @dots{}
@end example

@noindent
‰∏é @code{print} Áõ∏‰ººÔºåÊï¥‰∏™ÁöÑÂèÇÊï∞ÂàóË°®ÂèØ‰ª•‰ΩøÁî®Êã¨Âè∑Êã¨Ëµ∑Êù•„ÄÇËøôÈáå‰πüÊòØ‰∏ÄÊ†∑Ôºå
Â¶ÇÊûúÈ°πÁõÆË°®ËææÂºè‰∏≠ÂåÖÂê´‰∫Ü @samp{>} ÂÖ≥Á≥ªË°®ËææÊìç‰ΩúÁ¨¶ÔºåÂàôÊã¨Âè∑ÊòØÂøÖÈ°ªÁöÑÔºåÂê¶Âàô‰ºöÂØºËá¥‰∏Ä‰∏™ËæìÂá∫ÈáçÂÆöÂêëËÄå‰ΩøÁî®Âõ∞ÊÉë
ÔºàÊü•Áúã @ref{Redirection}Ôºâ„ÄÇ

@cindex format specifiers
Âú® @code{print} ‰∏é @code{printf} ‰πãÈó¥ÁöÑ‰∏çÂêåÔºåÂ∞±ÊòØ @var{format} ÂèÇÊï∞„ÄÇ
ËøôÊòØ‰∏Ä‰∏™‰ºöË¢´ÂΩìÊàêÂ≠ó‰∏≤ËØÜÂà´ÁöÑË°®ËææÂºèÔºåÂÆÉÊåáÂÆö‰∫ÜÊØè‰∏™ÂèÇÊï∞ÁöÑËæìÂá∫Ê†ºÂºè„ÄÇÂÆÉÁß∞‰∏∫@dfn{Ê†ºÂºèÂ≠ó‰∏≤}„ÄÇ

Ê†ºÂºèÂ≠ó‰∏≤‰∏é ISO C Â∫ì‰∏≠ÁöÑÂáΩÊï∞ @code{printf()} ÈùûÂ∏∏Á±ª‰ºº„ÄÇ
Â§ßÂ§öÁöÑÊ†ºÂºèÊñáÊú¨ÈÉΩËæìÂá∫Êù•ËØ¥ÈÉΩÊòØÂ≠óÈù¢ÁöÑ„ÄÇÂú®Ëøô‰∫õÊñáÊú¨‰πãÈó¥ÂàÜÊï£ÁùÄ@dfn{Ê†ºÂºèÊåáÂÆöÁ¨¶}„ÄÇÊØè‰∏™È°πÁõÆ‰∏Ä‰∏™„ÄÇÊØè‰∏™Ê†ºÂºèÊåáÂÆöÁ¨¶ÈÉΩÂÆö‰πâ‰∫Ü‰∏ã‰∏Ä‰∏™ËæìÂá∫ÁöÑÈ°πÁõÆÂú®Áõ∏Â∫î‰ΩçÁΩÆÁöÑÊ†ºÂºè„ÄÇ

@code{printf} ‰∏ç‰ºöËá™Âä®Âú∞Âú®ËæìÂá∫‰∏≠ÈôÑÂä†‰∏Ä‰∏™Êç¢Ë°åÁ¨¶„ÄÇÂÆÉÂè™ËæìÂá∫Ê†ºÂºè‰∏≤ÊâÄÂÆö‰πâÁöÑ‰∏≤„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÈúÄË¶ÅÊç¢Ë°åÁ¨¶Ôºå‰Ω†ÈúÄË¶ÅÂú®Ê†ºÂºè‰∏≠Âä†ÂÖ•„ÄÇËæìÂá∫ÂàÜÈöîÁ¨¶ÂèòÈáè @code{OFS} ‰ª•Âèä @code{ORS} Âú® @code{printf} ËØ≠Âè•‰∏≠Ê≤°Êúâ‰ΩúÁî®„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{awk 'BEGIN @{}
>    @kbd{ORS = "\nOUCH!\n"; OFS = "+"}
>    @kbd{msg = "Don\47t Panic!"}
>    @kbd{printf "%s\n", msg}
> @kbd{@}'}
@print{} Don't Panic!
@end example

@noindent
‰æãÂ≠ê‰∏≠ÔºåÊó†ËÆ∫ÊòØ @samp{+} ËøòÊòØ @samp{OUCH!} ÈÉΩÊ≤°ÊúâÂá∫Áé∞Âú®ËæìÂá∫‰ø°ÊÅØ‰∏≠„ÄÇ

@node Control Letters
@subsection Ê†ºÂºèÊéßÂà∂Â≠óÊØç
@cindex @code{printf} statement, format-control characters
@cindex format specifiers, @code{printf} statement

Ê†ºÂºèÊåáÂÆöÁ¨¶‰ª•Â≠óÁ¨¶ @samp{%} ÂºÄÂßãÔºåÂπ∂‰ª•@dfn{Ê†ºÂºèÊéßÂà∂Â≠óÊØç}ÁªìÊùü‚Äî‚ÄîÊï¥‰∏™Ê†ºÂºèÊåáÂÆöÁ¨¶ÂëäËØâ @code{printf} ËØ≠Âè•Â¶Ç‰ΩïÊù•ËæìÂá∫È°πÁõÆ„ÄÇ
Ê†ºÂºèÂ≠óÊØçÊåáÂÆö‰∫ÜË¶ÅÊâìÂç∞ÁöÑÂÄºÁöÑ@emph{Á±ªÂûã}„ÄÇÊ†ºÂºèÊåáÂÆöÁ¨¶ÁöÑÂÖ∂‰ΩôÈÉ®ÂàÜÂàôÁî±ÂèØÈÄâÁöÑ@dfn{‰øÆÈ•∞Á¨¶}ÁªÑÊàêÔºå
Ëøô‰∫õ‰øÆÈ•∞Á¨¶ÊéßÂà∂@emph{Â¶Ç‰Ωï}Êù•ÊâìÂç∞Ëøô‰∫õÂÄºÔºåÂ¶ÇÂüüÂÆΩÂ∫¶„ÄÇ‰∏ãÈù¢ÊòØÊ†ºÂºèÊéßÂà∂Â≠óÊØçÔºö

@c @asis for docbook to come out right
@table @asis
@item @code{%c}
Â∞ÜÊï∞Â≠óÊâìÂç∞Êàê‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÊâÄÂú® @samp{printf "%c", 65} ËæìÂá∫Â≠óÊØç @samp{A}„ÄÇ
Â¶ÇÊûúÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÂàôËæìÂá∫Â≠ó‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ

@cindex dark corner, format-control characters
@cindex @command{gawk}, format-control characters
@quotation ÊèêÁ§∫
POSIX Ê†áÂáÜËØ¥ÊòØÊâìÂç∞Â≠ó‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇÂú®Â§öÂ≠óËäÇËØ≠Ë®Ä‰∏≠Ôºå@command{gawk} ‰ºöÂ∞ùËØïÂ∞ÜÂ≠ó‰∏≤ÁöÑÈ¶ñÂ≠óËäÇËΩ¨Êç¢Êàê‰∏Ä‰∏™ÊúâÊïàÁöÑÂÆΩÂ≠óËäÇÔºåÁÑ∂ÂêéÊâìÂç∞ÈÇ£‰∏™Â≠óÁ¨¶ÁöÑÂ§öÂ≠óËäÇÁºñÁ†Å„ÄÇÁõ∏‰ººÂú∞ÔºåÂΩìÊâìÂç∞‰∏Ä‰∏™Êï∞ÂÄºÊó∂Ôºå@command{gawk} ÂÖÅËÆ∏Êï∞ÂÄºÁöÑÂÄºÂú®‰∏Ä‰∏™ÂÆΩÂ≠óÁ¨¶ÊâÄÂÖÅËÆ∏ÁöÑÂÄºËåÉÂõ¥ÂÜÖ„ÄÇÂ¶ÇÊûúËΩ¨Êç¢ÊàêÂ§öÂ≠óËäÇÁºñÁ†ÅÂá∫ÈîôÔºå@command{gawk} ‰ºö‰ΩøÁî®Êï∞ÂÄºÁöÑ‰Ωé 8 ‰ΩçÊù•ÊâìÊàêÂ≠óÁ¨¶ÊâìÂç∞„ÄÇ

ÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{awk} ‰∏ÄËà¨‰∏•Ê†ºÈôêÂà∂‰∏∫ÊâìÂç∞Â≠ó‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óËäÇÔºåÊàñËÄÖÊï∞ÂÄºÁöÑËåÉÂõ¥Âú®‰∏Ä‰∏™Â≠óËäÇÁöÑÊâÄË°®Á§∫ÁöÑËåÉÂõ¥ÂÜÖÔºà0-255Ôºâ„ÄÇ
@end quotation


@item @code{%d}, @code{%i}
ÊâìÂç∞‰∏Ä‰∏™ÂçÅËøõÂà∂Êï¥Êï∞„ÄÇ‰∏§‰∏™ÊéßÂà∂Â≠óÊØçÊòØÁ≠âÂêåÁöÑ„ÄÇÔºà@samp{%i} ËßÑËåÉ‰∏ªË¶ÅÊòØ‰∏∫‰∫ÜÂÖºÂÆπ ISO C„ÄÇÔºâ

@item @code{%e}, @code{%E}
Â∞ÜÊï∞ÂÄºÊâìÂç∞ÊàêÁßëÂ≠¶ËÆ°ÁÆóÊñπÂºèÔºàÂπÇÊåáÊï∞ÔºâÔºå‰æãÂ¶ÇÔºö

@example
printf "%4.3e\n", 1950
@end example

@noindent
‰ºöÊâìÂç∞ @samp{1.950e+03}ÔºåÂ∏¶Êúâ 4 ‰∏™ÊúâÊïà‰ΩçÔºåÂÖ∂‰∏≠ 3 ‰∏™Âú®Â∞èÊï∞ÁÇπÁöÑÂêéÈù¢„ÄÇ
Ôºà@samp{4.3} Ë°®Á§∫‰∏§‰∏™‰øÆÈ•∞Á¨¶Ôºå‰ºöÂú®‰∏ã‰∏™@value{SUBSECTION}‰∏≠ËøõË°åËÆ®ËÆ∫„ÄÇÔºâ
@samp{%E} Ë°®Á§∫Âú®ËæìÂá∫‰∏≠‰ΩøÁî® @samp{E} ËÄå‰∏çÊòØ @samp{e} „ÄÇ

@item @code{%f}
ÊâìÂç∞‰∏Ä‰∏™ÊµÆÁÇπÊï∞Ôºå‰æãÂ¶ÇÔºö

@example
printf "%4.3f", 1950
@end example

@noindent
‰ºöÊâìÂç∞ @samp{1950.000}ÔºåÂ∏¶Êúâ 4 ‰∏™ÊúâÊïà‰ΩçÔºå3 ‰∏™Âú®Â∞èÊï∞ÁÇπÂêéÈù¢„ÄÇ
Ôºà@samp{4.3} Ë°®Á§∫‰∏§‰∏™‰øÆÈ•∞Á¨¶Ôºå‰ºöÂú®‰∏ã‰∏™@value{SUBSECTION}‰∏≠ËøõË°åËÆ®ËÆ∫„ÄÇÔºâ

Âú®ÊîØÊåÅ IEEE 754 ÊµÆÁÇπÊ†ºÂºèÁöÑÁ≥ªÁªü‰∏äÔºå‰ª£Ë°®Ë¥üÊó†Á©∑‰ºöÊ†ºÂºèÂåñ‰∏∫ @samp{-inf}ÔºåÊàñËÄÖ @samp{-infinity}Ôºå
Ê≠£Êó†Á©∑Âàô‰∏∫ @samp{inf} ÊàñËÄÖ @samp{infinity}„ÄÇÂØπ‰∫é‚Äú‰∏çÊòØÊï∞ÂÄº‚ÄùËøôÁßçÁâπÊÆäÊÉÖÂÜµÔºåÂàôÊ†ºÂºèÂåñ‰∏∫ @samp{-nan} ÊàñËÄÖ @samp{ nan}
ÔºàÊü•Áúã @ref{Math Definitions}Ôºâ„ÄÇ

@item @code{%F}
Á±ª‰ºº‰∫é @samp{%f}ÔºåÂè™ÊòØÊó†Á©∑Â§ßÔºå‰ª•Âèä‚Äú‰∏çÊòØÊï∞ÂÄº‚Äù ‰ºö‰ΩøÁî®Â§ßÂÜôÂ≠óÊØçËæìÂá∫„ÄÇ

@samp{%F} ÊòØ‰∏Ä‰∏™ ISO C ÁöÑ‰∏Ä‰∏™Êâ©Â±ïÔºå‰∏çÊòØÊâÄÊúâÁöÑÁ≥ªÁªüÈÉΩÊîØÊåÅ„ÄÇÂØπ‰∫é‰∏çÊîØÊåÅÁöÑÁ≥ªÁªüÔºå@command{gawk} ‰ºö‰ΩøÁî® @samp{%f} Êù•‰ª£Êõø„ÄÇ

@item @code{%g}, @code{%G}
‰ª•ÁßëÂ≠¶ÊñπÂºèÊàñËÄÖÊµÆÁÇπÊï∞ÊñπÂºèÊâìÂç∞ÊµÆÊï∞ÂÄºÔºåÁúãÂì™‰∏™‰ΩøÁî®Êõ¥Â∞ëÁöÑÂ≠óÁ¨¶ÔºåÂ¶ÇÊûúÁªìÊûúÊòØ‰ª•ÁßëÂ≠¶ËÆ°Êï∞ÊñπÂºèÔºå@samp{%G} Âàô‰ΩøÁî® @samp{E} ËÄå‰∏çÊòØ‰ΩøÁî® @samp{e} „ÄÇ

@item @code{%o}
ÊâìÂç∞‰∏Ä‰∏™Êó†Á¨¶Âè∑ÂÖ´ËøõÂà∂Êï¥Êï∞ÔºàÊü•Áúã @ref{Nondecimal-numbers}Ôºâ„ÄÇ

@item @code{%s}
ÊâìÂç∞‰∏Ä‰∏™Â≠ó‰∏≤„ÄÇ

@item @code{%u}
ÊâìÂç∞‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥Êï∞„ÄÇÔºà‰ΩøÁî®Ëøô‰∏™Ê†ºÂºèË¶ÅÊ≥®ÊÑèÔºåÂõ†Ê≠§Âú® @command{awk} ‰∏≠ÁöÑÊâÄÊúâÊï∞ÂÄºÈÉΩÊòØÊµÆÁÇπÊï∞ÔºåËøô‰∏™Âè™ÊòØ‰∏∫‰∫Ü‰∏é ISO C ‰øùÊåÅÂÖºÂÆπ„ÄÇÔºâ

@item @code{%x}, @code{%X}
ÊâìÂç∞‰∏Ä‰∏™Êó†Á¨¶Âè∑ÁöÑÂçÅÂÖ≠ËøõÂà∂Êï¥Êï∞Ôºå@samp{%X} ‰ΩøÁî®Â≠óÊØç @samp{A} Âà∞ @samp{F} ËÄå‰∏çÊòØ @samp{a} Âà∞ @samp{f}
ÔºàÊü•Áúã @ref{Nondecimal-numbers}Ôºâ„ÄÇ

@item @code{%%}
ÊâìÂç∞ @samp{%}„ÄÇËøô‰∏™‰∏ç‰ºöÊ∂àËÄóÂêéÈù¢ÁöÑÂèÇÊï∞ÔºåÂπ∂‰∏îÂøΩÁï•ÊéâÊâÄÊúâÁöÑ‰øÆÈ•∞Á¨¶„ÄÇ
@end table

@cindex dark corner, format-control characters
@cindex @command{gawk}, format-control characters
@quotation ÊèêÁ§∫
ÂΩì‰ΩøÁî®Êï¥Êï∞ÁöÑÊéßÂà∂Â≠óÊØçÊù•ÊâìÂç∞ÂÖ∂ÂÄºË∂ÖËøá C Êï¥Êï∞ÁöÑÊúÄÂ§ßÁöÑËåÉÂõ¥Êó∂Ôºå@command{gawk} ‰ºöÂàáÊç¢Âà∞ @samp{%g} Ëøô‰∏™Ê†ºÂºèÊåáÂÆöÁ¨¶„ÄÇ
Â¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠‰ΩøÁî®‰∫Ü @option{--lint} ÈÄâÈ°πÔºàÊü•Áúã @ref{Options}ÔºâÔºå
@command{gawk} ‰ºöÁîüÊàê‰∏Ä‰∏™ÂëäË≠¶„ÄÇÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{awk} ÊúâÂèØËÉΩÊâìÂç∞‰∏Ä‰∏™Êó†ÊïàÁöÑÂÄºÔºåÊàñËÄÖ‰∫ßÁîüÂÆåÂÖ®‰∏çÂêåÁöÑÂÖ∂‰ªñÁªìÊûú„ÄÇ
@value{DARKCORNER}
@end quotation

@node Format Modifiers
@subsection @code{printf} ÁöÑ‰øÆÈ•∞Á¨¶

@cindex @code{printf} statement, modifiers
@cindex modifiers@comma{} in format specifiers
‰∏Ä‰∏™Ê†ºÂºèÊåáÁ§∫Á¨¶ÂäüËÉΩÂåÖÊã¨‰∏Ä‰∫õ‰øÆÈ•∞Á¨¶‰ª•ÊéßÂà∂È°πÁõÆÁöÑÂÄºÂ¶Ç‰ΩïÊù•ËøõË°åÊâìÂç∞Ôºå‰ª•ÂèäÂÖ∂ÈúÄË¶ÅÂ§öÂ∞ëÁöÑÁ©∫Èó¥„ÄÇ
‰øÆÈ•∞Á¨¶Â§Ñ‰∫é @samp{%} ‰∏éÊ†ºÂºèÊéßÂà∂Â≠óÊØç‰πãÈó¥„ÄÇÊàë‰ª¨‰ΩøÁî®Â≠êÂºπÁ¨¶‚Äú@bullet{}‚ÄùÊù•Ë°®Á§∫ËæìÂá∫‰∏≠ÁöÑÁ©∫Ê†º„ÄÇ
‰∏ãÈù¢ÊòØÂèØËÉΩÁöÑ‰øÆÈ•∞Á¨¶Ôºå‰ª•Âá∫Áé∞ÁöÑÈ°∫Â∫èÊéíÂ∫èÔºö

@table @asis
@cindex differences in @command{awk} and @command{gawk}, @code{print}/@code{printf} statements
@cindex @code{printf} statement, positional specifiers
@c the code{} does NOT start a secondary
@cindex positional specifiers, @code{printf} statement
@item @code{@var{N}$}
‰∏Ä‰∏™Êï¥Êï∞ÂêéÈù¢Â∏¶‰∏Ä‰∏™ @samp{$} ÊòØ‰∏Ä‰∏™‰ΩçÁΩÆÊåáÂÆöÁ¨¶„ÄÇ
‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÊ†ºÂºèÂ≠ó‰∏≤‰∏≠ÁöÑÊ†ºÂºèÊåáÂÆöÁ¨¶ÊòØÊåâÈ°∫Â∫èÂ∫îÁî®Âà∞ÂêéÈù¢ÁöÑÂèÇÊï∞ÁöÑ„ÄÇÈÄöËøá@dfn{‰ΩçÁΩÆÊåáÂÆöÁ¨¶}ÔºåÊ†ºÂºèÊåáÂÆöÁ¨¶ÂàôÂ∫îÁî®Âà∞ÊåáÂÆöÁöÑÂèÇÊï∞‰∏≠Ôºå
ËÄå‰∏çÊòØÂéüÊù•Êú¨Â∫îËØ•Â∫îÁî®Âú®ÂàóË°®‰∏≠ÁöÑÂèÇÊï∞„ÄÇ
‰ΩçÁΩÆÊåáÂÆöÁ¨¶‰ªé 0 ÂºÄÂßãËÆ°ÁÆó„ÄÇÂõ†Ê≠§Ôºö

@example
printf "%s %s\n", "don't", "panic"
printf "%2$s %1$s\n", "panic", "don't"
@end example

@noindent
ÊâìÂç∞‰∏§Ê¨°ÊúÄÊúâÂêçÁöÑÂèãÂ•Ω‰ø°ÊÅØ„ÄÇ

ÂàùÁúã‰πã‰∏ãÔºåËøô‰∏™ÁâπÊÄßÊ≤°Êúâ‰ªÄ‰πàÁâπÂà´ÁöÑÁî®Â§Ñ„ÄÇ‰∫ãÂÆû‰∏äÔºåËøôÊòØ @command{gawk} ÁöÑ‰∏Ä‰∏™Êâ©Â±ïÔºå
‰∏ªË¶ÅÁî®‰∫éÂú®ËøêË°åÊó∂ËøõË°å‰ø°ÊÅØÁøªËØë„ÄÇÊü•Áúã @ref{Printf Ordering}Ôºå
ÂΩì‰∏≠ÊâÄÊèèËø∞ÁöÑ‰∏∫‰ªÄ‰πà‰ª•ÂèäÂ¶Ç‰ΩïÊù•‰ΩøÁî®‰ΩçÁΩÆÊåáÂÆöÁ¨¶„ÄÇÁõÆÂâçÔºåÊàë‰ª¨ÂèØ‰ª•ÂÖàÂøΩÁï•ÂÆÉ„ÄÇ

@item @code{-} (Minus)
‰∏Ä‰∏™ÂáèÂè∑ @samp{-}ÔºåÁî®Âú®ÂÆΩÂ∫¶ÊåáÂÆöÁ¨¶‰πãÂâçÔºàÁúãÊú¨ÂàóË°®‰πãÂêéÔºâÔºå
ÂëäËØâÂØπÊåáÂÆöÁöÑÂÆΩÂ∫¶ÂÜÖËøõË°åÂ∑¶ÂØπÈΩê„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂú®ÊåáÂÆöÁöÑÂÆΩÂ∫¶ÂÜÖÔºåÂèÇÊï∞ÊòØÂè≥ÂØπÈΩê„ÄÇÂõ†Ê≠§Ôºö

@example
printf "%-4s", "foo"
@end example

@noindent
ÊâìÂç∞ @samp{foo@bullet{}} „ÄÇ

@item @var{space}
ÂØπ‰∫éÊï∞ÂÄºËΩ¨Êç¢ÔºåË°®Á§∫Ê≠£ÂÄº‰πãÂâçÁºÄ‰∏Ä‰∏™Á©∫Ê†ºÔºåÊàñËÄÖË¥üÂÄº‰πãÈó¥Â∏¶‰∏Ä‰∏™ÂáèÂè∑ @samp{-} „ÄÇ

@item @code{+}
Âä†Âè∑ÔºåÁî®Âú®ÂÆΩÂ∫¶ÊåáÂÆöÁ¨¶ÂâçÔºàÁúãÊú¨ÂàóË°®‰πãÂêéÔºâÔºåÂëäËØâÂú®Êï∞ÂÄºËΩ¨Êç¢‰∏äÊÄªÊòØ‰ΩøÁî®Á¨¶Âè∑ÔºåÂ∞±ÁÆóÊï∞ÂÄºÊ†ºÂºèÊòØÊ≠£Êï∞„ÄÇ
@samp{+} Âè∑ÈáçËΩΩ‰∫ÜÁ©∫Ê†ºÊåáÂÆöÁ¨¶„ÄÇ

@item @code{#}
ÂØπ‰∫éÁâπÂÆöÁöÑÊéßÂà∂Â≠óÊØç‰ΩøÁî®‚ÄúÂÄôÈÄâÊ†ºÂºè‚Äù„ÄÇ
ÂØπ‰∫é @samp{%o} ÂàôÊèê‰æõ‰∏Ä‰∏™ÂâçÂØºÁöÑ 0„ÄÇÂØπ‰∫é @samp{%x} ‰∏é @samp{%X}ÔºåÂàô‰ΩøÁî® @samp{0x} ÊàñËÄÖ @samp{0X} Âú®ÈùûÈõ∂ÁöÑÁªìÊûú‰πãÂâç„ÄÇ
ÂØπ‰∫é @samp{%e}Ôºå@samp{%E}Ôºå@samp{%f}Ôºå@samp{%F}ÔºåÁªìÊûú‰∏≠ÊÄªÊòØÂåÖÂê´Â∞èÊï∞ÁÇπ„ÄÇÂØπ‰∫é @samp{%g} ‰∏é @samp{%G}ÔºåÂêéÈù¢ÁöÑÈõ∂‰∏ç‰ºö‰ªéÁªìÊûú‰∏≠ÁßªÈô§„ÄÇ

@item @code{0}
ÂâçÂØºÁöÑ @samp{0}ÔºàÈõ∂ÔºâÊòØ‰∏Ä‰∏™Ê†áÂøóÊåáÁ§∫Á¨¶ÔºåÊåáÂÆöËæìÂá∫‰∏≠‰ΩøÁî® 0 Êù•Â°´ÂÖÖËÄå‰∏çÊòØ‰ΩøÁî®Á©∫Ê†º„ÄÇ
ËøôÂè™Áî®Âú®Êï∞ÂÄºÊ†ºÂºè‰∏≠„ÄÇËøô‰∏™Ê†áÂøó‰πüÂ∫îÁî®Âú®Â¶ÇÊûúÂÆΩÂ∫¶ÊåáÂÆöÁ¨¶‰∏≠ÊåáÂÆöÁöÑÂÆΩÂ∫¶Â§ß‰∫éË¶ÅÊâìÂç∞ÁöÑÊï∞ÂÄºÁöÑÂÆΩÂ∫¶ÁöÑÊÉÖÂÜµ„ÄÇ

@item @code{'}
ÂçïÂºïÂè∑ÊàñËÄÖÊíáÂè∑ÊòØ ISO C ÁöÑ POSIX Êâ©Â±ï„ÄÇÂÆÉË°®Á§∫ÁöÑÊòØÊµÆÁÇπÊï∞ÂÄº‰∏≠ÁöÑÊï¥Êï∞ÈÉ®ÂàÜÔºåÊàñËÄÖÊï¥Êï∞ÁöÑÂÖ®ÈÉ®Ôºå
Â∫îËØ•ÂåÖÂê´Êúâ‰∏Ä‰∏™ÁôæÂàÜ‰ΩçÂàÜÈöîÁ¨¶„ÄÇËøô‰∏™Âè™Âú®ÊîØÊåÅËøôÊ†∑ÁöÑÊ†ºÂºèÁöÑËØ≠Ë®Ä‰∏≠ÊúâÁî®„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{cat thousands.awk}          @ii{Show source program}
@print{} BEGIN @{ printf "%'d\n", 1234567 @}
$ @kbd{LC_ALL=C gawk -f thousands.awk}
@print{} 1234567                   @ii{Results in} "C" @ii{locale}
$ @kbd{LC_ALL=en_US.UTF-8 gawk -f thousands.awk}
@print{} 1,234,567                 @ii{Results in US English UTF locale}
@end example

@noindent
Ë¶ÅËé∑ÂèñÂÖ≥‰∫éËØ≠Ë®ÄËÆæÁΩÆ‰∏éÂõΩÈôÖÂåñÈóÆÈ¢òÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºåËØ∑Êü•Áúã @ref{Locales}„ÄÇ

@quotation ÊèêÁ§∫
@samp{'} Ê†áÂøóÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑÁâπÊÄßÔºå‰ΩÜÊòØ‰ΩøÁî®Ëµ∑Êù•‰ºöÂØºËá¥‰∏Ä‰∫õ‰∫ãÊÉÖÂ§çÊùÇËµ∑Êù•ÔºöÂú®ÂëΩ‰ª§Ë°åÁ®ãÂ∫è‰∏≠Áî®Ëµ∑Êù•ÈùûÂ∏∏Âõ∞Èöæ„ÄÇË¶Å‰∫ÜËß£ÂºïÂè∑ÊäÄÂ∑ßÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºåËØ∑Áúã @ref{Quoting}„ÄÇ
@end quotation

@item @var{width}
ËøôÊòØ‰∏Ä‰∏™Êï∞ÂÄºÊåáÂÆöÁ¨¶ÔºåÊåáÂÆö‰∏Ä‰∏™ÂüüÊâÄÈúÄË¶ÅÁöÑÊúÄÂ∞èÂÆΩÂ∫¶„ÄÇ
Âú® @samp{%} ‰∏éÊ†ºÂºèÊéßÂà∂Â≠óÊØç‰πãÈó¥ÊèíÂÖ•‰∏Ä‰∏™Êï∞ÂÄºÔºåÂº∫Âà∂ÂüüÁöÑÂÆΩÂ∫¶Êâ©Â±ïÂà∞ÊåáÂÆöÁöÑÂ§ßÂ∞è„ÄÇÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ã‰ºöÂú®Â∑¶ËæπÁöÑ‰ΩçÁΩÆÂú®Á©∫Èó≤‰ΩçÁΩÆ‰ª•Á©∫Ê†ºÂ°´ÂÖÖ„ÄÇ‰æãÂ¶ÇÔºö

@example
printf "%4s", "foo"
@end example

@noindent
‰ºöÊâìÂç∞ @samp{@bullet{}foo} „ÄÇ

@var{width} ÁöÑÂÄºÊòØÊúÄÂ∞èÂÆΩÂ∫¶Ôºå‰∏çÊòØÊúÄÂ§ß„ÄÇÂ¶ÇÊûúÂÄºÊâÄÈúÄË¶ÅÁöÑ @var{width} Êõ¥Â§ßÔºå‰ºöÊâ©Â±ïÂà∞ÂøÖË¶ÅÁöÑÂÆΩÂ∫¶„ÄÇÂõ†Ê≠§‰∏ãÈù¢Ôºö

@example
printf "%4s", "foobar"
@end example

@noindent
‰ºöÊâìÂç∞ @samp{foobar} „ÄÇ

Â¶ÇÊûúÂú® @var{width} ÁöÑÈù¢ÂâçÂä†‰∏Ä‰∏™ÂáèÂè∑Ôºà@samp{-}ÔºâÔºåÂàôËæìÂá∫‰∏≠ÁöÑÂ°´ÂÖÖ‰ºöÂú®Âè≥ËæπÔºåËÄå‰∏çÊòØÂú®Â∑¶Ëæπ„ÄÇ

@item @code{.@var{prec}}
‰∏Ä‰∏™ÁÇπÂêéÈù¢Ë∑ü‰∏Ä‰∏™Êï¥Êï∞Â∏∏ÈáèÊåáÂÆö‰∫ÜÊâìÂç∞Êó∂ÊâÄ‰ΩøÁî®ÁöÑÁ≤æÂ∫¶„ÄÇÂÖ∂Âê´‰πâÊ†πÊçÆÊéßÂà∂Â≠óÊØç‰∏çÂêå„ÄÇ

@table @asis
@item @code{%d}, @code{%i}, @code{%o}, @code{%u}, @code{%x}, @code{%X}
Ë¶ÅÊâìÂç∞ÁöÑÊúÄÂ∞èÊï∞Â≠ó‰∏™Êï∞„ÄÇ

@item @code{%e}, @code{%E}, @code{%f}, @code{%F}
Âú®Â∞èÊï∞ÁÇπÂêéÈù¢ÁöÑÊï∞ÂÄº‰∏™Êï∞„ÄÇ

@item @code{%g}, @code{%G}
ÊúâÊïàÊï∞Â≠ó‰ΩçÁöÑÊúÄÂ§ß‰∏™Êï∞„ÄÇ

@item @code{%s}
‰ªéË¶ÅÊâìÂç∞ÁöÑÂ≠ó‰∏≤‰∏≠ÊâìÂç∞ÁöÑÊúÄÂ§ßÂ≠óÁ¨¶Êï∞„ÄÇ
@end table

Âõ†Ê≠§‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
printf "%.4s", "foobar"
@end example

@noindent
‰ºöÊâìÂç∞ @samp{foob} „ÄÇ
@end table

C Â∫ì‰∏≠ÁöÑ @code{printf} ÁöÑÂä®ÊÄÅ @var{width} ‰∏é @var{prec} ËÉΩÂäõÔºà‰æãÂ¶ÇÔºå@code{"%*.*s"}Ôºâ‰πüË¢´ÊîØÊåÅ„ÄÇ
‰∏çÈúÄË¶ÅÊòæÂºèÂú∞Âú®Ê†ºÂºèÂ≠ó‰∏≤‰∏≠ÊåáÂÆö‰∏Ä‰∏™ @var{width} ‰∏é/ÊàñËÄÖ @var{prec} ÁöÑÂÄºÔºå
ÂÆÉ‰ª¨‰πüÂèØ‰ª•Âú®ÂèÇÊï∞ÂàóË°®‰∏≠ËøõË°åÂ§ÑÁêÜÔºåÂ¶ÇÔºö

@example
w = 5
p = 3
s = "abcdefg"
printf "%*.*s\n", w, p, s
@end example

@noindent
‰∏é‰∏ãÈù¢ÁöÑÂÆåÂÖ®‰∏ÄËá¥Ôºö

@example
s = "abcdefg"
printf "%5.3s\n", s
@end example

@noindent
‰∏§‰∏™Á®ãÂ∫èÈÉΩËæìÂá∫ @samp{@w{@bullet{}@bullet{}abc}}„ÄÇ
@command{awk} Êó©ÊúüÁöÑÁâàÊú¨‰∏çÊîØÊåÅËøôÊ†∑ÁöÑËÉΩÂäõ„ÄÇÂ¶ÇÊûú‰Ω†ÂøÖÈúÄ‰ΩøÁî®ËøôÊ†∑ÁöÑÁâàÊú¨Ôºå‰Ω†ÂèØ‰ª•ÈÄöËøáÔºàÂ≠ó‰∏≤ÔºâËøûÊé•ÁöÑÊñπÂºèÊù•ÊûÑÂª∫Ê†ºÂºèÊ†ºÂºèÂ≠ó‰∏≤Êù•Ê®°ÊãüËøô‰∏™ÁâπÊÄßÔºö

@example
w = 5
p = 3
s = "abcdefg"
printf "%" w "." p "s\n", s
@end example

@noindent
Âú®ÂÆûË∑µ‰∏≠Ëøô‰∏™‰ª£Á†Å‰∏çÊòØÂæàÂ•ΩËØªÔºå‰ΩÜÊòØÁ°ÆÂÆûÂèØ‰ª•Â∑•‰Ωú„ÄÇ

@c @cindex lint checks
@cindex troubleshooting, fatal errors, @code{printf} format strings
@cindex POSIX @command{awk}, @code{printf} format strings and
C Á®ãÂ∫èÂëòËøòÂèØ‰ª•Âú® @code{printf} ÁöÑÊ†ºÂºèÂ≠ó‰∏≤‰∏≠‰ΩøÁî®‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑ‰øÆÈ•∞Á¨¶Ôºà@samp{h}Ôºå@samp{j}Ôºå@samp{l}Ôºå@samp{L}Ôºå@samp{t}Ôºå
‰∏é @samp{z}Ôºâ„ÄÇ
Ëøô‰∫õÂú® @command{awk} ‰∏≠ÈÉΩÊòØÊó†ÊïàÁöÑ„ÄÇÂ§ßÂ§öÊï∞ @command{awk} ÂÆûÁé∞ÈÉΩÊòØÈªòÈªòÂú∞ÂøΩÁï•ÂÆÉ‰ª¨„ÄÇ
Â¶ÇÊûú @option{--lint} Âú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆö‰∫ÜÔºàÊü•Áúã @ref{Options}ÔºâÔºå
@command{gawk} ‰ºö‰∫ßÁîüÂëäË≠¶„ÄÇÂ¶ÇÊûúÊåáÂÆö‰∫Ü @option{--posix}ÔºåÂàô‰ºö‰∫ßÁîü‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇ

@node Printf Examples
@subsection @code{printf} ËåÉ‰æã

‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂ¶Ç‰ΩïÊù•‰ΩøÁî® @code{printf} ÂÆûÁé∞ÂØπÈΩêË°®Ê†ºÁöÑ‰æãÂ≠êÔºö

@example
awk '@{ printf "%-10s %s\n", $1, $2 @}' mail-list
@end example

@noindent
Ëøô‰∏™ÂëΩ‰ª§ÊâìÂç∞Êñá‰ª∂ @file{mail-list} ‰∏≠ÁöÑ‰∫∫ÂêçÔºà@code{$1}Ôºâ‰∏∫ 10 ‰∏™Â≠óÁ¨¶ÁöÑ‰∏≤ÔºåÂπ∂‰∏îÂ∑¶ÂØπÈΩê„ÄÇ
ÂêåÊó∂‰πüÊâìÂç∞ÁîµËØùÂè∑Á†ÅÔºà@code{$2}ÔºâÂú®Âêå‰∏ÄË°åÁöÑÂêéÈù¢„ÄÇËøô‰ºö‰∫ßÁîü‰∏Ä‰∏™‰∏§Ë°åÂØπÈΩêÁöÑÂêçÂ≠ó‰∏éÁîµËØùÁöÑÂàóË°®ÔºåÂ¶ÇÔºö

@example
$ @kbd{awk '@{ printf "%-10s %s\n", $1, $2 @}' mail-list}
@print{} Amelia     555-5553
@print{} Anthony    555-3412
@print{} Becky      555-7685
@print{} Bill       555-1675
@print{} Broderick  555-0542
@print{} Camilla    555-2912
@print{} Fabius     555-1234
@print{} Julie      555-6699
@print{} Martin     555-6480
@print{} Samuel     555-3430
@print{} Jean-Paul  555-2127
@end example

Âú®Ëøô‰æãÂ≠ê‰∏≠ÔºåÁîµËØùÂè∑Á†ÅË¶Å‰ª•Â≠ó‰∏≤ÁöÑÊñπÂºèÊâìÂç∞ÔºåÂõ†‰∏∫Âè∑Á†ÅÊòØ‰ª•Ê®™Êù†ËøõË°åÂàÜÈöîÁöÑ„ÄÇÂ¶ÇÊûúÂ∞ÜÁîµËØùÂè∑Á†ÅÊâìÂç∞ÊàêÊï∞ÂÄºÔºåÂàô‰∫ßÁîüÁöÑËæìÂá∫Âè™Êúâ‰∏â‰∏™Êï∞Â≠óÔºö @samp{555} „ÄÇËøôÂ∞±ÊúâÁÇπËõãÁñº‰∫Ü„ÄÇ

Ê≤°ÊúâÂøÖË¶ÅÊåáÂÆöÁîµËØùÂè∑Á†ÅÁöÑÈïøÂ∫¶ÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÊòØ‰∏ÄË°å‰∏≠ÁöÑÊúÄÂêé‰∏ÄÈ°π„ÄÇ‰∏çÈúÄË¶ÅÂú®ÂÆÉ‰ª¨ÁöÑÂêéÈù¢Â°´‰∏äÁ©∫Ê†º„ÄÇ

Â¶ÇÊûúÂú®ÂàóÁöÑ‰∏äÈù¢ÊâìÂç∞‰∏Ä‰∫õÂ§¥ÈÉ®ÔºåÁúãËµ∑Êù•Â∞±Êõ¥Âä†ÊºÇ‰∫Æ‰∫Ü„ÄÇËøôÂèØ‰ª•ÈÄöËøá @code{BEGIN} ËßÑÂàôÊù•ÂÆûÁé∞ÔºàÊü•Áúã @ref{BEGIN/END}ÔºâÔºåËøôÊ†∑ÁöÑËØùÔºåÂ§¥ÈÉ®Â∞±Âè™‰ºöÂú® @command{awk} Á®ãÂ∫èÂºÄÂßãÊâìÂç∞‰∏ÄÊ¨°Ôºö

@example
awk 'BEGIN @{ print "Name      Number"
             print "----      ------" @}
           @{ printf "%-10s %s\n", $1, $2 @}' mail-list
@end example

Âú®ÂâçÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ê∑∑Âêà‰∫Ü @code{print} ‰∏é @code{printf} ËØ≠Âè•„ÄÇÂè™‰ΩøÁî® @code{printf} ‰πüÂèØ‰ª•‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûúÔºö

@example
awk 'BEGIN @{ printf "%-10s %s\n", "Name", "Number"
             printf "%-10s %s\n", "----", "------" @}
           @{ printf "%-10s %s\n", $1, $2 @}' mail-list
@end example

@noindent
Âú®ÊâìÂç∞Â§¥ÈÉ®Êó∂Ôºå‰ΩøÁî®‰∏éÂàó‰∏ÄÊ†∑ÁöÑÊ†ºÂºèÊåáÂÆöÁ¨¶ÔºåÂèØ‰ª•‰øùËØÅÂ§¥ÈÉ®‰πüÂàó‰∏ÄÊ†∑Âú∞ÂØπÈΩê„ÄÇ

ÂÖ∂‰∏≠ÁöÑÊ†ºÂºèÊåáÂÆö‰∏≤Ë¢´‰ΩøÁî®‰∫Ü‰∏â‰∏™ÔºåÂõ†Ê≠§ÂèØ‰ª•Â∞ÜÂÖ∂Â≠òÂÇ®Âú®‰∏Ä‰∏™ÂèòÈáè‰∏≠ÔºåÂ¶ÇÔºö

@example
awk 'BEGIN @{ format = "%-10s %s\n"
             printf format, "Name", "Number"
             printf format, "----", "------" @}
           @{ printf format, $1, $2 @}' mail-list
@end example


@node Redirection
@section ÈáçÂÆöÂêë @code{print} ‰∏é @code{printf} ÁöÑËæìÂá∫

@cindex output redirection
@cindex redirection of output
@cindex @option{--sandbox} option, output redirection with @code{print}, @code{printf}
Âà∞ÁõÆÂâçÔºå‰ªé @code{print} ‰∏é @code{printf} ÁöÑËæìÂá∫ÈÉΩÊâìÂç∞Âú®Ê†áÂáÜËæìÂá∫‰∏äÔºå‰∏ÄËà¨Â∞±ÊòØÂ±èÂπï„ÄÇ@code{print} ‰∏é @code{printf} ÈÉΩÂèØ‰ª•Â∞ÜÂÖ∂ËæìÂá∫ÂÆöÂêëÂà∞ÂÖ∂‰ªñÁöÑÂú∞ÊñπÔºåËøôÂ∞±Áß∞‰∏∫@dfn{ÈáçÂÆöÂêë}„ÄÇ

@quotation ÊèêÁ§∫
ÂΩìÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆö‰∫Ü @option{--sandbox}ÔºàÊü•Áúã @ref{Options}ÔºâÔºå
Â∞ÜËæìÂá∫ÂÆöÂêëÂà∞Êñá‰ª∂ÔºåÁÆ°ÈÅì‰∏éÂπ∂Á®ã‰ºöË¢´Á¶ÅÁî®„ÄÇ
@end quotation

ÈáçÂÆöÂêëÂá∫Áé∞Âú® @code{print} ‰∏é @code{printf} ËØ≠Âè•‰πãÂêé„ÄÇ@command{awk} ‰∏≠ÁöÑÈáçÂÆöÂêëÂ¶Ç Shell ËÑöÊú¨‰∏≠ÁöÑÈáçÂÆöÂêë‰∏ÄÊ†∑ÔºåÂå∫Âà´Âè™ÊòØÂÆÉ‰ª¨ÊòØÂÜôÂú® @command{awk} Á®ãÂ∫è‰∏≠„ÄÇ

@c the commas here are part of the see also
@cindex @code{print} statement, See Also redirection@comma{} of output
@cindex @code{printf} statement, See Also redirection@comma{} of output
Êúâ 4 ÁßçÈáçÂÆöÂêëÊñπÂºèÔºöÂÆöÂêëÂà∞Êñá‰ª∂ÔºåÂÆöÂêëÈôÑÂä†Âà∞Êñá‰ª∂ÁöÑÊú´Â∞æÔºõÂÆöÂêëÂà∞Âè¶‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑÁÆ°ÈÅì‰∏≠Ôºå‰∏éÂÆöÂêëÂà∞‰∏Ä‰∏™Âπ∂Á®ã„ÄÇ
Êàë‰ª¨Â∞ÜÂÖ∂Â±ïÁ§∫Âú® @code{print} ËØ≠Âè•‰∏≠Ôºå‰ΩÜ‰πüÂèØ‰ª•Â∫îÁî®Âú® @code{printf} ËØ≠Âè•Ôºö

@table @code
@cindex @code{>} (right angle bracket), @code{>} operator (I/O)
@cindex right angle bracket (@code{>}), @code{>} operator (I/O)
@cindex operators, input/output
@item print @var{items} > @var{output-file}
Ëøô‰∏™Á±ªÂûãÁöÑÂÆöÂêë‰ºöÂ∞ÜÈ°πÁõÆËæìÂá∫Âà∞‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ @var{output-file} ÁöÑÊñá‰ª∂‰∏≠„ÄÇ
Êñá‰ª∂Âêç @var{output-file} ÂèØ‰ª•ÊòØ‰ªªÊÑèË°®ËææÂºè„ÄÇÂÆÉÁöÑÂÄº‰ºöË¢´ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤Âπ∂Áî®‰Ωú@value{FN}
ÔºàÊü•Áúã @ref{Expressions}Ôºâ„ÄÇ

ÂΩì‰ΩøÁî®ËøôÁßçÈáçÂÆöÂêëÊó∂Ôºå@var{output-file} Âú®Á¨¨‰∏Ä‰∏™ËæìÂá∫ÂÜôÂÖ•Ââç‰ºöÂ∞ÜÊñá‰ª∂Ê∏ÖÁ©∫„ÄÇ
ÂêéÁª≠ÂØπÂêå‰∏Ä‰∏™Êñá‰ª∂ÁöÑÂÜô‰∏çÂÜçËøõË°åÂÜÖÂÆπÊì¶Èô§ÔºåÂè™‰ºöÈôÑÂä†„ÄÇÔºàËøô‰∏é‰Ω†Âú® Shell ‰∏≠‰ΩøÁî®ÈáçÂÆöÂêë‰∏çÂêå„ÄÇÔºâ
Â¶ÇÊûú @var{output-file} ‰∏çÂ≠òÂú®ÔºåÂàôÂàõÂª∫ÂÆÉ„ÄÇ
‰æãÂ¶Ç‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ @command{awk} Á®ãÂ∫èÔºåÂÖ∂‰ºöÂ∞Ü‰∫∫ÂêçÂàóË°®ÂÜôÂà∞Âêç‰∏∫ @file{name-list} ÁöÑÊñá‰ª∂‰∏≠Ôºå
Âπ∂Â∞ÜÁîµËØùÂè∑Á†ÅÂÜôÂÖ•Âà∞Âè¶‰∏Ä‰∏™Âêç‰∏∫ @file{phone-list} ÁöÑÊñá‰ª∂‰∏≠Ôºö

@example
$ @kbd{awk '@{ print $2 > "phone-list"}
>        @kbd{print $1 > "name-list" @}' mail-list}
$ @kbd{cat phone-list}
@print{} 555-5553
@print{} 555-3412
@dots{}
$ @kbd{cat name-list}
@print{} Amelia
@print{} Anthony
@dots{}
@end example

@noindent
ËæìÂá∫ÁöÑÊñá‰ª∂‰∏≠ÔºåÊØèË°åÂåÖÂê´‰∏Ä‰∏™ÂêçÂ≠óÊàñËÄÖ‰∏Ä‰∏™ÁîµËØùÂè∑Á†Å„ÄÇ

@cindex @code{>} (right angle bracket), @code{>>} operator (I/O)
@cindex right angle bracket (@code{>}), @code{>>} operator (I/O)
@item print @var{items} >> @var{output-file}
Ëøô‰∏™Á±ªÂûãÁöÑÈáçÂÆöÂêëÂ∞ÜÈ°πÁõÆËæìÂá∫Âà∞‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÂêç‰∏∫ @var{output-file} ÁöÑÊñá‰ª∂‰∏≠„ÄÇ
Ëøô‰∏™Áî®Ê≥ï‰∏éÂçï‰∏™ÁöÑ @samp{>} ÁöÑÈáçÂÆöÂêëÊúâ‰∏çÂêåÊó∂Ôºå@var{output-file} Êñá‰ª∂‰∏≠ÁöÑÊóßÂÜÖÂÆπÔºàÂ¶ÇÊûúÊúâÔºâ‰∏ç‰ºöË¢´Ê∏ÖÁ©∫„ÄÇ
@command{awk} ÁöÑËæìÂá∫‰ºöÈôÑÂä†Âà∞Êñá‰ª∂‰∏≠„ÄÇÂ¶ÇÊûú @var{output-file} Êñá‰ª∂‰∏çÂ≠òÂú®ÔºåÂàôÂàõÂª∫ÂÆÉ„ÄÇ

@cindex @code{|} (vertical bar), @code{|} operator (I/O)
@cindex pipe, output
@cindex output, pipes
@item print @var{items} | @var{command}
ÈÄöËøáÁÆ°ÈÅìÂèØ‰ª•Â∞ÜËæìÂá∫ÂÆöÂêëÂà∞‰∏Ä‰∏™Âè¶‰∏Ä‰∏™Á®ãÂ∫èËÄå‰∏çÊòØÊñá‰ª∂„ÄÇËøô‰∏™ÊñπÂºèÁöÑÈáçÂÆöÂêë‰ºöÂêë @var{command} ÊâìÂºÄ‰∏Ä‰∏™ÁÆ°ÈÅìÔºå
ÁÑ∂ÂêéÂ∞Ü @var{items} ÁöÑÂÄºÈÄöËøá‰∏∫ÊâßË°åÁöÑ @var{command} ÂàõÂª∫ÁöÑÁÆ°ÈÅìÂÜôÂà∞Âíñ‰∏Ä‰∏™Á®ãÂ∫è‰∏≠„ÄÇ

ÈáçÂÆöÂêëÂèÇÊï∞ @var{command} ÂÆûÈôÖÊòØÊòØ‰∏Ä‰∏™ @command{awk} Ë°®ËææÂºè„ÄÇ
ÂÆÉÁöÑÂÄº‰ºöË¢´ËΩ¨Êç¢ÊàêË¶ÅÊâßË°åÁöÑ Shell ÂëΩ‰ª§ÁöÑÂ≠ó‰∏≤„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰ºö‰∫ßÁîü‰∏§‰∏™Êñá‰ª∂Ôºå‰∏Ä‰∏™ÊòØÊú™ÊéíÂ∫èÁöÑ‰∫∫ÂêçÔºå‰∏Ä‰∏™ÊåâÂ≠óÊØçÂÄíÂ∫èÂØπ‰∫∫ÂêçËøõË°åÊéíÂàóÔºö

@ignore
10/2000:
record.  It's done to avoid overfull hboxes in TeX.  Leave it
alone for now and let's hope no-one notices.
@end ignore

@example
awk '@{ print $1 > "names.unsorted"
       command = "sort -r > names.sorted"
       print $1 | command @}' mail-list
@end example

Êú™ÊéíÂ∫èÁöÑÂàóË°®ÊåâÁÖßÂ∏∏ËßÑÁöÑÊñπÂºèËøõË°åÈáçÂÆöÂêëÔºåËÄåÊéíÂ∫èÁöÑÂàóË°®ÂàôÈÄöËøáÁÆ°ÈÅìÂêë @command{sort} Â∑•ÂÖ∑ËæìÂá∫„ÄÇ

‰∏ã‰∏™‰æãÂ≠êÂà©Áî®ÈáçÂÆöÂêëÂ∞ÜÊ∂àÊÅØÈÄöËøáÈÇÆ‰ª∂ÂàóË°®Á≥ªÁªüÈÇÆÂØÑÂá∫Âéª„ÄÇËøô‰∏™ÂäüËÉΩÂú®‰∏Ä‰∏™Âë®ÊúüÊâßË°åÁöÑÁ≥ªÁªüÁª¥Êä§ @command{awk} ËÑöÊú¨‰∏≠ÈÅáÂà∞ÈóÆÈ¢òÊó∂ÔºåÈùûÂ∏∏ÊúâÁî®Ôºö

@example
report = "mail bug-system"
print("Awk script failed:", $0) | report
print("at record number", FNR, "of", FILENAME) | report
close(report)
@end example

@code{close()} ÂáΩÊï∞Âú®ËøôÈáåË∞ÉÁî®ÔºåÊòØÂõ†‰∏∫Âú®Â∞ÜÊâÄÊúâÁöÑËæìÂá∫ÂÜôÂà∞ÁÆ°ÈÅìÂêéÂÖ≥Èó≠ÂÆÉÊòØ‰∏Ä‰∏™Â•ΩÁöÑÁºñÁ®ãÂÆûË∑µ„ÄÇ
Êü•Áúã @ref{Close Files And Pipes}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

Ëøô‰∏™‰æãÂ≠ê‰πüËØ¥Êòé‰∫ÜÂà©Áî®ÂèòÈáèÊù•Ë°®Á§∫ @var{file} Êñá‰ª∂ÊàñËÄÖ @var{command} ÂëΩ‰ª§
‚Äî‚ÄîÊ≤°ÊúâÂøÖË¶ÅÊÄªÊòØÁî®Â≠ó‰∏≤Â∏∏ÈáèÊù•Ë°®Á§∫ÂÆÉ‰ª¨„ÄÇ
‰ΩøÁî®ÂèòÈáè‰∏ÄËà¨Êù•ËØ¥ÊòØ‰∏™Â•Ω‰∏ªÊÑèÔºåÂõ†‰∏∫ÔºàÂ¶ÇÊûú‰Ω†Ë¶ÅÁî®Áõ∏ÂêåÁöÑÂêçÂ≠óÊàñËÄÖÂëΩ‰ª§Ôºâ@command{awk} ÈúÄË¶ÅÊØèÊ¨°ÈÉΩË¶ÅÂÜôÁõ∏ÂêåÁöÑÂ≠ó‰∏≤„ÄÇ

@cindex coprocesses
@cindex @code{|} (vertical bar), @code{|&} operator (I/O)
@cindex operators, input/output
@cindex differences in @command{awk} and @command{gawk}, input/output operators
@item print @var{items} |& @var{command}
Ëøô‰∏™ÈáçÂÆöÂêëÂ∞ÜÈ°πÁõÆÊâìÂç∞Âà∞ @var{command} ÁöÑËæìÂÖ•‰∏≠„ÄÇ
Ëøô‰∏™ÊñπÂºè‰∏éÂçï‰∏™ @samp{|} ÈáçÂÆöÂêëÁöÑ‰∏çÂêåÊòØÔºåËøôÈáåÁöÑ @var{command} ËæìÂá∫ÂèØ‰ª•Áî® @code{getline} ËøõË°åËØªÂèñ„ÄÇ
Âõ†Ê≠§Ôºåcommand ÊòØ‰∏Ä‰∏™@dfn{Âπ∂Á®ã}ÔºåÂç≥‰∏é @command{awk} ‰∏ÄËµ∑ÊâßË°åÔºå‰ΩÜÊòØÂè™‰Ωú‰∏∫ @command{awk} Á®ãÂ∫èÁöÑË°•ÂÖÖ„ÄÇ

Ëøô‰∏™ÁâπÊÄßÊòØ @command{gawk} ÁöÑÊâ©Â±ïÔºåÂú® POSIX Á±ªÂûãÁöÑ @command{awk} ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇ
@ifnotdocbook
Êü•Áúã @ref{Getline/Coprocess}ÔºåÊù•Ëé∑ÂèñÁÆÄÂçïÁöÑËØ¥ÊòéÔºåÊü•Áúã @ref{Two-way I/O}ÔºåÊù•Ëé∑ÂèñÊõ¥ÂÖ®Èù¢ÁöÑËÆ®ËÆ∫„ÄÇ
@end ifnotdocbook
@ifdocbook
Êü•Áúã @ref{Getline/Coprocess} ‰∏≠ÊúâÁÆÄË¶ÅÁöÑËÆ®ËÆ∫Ôºå‰ª•Âèä
 @ref{Two-way I/O} ‰∏≠ÊúâÊõ¥ÂÆåÊï¥ÁöÑËÆ®ËÆ∫„ÄÇ
@end ifdocbook
@end table

‰ΩøÁî® @samp{>}Ôºå@samp{>>}Ôºå@samp{|} ÊàñËÄÖ @samp{|&} ËØ∑Á§∫Á≥ªÁªüÊâìÂºÄ‰∏Ä‰∏™Êñá‰ª∂„ÄÅÁÆ°ÈÅìÊàñËÄÖÂπ∂Á®ãÔºå
Âè™Ë¶Å‰Ω†ÊâÄÊåáÂÆöÁöÑ @var{file} Êñá‰ª∂ÊàñËÄÖ @var{command} ÂëΩ‰ª§ËøòÊ≤°ÊúâË¢´‰Ω†ÁöÑÁ®ãÂ∫èÂÜôÂÖ•ÔºåÂèàÊàñËÄÖÂÆÉÂ∑≤ÁªèÂú®ÊúÄÂêé‰∏ÄÊ¨°ÂÜôÂÖ•ÂêéÂÖ≥Èó≠‰∫Ü„ÄÇ

@cindex troubleshooting, printing
‰ΩøÁî® @samp{>} ÈáçÂÆöÂêëÂÖàÊâìÂç∞Âà∞Êñá‰ª∂ÔºåÁÑ∂ÂêéÁî® @samp{>>} ‰∏∫ÂêéÁª≠ÁöÑËæìÂá∫ÊòØ‰∏Ä‰∏™Â∏∏ËßÅÁöÑÈîôËØØÔºö

@example
# clear the file
print "Don't panic" > "guide.txt"
@dots{}
# append
print "Avoid improbability generators" >> "guide.txt"
@end example

@noindent
Âú® Shell ‰∏≠Á°ÆÂÆûÊòØËøô‰πàÈáçÂÆöÂêëÁöÑ„ÄÇ‰ΩÜÊòØÂú® @command{awk} ‰∏≠ÔºåÂç¥Ê≤°ÊúâÂøÖË¶Å„ÄÇ
Âú®ËøôÂí±ÊÉÖÂÜµ‰∏ãÔºåÁ®ãÂ∫èÂ∫îËØ•Âú®ÊâÄÊúâÁöÑ @code{print} ËØ≠Âè•‰∏ä‰ΩøÁî® @samp{>}ÔºåÂõ†‰∏∫ËæìÂá∫Êñá‰ª∂Âè™‰ºöÊâìÂºÄ‰∏ÄÊ¨°„ÄÇ
ÔºàÂú®Ê∑∑Âêà‰ΩøÁî® @samp{>} ‰∏é @samp{>>} Êó∂Ôºå‰πüÊòØÊâìÂºÄ‰∏ÄÊ¨°„ÄÇ‰ΩÜÊòØÔºåÊ∑∑Áî®Êìç‰ΩúÁ¨¶ÊòØ‰∏ÄÁßçÁ≥üÁ≥ïÁöÑÁºñÁ®ã‰π†ÊÉØÔºå‰ºöËÆ©‰Ω†Á®ãÂ∫èÁöÑËØªÂèñÂõ∞ÊÉë„ÄÇÔºâ

@cindex differences in @command{awk} and @command{gawk}, implementation limitations
@cindex implementation issues, @command{gawk}, limits
@cindex @command{awk}, implementation issues, pipes
@cindex @command{gawk}, implementation issues, pipes
@ifnotinfo
Â¶ÇÊó©ÂâçÊâÄËø∞ÔºàÊü•Áúã @ref{Getline Notes}ÔºâÔºåËÆ∏Â§öÁöÑ @command{awk} ÂÆûÁé∞ÈôêÂà∂‰∫Ü @command{awk} Á®ãÂ∫èÂèØ‰ª•ÊâìÂºÄÁöÑÁÆ°Á∫øÊï∞Èáè‰∏∫‰∏Ä‰∏™ÔºÅ
@command{gawk} ÂàôÊ≤°ÊúâËøô‰∏™ÈôêÂà∂„ÄÇ@command{gawk} ÂèØ‰ª•ÊâìÂºÄÁöÑÁÆ°Á∫øÁöÑÊï∞ÈáèÂè™ËÉΩÊâÄÂú®ÁöÑÊìç‰ΩúÁ≥ªÁªüÁöÑÈôêÂà∂„ÄÇ

@sidebar ÁÆ°ÈÅìËæìÂá∫Âà∞ @command{sh}
@cindex shells, piping commands into

‰∏ÄÁßç‰ΩøÁî®ÈáçÂÆöÂêëÁöÑÂº∫Â§ßÊñπÂºèÊòØÊûÑÈÄ†‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÔºåÁÑ∂ÂêéÂ∞ÜÁî®ÁÆ°ÈÅìËæìÂá∫Âà∞ ShellÔºåsh ‰∏≠„ÄÇ
‰æãÂ¶ÇÔºå‰Ω†Êúâ‰∏ÄÂ†ÜÁöÑÊñá‰ª∂ÊòØ‰ªéÂÖ∂‰ªñÁ≥ªÁªü‰∏≠ÂèñÊù•ÁöÑÔºåÂπ∂‰∏î@value{FN}ÈÉΩ‰ª•Â§ßÂÜôÂ≠òÂÇ®Ôºå
ËÄå‰Ω†ÊÉ≥Êää‰ªñ‰ª¨ÂÖ®ÈÉ®ÊîπÊàêÂ∞èÂÜôÁöÑ„ÄÇ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂç≥ÁÆÄÂçï‰πüÂæàÈ´òÊïàÔºö

@c @cindex @command{mv} utility
@example
@{ printf("mv %s %s\n", $0, tolower($0)) | "sh" @}

END @{ close("sh") @}
@end example

@code{tolower()} ÂáΩÊï∞ËøîÂõûÂèÇÊï∞Â≠ó‰∏≤‰∏≠ÊâÄÊúâÁöÑÂ§ßÂÜôÂ≠óÊØçË¢´ËΩ¨Êç¢‰∏∫Â∞èÂÜôÁöÑ‰∏≤ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
Á®ãÂ∫èÊûÑÂª∫‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÂëΩ‰ª§Ë°åÔºåÂπ∂‰ΩøÁî® @command{mv} Â∑•ÂÖ∑ÂØπÊñá‰ª∂ËøõË°åÊîπÂêçÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∫õÂëΩ‰ª§ÂàóË°®ÂèëÈÄÅÁªô Shell ÊâßË°å„ÄÇ

Êü•Áúã @ref{Shell Quoting}Ôºå‰∫ÜËß£ÂèØ‰ª•ËæÖÂä©‰∫ßÁîüÂèØ‰ª•ÂèëÈÄÅÂà∞ Shell ÁöÑÂëΩ‰ª§Ë°åÂáΩÊï∞„ÄÇ
@end sidebar

@node Special FD
@section Ê†áÂáÜÁöÑÈ¢ÑÊâìÂºÄÁöÑÁâπÊÆäÊñá‰ª∂Êï∞ÊçÆÊµÅ
@cindex standard input
@cindex input, standard
@cindex standard output
@cindex output, standard
@cindex error output
@cindex standard error
@cindex file descriptors
@cindex files, descriptors, See file descriptors

‰∏ÄËà¨Âú∞ÔºåÊ≠£Âú®ÊâßË°åÁöÑÁ®ãÂ∫èÂ∑≤ÁªèÊúâ‰∏â‰∏™ËæìÂÖ•ËæìÂá∫ÊµÅÂèØ‰ª•Áî®Êù•ËøõË°åËØªÂÜô„ÄÇ
ËøôÂ∞±ÊòØ‰ºóÊâÄÂë®Áü•ÁöÑ@dfn{Ê†áÂáÜËæìÂÖ•}Ôºå@dfn{Ê†áÂáÜËæìÂá∫}‰ª•Âèä@dfn{Ê†áÂáÜÈîôËØØËæìÂá∫}„ÄÇ
Ëøô‰∫õÂ∑≤ÁªèÊâìÂºÄÁöÑÊµÅÔºà‰ª•Âèä‰ªªÊÑèÂ∑≤ÁªèÊâìÂºÄÁöÑÊñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìÔºâÊäÄÊúØ‰∏äÂèØ‰ª•Áî±ÊâÄË∞ìÁöÑ@dfn{Êñá‰ª∂ÊèèËø∞Á¨¶}Êù•Ë°®Á§∫„ÄÇ

ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËøô‰∫õÊµÅÊòØ‰Ω†ÁöÑÈîÆÁõò‰∏é‰Ω†ÁöÑÂ±èÂπïÔºå‰ΩÜÊòØ‰ªñ‰ª¨Â∏∏Â∏∏ÈÄöËøá @samp{<}Ôºå@samp{<<}Ôºå@samp{>}Ôºå@samp{>>}Ôºå@samp{>&} ‰∏é @samp{|} Êìç‰ΩúÁ¨¶ÔºåÂú® Shell ‰∏≠Ë¢´ÈáçÂÆöÂêë„ÄÇ
Ê†áÂáÜÈîôËØØ‰∏ÄËÇ°Áî®‰∫éÂÜôÈîôËØØ‰ø°ÊÅØÔºåÊúâ‰∏§‰∏™ÂàÜÁ¶ªÊµÅÔºàÊ†áÂáÜËæìÂá∫‰∏éÊ†áÂáÜÈîôËØØËæìÂá∫ÔºâÁöÑÂéüÂõ†ÊòØÂÆÉ‰ª¨ÂèØ‰ª•Ë¢´ÂçïÁã¨Âú∞ËøõË°åÈáçÂÆöÂêë„ÄÇ

@cindex differences in @command{awk} and @command{gawk}, error messages
@cindex error handling
Âú® @command{awk} ÁöÑ‰º†ÁªüÂÆûÁé∞‰∏≠ÔºåÂú® @command{awk} Á®ãÂ∫è‰∏≠Â∞ÜÈîôËØØ‰ø°ÊÅØÂÜôÂà∞Ê†áÂáÜÈîôËØØËæìÂá∫ÁöÑÂîØ‰∏ÄÊñπÂºèÂ¶Ç‰∏ãÔºö

@example
print "Serious error detected!" | "cat 1>&2"
@end example

@noindent
ÈÄöËøáÊâìÂºÄ‰∏Ä‰∏™Âà∞ Shell ÂëΩ‰ª§ÁöÑÁÆ°Á∫øÔºåËÄåËØ•ÂëΩ‰ª§ÂèØ‰ª•ËÆøÈóÆ‰ªé @command{awk} ÁªßÊâøËÄåÊù•ÁöÑÊ†áÂáÜÈîôËØØÊµÅ„ÄÇ
@c 8/2014: Mike Brennan says not to cite this as inefficient. So, fixed.
ËøôÊ†∑ÂÜôÊ≤°ÈÇ£‰πà‰ºòÈõÖÔºåËÄå‰∏î‰πüÈúÄË¶ÅÂºÄÂêØ‰∏Ä‰∏™Áã¨Á´ãÁöÑËøõÁ®ã„ÄÇÂõ†Ê≠§Ôºå‰∫∫‰ª¨Âú® @command{awk} Á®ãÂ∫è‰∏çÂ∏∏Ëøô‰πàÂπ≤ÔºåËÄåÊòØÈÄöËøá‰∏ãÈù¢ÁöÑÊñπÂºèÊù•ËæìÂá∫‰ø°ÊÅØÂà∞Â±èÂπïÔºö

@example
print "Serious error detected!" > "/dev/tty"
@end example

@noindent
Ôºà@file{/dev/tty} ÊòØ‰∏Ä‰∏™Áî±Êìç‰ΩúÁ≥ªÁªüÊèê‰æõÁöÑÁâπÊÆäÊñá‰ª∂ÔºåËØ•Êñá‰ª∂‰∏é‰Ω†ÁöÑÈîÆÁõò‰∏éÂ±èÂπïËøûÊé•„ÄÇÂÆÉË°®Á§∫ÁöÑÊòØ‚ÄúÁªàÁ´Ø‚Äù ÔºàTerminalÔºâÔºå
@footnote{Âú® @file{/dev/tty} ‰∏≠ÁöÑ‚Äútty‚Äù‰ª£Ë°®ÁöÑÊòØ‚ÄúTeletype‚ÄùÔºàÁîµ‰º†ÊâìÂ≠óÊú∫ÔºâÔºåÊòØ‰∏ÄÁßç‰∏≤Ë°åÁªàÁ´Ø}
Âú®Áé∞Âú®Á≥ªÁªü‰∏≠ÊòØÈîÆÁõò‰∏éÂ±èÂπïÔºåËÄå‰∏çÊòØ‰∏≤Ë°åÊéßÂà∂Âè∞„ÄÇÔºâËøô‰∏ÄËà¨ÊúâÁõ∏ÂêåÁöÑÊïàÊûúÔºå‰ΩÜÊòØÂπ∂‰∏çÊÄªÊòØÂ¶ÇÊ≠§Ôºö
Â∞ΩÁÆ°Ê†áÂáÜÈîôËØØËæìÂá∫‰∏ÄËà¨Â∞±ÊòØÂ±èÂπïÔºå‰ΩÜÊòØÂÆÉÂèØ‰ª•Ë¢´ÈáçÂÆöÂêë„ÄÇÂΩìÂèëÁîüËøôÁßçÊÉÖÂÜµÊó∂ÔºåÂÜôÂà∞Â±èÂπïÂ∞±‰∏çÊ≠£Á°Æ‰∫Ü„ÄÇ‰∫ãÂÆû‰∏äÔºåÂ¶ÇÊûú @command{awk} ÊòØ‰∏Ä‰∏™ÂêéÂè∞‰ªªÂä°ÔºåÂÆÉÊ†πÊú¨‰∏ªÊ≤°ÊúâÁªàÁ´Ø„ÄÇËøôÊ†∑ÔºåÊâìÂºÄ @file{/dev/tty} Â∞±‰ºöÂ§±Ë¥•„ÄÇ

@command{gawk}ÔºåBWK @command{awk} ‰ª•Âèä @command{mawk} Êèê‰æõ‰∫ÜËÆøÈóÆ‰∏â‰∏™Ê†áÂáÜÊµÅÁöÑÁâπÊÆä@value{FN}„ÄÇ
Â¶ÇÊûú @command{gawk} Âú®ÈáçÂÆöÂêëËæìÂÖ•ËæìÂá∫Êó∂Ôºå@value{FN}ÂåπÈÖçËøôÂÖ∂‰∏≠‰πã‰∏ÄÔºåÂÆÉÂ∞±Áõ¥Êé•‰ΩøÁî®Ëøô‰∏™@value{FN}ÊâÄ‰ª£Ë°®ÁöÑÊñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ
ËøôÊ≠§ÁâπÊÆä@value{FN}Âú®ÊâÄÊúâÁöÑ @command{gawk} Â∑≤ÁªèÁßªÊ§çÂà∞ÁöÑÊìç‰ΩúÁ≥ªÁªü‰∏≠ÈÉΩÊúâÊïàÔºåÂπ∂‰∏ç‰ªÖ‰ªÖÊòØ POSIX ÂÖºÂÆπÁöÑÁ≥ªÁªüÔºö

@cindex common extensions, @code{/dev/stdin} special file
@cindex common extensions, @code{/dev/stdout} special file
@cindex common extensions, @code{/dev/stderr} special file
@cindex extensions, common@comma{} @code{/dev/stdin} special file
@cindex extensions, common@comma{} @code{/dev/stdout} special file
@cindex extensions, common@comma{} @code{/dev/stderr} special file
@cindex file names, standard streams in @command{gawk}
@cindex @code{/dev/@dots{}} special files
@cindex files, @code{/dev/@dots{}} special files
@cindex @code{/dev/fd/@var{N}} special files (@command{gawk})
@table @file
@item /dev/stdin
Ê†áÂáÜËæìÂÖ•ÔºàÊñá‰ª∂ÊèèËø∞Á¨¶‰∏∫ 0Ôºâ„ÄÇ

@item /dev/stdout
Ê†áÂáÜËæìÂá∫ÔºàÊñá‰ª∂ÊèèËø∞Á¨¶‰∏∫ 1Ôºâ„ÄÇ

@item /dev/stderr
Ê†áÂáÜÈîôËØØËæìÂá∫ÔºàÊñá‰ª∂ÊèèËø∞Á¨¶ 2Ôºâ„ÄÇ
@end table

Â§çÁî®Ëøô‰∫õÂ∑•ÂÖ∑ÔºåÊÅ∞ÂΩìÁöÑÂ∞ÜÈîôËØØ‰ø°ÊÅØËæìÂá∫ÁöÑÊñπÂºèÂ∞±Â¶Ç‰∏ãÔºö

@example
print "Serious error detected!" > "/dev/stderr"
@end example

@cindex troubleshooting, quotes with file names
Ê≥®ÊÑèÂú®Êñá‰ª∂‰∏ä‰ΩøÁî®ÁöÑÂèåÂºïÂè∑„ÄÇÂ¶ÇÂÖ∂‰ªñÁöÑÈáçÂÆöÂêëÔºåÂÖ∂ÂÄºÂøÖÈ°ªÊòØÂ≠ó‰∏≤„ÄÇÂ∏∏ËßÅÁöÑÈîôËØØÂ∞±ÊòØÁúÅÁï•‰∫ÜÂºïÂè∑ÔºåÊ≤°ÊúâÂºïÂè∑‰ºö‰∫ßÁîü‰ª§‰∫∫ÁñëÊÉëÁöÑÁªìÊûú„ÄÇ

@command{gawk} Âú® POSIX ÂÖºÂÆπÊ®°Âºè‰∏ãÔºåÂπ∂‰∏çÂ∞ÜËøô‰∫õÊñáÂè•ÁâπÊÆäÂØπÂæÖ„ÄÇ‰ΩÜÊòØÔºåÂõ†‰∏∫ BWK @command{awk} ÊîØÊåÅÂÆÉ‰ª¨Ôºå
@command{gawk} ‰πüÊîØÊåÅÂÆÉ‰ª¨ÔºåÂ∞±ÁÆó‰ΩøÁî®‰∫Ü @option{--traditional} ÈÄâÈ°π‰πüÊòØ‰∏ÄÊ†∑
ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ

@node Special Files
@section @command{gawk} ‰∏≠ÁöÑÁâπÊÆä@value{FFN}
@cindex @command{gawk}, file names in

Èô§‰∫ÜÊ†áÂáÜËæìÂÖ•ÔºåÊ†áÂáÜËæìÂá∫‰∏éÊ†áÂáÜÈîôËØØËæìÂá∫Ôºå
@command{gawk} ËøòÊèê‰æõ‰∫ÜËÆøÈóÆ‰ªªÊÑèÂ∑≤ÁªèÊâìÂºÄÊñá‰ª∂ÊèèËø∞Á¨¶ÁöÑÊñπÊ≥ï„ÄÇÂè¶Â§ñÔºåËøò‰øùÁïô‰∫ÜÁî®‰∫é TCP/IP ÁΩëÁªúÁöÑÁâπÊÆä@value{FN}„ÄÇ

@menu
* Other Inherited Files::       Accessing other open files with
                                @command{gawk}.
* Special Network::             Special files for network communications.
* Special Caveats::             Things to watch out for.
@end menu

@node Other Inherited Files
@subsection Âú® @command{gawk} ËÆøÈóÆÂÖ∂‰ªñÂ∑≤ÂºÄÊñá‰ª∂

Èô§‰∫Ü @code{/dev/stdin}Ôºå@code{/dev/stdout}Ôºå‰∏é @code{/dev/stderr} Ëøô‰∫õÊó©ÂâçÊèêËøáÁöÑÁâπÊÆä@value{FN}Â§ñÔºå
@command{gawk} ËøòÊèê‰æõ‰∫ÜËÆøÈóÆÂ∑≤ÁªèÊâìÂºÄÁöÑÊñá‰ª∂ÁöÑËØ≠Ê≥ïÔºö

@table @file
@item /dev/fd/@var{N}
‰∏éÊñá‰ª∂ÊèèËø∞Á¨¶ @var{N} ÂÖ≥ËÅîÁöÑÊñá‰ª∂„ÄÇËØ•Êñá‰ª∂ÂøÖÈ°ªÁî±ÂêØÂä® @command{awk} Á®ãÂ∫èÊâßË°åÁöÑÁ®ãÂ∫èÔºà‰∏ÄËà¨ÊòØ Shell ÔºâÊâìÂºÄÁöÑÊñá‰ª∂„ÄÇ
Èô§ÈùûÂú®Ë∞ÉÁî® @command{gawk} ÁöÑ Shell ‰∏≠Â§öËä±‰∏Ä‰∫õÂäüÂ§´Ôºå‰∏çÁÑ∂Âè™‰ºöÊúâÊèèËø∞Á¨¶ 0Ôºå1 ‰∏é 2 ÊòØÊâìÂºÄÁöÑ„ÄÇ
@end table

@value{FN} @file{/dev/stdin}Ôºå@file{/dev/stdout}Ôºå‰∏é @file{/dev/stderr} ÂÆûÈôÖ‰∏äÂ∞±ÊòØ @file{/dev/fd/0}Ôºå@file{/dev/fd/1}Ôºå
‰∏é @file{/dev/fd/2} ÁöÑÂà´Âêç„ÄÇ‰ΩÜÊòØÔºåËøô‰∫õÂêçÂ≠óÊõ¥ÊúâËØ¥ÊòéÊÄß„ÄÇ

Ê≥®ÊÑèÔºåÂØπ‰∫éÊñá‰ª∂ÊèèËø∞Á¨¶Âè∑Â§ß‰∫é 2 ‰ª•‰∏äÁöÑ@value{FN}ÂΩ¢Âºè @code{"/dev/fd/@var{N}"} ÊâßË°å @code{close()} ÂáΩÊï∞Ôºå
Êâç‰ºöÁúüÊ≠£Âú∞ÊâßË°åÂÖ≥Èó≠ÔºàcloseÔºâÊìç‰Ωú„ÄÇ

@node Special Network
@subsection Áî®‰∫éÁΩëÁªúÁöÑÁâπÊÆäÊñá‰ª∂
@cindex networks, support for
@cindex TCP/IP, support for

@command{gawk} Á®ãÂ∫èÂèØ‰ª•ÊâìÂºÄÂèåÂêëÈÄö‰ø°ÁöÑ TCP/IP ËøûÊé•ÔºåÊ≠£Â¶Ç‰∏Ä‰∏™ÂÆ¢Êà∑Á´Ø‰∏é‰∏Ä‰∏™ÊúçÂä°Á´Ø‰∏ÄÊ†∑„ÄÇ
ËøôÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÂΩ¢ÂºèÁöÑÁâπÊÆä@value{FN}Êù•ÂÆûÁé∞Ôºö

@example
@file{/@var{net-type}/@var{protocol}/@var{local-port}/@var{remote-host}/@var{remote-port}}
@end example

@var{net-type} ÊòØ @samp{inet}Ôºå@samp{inet4}Ôºå ÊàñËÄÖ @samp{inet6} ‰πã‰∏Ä„ÄÇ
@var{protocol} ÊòØ @samp{tcp} ÊàñËÄÖ @samp{udp} ‰πã‰∏ÄÔºåÂÖ∂‰ªñÁöÑÂèÇÊï∞Âàô‰ª£Ë°®‰∫ÜË¶ÅÂêØÂä®‰∏Ä‰∏™ÁΩëÁªúËøûÊé•ÊâÄÈúÄË¶ÅÁöÑÂÖ∂‰ªñ‰ø°ÊÅØ„ÄÇ
Ëøô‰∫õÊñá‰ª∂Âêç‰∏é @samp{|&} ‰∏ÄËµ∑‰ΩøÁî®Áî®Êù•ËøõË°åÂπ∂Á®ãÈÄö‰ø°ÔºàÊü•Áúã @ref{Two-way I/O}Ôºâ„ÄÇËøôÊòØ‰∏Ä‰∏™È´òÁ∫ßÁâπÊÄßÔºå‰∏∫‰∫ÜÂÆåÊï¥ÊÄßÂú®ËøôÈáåÂÖàËØ¥Êòé‰∏Ä‰∏ã„ÄÇÂÆåÊï¥ÁöÑËÆ®ËÆ∫Ë¶ÅÂà∞ @ref{TCP/IP Networking}„ÄÇ

@node Special Caveats
@subsection ÁâπÊÆä@value{FFN}ËØ¥Êòé

Â¶ÇÊûúË¶Å‰ΩøÁî® @command{gawk} Êèê‰æõÁöÑ‰∏Ä‰∫õÁâπÊÆä@value{FN}ÔºåÂàô‰∏ãÈù¢Êúâ‰∏Ä‰∫õË¶ÅËÆ∞‰ΩèÁöÑÁÇπÔºö

@itemize @value{BULLET}
@cindex compatibility mode (@command{gawk}), file names
@cindex file names, in compatibility mode
@item
ÂØπ‰∫é‰∏â‰∏™È¢ÑÊâìÂºÄÁöÑÊ†áÂáÜ@value{FN}ÁöÑËØÜÂà´Âè™ÊúâÂú® POSIX Ê®°Âºè‰∏ãÊâç‰ºöË¢´Á¶ÅÊ≠¢„ÄÇ

@item
ÂØπ‰∫éÂÖ∂‰ªñÁâπÊÆäÊñá‰ª∂ÂêçÁöÑËØÜÂà´ÔºåÂè™Êúâ @command{gawk} Â§Ñ‰∫éÂÖºÂÆπÊ®°ÂºèÊó∂Êâç‰ºöË¢´Á¶ÅÊ≠¢ÔºàË¶Å‰πà‰ΩøÁî® @option{--traditional} Ôºå
Ë¶Å‰πàÊòØ‰ΩøÁî® @option{--posix} ÈÄâÈ°πÔºåÊü•Áúã @ref{Options}Ôºâ„ÄÇ

@item
@command{gawk} @emph{ÊÄªÊòØ}‰ºöËß£ÈáäËøô‰∫õÁâπÊÆäÊñá‰ª∂Âêç„ÄÇ
‰æãÂ¶ÇÔºå‰ΩøÁî® @samp{/dev/fd/4} ‰∏∫ËæìÂá∫ÔºåÂÆûÈôÖ‰∏äÂÜôÂÖ•ÁöÑÊòØÊèèËø∞Á¨¶‰∏∫ 4 ÁöÑÊñá‰ª∂ÔºåËÄå‰∏çÊòØ‰ΩøÁî® @code{dup()} Â§çÂà∂ 4 ÊèèËø∞Á¨¶ÁöÑÊñ∞Êñá‰ª∂„ÄÇ
Â§ßÂ§öÊï∞ÊÉÖÂÜµ‰∏ãÔºåËøôÊ≤°Êúâ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºå@emph{‰∏çË¶Å}ÂÖ≥Èó≠‰ªªÊÑè‰∏éÊñá‰ª∂ÊèèËø∞Á¨¶ 0Ôºå1Ôºå2 Áõ∏ÂÖ≥ÁöÑÊñá‰ª∂ÔºåËøô‰∏™Áõ∏ÂΩìÈáçË¶Å„ÄÇËøô‰πàÂÅöÁöÑËØùÔºå‰ºöÂØºËá¥‰∏çÂèØÈ¢ÑÁü•ÁöÑË°å‰∏∫„ÄÇ
@end itemize

@node Close Files And Pipes
@section ÂÖ≥Èó≠ËæìÂÖ•ËæìÂá∫ÈáçÂÆöÂêë
@cindex files, output, See output files
@cindex input files, closing
@cindex output, files@comma{} closing
@cindex pipe, closing
@cindex coprocesses, closing
@cindex @code{getline} command, coprocesses@comma{} using from

Âú® @command{awk} Á®ãÂ∫èÊâßË°åÊúüÈó¥ÔºåÂ¶ÇÊûúÂêåÊ†∑ÁöÑÊñá‰ª∂ÂêçÊàñËÄÖÂêå‰∏Ä‰∏™ Shell ÂëΩ‰ª§Ë¢´ @code{getline} ‰ΩøÁî®ËøáÂ§ö‰∫é‰∏ÄÊ¨°
ÔºàÊü•Áúã @ref{Getline}ÔºâÔºåÂàôÊñá‰ª∂ÔºàÊàñËÄÖÂëΩ‰ª§ÁöÑÊâßË°åÔºâÂè™Âú®Á¨¨‰∏ÄÊ¨°ÂèëÁîü„ÄÇ‰ªéÈÇ£‰ª•ÂêéÔºå‰ªé‰∏≠ËØªÂèñÁ¨¨‰∏Ä‰∏™ËæìÂÖ•ËÆ∞ÂΩï„ÄÇ
ÈÄöËøá @code{getline} ÂÜçÊ¨°ËØªÂèñÂêå‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÂëΩ‰ª§Êó∂ÔºåÁ¨¨‰∫åÊù°ËÆ∞ÂΩï‰ªéÂÖ∂‰∏≠Ëé∑ÂèñÔºå‰ª•Ê≠§Á±ªÊé®„ÄÇ

Áõ∏‰ººÂú∞ÔºåÂΩìÊñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìË¢´ÊâìÂºÄÁî®‰∫éËæìÂá∫Êó∂Ôºå@command{awk} ‰ºöËÆ∞ÂΩï@value{FN}ÊàñËÄÖ‰∏éÂÖ∂Áõ∏ÂÖ≥ÁöÑÂëΩ‰ª§ÔºåÂêéÁª≠ÂØπ‰∫éÂêå‰∏Ä‰∏™Êñá‰ª∂ÊàñËÄÖÂëΩ‰ª§ÂÜôÂÖ•Ôºå‰ºöË¢´ÈôÑÂä†Âà∞Ââç‰∏Ä‰∏™ÂÜôÊìç‰Ωú‰πãÂêé„ÄÇÁõ¥Âà∞ @command{awk} ÈÄÄÂá∫ÂêéÔºåÊñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìÊâç‰ºöË¢´ÂÖ≥Èó≠„ÄÇ

@cindexawkfunc{close}
ËøôÊÑèÊÄùÊòØËØ¥Ôºå‰∏∫‰∫ÜÂÜçÊ¨°‰ªéÂ§¥ÂºÄÂßãËØªÂèñÂêå‰∏Ä‰∏™Êñá‰ª∂ÔºåÊàñËÄÖÈáçÊñ∞ÊâßË°å‰∏Ä‰∏™ Shell ÂëΩ‰ª§Ôºå‰Ω†ÈúÄË¶Å‰∏Ä‰∫õÁâπÂà´Ê≠•È™§ÔºàËÄå‰∏çÊòØ‰ªéÂêå‰∏Ä‰∏™ÂëΩ‰ª§‰∏≠ËØªÂèñÊõ¥Â§öÁöÑËæìÂá∫Ôºâ„ÄÇ
@code{close()} ÂáΩÊï∞Â∞±ÊòØÁî®Êù•ÊâßË°åËøô‰∏™Ê≠•È™§Ôºö

@example
close(@var{filename})
@end example

@noindent
ÊàñËÄÖÔºö

@example
close(@var{command})
@end example

@var{filename} ‰∏é @var{command} ÂèÇÊï∞ÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑË°®ËææÂºè„ÄÇ
ÂÆÉÁöÑÂÄºÂøÖÈ°ª@emph{ÂÆåÂÖ®}ÂåπÈÖçÁî®‰ª•ÊâìÂºÄÁöÑÊñá‰ª∂ÊàñËÄÖÂêØÂä®ÁöÑÂëΩ‰ª§Ë°åÁöÑÂ≠ó‰∏≤ÔºàÁ©∫Ê†º‰∏éÂÖ∂‰ªñ‚ÄúÊó†ÂÖ≥‚ÄùÁöÑÂ≠óÁ¨¶‰πüÂåÖÊã¨Âú®ÂÜÖÔºâ„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÂÉèËøôÊ†∑ÊâìÂºÄ‰∏Ä‰∏™ÁÆ°ÈÅìÔºö

@example
"sort -r names" | getline foo
@end example

@noindent
ÁÑ∂Âêé‰Ω†ÂøÖÈ°ªËøôÊ†∑Êù•ÂÖ≥Èó≠ÂÆÉÔºö

@example
close("sort -r names")
@end example

Âè™Ë¶ÅÂáΩÊï∞Ë∞ÉÁî®ÊâßË°åËøáÔºå‰∏ã‰∏Ä‰∏™‰ªéÈÇ£‰∏™Êñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìËøõË°å @code{getline} Êó∂Ôºå
ÊàñËÄÖ‰∏ã‰∏Ä‰∏™ @code{print} ‰∏é @code{printf} Âà∞ÈÇ£‰∏™Êñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìÔºå‰ºöË¢´ÈáçÊñ∞ÊâìÂºÄÊàñËÄÖÈáçÊñ∞ÊâßË°åÂëΩ‰ª§„ÄÇ
Áî±‰∫é‰Ω†Áî®Êù•ÂÖ≥Èó≠ÁöÑÊñá‰ª∂ÊàñËÄÖÁÆ°Á∫øÂøÖÈ°ªÂÆåÂÖ®ÂåπÈÖç‰Ω†Áî®Êù•ÊâìÂºÄÁöÑÊñá‰ª∂ÊàñËÄÖÊâßË°åÁöÑÂëΩ‰ª§Ôºå
ÊâÄ‰ª•Áî®‰∏Ä‰∏™ÂèòÈáèÊù•Â≠òÂÇ®@value{FN}ÊàñËÄÖÂëΩ‰ª§ÊòØ‰∏Ä‰∏™Â•ΩÁöÑÁºñÁ®ãÂÆûË∑µ„ÄÇ‰∏äÈù¢ÁöÑ‰æãÂ≠êÂõ†Ê≠§ÂèØ‰ª•ÂèòÊàêËøôÊ†∑Ôºö

@example
sortcom = "sort -r names"
sortcom | getline foo
@dots{}
close(sortcom)
@end example

@noindent
ËøôÂèØ‰ª•Â∏ÆÂä©‰Ω†ÈÅøÂÖç @command{awk} Á®ãÂ∫è‰∏≠ÈÇ£‰∫õÂæàÈöæÊü•ÊâæÁöÑËæìÂá∫ÈîôËØØ„ÄÇËøô‰πüÊúâ‰∏Ä‰∫õÁêÜÁî±‰∏∫‰ªÄ‰πàË¶ÅÂÖ≥Èó≠ËæìÂá∫Êñá‰ª∂Ôºö

@itemize @value{BULLET}
@item
‰∏∫‰∫ÜÂÜôËøôÊ†∑‰∏Ä‰∏™Êñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂‰πãÂêé‰ºöÂú®Âêå‰∏Ä‰∏™ @command{awk} Á®ãÂ∫è‰∏≠ËØªÂèñÂÆÉ„ÄÇ
Âú®ÂÜôÂÆå‰πãÂêéË¶ÅÂÖ≥Èó≠ÂÆÉÔºåÁÑ∂ÂêéÂÜç‰ΩøÁî® @code{getline} ËøõË°åËØªÂèñ„ÄÇ

@item
‰∏∫‰∫ÜÂú® @command{awk} Á®ãÂ∫è‰∏≠ÔºåËøûÁª≠Âú∞ÂÜôÂ§ßÈáèÁöÑÊñá‰ª∂„ÄÇ
Â¶ÇÊûúÊñá‰ª∂Ê≤°ÊúâË¢´ÂÖ≥Èó≠Ôºå@command{awk} ÊúâÂèØËÉΩÊúÄÁªà‰ºöË∂ÖËøáÁ≥ªÁªüÂØπ‰∫éÂêå‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÊâÄËÉΩÊâìÂºÄÁöÑÊñá‰ª∂Êï∞ÁöÑÈôêÂà∂„ÄÇÂõ†Ê≠§ÊúÄÂ•ΩÊòØÂú®ÂÜôÂÆåÊØè‰∏™Êñá‰ª∂Êó∂ÂÖ≥Èó≠ÂÆÉ„ÄÇ

@item
‰∏∫‰∫ÜÂÆåÊàê‰∏Ä‰∏™ÂëΩ‰ª§„ÄÇÂΩìËæìÂá∫ÈáçÂÆöÂêëÊòØÈÄöËøáÁÆ°ÈÅìËøõË°åÁöÑ„ÄÇ
‰ªéËøô‰∏™ÁÆ°ÈÅìËØªÂèñÁöÑÂëΩ‰ª§‰ºöÊåÅÁª≠Â∞ùËØï‰ªéÁÆ°ÈÅì‰∏≠ËØªÂèñÔºåÂè™Ë¶ÅÁÆ°ÈÅìÊòØÊâìÂºÄÁöÑ„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÁõ∏ÂÖ≥ÁöÑÂëΩ‰ª§Áõ¥Âà∞ÁÆ°ÈÅìÂÖ≥Èó≠ÁöÑÊÉÖÂÜµ‰∏ãÊâçËÉΩÁªßÁª≠Âπ≤Ëá™Â∑±ÁöÑ‰∫ãÊÉÖ„ÄÇ
‰æãÂ¶ÇÔºåÂ¶ÇÊûúËæìÂá∫Ë¢´ÈáçÂÆöÂêëÂà∞‰∫Ü @command{mail} Á®ãÂ∫èÔºåÊ∂àÊÅØÁõ¥Âà∞ÁÆ°ÈÅìË¢´ÂÖ≥Èó≠‰∫ÜÊâçÂÆûÈôÖÂú∞ÂèëÈÄÅÂÆå„ÄÇ

@item
‰∏∫‰∫ÜÊâßË°åÁ¨¨‰∫åÊ¨°ÔºåÂà©Áî®Áõ∏ÂêåÁöÑÂèÇÊï∞ÔºåÊâßË°åÁõ∏ÂêåÁöÑÁ®ãÂ∫è„ÄÇËøô‰∏éÊØîÁ¨¨‰∏ÄÊ¨°ÊâßË°åËæìÂÖ•Êõ¥Â§öÁöÑÊï∞ÊçÆ‰∏çÊòØ‰∏Ä‰ª∂‰∫ãÊÉÖÔºÅ

‰æãÂ¶ÇÔºåÂÅáËÆæ‰∏ÄÁßçÁ®ãÂ∫è‰ºöÂ∞ÜËæìÂá∫ÈÄöËøáÁÆ°ÈÅìËæìÂá∫Áªô @command{mail} Á®ãÂ∫è„ÄÇÂ¶ÇÊûúËæìÂá∫‰∫ÜÂá†Ë°åÈáçÂÆöÂêëÂà∞‰∫ÜËøô‰∏™ÁÆ°ÈÅìËÄåÊ≤°ÊúâÂÖ≥Èó≠Ôºå
ÂàôÂÆÉ‰ª¨‰ºöÁîüÊàê‰∏Ä‰∏™ÂåÖÊã¨Âá†Ë°åÊï∞ÊçÆÁöÑÁÆÄÂçïÁöÑÊ∂àÊÅØÔºàÈÇÆ‰ª∂Ôºâ„ÄÇÂè¶‰∏ÄÊñπÈù¢ÔºåÂ¶ÇÊûúÁ®ãÂ∫èÊØèËæìÂá∫‰∏ÄË°åÂ∞±ÂÖ≥Èó≠‰∏ÄÊ¨°ÁÆ°ÈÅìÔºåÂàôÊØè‰∏ÄË°åÈÉΩÊàê‰∏Ä‰∏™‰∏ÄÁã¨Á´ãÁöÑÊ∂àÊÅØÔºàÈÇÆ‰ª∂Ôºâ„ÄÇ
@end itemize

@cindex differences in @command{awk} and @command{gawk}, @code{close()} function
@cindex portability, @code{close()} function and
@cindex @code{close()} function, portability
Â¶ÇÊûú‰Ω†‰Ωø‰∫ÜÊØîÁ≥ªÁªüÊâÄÂÖÅËÆ∏‰Ω†ÊâìÂºÄÁöÑÊñá‰ª∂Êï∞Êõ¥Â§öÁöÑÊñá‰ª∂Ôºå@command{gawk} ‰ºöÂ∞ùËØïÂ§çÁî®‰Ω†ÁöÑ@value{DF}‰∏≠Â∑≤ÁªèÊâìÂºÄÁöÑÊñá‰ª∂„ÄÇ
@command{gawk} ËøôÊ†∑ÁöÑËÉΩÂäõ‰æùËµñ‰∫é‰Ω†ÁöÑÊìç‰ΩúÁ≥ªÁªüÊâÄÊèê‰æõÁöÑÂ∑•ÂÖ∑ÔºåÂõ†Ê≠§Âπ∂‰∏ç‰∏ÄÂÆöÊÄªÊòØ‰ºöÊúâÁî®„ÄÇÊâÄ‰ª•ÔºåÊó†ËÆ∫ÂØπ‰∫éÊòØÂ•ΩÁöÑÂÆûË∑µ‰πüÂ•ΩÔºåËøòÊòØÂ•ΩÁöÑÂèØÁßªÊ§çÊÄßÂª∫ËÆÆ‰πüÂ•ΩÔºåÂΩìÂ§ÑÁêÜÂÆå‰∏Ä‰∏™Êñá‰ª∂Êó∂Ôºå
Â∞±Â∫îËØ•ÈÄöËøá @code{close()} Â∞ÜÂÆÉ‰ª¨ÂÖ≥Èó≠„ÄÇ‰∫ãÂÆû‰∏äÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰∫ÜÂ§ßÈáèÁöÑÁÆ°ÈÅìÔºåÂú®‰ΩøÁî®ÂÆåÂêéËøõË°åÂÖ≥Èó≠ÊòØÂæàÈáçË¶ÅÁöÑ„ÄÇ‰æãÂ¶ÇÔºåËÄÉËôë‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
@{
    @dots{}
    command = ("grep " $1 " /some/file | my_prog -q " $3)
    while ((command | getline) > 0) @{
        @var{process output of} command
    @}
    # need close(command) here
@}
@end example

Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÂàõÂª∫‰∫ÜÂü∫‰∫éÊØè‰∏™ËÆ∞ÂΩïÁöÑÁÆ°Á∫øÔºåÂ¶ÇÊ≥®Èáä‰∏≠ÊâÄËø∞ÁöÑÔºåÊ≤°ÊúâË∞ÉÁî® @code{close()} ÂáΩÊï∞Ôºå
Âàô @command{awk} ‰ºöÂàõÂª∫‰∏Ä‰∏™Â≠êËøõÁ®ãÊù•ÊâßË°åÂëΩ‰ª§ÔºåÁõ¥Âà∞ÊúÄÁªàÁî±‰∫éËØ∑Ê±ÇÊõ¥Â§öÁöÑÁÆ°Á∫øËÄåËÄóÂ∞ΩÊñá‰ª∂ÊèèËø∞Á¨¶„ÄÇ

Â∞ΩÁÆ°ÊØè‰∏™ÂëΩ‰ª§ÈÉΩÂ∑≤ÁªèÊâßË°åÂÆåÊàêÔºàÈÄöËøá @code{getline} ÁöÑ end-of-file ÁöÑËøîÂõûÂÄºÊåáÁ§∫ÔºâÔºåÂ≠êËøõÁ®ãÂç¥Ê≤°ÊúâÁªìÊùüÔºõ
@footnote{ÊäÄÊúØÊúØËØ≠Â∫îËØ•ÊòØÁóÖÊÄÅËøõÁ®ãÔºàmorbidÔºâÔºåÂ∑≤ÁªèÂÆåÊàêÁöÑÂ≠êËøõÁ®ãÁß∞‰∏∫‚ÄúÂÉµÂ∞∏ËøõÁ®ãÔºàzombieÔºâ‚ÄùÔºåÈÄöËøá‚ÄúÂõûÊî∂ÔºàreapingÔºâ‚ÄùÂêéÔºåËøõÁ®ãÂ∞±‰ºöË¢´Ê∏ÖÁêÜ„ÄÇ}
@c Good old UNIX: give the marketing guys fits, that's the ticket
Êõ¥ÈáçË¶ÅÁöÑÊòØÔºå‰∏éÁÆ°ÈÅìÂÖ≥ËÅîÁöÑÊèèËø∞Á¨¶Áõ¥Âà∞ @command{awk} ÈÄÄÂá∫ÂêéÔºåÊâç‰ºöË∞ÉÁî® @code{close()} ËøõË°åÂÖ≥Èó≠ÈáäÊîæ„ÄÇ

@code{close()} Â¶ÇÊûúÊé•Êî∂ÁöÑ‰∏çÊòØ‰∏Ä‰∏™Êñá‰ª∂„ÄÅÁÆ°ÈÅìÊàñËÄÖÂπ∂Á®ãËøôÊ†∑ÁöÑÊâìÂºÄÁî®‰∫éÈáçÂÆöÂêëÁöÑÂèÇÊï∞ÔºåÂàôÈªòÈªòÂú∞‰ªÄ‰πà‰πü‰∏çÂπ≤„ÄÇ
Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂÆÉÁöÑËøîÂõûÂÄºÊòØË¥üÂÄºÔºåË°®Á§∫ÈîôËØØ„ÄÇÂè¶Â§ñÔºå@command{gawk} ‰ºöËÆæÁΩÆ @code{ERRNO} ÁöÑÂÄº‰∏∫ÊåáÁ§∫ÂØπÂ∫îÁöÑÈîôËØØ„ÄÇ

‰πüË¶ÅÊ≥®ÊÑèÂà∞ @samp{close(FILENAME)}ÔºåÈíàÂØπ‰ªéÂëΩ‰ª§Ë°å‰∏≠ËØªÂèñÊñá‰ª∂ÂêçËøôÊ†∑ÁöÑÈöêÂºèÂæ™ÁéØÊ≤°Êúâ‰ªÄ‰πà‚ÄúÈ≠îÊ≥ï‚ÄùÊïàÂ∫î„ÄÇ
Êõ¥ÊúâÂèØËÉΩÁöÑÊòØÔºåÂØπ‰∫éÊñá‰ª∂ÁöÑÂÖ≥Èó≠ÔºåÂú®ÈáçÂÆöÂêë‰∏≠‰∏ç‰ºöÂÜçÊâìÂºÄÔºåÂõ†Ê≠§ @command{awk} ‰ºö‰ªÄ‰πà‰πü‰∏çÂÅöÔºåËÄåÊòØËøîÂõû‰∏Ä‰∏™Ë¥üÂÄº„ÄÇ

@cindex @code{|} (vertical bar), @code{|&} operator (I/O), pipes@comma{} closing
ÂΩì‰ΩøÁî® @samp{|&} Êìç‰ΩúÁ¨¶‰∏éÂπ∂Á®ãËøõË°åÈÄö‰ø°Êó∂ÔºåÂÖ≥Èó≠ÂèåÂêëÈÄö‰ø°‰∏≠ÁöÑ‰∏ÄÁ´ØÂÅ∂Â∞îÁöÑÊÉÖÂÜµ‰∏ã‰ºöÈùûÂ∏∏ÊúâÁî®„ÄÇ
ËøôÂè™ÈúÄË¶ÅÂú®Ë∞ÉÁî® @code{close()} Êó∂Êèê‰æõÁ¨¨‰∫å‰∏™ÂèÇÊï∞Â∞±ÂèØ‰ª•ÂÆåÊàê„ÄÇ
Â¶ÇÂÖ∂‰ªñÂú∞ÊñπË∞ÉÁî® @code{close()} Á±ª‰ººÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÂëΩ‰ª§ÂêçÔºåÊàñËÄÖÊòØÁî®‰∫éÂºÄÂêØÂπ∂Á®ãÁöÑÁâπÊÆäÊñá‰ª∂„ÄÇ
ËÄåÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÂÖ∂ÂÄºÊòØ @code{"to"} ÊàñËÄÖÊòØ @code{"from"}ÔºåÂ§ßÂ∞èÂÜôÊó†ÂÖ≥„ÄÇËøôÊòØ‰∏Ä‰∏™È´òÁ∫ßÁâπÊÄßÔºå
‰ºöÂà∞ @ref{Two-way I/O}ÔºåËøõË°åËØ¶ÁªÜÁöÑËÆ®ËÆ∫ÔºåÂπ∂Êèê‰æõÊõ¥Â§öÁöÑÂÆûÈôÖ‰æãÂ≠ê„ÄÇ

@sidebar ‰ΩøÁî® @code{close()} ÁöÑËøîÂõûÂÄº
@cindex dark corner, @code{close()} function
@cindex @code{close()} function, return value
@cindex return value@comma{} @code{close()} function
@cindex differences in @command{awk} and @command{gawk}, @code{close()} function
@cindex Unix @command{awk}, @code{close()} function and

Âú®ËÆ∏Â§ö Unix @command{awk} ÁöÑËÄÅÁâàÊú¨‰∏≠Ôºå@code{close()} ÂáΩÊï∞ÂÆûÈôÖ‰∏äÊòØ‰∏ÄÊù°ËØ≠Âè•„ÄÇ
@value{DARKCORNER}
Â∞ùËØïÂà©Áî® @code{close()} ÁöÑËøîÂõûÂÄºÊòØ‰∏Ä‰∏™ËØ≠Ê≥ïÈîôËØØÔºö

@example
command = "@dots{}"
command | getline info
retval = close(command)  # syntax error in many Unix awks
@end example

@cindex @command{gawk}, @code{ERRNO} variable in
@cindex @code{ERRNO} variable, with @command{close()} function
@command{gawk} Â∞Ü @code{close()} ÂΩìÊàê‰∏Ä‰∏™ÂáΩÊï∞„ÄÇÂ¶ÇÊûúÂÖ∂ÂèÇÊï∞Ë°®Á§∫‰ªéÊú™ÊâìÂºÄÁöÑ‰∏úË•øÔºàÊñá‰ª∂„ÄÅÁÆ°ÈÅì„ÄÅÂπ∂Á®ãÔºâÔºåÂàôËøîÂõûÂÄº @minus{}1 Ôºå
ÊàñËÄÖÊòØÁ≥ªÁªüÈóÆÈ¢òÂØºËá¥Êñá‰ª∂ÊàñËÄÖËøõÁ®ãÁöÑÂÖ≥Èó≠ÔºåÂàô‰πü‰ºöËøîÂõû @minus{}1 „ÄÇ
Âú®Ëøô‰∏™ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} Â∞ÜÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{ERRNO} ÁöÑÂÄºËÆæÂÆö‰∏∫ÊèèËø∞ÈóÆÈ¢òÁöÑÂ≠ó‰∏≤„ÄÇ

Âú® @command{gawk} ‰∏≠ÔºåÂΩìÂÖ≥Èó≠ÁÆ°ÈÅìÊàñËÄÖÂπ∂Á®ãÊó∂ÔºàËæìÂÖ•ÊàñËæìÂá∫ÔºâÔºåÂÖ∂ËøîÂõûÂÄºÂ∞±ÊòØÂëΩ‰ª§ÁöÑÈÄÄÂá∫Áä∂ÊÄÅ„ÄÇ
@footnote{ËøôÊòØ‰∏Ä‰∏™ÂÖ® 16 ‰ΩçÁöÑÁî± @code{wait()} Á≥ªÁªüË∞ÉÁî®ËøîÂõûÁöÑÂÄº„ÄÇÊü•ÁúãÁ≥ªÁªüÊâãÂÜåÊù•Ëé∑ÂèñÂ¶Ç‰ΩïËß£Á†ÅËøô‰∏™ÂÄºÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ}
Âê¶ÂàôÔºåÂÆÉÂ∞±ÊòØ‰ªéÁ≥ªÁªüÁöÑ @code{close()} ÊàñËÄÖ C ÂáΩÊï∞ @code{close()} ÁöÑÂÖ≥Èó≠ËæìÂÖ•ËæìÂá∫Êñá‰ª∂Êó∂ÁöÑËøîÂõûÂÄº„ÄÇ
Â¶ÇÊûúÊàêÂäüÔºåÂàôÂÄºËøîÂõû‰∏∫ 0ÔºåÂ§±Ë¥•‰∏ãËøîÂõû @minus{}1 „ÄÇ

POSIX Ê†áÂáÜÈùûÂ∏∏Ê®°Á≥äÂú∞ËØ¥Ôºå@code{close()} Âú®ÊàêÂäüÁöÑÊó∂ÂÄôËøîÂõû 0ÔºåËÄåÂ§±Ë¥•Êó∂ËøîÂõûÈùûÈõ∂ÂÄº„ÄÇ
‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå‰∏çÂêåÁöÑÂÆûÁé∞Âú®ÂÖ≥Èó≠ÁÆ°ÈÅìÊó∂‰ºöÊä•Âëä‰∏çÂêåÁöÑÁªìÊûúÔºåÂõ†Ê≠§ÔºåËøîÂõûÂÄºÊòØ‰∏çÂèØÁßªÊ§çÁöÑ„ÄÇ
@value{DARKCORNER}
Âú® POSIX Ê®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºå@command{gawk} Âú®ÂÖ≥Èó≠ÁÆ°ÈÅìÊó∂ÔºåÂè™ËøîÂõû 0„ÄÇ
@end sidebar


@node Output Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
@code{print} ÊâìÂç∞ÈÄóÂè∑ÂàÜÈöîÁöÑË°®ËææÂºè„ÄÇÊØè‰∏™Ë°®ËææÂºèÂú®ËæìÂá∫Êó∂ÈÉΩÁî± @code{OFS} ÁöÑÂÄºËøõË°åÂàÜÈöîÔºåÂπ∂‰ª• @code{ORS} ÁöÑÂÄºÁªìÊùü„ÄÇ@code{OFMT} Êèê‰æõ‰∫ÜÂØπÊï∞ÂÄº @code{print} ËæìÂá∫Êó∂ÁöÑÊ†ºÂºèËΩ¨Êç¢„ÄÇ

@item
@code{printf} ËØ≠Âè•Êèê‰æõ‰∫ÜÈùûÂ∏∏Â•ΩÁöÑËæìÂá∫ÊéßÂà∂Á≤íÂ∫¶ÔºåÈÄöËøáÊ†ºÂºèÊéßÂà∂Â≠óÊØçÊù•ËæìÂá∫‰∏çÂêåÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇÂêåÊó∂ÔºåÁî®‰∏çÂêåÁöÑÊ†áÂøóÊù•‰øÆÊîπÊ†ºÂºèÊéßÂà∂Â≠óÊØçÁöÑË°å‰∏∫„ÄÇ

@item
@code{print} ‰∏é @code{printf} ÁöÑËæìÂá∫ÈÉΩÂèØ‰ª•ÈáçÂÆöÂêëÂà∞Êñá‰ª∂„ÄÅÁÆ°ÈÅì‰∏éÂπ∂Á®ã„ÄÇ

@item
@command{gawk} Êèê‰æõ‰∫ÜÁâπÊÆäÁöÑ@value{FN}Áî®‰∫éËÆøÈóÆÊ†áÂáÜËæìÂÖ•„ÄÅÊ†áÂáÜËæìÂá∫‰∏éÊ†áÂáÜÈîôËØØËæìÂá∫Ôºå‰ª•ÂèäËøõË°åÁΩëÁªúÈÄö‰ø°„ÄÇ

@item
‰ΩøÁî® @code{close()} Êù•ÂÖ≥Èó≠ÊâìÂºÄÁöÑÊñá‰ª∂„ÄÅÁÆ°ÈÅì‰ª•Âπ∂Âπ∂Á®ãÁöÑÈáçÂÆöÂêë„ÄÇÂØπ‰∫éÂπ∂Á®ãÊù•ËØ¥ÔºåÂèØ‰ª•ÈÄöËøáÂÖ≥Èó≠Êüê‰∏™ÊñπÂêëÁöÑÈÄö‰ø°„ÄÇ

@end itemize

@c EXCLUDE START
@node Output Exercises
@section ÁªÉ‰π†

@enumerate
@item
ÈÄöËøáÂú®ËæìÂá∫‰∏≠‰ΩøÁî® @code{OFS} ÂèòÈáèÔºåÈáçÂÜô‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºö

@example
awk 'BEGIN @{ print "Month Crates"
             print "----- ------" @}
           @{ print $1, "     ", $2 @}' inventory-shipped
@end example

@noindent
ÂÆÉÊù•Ëá™‰∫é @ref{Output Separators}„ÄÇ

@item
‰ΩøÁî® @code{printf} ËØ≠Âè•Êù•ÂØπÈΩêÂ§¥ÈÉ®‰∏éÊï∞ÊçÆË°®Ôºå‰æãÂ≠êÊù•Ëá™Áî± @ref{Print}Ôºå@file{inventory-shipped} Êñá‰ª∂„ÄÇ

@item
Âú®‰∏ãÈù¢ÁöÑ‰ª£Á†Å‰∏≠ÔºåÂ¶ÇÊûú‰Ω†Ê≤°ÊúâÁî®ÂèåÂºïÂè∑Âú®ÈáçÂÆöÂêëËæìÂá∫Êó∂‰ºöÂèëÁîü‰ªÄ‰πàÔºö

@example
BEGIN @{ print "Serious error detected!" > /dev/stderr @}
@end example

@end enumerate
@c EXCLUDE END


@node Expressions
@chapter Ë°®ËææÂºè
@cindex expressions

Ë°®ËææÂºèÊòØ @command{awk} Ê®°Âºè‰∏éÂä®‰ΩúÁöÑÂü∫Êú¨ÊûÑÈÄ†Âùó„ÄÇË°®ËææËØïÊ±ÇÂÄºÂêéÂèØÁî®‰∫éÊâìÂç∞ÔºåÊµãËØïÊàñËÄÖ‰º†ÈÄíÁªôÂáΩÊï∞„ÄÇÂè¶Â§ñÔºåË°®ËææÂºèËøòÂèØ‰ª•ÈÄöËøáËµãÂÄºÊìç‰ΩúÁ¨¶Â∞Ü‰∏Ä‰∏™Êñ∞ÂÄºËµãÁªô‰∏Ä‰∏™ÂèòÈáè„ÄÇ

Ë°®ËææÂºèÊú¨Ë∫´ÂèØ‰ª•Êàê‰∏∫‰∏Ä‰∏™Ê®°ÂºèÔºåÊàñËÄÖÂä®‰ΩúËØ≠Âè•„ÄÇÂ§öÊï∞ÂÖ∂‰ªñÁ±ªÂûãÁöÑËØ≠Âè•ÂåÖÂê´‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Ë°®ËææÂºèÔºåÊù•ÊåáÂÆöË¶ÅÊìç‰ΩúÁöÑÊï∞ÊçÆ„ÄÇÂ¶ÇÂú®ÂÖ∂‰ªñËØ≠Ë®Ä‰∏≠‰∏ÄÊ†∑Ôºå
@command{awk} ‰∏≠ÁöÑË°®ËææÂºèÂèØ‰ª•ÂåÖÂê´ÂèòÈáè„ÄÅÊï∞ÁªÑÂèÇËÄÉ„ÄÅÂ∏∏Èáè‰ª•ÂèäÂáΩÊï∞Ë∞ÉÁî®ÔºåËøòÂèØ‰ª•ÊòØËøô‰∫õÂÜÖÂÆπ‰∏é‰∏çÂêåÁöÑÊìç‰ΩúÁ¨¶ÁöÑÂêÑÁßçÁªÑÂêà„ÄÇ

@menu
* Values::                      Constants, Variables, and Regular Expressions.
* All Operators::               @command{gawk}'s operators.
* Truth Values and Conditions:: Testing for true and false.
* Function Calls::              A function call is an expression.
* Precedence::                  How various operators nest.
* Locales::                     How the locale affects things.
* Expressions Summary::         Expressions summary.
@end menu

@node Values
@section Â∏∏Èáè„ÄÅÂèòÈáè‰∏éËΩ¨Êç¢

Ë°®ËææÂºèÁî±ÂÄº‰∏éÂ§ÑÁêÜËøô‰∫õÂÄºÁöÑÊìç‰ΩúÁªÑÊàê„ÄÇÊú¨@value{SECTION}ÊèèËø∞Âú®Ë°®ËææÂºè‰∏≠‰ΩøÁî®ÁöÑÂü∫Êú¨ÂÖÉÁ¥†ÂØπË±°„ÄÇ

@menu
* Constants::                   String, numeric and regexp constants.
* Using Constant Regexps::      When and how to use a regexp constant.
* Variables::                   Variables give names to values for later use.
* Conversion::                  The conversion of strings to numbers and vice
                                versa.
@end menu

@node Constants
@subsection Â∏∏ÈáèË°®ËææÂºè

@cindex constants, types of

ÊúÄÁÆÄÂçïÁöÑË°®ËææÂºèÁ±ªÂûãÂ∞±ÊòØ@dfn{Â∏∏Èáè}ÔºåÂÆÉ‰ª¨ÊÄªÊòØÊúâ‰∏çÂèòÁöÑÂÄº„ÄÇÊúâ‰∏â‰∏™Â∏∏ÈáèÔºöÊï∞ÂÄºÂ∏∏Èáè„ÄÅÂ≠ó‰∏≤Â∏∏Èáè‰∏éË°®ËææÂºèÂ∏∏Èáè„ÄÇ

Â¶ÇÊûú‰Ω†ÊâÄÈúÄË¶ÅÁöÑÂÄº‰∏çÈúÄË¶ÅÂèòÂåñÔºåÈÇ£‰πà‰Ω†ÂèØ‰ª•Âú®ÈÄÇÂΩìÁöÑ‰∏ä‰∏ãÊñá‰∏≠‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇÊï∞ÂÄºÂ∏∏ÈáèÂèàÊúâ‰∏çÂêåÁöÑÂΩ¢ÂºèÔºå‰ΩÜÊòØÂú®ÂÜÖÈÉ®ÔºåÂÆÉ‰ª¨ÈÉΩ‰ª•Áõ∏ÂêåÁöÑÊñπÂºèËøõË°åÂ≠òÂÇ®„ÄÇ

@menu
* Scalar Constants::            Numeric and string constants.
* Nondecimal-numbers::          What are octal and hex numbers.
* Regexp Constants::            Regular Expression constants.
@end menu

@node Scalar Constants
@subsubsection Êï∞ÂÄº‰∏éÂ≠ó‰∏≤Â∏∏Èáè

@cindex constants, numeric
@cindex numeric constants
@dfn{Êï∞ÂÄºÂ∏∏Èáè}Ë°®Á§∫Êï∞ÂÄº„ÄÇÊ≠§Êï∞ÂÄºÂèØ‰ª•ÊòØÊï¥Êï∞ÔºåÂçÅËøõÂà∂Â∞èÊï∞ÊàñËÄÖÊòØÁßëÂ≠¶ËÆ°Êï∞ÂΩ¢ÂºèÔºàÂπÇÊåáÊï∞ÔºâÁöÑÂΩ¢Âºè„ÄÇ
@footnote{ÊâÄÊúâÁöÑÊï∞ÂÄºÔºåÂåÖÊã¨Êï¥Êï∞ÔºåÂú®ÂÜÖÈÉ®ÈÉΩË°®Á§∫ÊàêÂèåÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÊï∞„ÄÇ
Âú®Â§öÊï∞ÁöÑÁé∞‰ª£Á≥ªÁªü‰∏≠Ôºå‰ΩøÁî®ÁöÑÈÉΩÊòØ IEEE754 ÁöÑÊ†áÂáÜÊ†ºÂºè„ÄÇÊü•Áúã @ref{Arbitrary Precision Arithmetic}ÔºåÊù•ÂèñÂæóÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ}
‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂè™ÊâÄÊúâÂΩ¢ÂºèÁöÑÂ∏∏ÈáèÁöÑÂÄºÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÔºö

@example
105
1.05e+2
1050e-1
@end example

@cindex string constants
@dfn{Â≠ó‰∏≤Â∏∏Èáè}Áî±ÂèåÂºïÂè∑Êã¨Ëµ∑Êù•ÁöÑÂ≠óÁ¨¶Â∫èÂàóÁªÑÊàê„ÄÇÂ¶ÇÔºö

@example
"parrot"
@end example

@noindent
@cindex differences in @command{awk} and @command{gawk}, strings
@cindex strings, length limitations
Ë°®Á§∫Â≠ó‰∏≤ÂÜÖÂÆπ‰∏∫ @samp{parrot} „ÄÇÂú® @command{gawk} ‰∏≠ÁöÑÂ≠ó‰∏≤ÂèØ‰ª•Êúâ‰ªªÊÑèÈïøÂ∫¶Ôºå
ÂèØ‰ª•ÂåÖÊã¨‰ªª‰ΩïÂèØËÉΩÁöÑ 8 ÊØîÁâπÁöÑ ASCII Â≠óÁ¨¶ÔºåÂåÖÊã¨ ASCII ÁöÑ @sc{nul} Â≠óÁ¨¶ÔºàÂ≠óÁ¨¶ÁºñÁ†Å‰∏∫ 0Ôºâ„ÄÇ
ÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞ÊúâÂèØËÉΩÂú®Â§ÑÁêÜ‰∏Ä‰∫õÂ≠óÁ¨¶ÁºñÁ†ÅÊó∂Â≠òÂú®‰∏Ä‰∫õÂõ∞Èöæ„ÄÇ

@node Nondecimal-numbers
@subsubsection ÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂Êï∞ÂÄº
@cindex octal numbers
@cindex hexadecimal numbers
@cindex numbers, octal
@cindex numbers, hexadecimal

Âú® @command{awk} ‰∏≠ÔºåÊâÄÊúâÁöÑÊï∞ÂÄºÈÉΩÊòØÂçÅËøõÂà∂Êï∞Ôºà‰ª• 10 ‰∏∫ËøõÂà∂Ôºâ„ÄÇÂæàÂ§öÁöÑÂÖ∂‰ªñÁºñÁ®ãÂèòÈÄüÂô®ÂÖÅËÆ∏‰Ω†ÊåáÂÆöÂÖ∂‰ªñËøõÂà∂ÁöÑÊï∞Ôºå
‰∏ÄËà¨‰∏∫ÂÖ´ËøõÂà∂Ôºà‰ª• 8 ‰∏∫ËøõÂà∂ÔºâÂíåÂçÅÂÖ≠ËøõÂà∂Ôºà‰ª• 16 ‰∏∫ËøõÂà∂Ôºâ„ÄÇÂú®ÂÖ´ËøõÂà∂‰∏≠ÔºåÊï∞ÂÄº‰∏∫ 0Ôºå1Ôºå2Ôºå4Ôºå5Ôºå6Ôºå7Ôºå10Ôºå11Ôºå12 Á≠âÁ≠â„ÄÇ
Ê≠£Â¶ÇÂçÅËøõÂà∂‰∏≠ÁöÑ @samp{11}ÔºåÊòØ 1 ‰πò 10ÔºåÁÑ∂ÂêéÂä† 1ÔºåÂõ†Ê≠§ÂÖ´ËøõÂà∂‰∏≠ÁöÑ @samp{11}ÔºåË°®Á§∫ÊòØ 1 ‰πò 8ÔºåÁÑ∂ÂêéÂä† 1„ÄÇ
Âú®ÂçÅËøõÂà∂‰∏≠ÂÆÉÁ≠â‰∫é 9„ÄÇÂØπ‰∫éÂçÅÂÖ≠ËøõÂà∂ÔºåÊúâ 16 ‰∏™Êï∞Â≠ó‰Ωç„ÄÇÁî±‰∫éÊàë‰ª¨Êó•Â∏∏ÁöÑÂçÅËøõÂà∂Êï∞ÂÄºÁ≥ªÁªü‰∏≠Âè™Êúâ 10 ‰∏™Êï∞Â≠ó‰ΩçÔºà@samp{0} - @samp{9}ÔºâÔºå
Âõ†Ê≠§Ôºå@samp{a} Âà∞ @samp{f} Ëøô 6 ‰∏™Â≠óÁ¨¶Áî®Êù•Ë°®Á§∫Ââ©‰∏ãÁöÑÈÉ®ÂàÜ„ÄÇ
ÔºàÂ§ßÂ∞èÂÜôÈÄöÂ∏∏ÊòØÊó†ÂÖ≥ÁöÑÔºåÂçÅÂÖ≠ËøõÂà∂ÁöÑ @samp{a} ‰∏é @samp{A} ÊúâÁõ∏ÂêåÁöÑÂÄº„ÄÇÔºâÂõ†Ê≠§ÔºåÂçÅÂÖ≠ËøõÂà∂‰∏≠ÁöÑ @samp{11} Ë°®Á§∫ÁöÑÊòØ 1 ‰πò 16ÔºåÁÑ∂ÂêéÂä† 1ÔºåÂú®ËøõÂà∂‰∏≠ÂàôÊòØ 17„ÄÇ

ÈÄöËøá @samp{11} Ëøô‰∏™ÊôÆÈÄöÂ≠ó‰∏≤Ôºå‰Ω†Êó†Ê≥ïÁü•ÈÅìÂÆÉÊòØ‰ªÄ‰πàËøõÂà∂ÁöÑ„ÄÇ
Âõ†Ê≠§ÔºåÂú® CÔºåC++ ‰ª•ÂèäÂÖ∂‰ªñÁöÑ‰ªé C Ê¥æÁîüÂá∫Êù•ÁöÑËØ≠Ë®Ä‰∏≠„ÄÇÊúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÁ¨¶Âè∑Áî®Êù•ÊåáÊòéËøõÂà∂„ÄÇÂÖ´ËøõÂà∂‰ª• @samp{0} ÂºÄÂ§¥ÔºåËÄåÂçÅÂÖ≠ËøõÂà∂Âàô‰ª• @samp{0x} ÊàñËÄÖ @samp{0X} ÂºÄÂ§¥„ÄÇ

@table @code
@item 11
ÂçÅËøõÂà∂ÂÄºÁöÑ 11

@item 011
ÂÖ´ËøõÂà∂ÁöÑ 11ÔºåÂçÅËøõÂà∂ÁöÑ 9

@item 0x11
ÂçÅÂÖ≠ËøõÂà∂ÁöÑ 11ÔºåÂçÅËøõÂà∂ÁöÑ 17
@end table

Ëøô‰∏™‰æãÂ≠ê‰ΩìÁé∞‰∫ÜÂÖ∂‰∏≠ÁöÑ‰∏çÂêåÔºö

@example
$ @kbd{gawk 'BEGIN @{ printf "%d, %d, %d\n", 011, 11, 0x11 @}'}
@print{} 9, 11, 17
@end example

ÂΩìÂú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÔºåÊâÄÂ§ÑÁêÜÁöÑÊï∞ÊçÆ‰∏çËÉΩÊñπ‰æøÂú∞ËøõË°åË°®Á§∫ÊàêÂ≠ó‰∏≤ÊàñËÄÖÊ≠£ÂàôË°®ËææÂºèÊó∂Ôºå‰ΩøÁî®Ëøô‰∫õÁöÑÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂Â∏∏Êï∞ÂàôÈùûÂ∏∏ÊúâÁî®Ôºå‰æãÂ¶ÇÂêÑÁßç‰∏çÂêåÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇ

@cindex @command{gawk}, octal numbers and
@cindex @command{gawk}, hexadecimal numbers and
@command{gawk} ÂèØ‰ª•ËÆ©‰Ω†Âú®Á®ãÂ∫èÊñá‰ª∂‰∏≠‰ΩøÁî®ÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂Êï∞ÂÄº„ÄÇ‰ΩÜÊòØÔºåËøôÊ†∑ÁöÑÊï∞ÂÄºÂú®ËæìÂÖ•Êó∂‰ºöÂå∫Âà´ÂØπÂæÖÔºå
ÈªòËÆ§Ëøô‰πàÂÅö‰ºöÂØºËá¥ÊóßÁöÑÁ®ãÂ∫èÊó†Ê≥ïÊ≠£Â∏∏ÊâßË°å„ÄÇÔºàÂ¶ÇÊûú‰Ω†Á°ÆÂÆûË¶ÅËøô‰πàÂÅöÔºå‰ΩøÁî® @option{--non-decimal-data} Ëøô‰∏™ÂëΩ‰ª§Ë°åÈÄâÈ°πÔºå
Êü•Áúã @ref{Nondecimal Data}ÔºâÂ¶ÇÊûú‰Ω†ÊúâÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂ÁöÑÊï∞ÊçÆÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî® @code{strtonum()}
ÔºàÊü•Áúã @ref{String Functions}ÔºâÂáΩÊï∞Êù•Â∞ÜËøô‰∫õÊï∞ÊçÆËΩ¨Êç¢‰∏∫Êï∞ÂÄº„ÄÇ
Â§ßÂ§öÊï∞Êó∂ÂÄôÔºå‰Ω†Âú®‰ΩøÁî®ÂÜÖÂª∫ÁöÑ‰ΩçÊìç‰ΩúÂáΩÊï∞Êó∂Ôºå‰Ω†ÈÉΩ‰ºö‰ΩøÁî®ÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂Êï∞ÊçÆ„ÄÇ
ÂèØ‰ª•Êü•Áúã @ref{Bitwise Functions}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

‰∏çÂÉèÊó©ÊúüÁöÑ C ÂÆûÁé∞Ôºå@samp{8} ‰∏é @samp{9} ‰∏çÊòØÊúâÊïàÁöÑÂÖ´ËøõÂà∂Â∏∏Êï∞„ÄÇ‰æãÂ¶ÇÔºå@command{gawk} ‰ºöÂ∞Ü @samp{018} ÂΩìÊàêÊòØÂçÅËøõÂà∂ÁöÑ 18Ôºö

@example
$ @kbd{gawk 'BEGIN @{ print "021 is", 021 ; print 018 @}'}
@print{} 021 is 17
@print{} 18
@end example

@cindex compatibility mode (@command{gawk}), octal numbers
@cindex compatibility mode (@command{gawk}), hexadecimal numbers
ÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂Ê∫ê‰ª£Á†ÅÂ∏∏ÈáèÊòØ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇÂ¶ÇÊûú @command{gawk} Â§Ñ‰∫éÂÖºÂÆπÊ®°ÂºèÔºàÊü•Áúã @ref{Options}ÔºâÔºå
ÂàôÂÆÉ‰ª¨ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇ

@sidebar Â∏∏ÈáèÁöÑËøõÂà∂‰∏ç‰ºöÂΩ±ÂìçÂÆÉÁöÑÂÄº

Âè™Ë¶ÅÊï∞ÂÄºÂ∏∏ÈáèË¢´ËΩ¨Êç¢Êàê‰∫ÜÊï∞ÂÄºÁöÑÂÜÖÈÉ®Ë°®Á§∫Ôºå@command{gawk} Â∞±‰∏çÂÜçËÆ∞‰ΩèÂ∏∏ÈáèÁöÑÂéüÂßãÊ†ºÂºèÔºå@command{gawk} ÊÄªÊòØ‰ºö‰ΩøÁî®ÂÜÖÈÉ®ÁöÑÂÄº„ÄÇËøôÂú®Â∞ÜÊï∞ÂÄºËΩ¨Êç¢ÊàêÂ≠ó‰∏≤Êó∂Êúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk 'BEGIN @{ printf "0x11 is <%s>\n", 0x11 @}'}
@print{} 0x11 is <17>
@end example
@end sidebar

@node Regexp Constants
@subsubsection Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè

@cindex regexp constants
@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@dfn{Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè}ÊòØ‰∏Ä‰∏™ÂåÖÂê´Âú®‰∏ÄÂØπÊñúÊù†‰∏≠ÁöÑÊ≠£ÂàôË°®ËææÂºèÊèèËø∞„ÄÇ
‰æãÂ¶Ç @code{@w{/^beginning and end$/}}„ÄÇ
@command{awk} Á®ãÂ∫è‰∏≠‰ΩøÁî®ÁöÑÂ§ßÂ§öÊï∞Ê≠£ÂàôË°®ËææÂºèÈÉΩÊòØÂ∏∏ÈáèÔºå‰ΩÜÊòØ @samp{~} ‰∏é @samp{!~} ÂåπÈÖçÊìç‰ΩúÁ¨¶‰πüÂèØ‰ª•ÂåπÈÖçËÆ°ÁÆóÂûãÔºåÂç≥Âä®ÊÄÅÂûãÊ≠£ÂàôË°®Â§ßÂºèÔºàÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÆÉ‰ª¨Â∞±ÊòØÂåÖÂê´Ê≠£ÂàôË°®ËææÂºèÁöÑÊôÆÈÄöÁöÑÂ≠ó‰∏≤ÊàñËÄÖÂèòÈáèÔºå‰ΩÜÊòØÊòØÊõ¥Â§çÊùÇÁöÑË°®ËææÂºèËÄåÂ∑≤Ôºâ„ÄÇ

@node Using Constant Regexps
@subsection ‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂ∏∏Èáè

@cindex dark corner, regexp constants
ÂΩìÂú® @samp{~} ÊàñËÄÖ @samp{!~} Êìç‰ΩúÁöÑÂè≥ÊâãËæπÊó∂ÔºåÊ≠£ÂàôË°®ËææÂºè‰ªÖÊùÉË°®Á§∫Ë¶ÅÂåπÈÖçÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ
‰ΩÜÊòØÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà‰æãÂ¶Ç @code{/foo/}ÔºâÂèØ‰ª•ÂΩìÊàêÁÆÄÂçïÁöÑË°®ËææÂºèÊù•‰ΩøÁî®„ÄÇ
ÂΩìÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÂçïÁã¨Âá∫Áé∞Êó∂Ôºå‰∏éÂÆÉÂú®Ê®°Âºè‰∏≠Âá∫Áé∞Êó∂ÊúâÁõ∏ÂêåÁöÑÂê´‰πâÔºàÂ¶Ç @samp{($0 ~ /foo/)}Ôºâ
@value{DARKCORNER}
Êü•Áúã @ref{Expression Patterns}„ÄÇËøôË°®Á§∫‰∏ãÈù¢ÁöÑ‰∏§‰∏™‰ª£Á†ÅÁâáÊÆµÔºö

@example
if ($0 ~ /barfly/ || $0 ~ /camelot/)
    print "found"
@end example

@noindent
‰∏éÔºö

@example
if (/barfly/ || /camelot/)
    print "found"
@end example

@noindent
ÊòØÂÆåÂÖ®Á≠âÂêåÁöÑ„ÄÇËøô‰∏™ËßÑÂàôÁöÑ‰∏Ä‰∏™ÈùûÂ∏∏Â•áÊÄ™ÁöÑÁªìÊûúÂ∞±ÊòØ‰∏ãÈù¢ÁöÑÂ∏ÉÊûóË°®ËææÂºèÊòØÊúâÊïàÁöÑÔºå‰ΩÜÊòØÂπ∂‰∏çÊòØ‰ΩúËÄÖÊâÄËÆ§‰∏∫ÁöÑÈÇ£Ê†∑ÊâßË°åÔºö

@example
# Note that /foo/ is on the left of the ~
if (/foo/ ~ $1) print "found foo"
@end example

@c @cindex automatic warnings
@c @cindex warnings, automatic
@cindex @command{gawk}, regexp constants and
@cindex regexp constants, in @command{gawk}
@noindent
Ëøô‰∏™‰ª£Á†Å‚ÄúÂæàÊòéÊòæ‚ÄùÂú∞ÊòØË¶ÅÊµãËØï @code{$1} ÊòØ‰∏çÊòØÂåπÈÖçÊ≠£ÂàôË°®ËææÂºè @code{/foo/}„ÄÇ
‰ΩÜÊòØÂÆûÈôÖ‰∏äÔºåË°®ËææÂºè @samp{/foo/ ~ $1} Ë°®Á§∫ÁöÑÊòØ @samp{($0 ~ /foo/) ~ $1}„ÄÇ
Êç¢Âè•ËØùËØ¥ÔºåÈ¶ñÂÖàÂåπÈÖçËæìÂÖ•ËÆ∞ÂΩï‰∏éÊ≠£ÂàôË°®ËææÂºè @code{/foo/}ÔºåÊâÄÂæóÂà∞ÁöÑÁªìÊûúË¶Å‰πàÊòØ 0ÔºåË¶Å‰πàÊòØ 1„ÄÇ
ËøôÂ∞±Ë¶ÅÁúãÂåπÈÖçÁöÑÊòØÊàêÂäüËøòÊòØÂ§±Ë¥•„ÄÇÂåπÈÖçÁöÑÁªìÊûúÁÑ∂ÂêéÂÜç‰∏éËÆ∞ÂΩïÁöÑÁ¨¨‰∏Ä‰∏™ÂüüËøõË°åÂåπÈÖç„ÄÇ
Áî±‰∫é‰Ω†‰∏çÂèØËÉΩÊòØÊÉ≥ÂÅöËøôÊ†∑ÁöÑÊµãËØïÔºå@command{gawk} ‰ºöÈíàÂØπÁ®ãÂ∫è‰∏≠ËøôÊ†∑ÁöÑÁªìÊûÑÂèëÂá∫‰∏Ä‰∏™ÂëäË≠¶„ÄÇËøô‰∏™ËßÑÂàôÁöÑÂè¶‰∏Ä‰∏™ÁªìÊûúÂ∞±ÊòØÂ¶Ç‰∏ãÁöÑÂåπÈÖçËØ≠Âè•Ôºö

@example
matches = /foo/
@end example

@noindent
ÊòØË¶Å‰πàÂ∞Ü 0ÔºåË¶Å‰πàÊòØÂ∞Ü 1 ËµãÂÄºÁªôÂèòÈáè @code{matches}ÔºåÂÜÖÂÆπ‰æùËµñ‰∫éÂΩìÂâçÁöÑËæìÂÖ•ËÆ∞ÂΩï„ÄÇ

@cindex differences in @command{awk} and @command{gawk}, regexp constants
@cindex dark corner, regexp constants, as arguments to user-defined functions
@cindexgawkfunc{gensub}
@cindexawkfunc{sub}
@cindexawkfunc{gsub}
Ê≠£ÂàôË°®ËææÂºè‰πüÂèØ‰ª•Áî®‰∫é @code{gensub()}Ôºå@code{sub()} ‰∏é @code{gsub()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºå
ÊàñËÄÖÊòØ @code{match()} ÂáΩÊï∞ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ôºå‰ª•Âèä @code{split()} ‰∏é @code{patsplit()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞
ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ@command{awk} ÁöÑÁé∞‰ª£ÁâàÊú¨ÔºåÂåÖÊã¨ @command{gawk}Ôºå
ÂÖÅËÆ∏ @code{split()} ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºå‰ΩÜÊòØÊóß‰∏ÄÁÇπÁöÑÁâàÊú¨‰∏çÂÖÅËÆ∏„ÄÇ
@value{DARKCORNER}
Áî±‰∫é‰∏Ä‰∫õÂÜÖÁΩÆÁöÑÂáΩÊï∞Êé•ÂèóÊ≠£ÂàôË°®ËææÂºè‰ºöÂÆÉÁöÑÂèÇÊï∞ÔºåÂõ†Ê≠§Â∞ÜÂÖ∂‰Ωú‰∏∫Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÔºàÊü•Áúã @ref{User-defined}ÔºâÁöÑÂèÇÊï∞Êó∂Ôºå‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè‰ºöÂ∏¶Êù•Âõ∞ÊÉë„ÄÇÂ¶ÇÔºö

@example
function mysub(pat, repl, str, global)
@{
    if (global)
        gsub(pat, repl, str)
    else
        sub(pat, repl, str)
    return str
@}

@{
    @dots{}
    text = "hi! hi yourself!"
    mysub(/hi/, "howdy", text, 1)
    @dots{}
@}
@end example

@c @cindex automatic warnings
@c @cindex warnings, automatic
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁ®ãÂ∫èÂëòÊÉ≥Â∞ÜÊ≠£ÂàôË°®ËææÂºèÂ∏∏Èáè‰º†ÈÄíÁªôÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ @code{mysub()}Ôºå
ËØ•ÂáΩÊï∞ÂèàÂ∞ÜÂÖ∂‰º†Áªô @code{sub()} ÊàñËÄÖ @code{gsub()}„ÄÇ
‰ΩÜÊòØÁúüÊ≠£ÂèëÁîüÁöÑ‰∫ãÊÉÖÊòØÔºå@code{pat} ÂèÇÊï∞‰ºöË¢´ËµãÂÄº‰∏∫ 1 ÊàñËÄÖ 0ÔºåËøôÂ∞±Ë¶ÅÁúã @code{$0} ÊòØÂê¶ÂåπÈÖç @code{/hi/}„ÄÇ
@command{gawk} ‰ºöÈíàÂØπÊ≠£ÂàôË°®ËææÂºèÂ∏∏Êó¶‰º†ÈÄíÁªôÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ËøôÁßçÊÉÖÂÜµÂèëÂá∫‰∏Ä‰∏™Ë≠¶ÂëäÔºåÂõ†Ê≠§Â∞Ü‰∏Ä‰∏™ÁúüÂÄºÈÄöËøáËøôÁßçÊñπÂºèÊù•‰º†ÈÄíÊúâÂèØËÉΩ‰∏çÊòØÊúâÊÑèÁöÑ„ÄÇ

@node Variables
@subsection ÂèòÈáè

@cindex variables, user-defined
@cindex user-defined, variables
@dfn{ÂèòÈáè}ÊòØÂú®‰Ω†Á®ãÂ∫èÁöÑÊüê‰∏™ÁÇπÂ≠òÂÇ®ÂÄºÔºå‰ª•Â§áÁ®ãÂ∫èÁöÑÂÖ∂‰ªñÈÉ®ÂàÜÂêéÁª≠‰ΩøÁî®ÁöÑÊñπÂºè„ÄÇÂÆÉ‰ª¨ÂèØ‰ª•Âú®Á®ãÂ∫èÊñáÊú¨ÁöÑÊï¥‰∏™ÈÉ®ÂàÜË¢´Êìç‰ΩúÔºå
‰πüÂèØ‰ª•Âú® @command{awk} ÁöÑÂëΩ‰ª§Ë°å‰∏≠Ë¢´ËµãÂÄº„ÄÇ

@menu
* Using Variables::             Using variables in your programs.
* Assignment Options::          Setting variables on the command line and a
                                summary of command-line syntax. This is an
                                advanced method of input.
@end menu

@node Using Variables
@subsubsection Âú®Á®ãÂ∫è‰∏≠‰ΩøÁî®ÂèòÈáè


ÂèòÈáèÂèØËÆ©‰Ω†ÁªôÂÄºËµã‰∫à‰∏Ä‰∏™ÂêçÂ≠óÔºåÁÑ∂ÂêéÈÄöËøáËøô‰∏™ÂêçÂ≠óÊù•‰ΩøÁî®ÂÆÉ„ÄÇÂèòÈáèÂú®Â§ö‰∏™‰æãÂ≠ê‰∏≠ÈÉΩ‰ΩøÁî®Âà∞‰∫Ü„ÄÇÂèòÈáèÁöÑÂêçÂ≠óÂøÖÈ°ªÊòØ‰∏Ä‰∏™Â≠óÊØç„ÄÅÊï∞Â≠óÊàñËÄÖ‰∏ãÂàíÁ∫øÁöÑÂ∫èÂàóÔºåÂπ∂‰∏î‰∏çÂèØ‰ª•‰ª•Êï∞Â≠óÂºÄÂ§¥„ÄÇ
Âú®ËøôÈáåÔºå@dfn{Â≠óÊØç}ÊòØ‰ªª‰ΩïÁöÑ 52 ‰∏™Â§ßÂ∞è‰∏éÂ∞èÂ≠óÁöÑËã±ÊñáÂ≠óÊØç„ÄÇÂÖ∂‰ªñÁöÑÂú®ÈùûËã±ËØ≠ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÂÆö‰πâÁöÑÂ≠óÁ¨¶‰∏çÂèØÁî®‰∫éÂèòÈáèÂè•„ÄÇÂ§ßÂ∞èÂÜôÂú®ÂèòÈáèÂêç‰∏≠ÊòØÂå∫ÂàÜÁöÑÔºå@code{a} ‰∏é @code{A} ÊòØ‰∏çÂêåÁöÑÂèòÈáè„ÄÇ

ÂèòÈáèÊú¨Ë∫´Â∞±ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑË°®ËææÂºèÔºö
Âõ†‰∏∫ÂÆÉ‰ª£Ë°®‰∫ÜÂèòÈáèÁöÑÂΩìÂâçÂÄº„ÄÇÂèòÈáèÈÄöËøá@dfn{ËµãÂÄºÊìç‰ΩúÁ¨¶}„ÄÅ@dfn{ÈÄíÂ¢ûÊìç‰ΩúÁ¨¶}‰∏é@dfn{ÈÄíÂáèÊìç‰ΩúÁ¨¶}ÂèØ‰ª•Ëµã‰∫à‰∏Ä‰∏™Êñ∞ÂÄº
ÔºàÊü•Áúã @ref{Assignment Ops}Ôºâ„ÄÇ
Âè¶Â§ñÔºå@code{sub()} ‰∏é @code{gsub()} ÂáΩÊï∞ÂèØ‰ª•ÊîπÂèòÂèòÈáèÁöÑÂÄºÔºå
ËÄå @code{match()}Ôºå@code{split()} ‰∏é @code{patsplit()} ÂáΩÊï∞ÂèØ‰ª•ÊîπÂèòÊï∞ÁªÑÂèÇÊï∞ÁöÑÂÄºÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ

@cindex variables, built-in
@cindex variables, initializing
Â∞ëÊï∞Âá†‰∏™ÂèòÈáèÊúâ‰∏Ä‰∫õÂÜÖÁΩÆÁöÑÂê´‰πâÔºåÂ¶Ç @code{FS}ÔºàÂüüÂàÜÈöîÁ¨¶Ôºâ‰ª•Âèä @code{NF}ÔºàÂΩìÂâçËÆ∞ÂΩïÁöÑÂüüÊï∞ÁõÆÔºâ„ÄÇ
Êü•Áúã @ref{Built-in Variables}ÔºåÂèØËé∑ÂèñÈ¢ÑÂÆö‰πâÁöÑÂèòÈáèÂàóË°®„ÄÇËøô‰∫õÈ¢ÑÂÆö‰πâÁöÑÂèòÈáèÂèØ‰ª•ÂÉèÂÖ∂‰ªñÂèòÈáè‰∏ÄÊ†∑Ë¢´‰ΩøÁî®‰∏éËµãÂÄºÔºå‰ΩÜÊòØÂÆÉ‰ª¨ÁöÑÂÄº‰πüÂèØ‰ª•Ë¢´ @command{awk} Ëá™Âä®‰ΩøÁî®‰∏éÊõ¥Êîπ„ÄÇÊâÄÊúâÁöÑÈ¢ÑÂÆö‰πâÁöÑÂèòÈáèÁöÑÂêçÂ≠óÈÉΩÊòØÂ§ßÂÜôÁöÑ„ÄÇ

@command{awk} ÁöÑÂèòÈáèÂèØ‰ª•Ë¢´ËµãÂÄº‰∏∫Êï∞ÂÄº‰∏éÂ≠ó‰∏≤„ÄÇÊüê‰∏™ÂèòÈáèÊâÄÊåÅÊúâÂÄºÁöÑÁ±ªÂûãÂú®Á®ãÂ∫èÁöÑÁîüÂëΩÊúü‰∏≠ÊòØÂèØ‰ª•ÊîπÂèòÁöÑ„ÄÇ
ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊ≤°ÊúâÂàùÂßãÂåñÁöÑÂèòÈáèÁöÑÂÄºÊòØ‰∏Ä‰∏™Á©∫‰∏≤ÔºåÂ¶ÇÊûúËΩ¨Êç¢‰∏∫Êï∞ÂÄºÂàô‰∏∫ 0„ÄÇ
Ê≤°ÊúâÂøÖË¶ÅÊòæÂºèÂú∞Âú® @command{awk} ‰∏≠ÂàùÂßãÂåñÂèòÈáèÔºåËøô‰∫õÊòØÂú® C ËØ≠Ë®Ä‰∏≠‰ª•ÂèäÂÖ∂‰ªñ‰º†ÁªüËØ≠Ë®Ä‰∏≠ÊâçÈúÄË¶ÅÂÅöÁöÑ„ÄÇ

@node Assignment Options
@subsubsection Âú®ÂëΩ‰ª§Ë°å‰∏≠ËøõË°åÂèòÈáèËµãÂÄº
@cindex variables, assigning on command line
@cindex command line, variables@comma{} assigning on

@command{awk} ÂèòÈáèÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏äÈÄöËøá@dfn{ËµãÂÄºÊìç‰ΩúÁ¨¶}Êù•ËÆæÁΩÆÔºàÊü•Áúã @ref{Other Arguments}Ôºâ„ÄÇËøôÊ†∑ÁöÑËµãÂÄºÊúâÂ¶Ç‰∏ãÂΩ¢ÂºèÔºö

@example
@var{variable}=@var{text}
@end example

@cindex @option{-v} option
@noindent
ÈÄöËøáËøôÊ†∑ÁöÑÊñπÂºèÔºåÂèòÈáèË¶Å‰πàÂú® @command{awk} Á®ãÂ∫èËøêË°åÂºÄÂßãÊàñËÄÖÂú®ËæìÂÖ•Êñá‰ª∂‰πãÈó¥ËøõË°åËÆæÁΩÆ„ÄÇÂΩì @option{-v} ÈÄâÈ°πÂÖà‰∫éËµãÂÄºÔºåÂ¶Ç‰∏ãÈù¢ÁöÑÂΩ¢ÂºèÔºö

@example
-v @var{variable}=@var{text}
@end example

@noindent
ÂàôÂèòÈáèÂ∞ÜÂú®Á®ãÂ∫èÁöÑÂºÄÂßãÔºåÁîöËá≥Âú® @code{BEGIN} ËßÑÂàôÊâßË°å‰πãÈó¥Â∞±ËÆæÁΩÆ‰∫Ü„ÄÇ
@option{-v} ÈÄâÈ°π‰ª•Âèä‰ªñÁöÑËµãÂÄºÂøÖÈ°ªÂú®ÊâÄÊúâÁöÑÊñá‰ª∂ÂêçÂèÇÊï∞‰ª•ÂèäÁ®ãÂ∫è‰ª£Á†Å‰πãÂâç„ÄÇ
ÔºàÊü•Áúã @ref{Options}ÔºåÊù•Ëé∑ÂèñÂÖ≥‰∫é @option{-v} ÈÄâÈ°πÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇÔºâ
Âê¶ÂàôÔºåÂèòÈáèËµãÂÄºÁöÑÊâßË°åÂÜ≥ÂÆö‰∫éÂÆÉÂú®ËæìÂÖ•Êñá‰ª∂‰∏≠ÁöÑ‰ΩçÁΩÆ‚Äî‚ÄîË¶ÅÂÖàÂ§ÑÁêÜÂÖà‰∫éËØ•ÈÄâÈ°π‰πãÂâçÁöÑÊñá‰ª∂„ÄÇÂ¶ÇÔºö

@example
awk '@{ print $n @}' n=4 inventory-shipped n=2 mail-list
@end example

@noindent
‰ºöÊâìÂç∞ÊâÄÊúâËæìÂÖ•ËÆ∞ÂΩïÁöÑÂüüÊï∞ÂÄº @code{n}„ÄÇÂú®Á¨¨‰∏Ä‰∏™Êñá‰ª∂ËØªÂèñ‰πãÂâçÔºåÂëΩ‰ª§Ë°åÂèÇÊï∞ËÆæÁΩÆÂèòÈáè @code{n} ÁöÑÂÄº‰∏∫ 4„ÄÇ
Ëøô‰ºöÊâìÂç∞Êù•Ëá™ @file{inventory-shipped} Êñá‰ª∂Ë°å‰∏≠ÁöÑÁ¨¨ 4 ‰∏™Âüü„ÄÇÂΩìÂ§ÑÁêÜÂÆåÁ¨¨‰∏Ä‰∏™Êñá‰ª∂ÂêéÔºå‰ΩÜÊòØÂú®ÂºÄÂßãÁ¨¨ 2 ‰∏™Êñá‰ª∂‰πãÂâçÔºå
@code{n} Ë¢´ËÆæÁΩÆÊàê 2ÔºåÂõ†Ê≠§‰ºöÊâìÂç∞Êù•Ëá™ @file{mail-list} Êñá‰ª∂ÁöÑË°åÁöÑÁ¨¨ 2 ‰∏™ÂüüÔºö

@example
$ @kbd{awk '@{ print $n @}' n=4 inventory-shipped n=2 mail-list}
@print{} 15
@print{} 24
@dots{}
@print{} 555-5553
@print{} 555-3412
@dots{}
@end example

@cindex dark corner, command-line arguments
ÂëΩ‰ª§Ë°åÂèÇÊï∞ËøòÂèØ‰ª•Âú® @code{ARGV} Êï∞ÁªÑ‰∏≠Ëé∑ÂèñÔºåÂπ∂Âà©Áî® @command{awk} Á®ãÂ∫èËøõË°åÊòæÁ§∫Ê£ÄÊü•ÔºàÊü•Áúã @ref{ARGC and ARGV}Ôºâ„ÄÇ
@command{awk} ‰ºöÂ§ÑÁêÜÂëΩ‰ª§Ë°åËµãÂÄºÂèÇÊï∞ÁöÑÂÄº‰∏≠ËΩ¨‰πâÂ∫èÂàóÔºàÊü•Áúã @ref{Escape Sequences}Ôºâ„ÄÇ
@value{DARKCORNER}

@node Conversion
@subsection Âú®Â≠ó‰∏≤‰∏éÊï∞ÂÄº‰πãÈó¥ËøõË°åËΩ¨Êç¢

‚ÄúÊï∞ÂÄºÂà∞Â≠ó‰∏≤‚Äù‰ª•Âèä‚ÄúÂ≠ó‰∏≤Âà∞Êï∞ÂÄº‚ÄùÁöÑËΩ¨Êç¢‰∏ÄËà¨ÈÉΩÊòØÁõ¥Êé•ÁöÑ„ÄÇ‰ΩÜÊòØË¶Å‰∫ÜËß£Âá†‰∏™ÁªÜÂæÆÁöÑÂú∞ÊñπÔºå
ÈÄöËøáËøô@value{SECTION}Êù•ËØ¥Êòé @command{awk} ‰∏≠Ëøô‰∫õÈáçË¶ÅÁöÑÁªÜËäÇ„ÄÇ

@menu
* Strings And Numbers::         How @command{awk} Converts Between Strings And
                                Numbers.
* Locale influences conversions:: How the locale may affect conversions.
@end menu

@node Strings And Numbers
@subsubsection @command{awk} Â¶Ç‰ΩïËΩ¨Êç¢Â≠ó‰∏≤‰∏éÊï∞ÂÄº

@cindex converting, strings to numbers
@cindex strings, converting
@cindex numbers, converting
@cindex converting, numbers to strings
Â¶ÇÊûú @command{awk} Á®ãÂ∫è‰∏ä‰∏ãÊñáË¶ÅÊ±ÇÔºåÂ≠ó‰∏≤‰ºöËΩ¨Êç¢ÊàêÊï∞ÂÄºÔºåÊï∞ÂÄº‰πüÂèØ‰ª•ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤„ÄÇ‰æãÂ¶ÇÔºå
Âú®Ë°®ËææÂºè @samp{foo + bar} ‰∏≠Â¶ÇÊûú @code{foo} ÊàñËÄÖ @code{bar} Â¶ÇÊûúÊòØ‰∏Ä‰∏™‰∏≤ÔºåÂÆÉÂ∞±‰ºöËΩ¨Âú®ÊâßË°åÂä†Êìç‰Ωú‰πãÂâçËΩ¨Êç¢ÊàêÊï∞ÂÄº„ÄÇ
Â¶ÇÊûúÊï∞ÂÄºÂá∫Áé∞Âú®Â≠ó‰∏≤ÁöÑËøûÊé•Êìç‰ΩúÈáåÔºåÂÆÉ‰ª¨Â∞±‰ºöËΩ¨Êç¢ÊàêÂ≠ó‰∏≤„ÄÇËÄÉËôëÂ¶Ç‰∏ãÁöÑ‰ª£Á†ÅÔºö

@example
two = 2; three = 3
print (two three) + 4
@end example

@noindent
Ëøô‰∏™‰ª£Á†Å‰ºöÊâìÂç∞ÔºàÊï∞ÂÄºÔºâÂÄº 27„ÄÇ@code{two} ‰∏é @code{three} ÁöÑÊï∞ÂÄºÂÄºË¢´ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤Âπ∂ËøûÊé•Âú®‰∏ÄËµ∑„ÄÇ
ÁªìÊûúÂ≠ó‰∏≤Ë¢´ËΩ¨Êç¢ÊàêÊï∞ÂÄº 23ÔºåÁî®‰∫é‰∏é 4 ËøõË°åÁõ∏Âä†„ÄÇ

@cindex null strings, converting numbers to strings
@cindex type conversion
Áî±‰∫éÊüêÁßçÂéüÂõ†ÔºåÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂº∫Âà∂Êï∞ÂÄºË¢´ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤ÔºåÂàôÂ∞ÜËøô‰∏™Êï∞ÂÄº‰∏éÁ©∫‰∏≤Ôºà@code{""}ÔºâËøûÊé•„ÄÇ
Âº∫Âà∂‰∏Ä‰∏™Â≠ó‰∏≤Ë¶ÅËΩ¨Êç¢ÊàêÊï∞ÂÄºÔºåÂàôÊääËøô‰∏™Â≠ó‰∏≤Âä†‰∏ä 0 Âç≥ÂèØ„ÄÇ
Â≠ó‰∏≤ËΩ¨Êç¢ÊàêÊï∞ÂÄºÊòØÈÄöËøáÂ∞ÜÂ≠ó‰∏≤ÁöÑÊï∞Â≠óÂΩ¢ÂºèÁöÑÂâçÁºÄ‰∏≤Ëß£ÈáäÂΩìÊàêÊï∞ÂÄºÔºö@code{"2.5"} ‰ºöË¢´ËΩ¨Êç¢Êàê 2.5Ôºå@code{"1e3"} ‰ºöË¢´ËΩ¨Êç¢Êàê 1000Ôºå
@code{"25fix"} ‰ºöË¢´ËΩ¨Êç¢ 25„ÄÇÊó†Ê≥ïËΩ¨Êç¢ÊàêÊï∞ÂÄºÁöÑÂ≠ó‰∏≤Âàô‰ºöËΩ¨Êç¢Êàê 0„ÄÇ

@cindex @code{CONVFMT} variable
Â∞ÜÊï∞ÂÄºËΩ¨Êç¢ÊàêÂ≠ó‰∏≤‰∏äÁöÑÂáÜÁ°ÆÊñπÂºèÊòØÁî± @command{awk} ÁöÑÈ¢ÑÂÆö‰πâÂèòÈáè @code{CONVFMT} ËøõË°åÊéßÂà∂ÁöÑ
ÔºàÊü•Áúã @ref{Built-in Variables}Ôºâ„ÄÇÊï∞ÂÄºËΩ¨Êç¢ÊàêÂ≠ó‰∏≤ÊòØ‰ΩøÁî® @code{sprintf()} ÂáΩÊï∞Âπ∂Â∞Ü @code{CONVFMT} ÂΩìÂÅöÊ®°ÂºèÊåáÂÆöÁ¨¶
ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ

@code{CONVFMT} ÁöÑÂÄºÈªòËÆ§ÊòØ @code{"%.6g"}ÔºåË°®Á§∫ÁöÑÊòØÂàõÂª∫ÁöÑÂÄºÊúÄÂ§öÊúâ 6 ‰∏™ÊúâÊïàÊï∞Â≠ó‰Ωç„ÄÇ
ÂØπ‰∫é‰∏Ä‰∫õÂ∫îÁî®Êù•ËØ¥Ôºå‰Ω†ÂèØ‰ª•Â∞ÜÂÖ∂Êõ¥ÊîπÂæóÊõ¥Âä†Á≤æÁ°Æ„ÄÇÂú®Â§ßÂ§öÊï∞Áé∞Âú®Êú∫Âô®‰∏äÔºå17 ‰ΩçÁöÑÊï∞ÂÄºÈÄöÂ∏∏Ë∂≥Â§üÂ∞ÜÊçïËé∑ÊµÆÁÇπÊï∞ÁöÑÂÄº‰∫Ü„ÄÇ 
@footnote{Âú®ÁóÖÁêÜÂ≠¶ÊÉÖÂÜµ‰∏ãÈúÄË¶ÅÂ§öËææ 752 ‰ΩçÊï∞ÔºàÔºÅÔºâÔºå‰ΩÜÊòØÊàë‰ª¨ËÆ§‰∏∫‰Ω†‰∏çÈúÄË¶Å‰∏∫Ê≠§ÊãÖÂøÉÔºà‰Ω†Âπ≥Êó∂Áî®‰∏çÂà∞Ëøô‰πàÈïøÁöÑÊúâÊïà‰ΩçÔºâ„ÄÇ}

@cindex dark corner, @code{CONVFMT} variable
Â¶ÇÊûú‰Ω†Â∞Ü @code{CONVFMT} ÁöÑÂÄºËÆæÁΩÆÊàê‰∏Ä‰∏™Êó†Ê≥ïÂëäÁü• @code{sprintf()} Â¶Ç‰ΩïÊù•‰ª•‰∏ÄÁßçÊúâÁî®ÁöÑÊñπÂºèÊ†ºÂºèÂåñÊµÆÁÇπÊï∞ÁöÑÂ≠ó‰∏≤Ôºå
Âàô‰ºö‰∫ßÁîüÂ•áÊÄ™ÁöÑÁªìÊûú„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÂøòËÆ∞‰∫ÜÊ†ºÂºèÊåáÂÆöÁ¨¶‰∏≠ÁöÑ @samp{%}Ôºå@command{awk} ‰ºöÂ∞ÜÊâÄÊúâÊï∞ÂÄºËΩ¨Êç¢Êàê‰∏ÄÊ†∑ÁöÑÂ≠ó‰∏≤Â∏∏Èáè„ÄÇ

‰Ωú‰∏∫‰∏Ä‰∏™ÁâπÊÆä‰æãÂ≠êÔºåÂ¶ÇÊûúÊï∞ÂÄºÊòØ‰∏Ä‰∏™Êï¥Êï∞ÔºåËΩ¨Êç¢ÊàêÂ≠ó‰∏≤ÁöÑÁªìÊûú@emph{ÊÄªÊòØ}‰∏Ä‰∏™Êï¥Êï∞ÔºåÊó†ËÆ∫ @code{CONVFMT} ÁöÑÂÄºÊòØ‰ªÄ‰πà„ÄÇÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁâáÊÆµÔºö

@example
CONVFMT = "%2.2f"
a = 12
b = a ""
@end example

@noindent
@code{b} ÁöÑÂÄº‰∏∫ @code{"12"}ÔºåËÄå‰∏çÊòØ @code{"12.00"}„ÄÇ
@value{DARKCORNER}

@sidebar POSIX Ê†áÂáÜÂâç @command{awk} Áî® @code{OFMT} ËøõË°åÂ≠óÁ¨¶‰∏≤ËΩ¨Êç¢
@cindex POSIX @command{awk}, @code{OFMT} variable and
@cindex @code{OFMT} variable
@cindex portability, new @command{awk} vs.@: old @command{awk}
@cindex @command{awk}, new vs.@: old, @code{OFMT} variable
Âú® POSIX Ê†áÂáÜ‰πãÂâçÔºå@command{awk} Áî® @code{OFMT} ÁöÑÂÄºÊù•ÊääÊï∞Â≠óËΩ¨Êç¢ÊàêÂ≠óÁ¨¶‰∏≤„ÄÇ
ÂΩìÁî® @code{print} ÊâìÂç∞Êï∞Â≠óÁöÑÊó∂ÂÄôÔºå@code{OFMT} ÊåáÂÆö‰∫ÜËæìÂá∫Ê†ºÂºè„ÄÇ
@code{CONVFMT} ÊòØ‰∏∫‰∫ÜÊääÊâìÂç∞Êìç‰ΩúÂíåËΩ¨Êç¢Êìç‰ΩúÁöÑÂå∫ÂàÜÂºÄËÄåÂºïÂÖ•ÁöÑ„ÄÇ
@code{CONVFMT} Âíå @code{OFMT} ÈÉΩÊúâÁõ∏ÂêåÁöÑÈªòËÆ§ÂÄºÔºö@code{"%.6g"}„ÄÇ
Âú®Â§ßÈÉ®ÂàÜÁöÑ case ‰∏≠ÔºåÊóßÁöÑ @command{awk} Á®ãÂ∫è‰∏çÊîπÂèò‰ªñ‰ª¨ÁöÑË°å‰∏∫„ÄÇ
Êü•Áúã @ref{Print} ÂÖ≥‰∫éÊõ¥Â§ö @code{print} ÁöÑÊèèËø∞„ÄÇ
@end sidebar

@node Locale influences conversions
@subsubsection ËØ≠Ë®ÄËÆæÁΩÆ‰ºöÂΩ±ÂìçËΩ¨Êç¢

ÂΩìË¶ÅÂú®Â≠ó‰∏≤‰∏éÊï∞ÂÄº‰πãÈó¥ËøõË°åËΩ¨Êç¢Êó∂Ôºå‰ªÄ‰πàÂú∞Êñπ‰ºöÂØπÊ≠§‰∫ßÁîüÂΩ±ÂìçÔºüÊú¨Âú∞Â≠óÁ¨¶ËÆæÁΩÆ‰∏éËØ≠Ë®ÄÔºåÂç≥ @dfn{locale}Ôºå‰ºöÂΩ±ÂìçÊï∞ÂÄºÁöÑÊ†ºÂºè„ÄÇ
ÁâπÂà´ÊòØÔºåÂØπ‰∫é @command{awk} Á®ãÂ∫èÔºåÂÆÉËøò‰ºöÂΩ±ÂìçÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÂ≠óÁ¨¶‰ª•ÂèäÁôæÂàÜ‰ΩçÂ≠óÁ¨¶„ÄÇ
@code{"C"} ËØ≠Ë®ÄËÆæÁΩÆÊàñËÄÖÂ§ßÂ§öÊï∞ÁöÑËã±ËØ≠ËØ≠Ë®ÄÔºå‰ΩøÁî®ÁÇπÁ¨¶Âè∑Ôºà@samp{.}ÔºâÂΩìÂÅö‰∏∫ÂçÅËøõÂà∂Êï∞Â∞èÊï∞ÁÇπÔºåÂπ∂‰∏îÊ≤°ÊúâÁôæÂàÜ‰Ωç„ÄÇ
‰ΩÜÊòØÔºåËÆ∏Â§öÔºàÂ¶ÇÊûú‰∏çÊòØÂ§ßÂ§öÊï∞ÔºâÁöÑÊ¨ßÊ¥≤‰ª•ÂèäÈùûËã±ËØ≠ËØ≠Ë®ÄÂå∫Âüü‰ΩøÁî®ÈÄóÂè∑Ôºà@samp{,}Ôºâ‰Ωú‰∏∫ÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÂ≠óÁ¨¶„ÄÇ
Ê¨ßÊ¥≤ËØ≠Ë®ÄÈÄöÂ∏∏Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄô‰ΩøÁî®Á©∫Ê†ºÊàñËÄÖÁÇπÊù•‰Ωú‰∏∫ÁôæÂàÜ‰Ωç„ÄÇ

@cindex dark corner, locale's decimal point character
POSIX Ê†áÂáÜËßÑÂÆöÔºåÂΩìËØªÂèñ @command{awk} Á®ãÂ∫èÊ∫ê‰ª£Á†ÅÔºå‰ª•ÂèäÂú®ËØªÂèñÂëΩ‰ª§Ë°åËµãÂÄºÂèòÈáèÊó∂ÔºåÊÄªÊòØ‰ΩøÁî®ÁÇπÂè∑‰Ωú‰∏∫ÂçÅËøõÂà∂Â∞èÊï∞ÁÇπ
ÔºàÊü•Áúã @ref{Other Arguments}Ôºâ„ÄÇ‰ΩÜÊòØÔºåÂΩìËß£ÈáäËæìÂÖ•Êï∞ÊçÆÊó∂„ÄÅËøõË°å @code{print} ÊàñËÄÖ @code{printf} ËæìÂá∫Ôºå‰ª•ÂèäËøõË°åÊï∞ÂÄº‰∏éÂ≠ó‰∏≤ËΩ¨Êç¢Êó∂ÔºåÂàô‰ΩøÁî®Êú¨Âú∞ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπ„ÄÇ
@value{DARKCORNER} 
Âú®ÊâÄÊúâÁöÑÊÉÖÂÜµ‰∏ãÔºåÊ∫ê‰ª£Á†Å‰∏≠ÁöÑÊï∞ÂÄºÔºå‰ª•ÂèäËæìÂÖ•Êï∞ÊçÆ‰∏çÂèØ‰ª•ÊúâÁôæÂàÜ‰ΩçÂàÜÈöîÁ¨¶„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂú® GNU/Linux Á≥ªÁªüËß£Èáä‰∫ÜËøô‰∫õÂ∑ÆÂºÇÔºö

@example
$ @kbd{export POSIXLY_CORRECT=1}                        @ii{Force POSIX behavior}
$ @kbd{gawk 'BEGIN @{ printf "%g\n", 3.1415927 @}'}
@print{} 3.14159
$ @kbd{LC_ALL=en_DK.utf-8 gawk 'BEGIN @{ printf "%g\n", 3.1415927 @}'}
@print{} 3,14159
$ @kbd{echo 4,321 | gawk '@{ print $1 + 1 @}'}
@print{} 5
$ @kbd{echo 4,321 | LC_ALL=en_DK.utf-8 gawk '@{ print $1 + 1 @}'}
@print{} 5,321
@end example

@noindent
@code{en_DK.utf-8} ÊòØ‰∏πÈ∫¶Ëã±ËØ≠ËØ≠Ë®ÄÔºåÂú®Ëøô‰∏™ËÆæÁΩÆ‰∏≠ÔºåÈÄóÂè∑ÊòØ‰Ωú‰∏∫Â∞èÊï∞ÁÇπ‰ΩøÁî®ÁöÑ„ÄÇ
Âú®Ê≠£Â∏∏ÁöÑ @code{"C"} ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠Ôºå@command{gawk} Â∞Ü @samp{4,321} ÂΩìÊàêÊòØ 4Ôºå
ËÄåÂú®‰∏πÈ∫¶ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÔºåÂàôË¢´ÂÆåÂÖ®ÂΩìÊàê‰∫Ü‰∏Ä‰∏™Êï∞ÂÄºÔºåÂÖ∂ÂåÖÂê´ÂàÜÊï∞‰∏∫ 4.321„ÄÇ

‰∏Ä‰∫õÊó©ÊúüÁöÑ @command{gawk} ÁâàÊú¨ÂÆåÂÖ®ÊåâÁÖßÊ†áÂáÜËøõË°åÁºñËØë„ÄÇ‰ΩÜÊòØÂæàÂ§öÁöÑÈùûËã±ËØ≠ËØ≠Ë®ÄÁöÑÁî®Êà∑Êä±ÊÄ®ËøôÊ†∑ÁöÑË°å‰∏∫Ôºå
Âõ†‰∏∫‰ªñ‰ª¨Áî®ÁÇπË°®Á§∫ÂçÅËøõÂà∂ÈáåÁöÑÂ∞èÊï∞ÁÇπÔºåÊâÄ‰ª•ÔºåÈªòËÆ§ÁöÑË°å‰∏∫ÂèàÊÅ¢Â§çÂà∞‰ΩøÁî®ÁÇπÊù•ÂÅö‰∏∫Â∞èÊï∞ÁÇπÁ¨¶Âè∑„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® @option{--use-lc-numeric}
ÔºàÊü•Áúã @ref{Options}ÔºâÈÄâÈ°πÊù•Âº∫Âà∂ @command{gawk} ‰ΩøÁî®Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπ„ÄÇ
Ôºà@command{gawk} Âú® POSIX Ê®°Âºè‰∏≠‰πü‰ΩøÁî®Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÔºå‰∏çÁÆ°ÊòØÈÄöËøá @option{--posix} ÈÄâÈ°πÊàñËÄÖ
ÊòØ @env{POSIXLY_CORRECT} ÁéØÂ¢ÉÂèòÈáèÊù•ÊåáÂÆö„ÄÇÔºâ

@ref{table-locale-affects} ËØ¥Êòé‰∫Ü‰ªÄ‰πàÊó∂ÂÄô‰ºö‰ΩøÁî®Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÁ¨¶Âè∑Ôºå
‰ªÄ‰πàÊó∂ÂÄô‰ΩøÁî®ÁÇπ‰Ωú‰∏∫ÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÁ¨¶Âè∑„ÄÇËøòÊúâ‰∏Ä‰∫õÁâπÊÄßËøòÊ≤°ÊúâÊ∂âÂèäÂà∞„ÄÇ

@float Table,table-locale-affects
@caption{Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπ‰∏éÂúÜÁÇπ}
@multitable @columnfractions .15 .20 .45
@headitem Feature @tab Default @tab @option{--posix} or @option{--use-lc-numeric}
@item @code{%'g} @tab Use locale @tab Use locale
@item @code{%g} @tab Use period @tab Use locale
@item Input @tab Use period @tab Use locale
@item @code{strtonum()} @tab Use period @tab Use locale
@end multitable
@end float

ÊúÄÂêéÔºåÁé∞Âú®ÁöÑÊ≠£ÂºèÊ†áÂáÜ‰ª•Âèä IEEE Ê†áÂáÜÁöÑÊµÆÁÇπÊï∞Ë°®Á§∫Ê≥ïÂØπ‰∫é @command{gawk} ËΩ¨Êç¢‰∏Ä‰∫õÁâπÂÆöÁöÑÂ≠ó‰∏≤‰∏∫Êï∞ÂÄºÁöÑÊñπÂºèÔºå
ÈÉΩÊúâ‰∏Ä‰∫õ‰∏çÂ∏∏ËßÅ‰ΩÜÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÂΩ±Âìç„ÄÇÁõ∏ÂÖ≥ÁöÑÁªÜËäÇÂëàÁé∞Âú® @ref{POSIX Floating Point Problems}„ÄÇ

@node All Operators
@section Êìç‰ΩúÁ¨¶ÔºöÂØπÂÄºËøõË°åÂ§ÑÁêÜ

Ëøô‰∏Ä@value{SECTION}‰ªãÁªçÂà©Áî®Â∏∏Èáè‰∏éÂèòÈáèÂÄºÁöÑ@dfn{Êìç‰ΩúÁ¨¶}„ÄÇ

@menu
* Arithmetic Ops::              Arithmetic operations (@samp{+}, @samp{-},
                                etc.)
* Concatenation::               Concatenating strings.
* Assignment Ops::              Changing the value of a variable or a field.
* Increment Ops::               Incrementing the numeric value of a variable.
@end menu

@node Arithmetic Ops
@subsection ÁÆóÊúØÊìç‰ΩúÁ¨¶
@cindex arithmetic operators
@cindex operators, arithmetic
@c @cindex addition
@c @cindex subtraction
@c @cindex multiplication
@c @cindex division
@c @cindex remainder
@c @cindex quotient
@c @cindex exponentiation

@command{awk} ËØ≠Ë®Ä‰ΩøÁî®Â∏∏Áî®ÁöÑÁÆóÊúØÊìç‰ΩúÁ¨¶Êù•ÂØπË°®ËææÂºèÊ±ÇÂÄº„ÄÇ
ÊâÄÊúâÁöÑËøô‰∫õÁÆóÊúØË°®ËææÂºèÈÉΩÂÖ∑ÊúâÊ≠£Â∏∏ÁöÑ‰ºòÂÖàÁ∫ßÔºåÂπ∂Êåâ‰Ω†ÊâÄÊúüÊúõÁöÑÊñπÂºèÂ∑•‰Ωú„ÄÇ

‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî®‰∏Ä‰∏™Êñá‰ª∂Âêç‰∏∫ @file{grades} ÁöÑÊñá‰ª∂ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜÂ≠¶ÁîüÂêçÂ≠ó‰∏éÊØè‰∏™Â≠¶ÁîüÁöÑ‰∏â‰∏™ÊµãËØïÊàêÁª©ÔºàÁè≠Á∫ßÁ°ÆÂÆûÂ∞èÔºâÔºö

@example
Pat   100 97 58
Sandy  84 72 93
Chris  72 92 89
@end example

@noindent
‰∏ãÈù¢ÁöÑÁ®ãÂ∫èËØªÂèñÊñá‰ª∂ @file{grades} Âπ∂ÊâìÂç∞Âπ≥ÂùáÊàêÁª©Ôºö

@example
$ @kbd{awk '@{ sum = $2 + $3 + $4 ; avg = sum / 3}
>        @kbd{print $1, avg @}' grades}
@print{} Pat 85
@print{} Sandy 83
@print{} Chris 84.3333
@end example

‰∏ãÈù¢ÁöÑÂàóË°®ÂàóÂá∫‰∫Ü @command{awk} ‰∏≠ÁöÑÁÆóÊúØÊìç‰ΩúÁ¨¶ÔºåÂπ∂Êåâ‰ºòÂÖàÁ∫ßÈôçÂ∫èÊéíÂ∫èÔºö

@table @code
@cindex common extensions, @code{**} operator
@cindex extensions, common@comma{} @code{**} operator
@cindex POSIX @command{awk}, arithmetic operators and
@item @var{x} ^ @var{y}
@itemx @var{x} ** @var{y}
ÂπÇ‰πòÔºåË°®Á§∫ @var{x} ÁöÑ @var{y} Ê¨°ÂπÇ„ÄÇ
@samp{2 ^ 3} ÁöÑÂÄº‰∏∫ 8ÔºåÂ≠óÁ¨¶Â∫èÂàó @samp{**} ‰∏é @samp{^} Á≠âÂêå„ÄÇ@value{COMMONEXT}

@item - @var{x}
ÂèñË¥ü„ÄÇ

@item + @var{x}
‰∏ÄÂÖÉÂä†ÔºåË°®ËææÂºè‰ºöË¢´ËΩ¨Êç¢ÊàêÊï∞ÂÄº„ÄÇ

@item @var{x} * @var{y}
‰πò„ÄÇ

@cindex troubleshooting, division
@cindex division
@item @var{x} / @var{y}
Èô§„ÄÇÁî±‰∫éÂú® @command{awk} ‰∏≠ÁöÑÊâÄÊúâÊï∞ÂÄºÈÉΩÊòØÊµÆÁÇπÊï∞ÔºåÁªìÊûú@emph{‰∏ç‰ºö}ËàçÂÖ•ËæìÂá∫‰∏∫Êï¥Êï∞‚Äî‚Äî@samp{3 / 4} ÁöÑÂÄº‰∏∫ 0.75„ÄÇ
ÔºàËøôÂæàÂÆπÊòìÂá∫ÈîôÔºåÂ∞§ÂÖ∂ÂØπ C Á®ãÂ∫èÂëòÔºå‰ºöÂøòËÆ∞ @command{awk} ‰∏≠ÁöÑ@emph{ÊâÄÊúâ}Êï∞ÂÄºÈÉΩÊòØÊµÆÁÇπÊï∞ÔºåÁúãËµ∑Êù•ÊòØÊï¥Êï∞ÁöÑÈô§Ôºå‰∫ßÁîü‰∏Ä‰∏™ÂÆûÊï∞ÔºåËÄå‰∏çÊòØÊï¥Êï∞„ÄÇÔºâ

@item @var{x} % @var{y}
Ê±Ç‰ΩôÔºåËøõ‰∏ÄÊ≠•ÁöÑËÆ®ËÆ∫‰ºöÂú®‰∏ãÈù¢„ÄÇ

@item @var{x} + @var{y}
Âä†„ÄÇ

@item @var{x} - @var{y}
Âáè„ÄÇ
@end table

‰∏ÄÂÖÉÂä†‰ª•ÂáèÈÉΩÊúâÁõ∏ÂêåÁöÑ‰ºòÂÖàÁ∫ßÔºå‰πòÊ≥ïÊìç‰ΩúÁ¨¶ÈÉΩÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÔºåÂä†‰∏éÂáèÂÖ∑ÊúâÁõ∏ÂêåÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ

@cindex differences in @command{awk} and @command{gawk}, trunc-mod operation
@cindex trunc-mod operation
ÂΩìËÆ°ÁÆó @samp{@var{x} % @var{y}} ÁöÑ‰ΩôÊï∞Êó∂ÔºåÂïÜ‰ºöÂêëÈõ∂ËàçÂÖ•ËàçÂá∫ÔºåÂπ∂Ë¢´ @var{y} ‰πò„ÄÇ
Ëøô‰∏™ÁªìÊûúÂÜçË¢´‰ªé @var{x} ÂáèÂéª„ÄÇÊú¨Êìç‰ΩúÊúâÊó∂ÂÄô‰ºöÁß∞‰∏∫ ‚Äútrunc-mode‚Äù Êìç‰ΩúÔºå‰∏ãÈù¢ÁöÑÂÖ≥Á≥ªÊÄªÊòØ‰ºöÊàêÁ´ãÔºö

@example
b * int(a / b) + (a % b) == a
@end example

ËøôÁßçÂÆö‰πâ‰∏ãÔºåÂ¶ÇÊûúÂú® @samp{@var{x} % @var{y}} Âú® @var{x} ‰∏∫Ë¥üÂÄºÊó∂ÔºåÂÖ∂‰πü‰∏∫Ë¥üÂÄºÔºå
ËøôÂèØËÉΩ‰∏çÊòØÈ¢ÑÊúüÁöÑÁªìÊûúÔºö

@example
-17 % 8 = -1
@end example

Âú®ÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰∏≠Ôºå‰ΩôÊï∞ÁöÑÁ¨¶Âè∑ÂèØËÉΩË∑üÊú∫Âô®ÊúâÂÖ≥„ÄÇ
@c FIXME !!! what does posix say?

@cindex portability, @code{**} operator and
@cindex @code{*} (asterisk), @code{**} operator
@cindex asterisk (@code{*}), @code{**} operator
@quotation ÊèêÁ§∫
POSIX Ê†áÂáÜ‰∏≠Âè™ÊåáÂÆö‰∫Ü @samp{^} ‰Ωú‰∏∫ÂπÇ‰πò„ÄÇ‰∏∫‰∫ÜÊúÄÂ§ßÁöÑÂèØÁßªÊ§çÊÄßÔºå‰∏çË¶Å‰ΩøÁî® @samp{**} Êìç‰ΩúÁ¨¶„ÄÇ
@end quotation

@node Concatenation
@subsection Â≠ó‰∏≤ËøûÊé•
@cindex Kernighan, Brian
@quotation
@i{
Âú®ÈÇ£‰∏™Êó∂ÂÄôÁúãËµ∑Êù•Á°ÆÂÆûÊòØ‰∏™Â•Ω‰∏ªÊÑè„ÄÇ
}
@author Brian Kernighan
@end quotation

@cindex string operators
@cindex operators, string
@cindex concatenating
Âè™Êúâ‰∏Ä‰∏™Â≠ó‰∏≤Êìç‰ΩúÁ¨¶ÔºöËøûÊé•„ÄÇÂÆûÈôÖ‰∏äÂπ∂Ê≤°ÊúâÁâπÂÆöÁöÑÊìç‰ΩúÁ¨¶Êù•Ë°®Á§∫ÂÆÉ„ÄÇÁõ∏ÂèçÔºåËøûÊé•Êìç‰ΩúÊòØÈÄöËøáÂ∞ÜË°®ËææÂºèÂÜôÊàê‰∏§‰∏§Áõ∏ÈÇª„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{awk '@{ print "Field number one: " $1 @}' mail-list}
@print{} Field number one: Amelia
@print{} Field number one: Anthony
@dots{}
@end example

Âú®Â≠ó‰∏≤Â∏∏Èáè @samp{:} ÂêéÈù¢Ê≤°ÊúâÁ©∫Ê†ºÔºåÊï¥Ë°åËæìÂá∫Âú®‰∏ÄËµ∑„ÄÇÊØîÂ¶ÇÔºö

@example
$ @kbd{awk '@{ print "Field number one:" $1 @}' mail-list}
@print{} Field number one:Amelia
@print{} Field number one:Anthony
@dots{}
@end example

@cindex troubleshooting, string concatenation
Áî±‰∫éÂ≠ó‰∏≤ËøûÊé•Ê≤°ÊúâÊòæÂºèÁöÑÊìç‰ΩúÁ¨¶ÔºåÂõ†Ê≠§ÈÄöÂ∏∏ÈúÄË¶Å‰øùËØÅËøôÂèëÁîüÊàêÂêàÈÄÇÁöÑÊó∂Èó¥ÔºåËøôÊòØÈÄöËøáÂ∞ÜË¶ÅËøûÊé•ÁöÑÈ°πÁî®Êã¨Âè∑ÂåÖËµ∑Êù•„ÄÇ
‰æãÂ¶ÇÔºå‰Ω†ÂèØËÉΩÊÉ≥Ë¶Å‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊù•ËøûÊé•Ëµ∑ @code{file} ‰∏é @code{name}Ôºö

@example
file = "file"
name = "name"
print "something meaningful" > file name
@end example

@cindex Brian Kernighan's @command{awk}
@cindex @command{mawk} utility
@noindent
ËøôÂú® Unix @command{awk} ‰∏≠‰ºö‰∫ßÁîü‰∏Ä‰∏™ËØ≠Ê≥ïÈîôËØØ„ÄÇ
@footnote{ËøôÂú® BWK @command{awk} ‰∏≠‰ºöÂèëÁîüÔºå@command{gawk} ‰ª•Âèä @command{mawk} ÈÉΩ‚ÄúÊâßË°åÊ≠£Á°Æ‚ÄùÔºå‰ΩÜÊòØÂà´‰æùËµñ‰∫éËøô‰∏™ÁªìÊûú„ÄÇ}
Â∫îËØ•Â¶Ç‰∏ã‰ΩøÁî®Ôºö

@example
print "something meaningful" > (file name)
@end example

@cindex order of evaluation, concatenation
@cindex evaluation order, concatenation
@cindex side effects
Âú®Â≠ó‰∏≤ËøûÊé•‰∏§ËæπÔºåÊã¨Âè∑Âú®Èô§‰∫Ü @samp{=} Âè≥ËæπÁöÑÊâÄÊúâÊÉÖÂÜµ‰∏ãÈÉΩÂ∫îËØ•‰ΩøÁî®„ÄÇÂú®ÁâπÂà´Ê≥®ÊÑèÂú®Â≠ó‰∏≤ËøûÊé•‰∏≠ÊâÄ‰ΩøÁî®ÁöÑË°®ËææÂºè„ÄÇÁâπÂà´ÊòØÔºåË°®ËææÂºèÁöÑÊ±ÇÂÄºÈ°∫Â∫èÁî®Êù•ËøõË°åÂ≠ó‰∏≤ËøûÊé•ÔºåÂú® @command{awk} ËØ≠Ë®Ä‰∏≠ÊòØÊ≤°ÊúâÂÆö‰πâÁöÑ„ÄÇÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö

@example
BEGIN @{
    a = "don't"
    print (a " " (a = "panic"))
@}
@end example

@noindent
ÊòØÂê¶ÊòØÁ¨¨‰∫å‰∏™ËµãÂÄºÊìç‰ΩúÂèëÁîüÂú® @code{a} ÁöÑÂÄºËøîÂõû‰πãÂâçËøòÊòØ‰πãÂêéËøôÊòØ‰∏çÁ°ÆÂÆöÁöÑ„ÄÇ
ÁªìÊûúÂèØ‰ª•ÊòØ @samp{don't panic}ÔºåÊàñËÄÖÊòØ @samp{panic panic}„ÄÇ
@c see test/nasty.awk for a worse example

Âú®‰∏éÂÖ∂‰ªñÁöÑÊìç‰ΩúÁ¨¶Ê∑∑ÂêàÊó∂ÔºåËøûÊé•Êìç‰ΩúÁöÑ‰ºòÂÖàÁ∫ßÈÄöÂ∏∏ÊòØÂèçÁõ¥ËßâÁöÑ„ÄÇÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö

@ignore
> To: bug-gnu-utils@@gnu.org
> CC: arnold@@gnu.org
> Subject: gawk 3.0.4 bug with {print -12 " " -24}
> From: Russell Schulz <Russell_Schulz@locutus.ofB.ORG>
> Date: Tue, 8 Feb 2000 19:56:08 -0700
>
> gawk 3.0.4 on NT gives me:
>
> prompt> cat bad.awk
> BEGIN { print -12 " " -24; }
>
> prompt> gawk -f bad.awk
> -12-24
>
> when I would expect
>
> -12 -24
>
> I have not investigated the source, or other implementations.  The
> bug is there on my NT and DOS versions 2.15.6 .
@end ignore

@example
$ @kbd{awk 'BEGIN @{ print -12 " " -24 @}'}
@print{} -12-24
@end example

Âæà‚ÄúÊòéÊòæ‚ÄùÁöÑÊòØË¶ÅËøûÊé• @minus{}12Ôºå‰∏Ä‰∏™Á©∫Ê†º‰∏é @minus{}24„ÄÇ
‰ΩÜÊòØÁ©∫Ê†ºÊ∂àÂ§±Âà∞Âì™ÈáåÂéª‰∫ÜÂë¢ÔºüÁ≠îÊ°àÊòØÂú®Êìç‰ΩúÁ¨¶ÁöÑ‰ºòÂÖàÁªÑÂêà‰∏é @command{awk} ÁöÑËá™Âä®ËΩ¨Êç¢ËßÑÂàôÈáå„ÄÇ‰∏∫‰∫ÜÂæóÂà∞ÊâÄÊÉ≥Ë¶ÅÁöÑÁªìÊûúÔºåÂÉè‰∏ãÈù¢ËøôÊ†∑ÂÜôÔºö

@example
$ @kbd{awk 'BEGIN @{ print -12 " " (-24) @}'}
@print{} -12 -24
@end example

ËøôÂº∫Âà∂ @command{awk} Â∞Ü @samp{-24} ‰∏≠ÁöÑ @samp{-} ÂΩìÊàêÊòØ‰∏ÄÂÖÉÊìç‰ΩúÁ¨¶„ÄÇÂê¶ÂàôÔºåÂÆÉ‰ºöËøô‰πàÊù•ÂàÜÊûêÔºö

@display
    @minus{}12 (@code{"@ "} @minus{} 24)
@result{} @minus{}12 (0 @minus{} 24)
@result{} @minus{}12 (@minus{}24)
@result{} @minus{}12@minus{}24
@end display

Â¶ÇÊó©ÂÖàÊâÄÊèêÔºåÂΩìËøûÊé•Êìç‰Ωú‰∏éÂÖ∂‰ªñÊìç‰ΩúÁ¨¶Ê∑∑ÂêàÊó∂Ôºå@emph{Áî®Êã¨Âè∑Êã¨Ëµ∑Êù•}„ÄÇÂê¶ÂàôÔºå‰Ω†Êó†Ê≥ïÁ°ÆËÆ§‰Ω†‰ºöÂæóÂà∞‰ªÄ‰πàÁªìÊûú„ÄÇ

@node Assignment Ops
@subsection ËµãÂÄºË°®ËææÂºè
@cindex assignment operators
@cindex operators, assignment
@cindex expressions, assignment
@cindex @code{=} (equals sign), @code{=} operator
@cindex equals sign (@code{=}), @code{=} operator
@dfn{ËµãÂÄºË°®ËææÂºè}ÊòØÂ∞Ü‰∏Ä‰∏™ÔºàÈÄöÂ∏∏‰∏ç‰∏ÄÊ†∑ÁöÑÔºâÂÄºÂ≠òÂÖ•Êüê‰∏™ÂèòÈáèÁöÑË°®ËææÂºè„ÄÇ
‰æãÂ¶ÇÔºåÊàë‰ª¨Â∞ÜÂèòÈáè @code{z} ÁöÑÂÄºËµã‰∏∫ 1Ôºö

@example
z = 1
@end example

ÂΩìËøô‰∏™Ë°®ËææÂºèÊâßË°åÂêéÔºåÂèòÈáè @code{z} ÁöÑÂÄºÂ∞±‰∏∫ 1„ÄÇ‰∏çÁÆ° @code{z} ÁöÑÊóßÂÄºÊòØ‰ªÄ‰πàÔºåÈÉΩÂ∞Ü‰∏¢ÂºÉ„ÄÇ

ËµãÂÄº‰πüÂèØ‰ª•Â≠òÂÇ®Â≠ó‰∏≤ÂÄº„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢Â∞ÜÂÄº @code{"this food is good"} Â≠òÂÇ®Âà∞ÂèòÈáè @code{message} ‰∏≠Ôºö

@example
thing = "food"
predicate = "good"
message = "this " thing " is " predicate
@end example

@noindent
@cindex side effects, assignment expressions
Ëøô‰∏™‰æãÂ≠ê‰πüÂëàÁé∞‰∫ÜÂ≠ó‰∏≤ËøûÊé•Êìç‰Ωú„ÄÇ
@samp{=} Á¨¶Âè∑Áß∞‰∏∫@dfn{ËµãÂÄºÊìç‰ΩúÁ¨¶}„ÄÇËøô‰πüÊòØÊúÄÁÆÄÂçïÁöÑÊìç‰ΩúÁ¨¶ÔºåÂõ†‰∏∫ÂÖ∂Âè≥ËæπÁöÑÊìç‰ΩúÊï∞ÁöÑÂÄº‰ºöÂéüÂ∞Å‰∏çÂä®Âú∞Â≠ò‰∏ãÊù•„ÄÇÂ§ßÂ§öÊï∞Êìç‰ΩúÁ¨¶ÔºàÂä†ÔºåËøûÊé•Á≠âÔºâÈô§ÈùûË¶ÅËÆ°ÁÆóÂÄºÔºåÂê¶ÂàôÈÉΩÊ≤°ÊúâÂÆûÈôÖÊïàÊûú„ÄÇÂ¶ÇÊûúÂÄºÊ≤°ÊúâË¢´‰ΩøÁî®Ôºå‰πüÊ≤°ÊúâÁêÜÁî±‰ΩøÁî®Ëøô‰∏™Êìç‰ΩúÁ¨¶„ÄÇËµãÂÄºÊìç‰ΩúÁ¨¶Âàô‰∏çÂêåÔºöÂõ†‰∏∫ÂÆÉÁ°ÆÂÆû‰∫ßÁîü‰∏Ä‰∏™ÂÄºÔºå‰ΩÜÊòØÂ∞±ÁÆó‰Ω†ÂøΩÁï•ÂÆÉÔºåËµãÂÄº‰ªçÁÑ∂‰ΩøËá™Â∑±Ëµ∞ÂÆåÂèòÈáèÁöÑÂèòÂåñËøáÁ®ã„ÄÇÊàë‰ª¨Áß∞Ëøô‰∏™ÊïàÂ∫î‰∏∫@dfn{ÂâØ‰ΩúÁî®}„ÄÇ

@cindex lvalues/rvalues
@cindex rvalues/lvalues
@cindex assignment operators, lvalues/rvalues
@cindex operators, assignment
ËµãÂÄºÂ∑¶ËæπÁöÑÊìç‰ΩúÊï∞‰∏çÈúÄË¶ÅÊòØ‰∏Ä‰∏™ÂèòÈáèÔºàÊü•Áúã @ref{Variables}ÔºâÔºåÂÖ∂‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂüüÔºàÊü•Áúã @ref{Changing Fields}Ôºâ
ÊàñËÄÖ‰∏Ä‰∏™Êï∞ÁªÑÂÖÉÁ¥†ÔºàÊü•Áúã @ref{Arrays}Ôºâ„ÄÇÊâÄÊúâËøô‰∫õÈÉΩÁß∞‰∏∫ÂÄºÔºåËøôÊÑèÂë≥ÁùÄÂÆÉ‰ª¨ÂèØ‰ª•Âá∫Áé∞Âú®ËµãÂÄºÊìç‰ΩúÁ¨¶Â∑¶Ëæπ„ÄÇ
Âè≥ËæπÁöÑÊìç‰ΩúÊï∞ÂèØ‰ª•ÊòØË°®ËææÂºèÔºåÂÖ∂‰ºö‰∫ßÁîü‰∏Ä‰∏™Êñ∞ÁöÑÂÄºÊù•ËµãÂÄºÂ≠òÂÇ®Âú®ÊåáÂÆöÁöÑÂèòÈáè„ÄÅÂüüÊàñËÄÖÊï∞ÁªÑÂÖÉÁ¥†„ÄÇÔºàËøôÊ†∑ÁöÑÂÄºÁß∞‰∏∫@dfn{Âè≥ÂÄºÔºàrvaluesÔºâ}„ÄÇÔºâ

@cindex variables, types of
Ë¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂèòÈáè@emph{Ê≤°Êúâ}Âõ∫ÂÆöÁöÑÁ±ªÂûã„ÄÇÂèòÈáèÁöÑÁ±ªÂûãÂ∞±ÊòØÂÖ∂ÊúÄÂêéË¢´ËµãÂÄºÁöÑÊï∞ÊçÆÁöÑÁ±ªÂûã„ÄÇ
Âú®‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÁâáÊÆµ‰∏≠ÔºåÂèòÈáè @code{foo} ÂÖàÂÖ∑ÊúâÊï∞ÂÄºÁ±ªÂûãÔºåÁÑ∂ÂêéÂÖ∑ÊúâÂ≠ó‰∏≤Á±ªÂûãÔºö

@example
foo = 1
print foo
foo = "bar"
print foo
@end example

@noindent
ÂΩìÁ¨¨‰∫å‰∏™ËµãÂÄºÁªô‰∫Ü @code{foo} ‰∏Ä‰∏™Â≠ó‰∏≤ÂÄºÔºåËÄåËøô‰πãÂâçÂÖ∂ÂÖ∑ÊúâÊï∞ÂÄºÁ±ªÂûãÂ∞±‰∏¢ÂºÉ‰∫Ü„ÄÇ

Â≠ó‰∏≤ÂÄº‰∏≠ÔºåÂ¶ÇÊûú‰∏çÊòØ‰∏Ä‰∏™‰ª•‰∏Ä‰∏™Êï∞ÂÄºÂºÄÂ§¥ÁöÑËØùÔºåÂÖ∂ÂØπÂ∫îÁöÑÊï∞ÂÄºÂÄº‰∏∫ 0„ÄÇÂú®ÊâßË°å‰∫Ü‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂêéÔºå@code{foo} ÁöÑÂÄº‰∏∫ 5Ôºö

@example
foo = "a string"
foo = foo + 5
@end example

@quotation ÊèêÁ§∫
Â∞ÜÂèòÈáè‰Ωú‰∏∫‰∏Ä‰∏™Êï∞ÂÄºÔºåÁÑ∂Âêé‰Ωú‰∏∫Â≠ó‰∏≤ÊúâÊó∂ÂÄô‰ºö‰∫ßÁîüÂõ∞ÊÉëÔºåËÄå‰∏î‰πüÊòØ‰∏Ä‰∏™‰∏çÂ•ΩÁöÑÁºñÁ®ãÈ£éÊ†º„ÄÇ
ÂâçÈù¢ÁöÑ‰∏§‰∏™‰æãÂ≠êÂè™ÊòØÁî®Êù•ËØ¥Êòé @command{awk} Â¶Ç‰ΩïÂ∑•‰ΩúÔºåËÄå@emph{‰∏çÊòØ}ÂëäËØâÂ§ßÂÆ∂Ëøô‰πàÊù•ÂÜôÁ®ãÂ∫èÁöÑÔºÅ
@end quotation

ËµãÂÄºÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÂõ†Ê≠§ÂÆÉÊúâÂÄº‚Äî‚Äî‰∏Ä‰∏™‰∏éÂÖ∂Ë¢´Ëµã‰∫àÁöÑÁõ∏ÂêåÁöÑÂÄº„ÄÇ
Âõ†Ê≠§ @samp{z = 1} ÊòØ‰∏Ä‰∏™ÂÖ∑ÊúâÂÄº‰∏∫ 1 ÁöÑË°®ËææÂºè„ÄÇËøô‰∏™ÁâπÊÄßÁöÑ‰∏Ä‰∏™ÁªìÊûúÂ∞±ÊòØ‰Ω†ÂèØ‰ª•Â∞ÜÂ§ö‰∏™ËµãÂÄºÂÜôÂú®‰∏ÄËµ∑ÔºåÂ¶ÇÔºö

@example
x = y = z = 5
@end example

@noindent
Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå5 Ëøô‰∏™ÂÄºË¢´ËµãÁªô‰∫Ü‰∏â‰∏™ÂèòÈáèÔºà@code{x}Ôºå@code{y} ‰∏é @code{z}Ôºâ„ÄÇ
ËøôÊòØÂõ†‰∏∫ @samp{z = 5} ÁöÑÂÄº‰∏∫ 5ÔºåÁÑ∂ÂêéÂÜçÂ≠ò‰∫é @code{y} ‰∏≠ÔºåÂõ†Ê≠§ @samp{y = z = 5} ÁöÑÂÄº‰∏∫ 5ÔºåÊúÄÂêéÂ≠òÂà∞ @code{x} ‰∏≠„ÄÇ

ËµãÂÄºÂèØ‰ª•Ë¢´Áî®‰∫é‰ªª‰ΩïÂèØÁß∞‰∏∫Ë°®ËææÂºèÁöÑÂú∞Êñπ„ÄÇ‰æãÂ¶ÇÔºå
Ëøô‰πàÂÜô @samp{x != (y = 1)} ÊòØÊúâÊïàÁöÑÂΩ¢ÂºèÔºåÂÖ∂Â∞Ü @code{y} ÁöÑÂÄºËÆæÊàê 1ÔºåÁÑ∂ÂêéÊµãËØï @code{x} ÊòØÂê¶Á≠â‰∫é 1„ÄÇ
‰ΩÜÊòØËøôÊ†∑ÁöÑÈ£éÊ†º‰ºöÂØºËá¥Á®ãÂ∫èÈöæ‰ª•ÈòÖËØªÔºåËøôÊ†∑ÁöÑËµãÂÄºÂµåÂ•óÂ∫îËØ•Ë¶ÅÈÅøÂÖçÔºåÈô§ÈùûÊòØÂú®‰∏ÄÊ¨°ÊÄßÁöÑÁ®ãÂ∫èÈáå„ÄÇ

@cindex @code{+} (plus sign), @code{+=} operator
@cindex plus sign (@code{+}), @code{+=} operator
Èô§‰∫Ü @samp{=} Â§ñÔºåËøòÊúâÂá†‰∏™ÂÖ∂‰ªñÁöÑÊìç‰ΩúÁ¨¶Áî®‰∫éÊâßË°å‰∏éÂèòÈáèÊóßÂÄºÁöÑÁÆóÊúØËøêÁÆó„ÄÇ
‰æãÂ¶ÇÔºåÊìç‰ΩúÁ¨¶ @samp{+=} Â∞ÜÂè≥ËæπÁöÑÂÄºÂä†Âà∞ÂèòÈáèÁöÑÊóßÂÄº‰ª•ÁîüÊàêÊñ∞ÂÄº„ÄÇÊâÄ‰ª•Ôºå
‰∏ãÈù¢ÁöÑËµãÂÄº‰ºöÂú® @code{foo} ÂÄºÁöÑÂü∫Á°Ä‰∏äÂä†‰∏ä 5Ôºö

@example
foo += 5
@end example

@noindent
Ëøô‰∏é‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊòØÁ≠âÂêåÁöÑÔºö

@example
foo = foo + 5
@end example

@noindent
Áî®Âì™‰∏ÄÁßçÂΩ¢ÂºèÔºåÈÉΩÂèØ‰ª•Ê∏ÖÊô∞Âú∞Ë°®Á§∫‰Ω†Á®ãÂ∫èÁöÑÊÑèÂõæ„ÄÇ

ÊúâÂá†‰∏™ÁßçÊÉÖÂÜµ‰ΩøÁî® @samp{+=} ÔºàÊàñËÄÖ‰ªªÊÑèÁöÑËµãÂÄºË°®Êìç‰ΩúÁ¨¶Ôºâ‰∏éÁÆÄÂçïÂú∞Â∞ÜÂ∑¶ËæπÁöÑÊìç‰ΩúÊï∞‰Ωú‰∏∫Âè≥ËæπÁöÑË°®ËææÂºèÁöÑÈáçÂ§çÊòØ@emph{‰∏ç}‰∏ÄÊ†∑ÁöÑÔºåÂ¶ÇÔºö

@cindex Rankin, Pat
@example
# Thanks to Pat Rankin for this example
BEGIN  @{
    foo[rand()] += 5
    for (x in foo)
       print x, foo[x]

    bar[rand()] = bar[rand()] + 5
    for (x in bar)
       print x, bar[x]
@}
@end example

@cindex operators, assignment, evaluation order
@cindex assignment operators, evaluation order
@noindent
@code{bar} Ëøô‰∏™‰∏ãÊ†á‰∏ÄËà¨Âú®ÂÆûÈôÖ‰∏≠ÈÉΩÊòØ‰∏çÁõ∏ÂêåÁöÑÔºåÂõ†‰∏∫ @code{rand()} ÊØèÊ¨°Ë∞ÉÁî®Êó∂ÈÉΩ‰∫ßÁîü‰∏çÂêåÁöÑÂÄº„ÄÇ
ÔºàÊï∞ÁªÑ‰∏é @code{rand()} ÂáΩÊï∞ÈÉΩËøòÊ≤°ÊúâËÆ®ËÆ∫Âà∞ÔºåÊü•Áúã @ref{Arrays}Ôºå‰∏é 
@ifnotdocbook
@ref{Numeric Functions}
@end ifnotdocbook
@ifdocbook
@ref{Numeric Functions}
@end ifdocbook
ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇÔºâ
Ëøô‰∏™‰æãÂ≠êËØ¥Êòé‰∫ÜËµãÂÄºÊìç‰ΩúÁ¨¶ÁöÑ‰∏Ä‰∏™ÈáçË¶Å‰∫ãÂÆûÔºöË°®ËææÂºèÁöÑÂ∑¶ËæπÂè™‰ºöÊ±ÇÂÄº@emph{‰∏ÄÊ¨°}„ÄÇ

‰ΩÜÊòØÂØπ‰∫éË°®ËææÂºèÁöÑÊ±ÇÂÄºÈ°∫Â∫èÔºåÊòØÂÖàÂ∑¶ËæπËøòÊòØÂè≥ËæπÂàôÊòØ‰æùËµñ‰∫éÂÆûÁé∞ÁöÑ„ÄÇÂ¶Ç‰∏ãÈù¢Ôºö

@example
i = 1
a[i += 2] = i + 1
@end example

@noindent
@code{a[3]} ÁöÑÂÄºÂèØ‰ª•ÊòØ 2Ôºå ‰πüÂèØ‰ª•ÊòØ 4„ÄÇ

@ref{table-assign-ops} ÂàóÂá∫‰∫ÜÊâÄÊúâÁöÑÁÆóÊúØËµãÂÄºÊìç‰ΩúÁ¨¶ÔºåÂú®ÊØèÁßçÊÉÖÂÜµ‰∏ãÔºåÂè≥ËæπÁöÑÊìç‰ΩúÊï∞ÊòØ‰∏Ä‰∏™ÂÄº‰ºöË¢´ËΩ¨Êç¢‰∏∫ÂÄºÁöÑË°®ËææÂºè„ÄÇ

@cindex @code{-} (hyphen), @code{-=} operator
@cindex hyphen (@code{-}), @code{-=} operator
@cindex @code{*} (asterisk), @code{*=} operator
@cindex asterisk (@code{*}), @code{*=} operator
@cindex @code{/} (forward slash), @code{/=} operator
@cindex forward slash (@code{/}), @code{/=} operator
@cindex @code{%} (percent sign), @code{%=} operator
@cindex percent sign (@code{%}), @code{%=} operator
@cindex @code{^} (caret), @code{^=} operator
@cindex caret (@code{^}), @code{^=} operator
@cindex @code{*} (asterisk), @code{**=} operator
@cindex asterisk (@code{*}), @code{**=} operator
@float Table,table-assign-ops
@caption{ÁÆóÊúØËµãÂÄºÊìç‰ΩúÁ¨¶}
@multitable @columnfractions .30 .70
@headitem Êìç‰ΩúÁ¨¶ @tab ÊïàÊûú
@item @var{lvalue} @code{+=} @var{increment} @tab Â∞Ü @var{increment} Ê∑ªÂä†Âà∞ @var{lvalue} ÁöÑÂÄº‰∏ä„ÄÇ
@item @var{lvalue} @code{-=} @var{decrement} @tab Âú® @var{lvalue} ÁöÑÂÄº‰∏äÂáèÂéª decrement„ÄÇ
@item @var{lvalue} @code{*=} @var{coefficient} @tab Â∞Ü @var{lvalue} ÁöÑÂÄº‰πò‰∏ä‰∏Ä‰∏™ coefficient„ÄÇ
@item @var{lvalue} @code{/=} @var{divisor} @tab Â∞Ü @var{lvalue} ÁöÑÂÄºÈô§‰∏ä‰∏Ä‰∏™ divisor„ÄÇ
@item @var{lvalue} @code{%=} @var{modulus} @tab ËÆæÁΩÆ @var{lvalue} ÁöÑÂÄº‰∏éÂÖ∂ÂÄº‰∏é @var{modulus} Ê±ÇÊ®°„ÄÇ
@cindex common extensions, @code{**=} operator
@cindex extensions, common@comma{} @code{**=} operator
@cindex @command{awk} language, POSIX version
@cindex POSIX @command{awk}
@item @var{lvalue} @code{^=} @var{power} @tab Â∞Ü @var{lvalue} ÁöÑÂÄºËøõË°åÂπÇ‰πò power„ÄÇ
@item @var{lvalue} @code{**=} @var{power} @tab Â∞Ü @var{lvalue} ÁöÑÂÄºËøõË°åÂπÇ‰πò power„ÄÇ@value{COMMONEXT}
@end multitable
@end float

@cindex POSIX @command{awk}, @code{**=} operator and
@cindex portability, @code{**=} operator and
@quotation ÊèêÁ§∫
POSIX ‰∏≠Âè™ÊåáÂÆö‰∫Ü @samp{^=} „ÄÇ‰∏∫‰∫ÜÁßªÊ§çÊÄßÔºå‰∏çË¶Å‰ΩøÁî® @samp{**=} Êìç‰ΩúÁ¨¶„ÄÇ
@end quotation

@sidebar @samp{/=} ‰∏éÊ≠£ÂàôË°®ËææÂºè‰πãÈó¥ÁöÑ‰∫å‰πâÊÄß
@cindex dark corner, regexp constants, @code{/=} operator and
@cindex @code{/} (forward slash), @code{/=} operator, vs. @code{/=@dots{}/} regexp constant
@cindex forward slash (@code{/}), @code{/=} operator, vs. @code{/=@dots{}/} regexp constant
@cindex regexp constants, @code{/=@dots{}/}, @code{/=} operator and

@c derived from email from  "Nelson H. F. Beebe" <beebe@math.utah.edu>
@c Date: Mon, 1 Sep 1997 13:38:35 -0600 (MDT)

@cindex dark corner, @code{/=} operator vs. @code{/=@dots{}/} regexp constant
@cindex ambiguity, syntactic: @code{/=} operator vs. @code{/=@dots{}/} regexp constant
@cindex syntactic ambiguity: @code{/=} operator vs. @code{/=@dots{}/} regexp constant
@cindex @code{/=} operator vs. @code{/=@dots{}/} regexp constant
Âú® @code{/=} ËµãÂÄºÊìç‰ΩúÁ¨¶‰∏éÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºàÂì™‰∏™ËÆ∞ÂΩïÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÊòØ @samp{=}Ôºâ‰πãÈó¥Êúâ‰∏Ä‰∏™ËØ≠Ê≥ï‰∏äÁöÑ‰∫å‰πâÊÄß„ÄÇ
@value{DARKCORNER}
ËøôÂú®‰∏Ä‰∫õÂïÜ‰∏öÊÄßÁöÑ @command{awk} ÁâàÊú¨ÈáåÊõ¥ÊòæÁúº„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{awk /==/ /dev/null}
@error{} awk: syntax error at source line 1
@error{}  context is
@error{}         >>> /= <<<
@error{} awk: bailing out at source line 1
@end example

@noindent
Ëß£ÂÜ≥ÊñπÊ≥ïÊòØÔºö

@example
awk '/[=]=/' /dev/null
@end example

@command{gawk} Ê≤°ÊúâËøô‰∏™ÈóÆÈ¢òÔºåBWK @command{awk} ‰∏é @command{mawk} ‰πüÊ≤°Êúâ„ÄÇ
@end sidebar

@node Increment Ops
@subsection ÈÄíÂ¢û‰∏éÈÄíÂáèÊìç‰ΩúÁ¨¶

@cindex increment operators
@cindex operators, decrement/increment
@dfn{ÈÄíÂ¢û}‰∏é@dfn{ÈÄíÂáèÊìç‰ΩúÁ¨¶}ÂØπÂèòÈáèÁöÑÂÄºËøõË°åÈÄíÂ¢û‰∏éÈÄíÂáè 1„ÄÇ
ËµãÂÄºÊìç‰ΩúÁ¨¶ÂèØ‰ª•ÂÅöÁõ∏ÂêåÁöÑ‰∫ãÊÉÖÔºåÂõ†Ê≠§ÈÄíÂ¢ûÊìç‰ΩúÁ¨¶Âπ∂Ê≤°ÊúâÁªô @command{awk} Â∏¶Êù•È¢ùÂ§ñÁöÑÂäüËÉΩÔºå
‰ΩÜÊòØÂÆÉ‰ª¨ÂØπ‰∫é‰∏Ä‰∫õÂ∏∏ËßÅÁöÑÊìç‰ΩúÁöÑÁº©ÂÜôÈùûÂ∏∏Êñπ‰æø„ÄÇ

@cindex side effects
@cindex @code{+} (plus sign), @code{++} operator
@cindex plus sign (@code{+}), @code{++} operator
@cindex side effects, decrement/increment operators
Áî®‰∫é@dfn{Âä†‰∏Ä}ÁöÑÊìç‰ΩúÁ¨¶ÂÜô‰Ωú @samp{++} „ÄÇÂÆÉÂèØ‰ª•Áî®Âú®ÈÄíÂ¢ûÁöÑÂèòÈáèÁöÑÂâçÈù¢‰∏éÂêéÈù¢„ÄÇÂú®ÂèòÈáè @code{v} ÂâçÈù¢ÈÄíÂ¢ûÂÜôÊàê @samp{++v}Ôºå
Ëøô‰ºöÂØπ @code{v} ÂÄºËøõË°åÂä†‰∏Ä‚Äî‚ÄîÊñ∞ÁöÑÂÄº‰πüÊòØ‰∏Ä‰∏™Ë°®ËææÂºè„ÄÇÔºàËµãÂÄºË°®ËææÂºè @samp{v += 1} ‰∏éÂÖ∂Á≠âÂêå„ÄÇÔºâ
Âú®ÂèòÈáèÂêéÈù¢ÈÄíÂ¢û‰∏∫ÂêéÁºÄÈÄíÂ¢û„ÄÇËøô‰∏éÂâçÈù¢ÁöÑÂΩ¢Âºè‰∏ÄÊ†∑Ôºå‰∏çÂêåÁöÑÊòØÈÄíÂ¢ûË°®ËææÂºèÁöÑÂÄºÊòØÂèòÈáèÁöÑ@emph{Êóß}ÂÄº„ÄÇ
Âõ†Ê≠§ÔºåÂ¶ÇÊûú @code{foo} ÁöÑÂÄº ‰∏∫ 4ÔºåÂàôË°®ËææÂºè @samp{foo++} ÁöÑÂÄº‰∏∫ 4Ôºå‰ΩÜÊòØÂèòÈáèÁöÑÂÄº‰ºöÂèòÊàê 5„ÄÇ
Êç¢Âè•ËØùËØ¥ÔºåÊìç‰ΩúÁ¨¶ËøîÂõûÂèòÈáèÁöÑÊóßÂÄºÔºå‰ΩÜÊòØ‰Ωú‰∏∫ÂâØ‰ΩúÁî®‰ºöÂØπÂÖ∂ÈÄíÂ¢û„ÄÇ

ÂêéÁºÄÈÄíÂ¢û @samp{foo++} Âá†‰πé‰∏é @samp{(foo += 1) - 1} Áõ∏Âêå„ÄÇ
‰ΩÜÊòØÂèà‰∏çÂÆåÂÖ®Áõ∏ÂêåÔºåÂõ†‰∏∫Âú® @command{awk} ‰∏≠ÊâÄÊúâÁöÑÊï∞ÂÄºÈÉΩÊòØÊµÆÁÇπÊï∞‚Äî‚ÄîÂú®ÊµÆÁÇπÊï∞‰∏≠Ôºå@samp{foo + 1 - 1} ‰∏ç‰∏ÄÂÆö‰∏é @code{foo} Áõ∏Âêå„ÄÇ
‰ΩÜÊòØËøô‰∏™Â∑ÆÂºÇÈùûÂ∏∏Â∞èÔºåÂè™Ë¶Å‰Ω†Ë¶ÅÂ§ÑÁêÜÁöÑÁöÑÂÄºÈùûÂ∏∏Â∞èÔºàÂ∞è‰∫é
@iftex
@math{10^{12}}Ôºâ„ÄÇ
@end iftex
@ifinfo
10e12Ôºâ„ÄÇ
@end ifinfo
@ifnottex
@ifnotinfo
10@sup{12}Ôºâ„ÄÇ
@end ifnotinfo
@end ifnottex

@cindex @code{$} (dollar sign), incrementing fields and arrays
@cindex dollar sign (@code{$}), incrementing fields and arrays
Âüü‰∏éÊï∞ÁªÑÂÖÉÁ¥†‰πüÂèØ‰ª•ÂÉèÂèòÈáè‰∏ÄÊ†∑ÈÄíÂ¢û„ÄÇÔºàÂΩì‰Ω†ÊÉ≥ÊâßË°å‰∏Ä‰∏™ÂüüÂèÇËÄÉÔºåÂèàÂØπÂèòÈáèËøõË°åÈÄíÂ¢ûÊó∂Ôºå‰ΩøÁî® @samp{$(i++)} „ÄÇ
Êã¨Âè∑ÊòØÂøÖÈ°ªÁöÑÔºåÂõ†‰∏∫ÂüüÊìç‰ΩúÁ¨¶ @samp{$} ÂÖà‰∫éÈÄíÂ¢ûÊìç‰ΩúÁ¨¶„ÄÇÔºâ

@cindex decrement operators
ÈÄíÂ¢ûÊìç‰ΩúÁ¨¶ @samp{--} ‰∏é @samp{++} Á±ªÂûãÔºåÂè™ÊòØÂÖ∂Áî®‰∫éÂáèËÄå‰∏çÊòØÁî®‰∫éÂä†„ÄÇ
‰∏é @samp{++} ‰∏ÄÊ†∑ÔºåÂÖ∂Áî®ÂèØÁî®Âú®Â∑¶‰º†ÁöÑÂâçÈù¢ËøõË°åÂâçÁºÄÈÄíÂáèÔºåÂú®ÂêéÈù¢ËøõË°åÂêéÁºÄÈÄíÂáè„ÄÇ‰∏ãÈù¢ÊòØÂØπ‰∫éÈÄíÂ¢û‰∏éÈÄíÂáèÊìç‰ΩúÁ¨¶Ë°®ËææÂºèÁöÑÊ±áÊÄªÔºö

@table @code
@cindex @code{+} (plus sign), @code{++} operator
@cindex plus sign (@code{+}), @code{++} operator
@item ++@var{lvalue}
Áªô @var{lvalue} ÈÄíÂ¢û 1ÔºåÂπ∂ËøîÂõûÊñ∞ÂÄº‰Ωú‰∏∫Ë°®ËææÂºèÁöÑÂÄº„ÄÇ

@item @var{lvalue}++
Áªô @var{lvalue} ÈÄíÂ¢û 1ÔºåÂπ∂ËøîÂõû@emph{Êóß}ÂÄº‰Ωú‰∏∫Ë°®ËææÂºèÁöÑÂÄº„ÄÇ

@cindex @code{-} (hyphen), @code{--} operator
@cindex hyphen (@code{-}), @code{--} operator
@item --@var{lvalue}
Áªô @var{lvalue} ÈÄíÂáè 1ÔºåÂπ∂ËøîÂõûÊñ∞ÂÄº‰Ωú‰∏∫Ë°®ËææÂºèÁöÑÂÄº„ÄÇÔºàËøô‰∏™‰∏éË°®ËææÂºè @samp{++@var{lvalue}} ‰∏ÄÊ†∑ÔºåÂè™ÊòØÁî®‰∫éÂáèÔºåËÄå‰∏çÊòØÁî®‰∫éÂä†„ÄÇÔºâ

@item @var{lvalue}--
Áªô @var{lvalue} ÈÄíÂáè1ÔºåÂπ∂ËøîÂõû@emph{Êóß}ÂÄº‰Ωú‰∏∫Ë°®ËææÂºèÁöÑÂÄº„ÄÇÔºàËøô‰∏™‰∏éË°®ËææÂºè @samp{@var{lvalue}++} ‰∏ÄÊ†∑Ôºå
Âè™ÊòØÁî®‰∫éÂáèÔºåËÄå‰∏çÊòØÁî®‰∫éÂä†„ÄÇÔºâ
@end table

@sidebar Êìç‰ΩúÁ¨¶Ê±ÇÂÄºÈ°∫Â∫è
@cindex precedence
@cindex operators, precedence
@cindex portability, operators
@cindex evaluation order
@cindex Marx, Groucho
@quotation
@i{ÂåªÁîüÔºåÂΩìÊàëËøô‰πàÂπ≤ÁöÑÊó∂ÂÄôÂ∞±‰ºöÂèó‰º§ÔºÅ@*
ÈÇ£‰πà‰Ω†Â∞±Âà´Ëøô‰πàÂπ≤ÂïäÔºÅ}
@author Groucho Marx
@end quotation

@noindent
ÂΩìÊàë‰ª¨ÂÉè‰∏ãÈù¢ËøôÊ†∑ÂÅöÔºå‰ºöÂèëÁîü‰ªÄ‰πàÔºü

@example
b = 6
print b += b++
@end example

@noindent
ÊàñËÄÖ‰∏Ä‰∫õÊõ¥Â•áÊÄ™ÁöÑÔºö

@example
b = 6
b += ++b + b++
print b
@end example

@cindex side effects
Êç¢Âè•ËØùËØ¥ÔºåÂΩìÊâßË°å‰∏çÂêåÁöÑÂêéÁºÄÊìç‰ΩúÁ¨¶Ôºà@samp{b++}ÔºâÊó∂Ôºå‰ºöÊúâÂì™‰∫õÂâØ‰ΩúÁî®‰∫ßÁîüÔºü‰∫ßÁîüÁöÑÂâØ‰ΩúÁî®ÊòØ@dfn{Áî±ÂÆûÁé∞Êù•ÂÆö‰πâÁöÑ}Ôºå
Âç≥‰æùËµñ‰∫é @command{awk} ÁöÑÁâπÂÆöÁâàÊú¨„ÄÇÁ¨¨‰∏Ä‰∏™‰æãÂ≠êÁöÑÁªìÊûúÂèØËÉΩÊòØ 12 ÊàñËÄÖ 13ÔºåÂØπ‰∫éÁ¨¨‰∫å‰∏™‰æãÂ≠êÂàôÂèØËÉΩÊòØ 22 ÊàñËÄÖÊòØ 23„ÄÇ

‰∏ÄÂè•ËØùÔºåËøô‰πàÂπ≤ÊòØ‰∏çÂª∫ËÆÆÁöÑÂπ∂‰∏îÂÖ∂ÁßªÊ§çÊÄßÂÆåÂÖ®‰∏çÂèØ‰æùËµñ„ÄÇ‰Ω†Ë¶ÅÂú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠ÈÅøÂÖçËøôÊ†∑ÁöÑ‰ª£Á†Å„ÄÇ
@c You'll sleep better at night and be able to look at yourself
@c in the mirror in the morning.
@end sidebar

@node Truth Values and Conditions
@section ÁúüÂÄº‰∏éÊù°‰ª∂

Âú®ÁâπÂÆöÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÔºåË°®ËææÂºèÁöÑÂÄº‰ºöÁî®Êù•‰Ωú‰∏∫‚ÄúÁúüÂÄº‚ÄùÔºåÂ¶ÇÔºåÁî®Êù•ÂÜ≥ÂÆöÊé•‰∏ãÊù•Á®ãÂ∫èÂ∫îËØ•ÊâßË°å‰ªÄ‰πà„ÄÇ
Ëøô‰∏Ä@value{SECTION}‰∏≠‰ºöÊèèËø∞ @command{awk} Â¶Ç‰ΩïÂÆö‰πâ @samp{true} ‰∏é @samp{false} ‰ª•ÂèäÂÄºÂ¶Ç‰ΩïËøõË°åÊØîËæÉ„ÄÇ

@menu
* Truth Values::                What is ``true'' and what is ``false''.
* Typing and Comparison::       How variables acquire types and how this
                                affects comparison of numbers and strings with
                                @samp{<}, etc.
* Boolean Ops::                 Combining comparison expressions using boolean
                                operators @samp{||} (``or''), @samp{&&}
                                (``and'') and @samp{!} (``not'').
* Conditional Exp::             Conditional expressions select between two
                                subexpressions under control of a third
                                subexpression.
@end menu

@node Truth Values
@subsection @command{awk} ÁöÑÁúü‰∏éÂÅá
@cindex truth values
@cindex logical false/true
@cindex false, logical
@cindex true, logical

@cindex null strings
ËÆ∏Â§öÁöÑÁºñÁ®ãËØ≠Ë®ÄÂØπ‰∫é‚Äútrue‚Äù‰∏é‚Äúfalse‚ÄùÊ¶ÇÂøµÈÉΩÊúâÁâπÊÆäÁöÑË°®Á§∫ÊñπÂºè„ÄÇ
ËøôÊ†∑ÁöÑËØ≠Ë®ÄÈÄöÂ∏∏‰ΩøÁî®ÁâπÊÆäÁöÑÂ∏∏Èáè @code{true} ‰∏é @code{false}Ôºå‰ª•ÂèäÂØπÂ∫îÁöÑÂ§ßÂÜô„ÄÇ
‰ΩÜÊòØ @command{awk} Âç¥‰∏çÂêå„ÄÇÂÆÉ‰ªé C ‰∏≠ÂÄüÈâ¥‰∫Ü true ‰∏é false ÁöÑÊ¶ÇÂøµ„ÄÇ
Âú® @command{awk} ‰∏≠ÔºåÊâÄÊúâÈùû 0 ÁöÑÊï∞ÂÄº@emph{ÊàñËÄÖ}ÈùûÁ©∫‰∏≤ÈÉΩÊòØ true„ÄÇ
ËÄåÂÖ∂‰ªñÁöÑÂÄºÔºà0 ÊàñËÄÖÁ©∫‰∏≤Ôºå@code{""}ÔºâÈÉΩÊòØ false„ÄÇ‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰ºöÊâìÂç∞ @samp{A strange truth value} ‰∏âÊ¨°Ôºö

@example
BEGIN @{
   if (3.1415927)
       print "A strange truth value"
   if ("Four Score And Seven Years Ago")
       print "A strange truth value"
   if (j = 57)
       print "A strange truth value"
@}
@end example

@cindex dark corner, @code{"0"} is actually true
Ëøô‰∏™‚ÄúÈùû 0 ÈùûÁ©∫‚ÄùÁöÑËßÑÂàôÊúâ‰∏Ä‰∏™‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÁªìÊûúÔºöÂ≠ó‰∏≤ @code{"0"} ‰∏∫ÁúüÔºåÂõ†‰∏∫ÂÆÉÈùûÁ©∫„ÄÇ
@value{DARKCORNER}

@node Typing and Comparison
@subsection ÂèòÈáèÁ±ªÂûã‰∏éÊØîËæÉË°®ËææÂºè
@quotation
@i{ÊåáÂçóÈÉΩÊòØÁ°ÆÂÆöÁöÑÔºå‰ΩÜÊòØÁé∞ÂÆûÂ∏∏Â∏∏‰∏çÁ≤æÁ°Æ„ÄÇ}
@author Douglas Adams, @cite{The Hitchhiker's Guide to the Galaxy}
@end quotation
@c 2/2015: Antonio Colombo points out that this is really from
@c The Restaurant at the End of the Universe. But I'm going to
@c leave it alone.

@cindex comparison expressions
@cindex expressions, comparison
@cindex expressions, matching, See comparison expressions
@cindex matching, expressions, See comparison expressions
@cindex relational operators, See comparison operators
@cindex operators, relational, See operators@comma{} comparison
@cindex variable typing
@cindex variables, types of, comparison expressions and
‰∏éÂÖ∂‰ªñÁöÑËØ≠Ë®Ä‰∏çÂêåÔºå@command{awk} ‰∏≠ÁöÑÂèòÈáèÊ≤°ÊúâÂõ∫ÂÆöÁöÑÁ±ªÂûã„ÄÇ
Áõ∏ÂèçÔºåÂÆÉ‰ª¨Âç≥ÂèØ‰ª•ÊòØÊï∞ÂÄºÔºå‰πüÂèØ‰ª•ÊòØÂ≠ó‰∏≤ÔºåËøô‰∏ªË¶Å‰æùËµñ‰∫éÊâÄËµãÁªôÂÆÉÁöÑÂÄºÊù•Á°ÆÂÆö„ÄÇÊàë‰ª¨Áé∞Âú®Êù•ÁúãÁúãÂèòÈáèÊòØÂ¶Ç‰ΩïÊù•Á°ÆÂÆöÁ±ªÂûãÁöÑÔºå
‰ª•Âèä @command{awk} Â¶Ç‰ΩïÊù•ÊØîËæÉËøô‰∫õÂèòÈáè„ÄÇ

@menu
* Variable Typing::             String type versus numeric type.
* Comparison Operators::        The comparison operators.
* POSIX String Comparison::     String comparison with POSIX rules.
@end menu

@node Variable Typing
@subsubsection Â≠ó‰∏≤Á±ªÂûã‰∏éÊï∞ÂÄºÁ±ªÂûã

@cindex numeric, strings
@cindex strings, numeric
@cindex POSIX @command{awk}, numeric strings and
POSIX Ê†áÂáÜ‰∏≠ÂºïÂÖ•‰∫Ü@dfn{Êï∞ÂÄºÂºèÂ≠ó‰∏≤}ÁöÑÊ¶ÇÂøµÔºå
ÁÆÄÂçïÂú∞ËØ¥Â∞±ÊòØÁúãËµ∑Êù•ÂÉèÊòØ‰∏Ä‰∏™Êï∞ÂÄºÁöÑÂ≠ó‰∏≤‚Äî‚ÄîÂ¶Ç @code{@w{" +2"}}„ÄÇ
Ëøô‰∏™Ê¶ÇÂøµ‰πüÁî®Êù•Á°ÆÂÆöÂèòÈáèÁöÑÁ±ªÂûã„ÄÇÂèòÈáèÁöÑÁ±ªÂûãÊòØÈùûÂ∏∏ÈáçË¶ÅÁöÑÔºåÂõ†‰∏∫‰∏§ÂèòÈáèÁöÑÁ±ªÂûãÂÜ≥ÂÆö‰∫ÜÂÆÉ‰ª¨‰πãÈó¥Â¶Ç‰ΩïËøõË°åÊØîËæÉ„ÄÇÂèòÈáèÁ±ªÂûãÁöÑÁ°ÆÂÆö‰æùËµñ‰∏ãÈù¢ÁöÑËßÑÂàôÔºö


@itemize @value{BULLET}
@item
Êï∞ÂÄºÂ∏∏ÈáèÊàñËÄÖÊòØÊï∞ÂÄºÊìç‰ΩúÁªìÊûúÂÖ∑Êúâ@dfn{Êï∞ÂÄº}Â±ûÊÄß„ÄÇ

@item
Â≠ó‰∏≤Â∏∏ÈáèÊàñËÄÖÂ≠ó‰∏≤Êìç‰ΩúÁªìÊûúÂÖ∑Êúâ@dfn{Â≠ó‰∏≤}Â±ûÊÄß„ÄÇ

@item
ÂüüÔºå@code{getline} ËæìÂá∫Ôºå@code{FILENAME}Ôºå@code{ARGV} ÂÖÉÁ¥†Ôºå
@code{ENVIRON} ÂÖÉÁ¥†‰ª•ÂèäÁî± @code{match()}Ôºå@code{split()} ‰∏é @code{patsplit()} ÁîüÊàêÁöÑÊï∞ÁªÑÁöÑÂÖÉÁ¥†Ôºå
Â¶ÇÊûúÊòØÊï∞ÂÄºÂ≠ó‰∏≤ÔºåÂàôÂÖ∑Êúâ @dfn{strnum} Â±ûÊÄß„ÄÇÂê¶ÂàôÂ∞±ÂÖ∑Êúâ@dfn{Â≠ó‰∏≤}Â±ûÊÄß„ÄÇ
Êú™ÂàùÂßãÂåñÁöÑÂèòÈáè‰πüÂÖ∑Êúâ @dfn{strnum} Â±ûÊÄß„ÄÇ

@item
Â±ûÊÄßÈÄöËøáËµãÂÄºÊìç‰ΩúÁ¨¶ËøõË°å‰º†ÈÄíÔºå‰ΩÜÊòØ‰ΩøÁî®Âàô‰∏ç‰ºöÊîπÂèò„ÄÇ
@c (Although a use may cause the entity to acquire an additional
@c value such that it has both a numeric and string value, this leaves the
@c attribute unchanged.)
@c This is important but not relevant
@end itemize

ÊúÄÂêéÁöÑËßÑÂàôÂ∞§ÂÖ∂ÈáçË¶Å„ÄÇÂú®‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰∏≠Ôºå@code{a} ÂÖ∑ÊúâÊï∞ÂÄºÁ±ªÂûãÔºåÂ∞±ÁÆó‰πãÂêéÂÆÉË¢´Áî®‰∫éÂ≠ó‰∏≤Êìç‰Ωú‰∏≠Ôºö

@example
BEGIN @{
     a = 12.345
     b = a " is a cute number"
     print b
@}
@end example

ÂΩì‰∏§‰∏™Êìç‰ΩúÊï∞ËøõË°åÊØîËæÉÊó∂ÔºåË¶Å‰πàÊòØËøõË°åÂ≠ó‰∏≤ÊØîËæÉÔºåË¶Å‰πàÊòØËøõË°åÊï∞ÂÄºÊØîËæÉ„ÄÇËøô‰æùËµñ‰∫éÊìç‰ΩúÊï∞ÁöÑÂ±ûÊÄßÔºåÂ¶Ç‰∏ãÈù¢ÁöÑÂØπÁß∞ÈòµÂàóÔºö

@c thanks to Karl Berry, kb@cs.umb.edu, for major help with TeX tables
@tex
\centerline{
\vbox{\bigskip % space above the table (about 1 linespace)
% Because we have vertical rules, we can't let TeX insert interline space
% in its usual way.
\offinterlineskip
%
% Define the table template. & separates columns, and \cr ends the
% template (and each row). # is replaced by the text of that entry on
% each row. The template for the first column breaks down like this:
%   \strut -- a way to make each line have the height and depth
%             of a normal line of type, since we turned off interline spacing.
%   \hfil -- infinite glue; has the effect of right-justifying in this case.
%   #     -- replaced by the text (for instance, `STRNUM', in the last row).
%   \quad -- about the width of an `M'. Just separates the columns.
%
% The second column (\vrule#) is what generates the vertical rule that
% spans table rows.
%
% The doubled && before the next entry means `repeat the following
% template as many times as necessary on each line' -- in our case, twice.
%
% The template itself, \quad#\hfil, left-justifies with a little space before.
%
\halign{\strut\hfil#\quad&\vrule#&&\quad#\hfil\cr
	&&STRING	&NUMERIC	&STRNUM\cr
% The \omit tells TeX to skip inserting the template for this column on
% this particular row. In this case, we only want a little extra space
% to separate the heading row from the rule below it.  the depth 2pt --
% `\vrule depth 2pt' is that little space.
\omit	&depth 2pt\cr
% This is the horizontal rule below the heading. Since it has nothing to
% do with the columns of the table, we use \noalign to get it in there.
\noalign{\hrule}
% Like above, this time a little more space.
\omit	&depth 4pt\cr
% The remaining rows have nothing special about them.
STRING	&&string	&string		&string\cr
NUMERIC	&&string	&numeric	&numeric\cr
STRNUM  &&string	&numeric	&numeric\cr
}}}
@end tex
@ifnottex
@ifnotdocbook
@display
        +----------------------------------------------
        |       STRING          NUMERIC         STRNUM
--------+----------------------------------------------
        |
STRING  |       string          string          string
        |
NUMERIC |       string          numeric         numeric
        |
STRNUM  |       string          numeric         numeric
--------+----------------------------------------------
@end display
@end ifnotdocbook
@end ifnottex
@docbook
<informaltable>
<tgroup cols="4">
<colspec colname="1" align="left"/>
<colspec colname="2" align="left"/>
<colspec colname="3" align="left"/>
<colspec colname="4" align="left"/>
<thead>
<row>
<entry/>
<entry>STRING</entry>
<entry>NUMERIC</entry>
<entry>STRNUM</entry>
</row>
</thead>

<tbody>
<row>
<entry><emphasis role="bold">STRING</emphasis></entry>
<entry>string</entry>
<entry>string</entry>
<entry>string</entry>
</row>

<row>
<entry><emphasis role="bold">NUMERIC</emphasis></entry>
<entry>string</entry>
<entry>numeric</entry>
<entry>numeric</entry>
</row>

<row>
<entry><emphasis role="bold">STRNUM</emphasis></entry>
<entry>string</entry>
<entry>numeric</entry>
<entry>numeric</entry>
</row>

</tbody>
</tgroup>
</informaltable>

@end docbook

Âü∫Êú¨ÁöÑÊÄùÊÉ≥Â∞±ÊòØÔºåÁî®Êà∑ÁöÑËæìÂÖ•ÁúãËµ∑Êù•ÂÉèÊï∞ÂÄº‚Äî‚Äî‰πü@emph{‰ªÖ‰ªÖ}Âú®Áî®Êà∑ËæìÂÖ•‰∏≠‚Äî‚ÄîÂ∞±‰ºöË¢´ÂΩìÊàêÊï∞ÂÄºÂØπÂæÖÔºå
Â∞±ÁÆóÂÆÉÂÆûÈôÖ‰∏äÊòØÁî±Â≠óÁ¨¶ÁªÑÊàêÁöÑÂ≠ó‰∏≤„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇËøôÊ†∑ÁöÑÂ≠ó‰∏≤Â∏∏Èáè @w{@code{" +3.14"}}Ôºå
ÂΩìÂÆÉÂá∫Áé∞Âú®Á®ãÂ∫èÂéü‰ª£Á†Å‰∏≠ÔºåÊòØ‰∏Ä‰∏™Â≠ó‰∏≤‚Äî‚ÄîÂ∞±ÁÆóÂÆÉÊòØ‰∏Ä‰∏™Êï∞ÂÄº‚Äî‚Äî‰πü@emph{Ê∞∏Ëøú}‰∏ç‰ºöÂú®ÊØîËæÉÁõÆÁöÑ‰∏≠Ë¢´ÂΩìÊàêÊï∞ÂÄº„ÄÇ

ÁÆÄÂçïÂú∞ËØ¥ÔºåÂΩìÊìç‰ΩúÊï∞ÊòØ‰∏Ä‰∏™‚ÄúÁ∫ØÁ≤π‚ÄùÁöÑÂ≠ó‰∏≤ÔºåÂ¶ÇÂ≠ó‰∏≤Â∏∏ÈáèÔºåÂàôÂ∞±‰ºöÊâßË°åÂ≠ó‰∏≤ÊØîËæÉ„ÄÇÂê¶ÂàôÂ∞±‰ºöÊâßË°åÊï∞ÂÄºÊØîËæÉ„ÄÇ

ÂØπÊ≠§ËøòË¶ÅÂº∫Ë∞É‰∏Ä‰∏ãÔºöÊâÄÊúâÁöÑÁî®Êà∑ËæìÂÖ•ÈÉΩÁî±Â≠óÁ¨¶ÁªÑÊàêÔºåÂõ†Ê≠§È¶ñÂÖàÂÆÉÊòØÂ≠ó‰∏≤Á±ªÂûãÔºåËæìÂá∫ÁöÑÂ≠ó‰∏≤ÁúãËµ∑Êù•ÂÉèÊòØÊï∞ÂÄºÁöÑÂ∞±‰ºöËµãÁªô strnum Â±ûÊÄß„ÄÇ
ÊâÄ‰ª•Ôºå‰∏ãÈù¢Ëøô‰∏™6Â≠óÁ¨¶ÁöÑËæìÂá∫‰∏≤ @w{@samp{ +3.14}} ‰ºöÂÖ∑Êúâ strnum Â±ûÊÄß„ÄÇ
Áõ∏ÂèçÂú∞Ôºå‰∏ãÈù¢ÁöÑ 8 Â≠óÁ¨¶‰∏≤ @w{@code{" +3.14"}} Âá∫Áé∞Âú®Á®ãÂ∫èÊñáÊú¨‰∏≠ÂàôÁªÑÊàê‰∫Ü‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏Èáè„ÄÇ
‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂΩìÊØîËæÉ‰∏§‰∏™‰∏çÂêåÁöÑÂ∏∏ÈáèÊó∂‰∏∫ÁúüÔºåÂõ†Ê≠§ÊâìÂç∞ @samp{1}ÔºåÂê¶ÂàôÊâìÂç∞ @samp{0} Ôºö

@c 22.9.2014: Tested with mawk and BWK awk, got same results.
@example
$ @kbd{echo ' +3.14' | awk '@{ print($0 == " +3.14") @}'}    @ii{True}
@print{} 1
$ @kbd{echo ' +3.14' | awk '@{ print($0 == "+3.14") @}'}     @ii{False}
@print{} 0
$ @kbd{echo ' +3.14' | awk '@{ print($0 == "3.14") @}'}      @ii{False}
@print{} 0
$ @kbd{echo ' +3.14' | awk '@{ print($0 == 3.14) @}'}        @ii{True}
@print{} 1
$ @kbd{echo ' +3.14' | awk '@{ print($1 == " +3.14") @}'}    @ii{False}
@print{} 0
$ @kbd{echo ' +3.14' | awk '@{ print($1 == "+3.14") @}'}     @ii{True}
@print{} 1
$ @kbd{echo ' +3.14' | awk '@{ print($1 == "3.14") @}'}      @ii{False}
@print{} 0
$ @kbd{echo ' +3.14' | awk '@{ print($1 == 3.14) @}'}        @ii{True}
@print{} 1
@end example

@node Comparison Operators
@subsubsection ÊØîËæÉÊìç‰ΩúÁ¨¶

@dfn{ÊØîËæÉË°®ËææÂºè}Âú®Êï∞ÂÄºÊàñËÄÖÂ≠ó‰∏≤‰∏≠ËøõË°åÊØîËæÉÔºåÊØîÂ¶ÇËØ¥Áõ∏Á≠âÊÄß„ÄÇÂÆÉ‰ª¨ÈÄöÂ∏∏‰ΩøÁî®@dfn{ÂÖ≥Á≥ªÊìç‰ΩúÁ¨¶}Êù•Ë°®Áé∞Ôºå
Ëøô‰∫õÊìç‰ΩúÊòØ C ‰∏≠ÂØπÂ∫îÁöÑÊìç‰ΩúÁöÑË∂ÖÈõÜ„ÄÇË°® @ref{table-relational-ops} ‰∏≠ÊúâËØ¥Êòé„ÄÇ

@cindex @code{<} (left angle bracket), @code{<} operator
@cindex left angle bracket (@code{<}), @code{<} operator
@cindex @code{<} (left angle bracket), @code{<=} operator
@cindex left angle bracket (@code{<}), @code{<=} operator
@cindex @code{>} (right angle bracket), @code{>=} operator
@cindex right angle bracket (@code{>}), @code{>=} operator
@cindex @code{>} (right angle bracket), @code{>} operator
@cindex right angle bracket (@code{>}), @code{>} operator
@cindex @code{=} (equals sign), @code{==} operator
@cindex equals sign (@code{=}), @code{==} operator
@cindex @code{!} (exclamation point), @code{!=} operator
@cindex exclamation point (@code{!}), @code{!=} operator
@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@cindex @code{in} operator
@float Table,table-relational-ops
@caption{ÂÖ≥Á≥ªÊìç‰ΩúÁ¨¶}
@multitable @columnfractions .25 .75
@headitem Expression @tab Result
@item @var{x} @code{<} @var{y} @tab Â¶ÇÊûú @var{x} Â∞è‰∫é @var{y} Âàô‰∏∫Áúü
@item @var{x} @code{<=} @var{y} @tab Â¶ÇÊûú @var{x} Â∞è‰∫éÊàñËÄÖÁ≠â‰∫é @var{y} Âàô‰∏∫Áúü
@item @var{x} @code{>} @var{y} @tab Â¶ÇÊûú @var{x} Â§ß‰∫é @var{y} Âàô‰∏∫Áúü
@item @var{x} @code{>=} @var{y} @tab Â¶ÇÊûú @var{x} Â§ß‰∫éÊàñËÄÖÁ≠â‰∫é @var{y} Âàô‰∏∫Áúü
@item @var{x} @code{==} @var{y} @tab Â¶ÇÊûú @var{x} Á≠â‰∫é @var{y} Âàô‰∏∫Áúü
@item @var{x} @code{!=} @var{y} @tab Â¶ÇÊûú @var{x} ‰∏çÁ≠â‰∫é @var{y} Âàô‰∏∫Áúü
@item @var{x} @code{~} @var{y} @tab Â¶ÇÊûúÂ≠ó‰∏≤ @var{x} ‰∏é @var{y} ÊâÄ‰ª£Ë°®ÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÂàô‰∏∫Áúü
@item @var{x} @code{!~} @var{y} @tab Â¶ÇÊûúÂ≠ó‰∏≤ @var{x} ‰∏é @var{y} Ë°®Á§∫ÁöÑÊ≠£ÂàôË°®ËææÂºè‰∏çÂåπÈÖçÂàô‰∏∫Áúü
@item @var{subscript} @code{in} @var{array} @tab Â¶ÇÊûúÊï∞ÁªÑ @var{array} Â≠òÂú®‰∏ãÊ†á @var{subscript} ÊâÄÊåáÊòéÁöÑÂÖÉÁ¥†Âàô‰∏∫Áúü
@end multitable
@end float

ÊØîËæÉË°®ËææÂºèÁöÑÁªìÊûú‰∏∫ trueÔºåÂàôÂÄº‰∏∫ 1ÔºåÂèç‰πãÂàô‰∏∫ 0„ÄÇ
ÂΩì‰∏çÂêåÁöÑÁ±ªÂûã‰πãÈó¥ËøõË°åÊØîËæÉÊó∂ÔºåÊï∞ÂÄºÁ±ªÂûãÁöÑÊìç‰ΩúÁ¨¶‰ºöÊåâÁÖß @code{CONVFMT} ÔºàÊü•Áúã @ref{Conversion}ÔºâÁöÑÊ†ºÂºèËΩ¨Êç¢‰∏∫Â≠ó‰∏≤„ÄÇ

Â≠ó‰∏≤ÁöÑÊØîËæÉÊØè‰∏™‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÁÑ∂ÂêéÁ¨¨‰∫å‰∏™Â≠óÁ¨¶Ôºå‰æùÊ¨°ËøõË°åÊØîËæÉ„ÄÇÂõ†Ê≠§Ôºå@code{"10"} Â∞è‰∫é @code{"9"}„ÄÇ
Â¶ÇÊûú‰∏§‰∏™‰∏≤‰∏≠Ôºå‰∏Ä‰∏™‰∏≤ÊòØÂè¶‰∏Ä‰∏™‰∏≤ÁöÑÂâçÁºÄÔºåÁü≠ÁöÑ‰∏≤Â∞è‰∫éÈïøÁöÑ‰∏≤„ÄÇÊâÄ‰ª•Ôºå@code{"abc"} Â∞è‰∫é @code{"abcd"}„ÄÇ

@cindex troubleshooting, @code{==} operator
ÂæàÂÆπÊòì‰∏çÂ∞èÂ∞Ü @samp{==} Êìç‰ΩúÁ¨¶Â∞ëÊâì‰∏Ä‰∏™ @samp{=} Á¨¶Âè∑„ÄÇ
ÁªìÊûúËøòÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ @command{awk} ‰ª£Á†ÅÔºå‰ΩÜÊòØÁ®ãÂ∫èÊâßË°åÁöÑÂèØÂ∞±‰∏çÊòØ‰Ω†ÁöÑÊÑèÂõæ‰∫ÜÔºö

@example
if (a = b)   # oops! should be a == b
   @dots{}
else
   @dots{}
@end example

@noindent
Èô§Èùû @code{b} Á¢∞Â∑ß‰∏∫ 0 ÊàñËÄÖÊòØÁ©∫‰∏≤ÔºåÂê¶Âàô @code{if} ÁöÑÊµãËØïÈÉ®ÂàÜÊÄª‰ºöÊòØÊàêÂäüÁöÑÔºà‰∏∫ trueÔºâ„ÄÇ
Âõ†Ê≠§Êìç‰ΩúÁ¨¶ÁúãËµ∑Êù•Ëøô‰πàÂÉèÔºåÊ≠§Á±ªÁöÑÈîôËØØ‰ºöÈùûÂ∏∏ÈöæÂèëÁé∞„ÄÇ

‰∏ãÈù¢ÁöÑË°®ËææÂºèÂàóË°®ËØ¥Êòé‰∫Ü @command{awk} ÊâßË°åÁöÑÊØîËæÉÁ±ªÂûãÔºå‰ª•ÂèäÊØîËæÉÁöÑÁªìÊûúÔºö

@table @code
@item 1.5 <= 2.0
Êï∞ÂÄºÊØîËæÉÔºàtrueÔºâ

@item "abc" >= "xyz"
Â≠ó‰∏≤ÊØîËæÉÔºàfalseÔºâ

@item 1.5 != " +2"
Â≠ó‰∏≤ÊØîËæÉÔºàtrueÔºâ


@item "1e2" < "3"
Â≠ó‰∏≤ÊØîËæÉÔºàtrueÔºâ

@item a = 2; b = "2"
@itemx a == b
Â≠ó‰∏≤ÊØîËæÉÔºàtrueÔºâ

@item a = 2; b = " +2"
@itemx a == b
Â≠ó‰∏≤ÊØîËæÉÔºàfalseÔºâ
@end table

Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºö

@example
$ @kbd{echo 1e2 3 | awk '@{ print ($1 < $2) ? "true" : "false" @}'}
@print{} false
@end example

@cindex comparison expressions, string vs.@: regexp
@c @cindex string comparison vs.@: regexp comparison
@c @cindex regexp comparison vs.@: string comparison
@noindent
ÁªìÊûú‰∏∫ @samp{false} ÔºåÂõ†‰∏∫ @code{$1} ‰∏é @code{$2} ÈÉΩÊòØÁî®Êà∑ËæìÂÖ•„ÄÇÂÆÉ‰ª¨ÈÉΩÊòØÊï∞ÂÄºÂ≠ó‰∏≤‚Äî‚ÄîÂõ†Ê≠§‰∏§‰∏™ÈÉΩÊúâ strnum Â±ûÊÄßÔºå
ÊâÄ‰ª•ÊâßË°åÁöÑÊòØÊï∞ÂÄºÊØîËæÉ„ÄÇÊØîËæÉËßÑÂàôÁöÑÁõÆÁöÑ‰ª•ÂèäÊï∞ÂÄºÂ≠ó‰∏≤ÁöÑ‰ΩøÁî®ÊòØËØïÂõæ‰∫ßÁîü‚ÄúÊúÄÂ∞ëÊÉäËÆ∂‚ÄùÁöÑË°å‰∏∫ÔºåÂêåÊó∂Ëøò‰ºö‚ÄúÂÅöÊ≠£Á°ÆÁöÑ‰∫ã‚Äù„ÄÇ

Â≠ó‰∏≤ÊØîËæÉ‰∏éÊ≠£ÂàôË°®ËææÂºèÊØîËæÉÊòØÈùûÂ∏∏‰∏çÂêåÁöÑÔºåÂ¶ÇÔºö

@example
x == "foo"
@end example

@noindent
ÂÖ∑ÊúâÂÄº 1ÔºåÊàñËÄÖ trueÔºåÂ¶ÇÊûúÂèòÈáè @code{x} Á°ÆÂÆû‰∏∫ @samp{foo} „ÄÇÁõ∏ÂèçÔºö

@example
x ~ /foo/
@end example

@noindent
ÂàôÂΩì @code{x} ÂåÖÂê´ @samp{foo} Êó∂‰∏∫ 1ÔºåÂ¶Ç @code{"Oh, what a fool am I!"}ÔºàÂ§©ÂïäÔºåÊàëÁúüÊòØË†¢ÂæóË¶ÅÊ≠ªÔºÅÔºâ

@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@samp{~} ‰∏é @samp{!~} Âè≥ËæπÁöÑÊìç‰ΩúÊï∞ÂèØ‰ª•ÊòØÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà@code{/}@dots{}@code{/}ÔºâÔºå
‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑË°®ËææÂºè„ÄÇÂú®ÂêéÈù¢ÁöÑÊÉÖÂÜµ‰∏ãÔºåË°®ËææÂºèÁöÑÂÄº‰ºöÂΩìÊàêÂ≠ó‰∏≤ÔºåÂπ∂‰Ωú‰∏∫Âä®ÊÄÅÊ≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @ref{Regexp Usage}Ôºå
‰∏é @ref{Computed Regexps}Ôºâ„ÄÇ

@cindex @command{awk}, regexp constants and
@cindex regexp constants
Â∏¶ÊñúÊù†ÁöÑÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÂÖ∂Êú¨Ë∫´‰πüÊòØ‰∏Ä‰∏™Ë°®ËææÂºè„ÄÇ@code{/@var{regexp}/} ÊòØ‰∏ãÈù¢ÊØîËæÉÊìç‰ΩúË°®ËææÂºèÁöÑÁº©ÂÜôÂΩ¢ÂºèÔºö

@example
$0 ~ /@var{regexp}/
@end example

@code{/foo/} @emph{‰∏çÊòØ} @samp{$0 ~ /foo/} ÁöÑÁº©ÂÜôÁöÑ‰∏Ä‰∏™ÁâπÊÆäÂú∞ÊñπÂ∞±ÊòØÂÆÉÂú®Êìç‰ΩúÁ¨¶ @samp{~} ÊàñËÄÖ @samp{!~} ÁöÑÂè≥Ëæπ„ÄÇ
Êü•Áúã @ref{Using Constant Regexps}ÔºåÂú®Ê≠§Â§Ñ‰ºöÊúâÊõ¥ËØ¶ÁªÜÁöÑËÆ®ËÆ∫„ÄÇ

@node POSIX String Comparison
@subsubsection POSIX ‰∏≠ÁöÑÂ≠ó‰∏≤ÊØîËæÉËßÑÂàô

POSIX Ê†áÂáÜËßÑÂÆöÔºåÂ≠ó‰∏≤ÁöÑÊØîËæÉÊòØÊåâÁÖßÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆÁöÑ@dfn{ÂàÜÁ±ªÈ°∫Â∫è}ËøõË°åÁöÑ„ÄÇËøô‰∏™È°∫Â∫èÂ≠óÁ¨¶ÊòØÊåâÁÖßÊú¨ËØ≠Ë®ÄËÆæÁΩÆÁªèËøáÊéíÂ∫èÁöÑ
ÔºàÊõ¥Â§öÁöÑËÆ®ËÆ∫ÂèØÊü•Áúã @ref{Locales}Ôºâ„ÄÇ
Ëøô‰∏™È°∫Â∫èÂÆåÂÖ®‰∏çÂêå‰∫éËøõË°åÁõ¥Êé•ÁöÑÂ≠óÁ¨¶ÂØπÂ≠óÁ¨¶ÁöÑÊØîËæÉÊâÄÂæóÂà∞ÁöÑÁªìÊûú„ÄÇ 
@footnote{‰ªéÊäÄÊúØ‰∏äËØ¥ÔºåÂ≠ó‰∏≤ÊØîËæÉÂ∫îËØ•ÁöÑË°å‰∏∫Â∫îËØ•‰∏ÄËá¥ÔºåÂ∞±Â•ΩÂÉèÂ≠ó‰∏≤ÁöÑÁöÑÊØîËæÉ‰ΩøÁî®ÁöÑÊòØ C @code{strcoll()} ÂáΩÊï∞‰∏ÄÊ†∑„ÄÇ}

Áî±‰∫éËøôÊ†∑ÁöÑË°å‰∏∫‰∏éÊó¢ÊúâÁöÑÂÆûË∑µÊúâÂ∑®Â§ßÁöÑÂ∑ÆÂºÇÔºå@command{gawk} Âè™Âú® POSIX Ê®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÂÆûÁé∞‰∫Ü„ÄÇ
‰∏ãÈù¢ÁöÑ‰æãÂ≠êËß£Èáä‰∫ÜÂú® @code{en_US.UTF-8} ËØ≠Ë®ÄËÆæÁΩÆ‰∏ãÁöÑÂ∑ÆÂºÇÔºö

@example
$ @kbd{gawk 'BEGIN @{ printf("ABC < abc = %s\n",}
>                     @kbd{("ABC" < "abc" ? "TRUE" : "FALSE")) @}'}
@print{} ABC < abc = TRUE
$ @kbd{gawk --posix 'BEGIN @{ printf("ABC < abc = %s\n",}
>                             @kbd{("ABC" < "abc" ? "TRUE" : "FALSE")) @}'}
@print{} ABC < abc = FALSE
@end example


@node Boolean Ops
@subsection Â∏ÉÊûóË°®ËææÂºè
@cindex and Boolean-logic operator
@cindex or Boolean-logic operator
@cindex not Boolean-logic operator
@cindex expressions, Boolean
@cindex Boolean expressions
@cindex operators, Boolean, See Boolean expressions
@cindex Boolean operators, See Boolean expressions
@cindex logical operators, See Boolean expressions
@cindex operators, logical, See Boolean expressions

@dfn{Â∏ÉÊûóË°®ËææÂºè}ÊòØÁî±ÊØîËæÉË°®ËææÂºèÊàñËÄÖÊòØÂåπÈÖçË°®ËææÂºèÁªÑÊàêÔºå
Âà©Áî®Êìç‰Ωú‚Äúor‚ÄùÔºà@samp{||}ÔºâÔºå‚Äúand‚ÄùÔºà@samp{&&}ÔºâÔºåËøòÊúâ‚Äúnot‚ÄùÔºà@samp{!}ÔºâÁªÑÂêàËÄåÊàêÔºåÂπ∂Âà©Áî®Êã¨Âè∑Êù•ÊéßÂà∂Ë°®ËææÂºèÁöÑÂµåÂÖ•„ÄÇ
Â∏ÉÊûóË°®ËææÂºèÁöÑÁúüÂÄºÈÄöËøáËÆ°ÁÆóÁªÑÊàêËØ•Ë°®ËææÂºèÁöÑÁõ¥ÂÄºÁªÑÂêàËÄåÂæó„ÄÇÂ∏ÉÊûóË°®ËææÂºè‰πüÁß∞‰∏∫@dfn{ÈÄªËæëË°®ËææÂºè}„ÄÇ‰∏§ËÄÖÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ

Â∏ÉÊûóË°®ËææÂºèÂèØ‰ª•Áî®Âú®ÊâÄÊúâÁöÑÊØîËæÉ‰∏éÂåπÈÖçË°®ËææÂºèÂèØ‰ª•‰ΩøÁî®ÁöÑÂú∞Êñπ„ÄÇÂèØ‰ª•Áî®Âú® @code{if}Ôºå@code{while}Ôºå@code{do} ‰∏é @code{for} ËØ≠Ë®Ä‰∏≠
ÔºàÊü•Áúã @ref{Statements}Ôºâ„ÄÇÂΩìÂ∏ÉÊûóË°®ËææÂºèÁöÑÁªìÊûúË¶ÅÂ≠òÂú®ÂèòÈáè‰∏≠ÊàñËÄÖÂú®ÁÆóÊ≥ïË°®ËææÂºè‰∏≠‰ΩøÁî®ÔºåÂàôÂÖ∂ÂÄº‰∏∫Êï∞ÂÄºÁ±ªÂûãÔºàÁúüÂàô‰∏∫ 1ÔºåÂê¶Âàô‰∏∫ 0Ôºâ„ÄÇ

ÂÖ∂Ê¨°ÔºåÊØè‰∏Ä‰∏™Â∏ÉÊûóË°®ËææÂºèÈÉΩÊòØÊúâÊïàÁöÑÊ®°ÂºèÔºåÂõ†Ê≠§‰Ω†ÂèØ‰ª•Â∞ÜÂÖ∂Áî®Âú®Ê®°Âºè‰∏≠Ôºå‰ª•ÊéßÂà∂ËßÑÂàôÁöÑÊâßË°å„ÄÇÂ∏ÉÊûóÊìç‰ΩúÁ¨¶ÊúâÂ¶Ç‰∏ãËøô‰∫õÔºö

@table @code
@item @var{boolean1} && @var{boolean2}
Â¶ÇÊûú @var{boolean1} ‰∏é @var{boolean2} ÈÉΩ‰∏∫ trueÔºåÂàôËøîÂõû true„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑËØ≠Âè•Ôºå
Â¶ÇÊûúËæìÂÖ•ËÆ∞ÂΩï‰∏≠ÂåÖÂê´ @samp{edu} ‰∏é @samp{li} ÂàôÊâìÂç∞ÂÆÉÔºö

@example
if ($0 ~ /edu/ && $0 ~ /li/) print
@end example

@cindex side effects, Boolean operators
Â≠êË°®ËææÂºè @var{boolean2} Âè™ÊúâÂú® @var{boolean1} Ê±ÇÂÄº‰∏∫ true Êó∂ÔºåÊâç‰ºöËøõË°åÊ±ÇÂÄº„ÄÇ
Â¶ÇÊûú @var{boolean2} Ë°®ËææÂºèÂåÖÂê´ÊúâÂâØ‰ΩúÁî®ÁöÑË°®ËææÂºèÔºåÂàô‰ºö‰∫ßÁîü‰∏çÂêåÁöÑÁªìÊûú„ÄÇ
Âú® @samp{$0 ~ /foo/ && ($2 == bar++)} ‰æãÂ≠ê‰∏≠ÔºåÂèòÈáè @code{bar} Âú®ËÆ∞ÂΩï‰∏≠‰∏çÂåÖÂê´Â≠ê‰∏≤ @samp{foo} Êó∂Ôºå‰∏ç‰ºöËøõË°åÈÄíÂ¢û„ÄÇ

@item @var{boolean1} || @var{boolean2}
@var{boolean1} ÊàñËÄÖ @var{boolean2} ‰πã‰∏Ä‰∏∫ true ÊòØËøîÂõû true„ÄÇ‰æãÂ¶ÇÔºå
‰∏ãÈù¢ÁöÑËØ≠Âè•‰∏≠ÔºåÂ¶ÇÊûúËæìÂÖ•‰∏≠ÂåÖÂê´ @samp{edu} @emph{ÊàñËÄÖ} @samp{li}ÔºåÂàôÊâìÂç∞Ëøô‰∫õËÆ∞ÂΩïÔºö

@example
if ($0 ~ /edu/ || $0 ~ /li/) print
@end example

Â≠êË°®ËææÂºè @var{boolean2} Âè™ÊúâÂú® @var{boolean1} ÁöÑÂÄº‰∏∫ false Êâç‰ºöËøõË°åÊ±ÇÂÄº„ÄÇ
Âõ†Ê≠§Â¶ÇÊûú @var{boolean2} Ë°®ËææÂºèÊúâÂâØ‰ΩúÁî®ÔºåÂàô‰ºöÂ∏¶Êù•‰∏çÂêåÁöÑÁªìÊûú„ÄÇÔºàÊâÄ‰ª•ÔºåËøôÈáåÁöÑÊµãËØïÂπ∂‰∏çÊòØÁúüÊ≠£Âú∞ÊµãËØïËÆ∞ÂΩï‰∏≠ÊòØÂê¶ÂåÖÂê´ @samp{edu} ‰∏é @samp{li} ‰∫åËÄÖ‚Äî‚ÄîÂè™Ë¶ÅÂåπÈÖç @samp{edu}ÔºåÊï¥‰∏™ÊµãËØïÂ∞±ÊàêÂäü„ÄÇÔºâ

@item ! @var{boolean}
Â¶ÇÊûú @var{boolean} ‰∏∫ falseÔºåÂàô‰∏∫ true„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºåÂΩì @env{HOME} ÁéØÂ¢ÉÂèòÈáè‰∏çÂ≠òÂú®ËøôÁßç‰∏çÊ≠£Â∏∏‰∫ã‰ª∂Êó∂ÔºåÂàôÊâìÂç∞ @samp{no home!}Ôºö

@example
BEGIN @{ if (! ("HOME" in ENVIRON))
            print "no home!" @}
@end example

Ôºà@code{in} Êìç‰ΩúÁ¨¶Âú® @ref{Reference to Elements}ÔºåËøôÈáåÊèèËø∞Ôºâ
@end table

@cindex short-circuit operators
@cindex operators, short-circuit
@cindex @code{&} (ampersand), @code{&&} operator
@cindex ampersand (@code{&}), @code{&&} operator
@cindex @code{|} (vertical bar), @code{||} operator
@cindex vertical bar (@code{|}), @code{||} operator
@samp{&&} ‰∏é @samp{||} Êìç‰ΩúÁ¨¶Âõ†‰∏∫ÂÆÉ‰ª¨ÁöÑÊâßË°åÊñπÂºèË¢´Áß∞‰∏∫Áü≠Ë∑ØÊìç‰ΩúÁ¨¶„ÄÇÂØπ‰∫éÂÆåÊï¥Ë°®ËææÂºèÁöÑÊ±ÇÂÄºÔºåÂ¶ÇÊûúÂÖ∂ÁªìÊûúÂè™ÈúÄË¶ÅÁî±ÂÖ∂ÈÉ®ÂàÜÊ±ÇÂÄºÂç≥ÂèØÂæóÂà∞ÔºåÂàôÊàë‰ª¨Áß∞Ëøô‰∏™Ë°®ËææÂºè @samp{Ë¢´Áü≠Ë∑Ø‰∫Ü} „ÄÇ

@cindex line continuations
Â¶ÇÊûúËØ≠Âè•Áî± @samp{&&} ÊàñËÄÖ @samp{||} ÁªìÊùüÔºåÂèØ‰ª•ÁÆÄÂçïÂú∞Âú®ÂÖ∂ÂêéËøõË°åÊç¢Ë°åÂ∞±ÂèØ‰ª•ËøõË°åÁª≠Ë°å„ÄÇ‰ΩÜÊòØÂú®ÂÖ∂ÂâçÈù¢ÔºåÂ¶ÇÊûú‰Ω†‰∏çÂä†‰∏ä‰∏Ä‰∏™ÂèçÊñúÊù†ÔºåÈÉΩ‰∏çËÉΩËøõË°åÊç¢Ë°åÔºàÊü•Áúã @ref{Statements/Lines}Ôºâ„ÄÇ

@cindex @code{!} (exclamation point), @code{!}  operator
@cindex exclamation point (@code{!}), @code{!} operator
@cindex newlines
@cindex variables, flag
@cindex flag variables
‰ΩøÁî® @samp{!} Êìç‰ΩúÁ¨¶ÁöÑË°®ËææÂºèÁöÑÂÄºË¶Å‰πàÊòØ 1ÔºåË¶Å‰πàÊòØ 0ÔºåÂàôË¶ÅËßÜÂÖ∂Â∫îÁî®ÊâÄÂú®ÁöÑË°®ËææÂºèÁöÑÂÄº„ÄÇ
@samp{!} Êìç‰ΩúÁ¨¶Âú®Â∞ÜÊ†áÂøóÂèòÈáèÁöÑÂÄº‰ªé false ËΩ¨Êç¢‰∏∫ trueÔºåÂÜçËΩ¨ÂõûÊù•ÁöÑÊÉÖÂÜµ‰∏ãÂæàÊúâÁî®„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂ∞±ÊòØ‰∏ÄÁßçÊâìÂç∞ÁâπÊÆäÊã¨Âè∑‰πãÈó¥ÁöÑË°åÁöÑÊñπÂºèÔºö

@example
$1 == "START"   @{ interested = ! interested; next @}
interested      @{ print @}
$1 == "END"     @{ interested = ! interested; next @}
@end example

@noindent
ÂèòÈáè @code{interested} ‰∏éÂÖ±‰ªñÊâÄÊúâÁöÑ @command{awk} ÂèòÈáè‰∏ÄÊ†∑Ôºå‰∏ÄÂºÄÂßãË¢´ÂàùÂßãÂåñ‰∏∫ 0ÔºåÂÖ∂Ë°®Á§∫ false„ÄÇ
ÂΩìË°åÂèëÁé∞‰∫ÜÁ¨¨‰∏Ä‰∏™Âüü‰∏∫ @samp{START} ÁöÑË°åÂêéÔºå@code{interested} ÂèòÈáèÁöÑÂÄºÂàôÂà©Áî®Áî® @samp{!} Âèò‰∏∫ true„ÄÇ
‰∏ã‰∏Ä‰∏™ËßÑÂàô‰∏≠ÔºåÂ¶ÇÊûú @code{interested} ‰∏∫ trueÔºåÂàôÊâìÂç∞Ëøô‰∫õË°å„ÄÇ
ÂΩìÂèëÁé∞Á¨¨‰∏Ä‰∏™Âüü‰∏∫ @samp{END} ÁöÑË°åÂêéÔºåÂàô @code{interested} ÂèòÈáèÂèà‰ºöËΩ¨Âõû false„ÄÇ 
@footnote{Ëøô‰∏™Á®ãÂ∫èÊúâ‰∏Ä‰∏™ BUGÔºåÂÆÉ‰ºöÊâìÂç∞‰ª• @samp{END} ÂºÄÂ§¥ÁöÑË°å„ÄÇÁúãÁúã‰Ω†ÊÄé‰πàÊù•‰øÆÂ§çÂÆÉÔºü}

@ignore
Scott Deifik points out that this program isn't robust against
bogus input data, but the point is to illustrate the use of `!',
so we'll leave well enough alone.
@end ignore

Êõ¥ÈÄöÂ∏∏ÁöÑÊòØÔºå@samp{!} Êìç‰ΩúÁ¨¶ÊòØÁî®Âú® @code{if} ‰∏é @code{while} ËØ≠Âè•‰∏≠ÔºåÂú®Ëøô‰∫õËØ≠Âè•‰∏≠ÔºåÂÜôÂê¶ÂÆöÈÄªËæëÂê´‰πâÊõ¥Âä†ÊòéÁ°ÆÔºö

@example
if (! @var{some condition} || @var{some other condition}) @{
    @var{@dots{} do whatever processing @dots{}}
@}
@end example

@cindex @code{next} statement
@quotation ÊèêÁ§∫
@code{next} ËØ≠Âè•Â∞ÜÂú® @ref{Next Statement}ÔºåËÆ®ËÆ∫„ÄÇ
@code{next} ÂëäËØâ @command{awk} Ë∑≥ËøáÂâ©‰∏ãÁöÑËßÑÂàôÔºåÂπ∂ËØªÂèñ‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÔºåÂπ∂‰ªéÊúÄÂºÄÂßãÊù•Â§ÑÁêÜÂêÑ‰∏™ËßÑÂàô„ÄÇ
ÂÜôÂú®ËøôÈáåÁöÑÂéüÂõ†ÊòØÈÅøÂÖçÊâìÂç∞Êã¨Ëµ∑ÊñáÊú¨ÁöÑ @samp{START} ‰∏é @samp{END} Ë°å„ÄÇ
@end quotation

@node Conditional Exp
@subsection Êù°‰ª∂Ë°®ËææÂºè
@cindex conditional expressions
@cindex expressions, conditional
@cindex expressions, selecting

@dfn{Êù°‰ª∂Ë°®ËææÂºè}ÊòØ‰∏ÄÁßçÊã•Êúâ‰∏â‰∏™Êìç‰ΩúÊï∞ÁöÑÁâπÊÆäÁöÑË°®ËææÂºè„ÄÇËØ•Ë°®ËææÂºèÂèØ‰ª•ËÆ©‰Ω†‰ΩøÁî®‰∏Ä‰∏™Ë°®ËææÂºèÁöÑÂÄºÔºåÂç≥ÂèØ‰ª•‰ªéÂÖ∂‰ªñ‰∏§‰∏™Ë°®ËææÂºè‰∏≠ÈÄâÊã©‰∏Ä‰∏™„ÄÇ
@command{awk} ‰∏≠ÁöÑÊù°‰ª∂Ë°®ËææÂºè‰∏é C ËØ≠Ë®Ä‰∏≠ÁöÑË°®ËææÂºè‰∏ÄÊ†∑ÔºåÂ¶Ç‰∏ãÊâÄÁ§∫Ôºö

@example
@var{selector} ? @var{if-true-exp} : @var{if-false-exp}
@end example

@noindent
ËøôÈáåÊúâ‰∏â‰∏™Â≠êË°®ËææÂºè„ÄÇÁ¨¨‰∏Ä‰∏™Â≠êË°®ËææÂºèÊòØ @var{selector}ÔºåÂÆÉÊÄªÊòØÈ¶ñÂÖàË¢´ËÆ°ÁÆó„ÄÇÂ¶ÇÊûúÁªìÊûú‰∏∫ @samp{true}ÔºàÈùûÈõ∂ÊàñËÄÖÈùûÁ©∫ÔºâÔºå
Âàô @var{if-true-exp} ÂàôÊé•ÁùÄË¢´ËÆ°ÁÆóÔºåÂÖ∂ÂÄºÂ∞ÜÊàê‰∏∫Êï¥‰∏™Ë°®ËææÂºèÁöÑÂÄº„ÄÇÂê¶ÂàôÔºå@var{if-true-exp} Ë¢´ËÆ°ÁÆóÔºåÂÖ∂ÂÄºÊàê‰∏∫Êï¥‰∏™Ë°®ËææÂºèÁöÑÂÄº„ÄÇ
‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑË°®ËææÂºè‰∫ßÁîü @code{x} ÁöÑÁªùÂØπÂÄºÔºö

@example
x >= 0 ? x : -x
@end example

@cindex side effects, conditional expressions
Êù°‰ª∂Ë°®ËææÂºèÁöÑÊØè‰∏ÄÊ¨°ËÆ°ÁÆóÔºå@var{if-true-exp} ‰∏é @var{if-false-exp} Âè™‰ºöÊúâ‰∏Ä‰∏™Ë¢´‰ΩøÁî®Ôºå
Âè¶Â§ñ‰∏Ä‰∏™Â∞±Ë¢´ÂøΩÁï•‰∫Ü„ÄÇÂ¶ÇÊûúË°®ËææÂºè‰∏≠ÊúâÂâØ‰ΩúÁî®ÔºåËøôÂ∞±ÂèòÂæóÁõ∏ÂΩìÈáçË¶Å„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÊù°‰ª∂Ë°®ËææÂºèÊèêÂèñÊï∞ÁªÑ @code{a} ÊàñËÄÖ @code{b} ÁöÑÂÖÉÁ¥† @code{i}Ôºå
Âπ∂ÈÄíÂ¢û @code{i}Ôºö

@example
x == y ? a[i++] : b[i++]
@end example

@noindent
Ëøô‰øùËØÅ‰∫Ü @code{i} Âè™‰ºöË¢´ÈÄíÂ¢û‰∏ÄÊ¨°ÔºåÂΩìË°®ËææÂºèË¢´ËÆ°ÁÆóÊó∂Ôºå‰∏§‰∏™ÈÄíÂ¢ûË°®ËææÂºèÂè™‰ºöÊâßË°å‰∏Ä‰∏™„ÄÇ
Êü•Áúã @ref{Arrays}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑÂÖ≥‰∫éÊï∞ÁªÑÁöÑ‰ø°ÊÅØ„ÄÇ

@cindex differences in @command{awk} and @command{gawk}, line continuations
@cindex line continuations, @command{gawk}
@cindex @command{gawk}, line continuation in
‰Ωú‰∏∫‰∏Ä‰∏™Â∞èÁöÑ @command{gawk} Êâ©Â±ïÔºå‰ΩøÁî® @samp{?:} ÁöÑËØ≠Âè•ÂèØ‰ª•Âú®‰∏§‰∏™Á¨¶Âè∑‰∏≠ÁöÑ‰ªªÊÑèÂ≠óÁ¨¶Â§ÑËøõË°åÊç¢Ë°å„ÄÇ
‰ΩÜÊòØÔºåÂú®Ëøô‰∏§‰∏™Â≠óÁ¨¶ÂâçËøõË°åÊç¢Ë°åÔºåÂ¶ÇÊûú‰∏çÂä†ÂèçÊñúÊù†ÊòØ‰∏çË°åÁöÑÔºàÊü•Áúã @ref{Statements/Lines}Ôºâ„ÄÇ
Â¶Ç‰Ωï‰ΩøÁî®‰∫Ü @option{--posix} ÂèÇÊï∞ÔºàÊü•Áúã @ref{Options}ÔºâÔºåËøô‰∏™Êâ©Â±ï‰πü‰∏çË¢´Á¶ÅÁî®‰∫Ü„ÄÇ

@node Function Calls
@section ÂáΩÊï∞Ë∞ÉÁî®
@cindex function calls

@dfn{ÂáΩÊï∞}ÊòØ‰∏Ä‰∏™ÁâπÊÆäËÆ°ÁÆóËøáÁ®ãÁöÑÂêçÂ≠ó„ÄÇËøôÊ†∑‰Ω†ÂèØ‰ª•ÈÄöËøáÂêçÂ≠óÂú®Á®ãÂ∫èÁöÑ‰ªª‰Ωï‰ΩçÁΩÆÊù•ËØ∑Ê±ÇÊâßË°å„ÄÇ
‰æãÂ¶ÇÔºåÂáΩÊï∞ @code{sqrt()} ËÆ°ÁÆóÊï∞ÂÄºÁöÑÂπ≥ÊñπÊ†π„ÄÇ

@cindex functions, built-in
@command{awk} ‰∏≠ÊúâÂõ∫ÂÆöÁöÑ@dfn{ÂÜÖÂª∫}ÂáΩÊï∞ÈõÜÂêàÔºåÂÆÉ‰ª¨ÂèØ‰ª•Âú®‰ªªÊÑèÁöÑ @command{awk} Á®ãÂ∫è‰∏≠‰ΩøÁî®„ÄÇ
@code{sqrt()} Â∞±ÊòØÂÖ∂‰∏≠‰πã‰∏Ä„ÄÇÊü•Áúã @ref{Built-in}ÔºåÂÜÖÂª∫ÂáΩÊï∞ÁöÑÂàóË°®‰ª•ÂèäÂÖ∂ËØ¥Êòé„ÄÇ
Âè¶Â§ñÔºå‰Ω†‰πüÂèØ‰ª•ÂÆö‰πâÂè™Êúâ‰Ω†ÁöÑÁ®ãÂ∫è‰ΩøÁî®ÁöÑÂáΩÊï∞„ÄÇÊü•Áúã @ref{User-defined}ÔºåÊù•Ëé∑ÂèñËá™ÂÆö‰πâÂáΩÊï∞ÁöÑÊñπÊ≥ï„ÄÇ
@command{gawk} ‰πüÂèØ‰ª•ËÆ©‰Ω†‰ΩøÁî® C ÊàñËÄÖ C++ Êù•ÁºñÂÜôÂáΩÊï∞ÔºåÂπ∂Âú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠Ë∞ÉÁî®ÔºàÊü•Áúã @ref{Dynamic Extensions}Ôºâ„ÄÇ

@cindex arguments, in function calls
ÂáΩÊï∞ÁöÑ‰ΩøÁî®Â∏¶Êúâ‰∏Ä‰∏™@dfn{ÂáΩÊï∞Ë∞ÉÁî®}Ë°®ËææÂºèÔºåÂÖ∂ÂåÖÊã¨ÂáΩÊï∞ÂêçÔºåÂêéÈù¢Áõ¥Êé•Ë∑üÁùÄÂú®Êã¨Âè∑‰∏≠ÁöÑ@dfn{ÂèÇÊï∞}ÂàóË°®„ÄÇ
ÂèÇÊï∞ÊòØ‰∏∫Ë∞ÉÁî®ÂáΩÊï∞ËÆ°ÁÆóËøáÁ®ãËÄåÊèê‰æõÁöÑÂéüÂßãËµÑÊñôÁöÑË°®ËææÂºè„ÄÇÂΩìÂ§ö‰∫é‰∏Ä‰∏™ÂèÇÊï∞Êó∂ÔºåÂÆÉ‰ª¨ÂàôÈÄöËøáÈÄóÂè∑ÂàÜÈöî„ÄÇ
Â¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞ÔºåÂàôÂè™Ë¶ÅÂú®ÂáΩÊï∞ÂêçÂêéÂÜô @samp{()} Âç≥ÂèØ„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂ±ïÁé∞‰∫ÜÂ∏¶ÂèÇ‰∏é‰∏çÂ∏¶ÂèÇÁöÑÂáΩÊï∞Ë∞ÉÁî®„ÄÇ

@example
sqrt(x^2 + y^2)        @ii{one argument}
atan2(y, x)            @ii{two arguments}
rand()                 @ii{no arguments}
@end example

@cindex troubleshooting, function call syntax
@quotation Ê≥®ÊÑè
‰∏çË¶ÅÂú®ÂáΩÊï∞Âêç‰∏éÂºÄÊã¨Âè∑‰πãÈó¥ËæìÂá∫‰ªª‰ΩïÁ©∫Ê†ºÔºÅ
Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÂêçÁúãËµ∑Êù•Â∞±ÂÉèÊòØÂèòÈáèÂêç‚Äî‚ÄîÂõ†Ê≠§Á©∫Ê†º‰ºöÂØºËá¥Ë°®ËææÂºèÁúãËµ∑Êù•ÊòØÂèòÈáè‰∏éÊã¨Âè∑‰∏≠ÁöÑË°®ËææÂºèÁöÑËøûÊé•Êìç‰Ωú„ÄÇ
ËÄåÂØπ‰∫éÂÜÖÂª∫ÁöÑÂáΩÊï∞ÔºåÂú®Êã¨Âè∑‰πãÂâçÁöÑÁ©∫Ê†ºÊòØÂèØÈÄâÁöÑÔºå‰ΩÜÊòØÊúÄÂ•Ω‰∏çË¶ÅÂΩ¢ÊàêÊèíÂÖ•Á©∫Ê†ºÁöÑ‰π†ÊÉØÔºå‰ª•ÈÅøÂÖçÂú®Ë∞ÉÁî®Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑÊó∂ÂÄôÁäØÈîô„ÄÇ
@end quotation

ÊØè‰∏™ÂáΩÊï∞ÈÉΩÊúâÁâπÂÆöÁöÑÂèÇÊï∞„ÄÇ‰æãÂ¶ÇÔºå@code{sqrt()} ÂáΩÊï∞ÂøÖÈ°ªÁî®ÂçïÂèÇÊï∞Ë∞ÉÁî®ÔºåÂç≥Ë¶ÅËÆ°ÁÆóÂπ≥ÊñπÊ†πÁöÑÊï∞ÂÄºÔºö

@example
sqrt(@var{argument})
@end example

‰∏Ä‰∫õÂÜÖÂª∫ÁöÑÂáΩÊï∞Êúâ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÁöÑÂèØÈÄâÂèÇÊï∞„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõÈÇ£‰∫õÂèÇÊï∞ÔºåÂàôÂáΩÊï∞‰ºö‰ΩøÁî®ÂêàÈÄÇÁöÑÈªòËÆ§ÂÄº„ÄÇ
Êü•Áúã @ref{Built-in}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁªÜËäÇ„ÄÇÂ¶ÇÊûúÂú®Ë∞ÉÁî®Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞Êó∂ÁúÅÁï•‰∫ÜÂèÇÊï∞ÔºåÂàôËøô‰∫õÂèÇÊï∞Â∞Ü‰ºöÂΩìÊàêÊú¨ÂèòÈáèÔºàÂú®ÂÆö‰πâÂáΩÊï∞Êó∂ÁöÑÊã¨Âè∑‰∏≠ÁöÑÂèòÈáè‚Äî‚ÄîËØëËÄÖÊ≥®Ôºâ„ÄÇËøô‰∫õÊú¨Âú∞ÂèòÈáèÂΩìË¢´‰ΩøÁî®Êó∂ÔºåÂ¶ÇÊûúÈúÄË¶ÅÁöÑÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÂàôÂÖ∂‰∏∫Á©∫‰∏≤ÔºåÂ¶ÇÊûúÈúÄË¶ÅÁöÑÊï∞ÂÄºÔºåÂàôÂÖ∂ÂÄº‰∏∫ 0ÔºàÊü•Áúã @ref{User-defined}Ôºâ„ÄÇ

‰Ωú‰∏∫‰∏Ä‰∏™È´òÁ∫ßÁâπÊÄßÔºå@command{gawk} Êèê‰æõ‰∫ÜÈó¥Êé•Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÊñπÂºèÔºå
ËøôÊòØ‰∏ÄÁßçÂú®ËøêË°åÊó∂ËøõË°åÂáΩÊï∞ÈÄâÊã©ÁöÑÊñπÂºèÔºåËÄå‰∏çÊòØÂú®‰Ω†ÂÜôÁ®ãÂ∫èÁöÑÊó∂ÂÄôÂ∞±Á°ÆÂÆöË¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ
Êàë‰ª¨ÂêéÈù¢ÂÜçÂØπËøô‰∏™ËøõË°åËÆ®ËÆ∫ÔºåÂèØ‰ª•Êü•Áúã @ref{Indirect Calls}„ÄÇ

@cindex side effects, function calls
Â¶ÇÂÖ∂‰ªñÁöÑË°®ËææÂºè‰∏ÄÊ†∑ÔºåÂáΩÊï∞Ë∞ÉÁî®‰πü‰ºöÁîüÊàê‰∏Ä‰∏™ÂÄºÔºåÈÄöÂ∏∏Áß∞‰∏∫ËøîÂõûÂÄºÔºåËøô‰∏™ÂÄºÊòØÊ†πÊçÆÂáΩÊï∞ÁöÑÂèÇÊï∞ËøõË°åËÆ°ÁÆóÊâÄÂæóÂà∞ÁöÑÂÄº„ÄÇ
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@samp{sqrt(@var{argument})} ÁöÑËøîÂõûÂÄºÂ∞±ÊòØ @var{argument} ÁöÑÂπ≥ÊñπÊ†π„ÄÇ
‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰∏ÄË°åË°åÂú∞ËØªÂèñÊï∞ÂÄºÔºåÁÑ∂Êâ£ÊâìÂç∞ÂÆÉ‰ª¨ÁöÑÂπ≥ÊñπÊ†πÔºö

@example
$ @kbd{awk '@{ print "The square root of", $1, "is", sqrt($1) @}'}
@kbd{1}
@print{} The square root of 1 is 1
@kbd{3}
@print{} The square root of 3 is 1.73205
@kbd{5}
@print{} The square root of 5 is 2.23607
@kbd{Ctrl-d}
@end example

ÂáΩÊï∞Ë∞ÉÁî®ÊúâÂâØ‰ΩúÁî®Ôºå‰æãÂ¶ÇÂ∞ÜÂÄºËµãÁªô‰∏Ä‰∏™ÊåáÂÆöÁöÑÂèòÈáèÊàñËÄÖÊâßË°å I/O Êìç‰Ωú„ÄÇËøô‰∏™Á®ãÂ∫èÂ±ïÁé∞‰∫Ü @code{match()} ÂáΩÊï∞
ÔºàÊü•Áúã @ref{String Functions}ÔºâÂ¶Ç‰ΩïÊù•Êõ¥ÊîπÂèòÈáè @code{RSTART} ‰∏é @code{RLENGTH}Ôºö

@example
@{
    if (match($1, $2))
        print RSTART, RLENGTH
    else
        print "no match"
@}
@end example

@noindent
ËøôÊòØËøêË°å‰æãÂ≠êÔºö

@example
$ @kbd{awk -f matchit.awk}
@kbd{aaccdd  c+}
@print{} 3 2
@kbd{foo     bar}
@print{} no match
@kbd{abcdefg e}
@print{} 5 1
@end example

@node Precedence
@section Êìç‰ΩúÁ¨¶‰ºòÂÖàÁ∫ßÔºàÊìç‰ΩúÁ¨¶ÁöÑÂµåÂ•óÔºâ
@cindex precedence
@cindex operators, precedence

@dfn{Êìç‰ΩúÁ¨¶ÁöÑ‰ºòÂÖàÁ∫ß}ÂÜ≥ÂÆö‰∫Ü‰∏çÂêåÁöÑÊìç‰ΩúÁ¨¶Á¥ßÊé•ÁùÄÂá∫Áé∞Âú®‰∏Ä‰∏™Ë°®ËææÂºè‰∏≠Êó∂Â¶Ç‰ΩïÁªìÂêà„ÄÇ
‰æãÂ¶ÇÔºå@samp{*} ÊØî @samp{+} ÊúâÊõ¥È´òÁöÑ‰ºòÂÖàÁ∫ßÔºåÊâÄ‰ª• @samp{a + b * c} Ë°®Á§∫ÂÖàÂ∞Ü @code{b} ‰∏é @code{c} Áõ∏‰πòÔºå
ÁÑ∂ÂêéÂÜç‰∏é @code{a} Áõ∏Âä†ÔºàÂ¶Ç @samp{a + (b * c)}Ôºâ

Ê≠£Â∏∏ÁöÑÊìç‰Ωú‰ºòÂÖàÁ∫ßÂèØ‰ª•ÈÄöËøá‰ΩøÁî®Êã¨Âè∑Êù•ËøõË°åÈáçÊñ∞ÊéíÂ∫è„ÄÇ‰∏ÄÊÉ≥Âà∞‰ºòÂÖàÁ∫ßËßÑÂàôÂ∞±ÂÉèÊòØËØ¥ÔºåÊã¨Âè∑ÊòØËØ•ÊîæÂú®Âì™‰∏™‰ΩçÁΩÆ„ÄÇ‰∫ãÂÆû‰∏äÔºåÂΩìÊìç‰ΩúÁ¨¶ÁöÑÁªÑÂêà‰∏çÂ∏∏Âá∫Áé∞Êó∂Ôºå‰ΩøÁî®Êã¨Âè∑ÊÄªÊòØÂæàÊòéÊô∫ÁöÑÂÅöÊ≥ï„ÄÇÂ∞±ÁÆóÊòØÂæàÊúâÁªèÈ™åÁöÑÊìç‰ΩúÂëòÔºå‰πüÂÅ∂Â∞îÂøòËÆ∞Á°ÆÂàáÁöÑËßÑÂàôÔºåÂõ†Ê≠§‰ºöÁäØÈîôËØØ„ÄÇÊòæÂºèÂú∞‰ΩøÁî®Êã¨Âè∑ÂàôÂèØ‰ª•ÈÅøÂÖçËøôÊ†∑ÁöÑÈîôËØØ„ÄÇ

ÂΩìÊúâÁõ∏Âêå‰ºòÂÖàÁ∫ßÁöÑÊìç‰ΩúÁ¨¶Âá∫Áé∞Âú®‰∏ÄËµ∑Êó∂ÔºåÂÖàÂØπÊúÄÂ∑¶ËæπÁöÑÊìç‰ΩúÁ¨¶ËøõË°åÁªìÂêà„ÄÇÂØπ‰∫éËµãÂÄº„ÄÅÊù°‰ª∂‰ª•ÂèäÂπÇ‰πòÂÆÉ‰ª¨ÂàôÊòØ‰ª•Áõ∏ÂèçÁöÑÈ°∫Â∫èËøõË°åÁªìÂêàÁöÑ„ÄÇ
ÊâÄ‰ª• @samp{a - b + c} ÁªìÂêàÊàê @samp{(a - b) + c}Ôºå ËÄå @samp{a = b = c} ÂàôÊòØÁªìÂêàÊàê @samp{a = (b = c)}„ÄÇ

‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂâçÁºÄ‰∏ÄÂÖÉÊìç‰ΩúÁ¨¶ÂØπ‰∫é‰ºòÂÖàÁ∫ßÂπ∂‰∏çÈáçË¶ÅÔºåÂõ†‰∏∫Âè™Êúâ‰∏Ä‰∏™Ëß£ÈáäÂÆÉ‰ª¨ÁöÑÊñπÂºèÔºöÂÜÖÂ±ÇÁöÑ‰ºòÂÖà„ÄÇ
ÊâÄ‰ª•Ôºå@samp{$++i} Ë°®Á§∫ @samp{$(++i)}ÔºåËÄå @samp{++$x} ÂàôË°®Á§∫ @samp{++($x)}„ÄÇ
‰ΩÜÊòØÔºåÂΩìÂè¶‰∏Ä‰∏™Êìç‰ΩúÁ¨¶Ë∑üÁùÄÊìç‰ΩúÊï∞ÂêéÈù¢ÔºåÂàô‰∏ÄÂÖÉÊìç‰ΩúÁ¨¶ÁöÑ‰ºòÂÖàÁ∫ßÂ∞±ÈáçË¶ÅËµ∑Êù•‰∫Ü„ÄÇ
@samp{$x^2} Ë°®Á§∫ @samp{($x)^2}Ôºå‰ΩÜÊòØ @samp{-x^2} Âàô‰∏∫ @samp{-(x^2)}ÔºåÂõ†‰∏∫ @samp{-} ÁöÑ‰ºòÂÖàÁ∫ß‰Ωé‰∫é @samp{^}ÔºåËÄå @samp{$} ÂàôÊúâËæÉÈ´òÁöÑ‰ºòÂÖàÁ∫ß„ÄÇ
Âè¶Â§ñÔºåÊìç‰ΩúÁ¨¶‰πü‰∏çËÉΩ‰ª•‰∏ÄÁßçËøùÂèç‰ºòÂÖàÁ∫ßËßÑÂàôÁöÑÊñπÂºèËøõË°åÁªÑÂêàÔºå‰æãÂ¶Ç @samp{$$0++--} Âπ∂‰∏çÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑË°®ËææÂºèÔºå
Âõ†‰∏∫Á¨¨‰∏Ä‰∏™ @samp{$} ÊúâÊØî @samp{++} Êõ¥È´òÁöÑ‰ºòÂÖàÁ∫ßÔºå‰∏∫‰∫ÜÈÅøÂÖç‰∫ßÁîüÈóÆÈ¢òÔºåË°®ËææÂºèÂèØ‰ª•ÂÜôÊàê @samp{$($0++)--}„ÄÇ

‰∏ãÈù¢ÁöÑÂàóË°®ÂàóÂá∫‰∫Ü @command{awk} ÁöÑÊìç‰ΩúÁ¨¶ÔºåÂπ∂Êåâ‰ºòÂÖàÁ∫ßÁöÑÈôçÂ∫èÊéíÂ∫èÔºö

@c @asis for docbook to come out right
@table @asis
@item @code{(}@dots{}@code{)}
ÁªìÂêà„ÄÇ

@cindex @code{$} (dollar sign), @code{$} field operator
@cindex dollar sign (@code{$}), @code{$} field operator
@item @code{$}
ÂüüÂºïÁî®„ÄÇ

@cindex @code{+} (plus sign), @code{++} operator
@cindex plus sign (@code{+}), @code{++} operator
@cindex @code{-} (hyphen), @code{--} operator
@cindex hyphen (@code{-}), @code{--} operator
@item @code{++ --}
ÈÄíÂ¢ûÔºåÈÄíÂáè„ÄÇ

@cindex @code{^} (caret), @code{^} operator
@cindex caret (@code{^}), @code{^} operator
@cindex @code{*} (asterisk), @code{**} operator
@cindex asterisk (@code{*}), @code{**} operator
@item @code{^ **}
ÂπÇ‰πò„ÄÇËøô‰∏™Êìç‰ΩúÁ¨¶ÁöÑÁªìÂêàÁî±Âè≥ÂæÄÂ∑¶„ÄÇ

@cindex @code{+} (plus sign), @code{+} operator
@cindex plus sign (@code{+}), @code{+} operator
@cindex @code{-} (hyphen), @code{-} operator
@cindex hyphen (@code{-}), @code{-} operator
@cindex @code{!} (exclamation point), @code{!} operator
@cindex exclamation point (@code{!}), @code{!} operator
@item @code{+ - !}
‰∏ÄÂÖÉÂä†Ôºå‰∏ÄÂÖÉÂáèÔºå‰ª•ÂèäÈÄªËæë‚ÄúÈùû‚Äù„ÄÇ

@cindex @code{*} (asterisk), @code{*} operator, as multiplication operator
@cindex asterisk (@code{*}), @code{*} operator, as multiplication operator
@cindex @code{/} (forward slash), @code{/} operator
@cindex forward slash (@code{/}), @code{/} operator
@cindex @code{%} (percent sign), @code{%} operator
@cindex percent sign (@code{%}), @code{%} operator
@item @code{* / %}
‰πòÔºåÈô§ÔºåÂèñ‰Ωô„ÄÇ

@cindex @code{+} (plus sign), @code{+} operator
@cindex plus sign (@code{+}), @code{+} operator
@cindex @code{-} (hyphen), @code{-} operator
@cindex hyphen (@code{-}), @code{-} operator
@item @code{+ -}
Âä†ÔºåÂáè„ÄÇ

@item String concatenation
Ê≤°ÊúâÈíàÂØπÂ≠ó‰∏≤ËøûÊé•ÁöÑÁâπÂà´Á¨¶Âè∑„ÄÇÊìç‰ΩúÊï∞ÁÆÄÂçïÂú∞‰∏Ä‰∏™Êé•‰∏Ä‰∏™ËæìÂÖ•ÔºàÊü•Áúã @ref{Concatenation}Ôºâ„ÄÇ

@cindex @code{<} (left angle bracket), @code{<} operator
@cindex left angle bracket (@code{<}), @code{<} operator
@cindex @code{<} (left angle bracket), @code{<=} operator
@cindex left angle bracket (@code{<}), @code{<=} operator
@cindex @code{>} (right angle bracket), @code{>=} operator
@cindex right angle bracket (@code{>}), @code{>=} operator
@cindex @code{>} (right angle bracket), @code{>} operator
@cindex right angle bracket (@code{>}), @code{>} operator
@cindex @code{=} (equals sign), @code{==} operator
@cindex equals sign (@code{=}), @code{==} operator
@cindex @code{!} (exclamation point), @code{!=} operator
@cindex exclamation point (@code{!}), @code{!=} operator
@cindex @code{>} (right angle bracket), @code{>>} operator (I/O)
@cindex right angle bracket (@code{>}), @code{>>} operator (I/O)
@cindex operators, input/output
@cindex @code{|} (vertical bar), @code{|} operator (I/O)
@cindex vertical bar (@code{|}), @code{|} operator (I/O)
@cindex operators, input/output
@cindex @code{|} (vertical bar), @code{|&} operator (I/O)
@cindex vertical bar (@code{|}), @code{|&} operator (I/O)
@cindex operators, input/output
@item @code{< <= == != > >= >> | |&}
ÂÖ≥Á≥ª‰∏éÈáçÂÆöÂêë„ÄÇÂÖ≥Á≥ªÊìç‰ΩúÁ¨¶‰∏éÈáçÂÆöÂêëÊúâÁõ∏ÂêåÁöÑ‰ºòÂÖàÁ∫ß„ÄÇÂ¶Ç @samp{>} ËøôÊ†∑ÁöÑÂ≠óÁ¨¶ÔºåÂç≥‰∏∫ÂÖ≥Á≥ªÊìç‰ΩúÁ¨¶Ôºå‰πüÂèØ‰ª•‰Ωú‰∏∫ÈáçÂÆöÂêëÁ¨¶„ÄÇ‰∏ä‰∏ãÊñáÁéØÂ¢ÉÁî®Êù•Âå∫Âà´‰ΩøÁî®ÁöÑÊòØÂì™ÁßçÂê´‰πâ„ÄÇ

@cindex @code{print} statement, I/O operators in
@cindex @code{printf} statement, I/O operators in
Ê≥®ÊÑèÂú® @code{print} ‰∏é @code{printf} ËØ≠Âè•‰∏≠ÁöÑ I/O ÈáçÂÆöÂêëÔºåÊòØËØ≠Âè•Á∫ßÁöÑÔºåËÄå‰∏çÊòØË°®ËææÂºèÁ∫ßÁöÑ„ÄÇÈáçÂÆöÂêë‰∏ç‰ºö‰∫ßÁîüË°®ËææÂºèÔºå‰∏çÂèØ‰ª•Êàê‰∏∫Âà´‰∏Ä‰∏™Êìç‰ΩúÁ¨¶ÁöÑÊìç‰ΩúÊï∞„ÄÇÁªìÊûúÂ∞±ÊòØÔºå‰∏çÁî®Êã¨Âè∑ËÄåÂú®‰∏Ä‰∏™‰Ωé‰ºòÂÖàÁ∫ßÁöÑÊìç‰ΩúÁ¨¶ÈôÑËøë‰ΩøÁî®ÈáçÂÆöÂêëÊìç‰ΩúÁ¨¶ÊòØÊ≤°ÊúâÊÑè‰πâÁöÑ„ÄÇËøôÊ†∑ÁöÑÁªÑÂêà
ÔºàÂ¶Ç @samp{print foo > a ? b : c} ‰ºöÂØºËá¥ËØ≠Ê≥ïÈîôËØØ„ÄÇÊ≠£Á°ÆÂú∞ÂÜôÊ≥ïÂ∫îËØ•ÊòØ @samp{print foo > (a ? b : c)}„ÄÇ

@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@item @code{~ !~}
ÂåπÈÖç‰∏é‰∏çÂåπÈÖç„ÄÇ

@cindex @code{in} operator
@item @code{in}
Êï∞ÁªÑÊàêÂëòÂà§ÂÆö„ÄÇ

@cindex @code{&} (ampersand), @code{&&} operator
@cindex ampersand (@code{&}), @code{&&} operator
@item @code{&&}
ÈÄªËæë‚Äú‰∏é‚Äù„ÄÇ

@cindex @code{|} (vertical bar), @code{||} operator
@cindex vertical bar (@code{|}), @code{||} operator
@item @code{||}
ÈÄªËæë‚ÄúÊàñ‚Äù„ÄÇ

@cindex @code{?} (question mark), @code{?:} operator
@cindex question mark (@code{?}), @code{?:} operator
@item @code{?:}
Êù°‰ª∂ÔºåËøô‰∏™Êìç‰ΩúÁ¨¶ÁöÑÁªìÂêàÊòØ‰ªéÂè≥Âà∞Â∑¶„ÄÇ

@cindex @code{+} (plus sign), @code{+=} operator
@cindex plus sign (@code{+}), @code{+=} operator
@cindex @code{-} (hyphen), @code{-=} operator
@cindex hyphen (@code{-}), @code{-=} operator
@cindex @code{*} (asterisk), @code{*=} operator
@cindex asterisk (@code{*}), @code{*=} operator
@cindex @code{*} (asterisk), @code{**=} operator
@cindex asterisk (@code{*}), @code{**=} operator
@cindex @code{/} (forward slash), @code{/=} operator
@cindex forward slash (@code{/}), @code{/=} operator
@cindex @code{%} (percent sign), @code{%=} operator
@cindex percent sign (@code{%}), @code{%=} operator
@cindex @code{^} (caret), @code{^=} operator
@cindex caret (@code{^}), @code{^=} operator
@item @code{= += -= *= /= %= ^= **=}
ËµãÂÄºÊìç‰ΩúÁ¨¶ÔºåËøô‰∫õÊìç‰ΩúÁ¨¶ÁªìÂêàÁî±Âè≥Ëá≥Â∑¶„ÄÇ
@end table

@cindex POSIX @command{awk}, @code{**} operator and
@cindex portability, operators, not in POSIX @command{awk}
@quotation ÊèêÁ§∫
@samp{|&} „ÄÅ @samp{**} ‰∏é @samp{**=} ÈÉΩÊ≤°ÊúâÁî± POSIX ÊåáÂÆöÔºå‰∏∫‰∫ÜÁßªÊ§çÊÄßÔºåËØ∑‰∏çË¶Å‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇ
@end quotation

@node Locales
@section Âì™ÈáåÈÄ†ÊàêÂ∑ÆÂºÇ
@cindex locale, definition of

Áé∞‰ª£Êìç‰ΩúÁ≥ªÁªüÈÉΩÊúâ@dfn{Êú¨Âú∞ËØ≠Ë®Ä}ÁöÑÊ¶ÇÂøµÔºöÂç≥ÂëäËØâÁ≥ªÁªüÊú¨Âú∞Â≠óÁ¨¶ÈõÜ‰∏éËØ≠Ë®ÄÁöÑ‰∏ÄÁßçÊñπÂºè„ÄÇ
ISO C Ê†áÂáÜÂÆö‰πâ‰∫Ü‰∏ÄÁßçÈªòËÆ§ÁöÑ @code{"C"} ËØ≠Ë®ÄËÆæÁΩÆÔºåËøôÊòØ‰∏ÄÁßçÂæàÂ§ö C Á®ãÂ∫èÂëòÊâÄ‰ΩøÁî®ÁöÑ‰∏ÄÁßçÂÖ∏ÂûãÁéØÂ¢É„ÄÇ

‰ª•ÂâçÔºåËØ≠Ë®ÄËÆæÁΩÆÁî®Êù•ÂΩ±ÂìçÊ≠£ÂàôË°®ËææÂºèÁöÑÂåπÈÖçÔºå‰ΩÜÊòØÁé∞Âú®‰∫ãÊÉÖ‰∏çÂÜçÊòØËøôÊ†∑ÁöÑÔºàÊü•Áúã @ref{Ranges and Locales}Ôºâ„ÄÇ

Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰πü‰ºöÂΩ±ÂìçËÆ∞ÂΩïÁöÑÂàÜÂâ≤„ÄÇÂØπ‰∫éÊ≠£Â∏∏ÁöÑ @samp{RS = "\n"} ËøôÁßçÊÉÖÂÜµÔºå
ËØ≠Ë®ÄËÆæÁΩÆÂ§ßÂ§öÊòØ‰∏çÁõ∏ÂÖ≥ÁöÑ„ÄÇÂØπ‰∫éÂÖ∂‰ªñÂçïÂ≠óÁ¨¶ËÆ∞ÂΩïÂàÜÈöîÁ¨¶ÔºåÂú®ÁéØÂ¢ÉÂèòÈáè‰∏≠ËÆæÁΩÆ @samp{LC_ALL=C} Â∞Ü‰Ωø‰Ω†Âú®ËØªÂèñËÆ∞ÂΩïÊó∂ÊúâÊõ¥Â•ΩÁöÑÊÄßËÉΩ„ÄÇÂê¶ÂàôÔºå
@command{gawk} ÂæóË∞ÉÁî®Âá†‰∏™ÂáΩÊï∞ÔºåÈíàÂØπ@emph{ÊØè‰∏Ä‰∏™ËæìÂá∫Â≠óÁ¨¶}ËøõË°åË∞ÉÁî®Ôºå‰ª•Êü•ÊâæËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶„ÄÇ

ËØ≠Ë®ÄËÆæÁΩÆ‰πü‰ºöÂΩ±ÂìçÊó•Êúü‰∏éÊó∂Èó¥ÁöÑÊ†ºÂºèÔºàÊü•Áúã @ref{Time Functions}Ôºâ„ÄÇ
‰æãÂ¶ÇÔºåÂØπ‰∫é 2015 Âπ¥ 9 Êúà 4 Âè∑ÁöÑ‰∏ÄËà¨Áº©ÂÜôÊñπÂºèÔºåÂú®ÁæéÂõΩÊòØ‚Äú9/4/15‚Äù„ÄÇ‰ΩÜÂú®Ê¨ßÊ¥≤ÁöÑËÆ∏Â§öÂõΩÂÆ∂ÔºåÂàôÊòØ‚Äú4.9.15‚Äù„ÄÇ
Âõ†Ê≠§Ôºå@samp{%x} Âú® @code{"US"} ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÂèØËÉΩ‰∫ßÁîü @samp{9/4/15}ÔºåËÄåÂú® @code{"EUROPE"} ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÔºåÂèØËÉΩ‰∫ßÁîü @samp{4.9.15}„ÄÇ

Ê†πÊçÆ POSIX Ê†áÂáÜÔºåÂ≠ó‰∏≤ÊØîËæÉ‰πü‰ºöÂèóÂà∞ËØ≠Ë®ÄËÆæÁΩÆÁöÑÂΩ±ÂìçÔºà‰∏éÊ≠£ÂàôË°®ËææÂºèÁ±ª‰ººÔºâ„ÄÇÂÖ∑‰ΩìÁöÑÁªÜËäÇÂú® @ref{POSIX String Comparison}„ÄÇ

ÊúÄÂêéÔºåËØ≠Ë®ÄËÆæÁΩÆ‰πü‰ºöÂΩ±Âìç @command{gawk} Âú®ÂàÜÊûêËæìÂÖ•Êï∞ÊçÆÊó∂ÊâÄ‰ΩøÁî®ÁöÑÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÁ¨¶Âè∑ÁöÑÂÄº„ÄÇ
ÂÖ≥‰∫éËøô‰∏ÄÁÇπÁöÑÁªÜËäÇÂàôÂú® @ref{Conversion}„ÄÇ

@node Expressions Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Ë°®ËææÂºèÊòØÁ®ãÂ∫è‰∏≠Âü∫Êú¨ÁöÑËÆ°ÁÆóÂÖÉÁ¥†„ÄÇÂÆÉ‰ª¨Áî±Â∏∏Èáè„ÄÅÂèòÈáè„ÄÅÂáΩÊï∞Ë∞ÉÁî®‰ª•ÂèäÁî®Êìç‰ΩúÁ¨¶ÁªÑÂêàËµ∑Êù•ÁöÑÂêÑÁßçÂÄºÁªÑÊàê„ÄÇ

@item
@command{awk} Êèê‰æõ‰∏âÁßçÂ∏∏ÈáèÔºöÊï∞ÂÄºÂ∏∏ÈáèÔºåÂ≠ó‰∏≤Â∏∏Èáè‰ª•ÂèäÊ≠£ÂàôË°®ËææÂºèÂ∏∏Èáè„ÄÇ
@command{gawk} ÂèØ‰ª•ËÆ©‰Ω†‰ª•ÂÖ´ËøõÂà∂‰ª•ÂèäÂçÅÂÖ≠ËøõÂà∂ÁöÑÊñπÂºèÊù•ÊåáÂÆöÊï∞ÂÄºÂ∏∏ÈáèÔºàÁõ∏ÂÖ≥ÁöÑÂü∫Êï∞‰∏∫ 8 ‰∏é 16ÔºâÔºå‰πüÂèØ‰ª•‰ª•ÂçÅËøõÂà∂ÊñπÂºèËøõË°åÊåáÂÆöÔºàÂü∫Êï∞‰∏∫ 10Ôºâ„ÄÇ
Âú®ÁâπÂÆöÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÔºåÂçïÁã¨ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºå
Â¶Ç @code{/foo/} ‰∏é @samp{$0 ~ /foo/} Êúâ‰∏ÄÊ†∑ÁöÑÂê´‰πâ„ÄÇ

@item
ÂèòÈáèÂú®ËÆ°ÁÆóÁöÑËøáÁ®ã‰∏≠ÊåÅÊúâÂÄº„ÄÇÊúâ‰∏Ä‰∫õÂÜÖÁΩÆÂèòÈáèÊù•Êèê‰æõ @command{awk} Á®ãÂ∫èÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºåËøòÊúâ‰∏Ä‰∫õÂèòÈáèÁî®Êù•ÊéßÂà∂ @command{awk} ÁöÑË°å‰∏∫„ÄÇ

@item
Âú® @command{awk} ÈúÄË¶ÅÁöÑÊó∂ÂÄôÔºåÊï∞ÂÄº‰ºöËá™Âä®Âú∞ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÔºåÂ≠ó‰∏≤‰πü‰ºöËΩ¨Êç¢‰∏∫Êï∞ÂÄº„ÄÇ
Êï∞ÂÄºËΩ¨Êç¢ÁöÑÊñπÂºèÂ∞±Â•ΩÂÉèÈÄöËøá‰ª• @code{CONVFMT} Ê†ºÂºèÊù•Ë∞ÉÁî® @code{sprintf()} ËøõË°åÊ†ºÂºèÂåñ‰∏ÄÊ†∑„ÄÇËØ≠Ë®ÄËÆæÁΩÆÂèØ‰ª•ÂΩ±ÂìçËΩ¨Êç¢„ÄÇ

@item
@command{awk} Êèê‰æõ‰∫ÜÂ∏∏Áî®ÁöÑÁÆóÊúØÊìç‰ΩúÁ¨¶ÔºàÂä†„ÄÅÂáè„ÄÅ‰πò„ÄÅÈô§ÔºåÂèñÊ®°ÔºâÔºåËøòÊúâ‰∏ÄÂÖÉÁöÑÂä†‰∏éÂáè„ÄÇÂêåÊó∂‰πüÊèê‰æõÊØîËæÉÊìç‰ΩúÁ¨¶ÔºåÂ∏ÉÊûóÊìç‰ΩúÁ¨¶Ôºå‰ª•ÂèäÊï∞ÁªÑÂÖÉÁ¥†ÊàêÂëòÊµãËØïÊìç‰ΩúÁ¨¶ÂíåÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÊìç‰ΩúÁ¨¶„ÄÇÂ≠ó‰∏≤ËøûÊé•ÈÄöËøáÂ∞ÜÈÄöËøáÁÆÄÂçïÂú∞Â∞ÜË°®ËææÂºèÈ°∫Â∫èÊéíÊîæÊù•ÂÆåÊàêÔºåËÄå‰∏çÈúÄË¶ÅÊòæÂºèÁöÑÊìç‰ΩúÁ¨¶„ÄÇ
‰∏âÂÖÉÊìç‰ΩúÁ¨¶ @samp{?:} ÂàôÊèê‰æõ‰∫ÜÂú®Ë°®ËææÂºè‰∏≠ËøõË°å‚Äúif-else‚ÄùÁöÑÊµãËØï„ÄÇ

@item
ËµãÂÄºÊìç‰ΩúÁ¨¶‰∏∫ÈÄöÁî®ÁöÑÁÆóÊúØÊìç‰ΩúÊèê‰æõ‰∫ÜÊñπ‰æøÁöÑÁº©Áï•„ÄÇ

@item
Âú® @command{awk} ‰∏≠ÔºåÂ¶ÇÊûúÈùûÈõ∂@emph{ÊàñËÄÖ}ÈùûÁ©∫ÔºåÂàôË¢´ËÆ§‰∏∫ÊòØ trueÔºåÂê¶Âàô‰∏∫ false„ÄÇ

@item
ÂèòÈáèÁöÑÁ±ªÂûã‰æùËµñ‰∫éËµãÂÄºÔºåÂπ∂‰∏îÂú®ÁîüÂëΩÊúü‰∏≠ÂèØ‰ª•ÂèòÂåñ„ÄÇÁ±ªÂûãÂÜ≥ÂÆö‰∫ÜÂÆÉÂú®ÊØîËæÉ‰∏≠ÁöÑË°å‰∏∫ÔºàÊòØ‰ª•Â≠ó‰∏≤ÊñπÂºèËøòÊòØ‰ª•Êï∞ÂÄºÊñπÂºèËøõË°åÔºâ„ÄÇ

@item
ÂáΩÊï∞Ë∞ÉÁî®ÁöÑËøîÂõûÂÄº ÂèØ‰ª•ÂÅö‰∏∫‰∏Ä‰∏™Êõ¥Â§ßÁöÑË°®ËææÂºèÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÁî®‰∫éÂú®Ë∞ÉÁî®ÂáΩÊï∞Êó∂ÂêëÂáΩÊï∞‰º†ÈÄíÁöÑÂèÇÊï∞ÁöÑË°®ËææÂºè‰ºöÂú®Ë∞ÉÁî®‰πãÂâçËøõË°åÊ±ÇÂÄº„ÄÇ
@command{awk} Âç≥Êèê‰æõ‰∫ÜÂÜÖÁΩÆÁöÑÂáΩÊï∞Ôºå‰πüÊèê‰æõÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºåÁõ∏ÂÖ≥ÁöÑÁªÜËäÇÂú® @ref{Functions}„ÄÇ

@item
Êìç‰ΩúÁ¨¶ÁöÑ‰ºòÂÖàÁ∫ßÊåáÂÆö‰∫ÜÊìç‰ΩúÊâßË°åÁöÑÈ°∫Â∫èÔºåÈô§Èùû‰ΩøÁî®‰∫ÜÊã¨Âè∑Êù•Êõ¥Êîπ„ÄÇ
@command{awk} ÁöÑÊìç‰ΩúÁ¨¶‰ºòÂÖàÁ∫ß‰∏é C ‰∏≠ÁöÑ‰ºòÂÖàÁ∫ßÂÖºÂÆπ„ÄÇ

@item
ËØ≠Ë®ÄËÆæÁΩÆÂèØ‰ª•ÂΩ±Âìç @command{awk} Á®ãÂ∫èËæìÂá∫Êï∞ÊçÆÁöÑÊ†ºÂºèÔºåÂÅ∂Â∞î‰πüÂΩ±Âìç‰Ωú‰∏∫Êï∞ÊçÆËæìÂÖ•ÁöÑÊ†ºÂºè„ÄÇ

@end itemize


@node Patterns and Actions
@chapter Ê®°Âºè„ÄÅÂä®‰Ωú‰∏éÂèòÈáè
@cindex patterns

Â¶ÇÊàë‰ª¨Â∑≤ÁªèÁúãÂà∞ÁöÑÔºåÊØè‰∏Ä‰∏™ @command{awk} ËØ≠Âè•ÈÉΩÁî±‰∏éÊ®°ÂºèÂèä‰∏éÂÖ∂ÂÖ≥ËÅîÁöÑÂä®‰ΩúÁªÑÊàê„ÄÇÊú¨@value{CHAPTER}Ëø∞Â¶Ç‰ΩïÊù•ÂàõÂª∫Ê®°Âºè‰∏éÂä®‰ΩúÔºåÂåÖÊã¨‰Ω†Âú®Âä®‰Ωú‰∏≠ÂèØ‰ª•ÂÅöÁöÑÊìç‰ΩúÁöÑÁ±ªÂûãÔºå
‰ª•Âèä @command{awk} ÁöÑÈ¢ÑÂÆö‰πâÂèòÈáè„ÄÇ

‚ÄúÊ®°Âºè-Âä®‰Ωú‚ÄùËßÑÂàô‰ª•ÂèäÂèØÂú®Âä®‰Ωú‰∏≠‰ΩøÁî®ÁöÑËØ≠Âè•ÁªÑÊàê‰∫Ü @command{awk} ÁºñÁ®ãÁöÑÊ†∏ÂøÉ„ÄÇÂú®‰∏ÄÂÆöÊÑè‰πâ‰∏äÔºåÂà∞Ê≠§‰∏∫Ê≠¢ÊâÄÊ∂âÂèäÁöÑÂÜÖÂÆπÊòØÂª∫Á´ãÁ®ãÂ∫èÁöÑÂü∫Á°Ä„ÄÇÁõÆÂâçÂèØ‰ª•ÂºÑ‰∫õÊúâÁî®ÁöÑÊó∂ÂÄô‰∫Ü„ÄÇ

@menu
* Pattern Overview::            What goes into a pattern.
* Using Shell Variables::       How to use shell variables with @command{awk}.
* Action Overview::             What goes into an action.
* Statements::                  Describes the various control statements in
                                detail.
* Built-in Variables::          Summarizes the predefined variables.
* Pattern Action Summary::      Patterns and Actions summary.
@end menu

@node Pattern Overview
@section Ê®°ÂºèÂÖÉÁ¥†

@menu
* Regexp Patterns::             Using regexps as patterns.
* Expression Patterns::         Any expression can be used as a pattern.
* Ranges::                      Pairs of patterns specify record ranges.
* BEGIN/END::                   Specifying initialization and cleanup rules.
* BEGINFILE/ENDFILE::           Two special patterns for advanced control.
* Empty::                       The empty pattern, which matches every record.
@end menu

@cindex patterns, types of
Âú® @command{awk} ‰∏≠ÁöÑÊ®°ÂºèÊéßÂà∂ÁùÄËßÑÂàôÁöÑÊâßË°åÔºåÂΩìÊ®°ÂºèÂåπÈÖçÂΩìÂâçÁöÑËæìÂÖ•ËÆ∞ÂΩïÊó∂ÔºåÂ∞±ÊâßË°åÂÆÉÁöÑËßÑÂàô„ÄÇ‰∏ãÈù¢ÊÄªÁªì‰∫Ü @command{awk} Ê®°ÂºèÁöÑÁ±ªÂûãÔºö

@table @code
@item /@var{regular expression}/
Ê≠£ÂàôË°®ËææÂºè„ÄÇÂΩìËæìÂÖ•ËÆ∞ÂΩïÁöÑÊñáÊú¨ÈÄÇÈÖç‰∫éÊ≠£ÂàôË°®ËææÂºèÂàôÂåπÈÖç„ÄÇÔºàÊü•Áúã @ref{Regexp}„ÄÇÔºâ

@item @var{expression}
ÂçïÁã¨ÁöÑË°®ËææÂºè„ÄÇÂΩìËøô‰∏™Ë°®ËææÂºèÁöÑÂÄº‰∏∫ÈùûÈõ∂ÔºàÂ¶ÇÊûúÊòØÊï∞ÂÄºÁöÑËØùÔºâÊàñËÄÖÈùûÁ©∫ÔºàÂ¶ÇÊûúÊòØÂ≠ó‰∏≤ÁöÑËØùÔºâÂàôÂåπÈÖç„ÄÇÔºàÊü•Áúã @ref{Expression Patterns}„ÄÇÔºâ

@item @var{begpat}, @var{endpat}
‰∏ÄÂØπÁî±ÈÄóÂè∑ÂàÜÈöîÁöÑÊ®°ÂºèÔºåÊåáÂÆö‰∫ÜËÆ∞ÂΩïÁöÑ@dfn{ËåÉÂõ¥}„ÄÇ
ËåÉÂõ¥ÂåÖÊã¨ÂåπÈÖç @var{begpat} ÁöÑÂºÄÂßãÁöÑËÆ∞ÂΩï‰ª•ÂèäÊúÄÂêé‰∏Ä‰∏™ÂåπÈÖç @var{endpat} ÁöÑËÆ∞ÂΩïÔºàÊü•Áúã @ref{Ranges}„ÄÇÔºâ

@item BEGIN
@itemx END
ÊåáÂÆö @command{awk} Á®ãÂ∫èÂºÄÂßã‰∏éÁªìÊùüË°å‰∏∫ÁöÑÁâπÊÆäÊ®°Âºè„ÄÇÔºàÊü•Áúã @ref{BEGIN/END}„ÄÇÔºâ

@item BEGINFILE
@itemx ENDFILE
ÈíàÂØπÊØè‰∏™Êñá‰ª∂‰∏∫Âü∫Á°ÄÁöÑÂú®ÂºÄÂßã‰∏éÁªìÊùü‰∏≠ÊâßË°åÁöÑÂä®‰ΩúÁöÑÁâπÊÆäÊ®°Âºè„ÄÇÔºàÊü•Áúã @ref{BEGINFILE/ENDFILE}„ÄÇÔºâ

@item @var{empty}
Á©∫Ê®°ÂºèÂåπÈÖçÊØè‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇÔºàÊü•Áúã @ref{Empty}„ÄÇÔºâ
@end table

@node Regexp Patterns
@subsection ‰ª•Ê≠£ÂàôË°®ËææÂºè‰∏∫Ê®°Âºè
@cindex patterns, expressions as
@cindex regular expressions, as patterns

Ê≠£ÂàôË°®ËææÂºèÊòØÊú¨@value{DOCUMENT}‰∏≠Âá∫Áé∞ÁöÑÁ¨¨‰∏ÄÁßçÊ®°Âºè„ÄÇÊ≠§Á±ªÊ®°ÂºèÂè™ÊòØÁÆÄÂçïÁöÑÂ§Ñ‰∫éÊ®°ÂºèËßÑÂàô‰∏≠ÁöÑÊ≠£ÂàôË°®ËææÂ∑•Â∏∏Èáè„ÄÇ
ÂÆÉË°®Á§∫ @samp{$0 ~ /@var{pattern}/}„ÄÇÂΩìËæìÂá∫ËÆ∞ÂΩïÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÊòØÔºåÂàôËßÑÂàôÂåπÈÖç„ÄÇÂ¶ÇÔºö

@example
/foo|bar|baz/  @{ buzzwords++ @}
END            @{ print buzzwords, "buzzwords seen" @}
@end example

@node Expression Patterns
@subsection ‰ª•Ë°®ËææÂºè‰∏∫Ê®°Âºè
@cindex expressions, as patterns

@command{awk} Ë°®ËææÊòØÊúâÊïàÁöÑ @command{awk} Ê®°Âºè„ÄÇÂ¶ÇÊûúË°®ËææÂºèÁöÑÂÄºÊòØÈùûÈõ∂ÔºàÂ¶ÇÊûúÁªìÊûú‰∏∫Êï∞ÂÄºÔºâÊàñËÄÖÈùûÁ©∫ÔºàÂ¶ÇÊûúÁªìÊûú‰∏∫Â≠ó‰∏≤ÔºâÂ∞±Ë°®Á§∫Ê®°ÂºèÊòØÂåπÈÖçÁöÑ„ÄÇË°®ËææÂºèÊØèÊ¨°ÂåπÈÖçËæìÂÖ•ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÈÉΩÈúÄË¶ÅÈáçÊñ∞ËÆ°ÁÆó‰∏ÄÊ¨°„ÄÇÂ¶ÇÊûúË°®ËææÂºè‰ΩøÁî®ÁöÑÊòØÂüüÔºå
Â¶Ç @code{$1}ÔºåÂàôÂÆÉÁöÑÂÄºÁõ¥Êé•‰æùËµñ‰∫éÊñ∞ÁöÑËæìÂÖ•ËÆ∞ÂΩïÊñáÊú¨Ôºå‰∏çÁÑ∂ÔºåÂÆÉÂ∞±Âè™‰æùËµñ‰∫é @command{awk} Á®ãÂ∫èÂà∞ÁõÆÂâç‰∏∫Ê≠¢Â∑≤ÁªèÊâßË°åÁöÑÁªìÊûú„ÄÇ

@cindex comparison expressions, as patterns
@cindex patterns, comparison expressions as
‰ΩøÁî®Âú® @ref{Typing and Comparison}ÔºåÊèèËø∞ÁöÑÊØîËæÉÊìç‰ΩúÁ¨¶ÁöÑÊØîËæÉË°®ËææÂºèÔºåÊòØÂæàÂ∏∏Áî®ÁöÑÊ®°ÂºèÁ±ªÂûã„ÄÇ
Ê≠£ÂàôË°®ËææÂºèÂåπÈÖç‰∏é‰∏çÂåπÈÖç‰πüÊòØÈùûÂ∏∏Â∏∏Áî®ÁöÑË°®ËææÂºè„ÄÇ
@samp{~} ‰∏é @samp{!~} Êìç‰ΩúÁ¨¶ÁöÑÂ∑¶ËæπÁöÑÊìç‰ΩúÊï∞ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤„ÄÇÂè≥ÊâãÁöÑÊìç‰ΩúÊï∞Ë¶Å‰πàÊòØ‰∏Ä‰∏™Ë¢´ÊñúÊù†ÂåÖ‰ΩèÁöÑÂ∏∏ÈáèÊ≠£ÂàôË°®ËææÂºèÔºà@code{/@var{regexp}/}ÔºâÔºå
Ë¶Å‰πàÊòØ‰∏Ä‰∏™Âä®ÊÄÅÁöÑÊ≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @ref{Computed Regexps}Ôºâ„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÊâìÂç∞ÂÖ∂Á¨¨‰∏Ä‰∏™Âüü‰∏∫ @samp{li} ÁöÑÊâÄÊúâËÆ∞ÂΩïÁöÑÁ¨¨‰∫å‰∏™ÂüüÔºö

@cindex @code{/} (forward slash), patterns and
@cindex forward slash (@code{/}), patterns and
@cindex @code{~} (tilde), @code{~} operator
@cindex tilde (@code{~}), @code{~} operator
@cindex @code{!} (exclamation point), @code{!~} operator
@cindex exclamation point (@code{!}), @code{!~} operator
@example
$ @kbd{awk '$1 == "li" @{ print $2 @}' mail-list}
@end example

@noindent
ÔºàËøôÈáåÊ≤°ÊúâËæìÂá∫ÔºåÂõ†‰∏∫Ê≤°Êúâ‰∫∫ÁöÑÂêçÂ≠ó‰∏∫ @samp{li}Ôºâ„ÄÇ‰∏é‰∏ãÈù¢ÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÁõ∏ÊØîÔºåÂàô‰ºöÂåπÈÖç‰ªªÊÑèÁöÑËÆ∞ÂΩï‰∏≠Á¨¨‰∏Ä‰∏™Âüü‰∏≠ÂåÖÂê´ @samp{li} ÁöÑËÆ∞ÂΩïÔºö

@example
$ @kbd{awk '$1 ~ /li/ @{ print $2 @}' mail-list}
@print{} 555-5553
@print{} 555-6699
@end example

@cindex regexp constants, as patterns
@cindex patterns, regexp constants as
Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÊòØË°®ËææÂºèÊ®°ÂºèÁöÑ‰∏ÄÁßçÁâπ‰æã„ÄÇË°®ËææÂºè @code{/li/} ‰∏≠ÔºåÂ¶ÇÊûú @samp{li} Âá∫Áé∞Âú®ÂΩìÂâçÁöÑËÆ∞ÂΩï‰∏≠ÔºåÂàôÂÖ∂ÂÄº‰∏∫ 1„ÄÇ
Âõ†Ê≠§Ôºå‰Ωú‰∏∫Ê®°ÂºèÔºå@code{/li/} ÂåπÈÖç‰ªªÊÑèÁöÑÂåÖÂê´ @samp{li} ÁöÑËÆ∞ÂΩï„ÄÇ

@cindex Boolean expressions, as patterns
Â∏ÉÊûóË°®ËææÂºè‰πüÊòØÂ∏∏Áî®ÁöÑÊ®°Âºè„ÄÇÊ®°ÂºèÊòØÂê¶ÂåπÈÖçËæìÂÖ•ËÆ∞ÂΩïÔºåÂàô‰æùËµñ‰∫éÂÖ∂Â≠êË°®ËææÂºèÊòØÂê¶ÂåπÈÖç„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÊâìÂç∞ @file{mail-list}  Êñá‰ª∂‰∏≠Ôºå
Êó¢ÂåÖÂê´ @samp{edu} ‰πüÂåÖÂê´ @samp{li} ÁöÑËÆ∞ÂΩïÔºö

@example
$ @kbd{awk '/edu/ && /li/' mail-list}
@print{} Samuel       555-3430     samuel.lanceolis@@shu.edu        A
@end example

‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÊâìÂç∞ @file{mail-list} Êñá‰ª∂‰∏≠ÂåÖÂê´ @samp{edu} @emph{ÊàñËÄÖ} @samp{li} ÔºàÊàñËÄÖÂåÖÂê´‰∫åËÄÖÔºâÁöÑÊâÄÊúâÁöÑËÆ∞ÂΩï„ÄÇ

@example
$ @kbd{awk '/edu/ || /li/' mail-list}
@print{} Amelia       555-5553     amelia.zodiacusque@@gmail.com    F
@print{} Broderick    555-0542     broderick.aliquotiens@@yahoo.com R
@print{} Fabius       555-1234     fabius.undevicesimus@@ucb.edu    F
@print{} Julie        555-6699     julie.perscrutabor@@skeeve.com   F
@print{} Samuel       555-3430     samuel.lanceolis@@shu.edu        A
@print{} Jean-Paul    555-2127     jeanpaul.campanorum@@nyu.edu     R
@end example

‰∏ãÈù¢ÁöÑÂëΩ‰ª§ÊâìÂç∞ @file{mail-list} Êñá‰ª∂‰∏≠‰∏çÂåÖÂê´‰∏≤ @samp{li} ÁöÑÊâÄÊúâËÆ∞ÂΩïÔºö

@example
$ @kbd{awk '! /li/' mail-list}
@print{} Anthony      555-3412     anthony.asserturo@@hotmail.com   A
@print{} Becky        555-7685     becky.algebrarum@@gmail.com      A
@print{} Bill         555-1675     bill.drowning@@hotmail.com       A
@print{} Camilla      555-2912     camilla.infusarum@@skynet.be     R
@print{} Fabius       555-1234     fabius.undevicesimus@@ucb.edu    F
@print{} Martin       555-6480     martin.codicibus@@hotmail.com    A
@print{} Jean-Paul    555-2127     jeanpaul.campanorum@@nyu.edu     R
@end example

@cindex @code{BEGIN} pattern, Boolean patterns and
@cindex @code{END} pattern, Boolean patterns and
@cindex @code{BEGINFILE} pattern, Boolean patterns and
@cindex @code{ENDFILE} pattern, Boolean patterns and
Âú®Ê®°Âºè‰∏≠Â∏ÉÊûóË°®ËææÂºèÊìç‰ΩúÁ¨¶ÁöÑÂ≠êË°®ËææÂºèÂèØ‰ª•ÊòØÊ≠£ÂàôË°®ËææÂºèÂ∏∏Èáè„ÄÅÊØîËæÉ„ÄÅÊàñËÄÖ‰ªªÊÑèÁöÑ @command{awk} Ë°®ËææÂºè„ÄÇ
ËåÉÂõ¥Ê®°Âºè‰∏çÊòØË°®ËææÂºèÔºåÂõ†Ê≠§ÂÆÉ‰ª¨‰∏çÂèØ‰ª•Âá∫Áé∞Âú®Â∏ÉÊûóË°®ËææÂºè‰∏≠„ÄÇËÄåÁâπÊÆäÊ®°Âºè @code{BEGIN}Ôºå@code{END}Ôºå@code{BEGINFILE} ‰∏é @code{ENDFILE}Ôºå
ÂÆÉ‰ª¨‰∏ç‰ºöÂåπÈÖç‰ªª‰ΩïÁöÑËæìÂÖ•ËÆ∞ÂΩïÔºå‰πü‰∏çÊòØË°®ËææÂºèÔºåÊâÄ‰ª•‰πü‰∏çËÉΩÂá∫Áé∞Âú®Â∏ÉÊûóÊ®°Âºè‰∏≠„ÄÇ

ÂèØ‰ª•Âá∫Áé∞Âú®Ê®°Âºè‰∏≠ÁöÑ‰∏çÂêåÁöÑÊìç‰ΩúÁ¨¶‰ºòÂÖàÁ∫ßÔºåÂú®ËøôÈáå @ref{Precedence}ÔºåËøõË°åËÆ®ËÆ∫„ÄÇ

@node Ranges
@subsection Áî®Ê®°ÂºèÊåáÂÆöËÆ∞ÂΩïËåÉÂõ¥

@cindex range patterns
@cindex patterns, ranges in
@cindex lines, matching ranges of
@cindex @code{,} (comma), in range patterns
@cindex comma (@code{,}), in range patterns
@dfn{ËåÉÂõ¥Ê®°Âºè}Áî±‰∏§‰∏™ÈÄóÂè∑ÂàÜÈöîÁöÑÊ®°ÂºèÁªÑÊàêÔºå‰ª•ËøôÊ†∑ÁöÑÊñπÂºè @samp{@var{begpat}, @var{endpat}} Âá∫Áé∞„ÄÇ
Ëøô‰∏™Áî®Êù•ÂØπËøûÁª≠ÁöÑËÆ∞ÂΩïËøõË°åÂåπÈÖç„ÄÇÁ¨¨‰∏Ä‰∏™Ê®°Âºè @var{begpat} ÊéßÂà∂ËåÉÂõ¥‰ªé‰ΩïÂ§ÑÂºÄÂßãÔºåËÄå @var{endpat} ÂàôÊéßÂà∂Âú®‰ΩïÂ§ÑÁªìÊùü„ÄÇ‰æãÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
awk '$1 == "on", $1 == "off"' myfile
@end example

@noindent
ÊâìÂç∞ @file{myfile} ‰∏≠ @samp{on} ‰∏é @samp{off} ‰∏≠ÁöÑÊâÄÊúâËÆ∞ÂΩïÔºàÂåÖÂê´Ôºâ„ÄÇ

ËåÉÂõ¥Ê®°ÂºèÈÄöËøáÂ∞ÜËæìÂÖ•ËÆ∞ÂΩï‰∏é @var{begpat} ÂºÄÂßã„ÄÇÂΩìËÆ∞ÂΩïÂåπÈÖç @var{begpat} Êó∂Ôºå
ËåÉÂõ¥Â∞±‰ºöË¢´ÊâìÂºÄÔºåÂêåÊó∂ËåÉÂõ¥Ê®°Âºè‰πü‰ºöÂåπÈÖçËøô‰∏™ËÆ∞ÂΩï„ÄÇÂè™Ë¶ÅËåÉÂõ¥Ê®°Âºè‰øùÊåÅ@dfn{ÊâìÂºÄÁä∂ÊÄÅ}ÔºåÂÖ∂Â∞±‰ºöÂåπÈÖçÊâÄËØªÂèñÁöÑÊØè‰∏™ËÆ∞ÂΩï„ÄÇ
ÂêåÊó∂ÔºåËæìÂÖ•ËÆ∞ÂΩï‰πü‰ºö‰∏é @var{endpat}  ËøõË°åÂåπÈÖçÔºå
ÂΩìÂåπÈÖçÊàêÂäüÊó∂ÔºåËåÉÂõ¥Ê®°ÂºèÂ∞±‰ºöÂú®‰∏ã‰∏ÄÊù°ËÆ∞ÂΩï‰πãÂâç@dfn{ÂÖ≥Èó≠}„ÄÇ
ÁÑ∂ÂêéÔºåËåÉÂõ¥Ê®°ÂºèÂèàÂõûÂ§¥Ê£ÄÊü• @var{begpat} ‰∏éÊØèÊù°ËÆ∞ÂΩïÁöÑÂåπÈÖçÊÉÖÂÜµ„ÄÇ

@cindex @code{if} statement, actions@comma{} changing
ÊâìÂºÄËåÉÂõ¥Ê®°ÂºèÁöÑËÆ∞ÂΩï‰∏éÂÖ≥Èó≠ËåÉÂõ¥Ê®°ÂºèÁöÑËÆ∞ÂΩïÈÉΩÂåπÈÖçËåÉÂõ¥Ê®°Âºè„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÊÉ≥Â§ÑÁêÜËøô‰∫õËÆ∞ÂΩïÔºå‰Ω†ÂèØ‰ª•Âú®ËßÑÂàô‰∏≠ÈÄöËøá @code{if} ËØ≠Âè•Êù•Âå∫ÂàÜÂÆÉ‰ª¨ÔºåÂπ∂ÂÖ≥Ê≥®‰Ω†ÊâÄÊÑüÂÖ¥Ë∂£ÁöÑËÆ∞ÂΩï‰∏ä„ÄÇ

‰πüÊúâÂèØËÉΩÂú®Âêå‰∏ÄÊù°ËÆ∞ÂΩï‰∏äÊâìÂºÄ‰∏éÂÖ≥Èó≠ËåÉÂõ¥Ê®°Âºè„ÄÇÂ¶ÇÊûúËÆ∞ÂΩïÊª°Ë∂≥‰∏§‰∏™Êù°‰ª∂ÔºåÂàôÂä®‰ΩúÂ∞±ÈíàÂØπÈÇ£Êù°ËÆ∞ÂΩïÊâßË°å„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûúÂú®‰∏§‰∏™Áõ∏ÂêåÁöÑÊ†áÂøóÈó¥ÊúâÊñáÊú¨
ÔºàÂ¶Ç @samp{%} Á¨¶Âè∑ÔºâÔºå‰∏îÊØè‰∏ÄË°åÂåÖÂê´‰∏Ä‰∏™ËøôÊ†∑ÁöÑÊ†áÂøóÔºåÂàôÂøΩÁï•Ëøô‰∏§‰∏™Á¨¶Âè∑„ÄÇÁ¨¨‰∏ÄÁßçÂ∞ùËØïÁªÑÂêàËåÉÂõ¥Ê®°ÂºèÁöÑÊñπÂºèÊòØÊèèËø∞ÂàÜÈöîÁ¨¶Ôºå
ÁÑ∂ÂêéË∑üÁùÄ @code{next} ËØ≠Âè•ÔºàËøòÊ≤°ÊúâËÆ®ËÆ∫Âà∞ÔºåËØ∑Áúã @ref{Next Statement}Ôºâ„ÄÇ
Ëøô‰ΩøÂæó @command{awk} ‰ºöË∑≥ËøáÂ§ÑÁêÜÂΩìÂâçÁöÑËÆ∞ÂΩïËÄåÂºÄÂßã‰∏ã‰∏Ä‰∏™ËæìÂÖ•ËÆ∞ÂΩï„ÄÇÁ®ãÂ∫èÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@example
/^%$/,/^%$/    @{ next @}
               @{ print @}
@end example

@noindent
@cindex lines, skipping between markers
@c @cindex flag variables
Ëøô‰∏™Á®ãÂ∫è‰∏ç‰ºöÊàêÂäüÔºåÂõ†‰∏∫ËåÉÂõ¥Ê®°ÂºèÂú®ÂåÖÂê´ @samp{%} ÁöÑÂêå‰∏ÄË°åÂºÄÂêØÂπ∂ÂÖ≥Èó≠„ÄÇ‰∏∫‰∫ÜÂÆåÊàêËøô‰∏™‰ªªÂä°ÔºåÂ∫îËØ•‰ΩøÁî®‰∏Ä‰∏™Ê†áÂøóÁöÑÊñπÂºèÊù•ÂÜôÁ®ãÂ∫èÔºö

@cindex @code{!} (exclamation point), @code{!} operator
@example
/^%$/     @{ skip = ! skip; next @}
skip == 1 @{ next @} # skip lines with `skip' set
@end example

Âú®ËåÉÂõ¥Ê®°Âºè‰∏≠ÔºåÈÄóÂè∑Ôºà@samp{,}ÔºâÂú®ÊâÄÊúâÁöÑÊìç‰ΩúÁ¨¶‰∏≠ÂÖ∑ÊúâÊúÄ‰ΩéÁöÑ‰ºòÂÖàÁ∫ßÔºàÂÆÉÂ∞ÜÂú®ÊúÄÂêéËøõË°åÊ±ÇÂÄºÔºâ„ÄÇÊâÄ‰ª•Ôºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èËØïÂõæÁî®Âè¶‰∏ÄÁßçÊõ¥ÁÆÄÂçïÁöÑÊµãËØïÊù•ÁîüÊàêËåÉÂõ¥Ê®°ÂºèÔºö

@example
echo Yes | awk '/1/,/2/ || /Yes/'
@end example

Ëøô‰∏™Á®ãÂ∫èÁöÑÊÑèÂõæÊú¨Êù•ÊòØ @samp{(/1/,/2/) || /Yes/} „ÄÇ
‰ΩÜÊòØ @command{awk} Â∞ÜÂÖ∂Ëß£ÈáäÊàê‰∫Ü @samp{/1/, (/2/ || /Yes/)}„ÄÇÊ≤°ÊúâÂäûÊ≥ïÊîπÂèòÊàñËÄÖËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåËåÉÂõ¥Ê®°Âºè‰∏çÂèØ‰ª•‰∏éÂÖ∂‰ªñÁöÑÊ®°ÂºèËøõË°åÁªÑÂêà„ÄÇ

@example
$ @kbd{echo Yes | gawk '(/1/,/2/) || /Yes/'}
@error{} gawk: cmd. line:1: (/1/,/2/) || /Yes/
@error{} gawk: cmd. line:1:           ^ syntax error
@end example

@cindex range patterns, line continuation and
‰∏Ä‰∏™ÊúâË∂£ÁöÑÁÇπÊòØÔºå POSIX ÂÖÅËÆ∏‰Ω†Âú®ËåÉÂõ¥Ê®°ÂºèÁöÑÈÄóÂè∑ÂêéÈù¢ËøõË°åÊç¢Ë°åÔºåËôΩÁÑ∂ËøôÁúãËµ∑Êù•‰∏çÈÇ£‰πàÂ•ΩÁúã„ÄÇ
@value{DARKCORNER}

@node BEGIN/END
@subsection @code{BEGIN} ‰∏é @code{END} ÁâπÊÆäÊ®°Âºè

@cindex @code{BEGIN} pattern
@cindex @code{END} pattern
Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÊâÄÊèèËø∞ÁöÑÊ®°ÂºèÈÉΩÁî®Êù•ÂåπÈÖçËæìÂÖ•ËÆ∞ÂΩï„ÄÇ@code{BEGIN} ‰∏é @code{END} ÁâπÊÆäÊ®°ÂºèÂàô‰∏çÂêå„ÄÇÂÆÉ‰ª¨‰∏∫ @command{awk} Á®ãÂ∫èÊèê‰æõÂºÄÂßã‰∏éÁªìÊùüÊìç‰Ωú„ÄÇ
@code{BEGIN} ‰∏é @code{END} ËßÑÂàôÂøÖÈ°ªÊúâÂä®‰Ωú„ÄÇËøô‰∫õËßÑÂàôÊ≤°ÊúâÈªòËÆ§ÁöÑÂä®‰ΩúÂõ†‰∏∫Âú®ËøêË°åÊó∂Ê≤°ÊúâÂΩìÂâçËÆ∞ÂΩï„ÄÇ@code{BEGIN} ‰∏é @code{END} ËßÑÂàôÂ∏∏Â∏∏Ë¢´ÈÇ£‰∫õËÄÅÁöÑ @command{awk} Á®ãÂ∫èÂëòÁß∞‰∏∫‚Äú@code{BEGIN} ‰∏é @code{END} Âùó‚Äù„ÄÇ

@menu
* Using BEGIN/END::             How and why to use BEGIN/END rules.
* I/O And BEGIN/END::           I/O issues in BEGIN/END rules.
@end menu

@node Using BEGIN/END
@subsubsection ÂºÄÂßã‰∏éÁªìÊùüÂä®‰Ωú

@cindex @code{BEGIN} pattern
@cindex @code{END} pattern
@code{BEGIN} ËßÑÂàôÂè™ÊâßË°å‰∏ÄÊ¨°ÔºåÂπ∂‰∏îÊòØÂú®ËØªÂèñËÆ∞ÂΩï‰πãÂâçÊâßË°å„ÄÇÁõ∏Â∫îÂú∞Ôºå@code{END} ËßÑÂàô‰πüÂè™ÊâßË°å‰∏ÄÊ¨°ÔºåÂπ∂‰∏îÂú®ÊâÄÊúâÁöÑËÆ∞ÂΩïÂ∑≤ÁªèËØªÂèñÂÆåÊàê‰πãÂêéÊâßË°å„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{awk '}
> @kbd{BEGIN @{ print "Analysis of \"li\"" @}}
> @kbd{/li/  @{ ++n @}}
> @kbd{END   @{ print "\"li\" appears in", n, "records." @}' mail-list}
@print{} Analysis of "li"
@print{} "li" appears in 4 records.
@end example

@cindex @code{BEGIN} pattern, operators and
@cindex @code{END} pattern, operators and
Ê≠§Á®ãÂ∫èÊü•ÊâæÂú®ËæìÂÖ•Êñá‰ª∂ @file{mail-list} ‰∏≠ÔºåÂåÖÂê´Â≠ó‰∏≤ @samp{li} ‰∏≤ÁöÑËÆ∞ÂΩï„ÄÇ@code{BEGIN} ËßÑÂàôÊâìÂç∞Êä•ÂëäÁöÑÊ†áÈ¢ò„ÄÇ
Ê≤°ÊúâÂøÖÈ°ªÈÄöËøá @code{BEGIN} ËßÑÂàôÊù•ÂàùÂßãÂåñÂèòÈáè @code{n} ‰∏∫Èõ∂Ôºå
Âõ†‰∏∫ @command{awk} ‰ºöËá™Âä®Â§ÑÁêÜÔºàÊü•Áúã @ref{Variables}Ôºâ„ÄÇÁ¨¨‰∫å‰∏™ËßÑÂàôÊòØÂΩìËæìÂÖ•ËÆ∞ÂΩï‰∏≠ÂåÖÂê´ @samp{li} Êó∂ÔºåÂ∞±ÈÄíÂ¢ûÂèòÈáè @code{n}„ÄÇ
@code{END} ËßÑÂàôÂú®Á®ãÂ∫èÊâßË°åÂÆåÊàêÂêéÔºåÊâìÂç∞ÂèòÈáè @code{n} ÁöÑÂÄº„ÄÇ

@code{BEGIN} ‰∏é @code{END} ÁâπÊÆäËßÑÂàô‰∏çÂèØ‰ª•Áî®Âú®ËåÉÂõ¥ËßÑÂàô‰∏≠Ôºå‰πü‰∏çÂèØ‰ª•‰∏éÂ∏ÉÊûóÊìç‰ΩúÁ¨¶‰∏ÄËµ∑‰ΩøÁî®ÔºàÂÆûÈôÖ‰∏äÔºåÂÆÉ‰ª¨‰∏çÂèØ‰ª•‰∏é‰ªª‰ΩïÊìç‰ΩúÁ¨¶‰∏ÄËµ∑‰ΩøÁî®Ôºâ„ÄÇ
‰∏Ä‰∏™ @command{awk} Á®ãÂ∫èÂèØ‰ª•ÊúâÂ§ö‰∏™ @code{BEGIN} ‰∏é/Êàñ @code{END} ËßÑÂàô„ÄÇÂÆÉ‰ª¨‰ºöÊåâÁÖßÂá∫Áé∞ÁöÑÈ°∫Â∫èË¢´ÊâßË°åÔºöÊâÄÊúâÁöÑ @code{BEGIN} ËßÑÂàôÂú®ÂêØÂä®Êó∂ÊâßË°åÔºå
ËÄåÊâÄÊúâÁöÑ @code{END} ËßÑÂàôÂú®ÁªìÊùüÊó∂ÊâßË°å„ÄÇ@code{BEGIN} ‰∏é @code{END} ËßÑÂàôÂèØ‰ª•‰∏éÂÖ∂‰ªñÁöÑËßÑÂàô‰∫§ÂèâÊ∑∑Âêà„ÄÇ
ËøôÊ†∑ÁöÑÁâπÊÄßÊòØÂú® @command{awk} ÁöÑ 1987 Âπ¥ÁöÑÁâàÊú¨Ë¢´Âä†ÂÖ•ÔºåÂπ∂Âä†ÂÖ•Âà∞ POSIX Ê†áÂáÜ‰∏≠„ÄÇÊúÄÂºÄÂßãÔºà1978ÔºâÁöÑ @command{awk} ÁâàÊú¨Ë¶ÅÊ±Ç @code{BEGIN} ËßÑÂàôË¶ÅÊîæÂú®Á®ãÂ∫èÁöÑÂºÄÂßãÂ§ÑÔºå@code{END} ËßÑÂàôÂàôÈúÄË¶ÅÊîæÂú®Á®ãÂ∫èÁöÑÁªìÂ∞æÂ§ÑÔºåÂπ∂‰∏î‰∏§ËÄÖÈÉΩÂè™ËÉΩÂá∫Áé∞‰∏ÄÊ¨°„ÄÇÁõÆÂâç‰∏çÂÜçÈúÄË¶ÅËøôÊ†∑Ôºå‰ΩÜÊòØÊåâÁÖßËøôÊ†∑ÁöÑÊ®°ÊùøÊù•ÂÜôÁ®ãÂ∫èÂç¥ÊòØ‰∏™Â•Ω‰π†ÊÉØÔºåÂõ†‰∏∫ËøôÊ†∑ÂèØ‰ª•‰ΩøÁ®ãÂ∫èÁªÑÁªáÂæóÊõ¥Â•ΩÔºåÂπ∂‰∏îÂ¢ûÂº∫ÂèØËØªÊÄß„ÄÇ

Â§ö‰∏™ @code{BEGIN} ‰∏é @code{END} ËßÑÂàôÂú®ÂÜôÂ∫ìÂáΩÊï∞ÁöÑÊó∂ÂÄôÈùûÂ∏∏ÊúâÁî®ÔºåÂõ†‰∏∫ÊØè‰∏™Â∫ìÊñá‰ª∂ÈÉΩÂèØ‰ª•ÊúâÂÆÉ‰ª¨Ëá™Â∑±ÁöÑ @code{BEGIN} ‰∏é/Êàñ @code{END} ËßÑÂàôÊù•Â§ÑÁêÜÂàùÂßãÂåñ‰∏é/ÊàñÁªìÊùüÂ∑•‰Ωú„ÄÇÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆöÁöÑÂ∫ìÂáΩÊï∞ÁöÑÂêçÂ≠óÔºåÂèØ‰ª•ÊéßÂà∂‰∏éÂÖ∂Áõ∏ÂÖ≥ÁöÑ @code{BEGIN} ‰∏é @code{END} ËßÑÂàôÊâßË°åÁöÑÈ°∫Â∫è„ÄÇÂõ†Ê≠§Ôºå‰Ω†Ë¶Å‰ªîÁªÜÂú∞Â§ÑÁêÜÂ∫ìÊñá‰ª∂‰∏≠ÁöÑËøô‰∫õËßÑÂàôÔºå‰ΩøÂæóÂÆÉ‰ª¨ÁöÑÊâßË°åÈ°∫Â∫è‰∏ç‰ºöÂ∏¶Êù•ÂΩ±Âìç„ÄÇ
Êü•Áúã @ref{Options}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ΩøÁî®Â∫ìÂáΩÊï∞ÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇÊü•Áúã @ref{Library Functions}„ÄÇ

Â¶ÇÊûú @command{awk} Âè™Êúâ @code{BEGIN} ËßÑÂàôËÄåÊ≤°ÊúâÂÖ∂‰ªñÁöÑËßÑÂàôÔºåÂàôÁ®ãÂ∫èÂú®ÊâßË°å‰∫Ü @code{BEGIN} ËßÑÂàô‰πãÂêéÂ∞±ÈÄÄÂá∫‰∫Ü„ÄÇ ‰ΩÜÊòØÔºå
Â¶ÇÊûú @code{END} ËßÑÂàôÂ≠òÂú®ÔºåÂàôËæìÂÖ•‰ºöË¢´ËØªÂèñÔºåÂ∞±ÁÆóÁ®ãÂ∫è‰∏≠Ê≤°ÊúâÂÖ∂‰ªñÁöÑËßÑÂàôÂ≠òÂú®„ÄÇÂõ†‰∏∫Â¶ÇÊûúÂú® @code{END} ËßÑÂàô‰∏≠Ê£ÄÊü• @code{FNR} ‰∏é @code{NR} ÂèòÈáèÔºåÂõ†Ê≠§Ëøô‰πàÂÅöÂ∞±ÊòØÂæàÊúâÂøÖË¶ÅÁöÑ„ÄÇ

@node I/O And BEGIN/END
@subsubsection @code{BEGIN} ‰∏é @code{END} ËßÑÂàô‰∏≠ÁöÑËæìÂÖ•ËæìÂá∫


@cindex input/output, from @code{BEGIN} and @code{END}
Âú® @code{BEGIN} ‰∏é @code{END} ËßÑÂàô‰∏≠ËøõË°å I/O Êìç‰ΩúÊó∂ÔºåË¶ÅÊ≥®ÊÑèÂá†ÁÇπÔºàÂÖ∂‰∏≠ÁöÑÊüê‰∫õËøòÊØîËæÉÂæÆÂ¶ôÔºâ„ÄÇ
È¶ñÂÖàË¶ÅÂÖ≥Ê≥®ÁöÑÊòØÂú® @code{BEGIN} ‰∏≠ @code{$0} ÁöÑÂÄº„ÄÇÁî±‰∫é @code{BEGIN} ÁöÑÊâßË°åÂú®‰ªª‰ΩïÁöÑËæìÂÖ•‰πãÂâçÔºåÊâÄ‰ª•‰πüÂ∞±Ê≤°ÊúâËæìÂÖ•ËÆ∞ÂΩïÔºå‰πüÊ≤°ÊúâÂüü„ÄÇ
ÂØπ‰∫é @code{$0} ‰ª•ÂèäÂüüÁöÑËÆøÈóÆÈÉΩÂ∞Ü‰∫ßÁîüÁ©∫‰∏≤ÊàñËÄÖ 0 ÂÄºÔºåËøôËßÜ‰∏ä‰∏ãÊñáÁöÑÊÉÖÂÜµ„ÄÇ
Ë¶Å‰Ωø @code{$0} ‰∏≠ÊúâÂÆûÂÄºÔºåÂèØ‰ª•‰ª•‰∏çÂ∏¶ÂèòÈáèÁöÑÂΩ¢ÂºèÊâßË°å @code{getline}ÔºàÊü•Áúã @ref{Getline}Ôºâ„ÄÇÂè¶‰∏Ä‰∏™ÊñπÂºèÂ∞±ÊòØÁªô @code{$0} ËµãÂÄº„ÄÇ

@cindex Brian Kernighan's @command{awk}
@cindex differences in @command{awk} and @command{gawk}, @code{BEGIN}/@code{END} patterns
@cindex POSIX @command{awk}, @code{BEGIN}/@code{END} patterns
@cindex @code{print} statement, @code{BEGIN}/@code{END} patterns and
@cindex @code{BEGIN} pattern, @code{print} statement and
@cindex @code{END} pattern, @code{print} statement and
Á¨¨‰∫åÁÇπÂàôË∑üÁ¨¨‰∏ÄÁÇπÊúâÁÇπÁ±ª‰ººÔºå‰ΩÜÊòØÊòØÂú®Âè¶‰∏Ä‰∏™ÊñπÂêë‰∏ä„ÄÇ‰º†Áªü‰∏äÔºåÂ§ßÈÉ®‰ªΩÊòØÁî±‰∫éÂÆûÁé∞ÁöÑÈóÆÈ¢òÔºå
@code{$0} ‰∏é @code{NF} Âú® @code{END} ËßÑÂàô‰∏≠ÈÉΩÊòØ@emph{Êú™ÂÆö‰πâ}ÁöÑ„ÄÇ
POSIX Ê†áÂáÜÊåáÂá∫ @code{NF} Âú® @code{END} ËßÑÂàô‰∏≠ÊòØÂèØÁî®ÁöÑ„ÄÇÂÆÉÂåÖÂê´ÁöÑÊòØÊúÄÂêé‰∏ÄË°åËÆ∞ÂΩï‰∏≠ÁöÑÂüüÊï∞ÁõÆ„ÄÇÂæàÂ§ßÂèØËÉΩÊòØÁî±‰∫éÁñèÂøΩÔºåÂú®Ê†áÂáÜ‰∏≠Âç¥Ê≤°ÊúâËØ¥‰πüË¶Å‰øùÁïô @code{$0} ÁöÑÂÄºÔºåÂ∞ΩÁÆ°Âú®ÈÄªËæë‰∏äÂ§ßÂÆ∂ÈÉΩËÆ§‰∏∫ÊòØËØ•‰øùÁïô‰∏ãÊù•ÁöÑ„ÄÇ‰∫ãÂÆû‰∏äÔºåÊâÄÊúâÁöÑ BMW @command{awk}Ôºå@command{mawk}Ôºå‰ª•Âèä @command{gawk} ÈÉΩÂú® @code{END} ËßÑÂàô‰∏≠‰øùÁïô‰∫Ü @code{$0} ÁöÑÂÄº„ÄÇ‰ΩÜÊòØ‰πüË¶ÅÊ≥®ÊÑèÔºå‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÂÆûÁé∞Ôºå‰∏é‰∏Ä‰∫õÊóßÁâàÊú¨ÁöÑ UNIX @command{awk} ÁâàÊú¨Âç¥Ê≤°ÊúâËøô‰πàÂ§ÑÁêÜ„ÄÇ

Á¨¨‰∏âÁÇπÔºåÂàôÊòØÂâçÈù¢‰∏§ÁÇπÁöÑÂª∂Áª≠„ÄÇÂú® @code{BEGIN} ‰∏é @code{END} ËßÑÂàô‰∏≠ÁöÑ @code{print} ÁöÑÂê´‰πâÊÄªÊòØ‰∏ÄÊ†∑ÁöÑÔºö
@samp{print $0} „ÄÇÂ¶ÇÊûú @code{$0} ÁöÑÂÄºÊòØÁ©∫‰∏≤ÔºåÂàôÊâìÂç∞‰∏Ä‰∏™Á©∫ÁöÑËÆ∞ÂΩï„ÄÇ
ÂæàÂ§ö‰ΩøÁî® @command{awk} ÂæàÈïøÊó∂Èó¥ÁöÑÁ®ãÂ∫èÂëòÂú® @code{BEGIN} ‰∏é @code{END} ËßÑÂàô‰∏≠‰ΩøÁî®ËøôÁßçÂÖâÂ§¥ @code{print} Êù•Ë°®Á§∫ @samp{@w{print ""}}Ôºå
Ëøô‰æùËµñ‰∫é @code{$0} ÁöÑÂÄº‰∏∫Á©∫‰∏≤„ÄÇÈÄöÂ∏∏Êù•ËØ¥ÔºåÂú® @code{BEGIN} ËßÑÂàô‰∏≠ÂèØ‰ª•ÂÆûÁé∞ËøôÊ†∑ÁöÑÊÑèÂõæÔºå‰ΩÜÊòØËá≥Â∞ëÂú® @command{gawk} ‰∏≠ÔºåÂú® @code{END} ËßÑÂàô‰∏≠Ëøô‰πàÂÜôÊòØ‰∏Ä‰∏™Âùè‰∏ªÊÑè„ÄÇÂêåÊó∂Ëøô‰πàÂÜô‰πüÊòØ‰∏ÄÁßçÂæàËπ©ËÑöÁöÑÈ£éÊ†ºÔºåÂõ†‰∏∫Â¶ÇÊûúÁ°ÆÂÆûÈúÄË¶ÅËæìÂá∫‰∏Ä‰∏™Á©∫‰∏≤Ôºå‰Ω†Â∞±Âú®ÊòæÂºèÂú∞ËøõË°åÊâìÂç∞Â∞±ÂèØ‰ª•‰∫Ü„ÄÇ

@cindex @code{next} statement, @code{BEGIN}/@code{END} patterns and
@cindex @code{nextfile} statement, @code{BEGIN}/@code{END} patterns and
@cindex @code{BEGIN} pattern, @code{next}/@code{nextfile} statements and
@cindex @code{END} pattern, @code{next}/@code{nextfile} statements and
ÊúÄÂêéÔºå@code{next} ‰∏é @code{nextfile} ËØ≠Âè•Âú® @code{BEGIN} ËßÑÂàô‰∏≠ÊòØ‰∏çÂÖÅËÆ∏‰ΩøÁî®ÁöÑÔºå
Âõ†‰∏∫ÈöêÂºèÁöÑ read-a-record-and-match-against-the-rules Âæ™ÁéØÈÉΩËøòÊ≤°ÊúâÂºÄÂßãÂë¢„ÄÇ
Áõ∏‰ººÁöÑÔºåËøôÊ†∑ÁöÑËØ≠Âè•Âú® @code{END} ËßÑÂàô‰∏≠‰πüÊòØÊó†ÊïàÁöÑÔºåÂõ†‰∏∫ËæìÂÖ•Â∑≤ÁªèÂÆåÊàê„ÄÇÔºàÊü•Áúã @ref{Next Statement} Ôºå‰∏é
@ifnotdocbook
 @ref{Nextfile Statement}„ÄÇÔºâ
@end ifnotdocbook
@ifdocbook
 @ref{Nextfile Statement}„ÄÇÔºâ
@end ifdocbook

@node BEGINFILE/ENDFILE
@subsection @code{BEGINFILE} ‰∏é @code{ENDFILE} ÁâπÊÆäÊ®°Âºè
@cindex @code{BEGINFILE} pattern
@cindex @code{ENDFILE} pattern
@cindex differences in @command{awk} and @command{gawk}, @code{BEGINFILE}/@code{ENDFILE} patterns

Êú¨@value{SECTION}‰∏≠ÊèèËø∞ÁöÑÊòØ @command{gawk} ÁöÑÁâπÊÄß„ÄÇ

Êúâ‰∏§ÁßçÁâπÊÆäÁöÑËßÑÂàôÔºåÂç≥ @code{BEGINFILE} ‰∏é @code{ENDFILE}ÔºåÂèØ‰ª•ËÆ©‰Ω†Âú®ÂëΩ‰ª§Ë°åÊåáÂÆöÁöÑÊñá‰ª∂Â§ÑÁêÜËøáÁ®ã‰∏≠ÊâìÂÖ•‚ÄúÂãæÂ≠ê‚Äù„ÄÇ
‰∏é @code{BEGIN} Ë∑ü @code{END} Á±ª‰ºº
@ifnottex
@ifnotdocbook
ÔºàÊü•Áúã @ref{BEGIN/END}ÔºâÔºå
@end ifnotdocbook
@end ifnottex
@iftex
ÔºàÊü•ÁúãÂâç@value{SECTION}ÔºâÔºå
@end iftex
@ifdocbook
ÔºàÊü•ÁúãÂâç@value{SECTION}ÔºâÔºå
@end ifdocbook
Á®ãÂ∫è‰∏≠ÁöÑÊâÄÊúâÁöÑ @code{BEGINFILE} ËßÑÂàôÈÉΩ‰ºöÂÆâÊåâÁÖß @command{gawk} ËØªÂèñÁöÑÈ°∫Â∫èÂêàÂπ∂Ëµ∑Êù•ÔºåËÄåÊâÄÊúâ @code{ENDFILE} ËßÑÂàô‰πü‰ºöË¢´ÂêàÂπ∂„ÄÇ

@code{BEGINFILE} ËßÑÂàôÁöÑÊâßË°å‰Ωì‰ºöÂú® @command{gawk} ËØªÂèñÊñá‰ª∂ÁöÑÁ¨¨‰∏Ä‰∏™ËÆ∞ÂΩïÂâçÊâßË°å„ÄÇ@code{FILENAME} Â∞ÜË¢´ËÆæÁΩÆÊàêÂΩìÂâçÊñá‰ª∂ÁöÑÂêçÂ≠óÔºå@code{FNR} ‰ºöË¢´ËÆæÁΩÆÊàê 0„ÄÇ

@code{BEGINFILE} ‰∏∫‰Ω†Êèê‰æõ‰∫ÜÂÆåÊàê‰∏§‰∏™‰ªªÂä°ÁöÑ‰∏Ä‰∏™Êú∫‰ºöÔºåËøô‰∫õ‰ªªÂä°Â¶ÇÊûúÊ≤°ÊúâËøô‰∏™Êú∫Âà∂ÊòØ‰∏çÂèØËÉΩÂÆûÁé∞ÁöÑÔºö

@itemize @value{BULLET}
@item
‰Ω†ÂèØ‰ª•ÊµãËØïÊñá‰ª∂ÊòØÂê¶ÂèØËØª„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÂëΩ‰ª§Ë°å‰∏äÊåáÂÆöÁöÑÊñá‰ª∂Êó†Ê≥ïÊâìÂºÄËØªÂèñÊòØ‰∏Ä‰∏™Ëá¥‰ΩøÈîôËØØ„ÄÇ‰ΩÜÊòØÔºå‰Ω†ÂèØ‰ª•ÁªïËøáËøôÊ†∑ÁöÑËá¥‰ΩøÈîôËØØÔºåÂπ∂ÁßªÂä®Âà∞ÂëΩ‰ª§Ë°å‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™Êñá‰ª∂„ÄÇ

@cindex @command{gawk}, @code{ERRNO} variable in
@cindex @code{ERRNO} variable, with @code{BEGINFILE} pattern
@cindex @code{nextfile} statement, @code{BEGINFILE}/@code{ENDFILE} patterns and
‰Ω†ÂèØ‰ª•Ê£ÄÊü• @code{ERRNO} ÁöÑÂÄº‰∏çÊòØ‰∏Ä‰∏™Á©∫ÂÄºÔºåÂ¶ÇÊûúÈùûÁ©∫ÔºåÂ∞±Ë°®Á§∫ @command{gawk} Ê≤°ÂäûÊ≥ïÊâìÂºÄ‰∏Ä‰∏™Êñá‰ª∂„ÄÇ
Ê≠§Êó∂Ôºå‰Ω†ÁöÑÁ®ãÂ∫èÂèØ‰ª•ÊâßË°å @code{nextfile} ËØ≠Âè•ÔºàÊü•Áúã @ref{Nextfile Statement}Ôºâ„ÄÇ
Ëøô‰ΩøÂæó @command{gawk} ÂèØ‰ª•ÂÆåÊï¥Âú∞Ë∑≥ËøáËøô‰∏™Êñá‰ª∂„ÄÇÂê¶ÂàôÔºå@command{gawk} ÈÅáÂà∞Ëá¥ÂëΩÈîôËØØÊó∂‰ºöÈÄÄÂá∫„ÄÇ

@item
Â¶ÇÊûú‰Ω†ÁºñÂÜô‰∫Ü‰øÆÊîπËÆ∞ÂΩïÂ§ÑÁêÜÊñπÂºèÁöÑÊâ©Â±ïÔºàÈÄöËøáÊèíÂÖ•‰∏Ä‰∏™‚ÄúËæìÂÖ•ÂàÜÊûêÂô®‚ÄùÔºåÊü•Áúã @ref{Input Parsers}ÔºâÔºå
‰Ω†Â∞±ÂèØ‰ª•Âú®Ëøô‰∏™ÁÇπ‰∏äÔºåÂú®Â§ÑÁêÜÊñá‰ª∂‰πãÂâçË∞ÉÁî®ÂÆÉ‰ª¨„ÄÇÔºàËøôÊòØ‰∏Ä‰∏™@emph{ÈùûÂ∏∏}È´òÁ∫ßÁöÑÁâπÊÄßÔºåÂΩìÂâçÂè™Ë¢´ @uref{http://sourceforge.net/projects/gawkextlib, @code{gawkextlib} È°πÁõÆ} ‰ΩøÁî®„ÄÇÔºâ
@end itemize

@code{ENDFILE} ËßÑÂàô‰ºöÂú® @command{gawk} Â§ÑÁêÜÂÆå‰∏Ä‰∏™Êñá‰ª∂ÁöÑËæìÂÖ•ÂêéÊâßË°å„ÄÇÂØπ‰∫éÊúÄÂêé‰∏Ä‰∏™ËæìÂÖ•Êñá‰ª∂ÔºåÂÆÉÂ∞Ü‰ºöÂú®Ë∞ÉÁî® @code{END} ‰πãÂâçËøõË°åË∞ÉÁî®„ÄÇ
@code{ENDFILE} Â∞±ÁÆóÊòØÈíàÂØπÁ©∫Êñá‰ª∂‰πü‰ºöÊâßË°å„ÄÇ

Ê≠£Â∏∏ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂΩìÈîôËØØÂá∫Áé∞Âú®Ê≠£Â∏∏ÁöÑËæìÂÖ•Â§ÑÁêÜÂæ™ÁéØ‰∏≠ÁöÑËØªÂèñÊó∂ÔºåÈîôËØØÂ∞±‰ºöÊòØËá¥ÂëΩÁöÑÔºå
Â¶ÇÊûúÊèê‰æõ‰∫Ü @code{ENDFILE} ËßÑÂàôÔºåËøôÊ†∑ÁöÑÈîôËØØÂ∞±‰∏çÂÜçÊòØËá¥ÂëΩÁöÑÔºåÂè™ÊòØ @code{ERRNO} Ë¢´ËÆæÁΩÆËÄåÂ∑≤„ÄÇËøô‰ΩøÂæóËÉΩÂ§üÂú® @command{awk} Á®ãÂ∫è‰∏ÄÁ∫ßÊçïËé∑Âà∞Â§ÑÁêÜ I/O ÁöÑÈîôËØØ„ÄÇ

@cindex @code{next} statement, @code{BEGINFILE}/@code{ENDFILE} patterns and
@code{next} ËØ≠Âè•ÔºàÊü•Áúã @ref{Next Statement}Ôºâ‰∏çÂáÜ‰ΩøÁî®Âú® @code{BEGINFILE} ÊàñËÄÖ @code{ENDFILE} ËßÑÂàô‰∏≠„ÄÇ
ËÄå @code{nextfile} Âè™ÂèØ‰ª•‰ΩøÁî®Âú® @code{BEGINFILE} ËßÑÂàô‰∏≠ÔºåËÄå‰∏çËÉΩ‰ΩøÁî®Âú® @code{ENDFILE} ËßÑÂàô‰∏≠„ÄÇ

@cindex @code{getline} statement, @code{BEGINFILE}/@code{ENDFILE} patterns and
@code{getline} ËØ≠Âè•ÔºàÊü•Áúã @ref{Getline}ÔºâÂú® @code{BEGINFILE} Âíå @code{ENDFILE} ‰∏§‰∏™ËßÑÂàô‰∏≠ÈÉΩË¢´ÈôêÂà∂‰ΩøÁî®ÔºöÂè™ÊúâÈáçÂÆöÂêëÂΩ¢ÂºèÁöÑ @code{getline} ÂèØ‰ª•Âú®ÂÖ∂‰∏≠‰ΩøÁî®„ÄÇ

@code{BEGINFILE} ‰∏é @code{ENDFILE} ÊòØ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇÂú®Â§öÊï∞ÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÊàñËÄÖ @command{gawk} ÁöÑÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂÆÉ‰ª¨Ê≤°ÊúâÁâπÊÆäÂê´‰πâ„ÄÇ

@c FIXME: For 4.2 maybe deal with this?
@ignore
Date:     Tue, 17 May 2011 02:06:10 PDT
From:     rankin@pactechdata.com (Pat Rankin)
Message-Id: <110517015127.20240f4a@pactechdata.com>
Subject:  BEGINFILE
To:       arnold@skeeve.com

     The documentation for BEGINFILE states that FNR is 0, which seems
pretty obvious.  It doesn't mention what the value of $0 is, and that's
not obvious.  I think setting it to null before starting the BEGINFILE
action would be preferable to leaving whatever was there in the last
record of the previous file.

     ENDFILE can retain the last record in $0.  I guess it has to if
the END rule's actions see that value too.  But the beginning of a new
file doesn't just mean that the old one has been closed; the old file
is being superseded, so leaving the old data around feels wrong to me.
[If the user wants to keep it on hand, he or she can use an ENDFILE
rule to grab it before moving on to the next file.]
@end ignore

@node Empty
@subsection Á©∫Ê®°Âºè

@cindex empty pattern
@cindex patterns, empty
‰∏Ä‰∏™Á©∫Ê®°ÂºèÔºàÂ¶Ç‰∏çÂ≠òÂú®Ê®°ÂºèÔºâË¢´ËßÜ‰∏∫ÂåπÈÖç@emph{ÊâÄÊúâÁöÑ}ËæìÂÖ•ËÆ∞ÂΩï„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºö

@example
awk '@{ print $1 @}' mail-list
@end example

@noindent
ÊâìÂç∞ÊØè‰∏Ä‰∏™ËÆ∞ÂΩïÁöÑÁ¨¨‰∏Ä‰∏™Âüü„ÄÇ

@node Using Shell Variables
@section Âú®Á®ãÂ∫è‰∏≠‰ΩøÁî® Shell ÂèòÈáè
@cindex shells, variables
@cindex @command{awk} programs, shell variables in
@c @cindex shell and @command{awk} interaction

@command{awk} Á®ãÂ∫èÂ∏∏Áî®‰∫é‰∏Ä‰∏™Áî® Shell ÂÜôÊàêÁöÑÂ§ßÁ®ãÂ∫è‰∏≠ÁöÑ‰∏Ä‰∏™ÁªÑ‰ª∂„ÄÇ‰æãÂ¶ÇÔºå‰ΩøÁî®‰∏Ä‰∏™ Shell ÂèòÈáèÊù•Â≠òÊîæ @command{awk} Á®ãÂ∫èË¶ÅÊêúÁ¥¢ÁöÑÊ®°Âºè„ÄÇÊúâ‰∏§‰∏™ÊñπÂºèÊù•ÂèñÂæó Shell ÂèòÈáèÁöÑÂÄºÔºåÂπ∂ÊèíÂÖ•Âà∞ @command{awk} Á®ãÂ∫è‰∏≠„ÄÇ

@cindex shells, quoting
‰∏ÄÁßçÈÄöÁî®ÁöÑÊñπÂºèÊòØ‰ΩøÁî® Shell ÂºïÂè∑Êù•Âú®ËÑöÊú¨‰∏≠Êõø‰ª£ÂèòÈáèÁöÑÂÄºÔºåÁî±Ê≠§Êù•ÊèíÂÖ•Âà∞Á®ãÂ∫è‰∏≠„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºö

@example
printf "Enter search pattern: "
read pattern
awk "/$pattern/ "'@{ nmatches++ @}
     END @{ print nmatches, "found" @}' /path/to/data
@end example

@noindent
@command{awk} Á®ãÂ∫èÂ∞ÜÂºïÂè∑ÊñáÊú¨ÁöÑÁâáÊÆµËßÜ‰Ωú‰∏∫ËøûÊé•Êìç‰ΩúÊù•ÂΩ¢ÊàêÁ®ãÂ∫è„ÄÇÁ¨¨‰∏ÄÈÉ®ÂàÜÂ∞±Ë¢´ÂèåÂºïÂè∑ÂºïËµ∑Êù•ÔºåËøôÂÖÅËÆ∏‰ΩøÁî® Shell ÂèòÈáè @code{pattern} ‰Ωú‰∏∫Êõø‰ª£„ÄÇ
Á¨¨‰∫åÈÉ®ÂàÜÊòØÂçïÂºïÂè∑ÁöÑÈÉ®ÂàÜ„ÄÇ

ÈÄöËøáÂºïÂè∑ÊñπÂºèÁöÑÂèòÈáèÊõøÊç¢ËôΩÁÑ∂ÂèØ‰ª•Â∑•‰ΩúÔºå‰ΩÜÊòØÊúâÂèØËÉΩÂØºËá¥ÊΩúÂú®ÁöÑÊ∑∑‰π±„ÄÇËøôÈúÄË¶ÅÂØπ Shell ÁöÑÂºïÂè∑ËßÑÂàôÊúâÊØîËæÉÂ•ΩÁöÑÁêÜËß£ÔºàÊü•Áúã @ref{Quoting}ÔºâÔºå
Âπ∂‰∏îÂΩìËØªÂèñÁ®ãÂ∫èÔºåÂåπÈÖçÂºïÂè∑ÁöÑÊó∂ÂÄô‰ºöÊØîËæÉÈ∫ªÁÉ¶„ÄÇ

Êõ¥Â•ΩÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî® @command{awk} ÁöÑÂèòÈáèËµãÂÄºÁâπÊÄßÔºàÊü•Áúã @ref{Assignment Options}ÔºâÊù•Â∞Ü Shell ÂèòÈáèÁöÑÂÄºËµãÁªô @command{awk} ÂèòÈáè„ÄÇ
ÁÑ∂Âêé‰ΩøÁî®Âä®ÊÄÅÊ≠£ÂàôË°®ËææÂºèÊù•ÂåπÈÖçÊ®°ÂºèÔºàÊü•Áúã @ref{Computed Regexps}Ôºâ„ÄÇ‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊòæÁ§∫‰ΩøÁî®Ëøô‰∏™ÊäÄÂ∑ßÊù•ÈáçÂÜô‰∏äÈù¢ÁöÑÂäüËÉΩÔºö

@example
printf "Enter search pattern: "
read pattern
awk -v pat="$pattern" '$0 ~ pat @{ nmatches++ @}
       END @{ print nmatches, "found" @}' /path/to/data
@end example

@noindent
Áé∞Âú®Ôºå@command{awk} Á®ãÂ∫èÂè™ÈúÄË¶ÅÂçïÂºïÂè∑ÁöÑ‰∏≤„ÄÇËµãÂÄºÊìç‰Ωú @samp{-v pat="$pattern"} ËøòÊòØÈúÄË¶ÅÂèåÂºïÂè∑ÁöÑÔºå‰ª•Èò≤Ê≠¢Âú® @code{$pattern} ÁöÑÂÄº‰∏≠Âá∫Áé∞Á©∫Ê†º„ÄÇ
@command{awk} ÂèòÈáè @code{pat} ‰πüÂèØ‰ª•‰ΩøÁî®ÂêçÂ≠ó @code{pattern}Ôºå
‰ΩÜÊòØÁúãËµ∑Êù•Â∞±‰ª§‰∫∫ÊØîËæÉÂõ∞ÊÉëÂæóÂ§ö„ÄÇ‰ΩøÁî®ÂèòÈáèÁöÑÊñπÂºè‰πüÊèê‰æõ‰∫ÜÊõ¥Â§öÁöÑÁÅµÊ¥ªÊÄßÔºåÂõ†‰∏∫ÂèòÈáèÂèØ‰ª•Âú®Á®ãÂ∫è‰∏≠ÁöÑ‰ªª‰ΩïÂú∞Êñπ‰ΩøÁî®‚Äî‚ÄîÁî®‰∫éÊâìÂç∞„ÄÅ‰Ωú‰∏∫Êï∞ÁªÑ‰∏ãÊ†áÔºåÊàñËÄÖÂÖ∂‰ªñÁöÑÁî®ÈÄî‚Äî‚ÄîÂπ∂‰∏î‰∏çÈúÄË¶ÅÂú®‰ΩøÁî®ÁöÑÂú∞Êñπ‰ΩøÁî®ÂèåÂºïÂè∑„ÄÇ

@node Action Overview
@section Âä®‰Ωú
@c @cindex action, definition of
@c @cindex curly braces
@c @cindex action, curly braces
@c @cindex action, separating statements
@cindex actions

@command{awk} Á®ãÂ∫èÊàñËÄÖËÑöÊú¨Áî±‰∏ÄËøû‰∏≤ÁöÑËßÑÂàô‰∏éÂáΩÊï∞ÂÆö‰πâ‰∫§ÂèâÂΩ¢Êàê„ÄÇÔºàÂáΩÊï∞‰ºöÂú®ÂêéÈù¢ËÆ∫Âèä„ÄÇÊü•Áúã @ref{User-defined}ÔºâËßÑÂàô‰∏≠ÂåÖÂê´‰∫ÜÊ®°Âºè‰∏éÂä®‰ΩúÔºå‰∏§ËÄÖ‰πã‰∏ÄÂèØ‰ª•ÁúÅÁï•Ôºå‰ΩÜ‰∏çÂèØ‰ª•ÈÉΩÁúÅÁï•„ÄÇ
@dfn{Âä®‰Ωú}ÁöÑÁõÆÁöÑÊòØÂëäÁü• @command{awk} Âú®Êüê‰∏™Ê®°ÂºèË¢´ÊâæÂà∞ÂêéÂ¶Ç‰ΩïÊâßË°å„ÄÇÂõ†Ê≠§ÔºåÊ¶ÇÊã¨Ëµ∑Êù•Ôºå@command{awk} Á®ãÂ∫èÁúãËµ∑Êù•ÈÉΩÂÉèËøôÊ†∑Ôºö

@display
[@var{pattern}]  @code{@{ @var{action} @}}
 @var{pattern}  [@code{@{ @var{action} @}}]
@dots{}
@code{function @var{name}(@var{args}) @{ @dots{} @}}
@dots{}
@end display

@cindex @code{@{@}} (braces), actions and
@cindex braces (@code{@{@}}), actions and
@cindex separators, for statements in actions
@cindex newlines, separating statements in actions
@cindex @code{;} (semicolon), separating statements in actions
@cindex semicolon (@code{;}), separating statements in actions
Âä®‰ΩúÁî±‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ @command{awk} @dfn{ËØ≠Âè•}ÁªÑÊàêÔºåÂπ∂‰∏îÁî±Ëä±Êã¨Âè∑ÂåÖËµ∑Êù•Ôºà@samp{@{@r{@dots{}}@}}Ôºâ„ÄÇ
ÊØèÊù°ËØ≠Âè•ÈÉΩÊåáÂÆö‰∫Ü‰∏Ä‰∏™Ë¶ÅÂ§ÑÁêÜÁöÑËøáÁ®ã„ÄÇËØ≠Âè•Áî±Êç¢Ë°åÁ¨¶ÊàñËÄÖÂàÜÂè∑ÂàÜÈöî„ÄÇ
Âä®‰Ωú‰∏§ËæπÁöÑËä±Êã¨Âè∑ÊòØÂøÖÈ°ª‰ΩøÁî®ÁöÑÔºåÂ∞±ÁÆóÂè™Êúâ‰∏Ä‰∏™ËØ≠Âè•ÔºåÁîöËá≥Ê≤°ÊúâËØ≠Âè•‰πü‰∏ÄÊ†∑„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†Êï¥‰∏™Âú∞ÁúÅÁï•‰∫ÜÂä®‰ΩúÔºå‰πüË¶ÅÁúÅÁï•Ëä±Êã¨Âè∑„ÄÇ
ÁúÅÁï•Âä®‰Ωú‰∏é @samp{@{ print $0 @}} Á≠âÂêå„ÄÇ

@example
/foo/  @{ @}     @ii{match @code{foo}, do nothing --- empty action}
/foo/          @ii{match @code{foo}, print the record --- omitted action}
@end example

@command{awk} ÊîØÊåÅ‰∏ãÈù¢ÁöÑËØ≠Âè•Á±ªÂûãÔºö

@table @asis
@cindex side effects, statements
@item Ë°®ËææÂºè
Ë∞ÉÁî®ÂáΩÊï∞ÊàñËÄÖËµãÂÄºÁªôÂèòÈáèÔºàÊü•Áúã @ref{Expressions}Ôºâ„ÄÇ
ËøôÁ±ªÂûãËØ≠Âè•ÁöÑÊâßË°åÂ∞±ÊòØÁÆÄÂçïÂú∞Ê±ÇÂÄº„ÄÇÂ¶ÇÊûúË°®ËææÂºèÊúâÂâØ‰ΩúÁî®ÔºåËøôÂ∞±ÈùûÂ∏∏ÊúâÁî®ÔºàÊü•Áúã @ref{Assignment Ops}Ôºâ„ÄÇ

@item ÊéßÂà∂ËØ≠Âè•
ÊåáÂÆö @command{awk} Á®ãÂ∫èÁöÑÊéßÂà∂ÊµÅ„ÄÇ@command{awk} ËØ≠Ë®ÄÂèØ‰ª•ËÆ©‰Ω†ÂÜô C È£éÊ†ºÁöÑÁªìÊûÑÔºà@code{if}Ôºå@code{for}Ôºå@code{while}Ôºå‰ª•Âèä @code{do}ÔºâÔºå
‰πüÊúâ‰∏Ä‰∫õËá™Â∑±ÁâπÊÆäÁöÑÁªìÊûÑÔºàÊü•Áúã @ref{Statements}Ôºâ„ÄÇ

@item Â§çÂêàËØ≠Âè•
ÂåÖÊã¨Âú®Ëä±Êã¨Âè∑‰∏≠‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ËØ≠Âè•„ÄÇÂ§çÂêàËØ≠Âè•Áî®‰∫éÂú® @code{if}Ôºå@code{while}Ôºå@code{do}ÔºåÊàñËÄÖ @code{for} ÁöÑËØ≠Âè•‰Ωì‰∏≠ÔºåÂ∞ÜÂá†‰∏™ËØ≠Âè•È°∫Â∫èÂú∞ÊîæÂú®‰∏ÄËµ∑„ÄÇ

@item ËæìÂÖ•ËØ≠Âè•
‰ΩøÁî® @code{getline} ÂëΩ‰ª§ÔºàÊü•Áúã @ref{Getline}Ôºâ„ÄÇ
Âú® @command{awk} ‰∏≠‰πüÊèê‰æõ @code{next} ËØ≠Âè•ÔºàÊü•Áúã @ref{Next Statement}Ôºâ‰∏é @code{nextfile} ËØ≠Âè•ÔºàÊü•Áúã @ref{Nextfile Statement}Ôºâ„ÄÇ

@item ËæìÂá∫ËØ≠Âè•
Â¶Ç @code{print} ‰∏é @code{printf}ÔºåÊü•Áúã @ref{Printing}„ÄÇ

@item Âà†Èô§ËØ≠Âè•
Áî®‰∫éÂà†Èô§Êï∞ÁªÑÂÖÉÁ¥†„ÄÇÊü•Áúã @ref{Delete}„ÄÇ
@end table

@node Statements
@section Âä®‰Ωú‰∏≠ÁöÑÊéßÂà∂ËØ≠Âè•
@cindex control statements
@cindex statements, control, in actions
@cindex actions, control statements in

Â¶Ç @code{if}Ôºå@code{while} Á≠âÁ≠âÁöÑ@dfn{ÊéßÂà∂ËØ≠Âè•}ÔºåÁî®Êù•ÊéßÂà∂ @command{awk} Á®ãÂ∫èÁöÑÊâßË°åÊµÅ„ÄÇÂ§ßÂ§öÊï∞ÁöÑ @command{awk} ÊéßÂà∂ËØ≠Âè•ÈÉΩÊòØ‰ΩøÁî®‰∏é C Á±ª‰ººÁöÑÊ®°Âºè„ÄÇ

@cindex compound statements@comma{} control statements and
@cindex statements, compound@comma{} control statements and
@cindex body, in actions
@cindex @code{@{@}} (braces), statements, grouping
@cindex braces (@code{@{@}}), statements, grouping
@cindex newlines, separating statements in actions
@cindex @code{;} (semicolon), separating statements in actions
@cindex semicolon (@code{;}), separating statements in actions
ÊâÄÊúâÁöÑÊéßÂà∂ËØ≠Âè•ÈÉΩ‰ª•‰∏Ä‰∏™ÁâπÊÆäÂÖ≥ÈîÆËØçÂºÄÂßãÔºåÂ¶Ç @code{if} ‰∏é @code{while} Á≠âÔºå‰ª•Â∞ÜÂÆÉ‰ª¨‰∏é‰∏ÄËà¨ÁöÑË°®ËææÂºèËøõË°åÂå∫ÂàÜ„ÄÇÂæàÂ§öÁöÑÊéßÂà∂ËØ≠Âè•ËøòÂåÖÂê´ÂÖ∂‰ªñÁöÑËØ≠Âè•„ÄÇ
‰æãÂ¶ÇÔºå@code{if} ËØ≠Âè•ÂåÖÂê´ÂÖ∂‰ªñÁöÑËØ≠Âè•ÔºåÂèØËÉΩÊâßË°å‰πüÂèØËÉΩ‰∏çÊâßË°å„ÄÇ
Ë¢´ÂåÖÂê´ÁöÑËØ≠Âè•Áß∞‰∏∫Áõ∏Â∫îËØ≠Âè•ÁöÑ@dfn{ËØ≠Âè•‰Ωì}„ÄÇ‰∏∫‰∫ÜÂú®ËØ≠Âè•‰Ωì‰∏≠ÂåÖÂê´Â§ö‰∫é‰∏Ä‰∏™ËØ≠Âè•ÔºåÂàôÂ∞Ü‰ªñ‰ª¨ÂåÖÂê´Âú®‰∏Ä‰∏™ÊúâËä±Êã¨Âè∑ÁöÑ@dfn{Â§çÂêàËØ≠Âè•}‰∏≠Ôºå
Â∞ÜÈÄöËøáÊç¢Ë°åÊàñËÄÖÂàÜÂè∑Êù•ÂàÜÈöîÂÆÉ‰ª¨„ÄÇ

@menu
* If Statement::                Conditionally execute some @command{awk}
                                statements.
* While Statement::             Loop until some condition is satisfied.
* Do Statement::                Do specified action while looping until some
                                condition is satisfied.
* For Statement::               Another looping statement, that provides
                                initialization and increment clauses.
* Switch Statement::            Switch/case evaluation for conditional
                                execution of statements based on a value.
* Break Statement::             Immediately exit the innermost enclosing loop.
* Continue Statement::          Skip to the end of the innermost enclosing
                                loop.
* Next Statement::              Stop processing the current input record.
* Nextfile Statement::          Stop processing the current file.
* Exit Statement::              Stop execution of @command{awk}.
@end menu

@node If Statement
@subsection @code{if}-@code{else} ËØ≠Âè•

@cindex @code{if} statement
@code{if}-@code{else} ËØ≠Âè•ÊòØ @command{awk} ÁöÑ‚ÄúÂÜ≥Á≠ñ-ÊâßË°å‚ÄùËØ≠Âè•ÔºåÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@display
@code{if (@var{condition}) @var{then-body}} [@code{else @var{else-body}}]
@end display

@noindent
@var{condition} ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÁî®Êù•ÊéßÂà∂ÂêéÈù¢ÁöÑËØ≠Âè•ÁöÑÊâßË°å„ÄÇÂ¶ÇÊûú @var{condition} ‰∏∫ trueÔºåÂàôÊâßË°å @var{then-body} ÁöÑÈÉ®ÂàÜÔºå
Âê¶ÂàôÊâßË°å @var{else-body} ÁöÑÈÉ®ÂàÜ„ÄÇ
Ëøô‰∏™ËØ≠Âè•ÁöÑ @code{else} ÈÉ®ÂàÜÊòØÂèØÈÄâÁöÑ„ÄÇ@var{condition} ÁöÑÂÄºÂ¶ÇÊûú‰∏∫ 0 ÊàñËÄÖ‰∏∫Á©∫‰∏≤ÔºåÂàôË¢´ËÆ§‰∏∫ÊòØ falseÔºåÂÖ∂‰ªñÊÉÖÂÜµÂàô‰∏∫ true„ÄÇÂèÇËÄÉÂ¶Ç‰∏ãÔºö

@example
if (x % 2 == 0)
    print "x is even"
else
    print "x is odd"
@end example

Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÂ¶ÇÊûúË°®ËææÂºè @samp{x % 2 == 0} ‰∏∫ÁúüÔºàÊØîÂ¶ÇÔºåx ÁöÑÂÄºÊòØÂÅ∂Êï∞ÔºåÂèØË¢´ 2 Êï¥Èô§ÔºâÔºåÂàôÁ¨¨‰∏Ä‰∏™ @code{print} ËØ≠Âè•Ë¢´ÊâßË°åÔºå
Âê¶ÂàôÔºåÂ∞±ÊâßË°åÁ¨¨‰∫å‰∏™ @code{print} ËØ≠Âè•„ÄÇÂ¶ÇÊûú @code{else} ÂÖ≥ÈîÆËØç‰∏é @var{then-body} Âá∫Áé∞Âú®‰∏ÄË°å‰∏≠Ôºå
Âπ∂‰∏î @var{then-body} ‰∏çÊòØ‰∏Ä‰∏™Â§çÂêàËØ≠Âè•ÔºàÊ≤°ÊúâË¢´Ëä±Êã¨Âè∑ÂåÖÂê´ÔºâÔºåÂàôÂøÖÈ°ªË¶ÅÁî®ÂàÜÂè∑Â∞Ü @var{then-body} ÁöÑÈÉ®ÂàÜ‰∏é @code{else} ÈÉ®ÂàÜËøõË°åÂàÜÈöî„ÄÇ
Â¶ÇÔºå‰∏äÈù¢ÁöÑ‰æãÂ≠ê‰ª£Á†ÅÂèØ‰ª•ÂÜôÂú®ËøôÊ†∑Ôºö

@example
if (x % 2 == 0) print "x is even"; else
        print "x is odd"
@end example

@noindent
Â¶ÇÊûúÊ≤°Êúâ @samp{;}ÔºåÂàô @command{awk} Êó†Ê≥ïËß£Èáä‰∏äÈù¢ÁöÑËØ≠Âè•ÔºåÂõ†Ê≠§‰ºöÁîüÊàê‰∏Ä‰∏™ËØ≠Ê≥ïÈîôËØØ„ÄÇÂú®ÂÆûÈôÖÁöÑÁ®ãÂ∫è‰∏≠‰∏çË¶ÅËøô‰πàÂÜôÔºå
Âõ†‰∏∫Á®ãÂ∫èÁöÑ‰∫∫Á±ªÈòÖËØªËÄÖÊúâÂèØËÉΩ‰∏ç‰ºöÁúãÂà∞ @code{else}ÔºåÂõ†‰∏∫ÂÆÉÊ≤°Âá∫Áé∞Âú®ÂÆÉËá™Â∑±ÊâÄÂ∫îÂú®Ë°åÁöÑÁ¨¨‰∏Ä‰ΩçÁΩÆ„ÄÇ

@node While Statement
@subsection @code{while} ËØ≠Âè•
@cindex @code{while} statement
@cindex loops
@cindex loops, @code{while}
@cindex loops, See Also @code{while} statement

Âú®Á®ãÂ∫è‰∏≠ÔºåÂæ™ÁéØÊòØÁ®ãÂ∫èÁöÑ‰∏ÄÈÉ®‰ªΩÔºåÂπ∂‰∏îÂèØË¢´ËøûÁª≠‰∏§Ê¨°ÊàñËÄÖÂ§öÊ¨°Âú∞ÊâßË°å„ÄÇ
@code{while} ËØ≠Âè•ÊòØ @command{awk} ‰∏≠ÊúÄÁÆÄÂçïÁöÑÂæ™ÁéØËØ≠Âè•„ÄÇÂè™Ë¶ÅÊù°‰ª∂‰∏∫ trueÔºåÂ∞±‰ºö‰∏ÄÁõ¥ÈáçÂ§çÊâßË°å„ÄÇ‰æãÂ¶ÇÔºö

@example
while (@var{condition})
  @var{body}
@end example

@cindex body, in loops
@noindent
@var{body} ËØ≠Âè•Áß∞‰∏∫@dfn{Âæ™ÁéØ‰Ωì}ÔºåËÄå @var{condition} ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÁî®Êù•ÊéßÂà∂Âæ™ÁéØÁöÑÊâßË°å„ÄÇ
@code{while} ËØ≠Âè•ÊâÄÂÅöÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÊÉÖÂ∞±ÊòØÊµãËØï @var{condition} ÁöÑÂÄº„ÄÇ
Â¶ÇÊûú‰∏∫ trueÔºåÂàôÊâßË°åËØ≠Âè• @var{body}„ÄÇ
@ifinfo
ÔºàÂΩìËøô‰∏™ÂÄºÊòØ‰∏Ä‰∏™ÈùûÈõ∂Êï∞ÂíåÈùûÁ©∫Â≠óÁ¨¶‰∏≤ÁöÑÊó∂ÂÄôÔºå@var{condition} ÁöÑÂÄº‰∏∫ true„ÄÇÔºâ
@end ifinfo
ÂÆåÊàêÂêéÔºå@var{condition} ‰ºöË¢´ÂÜçÊ¨°ÊµãËØïÔºåÂ¶ÇÊûú‰æùÁÑ∂‰∏∫ trueÔºåÂàô @var{body} ‰ºöÂÜçÊ¨°Ë¢´ÊâßË°å„ÄÇËøô‰∏™ËøáÁ®ã‰∏ÄÁõ¥ÊåÅÁª≠Âà∞ @var{condition} ‰∏çÂÜç‰∏∫ true„ÄÇ
Â¶ÇÊûú @var{condition} ‰∏ÄÂºÄÂßãÂ∞±‰∏∫ falseÔºåËÄåÂæ™ÁéØ‰ΩìÂ∞±Ê†πÊú¨‰∏ç‰ºöÊâßË°åÔºå@command{awk} ‰ºöÁªßÁª≠ÊâßË°åÂæ™ÁéØÂêéÁöÑËØ≠Âè•„ÄÇ
‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊâìÂç∞ÊØè‰∏™ËÆ∞ÂΩïÁöÑÂ§¥‰∏â‰∏™ÂüüÔºå‰∏Ä‰∏™‰∏ÄË°åÔºö

@example
awk '
@{
    i = 1
    while (i <= 3) @{
        print $i
        i++
    @}
@}' inventory-shipped
@end example

@noindent
Ëøô‰∏™Âæ™ÁéØÁöÑÂæ™ÁéØ‰ºëÊòØ‰∏Ä‰∏™ÂåÖÂê´Âú®Ëä±Êã¨Âè∑‰∏≠ÁöÑÂ§çÂêàËØ≠Âè•ÔºåÂåÖÂê´‰∏§‰∏™ËØ≠Âè•„ÄÇÂæ™ÁéØÊåâ‰∏ãÈù¢ÁöÑÊñπÂºèÊâßË°åÔºöÈ¶ñÂÖàÔºå@code{i} ÁöÑÂÄºË¢´ËÆæÁΩÆ‰∏∫ 1„ÄÇ
ÁÑ∂Âêé @code{while} ËØ≠Âè•‰ºöÊµãËØï @code{i} ÁöÑÂÄºÊòØÂê¶‰∏∫Â∞è‰∫éÁ≠â‰∫é 3„ÄÇÂΩì @code{i} ‰∏∫ 1 Êó∂ÔºåËøôËÇØÂÆö‰∏∫ trueÔºåÂõ†Ê≠§Á¨¨ @code{i} ‰∏™ÂüüÂ∞±ÊâìÂç∞Âá∫Êù•„ÄÇ
ÁÑ∂ÂêéÊâßË°å @samp{i++} ÔºåÈÄíÂ¢û @code{i} ÁöÑÂÄºÔºåÂπ∂ÈáçÂ§çÂæ™ÁéØ„ÄÇÂΩì @code{i} ‰∏∫ 4 Êó∂ÔºåÁªìÊùüÂæ™ÁéØ„ÄÇ

Âú®Êù°‰ª∂‰∏éÂæ™ÁéØ‰Ωì‰πãÈó¥ÁöÑÊç¢Ë°å‰∏çÊòØÂøÖÈ°ªÁöÑÔºå‰ΩÜÊòØÔºå‰ΩøÁî®Êç¢Ë°å‰ºö‰ΩøÂæóÁ®ãÂ∫èÊõ¥Âä†Ê∏ÖÊô∞ÔºåÈô§ÈùûÂæ™ÁéØ‰ΩìÊòØ‰∏Ä‰∏™Â§çÂêàËØ≠Âè•ÊàñËÄÖÊòØÈùûÂ∏∏ÁÆÄÂçï„ÄÇÂºÄËä±Êã¨Âè∑ÂêéÈù¢ÁöÑÊç¢Ë°åÂºÄÂêØÂ§çÂêàËØ≠Âè•Ôºå‰πü‰∏çÊòØÂøÖÈ°ªÁöÑÔºå‰ΩÜÊòØÁ®ãÂ∫è‰∏çËøô‰πàÂ§ÑÁêÜÂ∞±ÊØîËæÉÈöæÈòÖËØª„ÄÇ

@node Do Statement
@subsection @code{do}-@code{while} ËØ≠Âè•
@cindex @code{do}-@code{while} statement
@cindex loops, @code{do}-@code{while}

@code{do} Âæ™ÁéØÊòØ @code{while} Âæ™ÁéØÁöÑÂèò‰Ωì„ÄÇ
@code{do} Âæ™ÁéØ‰∏≠ÂÖà‰ºöÊâßË°å @var{body} ‰∏ÄÊ¨°ÔºåÂ¶ÇÊûúÊù°‰ª∂‰∏∫ trueÔºåÂàô‰ºöÈáçÂ§çÊâßË°å @var{body}„ÄÇÂÆÉÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@example
do
  @var{body}
while (@var{condition})
@end example

Â∞±ÁÆóÊòØ @var{condition} ‰∏ÄÂºÄÂßã‰∏∫ falseÔºå@var{body} ‰πü‰ºöËá≥Â∞ëÊâßË°å‰∏ÄÊ¨°ÔºàÂπ∂‰∏îÂè™ÊâßË°å‰∏ÄÊ¨°ÔºåÈô§Èùû @var{body} ÂÜÖÂ∞Ü @var{condition} ÂèòÊàê trueÔºâ„ÄÇ
‰∏é @code{while} ËØ≠Âè•ÊØîËæÉËµ∑Êù•Ôºö

@example
while (@var{condition})
    @var{body}
@end example

@noindent
Ëøô‰∏™ËØ≠Âè•‰∏≠ÔºåÂ¶ÇÊûú @var{condition} ‰∏ÄÂºÄÂßã‰∏∫ falseÔºåÂàô @var{body} ‰∏ÄÊ¨°‰πü‰∏ç‰ºöË¢´ÊâßË°å„ÄÇ‰∏ãÈù¢ÊòØ @code{do} ËØ≠Âè•ÁöÑ‰∏Ä‰∏™‰æãÂ≠êÔºö

@example
@{
    i = 1
    do @{
        print $0
        i++
    @} while (i <= 10)
@}
@end example

@noindent
Ëøô‰∏™Á®ãÂ∫èÊâìÂç∞ËÆ∞ÂΩï 10 Ê¨°„ÄÇ‰ΩÜÊòØÔºåËøôÂπ∂‰∏çÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÁêÜÊÉ≥ÁöÑ‰æãÂ≠êÔºåÂõ†Ê≠§Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå
ÊôÆÈÄöÁöÑ @code{while} Âæ™ÁéØÂ∞±ÂèØ‰ª•ÂÆåÊàê‰∫Ü„ÄÇËøô‰∏™ÂèçÊò†‰∫Ü‰∏ÄÁßçÂÆûÈôÖ‰ΩøÁî®ÁªèÈ™åÔºöÂè™ÊúâÂæàÂ∞ëÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâçÈúÄË¶ÅÁúüÊ≠£‰ΩøÁî® @code{do} ËØ≠Âè•„ÄÇ

@node For Statement
@subsection @code{for} ËØ≠Âè•
@cindex @code{for} statement
@cindex loops, @code{for}, iterative

@code{for} ËØ≠Âè•ÂèØ‰ª•Êõ¥Êñπ‰æøÂú∞ÁªüËÆ°Âæ™ÁéØÁöÑËø≠‰ª£Ê¨°Êï∞„ÄÇ@code{for} ËØ≠Âè•ÁöÑ‰∏ÄËà¨Ê†ºÂºèÂ¶Ç‰∏ãÔºö

@example
for (@var{initialization}; @var{condition}; @var{increment})
  @var{body}
@end example

@noindent
@var{initialization}Ôºå@var{condition} ‰∏é @var{increment} ÁöÑÈÉ®ÂàÜÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑ @command{awk} Ë°®ËææÂºèÔºåËÄå @var{body} Ë°®Á§∫‰ªªÊÑèÁöÑ @command{awk} ËØ≠Âè•„ÄÇ

@code{for} ËØ≠Âè•‰ª•ÊâßË°å @var{initialization} ÂºÄÂßãÔºåÁÑ∂ÂêéÔºåÂè™Ë¶Å @var{condition} ‰∏∫ trueÔºåÂàô‰ºöÈáçÂ§çÊâßË°å @var{body} ‰∏é @var{increment}„ÄÇ
ÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏ãÔºå@var{initialization} Â∞ÜÊüê‰∏™ÂèòÈáèËÆæÁΩÆÊàê 0 ÊàñËÄÖ 1Ôºå@var{increment} Â∞ÜÂÖ∂Â¢ûÂä† 1ÔºåÁÑ∂Âêé @var{condition} Â∞ÜÂÖ∂‰∏éÊâÄË¶ÅËø≠‰ª£ÁöÑÊ¨°Êï∞ËøõË°åÊØîËæÉ„ÄÇ‰æãÂ¶ÇÔºö

@example
awk '
@{
    for (i = 1; i <= 3; i++)
        print $i
@}' inventory-shipped
@end example

@noindent
Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå‰ºöÊâìÂç∞ÊØè‰∏™ËÆ∞ÂΩïÁöÑÂâç‰∏â‰∏™ÂüüÔºåÊØèË°åÊâìÂç∞‰∏Ä‰∏™Âüü„ÄÇ

Âú® @var{initialization} ÈÉ®ÂàÜÔºåÂ¶ÇÊûú‰∏ç‰ΩøÁî®Â§ö‰∏™ËµãÂÄºËØ≠Âè•ÔºåÂ¶Ç @samp{x = y = 0}Ôºå‰∏çÂèØËÉΩËÆæÁΩÆÂ§ö‰∫é‰∏Ä‰∏™ÂèòÈáèÁöÑÂÄº„ÄÇËøôÂè™ÊúâÂú®ÊâÄÊúâÁöÑÂàùÂßãÂÄºÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÊâçÊúâÊÑè‰πâ„ÄÇÔºà‰ΩÜÊòØ‰∏çÂèØËÉΩÂú® @code{for} Âæ™ÁéØÂâçÔºåÁî®Âá†‰∏™ËµãÂÄºËØ≠Âè•Êù•ÂàùÂßãÂåñÂÖ∂‰ªñÂèòÈáèÁöÑÂÄº„ÄÇÔºâ

@c @cindex comma operator, not supported
Âú® @var{increment} ÈÉ®ÂàÜ‰πüÊòØ‰∏ÄÊ†∑„ÄÇÂØπÂÖ∂‰ªñÁöÑÂèòÈáèÁöÑÈÄíÂ¢ûÔºåÈúÄË¶ÅÂú®Âæ™ÁéØÁªìÊùüÊó∂Áî®Áã¨Á´ãÁöÑËØ≠Âè•Êù•ËøõË°åÈÄíÂ¢û„ÄÇC Á±ªÂûãÁöÑÂ§çÂêàË°®ËææÂºèÔºå‰ΩøÁî® C ÁöÑÈÄóÂè∑Êìç‰ΩúÁ¨¶ÔºåÂú®ËøôÊ†∑ÁöÑ‰∏ä‰∏ãÊñá‰∏≠ÂæàÊúâÁî®Ôºå‰ΩÜÊòØÂú® @command{awk} ‰∏≠‰∏çË¢´ÊîØÊåÅ„ÄÇ

Âú®Â§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå@var{increment} ÊòØ‰∏Ä‰∏™ÈÄíÂ¢ûË°®ËææÂºèÔºåÂ∞±Â¶ÇÂâçÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÁöÑ‰∏ÄÊ†∑„ÄÇ‰ΩÜÊòØÂç¥Âπ∂‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÂÆÉ‰πüÂèØ‰ª•ÊòØ‰ªªÊÑèÁöÑË°®ËææÂºè„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑËØ≠Âè•ÊâìÂç∞ 1 Âà∞ 100 ‰πãÈó¥ÁöÑ 2 Ê¨°ÂπÇÁöÑÂÄºÔºö

@example
for (i = 1; i <= 100; i *= 2)
    print i
@end example

Â¶ÇÊûúÂú® @code{for} ÂêéÈù¢Êã¨Âè∑‰∏≠ÁöÑË°®ËææÂºè‰ªÄ‰πà‰πü‰∏çÈúÄË¶ÅÂÅöÔºåÂàôÂèØ‰ª•ÁúÅÁï•ÂÆÉ‰ª¨„ÄÇÂ¶Ç @w{@samp{for (; x > 0;)}} ‰∏é @w{@samp{while (x > 0)}} ÊòØÁ≠âÂêåÁöÑ„ÄÇ
Â¶ÇÊûú @var{condition} Ë¢´ÁúÅÁï•‰∫ÜÔºåÂàôÂÖ∂Â∞ÜË¢´ËßÜ‰Ωú trueÔºåËøôÊ†∑ÂèØ‰ª•ÊúâÊïàÂú∞‰∫ßÁîü‰∏Ä‰∏™@dfn{Êó†ÈôêÂæ™ÁéØ}Ôºà‰∏ç‰ºöÁªàÊ≠¢ÁöÑÂæ™ÁéØÔºâ„ÄÇ

Âú®Â§öÊï∞ÊÉÖÂÜµ‰∏ãÔºå@code{for} Âæ™ÁéØÊòØ @code{while} Âæ™ÁéØÁöÑ‰∏Ä‰∏™ÁÆÄÂÜôÊñπÂºèÔºåÂ¶Ç‰∏ãÈù¢ÊâÄÁ§∫Ôºö

@example
@var{initialization}
while (@var{condition}) @{
  @var{body}
  @var{increment}
@}
@end example

@cindex loops, @code{continue} statements and
@noindent
ÂîØ‰∏ÄÁöÑ‰æãÂ§ñÊòØÂú®Âæ™ÁéØ‰∏≠‰ΩøÁî® @code{continue} ËØ≠Âè•Êó∂ÔºàÊü•Áúã @ref{Continue Statement}Ôºâ„ÄÇ
Â∞Ü @code{for} Âæ™ÁéØÊîπ‰∏∫ @code{while} Âæ™ÁéØÔºå‰πüËÉΩÂ§üÊîπÂèòÂæ™ÁéØÂÜÖÁöÑ @code{continue} ËØ≠Âè•ÁöÑÁªìÊûú„ÄÇ

@command{awk} ËØ≠Ë®ÄÈô§‰∫Ü @code{while} ËøòË¶ÅÂä†‰∏ä‰∏Ä‰∏™ @code{for} Âæ™ÁéØÔºå‰∏ªË¶ÅÊòØÂõ†‰∏∫ @code{for} Âæ™ÁéØÈÄöÂ∏∏ÊúâÊõ¥Â∞ëÁöÑÊï≤ÂáªËæìÂÖ•ÔºåÂêåÊó∂‰πüÊòØ‰∏ÄÁßçÂæàËá™ÁÑ∂ÁöÑËøáÁ®ã„ÄÇÁªüËÆ°Ëø≠‰ª£Ê¨°Êï∞Âú®Âæ™ÁéØ‰∏≠ÊòØ‰∏ÄÁßçÂæàÊôÆÈÅçÁöÑ‰∫ãÊÉÖ„ÄÇÂ∞ÜËøôÁßçÁªüËÆ°‰Ωú‰∏∫Âæ™ÁéØÁöÑ‰∏ÄÈÉ®‰ªΩË¶ÅÊØîÂú®Âæ™ÁéØÂÜÖÈÉ®Êù•ÂÅöËøô‰∫õ‰∫ãÊÉÖË¶ÅÊõ¥ÂÆπÊòì„ÄÇ

@cindex @code{in} operator
ËøôÊòØÂè¶‰∏ÄÁßçÁâàÊú¨ÁöÑ @code{for} Âæ™ÁéØÔºå@code{for} Ëø≠‰ª£Êï∞ÁªÑÁöÑÊâÄÊúâ‰∏ãÊ†áÔºö

@example
for (i in array)
    @var{do something with} array[i]
@end example

@noindent
Êü•Áúã @ref{Scanning an Array}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑÂÖ≥‰∫é @code{for} Âæ™ÁéØÁöÑ‰ø°ÊÅØ„ÄÇ

@node Switch Statement
@subsection @code{switch} ËØ≠Âè•
@cindex @code{switch} statement
@cindex @code{case} keyword
@cindex @code{default} keyword

Êú¨@value{SECTION}ÊèèËø∞ÁöÑÊòØ‰∏Ä‰∏™ @command{gawk} ‰∏ìÊúâÁöÑÁâπÊÄß„ÄÇÂ¶ÇÊûú @command{gawk} ÊòØÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂàôËøô‰∏™ÁâπÊÄßÂ∞±‰∏çÂèØÁî®„ÄÇ

@code{switch} ËØ≠Âè•ÂÖÅËÆ∏ÂØπË°®ËææÂºèÊ±ÇÂÄºÔºåÂπ∂ÈíàÂØπÂåπÈÖçÁöÑÂÄºÊù•ÊâßË°å‰∏çÂêåÁöÑËØ≠Âè•„ÄÇ
@code{case} ËØ≠Âè•Áî®Êù•È°∫Â∫èÂú∞Ê£ÄÊü•ÊâÄÂÆö‰πâÁöÑÂåπÈÖç„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂêàÈÄÇÁöÑ @code{case}ÔºåÂ¶ÇÊûúÊèê‰æõ‰∫Ü @code{default} ÊÆµÔºåÂàô @code{default} ÊÆµ‰ºöË¢´ÊâßË°å„ÄÇ

ÊØè‰∏™ @code{case} ‰∏≠ÂåÖÂê´‰∏Ä‰∏™Â∏∏ÈáèÔºåÂèØ‰ª•ÊòØÊï∞ÂÄºÔºåÂ≠ó‰∏≤ÊàñËÄÖÊ≠£ÂàôË°®ËææÂºè„ÄÇ@code{switch} Ë°®ËææÂºèË¢´Ê±ÇÂÄºÂêéÔºå‰ºöÊåâÈ°∫Â∫èÂØπ @code{case} ‰∏≠ÁöÑÂ≠¶Â∏∏ÈáèËøõË°åÊØîËæÉ„ÄÇ
Â∏∏ÈáèÁöÑÁ±ªÂûãÂÜ≥ÂÆö‰∫ÜÊØîËæÉÁöÑÁ±ªÂûãÔºöÊï∞ÂÄºÁöÑÔºåËøòÊòØÂ≠ó‰∏≤ÁöÑ„ÄÇ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÊâßË°åÁöÑÊòØÈíàÂØπÂàùÂßãË°®ËææÂºèÁöÑÂÄºÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖç„ÄÇ‰∏ÄËà¨Âú∞Ôºå@code{switch} ËØ≠Âè•ÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@example
switch (@var{expression}) @{
case @var{value or regular expression}:
    @var{case-body}
default:
    @var{default-body}
@}
@end example

@code{switch} ÁöÑÊéßÂà∂ÊµÅ‰∏é C ‰∏≠ÁöÑÊâßË°å‰∏ÄËá¥„ÄÇÂè™Ë¶Å‰∏éÁªôÂÆöÁöÑ @code{case} ÂåπÈÖç‰∫ÜÔºå@code{case} ËØ≠Âè•‰Ωì‰∏≠ÁöÑËØ≠Âè•Â∞±‰ºöË¢´ÊâßË°åÔºåÁõ¥Âà∞ÈÅáÂà∞ @code{break}Ôºå@code{continue}Ôºå@code{next}Ôºå@code{nextfile}ÔºåÊàñËÄÖÊòØ @code{exit}ÔºåÊàñËÄÖÊòØ @code{switch} ËØ≠Âè•Êú¨Ë∫´ÁöÑÁªìÊùü„ÄÇ

@example
while ((c = getopt(ARGC, ARGV, "aksx")) != -1) @{
    switch (c) @{
    case "a":
        # report size of all files
        all_files = TRUE;
        break
    case "k":
        BLOCK_SIZE = 1024       # 1K block size
        break
    case "s":
        # do sums only
        sum_only = TRUE
        break
    case "x":
        # don't cross filesystems
        fts_flags = or(fts_flags, FTS_XDEV)
        break
    case "?":
    default:
        usage()
        break
    @}
@}
@end example

Ë¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂ¶ÇÊûúËøôÈáåÊ≤°ÊúâÊåáÂÆö‰ªª‰ΩïËØ≠Âè•ÔºåÂàô‰ºöÂÅúÊ≠¢ÊâßË°åÂåπÈÖçÁöÑ @code{case} ËØ≠Âè•ÔºåÂàôÊâßË°åÊµÅÁ®ã‰ºöËêΩÂÖ•‰∏ã‰∏Ä‰∏™ @code{case} ‰∏≠ÔºåÁõ¥Âà∞ÊâßË°å‰∏≠Ê≠¢„ÄÇ
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@code{"?"} ÁöÑ @code{case} ‰∏≠Ôºå‰ºöËêΩÂÖ•Âà∞ @code{default} @code{case} ‰∏≠ÊâßË°åÔºåÂπ∂Âú®ÂÖ∂‰∏≠Ë∞ÉÁî® @code{usage()} ÂáΩÊï∞„ÄÇ
ÂÖ∂‰∏≠ÊâÄË∞ÉÁî®ÁöÑ @code{getopt()} ÂáΩÊï∞Âú® @ref{Getopt Function} ÊèèËø∞„ÄÇÔºâ

@node Break Statement
@subsection @code{break} ËØ≠Âè•
@cindex @code{break} statement
@cindex loops, exiting
@cindex loops, @code{break} statement and

@code{break} ËØ≠Âè•Ë∑≥Âá∫ÊúÄÂåÖÂê´ËØ•ËØ≠Âè•ÁöÑÊúÄÂÜÖÂ±ÇÁöÑ @code{for}Ôºå@code{while}Ôºå@code{do} Âæ™ÁéØ„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊü•Êâæ‰ªªÊÑèÊï¥Êï∞ÁöÑÊúÄÂ∞èÂõ†Êï∞ÔºåÂπ∂Âà§Êñ≠ÊòØÂê¶‰∏∫Ë¥®Êï∞Ôºö

@example
# find smallest divisor of num
@{
    num = $1
    for (divisor = 2; divisor * divisor <= num; divisor++) @{
        if (num % divisor == 0)
            break
    @}
    if (num % divisor == 0)
        printf "Smallest divisor of %d is %d\n", num, divisor
    else
        printf "%d is prime\n", num
@}
@end example

ÂΩìÁ¨¨‰∏Ä‰∏™ @code{if} ËØ≠Âè•‰∏≠ÁöÑ‰ΩôÊï∞ÊòØ 0 Êó∂Ôºå@command{awk} Â∞±Áõ¥Êé•Ë∑≥Âá∫Âæ™ÁéØ„ÄÇËøôË°®Á§∫ @command{awk} ‰ºöÊâßË°åÁõ¥Êé•Ë∑üÂú®Âæ™ÁéØÂêéÈù¢ÁöÑËØ≠Âè•„ÄÇ
ÔºàËøô‰∏é @code{exit} ÈùûÂ∏∏‰∏çÂêåÔºå@code{exit} ‰ºöÂÅúÊ≠¢Êï¥‰∏™ @command{awk} Á®ãÂ∫èÔºåÊü•Áúã @ref{Exit Statement}„ÄÇÔºâ

‰∏ãÈù¢ÁöÑÁ®ãÂ∫èËß£Èáä‰∫ÜÂú® @code{for} ÊàñËÄÖ @code{while} Âæ™ÁéØËØ≠Âè•‰∏≠ÁöÑ @var{condition}ÔºåÂ¶Ç‰ΩïÁî® @code{if} ‰∏≠ÁöÑ @code{break} Êù•‰ª£ÊõøÔºö

@example
# find smallest divisor of num
@{
    num = $1
    for (divisor = 2; ; divisor++) @{
        if (num % divisor == 0) @{
            printf "Smallest divisor of %d is %d\n", num, divisor
            break
        @}
        if (divisor * divisor > num) @{
            printf "%d is prime\n", num
            break
        @}
    @}
@}
@end example

@code{break} ËØ≠Âè•‰πüÁî®Êù•‰∏≠Êñ≠ @code{switch} ‰∏≠ÁöÑËØ≠Âè•„ÄÇËøôÂú® @ref{Switch Statement}ÔºåËøõË°å‰∫ÜÊèèËø∞„ÄÇ

@c @cindex @code{break}, outside of loops
@c @cindex historical features
@c @cindex @command{awk} language, POSIX version
@cindex POSIX @command{awk}, @code{break} statement and
@cindex dark corner, @code{break} statement
@cindex @command{gawk}, @code{break} statement in
@cindex Brian Kernighan's @command{awk}
Âú®Âæ™ÁéØ‰ΩìÊàñËÄÖ @code{switch} Â§ñÈù¢‰ΩøÁî® @code{break} Ê≤°ÊúâÊÑè‰πâ„ÄÇ‰ΩÜÊòØÔºåËôΩÁÑ∂Ê≤°ÊúâÂú®ÊñáÊ°£‰∏≠ËÆ∞ÂΩï‰∏ãÊù•Ôºå@command{awk} ÁöÑÂéÜÂè≤ÁâàÊú¨‰∏≠Â∞ÜÂæ™ÁéØÂ§ñÁöÑ @code{break} ËØ≠Âè•ÔºåÂΩìÊàêÊòØ‰∏Ä‰∏™ @code{next} ËØ≠Âè•ÔºàÊü•Áúã @ref{Next Statement}Ôºâ„ÄÇ
@value{DARKCORNER}
ËøëÊù•ÁöÑ BWK @command{awk} ÁâàÊú¨‰∏çÂÜçÂÖÅËÆ∏ËøôÊ†∑ÁöÑÁî®Ê≥ïÔºå@command{gawk} ‰πü‰∏çÂÖÅËÆ∏„ÄÇ

@node Continue Statement
@subsection @code{continue} ËØ≠Âè•

@cindex @code{continue} statement
‰∏é @code{break} Á±ªÂûãÔºå@code{continue} ËØ≠Âè•Âè™Ë¶Å @code{for}Ôºå@code{while}Ôºå‰ª•Âèä @code{do} Âæ™ÁéØ‰∏≠‰ΩøÁî®ÔºåÂÆÉË∑ØËøáÂæ™ÁéØ‰ΩìÂêéÈù¢ÁöÑÈÉ®ÂàÜÔºå‰ΩøÂæó‰∏ã‰∏Ä‰∏™Âæ™ÁéØÁ´ãÂç≥ÂºÄÂßã„ÄÇ
‰∏é @code{break} Áõ∏ÊØîÔºåÂÆÉÂè™ÊòØË∑≥Âá∫Âæ™ÁéØ„ÄÇ

@code{for} Âæ™ÁéØ‰∏≠ÁöÑ @code{continue} ËØ≠Âè•ÔºåÂºïÂØº @command{awk} Ë∑ØËøáÂæ™ÁéØ‰ΩìÂêéÈù¢ÁöÑÈÉ®ÂàÜÔºåÂπ∂ÊâßË°å @code{for} ËØ≠Âè•‰∏≠ÁöÑÈÄíÂ¢ûË°®ËææÂºèÔºàincrement-expressionÔºâ„ÄÇ
‰∏ãÈù¢ÁöÑÁ®ãÂ∫èËß£Èáä‰∫ÜËøôÊ†∑ÁöÑÊÉÖÂΩ¢Ôºö

@example
BEGIN @{
     for (x = 0; x <= 20; x++) @{
         if (x == 5)
             continue
         printf "%d ", x
     @}
     print ""
@}
@end example

@noindent
Ëøô‰∏™Á®ãÂ∫èÊâìÂç∞ 0 Âà∞ 20 ‰πãÈó¥ÁöÑÊï∞ÔºåÈô§‰∫Ü 5 Â§ñÔºåÂõ†‰∏∫Âú®Ëøô‰∏™Êï∞ÂÄºÊó∂ @code{printf} Ë¢´Ë∑≥Ëøá‰∫Ü„ÄÇÂõ†‰∏∫ @samp{x++} Âπ∂Ê≤°ÊúâË¢´Ë∑≥ËøáÔºåÂõ†Ê≠§Ôºåx ÁöÑÂÄº‰∏ç‰ºöÂç°Âú® 5 ‰∏ä„ÄÇ
‰∏ãÈù¢ÁöÑ @code{while} Âæ™ÁéØ‰∏éÂâçÈù¢ÁöÑ @code{for} Âæ™ÁéØÁõ∏ÊØîÔºö

@example
BEGIN @{
     x = 0
     while (x <= 20) @{
         if (x == 5)
             continue
         printf "%d ", x
         x++
     @}
     print ""
@}
@end example

@noindent
Ëøô‰∏™Á®ãÂ∫è‰∏≠ÔºåÂè™Ë¶Å x ËææÂà∞ 5 Â∞±‰ºöÊàê‰∏∫‰∏Ä‰∏™Ê≠ªÂæ™ÁéØÔºåÂõ†‰∏∫ÈÄíÂ¢ûËØ≠Âè•Ôºà@samp{x++}ÔºâÊ∞∏Ëøú‰∏ç‰ºöÊâßË°å„ÄÇ

@c @cindex @code{continue}, outside of loops
@c @cindex historical features
@c @cindex @command{awk} language, POSIX version
@cindex POSIX @command{awk}, @code{continue} statement and
@cindex dark corner, @code{continue} statement
@cindex @command{gawk}, @code{continue} statement in
@cindex Brian Kernighan's @command{awk}
‰∏é @code{switch} ËØ≠Âè•ÂØπÂ∫îÔºå@code{continue} ËØ≠Âè•Âπ∂Ê≤°ÊúâÁâπÂà´ÁöÑÂê´‰πâÔºåÂú®Âæ™ÁéØ‰Ωì‰πãÂ§ñ‰πüÊ≤°Êúâ‰ªÄ‰πàÁâπÂà´ÁöÑÂê´‰πâ„ÄÇ
@command{awk} ÁöÑÂéÜÂè≤ÁâàÊú¨Â∞ÜÂæ™ÁéØ‰Ωì‰πãÂ§ñÁöÑ @code{continue} ‰∏éÂæ™ÁéØ‰Ωì‰πãÂ§ñÁöÑÁöÑ @code{break} ‰∏ÄÊ†∑ÂØπÂæÖÔºöÂ∞±ÂÉèÂÆÉÊòØ‰∏Ä‰∏™ @code{next} ËØ≠Âè•‰∏ÄÊ†∑
@ifset FOR_PRINT
ÔºàÂú®ÂêéÈù¢ÁöÑ@value{SECTION}‰∏≠ËÆ®ËÆ∫Ôºâ„ÄÇ
@end ifset
@ifclear FOR_PRINT
ÔºàÊü•Áúã @ref{Next Statement}Ôºâ„ÄÇ
@end ifclear
@value{DARKCORNER}
BWK @command{awk} ÁöÑÂêéÈù¢ÁöÑÁâàÊú¨‰∏çÂÜçËøô‰πàÂ§ÑÁêÜÔºå@command{gawk} ‰πü‰∏çËøô‰πàÂÅö„ÄÇ

@node Next Statement
@subsection @code{next} ËØ≠Âè•
@cindex @code{next} statement

@code{next} ËØ≠Âè•Âº∫Âà∂ @command{awk} Á´ãÂç≥ÂÅúÊ≠¢ÂΩìÂâçËÆ∞ÂΩïÁöÑÂ§ÑÁêÜÂπ∂Â§ÑÁêÜ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇ
ËøôË°®Á§∫ÈíàÂØπÂΩìÂâçÁöÑËÆ∞ÂΩï‰∏çÂÜçËøõ‰∏ÄÊ≠•ËøõË°åËßÑÂàôÁöÑÂåπÈÖçÔºåÂΩìÂâçËßÑÂàôÁöÑ‰Ωô‰∏ãÈÉ®ÂàÜ‰πü‰∏çË¢´ÊâßË°å„ÄÇ

‰∏é @code{getline} ÂáΩÊï∞ÔºàÊü•Áúã @ref{Getline}ÔºâËøõË°åÂØπÊØî„ÄÇ@code{getline} ‰πü‰ºöÂØºËá¥ @command{awk} Á´ãÂç≥ËØªÂèñ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÔºå
‰ΩÜÊòØÂπ∂Ê≤°ÊúâÊîπÂèòÊéßÂà∂ÊµÅÔºàÂç≥ÔºåÂΩìÂâçÁöÑÂä®‰Ωú‰ºöÂú®Êñ∞ÁöÑËÆ∞ÂΩï‰∏äÊâßË°åÔºâ„ÄÇ

@cindex @command{awk} programs, execution of
Âú®ÊúÄÈ´òÁ∫ß‰∏äÔºå@command{awk} Á®ãÂ∫èÊòØËøôÊ†∑ÁöÑ‰∏Ä‰∏™Âæ™ÁéØÔºåÂç≥ËØªÂèñ‰∏ÄÊù°ËÆ∞ÂΩïÔºåÁÑ∂Âêé‰∏éÊØè‰∏Ä‰∏™Ê®°ÂºèËøõË°åÂåπÈÖç„ÄÇ
Â¶ÇÊûú‰Ω†ÊääËøôÊ†∑ÁöÑ‰∏Ä‰∏™Âæ™ÁéØÁúãÊàêÊòØ‰∏Ä‰∏™ @code{for} ËØ≠Âè•ÔºåÂÖ∂Âæ™ÁéØ‰ΩìÂåÖÂê´‰∫ÜËøô‰∫õËßÑÂàôÔºåÁÑ∂ÂêéÔºå@code{next} ËØ≠Âè•Âàô‰∏é @code{continue} ËØ≠Âè•Á±ª‰ºº„ÄÇÂÆÉ‰ºöË∑≥ËøáËøô‰∏™ÈöêÂºèÂæ™ÁéØÁöÑÂêéÈù¢ÈÉ®ÂàÜÔºåÁÑ∂ÂêéÊâßË°åÈÄíÂ¢ûÔºà‰πüÂ∞±ÊòØËØªÂèñ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÔºâ„ÄÇ

‰æãÂ¶ÇÔºåÂÅáËÆæ‰∏Ä‰∏™ @command{awk} Á®ãÂ∫èÂ§ÑÁêÜÁöÑËÆ∞ÂΩïÂè™Êúâ 4 ‰∏™ÂüüÔºåÂπ∂‰∏îÂΩìËæìÂÖ•‰∏çËßÑËåÉÊó∂‰∏ç‰ºöÂØºËá¥Â§±Ë¥•„ÄÇ
‰∏∫‰∫ÜÈÅøÂÖçÂêéÈù¢Á®ãÂ∫èÁöÑÂ§çÊùÇÊÄßÔºåÁî®‰∏ãÈù¢ÁöÑÊñπÂºèÔºåÂú®ÂºÄÂ§¥Â§ÑËøô‰∏Ä‰∏™ËøôÊ†∑ÁöÑ‚ÄúÊéíÈô§‚Äù‰ª£Á†ÅÔºö

@example
NF != 4 @{
    printf("%s:%d: skipped: NF != 4\n", FILENAME, FNR) > "/dev/stderr"
    next
@}
@end example

@noindent
Áî±‰∫éÊúâ‰∏Ä @code{next} ËØ≠Âè•ÔºåÁ®ãÂ∫èÂêéÈù¢ÁöÑËßÑÂàôÂ∞±‰∏ç‰ºöÂÜçÁúãÂà∞ÈÇ£‰∫õ‰∏çËßÑËåÉÁöÑËÆ∞ÂΩï„ÄÇÈîôËØØÁöÑ‰ø°ÊÅØ‰ºöË¢´ÈáçÂÆöÂêëÂà∞Ê†áÂáÜÈîôËØØËæìÂá∫ÊµÅ‰∏äÔºåÊ≠£Â¶ÇÈîôËØØ‰ø°ÊÅØÂ∫îËØ•Ëøô‰πàË¢´Â§ÑÂ§ÑÁêÜ‰∏ÄÊ†∑„ÄÇË¶ÅÂèñÂæóÊõ¥Â§öÁöÑ‰ø°ÊÅØÔºåËØ∑Êü•Áúã @ref{Special Files}„ÄÇ

Â¶ÇÊûú @code{next} ËØ≠Âè•ÂØºËá¥‰∫ÜËæìÂÖ•Êñá‰ª∂ÁöÑÁªìÊùüÔºåÂàôÂú® @code{END} ËßÑÂàôÈáåÁöÑ‰ª£Á†ÅÂ∞±‰ºöË¢´ÊâßË°åÔºåÊü•Áúã @ref{BEGIN/END}„ÄÇ

@code{next} ËØ≠Âè•‰∏çÂèØ‰ª•‰ΩøÁî®Âú® @code{BEGINFILE} ‰∏é @code{ENDFILE} ËßÑÂàô‰∏≠ÔºåÊü•Áúã @ref{BEGINFILE/ENDFILE}„ÄÇ

@c @cindex @command{awk} language, POSIX version
@c @cindex @code{next}, inside a user-defined function
@cindex @code{BEGIN} pattern, @code{next}/@code{nextfile} statements and
@cindex @code{END} pattern, @code{next}/@code{nextfile} statements and
@cindex POSIX @command{awk}, @code{next}/@code{nextfile} statements and
@cindex @code{next} statement, user-defined functions and
@cindex functions, user-defined, @code{next}/@code{nextfile} statements and
Ê†πÊçÆ POSIX Ê†áÂáÜÔºåÂ¶ÇÊûú @code{next} ËØ≠Âè•Áî®Âú® @code{BEGIN} ‰∏é @code{END} ËßÑÂàô‰∏≠ÔºåÂÖ∂Ë°å‰∏∫ÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇ
@command{gawk} Â∞ÜÂÖ∂ËßÜ‰∏∫ËØ≠Ê≥ïÈîôËØØ„ÄÇÂ∞ΩÁÆ° POSIX Ê≤°ÊúâÁ¶ÅÊ≠¢Ôºå‰ΩÜÂ§ßÂ§öÊï∞ÁöÑ @command{awk} ÂÆûÁé∞‰∏çÂáÜÂú®ÂáΩÊï∞‰ΩìÂÜÖ
ÔºàÊü•Áúã @ref{User-defined}Ôºâ‰ΩøÁî® @code{next} ËØ≠Âè•„ÄÇ‰∏éÂÖ±‰ªñÁöÑÂ§ÑÁöÑ @code{next} ËØ≠Âè•‰∏ÄÊ†∑Ôºå
Âú®ÂáΩÊï∞ÂÜÖÁöÑ @code{next} ËØ≠Âè•‰πüÊòØËØªÂèñ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁÑ∂Âêé‰ªéÁ®ãÂ∫èÁöÑÁ¨¨‰∏Ä‰∏™ËßÑÂàôÂºÄÂßãÂ§ÑÁêÜ„ÄÇ

@node Nextfile Statement
@subsection @code{nextfile} ËØ≠Âè•
@cindex @code{nextfile} statement

@code{nextfile} ‰∏é @code{next} ËØ≠Âè•Á±ª‰ºº„ÄÇ‰ΩÜÊòØ‰∏çÊòØÊîæÂºÉÂ§ÑÁêÜÂΩìÂâçËÆ∞ÂΩïÔºå@code{nextfile} ÂàôÊòØÈÄöÁü• @command{awk} ÂÅúÊ≠¢Â§ÑÁêÜÂΩìÂâçÁöÑ@value{DF}„ÄÇ

ÈöèÁùÄ @code{nextfile} ÁöÑÊâßË°åÔºå@code{FILENAME} ‰πü‰ºöÊõ¥Êñ∞‰ª•ÂèçÊò†ÂëΩ‰ª§Ë°åÂàóË°®‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™@value{DF}„ÄÇ
@code{FNR} ÂàôË¢´ÈáçÁΩÆ‰∏∫ 0ÔºåÂ§ÑÁêÜÊµÅÁ®ãÂõûÂà∞Á®ãÂ∫è‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ËßÑÂàô‰∏≠„ÄÇ
Â¶ÇÊûú @code{nextfile} ËØ≠Âè•ÂØºËá¥‰∫ÜËæìÂÖ•ÁöÑÁªìÊùüÔºåÂàôÂú® @code{END} ËßÑÂàô‰∏≠ÁöÑ‰ª£Á†ÅÂ∞±‰ºöË¢´ÊâßË°å„ÄÇ‰∏Ä‰∏™‰æãÂ§ñÂ∞±ÊòØËøô‰∏™ @code{nextfile} ÊòØÂú®ÊâßË°å @code{END} ËßÑÂàô‰∏≠Ë¢´Ë∞ÉÁî®ÁöÑÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ºöÂØºËá¥Á®ãÂ∫èÈÄÄÂá∫„ÄÇ
Êü•Áúã @ref{BEGIN/END}„ÄÇ

ÂΩìÊúâÂæàÂ§öÁöÑÊï∞ÊçÆÊñá‰ª∂Ë¶ÅÂ§ÑÁêÜÔºå‰ΩÜÊòØ‰∏çÈúÄË¶ÅÂ§ÑÁêÜÊØè‰∏™Êñá‰ª∂‰∏≠ÁöÑÊØè‰∏™ËÆ∞ÂΩïÁöÑÊÉÖÂÜµ‰∏ãÔºå@code{nextfile} ËØ≠Âè•ÈùûÂ∏∏ÊúâÁî®„ÄÇ
Â¶ÇÊûúÊ≤°Êúâ @code{nextfile}Ôºå‰∏∫‰∫ÜË¶ÅÂ§ÑÁêÜ‰∏ã‰∏Ä‰∏™@value{DF}ÔºåÁ®ãÂ∫èÂ∞±ÂæóÊñ≠Áª≠ËæìÂÖ•ÈÇ£‰∫õ‰∏çÈúÄË¶ÅÁöÑËÆ∞ÂΩï„ÄÇ@code{nextfile} ËØ≠Âè•‰ª•‰∏ÄÁßçÊõ¥‰∏∫È´òÊïàÁöÑÊñπÂºèÊù•ÂÆåÊàêËøôÊ†∑ÁöÑÁõÆÊ†á„ÄÇ

Âú® @command{gawk} ‰∏≠Ôºå@code{nextfile} ÁöÑÊâßË°å‰ºöÂØºËá¥‰∏Ä‰∫õÂÖ∂‰ªñÁöÑ‰∫ãÊÉÖÂèëÁîüÔºöÂ¶ÇÊûú @command{gawk} ÂΩìÂâçÊ≤°ÊúâÊâßË°å @code{END} ÊàñËÄÖ @code{ENDFILE} ËßÑÂàôÔºå
Âàô‰ºöÂØºËá¥ÊâÄÊúâ @code{ENDFILE} Ë¢´ÊâßË°åÔºå@code{ARGIND} ‰ºöË¢´ÈÄíÂ¢ûÔºåÊâÄÊúâÁöÑ @code{BEGINFILE} ‰ºöË¢´ÊâßË°å„ÄÇÔºà@code{ARGIND} ËøòÊ≤°Êúâ‰ªãÁªç„ÄÇ
Êü•Áúã @ref{Built-in Variables}„ÄÇÔºâ

ÂØπ‰∫é @command{gawk}ÔºåÂú® @code{BEGINFILE} ËßÑÂàô‰∏≠Ë∑≥Ëøá‰∏Ä‰∏™‰ºöÂØºËá¥ @command{gawk} Âõ†‰∏∫Ëá¥ÂëΩÈîôËØØËÄåÈÄÄÂá∫ÁöÑÊñá‰ª∂‰πüÈùûÂ∏∏ÊúâÁî®„ÄÇ
Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@code{ENDFILE} ‰∏ç‰ºöË¢´ÊâßË°å„ÄÇÊü•Áúã @ref{BEGINFILE/ENDFILE}„ÄÇ

Â∞ΩÁÆ°ÊúâÂèØËÉΩÁúãÂà∞Áî® @samp{close(FILENAME)} Êù•ÂÆåÊàêÂ¶Ç @code{nextfile} ‰∏ÄÊ†∑ÁöÑÂäüËÉΩÔºå‰ΩÜÊòØ‰∫ãÂÆûÂç¥‰∏çÊòØËøôÊ†∑ÁöÑ„ÄÇ
@code{close()} ‰øùÁïôÁî®Êù•ÂÖ≥Èó≠ÊâìÂºÄÁî®‰∫éÈáçÂÆöÂêëÁöÑÊñá‰ª∂„ÄÅÁÆ°ÈÅì‰ª•ÂèäÂπ∂Á®ã„ÄÇÂÆÉ‰∏é‰∏ªËøáÁ®ãÊ≤°ÊúâÂÖ≥Á≥ªÔºåÂÆÉ‰ª¨‰∏çÂ§ÑÁêÜ @command{awk} ÁöÑ @code{ARGV} ‰∏≠ÁöÑÊñá‰ª∂„ÄÇ

@quotation ÊèêÁ§∫
ËÆ∏Â§öÂπ¥‰∫ÜÔºå@code{nextfile} ‰∏ÄÁõ¥ÊòØ‰∏Ä‰∏™Êâ©Â±ï„ÄÇÂú® 2012 Âπ¥ 9 ÊúàÔºåÂÆÉÊä•ÊéàÂèóÂπ∂ÂåÖÂê´Âú® POSIX Ê†áÂáÜ‰∏≠ÔºåÊü•Áúã @uref{http://austingroupbugs.net/view.php?id=607, Austin Group ÁöÑÁΩëÁ´ô}„ÄÇ
@end quotation

@cindex functions, user-defined, @code{next}/@code{nextfile} statements and
@cindex @code{nextfile} statement, user-defined functions and
@cindex Brian Kernighan's @command{awk}
@cindex @command{mawk} utility
BWK @command{awk} ‰∏é @command{mawk} ÁöÑÊúÄÊñ∞ÁâàÊú¨‰πüÊîØÊåÅ @code{nextfile}„ÄÇ‰ΩÜÊòØÔºåÂÆÉ‰ª¨‰∏çÂÖÅËÆ∏Âú®ÂáΩÊï∞‰Ωì
ÔºàÊü•Áúã @ref{User-defined}Ôºâ‰∏≠‰ΩøÁî® @code{nextfile} ËØ≠Âè•„ÄÇ@command{gawk} ÂàôÂÖÅËÆ∏„ÄÇ
Âú®ÂáΩÊï∞‰ΩìÂÜÖÁöÑ @code{nextfile} ‰ºöËØªÂèñ‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÔºåÁÑ∂Âêé‰ªéÁ®ãÂ∫èÁöÑÁ¨¨‰∏ÄÊù°ËßÑÂàôÂºÄÂßãÂ§ÑÁêÜÔºåËøô‰∏éÂÖ∂‰ªñÂ§ÑÁöÑ @code{nextfile} ËØ≠Âè•‰∏ÄÊ†∑„ÄÇ

@node Exit Statement
@subsection @code{exit} ËØ≠Âè•

@cindex @code{exit} statement
@code{exit} ËØ≠Âè•‰ºöÂØºËá¥ @command{awk} Á´ãÂç≥ÂÅúÊ≠¢ÊâßË°åÂΩìÂâçÁöÑËßÑÂàôÔºåÂπ∂ÂÅúÊ≠¢Â§ÑÁêÜËæìÂÖ•ÔºåÊâÄÊúâÂâ©‰∏ãÁöÑËæìÂÖ•ÈÉΩÂ∞ÜË¢´ÂøΩÁï•„ÄÇ@code{exit} ÁöÑÂÜôÊ≥ïÂ¶Ç‰∏ãÔºö

@display
@code{exit} [@var{return code}]
@end display

@cindex @code{BEGIN} pattern, @code{exit} statement and
@cindex @code{END} pattern, @code{exit} statement and
ÂΩìÂú® @code{BEGIN} ËßÑÂàô‰∏≠ÊâßË°å @code{exit} ËØ≠Âè•Êó∂ÔºåÁ®ãÂ∫è‰ºöÁ´ãÂç≥ÂÅúÊ≠¢‰∏ÄÂàáÂ§ÑÁêÜ„ÄÇ‰πüÊ≤°ÊúâËæìÂÖ•ËÆ∞ÂΩïË¢´ËØªÂèñÔºåÂ¶ÇÊûúÊèê‰æõ‰∫Ü @code{END} ËßÑÂàôÔºå
‰ºö‰Ωú‰∏∫ÊâßË°å @code{exit} ËØ≠Âè•ÁöÑ‰∏ÄÈÉ®‰ªΩÔºåËÄåË¢´ÊâßË°åÔºàÊü•Áúã @ref{BEGIN/END}Ôºâ„ÄÇÂ¶ÇÊûúÂú® @code{END} ËßÑÂàô‰∏≠‰ΩøÁî® @code{exit}Ôºå‰ºöÂØºËá¥Á®ãÂ∫èÁ´ãÂç≥ÂÅúÊ≠¢„ÄÇ

@code{exit} ËØ≠Âè•Â¶ÇÊûú‰∏çÊòØ @code{BEGIN} ÊàñËÄÖ @code{END} ËßÑÂàô‰∏ÄÈÉ®‰ªΩÔºåÂàô‰ºöÂÅúÊ≠¢‰ªª‰ΩïÂêéÁª≠ÁöÑÈíàÂØπÂΩìÂâçËÆ∞ÂΩïÁöÑËá™Âä®ËßÑÂàôÁöÑÊâßË°åÔºåÂπ∂‰∏çÂÜçËØªÂèñÂâ©‰∏ãÁöÑËæìÂÖ•ËÆ∞ÂΩïÔºå
ÁÑ∂ÂêéÂ¶ÇÊûúÊúâ @code{END} ËßÑÂàôÔºåÂàôÊâßË°å„ÄÇ@command{gawk} ‰πü‰ºöË∑≥Ëøá @code{ENDFILE} ËßÑÂàôÔºåÂõ†Ê≠§‰∏ç‰ºöÊâßË°å„ÄÇ

Âú®ËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰Ω†‰∏çÊÉ≥ @code{END} ËßÑÂàôË¢´ÊâßË°åÔºåÂèØ‰ª•Â∞ÜÊüê‰∏™ÂèòÈáèÁöÑÂÄºËÆæÁΩÆÊàêÈùûÈõ∂ÂÄºÔºåÁÑ∂ÂêéÂú® @code{END} ËßÑÂàô‰∏≠ÁöÑ @code{exit} ËØ≠Âè•ÂâçÔºå
Âà§Êñ≠Ëøô‰∏™ÂèòÈáèÁöÑÂÄº„ÄÇÊü•Áúã @ref{Assert Function}ÔºåÊù•ÂèÇËÄÉËøôÊ†∑ÁöÑÂÖ∑‰Ωì‰æãÂ≠ê„ÄÇ

@cindex dark corner, @code{exit} statement
Â¶ÇÊûúÁªô @code{exit} ËØ≠Âè•Êèê‰æõ‰∫ÜÂèÇÊï∞ÔºåÂÆÉÁöÑÂÄºÂ∞Ü‰Ωú‰∏∫ @command{awk} ËøõÁ®ãÁöÑÈÄÄÂá∫Áä∂ÊÄÅÁ†Å„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõÔºå@command{awk} Âàô‰ºö‰ª•‚ÄúÊàêÂäü‚ÄùÁöÑÊñπÂºèÈÄÄÂá∫„ÄÇ
Âú®Á¨¨‰∏ÄÊ¨°Ë∞ÉÁî® @code{exit} Êó∂Êèê‰æõ‰∫ÜÂèÇÊï∞ÔºåËÄåÁ¨¨‰∫åÊ¨°‰ªé @code{END} ËßÑÂàô‰∏≠Ë∞ÉÁî®Ôºå‰ΩÜÊòØÊ≤°ÊúâÊèê‰æõÂèÇÊï∞ÁöÑÊÉÖÂÜµ‰∏ãÔºå@command{awk} ‰ºö‰ΩøÁî®‰πãÂâçÊèê‰æõÁöÑÈÄÄÂá∫ÂÄº„ÄÇ
Êü•Áúã @ref{Exit Status}ÔºåÊù•ÂèñÂæóÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

@cindex programming conventions, @code{exit} statement
‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰∏Ä‰∏™ÈîôËØØÊù°‰ª∂Âá∫Áé∞ÔºåÂæàÈöæÊàñËÄÖÊó†Ê≥ïÂ§ÑÁêÜ„ÄÇ‰∏ÄËà¨ÁöÑ‰ΩúÊ≥ïÊòØÁ®ãÂ∫è‰ºö‰ª•‰∏Ä‰∏™ÈùûÈõ∂Áä∂ÊÄÅÈÄÄÂá∫„ÄÇ
@command{awk} Á®ãÂ∫èÈÄöËøáÂ∏¶ÈùûÈõ∂ÂÄºÁöÑ @code{exit} ËØ≠Âè•Êù•Â§ÑÁêÜÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊâÄÁ§∫Ôºö

@example
BEGIN @{
    if (("date" | getline date_now) <= 0) @{
        print "Can't get system date" > "/dev/stderr"
        exit 1
    @}
    print "current date is", date_now
    close("date")
@}
@end example

@quotation ÊèêÁ§∫
‰∏∫‰∫ÜÂÆåÂÖ®ÁöÑÂèØÁßªÊ§çÊÄßÔºå@code{exit} ÁöÑÂÄºÂ∫îËØ•Âú® 0 ‰∫éÊòØ 126 ÔºàÂê´Ôºâ‰πãÈó¥„ÄÇË¥üÂÄº‰∏é 127 ÊàñËÄÖÊõ¥Â§ßÁöÑÂÄºÔºåÂú®‰∏çÂêåÁöÑÂπ≥Âè∞‰πãÈó¥ÂèØËÉΩ‰∏ç‰ºö‰∫ßÁîü‰∏ÄËá¥ÁöÑÁªìÊûú„ÄÇ
@end quotation


@node Built-in Variables
@section È¢ÑÂÆö‰πâÂèòÈáè
@cindex predefined variables
@cindex variables, predefined

Â§ßÂ§öÊï∞ÁöÑ @command{awk} ÂèòÈáèÊòØÊàë‰ª¨Ëá™Â∑±‰ΩøÁî®ÔºåÂ¶ÇÊûú‰ªñ‰ª¨Ê≤°ÊúâË¢´ËµãÂÄºÔºåÂàô‰∏ç‰ºöÊîπÂèòÔºåÂπ∂‰∏îÂ¶ÇÊûú‰Ω†‰∏çÊ£ÄÊü•ÂÆÉ‰ª¨ÔºåÂØπ‰Ω†‰πüÊ≤°Êúâ‰ªÄ‰πàÂΩ±Âìç„ÄÇ‰ΩÜÊòØÔºå
Êúâ‰∏Ä‰∫õÁöÑ @command{awk} ÂèòÈáèÊúâ‰∏Ä‰∫õÁâπÊÆäÁöÑÂÜÖÁΩÆÂê´‰πâ„ÄÇ@command{awk} ‰ºöËá™Âä®Ê£ÄÊü•ÂÆÉ‰ª¨ÂΩì‰∏≠ÁöÑ‰∏Ä‰∫õÂÄºÔºå
Âõ†Ê≠§‰Ωø‰Ω†ÂèØ‰ª•ÂëäËØâ @command{awk} ÊâßË°å‰∏Ä‰∫õÁâπÂÆöÁöÑ‰∫ãÊÉÖ„ÄÇÊúâ‰∏Ä‰∫õÊòØË¢´ @command{awk} Ëá™Âä®ËÆæÁΩÆÁöÑÔºåÊâÄ‰ª•ÂÆÉ‰ª¨‰∏∫‰Ω†ÁöÑÁ®ãÂ∫èÂ∏¶Êù•‰∏Ä‰∫õ @command{awk} ÊâßË°åÊó∂ÁöÑÂÜÖÈÉ®‰ø°ÊÅØ„ÄÇ

@cindex @command{gawk}, predefined variables and
Êú¨@value{SECTION}ËÆ∞ÂΩï‰∫ÜÊâÄÊúâÁöÑ @command{gawk} È¢ÑÂÆö‰πâÁöÑÂèòÈáèÔºåÂÆÉ‰ª¨‰∏≠ÁöÑÂ§ßÂ§öÊï∞‰πüËÆ∞ÂΩïÂú®‰∫ÜÊèèËø∞ÂÆÉÊâÄÂ∫îÁî®ÁöÑÂú∫ÊôØ‰∏≠ÁöÑ@value{CHAPTER}‰∏≠„ÄÇ

@menu
* User-modified::               Built-in variables that you change to control
                                @command{awk}.
* Auto-set::                    Built-in variables where @command{awk} gives
                                you information.
* ARGC and ARGV::               Ways to use @code{ARGC} and @code{ARGV}.
@end menu

@node User-modified
@subsection ÊéßÂà∂ @command{awk} ÁöÑÂÜÖÁΩÆÂèòÈáè
@cindex predefined variables, user-modifiable
@cindex user-modifiable variables

‰∏ãÈù¢ÊòØÊåâÂ≠óÊØçÈ°∫Â∫èÂàóÂá∫ÁöÑÂèòÈáèÔºå‰Ω†ÂèØÊõ¥ÊîπÂÆÉ‰ª¨ÁöÑÂÄºÊù•ÊéßÂà∂ @command{awk} ÊâÄÊâßË°åÁöÑÁâπÂÆö‰∫ãÊÉÖ„ÄÇ

Ëøô‰∫õÂèòÈáèÂ¶ÇÊûúÊòØ @command{gawk} ÁâπÊúâÁöÑÔºåÂàô‰ºöË¢´Ê†áÂøó‰∏Ä‰∏™‰∫ïÂè∑Ôºà@samp{#}Ôºâ„ÄÇ
Ëøô‰∫õÂèòÈáèÊòØ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇÂú®‰∏Ä‰∫õÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÊàñËÄÖÂú® @command{gawk} ÁöÑÂÖºÂÆπÊ®°ÂºèÔºàÊü•Áúã @ref{Options}Ôºâ‰∏ãÔºåÂÆÉ‰ª¨Ê≤°ÊúâÁâπÊÆäÂê´‰πâ„ÄÇÔºàÂ¶ÇÊûúÂèòÈáèÊúâ‰ªÄ‰πà‰æãÂ§ñÔºåÂàô‰ºöÂú®ÂèòÈáèÁöÑËØ¥Êòé‰∏≠ÂàóÂá∫„ÄÇÔºâ

@table @code
@cindex @code{BINMODE} variable
@cindex binary input/output
@cindex input/output, binary
@cindex differences in @command{awk} and @command{gawk}, @code{BINMODE} variable
@item BINMODE #
Âú®Èùû POSIX Á≥ªÁªü‰∏äÔºåËøô‰∏™ÂèòÈáèÊåáÂÆö‰∫ÜÊâÄÊúâ I/O ÊâÄ‰ΩøÁî®ÁöÑ‰∫åËøõÂà∂Ê®°Âºè„ÄÇÊï∞ÂÄº 1Ôºå2Ôºå3 ÂàÜÂà´ÊåáÂÆö‰∏∫ËæìÂÖ•Êñá‰ª∂ÔºåËæìÂá∫Êñá‰ª∂‰∏éÊâÄÊúâÊñá‰ª∂Áõ∏Â∫îÂú∞Ë¶Å‰ΩøÁî®‰∫åËøõÂà∂ I/O Ê®°Âºè„ÄÇ
Â∞è‰∫é 0 ÁöÑÂÄºÔºåÂàôÂΩìÊàê 0 ÂØπÂæÖÔºåËÄåÂ§ß‰∫é 3 ÁöÑÂÄºÔºåÂàô‰ºöË¢´ÂΩì‰∏∫ 3 ÂØπÂæÖ„ÄÇ
Áõ∏Â∫îÁöÑÔºåÂ≠ó‰∏≤‚Äúr‚Äù‰∏é‚Äúw‚ÄùÂàÜÂà´ÊåáÂÆöËæìÂÖ•ËæìÂá∫Ë¶Å‰ΩøÁî®‰∫åËøõÂà∂ I/O„ÄÇ
Â≠ó‰∏≤‚Äúrw‚ÄùÊàñËÄÖ‚Äúwr‚ÄùË°®Á§∫ÊâÄÊúâÁöÑÊñá‰ª∂‰ΩøÁî®‰∫åËøõÂà∂ I/O„ÄÇÂÖ∂‰ªñÁöÑÂ≠ó‰∏≤ÂÄºÂàôË¢´ÂΩìÊàê‚Äúrw‚ÄùÔºå‰ΩÜÊòØ @command{gawk} ‰ºö‰∫ßÁîü‰∏ÄÂëäË≠¶„ÄÇ
@code{BINMODE} Âú® @ref{PC Using}ÔºåËøôÈáåÊúâÊõ¥ËØ¶ÁªÜÁöÑËØ¥ÊòéÔºå@command{mawk}ÔºàÊü•Áúã @ref{Other Versions}Ôºâ‰πüÊîØÊåÅËøô‰∏™ÂèòÈáèÔºå‰ΩÜÊòØÂè™‰ΩøÁî®Êï∞ÂÄº„ÄÇ

@cindex @code{CONVFMT} variable
@cindex POSIX @command{awk}, @code{CONVFMT} variable and
@cindex numbers, converting, to strings
@cindex strings, converting, numbers to
@item @code{CONVFMT}
Áî®‰∫éÊéßÂà∂Êï∞ÂÄºËΩ¨Êç¢ÊàêÂ≠ó‰∏≤ÁöÑÊ†ºÂºèÔºàÊü•Áúã @ref{Conversion}Ôºâ„ÄÇ
Âú®ÊïàÊûú‰∏äÔºåÂÆÉÁöÑÂ∑•‰ΩúÂéüÁêÜÊòØÂ∞ÜÂÖ∂‰Ωú‰∏∫ @code{sprintf()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
ÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ @code{"%.6g"}„ÄÇ@code{CONVFMT} Áî± POSIX Ê†áÂáÜÂºïÂÖ•„ÄÇ

@cindex @command{gawk}, @code{FIELDWIDTHS} variable in
@cindex @code{FIELDWIDTHS} variable
@cindex differences in @command{awk} and @command{gawk}, @code{FIELDWIDTHS} variable
@cindex field separators, @code{FIELDWIDTHS} variable and
@cindex separators, field, @code{FIELDWIDTHS} variable and
@item FIELDWIDTHS #
‰∏Ä‰∏™Áî±Á©∫Ê†ºÂàÜÈöîÁöÑÂàóÔºåÁî±‰ª•ÂëäËØâ @command{gawk} Â¶Ç‰ΩïÁî®Âõ∫ÂÆöÁöÑÂàóËæπÁïåÊù•ÂàÜÂâ≤ËæìÂÖ•„ÄÇÁªô @code{FIELDWIDTHS} ËµãÂÄºÔºå
‰ºöË¶ÜÁõñÁî® @code{FS} ‰∏é @code{FPAT} ËøõË°åÂüüÂàÜÂâ≤ÁöÑÊñπÂºè„ÄÇÊü•Áúã @ref{Constant Size} ÔºåÊù•Ëé∑ÂèñÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

@cindex @command{gawk}, @code{FPAT} variable in
@cindex @code{FPAT} variable
@cindex differences in @command{awk} and @command{gawk}, @code{FPAT} variable
@cindex field separators, @code{FPAT} variable and
@cindex separators, field, @code{FPAT} variable and
@item FPAT #
ÂëäËØâ @command{gawk} ÂüüÁöÑÂàÜÂâ≤ÊòØÁî±ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÔºà‰∏Ä‰∏™Â≠ó‰∏≤ÔºâÁöÑÊñáÊú¨ËøõË°åÁöÑ„ÄÇ
ÂØπ @code{FPAT} ÁöÑËµãÂÄº‰ºöË¶ÜÁõñ @code{FS} ‰∏é @code{FIELDWIDTHS} ÁöÑÂüüÂàÜÂâ≤ÊñπÂºè„ÄÇÊü•Áúã @ref{Splitting By Content}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

@cindex @code{FS} variable
@cindex separators, field
@cindex field separators
@item FS
ËæìÂÖ•ÁöÑÂüüÂàÜÈöîÁ¨¶ÔºàÊü•Áúã @ref{Field Separators}Ôºâ„ÄÇ
ÂÆÉÁöÑÂÄºÊòØ‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠óÁ¨¶ÊàñËÄÖÊòØ‰∏Ä‰∏™Â§öÂ≠óÁ¨¶ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåËØ•Ë°®ËææÂºèÂåπÈÖçËæìÂÖ•ËÆ∞ÂΩï‰∏≠Âüü‰πãÈó¥ÁöÑÂàÜÈöîÂÜÖÂÆπ„ÄÇ
Â¶ÇÊûúÂÆÉÁöÑÂÄº‰∏∫Á©∫‰∏≤Ôºà@code{""}ÔºâÔºåÂàôËæìÂÖ•ËÆ∞ÂΩï‰∏≠ÁöÑÊØè‰∏™Â≠óÁ¨¶ÈÉΩÊòØÂàÜÈöîÁ¨¶„ÄÇÔºàËøô‰∏™Ë°å‰∏∫ÊòØ @command{gawk} Êâ©Â±ï„ÄÇ
POSIX @command{awk} Ê≤°ÊúâÊåáÂÆöÂΩì @code{FS} ÁöÑÂÄº‰∏∫Á™óÂè£Êó∂ÁöÑË°å‰∏∫„ÄÇÂõ†Ê≠§ÔºåÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{awk} ‰πüÊúâÂèØËÉΩÂ∞Ü @code{""} ÁâπÊÆäÂØπÂæÖ„ÄÇÔºâ

@cindex POSIX @command{awk}, @code{FS} variable and
ÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ @w{@code{" "}}ÔºåÂç≥Âè™ÂåÖÂê´‰∏Ä‰∏™Á©∫Ê†ºÁöÑÂ≠ó‰∏≤„ÄÇËøôÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑ‰æãÂ§ñÔºåËøô‰∏™ÂÄºË°®Á§∫ÊâÄÊúâÁ©∫Ê†ºÔºåTABs ‰∏é/ÊàñÊç¢Ë°åÂ∫èÂàóÔºå
ÈÉΩÊòØ‰∏Ä‰∏™ÂàÜÈöîÁ¨¶„ÄÇ 
@footnote{Âú® POSIX @command{awk} ‰∏≠ÔºåÊç¢Ë°åÁ¨¶‰∏çË¢´ÂΩìÊàêÁ©∫ÁôΩ„ÄÇ}
ÂêåÊó∂ÔºåÂú®ËÆ∞ÂΩïÂâçÂêéÁöÑÁ©∫Ê†ºÔºåTABs ‰∏éÊç¢Ë°åÁ¨¶‰πüË¢´ÂøΩÁï•Êéâ„ÄÇ

‰Ω†‰πüÂèØ‰ª•Âú®ÂëΩ‰ª§Ë°å‰∏≠Áî® @option{-F} Êù•ÊåáÂÆö @code{FS} ÁöÑÂÄºÔºö

@example
awk -F, '@var{program}' @var{input-files}
@end example

@cindex @command{gawk}, field separators and
Â¶ÇÊûú @command{gawk} ‰ΩøÁî®‰∫Ü @code{FIELDWIDTHS} ÊàñËÄÖ @code{FPAT} Áî®Êù•ËøõË°åÂüüÂàÜÂâ≤Ôºå
ÂØπ @code{FS} ÁöÑËµãÂÄº‰ºöÂØºËá¥ @command{gawk} ÈÄÄÂõûÂà∞Â∏∏ËßÑÁöÑÔºåÂü∫‰∫é @code{FS} ÁöÑÂüüÂàÜÂâ≤ÊñπÂºè„ÄÇ
‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊñπÊ≥ïÂ∞±ÊòØÂ∞±ÊòØ‰ΩøÁî® @samp{FS = FS}ÔºåÂπ∂Âä†‰∏ä‰∏Ä‰∫õËß£ÈáäÂûãÊ≥®Èáä„ÄÇ

@cindex @command{gawk}, @code{IGNORECASE} variable in
@cindex @code{IGNORECASE} variable
@cindex differences in @command{awk} and @command{gawk}, @code{IGNORECASE} variable
@cindex case sensitivity, and string comparisons
@cindex case sensitivity, and regexps
@cindex regular expressions, case sensitivity
@item IGNORECASE #
Â¶ÇÊûú @code{IGNORECASE} ÊòØ‰∏Ä‰∏™ÈùûÈõ∂ÂÄºÊàñËÄÖÈùûÁ©∫‰∏≤ÔºåÂàôÂ≠ó‰∏≤ÁöÑÊØîËæÉ‰∏éÊâÄÊúâÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÈÉΩÊòØÂ§ßÂ∞èÂÜôÊó†ÂÖ≥ÁöÑ„ÄÇ
ËøôÂ∫îÁî®‰∫éÁî® @samp{~} ‰∏é @samp{!~} ËøõË°åÁöÑÊ≠£ÂàôÂåπÈÖçÔºå ‰πüÁî®‰∫é @code{gensub()}Ôºå@code{gsub()}Ôºå@code{index()}Ôºå@code{match()}Ôºå
@code{pat@code{split()}}Ôºå@code{split()} ‰∏é @code{sub()} Á≠âÂáΩÊï∞ÔºåËøòÊúâ‰ª• @code{RS} ËøõË°åÂàÜÂâ≤ÁöÑËÆ∞ÂΩïÔºå
Áî® @code{FS} ‰∏é @code{FPAT} ËøõË°åÂàÜÂâ≤ÁöÑÂüü‰∏≠„ÄÇ
‰ΩÜÊòØÔºå@code{IGNORECASE} ÁöÑÂÄº@emph{‰∏ç‰ºö}ÂΩ±ÂìçÁî®‰∏ãÊ†áÁ¥¢ÂºïÊï∞ÁªÑÂÖÉÁ¥†Ôºå‰πü‰∏ç‰ºöÂΩ±ÂìçÂΩì‰ΩøÁî®ÂçäÂ≠óÁ¨¶ÁöÑÂàÜÂâ≤Á¨¶Êó∂ÁöÑÂüüÂàÜÂâ≤„ÄÇ
Êü•Áúã @ref{Case-sensitivity}„ÄÇ

@cindex @command{gawk}, @code{LINT} variable in
@cindex @code{LINT} variable
@cindex differences in @command{awk} and @command{gawk}, @code{LINT} variable
@cindex lint checking
@item LINT #
ÂΩìËøô‰∏™ÂèòÈáè‰∏∫ trueÔºàÈùûÈõ∂ÊàñËÄÖÈùûÁ©∫ÔºâÔºå@command{gawk} Ë°®Áé∞ÂæóÂ∞±ÂÉèÂú®ÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏≠ÊåáÂÆö‰∫Ü @option{--lint} ÂèÇÊï∞‰∏ÄÊ†∑ÊïàÊûú
ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇÂΩìÂÆÉÁöÑÂÄº‰∏∫ @code{"fatal"} Êó∂Ôºålint ÂëäË≠¶‰ºöÊàê‰∏∫Ëá¥ÂëΩÔºàfatalÔºâÈîôËØØ„ÄÇÂ¶ÇÊûúÂÄºÊòØ @code{"invalid"} Êó∂Ôºå
ÂàôÂè™ÊúâÁúüÁöÑÊòØÊó†ÊïàÁöÑ‰∫ãÊÉÖÁöÑÂëäË≠¶Êâç‰ºöÁîüÊàê„ÄÇÔºàËøôËøòÊ≤°ÊúâÂÆåÂÖ®ÂÆûÁé∞„ÄÇÔºâ‰ªªÊÑèÁöÑÂÖ∂‰ªñ true ÂÄºÈÉΩÊâìÂç∞ÈùûËá¥ÂëΩÂëäË≠¶„ÄÇ
Áªô @code{LINT}  ÂèòÈáèËµãÂÄº‰∏∫ falseÔºå‰ºöÂÖ≥Èó≠ lint ÂëäË≠¶„ÄÇ

Ê≠§ÂèòÈáèÊòØ‰∏Ä‰∏™ @command{gawk} Êâ©Â±ï„ÄÇÂú®ÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÂàôÂπ∂‰∏çÁâπÊÆä„ÄÇ‰∏éÂÖ∂‰ªñÁöÑÁâπÊÆäÂèòÈáè‰∏çÂêåÁöÑÊòØÔºå
ÊîπÂèò @code{LINT} ÂèòÈáè‰∏ç‰ºöÂΩ±Âìç lint ÂëäË≠¶ÁöÑ‰∫ßÁîüÔºåÂ∞±ÁÆó @command{gawk} ÊòØÂ§Ñ‰∫éÂÖºÂÆπÊ®°Âºè„ÄÇ
ËôΩÁÑ∂ @option{--lint} ‰∏é @option{--traditional} ÈÄâÈ°πÂçïÁã¨Âú∞ÊéßÂà∂ @command{gawk} Ë°å‰∏∫ÁöÑ‰∏çÂêåÊñπÈù¢Ôºå‰ΩÜÊòØÁ®ãÂ∫èÊâßË°å‰∏≠ÁöÑ lint ÂëäË≠¶ÁöÑÊéßÂà∂ÊòØ‰∏é @command{awk} Ë¢´ÊâßË°åÁöÑÊñπÂºèÊòØÊó†ÂÖ≥ÁöÑ„ÄÇ

@cindex @code{OFMT} variable
@cindex numbers, converting, to strings
@cindex strings, converting, numbers to
@item OFMT
ÊéßÂà∂ @code{print} ËØ≠Âè•‰∏≠ÔºåÊï∞Â≠óÂà∞Â≠ó‰∏≤ÁöÑËΩ¨Êç¢ÊñπÂºèÁöÑÂ≠ó‰∏≤ÔºàÊü•Áúã @ref{Conversion}Ôºâ„ÄÇ
ÂÆÉÁöÑÂ∑•‰ΩúÊñπÂºèÊòØÂ∞ÜÂÖ∂‰Ωú‰∏∫‰º†ÈÄíÁªô @code{sprintf()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
ÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ @code{"%.6g"}„ÄÇÊó©ÊúüÁöÑ @command{awk} ÁâàÊú¨‰ΩøÁî® @code{OFMT} Êù•ÊåáÂÆöÂ∞ÜÊï∞ÂÄºËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÁöÑÊ†ºÂºèÁöÑ‰∏ÄËà¨Ë°®ËææÂºèÔºå
‰ΩÜÊòØËøô‰∏™Áé∞Âú®Áî± @code{CONVFMT} Êù•ÂÆåÊàê„ÄÇ

@cindex @code{sprintf()} function, @code{OFMT} variable and
@cindex @code{print} statement, @code{OFMT} variable and
@cindex @code{OFS} variable
@cindex separators, field
@cindex field separators
@item OFS
ËæìÂá∫ÂüüÂàÜÈöîÁ¨¶ÔºàÊü•Áúã @ref{Output Separators}Ôºâ„ÄÇÂÆÉË¢´ËæìÂá∫Âú®ÈÄöËøá @code{print} ËØ≠Âè•ÊâìÂç∞ÁöÑÂüü‰πãÈó¥„ÄÇ
ÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ @w{@code{" "}}ÔºåÂç≥‰∏Ä‰∏™Á©∫Ê†ºÁöÑÂ≠ó‰∏≤„ÄÇ

@cindex @code{ORS} variable
@item ORS
ËæìÂá∫ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶„ÄÇÂÆÉ‰ºöË¢´ËæìÂá∫Âú®ÊØè‰∏™ @code{print} ËØ≠Âè•ÁöÑÂêéÈù¢„ÄÇÂÖ∂ÈªòËÆ§ÂÄºÊòØ @code{"\n"}Ôºå
Âç≥Êç¢Ë°åÁ¨¶„ÄÇÔºàÊü•Áúã @ref{Output Separators}Ôºâ

@cindex @code{PREC} variable
@item PREC #
‰ªªÊÑèÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÁöÑÂ∑•‰ΩúÁ≤æÂ∫¶ÔºåÈªòËÆ§‰∏∫ 53 ‰ΩçÔºàÊü•Áúã @ref{Setting precision}Ôºâ„ÄÇ

@cindex @code{ROUNDMODE} variable
@item ROUNDMODE #
Áî®‰∫é‰ªªÊÑèÁ≤æÂ∫¶Êï∞ÂÄºÁÆóÊúØËÆ°ÁÆóÁöÑËàçÂÖ•ËàçÂá∫Ê®°ÂºèÔºåÈªòËÆ§‰∏∫ @code{"N"}
ÔºàÂç≥ IEEE 754 Ê†áÂáÜ‰∏≠ÁöÑ @code{roundTiesToEven}Ôºâ„ÄÇ

@cindex @code{RS} variable
@cindex separators, for records
@cindex record separators
@item @code{RS}
ËæìÂÖ•ËÆ∞ÂΩïÁöÑÂàÜÈöîÁ¨¶„ÄÇÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØÂåÖÂê´‰∏Ä‰∏™Êç¢Ë°åÁ¨¶ÁöÑÂ≠ó‰∏≤ÔºåË°®Á§∫ËæìÂÖ•ÁöÑËÆ∞ÂΩïÁî±‰∏ÄË°åÁöÑÊñáÊú¨ÁªÑÊàê„ÄÇÂÆÉÁöÑÂÄº‰πüÂèØ‰ª•ÊòØÁ©∫‰∏≤ÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåËÆ∞ÂΩïÁî±‰∫é‰∏ÄËøû‰∏≤ÁöÑÁ©∫Ë°åÂàÜÈöî„ÄÇÂ¶ÇÊûúÂÆÉÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºåÂàôËÆ∞ÂΩïÊòØÁî±ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºèÁöÑÊñáÊú¨ËøõË°åÂàÜÂâ≤„ÄÇ
ÔºàÊü•Áúã @ref{Records}„ÄÇÔºâ

@code{RS} ÂèØ‰ª•‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÁöÑËÉΩÂäõÊòØ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇÂú®Â§öÊï∞ÁöÑÂÖ∂‰ªñ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÊàñËÄÖ @command{gawk} ÊòØÂ§Ñ‰∫éÂÖºÂÆπÊ®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂè™Êúâ @code{RS} ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶Ë¢´Áî®Êù•ËøõË°åÂàÜÂâ≤ËÆ∞ÂΩï„ÄÇ

@cindex @code{SUBSEP} variable
@cindex separators, subscript
@cindex subscript separators
@item @code{SUBSEP}
‰∏ãÊ†áÂàÜÈöîÁ¨¶„ÄÇÂÆÉÁöÑÈªòËÆ§ÂÄºÊòØ @code{"\034"} ÔºåÂπ∂Áî®Êù•‰Ωú‰∏∫Â§öÁª¥Êï∞ÁªÑ‰∏ãÊ†áÁ¥¢ÂºïÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇÂõ†Ê≠§Ôºå
Ë°®ËææÂºè @samp{@w{foo["A", "B"]}} ÂÆûÈôÖ‰∏äÊòØËÆøÈóÆ @code{foo["A\034B"]}
ÔºàÊü•Áúã @ref{Multidimensional}Ôºâ„ÄÇ

@cindex @command{gawk}, @code{TEXTDOMAIN} variable in
@cindex @code{TEXTDOMAIN} variable
@cindex differences in @command{awk} and @command{gawk}, @code{TEXTDOMAIN} variable
@cindex internationalization, localization
@item TEXTDOMAIN #
Áî®‰∫éÂú® @command{awk} Â±Ç‰∏≠ÁöÑÁ®ãÂ∫èÁöÑÂõΩÈôÖÂåñ„ÄÇÂÆÉËÆæÁΩÆÈªòËÆ§ÁöÑÊñáÊú¨ÂüüÔºåÂÖ∂Áî®Êù•Âú®Ê∫êÊñáÊú¨‰∏≠Áî®Êù•Ê†áËØÜÂ≠ó‰∏≤Â∏∏ÈáèÔºå‰πüÁî®‰∫é @code{dcgettext()}Ôºå@code{dcngettext()} ‰∏é @code{bindtextdomain()} ÂáΩÊï∞
ÔºàÊü•Áúã @ref{Internationalization}Ôºâ„ÄÇ@code{TEXTDOMAIN} ÁöÑÈªòËÆ§ÂÄº‰∏∫ @code{"messages"}„ÄÇ
@end table

@node Auto-set
@subsection ‰º†ÈÄí‰ø°ÊÅØÁöÑÂÜÖÁΩÆÂèòÈáè

@cindex predefined variables, conveying information
@cindex variables, predefined conveying information
‰∏ãÈù¢ÁöÑÂèòÈáèÔºå‰ª•Â≠óÊØçÈ°∫Â∫èÊéíÂàóÔºå@command{awk} Âú®ÁâπÂÆöÁöÑÊÉÖÂÜµ‰∏ã‰ºöËá™Âä®ËÆæÁΩÆÂÆÉÁöÑÂÄºÔºå‰ª•ÂêëÁ®ãÂ∫è‰º†ÈÄí‰ø°ÊÅØ„ÄÇ

Â¶ÇÊûúÊòØ @command{gawk} ÁâπÊúâÁöÑÂèòÈáèÔºåÂàôË¢´Áî®‰∫ïÂè∑Ê†áËØÜÔºà@samp{#}Ôºâ„ÄÇ
Ëøô‰∫õÂèòÈáèÊòØ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇÂØπ‰∫éÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞ÔºåÊàñËÄÖÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÁöÑ @command{gawk}ÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂàôÂÆÉ‰ª¨Ê≤°ÊúâÁâπÂà´Âê´‰πâÔºö

@c @asis for docbook
@table @asis
@cindex @code{ARGC}/@code{ARGV} variables
@cindex arguments, command-line
@cindex command line, arguments
@item @code{ARGC}, @code{ARGV}
ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÂèÇÊï∞Ë¢´Â≠òÂú®‰∫ÜÂêç‰∏∫ @code{ARGV} ÁöÑÊï∞ÁªÑ‰∏≠ÔºåÂπ∂ÂèØ‰ª•Ë¢´ @command{awk} Á®ãÂ∫è‰ΩøÁî®„ÄÇ@code{ARGC} ÊòØÂëΩ‰ª§Ë°å‰∏≠ÂèÇÊï∞ÁöÑ‰∏™Êï∞„ÄÇ
Êü•Áúã @ref{Other Arguments}„ÄÇ‰∏éÂ§ßÂ§öÊï∞ÁöÑ @command{awk} Êï∞ÁªÑ‰∏çÂêåÔºå@code{ARGV} ÁöÑ‰∏ãÊ†á‰ªé 0 Âà∞ @code{ARGC} @minus{} 1„ÄÇ
Âú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºö

@example
$ @kbd{awk 'BEGIN @{}
>         @kbd{for (i = 0; i < ARGC; i++)}
>             @kbd{print ARGV[i]}
>      @kbd{@}' inventory-shipped mail-list}
@print{} awk
@print{} inventory-shipped
@print{} mail-list
@end example

@noindent
@code{ARGV[0]} ÂåÖÂê´ @samp{awk}Ôºå@code{ARGV[1]} ÂåÖÂê´ @samp{inventory-shipped}Ôºå@code{ARGV[2]} ÂåÖÂê´ @samp{mail-list}„ÄÇ
@code{ARGC} ÁöÑÂÄº‰∏∫ 3ÔºåÊØî @code{ARGV} Êï∞ÁªÑÊúÄÂêé‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑ‰∏ãÊ†áÂ§ß 1ÔºåÂõ†‰∏∫ÂÖÉÁ¥†ÊòØ‰ªé 0 ÂºÄÂßãÁºñÂè∑ÁöÑ„ÄÇ

@cindex programming conventions, @code{ARGC}/@code{ARGV} variables
@code{ARGC} ‰∏é @code{ARGV} ÁöÑÂêçÂ≠óÔºå‰∏éÂÖ∂‰∏ãÊ†á‰∏∫‰ªé 0 Âà∞ @code{ARGC} @minus{} 1ÔºåÈÉΩÊòØ‰ªé C ËØ≠Ë®Ä‰∏≠ËÆøÈóÆÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÊñπÊ≥ïÁªßÊâøËÄåÊù•„ÄÇ

@cindex dark corner, value of @code{ARGV[0]}
@code{ARGV[0]} ÁöÑÂÄº‰ºöÂõ†‰∏∫Á≥ªÁªü‰∏çÂêåÂèØËÉΩ‰∏çÂêå„ÄÇÂêåÊó∂Ôºå‰Ω†Â∫îËØ•Ê≥®ÊÑèÁ®ãÂ∫èÊñáÊú¨‰∏é @command{awk} ÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÈÉΩ@emph{Ê≤°Êúâ}ÂåÖÂê´Âú® @code{ARGV} ‰∏≠„ÄÇ
Êü•Áúã @ref{ARGC and ARGV}ÔºåÊù•Ëé∑Âèñ‰ΩøÁî®Ëøô‰∫õ @command{awk} ÂèòÈáèÁöÑ‰ø°ÊÅØ„ÄÇ
@value{DARKCORNER}

@cindex @code{ARGIND} variable
@cindex differences in @command{awk} and @command{gawk}, @code{ARGIND} variable
@item @code{ARGIND #}
ÂΩìÂâçÊ≠£Âú®Ë¢´Â§ÑÁêÜÁöÑÊñá‰ª∂Âú® @code{ARGV} ‰∏≠ÁöÑÁ¥¢Âºï„ÄÇÊØèÊ¨° @command{gawk} ÊâìÂºÄ‰∏Ä‰∏™@value{DF}ËøõË°åÂ§ÑÁêÜÔºå
ÂÆÉÂ∞±‰ºöËÆæÁΩÆ @code{ARGIND} ÁöÑÂÄº‰∏∫Êñá‰ª∂ÂêçÂú® @code{ARGV} ‰∏≠ÁöÑÁ¥¢Âºï„ÄÇ
ÂΩì @command{gawk} Â§ÑÁêÜËæìÂÖ•Êñá‰ª∂Êó∂Ôºå@samp{FILENAME == ARGV[ARGIND]} ÁöÑÂÄºÊÄªÊòØ‰∏∫ true„ÄÇ

@cindex files, processing@comma{} @code{ARGIND} variable and
Ëøô‰∏™ÂèòÈáèÂú®Â§ÑÁêÜÊñá‰ª∂Êó∂ÂæàÊúâÁî®ÔºåÂÆÉÂèØ‰ª•ËÆ©‰Ω†Áü•ÈÅì@value{DF}‰∏≠Â∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÂ§öÂ∞ëÔºå‰ª•ÂèäÁî®Êù•Âå∫ÂàÜÂú®ÂëΩ‰ª§Ë°å‰∏≠‰∏§‰∏™ËøûÁª≠ÁöÑÂêåÂêçÊñá‰ª∂„ÄÇ

@cindex file names, distinguishing
ÂΩì‰Ω†Âú® @command{awk} Á®ãÂ∫è‰∏≠ÊîπÂèò @code{ARGIND} ÂèòÈáèÁöÑÂÄºÊó∂Ôºå@command{gawk} ‰ºöÂú®ÊâìÂºÄ‰∏ã‰∏Ä‰∏™Êñá‰ª∂Êó∂ÔºåËá™Âä®ËÆæÁΩÆÂÆÉ‰∏∫Êñ∞ÁöÑÂÄº„ÄÇ

@cindex @code{ENVIRON} array
@cindex environment variables, in @code{ENVIRON} array
@item @code{ENVIRON}
‰∏Ä‰∏™ÂåÖÂê´ÁéØÂ¢ÉÂèòÈáè‰ª•ÂÖ∂ÂÄºÁöÑÂÖ≥ËÅîÊï∞ÁªÑ„ÄÇÊï∞ÁªÑÁöÑÁ¥¢ÂºïÊòØÁéØÂ¢ÉÂèòÈáèÂêçÔºåÂÖÉÁ¥†ÂàôÊòØÁâπÂÆöÁéØÂ¢ÉÂèòÈáèÁöÑÂÄº„ÄÇ
‰æãÂ¶Ç @code{ENVIRON["HOME"]} ÁöÑÂÄºÂèØ‰ª•ÊòØ @code{"/home/arnold"}„ÄÇ
ÊîπÂèòËøô‰∏™Êï∞ÁªÑ‰∏ç‰ºöÂΩ±Âìç‰º†ÈÄíÂà∞‰ªªÊÑèÁöÑÈÄöËøá @code{system()} ÂáΩÊï∞ÊàñËÄÖÈáçÂÆöÂêëÂêØÂä®ÁöÑÁ®ãÂ∫èÁöÑÁéØÂ¢ÉÂèòÈáè„ÄÇÔºàÂú®ÂêéÁª≠ÁöÑ @command{gawk} ÁâàÊú¨ÔºåÊúâÂèØËÉΩ‰ºöÊúâÂΩ±Âìç„ÄÇÔºâ

Êúâ‰∏Ä‰∫õÊìç‰ΩúÁ≥ªÁªüÊ≤°ÊúâÁéØÂ¢ÉÂèòÈáè„ÄÇÂú®ËøôÊ†∑ÁöÑÁ≥ªÁªü‰∏≠Ôºå@code{ENVIRON} Êï∞ÁªÑ‰∏∫Á©∫
ÔºàÈô§‰∫Ü @w{@code{ENVIRON["AWKPATH"]}} ‰∏é @w{@code{ENVIRON["AWKLIBPATH"]}}Ôºå
Êü•Áúã @ref{AWKPATH Variable}Ôºå‰∏é 
@ifdocbook
@ref{AWKLIBPATH Variable}Ôºâ„ÄÇ
@end ifdocbook
@ifnotdocbook
@ref{AWKLIBPATH Variable}Ôºâ„ÄÇ
@end ifnotdocbook

@cindex @command{gawk}, @code{ERRNO} variable in
@cindex @code{ERRNO} variable
@cindex differences in @command{awk} and @command{gawk}, @code{ERRNO} variable
@cindex error handling, @code{ERRNO} variable and
@item @code{ERRNO #}
Â¶ÇÊûúÂú®‰∏∫ @code{getline} ËøõË°åÈáçÂÆöÂêë„ÄÅËØªÂèñÊó∂ÔºåÊàñËÄÖËøõË°å @code{close()} Êìç‰Ωú‰∏≠ÔºåÂèëÁîü‰∫ÜÁ≥ªÁªüÈîôËØØÔºå
Âàô @code{ERRNO} ‰ºöÂåÖÂê´‰∏Ä‰∏™ÊèèËø∞ÈîôËØØÁöÑÂ≠ó‰∏≤„ÄÇ

Âè¶Â§ñÔºå@command{gawk} ‰ºöÂú®ÊØè‰∏Ä‰∏™ÂëΩ‰ª§Ë°å‰∏≠ÁöÑËæìÂÖ•Êñá‰ª∂ÁöÑÊìç‰ΩúÂâçÊ∏ÖÁ©∫ @code{ERRNO}„ÄÇ
ËøôÊ†∑ÂèØ‰ª•Âú® @code{BEGINFILE} Ê®°Âºè‰∏≠Ê£ÄÊü•Êñá‰ª∂ÁöÑÂèØËØªÊÄßÔºàÊü•Áúã @ref{BEGINFILE/ENDFILE}Ôºâ„ÄÇ

ÂÖ∂‰ªñÊÉÖÂÜµÔºå@code{ERRNO} ÁöÑ‰ΩúÁî®Â∞±Á±ª‰ºº‰∫é C ÂèòÈáè @code{errno}„ÄÇ
Èô§‰∫ÜÂàôÊâçÊâÄÊèêÂà∞ÁöÑÂá†‰∏™ÁßçÊÉÖÂÜµÔºå@command{gawk} @emph{Áªù‰∏ç‰ºö}Ê∏ÖÈô§ÂÆÉÔºàÂç≥Â∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫ 0ÔºåÊàñËÄÖ @code{""}Ôºâ„ÄÇ
Âõ†Ê≠§ÔºåÂè™ÊúâÂú® I/O Êìç‰ΩúËøîÂõû‰∏Ä‰∏™Â§±Ë¥•ÁöÑÂÄºÁöÑÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÊâçÂèØÂØÑÂ∏åÊúõ‰∫éÂÆÉÁöÑÂÄºÊúâÊÑè‰πâÔºå‰æãÂ¶Ç @code{getline} ËøîÂõû @minus{}1„ÄÇ
ÂΩìÁÑ∂Ôºå‰Ω†‰πüÂèØ‰ª•Âú®ÊâßË°å I/O Êìç‰Ωú‰πãÂâçËá™Â∑±Ê∏ÖÁêÜÂÆÉ„ÄÇ

@cindex @code{FILENAME} variable
@cindex dark corner, @code{FILENAME} variable
@item @code{FILENAME}
ÂΩìÂâçËæìÂÖ•Êñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇÂ¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠Ê≤°ÊúâËæìÂÖ•Êñá‰ª∂Êó∂Ôºå@command{awk} ‰ºö‰ªéÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñÊï∞ÊçÆÔºåÂêåÊó∂ @code{FILENAME} ÁöÑÂÄº‰ºöËÆæÁΩÆÊàê @code{"-"}„ÄÇ
@code{FILENAME} ÊØèÊ¨°ËØªÂèñÊñ∞Êñá‰ª∂ÁöÑÊó∂ÂÄôÈÉΩ‰ºöÊîπÂèòÔºàÊü•Áúã @ref{Reading Files}Ôºâ„ÄÇ
Âú® @code{BEGIN} ËßÑÂàôÂÜÖÔºå@code{FILENAME} ÁöÑÂÄº‰∏∫ @code{""}ÔºåÂõ†‰∏∫ËøôÊó∂ËøòÊ≤°ÊúâËæìÂÖ•Êñá‰ª∂Ë¢´Â§ÑÁêÜ„ÄÇ
@footnote{Êúâ‰∏Ä‰∫õ Unix @command{awk} ÁöÑÊó©ÊúüÂÆûÁé∞Â∞Ü @code{FILENAME} ÁöÑÂÄºËÆæÁΩÆÊàê @code{"-"}Ôºå
Â∞±ÁÆóËøòÊ≤°ÊúâÊñá‰ª∂Ë¢´Â§ÑÁêÜ„ÄÇËøô‰∏™Ë°å‰∏∫ÊòØ‰∏çÊ≠£Á°ÆÁöÑÔºåÂú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠‰∏çËÉΩ‰æùËµñ‰∫éÂÆÉ„ÄÇ}
@value{DARKCORNER}
‰ΩÜÊòØÔºåÂú® @code{BEGIN} ËßÑÂàô‰∏≠‰ΩøÁî® @code{getline} ÔºàÊü•Áúã @ref{Getline}ÔºâÂèØ‰ª•‰Ωø @code{FILENAME} Êúâ‰∏Ä‰∏™ÂÄº„ÄÇ

@cindex @code{FNR} variable
@item @code{FNR}
ÂΩìÂâçÊñá‰ª∂ÁöÑÂΩìÂâçËÆ∞ÂΩïÊï∞„ÄÇ@command{awk} ÊØèËØª‰∏Ä‰∏™Êñ∞ËÆ∞ÂΩïÁöÑÊó∂ÂÄôÔºå‰ºöÈÄíÂ¢û @code{FNR}ÔºàÊü•Áúã @ref{Records}Ôºâ„ÄÇ
@command{awk} ÊØèÊ¨°ÂºÄÂßãËØªÂèñ‰∏Ä‰∏™Êñ∞Êñá‰ª∂ÁöÑÊó∂ÂÄôÔºå‰ºöÂ∞Ü @code{FNR} ËÆæÁΩÆ‰∏∫ 0„ÄÇ

@cindex @code{NF} variable
@item @code{NF}
ÂΩìÂâçËæìÂÖ•ËÆ∞ÂΩïÁöÑÂüüÊï∞ÂÄº„ÄÇ@code{NF} ÊØèËØª‰∏Ä‰∏™Êñ∞ËÆ∞ÂΩïÔºåÂπ∂‰∏îÂüüÂ∑≤ÁªèÁîüÊàêÁöÑÊó∂ÂÄôÔºåÂ∞±‰ºöË¢´ÈáçÁΩÆÔºåÊàñËÄÖÊòØ @code{$0} ÊîπÂèò‰πü‰ºöÈáçÁΩÆ
ÔºàÊü•Áúã @ref{Fields}Ôºâ„ÄÇ

‰∏éÂú®Êú¨ËäÇ‰∏≠ÊèèËø∞ÁöÑÂÖ∂‰ªñÂ§ßÂ§öÊï∞ÂèòÈáè‰∏çÂêåÔºåÁªô @code{NF} ËµãÂÄºÂØπ @command{awk} ÁöÑÂÜÖÈÉ®Â∑•‰ΩúÊúâ‰∏Ä‰∫õÊΩúÂú®ÁöÑÊïàÊûú„ÄÇÂÖ∑‰ΩìÂú∞ËØ¥Ôºå
Áªô @code{NF} ËµãÂÄºÂèØËÉΩÂàõÂª∫Êñ∞ÁöÑÂüüÔºåÊàñËÄÖÊòØ‰ªéÂΩìÂâçÁöÑËÆ∞ÂΩï‰∏≠Âà†Èô§Âüü„ÄÇÊü•Áúã @ref{Changing Fields}„ÄÇ

@cindex @code{FUNCTAB} array
@cindex @command{gawk}, @code{FUNCTAB} array in
@cindex differences in @command{awk} and @command{gawk}, @code{FUNCTAB} variable
@item @code{FUNCTAB #}
‰∏Ä‰∏™Êï∞ÁªÑÔºåÂÖ∂Á¥¢Âºï‰ª•ÂèäÂØπÂ∫îÁöÑÂÄºÂÖ®ÈÉ®ÈÉΩÊòØÂÜÖÂª∫ÁöÑÔºåÁî®Êà∑ÂÆö‰πâÁöÑÔºå‰ª•ÂèäÁ®ãÂ∫è‰∏≠Êâ©Â±ïÁöÑÂáΩÊï∞„ÄÇ

@quotation ÊèêÁ§∫
Âú® @code{FUNCTAB} ‰∏äÂ∞ùËØïÁî® @code{delete} ËØ≠Âè•‰ºöÂØºËá¥Ëá¥‰ΩøÈîôËØØ„ÄÇËÄåÂØπÂÖ∂ÂÖÉÁ¥†ËøõË°åËµãÂÄºÔºå‰πü‰ºöÂØºËá¥ÂëΩ‰ª§ÈîôËØØ„ÄÇ
@end quotation

@cindex @code{NR} variable
@item @code{NR}
‰ªéÁ®ãÂ∫èÊâßË°åÂºÄÂßãÂà∞Áé∞Âú®‰∏∫Ê≠¢Ôºå@command{awk} Â∑≤ÁªèÂ§ÑÁêÜÁöÑËÆ∞ÂΩïÁöÑ‰∏™Êï∞ÔºàÊü•Áúã @ref{Records}Ôºâ„ÄÇ
@command{awk} ÊØèËØª‰∏Ä‰∏™Êñ∞ËÆ∞ÂΩïÂ∞±‰ºöÂØπÂÖ∂ËøõË°åÈÄíÂ¢û„ÄÇ

@cindex @command{gawk}, @code{PROCINFO} array in
@cindex @code{PROCINFO} array
@cindex differences in @command{awk} and @command{gawk}, @code{PROCINFO} array
@item @code{PROCINFO #}
Ëøô‰∏™Êï∞ÁªÑÁöÑÂÖÉÁ¥†‰∏∫ËøêË°å‰∏≠ÁöÑÁ®ãÂ∫èÁöÑ‰ø°ÊÅØÊèê‰æõ‰∫ÜËÆøÈóÆÊâãÊÆµ„ÄÇ‰∏ãÈù¢ÁöÑÂÖÉÁ¥†ÔºàÊåâÂ≠óÊØçÈ°∫Â∫èÔºâ‰øùËØÅÂèØÁî®Ôºö

@table @code
@cindex effective group ID of @command{gawk} user
@item PROCINFO["egid"]
Á≥ªÁªüË∞ÉÁî® @code{getegid()} ÁöÑÂÄº„ÄÇ

@item PROCINFO["euid"]
@cindex effective user ID of @command{gawk} user
Á≥ªÁªüË∞ÉÁî® @code{geteuid()} ÁöÑÂÄº„ÄÇ

@item PROCINFO["FS"]
Â¶ÇÊûúÂüüÂàÜÂâ≤ÊñπÂºèÊòØ @code{FS}ÔºåÂàôÂÖ∂ÂÄº‰∏∫ ‚Äú@code{FS}‚ÄùÔºåÂ¶ÇÊûúÊòØ @code{FIELDWIDTHS} ÂàÜÂâ≤ÊñπÂºèËµ∑‰ΩúÁî®ÔºåÂàôÂÖ∂ÂÄº‰∏∫ ‚Äú@code{FIELDWIDTHS}‚ÄùÔºå
Â¶ÇÊûúÊòØ @code{FPAT} ÊñπÂºèËøõË°åÂàÜÂâ≤ÔºåÂàôÂÖ∂ÂÄº‰∏∫ @code{"FPAT"}„ÄÇ

@item PROCINFO["gid"]
@cindex group ID of @command{gawk} user
Á≥ªÁªüË∞ÉÁî® @code{getgid()} ÁöÑÂÄº„ÄÇ

@item PROCINFO["identifiers"]
@cindex program identifiers
‰∏Ä‰∏™Â≠êÊï∞ÁªÑÔºåÁî±Âú® @command{awk} Á®ãÂ∫èÊñá‰ª∂‰∏≠ÊâÄ‰ΩøÁî®ÁöÑÊ†áËØÜÁ¨¶ÂêçÂ≠óËøõË°åÁ¥¢Âºï„ÄÇ‰∏Ä‰∏™@dfn{Ê†áËØÜÁ¨¶}ÁÆÄÂçïÂú∞ËØ¥Â∞±ÊòØÂèòÈáèÁöÑÂêçÂ≠ó
ÔºàÂèòÈáèÊòØ‰∏Ä‰∏™Ê†áÈáèÊàñËÄÖÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºâÔºå‰πüÂèØ‰ª•ÊòØÂÜÖÂª∫ÂáΩÊï∞ÔºåÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÔºåÊàñËÄÖÊòØÂáΩÊï∞Êâ©Â±ï„ÄÇÂØπÊØè‰∏Ä‰∏™Ê†áËØÜÁ¨¶ÔºåÂÖÉÁ¥†ÁöÑÂÄºÂèØËÉΩÊòØ‰∏ãÈù¢ÂÖ∂‰∏≠‰πã‰∏ÄÔºö

@table @code
@item "array"
Ê†áËØÜÁ¨¶ÊòØ‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇ

@item "builtin"
Ê†áËØÜÁ¨¶ÊòØ‰∏Ä‰∏™ÂÜÖÂª∫ÂáΩÊï∞„ÄÇ

@item "extension"
Ê†áËØÜÁ¨¶ÊòØ‰∏Ä‰∏™ÂáΩÊï∞Êâ©Â±ïÔºåÂπ∂ÈÄöËøá @code{@@load} ÊàñËÄÖ @option{-l} ËøõË°åË£ÖËΩΩ„ÄÇ

@item "scalar"
Ê†áËØÜÁ¨¶ÊòØ‰∏Ä‰∏™Ê†áÈáè„ÄÇ

@item "untyped"
Ê†áËØÜÁ¨¶ÊòØÊó†Á±ªÂûãÁöÑÔºàÂèØÁî®‰∫éÊ†áÈáèÊàñËÄÖÊòØÊï∞ÁªÑÔºå@command{gawk} Ëøò‰∏çÁü•ÈÅìËÄåÂ∑≤Ôºâ„ÄÇ

@item "user"
Ê†áËØÜÁ¨¶ÊòØ‰∏Ä‰∏™Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞„ÄÇ
@end table

@noindent
ÂÖ∂ÂÄºÊòæÁ§∫‰∫Ü @command{gawk} ÂÆåÊàêÁ®ãÂ∫èÁöÑÂàÜÊûêÂêéÔºå
ÂØπÊâÄ‰∫ÜËß£Âà∞ÁöÑÊ†áËØÜÁ¨¶ÁöÑÊÉÖÂÜµÔºåÂÆÉ‰ª¨ÁöÑÂÄºÂú®Á®ãÂ∫èÁöÑËøêË°åËøáÁ®ã‰∏≠@emph{‰∏çËÉΩ}Êõ¥Êñ∞„ÄÇ

@item PROCINFO["pgrpid"]
@cindex process group ID of @command{gawk} process
ÂΩìÂâçËøõÁ®ãÁöÑÁªÑ ID„ÄÇ

@item PROCINFO["pid"]
@cindex process ID of @command{gawk} process
ÂΩìÂâçËøõÁ®ãÁöÑËøõÁ®ã ID„ÄÇ

@item PROCINFO["ppid"]
@cindex parent process ID of @command{gawk} process
ÂΩìÂâçËøõÁ®ãÁöÑÁà∂ËøõÁ®ãÁöÑËøõÁ®ã ID„ÄÇ

@item PROCINFO["strftime"]
@code{strftime()} Êó∂Èó¥ÂáΩÊï∞ÁöÑÈªòËÆ§Ê†ºÂºè‰∏≤„ÄÇÂØπËøô‰∏™ÂÄºËøõË°åËµãÂÄºÂèØ‰ª•ÊîπÂèòÈªòËÆ§‰∏≤ÔºåÊü•Áúã @ref{Time Functions}„ÄÇ

@item PROCINFO["uid"]
Á≥ªÁªüË∞ÉÁî® @code{getuid()} ÁöÑÂÄº„ÄÇ

@item PROCINFO["version"]
@cindex version of @command{gawk}
@cindex @command{gawk} version
@command{gawk} ÁöÑÁâàÊú¨Âè∑„ÄÇ
@end table

‰∏ãÈù¢Âú®Êï∞ÁªÑ‰∏≠ÁöÑÈ¢ùÂ§ñÂÖÉÁ¥†ÔºåÂ¶ÇÊûú‰Ω†ÁöÑ @command{gawk} ÁâàÊú¨ÊîØÊåÅ‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÁÆóÊúØËøêÁÆóÔºàÊü•Áúã @ref{Arbitrary Precision Arithmetic}ÔºâÔºå
ÂàôÂÆÉ‰ª¨‰ºöÂú®Êï∞ÁªÑ‰∏≠Â≠òÂú®ÔºåÂπ∂Êèê‰æõÂÖ≥‰∫é MPFR ‰ª•Âèä GMP Â∫ìÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ

@table @code
@item PROCINFO["gmp_version"]
@cindex version of GNU MP library
GNU MP Â∫ìÁöÑÁâàÊú¨„ÄÇ

@cindex version of GNU MPFR library
@item PROCINFO["mpfr_version"]
GNU MPFR Â∫ìÁöÑÁâàÊú¨„ÄÇ

@item PROCINFO["prec_max"]
@cindex maximum precision supported by MPFR library
MPFR ÊîØÊåÅÁöÑÊúÄÂ§ßÁ≤æÂ∫¶„ÄÇ

@item PROCINFO["prec_min"]
@cindex minimum precision required by MPFR library
MPFR ÊâÄË¶ÅÊ±ÇÁöÑÊúÄÂ∞èÁ≤æÂ∫¶„ÄÇ
@end table

‰∏ãÈù¢ÁöÑÈôÑÂä†ÂÖÉÁ¥†ÔºåÂ¶ÇÊûú‰Ω†ÁöÑ @command{gawk} ÁâàÊú¨ÊîØÊåÅÂä®ÊÄÅË£ÖËΩΩÊâ©Â±ïÂáΩÊï∞ÔºàÊü•Áúã @ref{Dynamic Extensions}ÔºâÔºåÂàô‰ºöÂú®Êï∞ÁªÑ‰∏≠Â≠òÂú®ÔºåÂπ∂Âêë‰Ω†Êèê‰æõËøô‰∫õÊâ©Â±ï API ÁöÑÁâàÊú¨‰ø°ÊÅØÔºö

@table @code
@item PROCINFO["api_major"]
@cindex version of @command{gawk} extension API
@cindex extension API, version number
Êâ©Â±ï API ÁöÑ‰∏ªÁâàÊú¨„ÄÇ

@item PROCINFO["api_minor"]
Êâ©Â±ï API ÁöÑÊ¨°ÁâàÊú¨„ÄÇ
@end table

@cindex supplementary groups of @command{gawk} process
Âú®Êüê‰∫õÁ≥ªÁªü‰∏≠ÔºåÊúâÂèØËÉΩÂ≠òÂú® @code{"group1"} Âà∞ÂÄº‰∏∫ @var{N} ÁöÑ @code{"group@var{N}"} ÁöÑÂÖÉÁ¥†Â≠òÂú®„ÄÇ
@var{N} ÊòØËøõÁ®ãÊâÄÊúâÁöÑË°•ÂÖÖÁªÑÁöÑÊï∞ÂÄº„ÄÇ‰ΩøÁî® @code{in} Êìç‰ΩúÁ¨¶Êù•ÊµãËØïËøô‰∫õÂÖÉÁ¥†ÔºàÊü•Áúã @ref{Reference to Elements}Ôºâ„ÄÇ

‰∏ãÈù¢ÁöÑÈôÑÂä†ÂÖÉÁ¥†ÂÖÅËÆ∏‰Ω†ÊîπÂèò @command{gawk} ÁöÑË°å‰∏∫Ôºö

@table @code
@item PROCINFO["@var{command}", "pty"]
ÂèØ‰ª•‰ΩøÁî® pseudo-tty ‰ª£ÊõøÂèåÂêëÁÆ°ÈÅìËøõË°åÂèåÂêëÈÄö‰ø°„ÄÇÊü•Áúã @ref{Two-way I/O} ÂÖ≥‰∫éÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

@item PROCINFO["@var{input_name}", "READ_TIMEOUT"]
Âú®‰ªéÈáçÂÆöÂêëËæìÂÖ•‰∏≠ËØªÂèñÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåËÆæÁΩÆ‰∏Ä‰∏™Ë∂ÖÊó∂ÊèêÁ§∫„ÄÇ
Êü•Áúã @ref{Read Timeout} ÂÖ≥‰∫éÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

@item PROCINFO["sorted_in"]
Â¶ÇÊûúËøô‰∏™ÂÖÉÁ¥†Âú® @code{PROCINFO} ‰∏≠Â≠òÂú®ÔºåÂàôÂÆÉÁöÑÂÄºÊéßÂà∂ÈíàÂØπÊï∞ÁªÑÁ¥¢ÂºïÂú® @samp{for (@var{indx} in @var{array})} Âæ™ÁéØ‰∏≠ÁöÑÂ§ÑÁêÜÈ°∫Â∫è„ÄÇ
ËøôÊòØ‰∏Ä‰∏™È´òÁ∫ßÁâπÊÄßÔºåÂõ†Ê≠§Êàë‰ª¨ÂêéÂÜçËØ¶ÁªÜËÆ®ËÆ∫„ÄÇÊü•Áúã @ref{Scanning an Array}„ÄÇ
@end table

@cindex @code{RLENGTH} variable
@item @code{RLENGTH}
@code{match()} ÂáΩÊï∞ÂåπÈÖçÁöÑÂ≠ê‰∏≤ÁöÑÈïøÂ∫¶ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
@code{RLENGTH} Âú®Ë∞ÉÁî® @code{match()} ÂáΩÊï∞Êó∂Ë¢´ËÆæÁΩÆ„ÄÇÂÆÉÁöÑÂÄºÊòØÂåπÈÖç‰∏≤ÁöÑÈïøÂ∫¶ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂåπÈÖçÊâæÂà∞ÔºåÂàôÂÄº‰∏∫ @minus{}1„ÄÇ

@cindex @code{RSTART} variable
@item @code{RSTART}
Ë∞ÉÁî® @code{match()} ÂáΩÊï∞ÊâÄÂåπÈÖçÁöÑÂ≠ê‰∏≤ÁöÑÂºÄÂßãÂ≠óÁ¨¶ÁöÑ‰∏ãÊ†áÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ
@code{RSTART} Âú®Ë∞ÉÁî® @code{match()} ÂáΩÊï∞ÁöÑÊó∂ÂÄôË¢´ËÆæÁΩÆ„ÄÇÂÆÉÁöÑÂÄºÊòØÂåπÈÖç‰∏≤ÁöÑÂú®‰∏≤‰∏≠ÁöÑ‰ΩçÁΩÆÔºåÂ¶ÇÊûúÊ≤°ÊúâÂåπÈÖç‰∏≤ÔºåÂàôÂÖ∂ÂÄº‰∏∫ 0„ÄÇ

@cindex @command{gawk}, @code{RT} variable in
@cindex @code{RT} variable
@cindex differences in @command{awk} and @command{gawk}, @code{RT} variable
@item @code{RT #}
ËæìÂÖ•Êñá‰ª∂‰∏≠ÂåπÈÖçÁî± @code{RS}ÔºåÂç≥ËÆ∞ÂΩïÂàÜÈöîÁ¨¶ÔºåË°®Á§∫ÁöÑ‰∏≤„ÄÇÊØèÊ¨°ËØªÂèñ‰∏Ä‰∏™ËÆ∞ÂΩïÊó∂ÔºåÂàôÂÖ∂ÂÄº‰ºöË¢´ËÆæÁΩÆ„ÄÇ

@cindex @command{gawk}, @code{SYMTAB} array in
@cindex @code{SYMTAB} array
@cindex differences in @command{awk} and @command{gawk}, @code{SYMTAB} variable
@item @code{SYMTAB #}
Âú®Á®ãÂ∫è‰∏≠Áî±ÂêçÂ≠óËøõË°åÁ¥¢ÂºïÁöÑÊâÄÊúâÂÖ®Â±ÄÂÆö‰πâÁöÑÂèòÈáè‰∏éÊï∞ÁªÑÁöÑÊï∞ÁªÑ„ÄÇ
@code{SYMTAB} ‰ΩøÂæó @command{gawk} ÁöÑÁ¨¶Âè∑Ë°®ÂèØÁî± @command{awk} Á®ãÂ∫èÂëòÁúãÂà∞„ÄÇÂÆÉÂú® @command{gawk} ÂàÜÊûêÁ®ãÂ∫èÁöÑÊó∂ÂÄôÂª∫Á´ãÔºåÂπ∂Âú®Á®ãÂ∫èÂºÄÂßãÊâßË°åÂâçÂÆåÊàê„ÄÇ

Ëøô‰∏™Êï∞ÁªÑÂèØ‰ª•Áî®Êù•Èó¥Êé•Âú∞ËØªÂèñ‰∏éÂÜôÂÖ•‰∏Ä‰∏™Êï∞ÈáèÁöÑÂÄºÔºö

@example
foo = 5
SYMTAB["foo"] = 4
print foo    # prints 4
@end example

@noindent
@code{isarray()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{Type Functions}ÔºâÂèØ‰ª•Áî®Êù•ÊµãËØï @code{SYMTAB} ‰∏≠ÁöÑÂÖÉÁ¥†ÊòØÂê¶‰∏∫Êï∞ÁªÑ„ÄÇ
Á±ª‰ººÂú∞Ôºå‰Ω†‰πü‰∏çÂèØ‰ª•ÂØπ @code{SYMTAB} ‰∏≠ÁöÑÂÖÉÁ¥†‰ΩøÁî® delete ËØ≠Âè•„ÄÇ

‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Ê≤°ÊúâÂÆö‰πâÁöÑÊ†áËØÜÁ¨¶‰Ωú‰∏∫ @code{SYMTAB} ÁöÑ‰∏ãÊ†áÔºö

@example
SYMTAB["xxx"] = 5
print SYMTAB["xxx"]
@end example

@noindent
Â¶Ç‰∏ãÊÉÖÂÜµÔºåÂÖ∂ËøêË°å‰∏éÈ¢ÑÊúü‰∏ÄËá¥Ôºö@code{SYMTAB} Â∞±ÊòØ‰∏Ä‰∏™ÊôÆÈÄöÁöÑÊï∞ÁªÑ„ÄÇÂîØ‰∏ÄÁöÑ‰∏çÂêåÂ∞±ÊòØ‰Ω†‰∏çÂèØ‰ª•Âà†Èô§ @code{SYMTAB["xxx"]}„ÄÇ

@cindex Schorr, Andrew
@code{SYMTAB} ÊØîÂàùÁúãËµ∑Êù•Ë¶ÅÊúâË∂£ÂæóÂ§ö„ÄÇAndrew Schorr ÊåáÂá∫Êù•ÔºåÂèØ‰ª•Áî®ÂÖ∂‰Ωú‰∏∫ @command{awk} ÁöÑÊï∞ÁªÑÊåáÈíà„ÄÇÁúãÁúã‰ªñÁöÑ‰æãÂ≠êÔºö

@example
# Indirect multiply of any variable by amount, return result

function multiply(variable, amount)
@{
    return SYMTAB[variable] *= amount
@}
@end example

@noindent
‰Ω†ÂèØ‰ª•Ëøô‰πàÁî®ÂÆÉÔºö

@example
BEGIN @{
    answer = 10.5
    multiply("answer", 4)
    print "The answer is", answer
@}
@end example

@noindent
ÂΩìËøôÊÆµÁ®ãÂ∫èËøêË°åÁöÑÊó∂ÂÄôÔºå‰∫ßÁîüËøôÊ†∑ÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f answer.awk}
@print{} The answer is 42
@end example

@quotation ÊèêÁ§∫
‰∏∫‰∫ÜÈÅøÂÖç‰∏•ÈáçÁöÑÈïøÊó∂Èó¥ÊóÖË°åÊÇñËÆ∫Ôºå
@footnote{Êõ¥‰∏çÁî®ÊèêÂú®ÂÆûÁé∞‰∏äÁöÑÂõ∞Èöæ„ÄÇ}
‰∏çÁÆ°ÊòØ @code{FUNCTAB} ËøòÊòØ @code{SYMTAB} ÈÉΩ‰∏çËÉΩ‰Ωú‰∏∫ @code{SYMTAB} Êï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇ
@end quotation
@end table

@sidebar ÊîπÂèò @code{NR} ‰∏é @code{FNR}
@cindex @code{NR} variable, changing
@cindex @code{FNR} variable, changing
@cindex dark corner, @code{FNR}/@code{NR} variables
ÊØèÊ¨°ËØªÂèñ‰∏Ä‰∏™ËÆ∞ÂΩïÊó∂Ôºå@command{awk} Â∞±ÊòØÈÄíÂ¢û @code{NR} ‰∏é @code{FNR} ÁöÑÂÄºÔºåËÄå‰∏çÊòØÁõ¥Êé•Â∞ÜÂÆÉ‰ª¨ËÆæÁΩÆÊàêÂ∑≤ËØªËÆ∞ÂΩïÁöÑÁªùÂØπÂÄº„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÁ®ãÂ∫èÂèØ‰ª•ÊîπÂèòËøô‰∫õÂèòÈáèÁöÑÂÄºÔºåÂπ∂‰∏îÂú®ÊØè‰∏™ËÆ∞ÂΩïÈó¥ÈÉΩÂ∞ÜË¢´ÈÄíÂ¢û„ÄÇ
@value{DARKCORNER}
‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂèØ‰ª•ËØ¥ÊòéÔºö

@example
$ @kbd{echo '1}
> @kbd{2}
> @kbd{3}
> @kbd{4' | awk 'NR == 2 @{ NR = 17 @}}
> @kbd{@{ print NR @}'}
@print{} 1
@print{} 17
@print{} 18
@print{} 19
@end example

@noindent
Âú® @code{FNR} Ë¢´Âä†ÂÖ•Âà∞ @command{awk} ËØ≠Ë®Ä‰πãÂâçÔºàÊü•Áúã @ref{V7/SVR3.1}ÔºâÔºå
ÂæàÂ§öÁöÑ @command{awk} Á®ãÂ∫è‰ΩøÁî®Ëøô‰∏™ÁâπÊÄßÊù•Ë∑üË∏™Êñá‰ª∂‰∏≠ÁöÑËÆ∞ÂΩïÊï∞ÔºåËøôÂè™ÈúÄË¶ÅÂú® @code{FILENAME} ÂèòÂåñÊó∂ÔºåÂ∞Ü @code{NR} ÁöÑÂÄºËÆæÁΩÆÊàê 0 Âç≥ÂèØ„ÄÇ
@end sidebar

@node ARGC and ARGV
@subsection ‰ΩøÁî® @code{ARGC} ‰∏é @code{ARGV}
@cindex @code{ARGC}/@code{ARGV} variables, how to use
@cindex arguments, command-line
@cindex command line, arguments

Âú® @ref{Auto-set}Ôºå‰∏≠ÊúâÊèê‰æõ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÊù•ÊèèËø∞ÂåÖÂê´Âú® @code{ARGC} ‰∏é @code{ARGV} ‰∏≠ÁöÑ‰ø°ÊÅØÔºö

@example
$ @kbd{awk 'BEGIN @{}
>        @kbd{for (i = 0; i < ARGC; i++)}
>            @kbd{print ARGV[i]}
>      @kbd{@}' inventory-shipped mail-list}
@print{} awk
@print{} inventory-shipped
@print{} mail-list
@end example

@noindent
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@code{ARGV[0]} ÂåÖÂê´ @samp{awk}Ôºå@code{ARGV[1]} ÂåÖÂê´ @samp{inventory-shipped}Ôºå
ËÄå @code{ARGV[2]} ÂåÖÂê´ @samp{mail-list} „ÄÇÊ≥®ÊÑè @command{awk} Á®ãÂ∫èÂπ∂Ê≤°ÊúâÂú® @code{ARGV} ‰∏≠„ÄÇÂÖ∂‰ªñÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºå‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂèÇÊï∞ÈÉΩÊ≤°ÊúâËøõÂÖ•Âà∞Ëøô‰∏™Êï∞ÁªÑ‰∏≠„ÄÇ
Ëøô‰πüÂåÖÊã¨ÈÄöËøá @option{-v} ÂèÇÊï∞ÔºàÊü•Áúã @ref{Options}ÔºâËøõË°åÂèòÈáèËµãÂÄºÁöÑÈÉ®ÂàÜ„ÄÇ
Âú®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÊ≠£Â∏∏ÁöÑÂèòÈáèËµãÂÄº@emph{Ë¢´}ÂΩìÊàêÂèÇÊï∞ÂØπÂæÖÔºå
Âπ∂‰∏î‰ºöÂú® @code{ARGV} ‰∏≠Âá∫Áé∞„ÄÇÊúâ‰∏ãÈù¢ÁöÑÂêç‰∏∫ @file{showargs.awk} ÁöÑÊñá‰ª∂Ôºö

@example
BEGIN @{
    printf "A=%d, B=%d\n", A, B
    for (i = 0; i < ARGC; i++)
        printf "\tARGV[%d] = %s\n", i, ARGV[i]
@}
END   @{ printf "A=%d, B=%d\n", A, B @}
@end example

@noindent
ËøêË°åÁ®ãÂ∫è‰ºö‰∫ßÁîüÂ¶Ç‰∏ãËæìÂá∫Ôºö

@example
$ @kbd{awk -v A=1 -f showargs.awk B=2 /dev/null}
@print{} A=1, B=0
@print{}        ARGV[0] = awk
@print{}        ARGV[1] = B=2
@print{}        ARGV[2] = /dev/null
@print{} A=1, B=2
@end example

Á®ãÂ∫èÂèØ‰ª•ÊîπÂèò @code{ARGC} ‰∏é @code{ARGV} ÁöÑÂÖÉÁ¥†ÂÄº„ÄÇÂΩìÊØèÊ¨° @command{awk} ËææÂà∞Êñá‰ª∂Â∞æÊó∂Ôºå
ÂÆÉ‰ºö‰ΩøÁî® @code{ARGV} ÁöÑ‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†‰Ωú‰∏∫ËæìÂÖ•Êñá‰ª∂„ÄÇ
ÈÄöËøáÂú®ÈÇ£‰∏™‰ΩçÁΩÆÂ≠òÂÖ•‰∏Ä‰∏™‰∏çÂêåÁöÑ‰∏≤ÔºåÁ®ãÂ∫èÂ∞±ÂèØ‰ª•ÊîπÂèòË¶ÅËØªÂèñÁöÑÊñá‰ª∂„ÄÇ‰ΩøÁî® @code{"-"} Êù•Ë°®Á§∫Ê†áÂáÜËæìÂÖ•„ÄÇ
Â≠òÂÇ®È¢ùÂ§ñÁöÑÂÖÉÁ¥†Âπ∂ÈÄíÂ¢û @code{ARGC} ÁöÑÂÄºÔºåÂèØ‰ª•Â§ÑÁêÜÈ¢ùÂ§ñÁöÑÊñá‰ª∂„ÄÇ

Â¶ÇÊûú @code{ARGC} ÁöÑÂÄºË¢´ÈÄíÂáè‰∫ÜÔºåÂàô‰ºö‰ªéÂ∞ÜËæìÂÖ•Êñá‰ª∂‰ªéÂàóË°®ÁöÑÂ∞æÈÉ®Âà†Èô§„ÄÇÈÄöËøáÂú®ÂÖ∂‰ªñÂú∞ÊñπËÆ∞ÂΩï @code{ARGC} ÁöÑÊóßÂÄºÔºå
Á®ãÂ∫èÂèØ‰ª•Â∞ÜÂèñÊ∂àÁöÑÂèÇÊï∞ÂΩìÂÅöÂÖ∂‰ªñ‰∏úË•øÊù•ÂØπÂæÖÔºåËÄå‰∏çÊòØ@value{FN}„ÄÇ

‰∏∫‰∫Ü‰ªéÂàóË°®ÁöÑ‰∏≠Èó¥Â∞ÜÊñá‰ª∂ÊéíÈô§ÔºåÂèØ‰ª•Â∞ÜÁ©∫‰∏≤Ôºà@code{""}ÔºâÂ≠òÂà∞ @code{ARGV} ‰∏≠Êù•‰ª£Êõø@value{FN}„ÄÇ‰ΩúÁî®‰∏Ä‰∏™ÁâπÊÆäÁöÑÁâπÊÄßÔºå
@command{awk} ‰ºöÂøΩÁï•ÈÇ£‰∫õÁî®Á©∫‰∏≤ÊõøÊç¢ÊéâÁöÑÊñá‰ª∂„ÄÇÂè¶‰∏Ä‰∏™ÈÄâÊã©Â∞±ÊòØÁî® @code{delete} ËØ≠Âè•Êù•ÁßªÈô§ @code{ARGV} ‰∏≠ÁöÑÂÖÉÁ¥†ÔºàÊü•Áúã @ref{Delete}Ôºâ„ÄÇ

ÊâÄÊúâËøô‰∫õÂä®‰Ωú‰∏ÄËà¨ÈÉΩË¶ÅÂú® @code{BEGIN} ËßÑÂàô‰∏≠ÂÆåÊàêÔºå‰πüÂ∞±ÊòØÂú®Á®ãÂ∫èÂÆûÈôÖÂ§ÑÁêÜËæìÂÖ•Ââç„ÄÇÊü•Áúã @ref{Split Program}Ôºå
‰ª•Âèä
@ifnotdocbook
@ref{Tee Program}
@end ifnotdocbook
@ifdocbook
@ref{Tee Program}
@end ifdocbook
‰∏≠ÁöÑ‰æãÂ≠êÔºåÊù•Ëé∑Âèñ‰ªé @code{ARGV} ‰∏≠Âà†Èô§ÂÖÉÁ¥†ÁöÑÂêÑÁßçÊñπÊ≥ï„ÄÇ

‰∏∫‰∫ÜÂèñÂæóËæìÂÖ• @command{awk} Á®ãÂ∫è‰∏≠ÁöÑÈÄâÈ°πÔºåÁî® @option{--} Êù•ÁªìÊùü @command{awk} ÁöÑÈÄâÈ°πÔºå
ÁÑ∂ÂêéÂÜçÊèê‰æõ @command{awk} Á®ãÂ∫èÁöÑÈÄâÈ°πÔºåÂ¶Ç‰∏ãÈù¢ÁöÑÊñπÂºèÔºö

@example
awk -f myprog.awk -- -v -q file1 file2 @dots{}
@end example

‰∏ãÈù¢ÁöÑÂ§ÑÁêÜ @code{ARGV} ÁöÑ‰ª£Á†ÅÁâáÊÆµÔºåÂ∞±ÊòØÁî®Êù•Ê£ÄÊü•ÔºåÁßªÈô§ÂâçÈù¢ÊâÄÊèêÂà∞ÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºö

@example
BEGIN @{
    for (i = 1; i < ARGC; i++) @{
        if (ARGV[i] == "-v")
            verbose = 1
        else if (ARGV[i] == "-q")
            debug = 1
        else if (ARGV[i] ~ /^-./) @{
            e = sprintf("%s: unrecognized option -- %c",
                    ARGV[0], substr(ARGV[i], 2, 1))
            print e > "/dev/stderr"
        @} else
            break
        delete ARGV[i]
    @}
@}
@end example

@cindex differences in @command{awk} and @command{gawk}, @code{ARGC}/@code{ARGV} variables
Âú® @command{gawk} ‰∏≠Áî® @option{--} Êù•ÁªìÊùü @command{awk} ÁöÑÈÄâÈ°π‰∏çÊòØÂøÖÈ°ªÁöÑÔºåÈô§ÈùûÊåáÂÆö‰∫Ü @option{--posix} Ôºå
@command{gawk} ‰ºöÈªòÈªòÂú∞Â∞Ü‰∏çËÉΩÂ§üËØÜÂà´ÁöÑÈÄâÈ°πÊîæÂà∞ @code{ARGV} ‰∏≠‰ª•Â§á @command{awk} Á®ãÂ∫èÊù•Â§ÑÁêÜ„ÄÇ‰∏ÄÁúãÂà∞‰∏çËÆ§ËØÜÁöÑÈÄâÈ°πÔºå
@command{gawk} ‰ºöÂÅúÊ≠¢Êü•ÊâæÂÖ∂‰ªñÁöÑÂèØËÉΩÂèØ‰ª•ËØÜÂà´ÁöÑÈÄâÈ°π„ÄÇÂâçÈù¢ÁöÑÂëΩ‰ª§Ë°åÂú® @command{gawk} ‰∏≠ÂèØ‰ª•Â¶Ç‰∏ãÔºö

@example
gawk -f myprog.awk -q -v file1 file2 @dots{}
@end example

@noindent
Áî±‰∫é @option{-q} ‰∏çÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑ @command{gawk} ÈÄâÈ°πÔºåÂÆÉ‰ª•ÂèäÂêéÈù¢ÁöÑ @option{-v} ÈÄâÈ°πÈÉΩ‰ºöË¢´‰º†ÈÄíÁªô @command{awk} Á®ãÂ∫è„ÄÇ
ÔºàÊü•Áúã @ref{Getopt Function}ÔºåÊù•Êü•ÁúãÂàÜÊûêÂëΩ‰ª§ÈÄâÈ°πÁöÑÂ∫ìÂáΩÊï∞„ÄÇÔºâ

ÂΩìËÆæËÆ°‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÊó∂ÂÄôÔºå‰Ω†Â∫îËØ•ÈÄâÊã©ÈÇ£‰∫õ‰∏ç‰∏é @command{gawk} ÂÜ≤Á™ÅÁöÑÈÄâÈ°πÔºå
Âõ†‰∏∫ÂÆÉÂ∞ÜÂêéÁª≠ÁöÑË¶Å‰º†ÈÄíÁªô‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÈÄâÈ°π‰πãÂâçÂÖàÂ§ÑÁêÜÊéâËá™Â∑±ÂèØ‰ª•Êé•ÂèóÁöÑÈÄâÈ°π„ÄÇ‰ΩøÁî®‰ª• @samp{#!} Âπ∂‰ΩøÁî® @option{-E} ÂèÇÊï∞‰πüËÆ∏ÊúâÂ∏ÆÂä©
ÔºàÊü•Áúã @ref{Executable Scripts}Ôºå‰ª•Âèä 
@ifnotdocbook
@ref{Options}Ôºâ„ÄÇ
@end ifnotdocbook
@ifdocbook
@ref{Options}Ôºâ„ÄÇ
@end ifdocbook

@node Pattern Action Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Ê®°Âºè-Ë°å‰∏∫ÂØπÁªÑÊàê‰∫Ü @command{awk} Á®ãÂ∫èÁöÑÂü∫Êú¨ÂÖÉÁ¥†„ÄÇÊ®°ÂºèË¶ÅÊòØ‰πà‰∏Ä‰∏™ÊôÆÈÄöÁöÑË°®ËææÂºèÔºåËåÉÂõ¥Ë°®ËææÂºèÔºåÊàñËÄÖÊòØÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºå
ÊàñËÄÖÊòØÁâπÊÆäÂÖ≥ÈîÆÂ≠ó @code{BEGIN}Ôºå@code{END}Ôºå@code{BEGINFILE}Ôºå@code{ENDFILE}ÔºåÊàñËÄÖ‰∏∫Á©∫„ÄÇ
Âä®‰ΩúÂú®ÂΩìÂâçËÆ∞ÂΩïÂåπÈÖçÊ®°ÂºèÂêéÊâßË°å„ÄÇÁ©∫ÁöÑÔºàÁúÅÁï•ÔºâÁöÑÊ®°ÂºèÂåπÈÖçÊâÄÊúâÁöÑËÆ∞ÂΩï„ÄÇ

@item
‰ªé @code{BEGIN} ‰∏é @code{END} Ê®°Âºè‰∏≠ËøõË°å I/O Êúâ‰∏ÄÂÆöÁöÑÈôêÂà∂ÔºåÂØπ‰∫é @code{BEGINFILE} ‰ª•Âèä @code{ENDFILE} ‰πüÊòØÂ¶ÇÊ≠§Ôºå
ËÄå‰∏îÈôêÂà∂Êõ¥Â§ö„ÄÇÂêé‰∏§ËÄÖÂèØ‰ª•ËÆ©‰Ω†Âú®Â§ÑÁêÜÊñá‰ª∂‰πãÈó¥ÊâìÂÖ•‚ÄúÂãæÂ≠ê‚ÄùÔºåÂõ†Ê≠§ÂèØ‰Ω†‰ΩøÁî®‰ªéÂèØ‰ª•ÂØºËá¥Ëá¥‰ΩøÈîôËØØÁöÑÊñá‰ª∂‰∏≠ÊÅ¢Â§çÂõûÊù•Ôºà‰æãÂ¶ÇÊñá‰ª∂‰∏çËÉΩË¢´ÊâìÂºÄÔºâ„ÄÇ

@item
Shell ÂèòÈáèÂèØ‰ª•ÈÄöËøá‰ªîÁªÜÂú∞‰ΩøÁî® Shell ÂºïÂè∑Êù•Áî®Âú® @command{awk} Á®ãÂ∫è‰∏≠„ÄÇ
Áî® @command{awk} ÁöÑ @option{-v} ÈÄâÈ°πÊù•‰º†ÈÄí Shell ÂèòÈáèÂà∞ @command{awk} ÂèòÈáè‰ºöÊõ¥Âä†ÂÆπÊòì„ÄÇ

@item
Âä®‰ΩúÁî±Ëä±Êã¨Âè∑ÂåÖÂê´ÁöÑËØ≠Âè•ÁªÑÊàê „ÄÇËØ≠Âè•Áî±Ë°®ËææÂºèÔºåÊéßÂà∂ËØ≠Âè•ÔºåÂ§çÂêàËØ≠Âè•ÔºåËæìÂÖ•ËæìÂá∫ËØ≠Âè•‰ª•ÂèäÂà†Èô§ÊñáÂè•ÁªÑÊàê„ÄÇ

@item
@command{awk} ÁöÑÊéßÂà∂ËØ≠Âè•ÊòØ @code{if}-@code{else}Ôºå@code{while}Ôºå@code{for} Âíå @code{do}-@code{while}„ÄÇ
@command{gawk} Ê∑ªÂä†‰∫Ü @code{switch} ËØ≠Âè•„ÄÇ@code{for} ËØ≠Âè•Êúâ‰∏§‰∏™Áî®Â§ÑÔºö‰∏Ä‰∏™ÊòØÊâßË°å‰∏ÄËà¨ÁöÑÂæ™ÁéØÔºåÂè¶‰∏Ä‰∏™ÊòØÁî®Êù•Ëø≠‰ª£Êï∞ÁªÑ„ÄÇ

@item
@code{break} ‰∏é @code{continue} ÂèØ‰ª•ËÆ©‰Ω†Êó©ÁÇπÊàñËÄÖÂºÄÂêØ‰∏ã‰∏Ä‰∏™Âæ™ÁéØÊõø‰ª£ÔºàÊàñËÄÖË∑≥Âá∫ @code{switch}Ôºâ„ÄÇ

@item
@code{next} ‰∏é @code{nextfile} ÂèØ‰ª•ËÆ©‰Ω†ËØªÂèñ‰∏ã‰∏Ä‰∏™ËÆ∞ÂΩïÂπ∂‰ªé‰Ω†Á®ãÂ∫èÁöÑÂºÄÂ§¥ÊâßË°åÔºåÊàñËÄÖË∑ØËøá‰∏ã‰∏Ä‰∏™ËæìÂÖ•Êñá‰ª∂Âπ∂ÈáçÊñ∞ÂºÄÂßã„ÄÇ

@item
@code{exit} ËØ≠Âè•Áî®Êù•ÁªìÊùü‰Ω†ÁöÑÁ®ãÂ∫è„ÄÇÂΩì‰ªéÂä®‰Ωú‰∏≠ÊâßË°åÊó∂ÔºàÊàñËÄÖÂú®ÂáΩÊï∞‰ΩìÂÜÖÊâßË°åÊó∂ÔºâÔºåÂÆÉÂ∞ÜÊéßÂà∂ÊµÅ‰º†ÈÄíÂà∞ @code{END} ËØ≠Âè•„ÄÇ‰ªé @code{END} ËØ≠Âè•‰Ωì‰∏≠ÊâßË°åÊó∂ÔºåÂàô‰ºöÁõ¥Êé•ÈÄÄÂá∫„ÄÇ‰Ω†ÂèØ‰ª•‰º†ÈÄí‰∏Ä‰∏™ÂèØÈÄâÁöÑÊï∞ÂÄºÂèÇÊï∞Êù•‰Ωú‰∏∫ @command{awk} ÁöÑÈÄÄÂá∫Áä∂ÊÄÅ„ÄÇ

@item
‰∏Ä‰∫õÈ¢ÑÂÆö‰πâÁöÑÂáΩÊï∞ÂèØ‰ª•ÊéßÂà∂ @command{awk} Ôºå‰∏ªË¶ÅÊòØÁî®‰∫é I/O„ÄÇÂÖ∂‰ªñÁöÑÂèòÈáèÁî®Êù•Âêë‰Ω†ÁöÑÁ®ãÂ∫è‰º†ÈÄí‰ø°ÊÅØ„ÄÇ

@item
@code{ARGC} ‰∏é @code{ARGV} ÂèØ‰ª•ËÆ©‰Ω†ÁöÑÁ®ãÂ∫è‰ΩøÁî®ÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇ‰ªé @code{BEGIN} ËßÑÂàô‰∏≠Êìç‰ΩúÂÆÉ‰ª¨Ôºå
ÂèØ‰ª•‰Ωø‰Ω†ÊéßÂà∂ @command{awk} Â¶Ç‰ΩïÊù•Â§ÑÁêÜ@value{DF}„ÄÇ

@end itemize

@node Arrays
@chapter @command{awk} Êï∞ÁªÑ
@cindex arrays

@dfn{Êï∞ÁªÑ}ÊòØË¢´Áß∞‰∏∫@dfn{ÂÖÉÁ¥†}ÁöÑÂÄºÁöÑË°®„ÄÇÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÈÉΩÁî±@dfn{Á¥¢Âºï}Êù•Âå∫ÂàÜÔºå
Á¥¢ÂºïÂç≥ÂèØ‰ª•ÊòØÊï∞ÂÄº‰πüÂèØ‰ª•ÊòØÂ≠ó‰∏≤„ÄÇ

Êú¨@value{CHAPTER}ÊèèËø∞ @command{awk} ‰∏≠ÁöÑÊï∞ÁªÑÂ¶Ç‰øùÊù•Â∑•‰ΩúÔºåÂ¶Ç‰Ωï‰ΩøÁî®ÂÖÉÁ¥†ÔºåÂ¶Ç‰ΩïÊù•Êâ´ÊèèÊï∞ÁªÑÊàêÁöÑÊØè‰∏™ÂÖÉÁ¥†Ôºå‰ª•ÂèäÂ¶ÇÂèØÊù•Âà†Èô§Êï∞ÁªÑÂÖÉÁ¥†„ÄÇÂêåÊó∂Ôºå
‰πüÊèèËø∞ @command{awk} Â¶Ç‰ΩïÊù•Ê®°ÊãüÂ§öÁª¥Êï∞ÁªÑÔºå‰ª•ÂèäÂú®‰ΩøÁî®Êï∞ÁªÑÊó∂ÁöÑ‰∏Ä‰∫õ‰∏çÂ§™ÊòéÊòæÁöÑÂú∞Êñπ„ÄÇ
Êú¨@value{CHAPTER}Ëøò‰ºöËÆ®ËÆ∫ @command{gawk} ‰∏≠Áî®‰∫éÂØπÊï∞ÁªÑÊéíÂ∫èÁöÑÂ∑•ÂÖ∑ÔºåÁÑ∂Âêé‰ª•ÁÆÄË¶Å‰ªãÁªçÂÖ≥‰∫é @command{gawk} ÊîØÊåÅÁúüÊ≠£ÁöÑÂ§öÁª¥Êï∞ÁªÑÁöÑËÉΩÂäõ‰∏∫ÁªìÂ∞æ„ÄÇ

@menu
* Array Basics::                The basics of arrays.
* Numeric Array Subscripts::    How to use numbers as subscripts in
                                @command{awk}.
* Uninitialized Subscripts::    Using Uninitialized variables as subscripts.
* Delete::                      The @code{delete} statement removes an element
                                from an array.
* Multidimensional::            Emulating multidimensional arrays in
                                @command{awk}.
* Arrays of Arrays::            True multidimensional arrays.
* Arrays Summary::              Summary of arrays.
@end menu

@node Array Basics
@section Êï∞ÁªÑÂü∫Á°Ä

Êú¨@value{SECTION}ÊèèËø∞‰∏Ä‰∫õÂü∫Á°ÄÔºö‰∏ÄÊ¨°Â§ÑÁêÜÊï∞ÁªÑ‰∏≠ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†Ôºå‰ª•ÂèäÈÅçÂéÜÊï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇ

@menu
* Array Intro::                 Introduction to Arrays
* Reference to Elements::       How to examine one element of an array.
* Assigning Elements::          How to change an element of an array.
* Array Example::               Basic Example of an Array
* Scanning an Array::           A variation of the @code{for} statement. It
                                loops through the indices of an array's
                                existing elements.
* Controlling Scanning::        Controlling the order in which arrays are
                                scanned.
@end menu

@node Array Intro
@subsection Êï∞ÁªÑ‰ªãÁªç

@cindex Wall, Larry
@quotation
@i{
ÂØπ‰∏Ä‰∏™ÂÖ≥ËÅîÊï∞ÁªÑËøõË°åÁ∫øÊÄßÊâ´ÊèèÂ∞±Â•ΩÂÉèÁî®‰∏Ä‰∏™Â∑≤ÁªèË£ÖÂºπÁöÑ Uzi Êû™Â∞Ü‰∫∫Êï≤Ê≠ª„ÄÇÔºàÂñªÂ§ßÊâçÂ∞èÁî®‚Äî‚ÄîËØëËÄÖÔºâ
}
@author Larry Wall
@end quotation

@command{awk} ËØ≠Ë®ÄÊèê‰æõ‰∫Ü‰∏ÄÁª¥Êï∞ÁªÑÁî®‰ª•Â≠òÂÇ®‰∏ÄÁªÑÁõ∏ÂÖ≥ÁöÑ‰∏≤ÊàñËÄÖÊï∞Â≠ó„ÄÇÊØè‰∏Ä‰∏™ @command{awk} Êï∞ÁªÑÈÉΩÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÂêçÂ≠ó„ÄÇÊï∞ÁªÑÂêçÂ≠ó‰∏éÂèòÈáèÂêçÊúâ‰∏ÄÊ†∑ÁöÑËØ≠Ê≥ïÔºå‰ªªÊÑèÊúâÊïàÁöÑÂèòÈáèÂêç‰πüÈÉΩÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÊï∞ÁªÑÂêç„ÄÇ‰ΩÜÊòØÂú®Âêå‰∏Ä‰∏™Á®ãÂ∫è‰∏≠Ôºå‰∏ÄÂêç‰∏çËÉΩ‰∏§Áî®ÔºàÂêåÊó∂‰Ωú‰∏∫Êï∞ÁªÑÂèà‰Ωú‰∏∫ÂèòÈáèÔºâ„ÄÇ

Âú® @command{awk} ‰∏≠ÁöÑÊï∞ÁªÑË°®Èù¢‰∏ä‰∏éÂú®ÂÖ∂‰ªñÁöÑÁºñÁ®ãËØ≠Ë®Ä‰∏≠ÁöÑÊï∞ÁªÑÁõ∏‰ººÔºå‰ΩÜÊòØÂÆÉ‰ª¨Âç¥ÊúâÁùÄÊú¨Ë¥®ÁöÑ‰∏çÂêå„ÄÇ
Âú® @command{awk} ‰∏≠ÔºåÊ≤°ÊúâÂøÖË¶ÅÊåáÂÆöÊï∞ÁªÑÁöÑÂ§ßÂ∞èÂ∞±ÂèØ‰ª•‰ΩøÁî®„ÄÇËÄå‰∏îÔºå‰ªªÊÑèÁöÑÊï∞Â≠óÊàñËÄÖÂ≠ó‰∏≤Ôºå‰∏ç‰ªÖ‰ªÖÊòØËøûÁª≠ÁöÑÊï¥Êï∞ÔºåÈÉΩÂèØ‰ª•Áî®Êù•‰ΩúÊï∞ÁªÑÁöÑÁ¥¢Âºï„ÄÇ

ÂÖ∂‰ªñÂ§ßÂ§öÊï∞ËØ≠Ë®ÄÔºåÊï∞ÁªÑÂøÖÈ°ªÁªè@dfn{Â£∞Êòé}ÊâçÂèØÁî®ÔºåÂåÖÊã¨ÊåáÂÆöÂú®Êï∞ÁªÑ‰∏≠ÂåÖÂê´‰ªÄ‰πàÊ†∑ÂÖÉÁ¥†‰∏éÁªÑ‰ª∂„ÄÇÂú®ËøôÊ†∑ÁöÑËØ≠Ë®Ä‰∏≠ÔºåÂ£∞Êòé ‰ºöÂØºËá¥ÂÜÖÂ≠òÁöÑËøûÁª≠ÂùóÂàÜÈÖçÁî®Êù•Â≠òÂÇ®Ëøô‰∫õÂÖÉÁ¥†„ÄÇÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊï∞ÁªÑ‰∏≠ÁöÑÁ¥¢ÂºïÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÈùûË¥üÊï¥Êï∞„ÄÇ‰æãÂ¶ÇÔºåÁ¥¢Âºï 0 ÊåáÂÆö‰∫ÜÊï∞ÁªÑ‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØÂ≠òÂÇ®Âú®ÂÜÖÂ≠òÂùó‰∏≠ÂºÄÂßãÁöÑÂÖÉÁ¥†ÔºåÁ≠âÁ≠â„ÄÇÊ≤°ÊúâÂèØËÉΩ‰∏∫Êï∞ÁªÑÊ∑ªÂä†Êõ¥Â§öÁöÑÂÖÉÁ¥†ÔºåÂõ†‰∏∫ÂÆÉÂè™ÂåÖÂê´Â£∞ÊòéÊó∂ÊâÄÁªôÂÆöÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇÔºà‰∏Ä‰∫õÂÖ∂‰ªñËØ≠Ë®ÄÂèØ‰ª•‰ΩøÁî®‰ªªÊÑèÁöÑËµ∑Âßã‰∏éÁªìÊùüÁ¥¢ÂºïÔºåÂ¶Ç @samp{15 .. 27}Ôºå
‰ΩÜÊòØÊï∞ÁªÑÁöÑÂ§ßÂ∞è‰∏ÄÁªèÂ£∞ÊòéÂêéÔºåÂ∞±ÊòØÂõ∫ÂÆöÁöÑ„ÄÇÔºâ

@c 1/2015: Do not put the numeric values into @code. Array element
@c values are no different than scalar variable values.
‰∏Ä‰∏™ 4 ‰∏™ÂÖÉÁ¥†ÁöÑËøûÁª≠Êï∞ÁªÑÁúãËµ∑Êù•Â¶Ç 
@ifnotdocbook
@ref{figure-array-elements},
@end ifnotdocbook
@ifdocbook
@inlineraw{docbook, <xref linkend="figure-array-elements"/>},
@end ifdocbook
ÊâÄÁ§∫ÔºåÂÖÉÁ¥†ÁöÑÂÄºÂÅáËÆæ‰∏∫ 8Ôºå@code{"foo"}Ôºå@code{""} Ë∑ü 30„ÄÇ

@ifnotdocbook
@float Figure,figure-array-elements
@caption{ËøûÁª≠Êï∞ÁªÑ}
@center @image{array-elements, , , ËøûÁª≠Êï∞ÁªÑ}
@end float
@end ifnotdocbook

@docbook
<figure id="figure-array-elements" float="0">
<title>A contiguous array</title>
<mediaobject>
<imageobject role="web"><imagedata fileref="array-elements.png" format="PNG"/></imageobject>
</mediaobject>
</figure>
@end docbook

@noindent
ÂÖ∂‰∏≠‰ªÖÂÄº‰ºöË¢´Â≠òÂÇ®Ëµ∑Êù•ÔºåÁ¥¢ÂºïÂàôÊòØÂú®ÂÄºÁöÑÈ°∫Â∫è‰∏≠ÈöêÂê´ÁöÑ„ÄÇËøôÈáåÔºå8 ÁöÑÁ¥¢Âºï‰∏∫ 0ÔºåÂõ†‰∏∫ 8 Âá∫Áé∞Âú® 0 ÁöÑ‰ΩçÁΩÆÔºåÂÖ∂‰πãÂâçÊ≤°ÊúâÂÖÉÁ¥†Â≠òÂú®„ÄÇ

@cindex arrays, indexing
@cindex indexing arrays
@cindex associative arrays
@cindex arrays, associative
@command{awk} ÁöÑÊï∞ÁªÑ‰πüÊòØ‰∏çÂêåÁöÑ‚Äî‚ÄîÂÆÉ‰ª¨ÈÉΩÊòØ@dfn{ÂÖ≥ËÅîÊÄß}ÁöÑ„ÄÇ
ËøôÂ∞±ÊòØËØ¥ÔºåÊØè‰∏™Êï∞ÁªÑÈÉΩÊòØ‚ÄúÊàêÂØπÂÄº‚ÄùÈõÜÂêà‚Äî‚Äî‰∏ãÈù¢ÊòØÁ¥¢Âºï‰∏éÂÖ∂ÂÖ≥ËÅîÁöÑÊï∞ÁªÑÂÖÉÁ¥†ÂÄºÔºö

@ifnotdocbook
@c extra empty column to indent it right
@multitable @columnfractions .1 .1 .1
@headitem @tab Index @tab Value
@item @tab @code{3} @tab @code{30}
@item @tab @code{1} @tab @code{"foo"}
@item @tab @code{0} @tab @code{8}
@item @tab @code{2} @tab @code{""}
@end multitable
@end ifnotdocbook

@docbook
<informaltable>
<tgroup cols="2">
<colspec colname="1" align="left"/>
<colspec colname="2" align="left"/>
<thead>
<row>
<entry>Index</entry>
<entry>Value</entry>
</row>
</thead>

<tbody>
<row>
<entry><literal>3</literal></entry>
<entry><literal>30</literal></entry>
</row>

<row>
<entry><literal>1</literal></entry>
<entry><literal>"foo"</literal></entry>
</row>

<row>
<entry><literal>0</literal></entry>
<entry><literal>8</literal></entry>
</row>

<row>
<entry><literal>2</literal></entry>
<entry><literal>""</literal></entry>
</row>

</tbody>
</tgroup>
</informaltable>

@end docbook

@noindent
ÊàêÂØπÂÄº‰ª•ÈöèÊÑèÁöÑÈ°∫Â∫èÂá∫Áé∞ÔºåÂõ†‰∏∫‰ªñ‰ª¨‰∏éÈ°∫Â∫èÊó†ÂÖ≥„ÄÇ 
@footnote{È°∫Â∫èÂú®‰∏çÂêåÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÊòØ‰∏çÂêåÁöÑÔºåÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏ãÊòØÂêèÁî®ÂìàÂ∏åË°®Êù•Â≠òÂÇ®Êï∞ÁªÑÂÖÉÁ¥†‰∏éÂÆÉÁöÑÂÄº„ÄÇ}

ÂÖ≥ËÅîÊï∞ÁªÑÁöÑ‰∏Ä‰∏™Â•ΩÂ§ÑÂ∞±ÊòØÊñ∞ÁöÑÊàêÂØπÂÄºÂèØ‰ª•Âú®‰ªªÊÑèÊó∂Èó¥ËøõË°åÊ∑ªÂä†„ÄÇ‰æãÂ¶ÇÔºåÂÅáÂ¶ÇÁ¨¨ 10 ‰∏™ÂÖÉÁ¥†Ë¢´Âä†Âà∞Êï∞ÁªÑ‰∏≠ÔºåËÄåÂÖ∂ÂÄº‰∏∫ @w{@code{"number ten"}}„ÄÇ
ÂàôÁªìÊûú‰∏∫Ôºö

@ifnotdocbook
@c extra empty column to indent it right
@multitable @columnfractions .1 .1 .2
@headitem @tab Index @tab Value
@item @tab @code{10} @tab @code{"number ten"}
@item @tab @code{3} @tab @code{30}
@item @tab @code{1} @tab @code{"foo"}
@item @tab @code{0} @tab @code{8}
@item @tab @code{2} @tab @code{""}
@end multitable
@end ifnotdocbook

@docbook
<informaltable>
<tgroup cols="2">
<colspec colname="1" align="left"/>
<colspec colname="2" align="left"/>
<thead>
<row>
<entry>Index</entry>
<entry>Value</entry>
</row>
</thead>
<tbody>

<row>
<entry><literal>10</literal></entry>
<entry><literal>"number ten"</literal></entry>
</row>

<row>
<entry><literal>3</literal></entry>
<entry><literal>30</literal></entry>
</row>

<row>
<entry><literal>1</literal></entry>
<entry><literal>"foo"</literal></entry>
</row>

<row>
<entry><literal>0</literal></entry>
<entry><literal>8</literal></entry>
</row>

<row>
<entry><literal>2</literal></entry>
<entry><literal>""</literal></entry>
</row>

</tbody>
</tgroup>
</informaltable>

@end docbook

@noindent
@cindex sparse arrays
@cindex arrays, sparse
Áé∞Âú®Êï∞ÁªÑÊòØ@dfn{Á®ÄÁñè}ÁöÑÔºåÂç≥Êúâ‰∫õÁ¥¢ÂºïÊòØÁº∫Â§±ÁöÑ„ÄÇÂÆÉÊúâÂÖÉÁ¥† 0--3 ‰∏é 10Ôºå‰ΩÜÊòØÊ≤°ÊúâÂÖÉÁ¥† 4Ôºå5Ôºå6Ôºå7Ôºå8 ‰∏é 9„ÄÇ

ÂÖ≥ËÅîÊï∞ÁªÑÁöÑÂè¶‰∏Ä‰∏™ÁªìÊûúÂ∞±ÊòØÁ¥¢Âºï‰∏çÂøÖÊòØÈùûË¥üÁöÑÊï¥Êï∞„ÄÇ‰ªª‰ΩïÊï∞ÂÄºÔºåÁîöËá≥ÊòØÂ≠ó‰∏≤ÈÉΩÂèØ‰ª•‰Ωú‰∏∫Á¥¢Âºï„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÊï∞ÁªÑÂ∞ÜËã±ËØ≠ÂçïËØçÁøªËØë‰∏∫Ê≥ïËØ≠Ôºö

@ifnotdocbook
@multitable @columnfractions .1 .1 .1
@headitem @tab Index @tab Value
@item @tab @code{"dog"} @tab @code{"chien"}
@item @tab @code{"cat"} @tab @code{"chat"}
@item @tab @code{"one"} @tab @code{"un"}
@item @tab @code{1} @tab @code{"un"}
@end multitable
@end ifnotdocbook

@docbook
<informaltable>
<tgroup cols="2">
<colspec colname="1" align="left"/>
<colspec colname="2" align="left"/>
<thead>
<row>
<entry>Index</entry>
<entry>Value</entry>
</row>
</thead>
<tbody>
<row>
<entry><literal>"dog"</literal></entry>
<entry><literal>"chien"</literal></entry>
</row>

<row>
<entry><literal>"cat"</literal></entry>
<entry><literal>"chat"</literal></entry>
</row>

<row>
<entry><literal>"one"</literal></entry>
<entry><literal>"un"</literal></entry>
</row>

<row>
<entry><literal>1</literal></entry>
<entry><literal>"un"</literal></entry>
</row>

</tbody>
</tgroup>
</informaltable>

@end docbook

@noindent
Âú®ËøôÈáåÔºåÊàë‰ª¨ÂÜ≥ÂÆöÂ∞ÜÊï∞ÂÄº 1 ÁøªËØë‰∏∫ÊãºÂÜô‰∏éÊï∞ÂÄºÂΩ¢Âºè‚Äî‚ÄîËøô‰∏™‰æãÂ≠êËØ¥Êòé‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÂç≥ÂèØ‰ª•Áî®Êï∞Â≠ó‰πüÂèØ‰ª•Áî®Â≠ó‰∏≤‰Ωú‰∏∫Á¥¢Âºï„ÄÇ
Ôºà‰∫ãÂÆû‰∏äÔºåÊï∞ÁªÑ‰∏ãÊ†áÊÄªÊòØÂ≠ó‰∏≤„ÄÇËøôÈáåÈù¢ÔºåÊï∞ÂÄºÁî®‰∫éÊï∞ÁªÑ‰∏ãÊ†áÂ¶Ç‰ΩïÂ∑•‰ΩúÔºåÊúâ‰∏Ä‰∫õÂæÆÂ¶ôÁöÑÂú∞ÊñπÔºåËøô‰ºöÂú® @ref{Numeric Array Subscripts}ÔºåËøõË°åÊõ¥ËØ¶ÁªÜÁöÑËØ¥Êòé„ÄÇÔºâÂú®ËøôÈáåÔºåÊï∞ÂÄº @code{1} Ê≤°ÊúâÂèåÂºïÂè∑ÂºïËµ∑Êù•Ôºå
Âõ†‰∏∫ @command{awk} ‰ºöËá™Âä®Âú∞Â∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤„ÄÇ

@cindex @command{gawk}, @code{IGNORECASE} variable in
@cindex case sensitivity, array indices and
@cindex arrays, and @code{IGNORECASE} variable
@cindex @code{IGNORECASE} variable, and array indices
@code{IGNORECASE} ÁöÑÂÄº‰∏ç‰ºöÂΩ±ÂìçÂú®Êï∞ÁªÑËøõË°å‰∏ãÊ†áÊìç‰ΩúÊó∂ÁªìÊûú„ÄÇÁî®Êù•Â≠òÂÇ®‰∏éËøîÂõûÊï∞ÁªÑÂÖÉÁ¥†ÂøÖÈ°ª‰ΩøÁî®Áõ∏ÂêåÁöÑÂ≠ó‰∏≤„ÄÇ
ÂΩì @command{awk} ÂàõÂª∫‰∏Ä‰∏™Êï∞ÁªÑÔºàÊØîÂ¶ÇÂú® @code{split()} ÂÜÖÂª∫ÂáΩÊï∞‰∏≠ÔºâÔºåÈÇ£‰∏™Êï∞ÁªÑÁöÑÁ¥¢ÂºïÂ∞±ÊòØ‰ªé 1 ÂºÄÂßãÁöÑËøûÁª≠Êï¥Êï∞„ÄÇÔºàÊü•Áúã @ref{String Functions}Ôºâ

@command{awk} ÁöÑÊï∞ÁªÑÊòØÈùûÂ∏∏È´òÊïàÁöÑ‚Äî‚ÄîËÆøÈóÆÂÖÉÁ¥†ÁöÑÊó∂Èó¥‰∏éÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†Êï∞ÈáèÊó†ÂÖ≥„ÄÇ

@node Reference to Elements
@subsection ÊåáÂêëÊï∞ÁªÑÂÖÉÁ¥†
@cindex arrays, referencing elements
@cindex array members
@cindex elements of arrays

‰ΩøÁî®Êï∞ÁªÑÁöÑ‰∏ªË¶ÅÊñπÂºèÂ∞±ÊòØ‰ΩøÁî®ÂÆÉÁöÑÂÖÉÁ¥†„ÄÇ@dfn{Êï∞ÁªÑÂèÇËÄÉ}ÊòØ‰∏Ä‰∏™Â¶Ç‰∏ãÈù¢ËøôÊ†∑ÁöÑË°®ËææÂºèÔºö

@example
@var{array}[@var{index-expression}]
@end example

@noindent
Âú®ËøôÈáåÔºå@var{array} ÊòØÊï∞ÁªÑÁöÑÂêçÂ≠ó„ÄÇË°®ËææÂºè @var{index-expression} ÊòØÊï∞ÁªÑ‰∏≠ÊâÄÈúÄË¶ÅÂÖÉÁ¥†ÁöÑÁ¥¢Âºï„ÄÇ

@c 1/2015: Having the 4.3 in @samp is a little iffy. It's essentially
@c an expression though, so leave be. It's to early in the discussion
@c to mention that it's really a string.
Êï∞ÁªÑÂèÇËÄÉÁöÑÂÄºÊòØÊï∞ÁªÑÊåáÂÆöÂÖÉÁ¥†ÁöÑÂΩìÂâçÂÄº„ÄÇ‰æãÂ¶Ç @code{foo[4.3]} ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÂèÇËÄÉÔºå
ÊòØÊåáÊï∞ÁªÑ @code{foo} Âú®Á¥¢Âºï @samp{4.3} ÁöÑÂÖÉÁ¥†„ÄÇ

@cindex arrays, unassigned elements
@cindex unassigned array elements
@cindex empty array elements
ÂØπÊú™Â≠òÂú®Êï∞ÁªÑÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂèÇËÄÉÔºå‰ºö‰∫ßÁîü‰∏Ä‰∏™ @code{""} ÂÄºÔºåÂç≥Á©∫‰∏≤„ÄÇ
Ëøô‰πüÂåÖÊã¨‰∫ÜÈÇ£‰∫õËøòÊ≤°ÊúâË¢´ËµãÂÄºÁöÑÂÖÉÁ¥†Ôºå‰ª•ÂèäÂ∑≤ÁªèÂà†Èô§ÁöÑÂÖÉÁ¥†ÔºàÊü•Áúã @ref{Delete}Ôºâ„ÄÇ

@cindex non-existent array elements
@cindex arrays, elements that don't exist
@quotation ÊèêÁ§∫
ÂØπ‰∏çÂ≠òÂú®ÂÖÉÁ¥†ÁöÑÂèÇËÄÉ‰ºö@emph{Ëá™Âä®Âú∞}ÂàõÂª∫Ëøô‰∏™Êï∞ÁªÑÂÖÉÁ¥†ÔºåÂπ∂Â∞ÜÁ™óÂè£‰Ωú‰∏∫ÂÆÉÁöÑÂÄº„ÄÇÔºàÂú®ÊüêÁßçÊÉÖÂÜµ‰∏ãÔºåËøôÂç¥ÊòØ‰∏çÂπ∏ÁöÑÔºåÂõ†‰∏∫Ëøô‰ºöÊµ™Ë¥π @command{awk} ‰∏≠ÁöÑÂÜÖÂ≠ò„ÄÇÔºâ

@command{awk} Êñ∞ÊâãÁ®ãÂ∫èÂëòÂ∏∏Â∏∏ÁäØÈÄöËøáÊ£ÄÊü•ÂÖ∂ÂÄºÊòØÂê¶‰∏∫Á©∫Êù•Ê£ÄÊü•ÂÖÉÁ¥†Â≠ò‰∏çÂ≠òÂú®ÁöÑÈîôËØØÔºö

@example
# Check if "foo" exists in a:         @ii{Incorrect!}
if (a["foo"] != "") @dots{}
@end example

@noindent
ËøôÊòØ‰∏çÊ≠£Á°ÆÁöÑÔºåÊúâ‰∏§‰∏™ÂéüÂõ†ÔºöÁ¨¨‰∏ÄÔºåÂ¶ÇÊûú‰πãÂâç‰∏çÂ≠òÂú® @code{a["foo"]}ÔºåÂàô‰ºö@emph{ÂàõÂª∫}ÂÆÉ„ÄÇ
Á¨¨‰∫åÔºåÔºàÁúãËµ∑Êù•‰∏çÂØªÂ∏∏ÔºâÂ∞ÜÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÄºËÆæÁΩÆÊàêÁ©∫‰∏≤ÊòØÊúâÊïàÁöÑ„ÄÇ
@end quotation

@c @cindex arrays, @code{in} operator and
@cindex @code{in} operator, testing if array element exists
‰∏∫‰∫ÜÁ°ÆÂÆöÁâπÂÆöÁ¥¢ÂºïÁöÑÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®Êï∞ÁªÑ‰∏≠Ôºå‰ΩøÁî®‰∏ãÈù¢ÁöÑË°®ËææÂºèÔºö

@example
@var{indx} in @var{array}
@end example

@cindex side effects, array indexing
@noindent
Ëøô‰∏™Ë°®ËææÂºèÊµãËØïÁâπÂÆöÁöÑÁ¥¢Âºï @var{indx} ÊòØÂê¶Â≠òÂú®ÔºåÂπ∂‰∏î‰∏ç‰ºö‰∫ßÁîüÂ¶ÇÊûúÂÖÉÁ¥†‰∏çÂ≠òÂú®‰ºöÂàõÂª∫Ëøô‰∏™ÂÖÉÁ¥†ÁöÑÂâØ‰ΩúÁî®„ÄÇ
Â¶ÇÊûú @code{@var{array}[@var{indx}]} Â≠òÂú®ÔºåÂàôË°®ËææÂºèÁöÑÂÖ∑ÊúâÂÄº 1 ÔºàtrueÔºâÔºåÂê¶Âàô‰∏∫ 0 ÔºàfalseÔºâ„ÄÇ
ÔºàÊàë‰ª¨Âú®ËøôÈáå‰ΩøÁî®ÁöÑÊòØ @var{indx}ÔºåÊòØÂõ†‰∏∫ @samp{index} ÊòØÂÜÖÂª∫ÂáΩÊï∞ÁöÑÂêçÂ≠ó„ÄÇÔºâ
‰æãÂ¶ÇÔºåËøô‰∏™ËØ≠Âè•ÊµãËØïÊï∞ÁªÑ @code{frequencies} ÊòØ‰∏çÂ≠òÂú®Á¥¢Âºï @samp{2} Ôºö

@example
if (2 in frequencies)
    print "Subscript 2 is present."
@end example

Ê≥®ÊÑèÔºåËøô@emph{‰∏çÊòØ}ÊµãËØïÊï∞ÁªÑ @code{frequencies} ÊòØÂê¶ÂåÖÂê´@emph{ÂÄº}‰∏∫ 2 ÁöÑÂÖÉÁ¥†„ÄÇ
Èô§‰∫ÜÊâ´ÊèèÊâÄÊúâÁöÑÂÖÉÁ¥†ÔºåÂê¶ÂàôÁöÑËØùÊ≤°ÊúâÂÖ∂‰ªñÁöÑÂäûÊ≥ï„ÄÇÂêåÊó∂ÔºåËøô‰πü@emph{‰∏ç‰ºö}ÂàõÂª∫ @code{frequencies[2]}Ôºå
ËÄå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂàô‰ºöÔºàÊòØ‰∏çÊ≠£Á°ÆÁöÑÔºâÔºö

@example
if (frequencies[2] != "")
    print "Subscript 2 is present."
@end example

@node Assigning Elements
@subsection ÁªôÊï∞ÁªÑÂÖÉÁ¥†ËµãÂÄº
@cindex arrays, elements, assigning values
@cindex elements in arrays, assigning values

Êï∞ÁªÑÂÖÉÁ¥†ÂèØ‰ª•ÂÉè @command{awk} ÂèòÈáè‰∏ÄÊ†∑Ë¢´ËµãÂÄºÔºö

@example
@var{array}[@var{index-expression}] = @var{value}
@end example

@noindent
@var{array} ÊòØÊï∞ÁªÑÁöÑÂêçÂ≠ó„ÄÇË°®ËææÂºè @var{index-expression} ÊòØ @var{value} Ë¶ÅË¢´ËµãÂÄºÁöÑÂÖÉÁ¥†ÁöÑÁ¥¢Âºï„ÄÇ
Ë°®ËææÂºèÁöÑÂÄºÊòØËµãÁªôÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÄº„ÄÇ

@node Array Example
@subsection Âü∫Êú¨Êï∞ÁªÑÂÆû‰æã
@cindex arrays, an example of using

‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÊèêÂèñ‰∏ÄÁ≥ªÂàóÁöÑË°åÔºåÊØè‰∏ÄË°å‰ª•Êï∞Â≠óÂºÄÂßãÔºåÂπ∂ÊåâË°åÂè∑ÁöÑÈ°∫Â∫èÊâìÂç∞ÂÆÉ‰ª¨„ÄÇË°åÂè∑Á¨¨‰∏ÄÊ¨°ËØªÂèñÁöÑÊó∂ÂÄô‰∏çÊòØÈ°∫Â∫èÁöÑ‚Äî‚ÄîÁõ∏ÂèçÔºåÂÆÉ‰ª¨ÊòØÊâì‰π±ÁöÑ„ÄÇÁ®ãÂ∫èÂØπË°åËøõË°åÊéíÂ∫èÔºå‰ΩøÊï∞ÁªÑÁî®Ë°åÂè∑‰Ωú‰∏∫‰∏ãÊ†á„ÄÇÁ®ãÂ∫èÁÑ∂ÂêéÊåâÁÖßË°åÂè∑ÁöÑÈ°∫Â∫èÊâìÂç∞ÂÆÉ‰ª¨„ÄÇËøôÊòØ‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÁ®ãÂ∫èÔºå‰ΩÜÊòØÂú®ÈÅáÂà∞ÈáçÂ§çÁöÑË°åÂè∑ÔºåÁ©∫Ê†ºÊàñËÄÖ‰∏çÊòØ‰ª•Êï∞ÂÄºÂºÄÂßãÁöÑË°åÁöÑÊó∂ÂÄô‰ºöÂØºËá¥Âõ∞ÊÉëÔºö

@example
@c file eg/misc/arraymax.awk
@{
    if ($1 > max)
        max = $1
    arr[$1] = $0
@}

END @{
    for (x = 1; x <= max; x++)
        print arr[x]
@}
@c endfile
@end example

Á¨¨‰∏Ä‰∏™ËßÑÂàôË∑üË∏™ÂΩìÂâçÂ∑≤ÁªèÁúãÂà∞ÁöÑÊúÄÂ§ßÁöÑË°åÂè∑ÔºåÂêåÊó∂‰πüÂ∞ÜÊØè‰∏ÄË°åÂ≠òÂÇ®Âú®Êï∞ÁªÑ @code{arr} ‰∏≠Ôºå
Âπ∂‰ª•Ë°åÂè∑‰Ωú‰∏∫Á¥¢Âºï„ÄÇÊØè‰∫å‰∏™ËßÑÂàôÂàôÊòØÊâìÂç∞ÊâÄÊúâÁöÑË°å„ÄÇÂΩìÁ®ãÂ∫èÊâßË°åÊó∂ÔºåÊúâ‰∏ãÈù¢ÁöÑËæìÂÖ•Ôºö

@example
@c file eg/misc/arraymax.data
5  I am the Five man
2  Who are you?  The new number two!
4  . . . And four on the floor
1  Who is number one?
3  I three you.
@c endfile
@end example

@noindent
Its output is:

@example
1  Who is number one?
2  Who are you?  The new number two!
3  I three you.
4  . . . And four on the floor
5  I am the Five man
@end example

Â¶ÇÊûúË°åÂè∑ÊòØÈáçÂ§çÁöÑÔºåÂ∑≤ÁªèÂ≠òÂú®ÁöÑË°åÁöÑÊúÄÂêé‰∏ÄË°åÂ∞ÜË¶ÜÁõñÂÖ∂‰ªñÁöÑ„ÄÇ
Âú®Ë°åÂè∑Èó¥ÁöÑÁ©∫ÈöôÂèØ‰ª•ÈÄöËøáÂú®Á®ãÂ∫èÁöÑ @code{END} ËßÑÂàô‰∏≠ÂÅö‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂ¢ûÂº∫Â∞±ÂèØ‰ª•Â§ÑÁêÜÔºåÂ¶Ç‰∏ãÔºö

@example
END @{
    for (x = 1; x <= max; x++)
        if (x in arr)
            print arr[x]
@}
@end example

@node Scanning an Array
@subsection ÈÅçÂéÜÊï∞ÁªÑÂÖÉÁ¥†
@cindex elements in arrays, scanning
@cindex scanning arrays
@cindex arrays, scanning
@cindex loops, @code{for}, array scanning

Âú®‰ΩøÁî®Êï∞ÁªÑÁöÑÁ®ãÂ∫è‰∏≠ÔºåÂ∏∏Â∏∏ÈúÄË¶Å‰ΩøÁî®Âæ™ÁéØÊù•ÊâßË°åÈíàÂØπÊï∞ÁªÑ‰∏≠ÊØè‰∏™ÂÖÉÁ¥†ÁöÑÊìç‰Ωú„ÄÇÂú®ÂÖ∂‰ªñÁöÑËØ≠Ë®Ä‰∏≠ÔºåÊï∞ÁªÑÊòØËøûÁª≠ÁöÑÔºåÂπ∂‰∏îËøá‰∫õÈôêÂà∂‰∏∫ÈùûË¥üÊï¥Êï∞ÔºåÂ§ÑÁêÜËµ∑Êù•Â∞±ÈùûÂ∏∏ÁöÑÁÆÄÂçïÔºöÊâÄÊúâÊúâÊïàÁöÑÁ¥¢ÂºïÈÉΩÂèØ‰ª•‰∏∫ÊúÄ‰ΩéÁ¥¢ÂºïÂà∞ÊúÄÂ§ßÁöÑÁ¥¢Âºï„ÄÇËøô‰∏™ÊäÄÂ∑ßÂú® @command{awk} ‰∏≠Âπ∂‰∏çÂèØÁî®ÔºåÂõ†Ê≠§‰ªªÊÑèÁöÑÊï∞Â≠ó‰∏éÂ≠ó‰∏≤ÈÉΩÂèØ‰ª•‰Ωú‰∏∫Êï∞ÁªÑÁöÑÁ¥¢Âºï„ÄÇÂõ†Ê≠§Ôºå@command{awk} Êúâ‰∏Ä‰∏™ÁâπÊÆäÁöÑ @code{for} ËØ≠Âè•Êù•Êâ´ÊèèÊï∞ÁªÑÔºö

@example
for (@var{var} in @var{array})
    @var{body}
@end example

@noindent
@cindex @code{in} operator, use in loops
Ëøô‰∏™Âæ™ÁéØ‰∏∫Á®ãÂ∫è‰∏≠‰ΩøÁî®ËøáÁöÑÊï∞ÁªÑ @var{array} ‰∏≠ÁöÑÊØè‰∏Ä‰∏™Á¥¢ÂºïÊâßË°å‰∏ÄÊ¨° @var{body}Ôºå
Âπ∂Â∞Ü @var{var} ÂèòÈáèËÆæÁΩÆÊàêÁ¥¢ÂºïÂÄº„ÄÇ

@cindex arrays, @code{for} statement and
@cindex @code{for} statement, looping over arrays
‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰ΩøÁî®ËøôÁßçÂΩ¢ÂºèÁöÑ @code{for} ËØ≠Âè•„ÄÇÁ¨¨‰∏Ä‰∏™ËßÑÂàôÊâ´ÊèèËæìÂÖ•ËÆ∞ÂΩïÔºåÂπ∂‰∏îÊ≥®ÊÑèÂá∫Áé∞Âú®ËæìÂÖ•‰∏≠ÁöÑÂçïËØçÔºàËá≥Â∞ëÂá∫Áé∞‰∏ÄÊ¨°ÔºâÔºå
ÈÄöËøáÁî®ÂÖ∂‰∏≠‰∏Ä‰∏™ÂçïËØç‰Ωú‰∏∫Á¥¢ÂºïÊù•Âπ∂Â∞ÜÂÄº 1 Â≠òÂà∞Â≠òÂÇ®Êï∞ÁªÑ @code{used} ‰∏≠„ÄÇ
Á¨¨‰∫å‰∏™ËßÑÂàôÊâ´ÊèèÂ∑≤Áªè‰ΩøÁî®ËøáÁöÑÂÖÉÁ¥†Êù•Êü•ÊâæÊâÄÊúâÁöÑÂú®ËæìÂÖ•‰∏≠Âá∫Áé∞ÁöÑ‰∏çÂêåÁöÑÂçïËØç„ÄÇÁÑ∂ÂêéÊâìÂç∞ÂÖ∂ÈïøÂ∫¶Â§ß‰∫é 10 ‰∏™Â≠óÁ¨¶ÁöÑÂçïËØçÔºå
ÂêåÊó∂‰πüÊâìÂç∞Ê≠§Á±ªÂçïËØçÂá∫Áé∞ÁöÑÊ¨°Êï∞„ÄÇÊü•Áúã @ref{String Functions}ÔºåÊù•Ëé∑ÂèñÂÜÖÂª∫ÂáΩÊï∞ @code{length()} ÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

@example
# Record a 1 for each word that is used at least once
@{
    for (i = 1; i <= NF; i++)
        used[$i] = 1
@}

# Find number of distinct words more than 10 characters long
END @{
    for (x in used) @{
        if (length(x) > 10) @{
            ++num_long_words
            print x
        @}
    @}
    print num_long_words, "words longer than 10 characters"
@}
@end example

@noindent
Êü•Áúã @ref{Word Sorting}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑÊõ¥Â§öÊõ¥ËØ¶ÁªÜÁöÑÊ≠§Á±ª‰æãÂ≠ê„ÄÇ

@cindex arrays, elements, order of access by @code{in} operator
@cindex elements in arrays, order of access by @code{in} operator
@cindex @code{in} operator, order of array access
ÈÄöËøáËøô‰∏™ËØ≠Âè•ËÆøÈóÆÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑÈ°∫Â∫èÂàôÊòØÁî± @command{awk} ÂÜÖÈÉ®ÂØπÊï∞ÁªÑÂÖÉÁ¥†ÁöÑÂÆâÊéíÁ°ÆÂÆöÁöÑÔºå
Âπ∂‰∏îÂú®Ê†áÂáÜÁöÑ @command{awk} ‰∏≠ÊòØÊó†Ê≥ïÊéßÂà∂‰∏éÊîπÂèòÁöÑ„ÄÇÂ¶ÇÊûúÊñ∞ÂÖÉÁ¥†Ë¢´Âú®Âæ™ÁéØ‰ΩìÂÜÖÁöÑËØ≠Âè•Âä†ÂÖ•Âà∞Êï∞ÁªÑ @var{array} ‰∏≠Ôºå
ÂâçÈù¢ÁöÑËßÑÂàôÂèØ‰ºöÂØºËá¥ÈóÆÈ¢òÁöÑ‰∫ßÁîüÔºåÂç≥Âú® @code{for} Âæ™ÁéØ‰∏≠‰ªÄ‰πàÊó∂ÂÄôÊåáÂêëÂÆÉ‰ª¨ÊòØ‰∏çÂèØÈ¢ÑÊµãÁöÑ„ÄÇÁõ∏‰ººÁöÑÔºåÊîπÂèòÂæ™ÁéØ‰ΩìÂÜÖÁöÑ @var{var} ‰ºöÂØºËá¥Â•áÊÄ™ÁöÑÁªìÊûú„ÄÇ
Âõ†Ê≠§ÊúÄÂ•ΩÂà´ÂÅöËøôÊ†∑ÁöÑ‰∫ãÊÉÖ„ÄÇ

‰Ωú‰∏∫‰ø°ÊÅØÁÇπÔºå@command{gawk} ÂºÄÂßãÂæ™ÁéØ‰πãÂâçÔºåÊåÇËµ∑Ë¢´Ëø≠‰ª£ÁöÑÂÖÉÁ¥†ÁöÑÂàóË°®ÔºåÂπ∂‰∏çÂèØ‰ª•ÊîπÂèòÂÆÉ„ÄÇ
‰ΩÜÊòØ‰∏çÊòØÊâÄÊúâÁöÑ @command{awk} ÁâàÊú¨ÈÉΩËøô‰πàÂÅö„ÄÇËÄÉËôë‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºåÂêç‰∏∫ @file{loopcheck.awk}Ôºö

@example
BEGIN @{
    a["here"] = "here"
    a["is"] = "is"
    a["a"] = "a"
    a["loop"] = "loop"
    for (i in a) @{
        j++
        a[j] = j
        print i
    @}
@}
@end example

ËøôÊòØÁî® @command{gawk}Ôºà‰∏é @command{mawk}ÔºâÊâßË°åÊó∂ÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f loopcheck.awk}
@print{} here
@print{} loop
@print{} a
@print{} is
@end example

ËÄå‰∏ãÈù¢ÊòØ BWK @command{awk} ÁöÑÊâßË°åÁªìÊûúÔºö

@example
$ @kbd{nawk -f loopcheck.awk}
@print{} loop
@print{} here
@print{} is
@print{} a
@print{} 1
@end example

@node Controlling Scanning
@subsection Âú® @command{gawk} ‰∏≠‰ΩøÁî®È¢ÑÂÆö‰πâÁöÑÊï∞ÁªÑÈÅçÂéÜÈ°∫Â∫è

Êú¨@value{SUBSECTION}ÊèèËø∞ÁöÑÊòØ @command{gawk} ÁâπÊúâÁöÑÁâπÊÄß„ÄÇ

Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂΩì @code{for} Âú®ÈÅçÂéÜÊï∞ÁªÑÊó∂ÔºåÂÖ∂È°∫Â∫èÊòØÊú™ÂÆö‰πâÁöÑÔºåÂç≥ÊòØËØ¥Ôºå@command{awk} ÁöÑÂÆûÁé∞ÂÜ≥ÂÆö‰∫ÜÂú®ÈÅçÂéÜÊï∞ÁªÑÊó∂ÁöÑÈ°∫Â∫è„ÄÇËøô‰∏™È°∫Â∫èÈÄöÂ∏∏ÊòØÂü∫‰∫éÊï∞ÁªÑÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÔºåÂπ∂Âú®‰∏çÂêåÁâàÊú¨ÁöÑ @command{awk} ÊúâÂ∑ÆÂºÇ„ÄÇ

@cindex array scanning order, controlling
@cindex controlling array scanning order
Â∞ΩÁÆ°‰Ω†ÈÄöÂ∏∏ÂÅöÁöÑÈÉΩÊòØ‰∏Ä‰∫õÁÆÄÂçïÁöÑ‰∫ãÊÉÖÔºåÂ¶Ç‚ÄúÈÄöËøá‰ª•ÂçáÂ∫èÁöÑÊñπÂºèÊØîËæÉÁ¥¢ÂºïÊù•ÈÅçÂéÜÊï∞ÁªÑ‚ÄùÔºåÊàñËÄÖÊòØ‚ÄúÈÄöËøá‰ª•ÈôçÂ∫èÁöÑÊñπÂºèÊØîËæÉÂÄºÊù•ÈÅçÂéÜÊï∞ÁªÑ‚Äù„ÄÇ
@command{gawk} ÈÄöËøá‰∏§ÁßçÊú∫Âà∂ËÆ©‰Ω†Êù•ÊâßË°åËøôÊ†∑ÁöÑÊéßÂà∂Ôºö

@itemize @value{BULLET}
@item
ËÆæÁΩÆ @code{PROCINFO["sorted_in"]} ÁöÑÂÄº‰∏∫È¢ÑÂÆö‰πâÂÄº‰πã‰∏Ä„ÄÇÂêéÈù¢‰ºöËÆ≤Âà∞„ÄÇ

@item
ËÆæÁΩÆ @code{PROCINFO["sorted_in"]} ‰∏∫Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞Áî®Êù•ÊØîËæÉÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇËøô‰∏™È´òÁ∫ßÁâπÊÄßÂú®ÂêéÈù¢ÁöÑÁ´†ËäÇ @ref{Array Sorting}Ôºå
‰∏≠ËøõË°åÊèèËø∞„ÄÇ
@end itemize

@cindex @code{PROCINFO}, values of @code{sorted_in}
‰∏ãÈù¢ÊòØÂèØËé∑ÂèñÁöÑ @code{PROCINFO["sorted_in"]} ÂÄºÔºö

@table @code
@item "@@unsorted"
Êï∞ÁªÑÂÖÉÁ¥†‰ª•‰ªªÊÑèÈ°∫Â∫èÂ§ÑÁêÜÔºåËøôÊòØÈªòËÆ§ÁöÑ @command{awk} Ë°å‰∏∫„ÄÇ

@item "@@ind_str_asc"
‰ª•Â≠ó‰∏≤ÊØîËæÉÁ¥¢ÂºïÂçáÂ∫èÊñπÂºèÔºåËøôÊòØÊúÄÂü∫Êú¨ÁöÑÊéíÂ∫è„ÄÇÔºàÂú®ÂÜÖÈÉ®ÔºåÊï∞ÁªÑÁ¥¢ÂºïÊÄªÊòØÂ≠ó‰∏≤ÔºåÂõ†Ê≠§ @samp{a[2*5] = 1} ‰∏≠ÁöÑÁ¥¢ÂºïÊòØ @code{"10"}Ôºå
ËÄå‰∏çÊòØÊï∞Â≠óÁöÑ 10„ÄÇÔºâ

@item "@@ind_num_asc"
‰ª•Á¥¢ÂºïÂçáÂ∫èÁöÑÊñπÂºèÔºå‰ΩÜÊòØÂº∫Âà∂Á¥¢Âºï‰ª•Êï∞ÂÄºÂØπÂæÖ„ÄÇÂØπ‰∫é‰∏çÊòØÊï∞ÂÄºÁöÑÁ¥¢ÂºïÔºåÂ∞±ÂΩìÊàêÊòØ 0 ÁöÑÊñπÂºèËøõË°åÂÆö‰Ωç„ÄÇ

@item "@@val_type_asc"
‰ª•ÂÖÉÁ¥†ÂÄºÁöÑÂçáÂ∫èÊñπÂºèÊéíÂ∫èÔºàËÄå‰∏çÊòØÁ¥¢ÂºïÔºâ„ÄÇÊéíÂ∫èÊòØÈÄöËøáÁªôÂÖÉÁ¥†ÊâÄËµãÂÄºÁöÑÁ±ªÂûãËøõË°åÁöÑÔºàÊü•Áúã @ref{Typing and Comparison}Ôºâ„ÄÇ
ÊâÄÊúâÁöÑÊï∞ÂÄºÈÉΩÂú®Â≠ó‰∏≤‰πãÂâçÔºåÂêéÈù¢ÂÜçÊé•Â≠êÊï∞ÁªÑ„ÄÇÔºàÂ≠êÊï∞ÁªÑËøòÊ≤°ÊúâËÆ®ËÆ∫Âà∞ÔºåÊü•Áúã @ref{Arrays of Arrays}Ôºâ„ÄÇ

@item "@@val_str_asc"
ÊåâÂÖÉÁ¥†ÂÄºÁöÑÂçáÂ∫èÊéíÂ∫èÔºà‰∏çÊòØÊåâÁ¥¢ÂºïÔºâ„ÄÇÊ†áÈáèÂÄº‰∏éÂ≠ó‰∏≤ËøõË°åÊØîËæÉÔºåÂ¶ÇÊûúÊúâÂ≠êÊï∞ÁªÑÔºåÂàôÊúÄÂêé‰∏éÂÖ∂ÊØîËæÉ„ÄÇ

@item "@@val_num_asc"
ÊåâÂÖÉÁ¥†ÂÄºÁöÑÂçáÂ∫èÊéíÂ∫èÔºà‰∏çÊòØÊåâÁ¥¢ÂºïÔºâ„ÄÇÊ†áÈáèÂÄº‰∏éÂ≠ó‰∏≤ËøõË°åÊØîËæÉÔºåÂ¶ÇÊûúÊúâÂ≠êÊï∞ÁªÑÔºåÂàôÊúÄÂêé‰∏éÂÖ∂ÊØîËæÉ„ÄÇÂΩìÊï∞ÂÄºÁõ∏ÂêåÊó∂ÔºåÁî®Â≠ó‰∏≤ÊØîËæÉÊù•Á°ÆÂÆöÈ°∫Â∫è„ÄÇËøô‰øùËØÅ‰∫ÜÂú®‰∏çÂêåÁâàÊú¨ÁöÑ C @code{qsort()} ÂáΩÊï∞Èó¥ÁöÑ‰∏ÄËá¥ÁªìÊûúÔºå
@footnote{ÂΩì‰∏§‰∏™ÂÖÉÁ¥†ÊØîËæÉÁõ∏ÂêåÊó∂ÔºåC ÁöÑ @code{qsort()} ÂáΩÊï∞‰∏ç‰øùËØÅÂÆÉ‰ª¨ÊØîËæÉ‰πãÂêé‰øùÊåÅÊØîËæÉ‰πãÂâçÁöÑÁõ∏ÂØπÈ°∫Â∫èÔºà‰∏çÁ®≥ÂÆöÊéíÂ∫èÔºâ„ÄÇ
ÈÄöËøáÂ≠ó‰∏≤ÊØîËæÉÔºåÂèØ‰ª•‰øùËØÅÂú®Êï∞ÂÄºÊØîËæÉ‰∏∫Áõ∏ÂêåÊó∂ÔºåÂèØÊèê‰æõÂîØ‰∏ÄÁöÑÈ°∫Â∫èÔºåÂõ†Ê≠§ @command{gawk} ÂèØ‰ª•Âú®‰∏çÂêåÁöÑÁéØÂ¢É‰∏≠Ë°å‰∏∫‰∏ÄËá¥„ÄÇ}
Âú®ÂÜÖÈÉ®ÂÆÉË¢´ @command{gawk} Áî®Êù•ÊâßË°åÊéíÂ∫è„ÄÇ

@item "@@ind_str_desc"
‰∏é @code{"@@ind_str_asc"} Áõ∏‰ººÔºå‰ΩÜÊòØÂ≠ó‰∏≤È°∫Â∫èÊòØ‰ªéÈ´òÂà∞‰ΩéÔºåÂç≥ÈôçÂ∫è„ÄÇ

@item "@@ind_num_desc"
‰∏é @code{"@@ind_num_asc"} Áõ∏‰ººÔºå‰ΩÜÊòØÊï∞ÂÄºÁ¥¢ÂºïÊòØ‰ªéÈ´òÂà∞‰ΩéÔºåÂç≥ÈôçÂ∫è„ÄÇ

@item "@@val_type_desc"
‰∏é @code{"@@val_type_asc"} Áõ∏‰ººÔºå‰ΩÜÊòØÂü∫‰∫éÂÖÉÁ¥†ÂÄºÁöÑÁ±ªÂûãÂàôÊòØ‰ªéÈ´òÂà∞‰Ωé„ÄÇÂ¶ÇÊûúÊúâÂ≠êÊï∞ÁªÑÔºåÂàôÊúÄÂÖàÊØîËæÉÂ≠êÊï∞ÁªÑ„ÄÇ

@item "@@val_str_desc"
‰∏é @code{"@@val_str_asc"} Áõ∏‰ººÔºå‰ΩÜÊòØÂü∫‰∫éÂÖÉÁ¥†ÂÄºÁöÑÂ≠ó‰∏≤ÂàôÊòØ‰ªéÈ´òÂà∞‰Ωé„ÄÇÂ¶ÇÊûúÊúâÂ≠êÊï∞ÁªÑÔºåÂàôÊúÄÂÖàÊØîËæÉÂ≠êÊï∞ÁªÑ„ÄÇ

@item "@@val_num_desc"
‰∏é @code{"@@val_num_asc"} Áõ∏‰ººÔºå‰ΩÜÊòØÂü∫‰∫éÂÖÉÁ¥†ÂÄºÁöÑÊï∞ÂÄºÂàôÊòØ‰ªéÈ´òÂà∞‰Ωé„ÄÇÂ¶ÇÊûúÊúâÂ≠êÊï∞ÁªÑÔºåÂàôÊúÄÂÖàÊØîËæÉÂ≠êÊï∞ÁªÑ„ÄÇ
@end table

Êï∞ÁªÑÁöÑÈÅçÂéÜÈ°∫Â∫èÊòØÂú® @code{for} Âæ™ÁéØÂºÄÂßãÊâßË°å‰πãÂâçÂ∞±Á°ÆÂÆöÁöÑ„ÄÇÂú®Âæ™ÁéØ‰ΩìÂÜÖÊîπÂèò @code{PROCINFO["sorted_in"]} ÁöÑÂÄº‰∏ç‰ºöÂΩ±ÂìçÂæ™ÁéØ„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{gawk '}
> @kbd{BEGIN @{}
> @kbd{   a[4] = 4}
> @kbd{   a[3] = 3}
> @kbd{   for (i in a)}
> @kbd{       print i, a[i]}
> @kbd{@}'}
@print{} 4 4
@print{} 3 3
$ @kbd{gawk '}
> @kbd{BEGIN @{}
> @kbd{   PROCINFO["sorted_in"] = "@@ind_str_asc"}
> @kbd{   a[4] = 4}
> @kbd{   a[3] = 3}
> @kbd{   for (i in a)}
> @kbd{       print i, a[i]}
> @kbd{@}'}
@print{} 3 3
@print{} 4 4
@end example

ÂΩìÈÄöËøáÂÖÉÁ¥†ÂÄºÁöÑÊñπÂºèÊù•ÊéíÂ∫èÔºåÂ¶ÇÊûúÊüê‰∏™ÂÄº‰∏∫Â≠êÊï∞ÁªÑÔºåÂàôÂÖ∂Ë¢´ËÆ§‰∏∫ÊØî‰ªªÊÑèÁöÑÂ≠ó‰∏≤‰∏éÊï∞ÁªÑÈÉΩÂ§ßÔºåËÄå‰∏çÁÆ°Â≠êÊï∞ÁªÑ‰∏≠ÂåÖÂê´ÁöÑÂÜÖÂÆπÔºå
ËÄåÊâÄÊúâÁöÑÂ≠êÊï∞ÁªÑÈÉΩÂΩìÊàêÁõ∏ÂêåÊù•ÂØπÂæÖ„ÄÇËÄåÂÆÉ‰ª¨‰πãÈó¥ÁöÑÁõ∏ÂØπÈ°∫Â∫èÂàôÁî±ÂÆÉ‰ª¨ÁöÑÁ¥¢ÂºïÂ≠ó‰∏≤Êù•ÂÜ≥ÂÆö „ÄÇ

‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÂú®ËøõË°åÊéíÂ∫èÊï∞ÁªÑÈÅçÂéÜÊó∂Ë¶ÅËÆ∞‰ΩèÁöÑÁÇπÔºö

@itemize @value{BULLET}
@item
@code{PROCINFO["sorted_in"]} ÁöÑÂÄºÊòØÂÖ®Â±ÄÁöÑÔºåÂÆÉÂΩ±ÂìçÊâÄÊúâÁöÑÊï∞ÁªÑÈÅçÂéÜ @code{for} Âæ™ÁéØ„ÄÇ
Â¶ÇÊûú‰Ω†Ë¶ÅÂú®‰Ω†ÁöÑ‰ª£Á†Å‰∏≠ÊîπÂèòÂÆÉÔºåÂàô‰Ω†ÈúÄË¶ÅÁ°ÆÂÆöÂÆÉÊòØÂê¶Â≠òÂú®ÔºåÂêåÊó∂Ë¶Å‰øùÂ≠ò‰∏éÊÅ¢Â§çÂÆÉÁöÑÂÄºÔºö

@example
@dots{}
if ("sorted_in" in PROCINFO) @{
    save_sorted = PROCINFO["sorted_in"]
    PROCINFO["sorted_in"] = "@@val_str_desc" # or whatever
@}
@dots{}
if (save_sorted)
    PROCINFO["sorted_in"] = save_sorted
@end example

@item
Â¶ÇÊó©ÂâçÊâÄÊèêÂà∞ÁöÑÔºåÈªòËÆ§ÁöÑÊï∞ÁªÑÈÅçÂéÜÁî± @code{"@@unsorted"} Ë°®Á§∫„ÄÇ
‰Ω†‰πüÂèØ‰ª•Áªô @code{PROCINFO["sorted_in"]} Ëµã‰∏Ä‰∏™Á©∫‰∏≤Êù•Ëé∑ÂæóËøôÊ†∑ÁöÑÈªòËÆ§Ë°å‰∏∫Ôºå
ÊàñËÄÖÂè™ÈúÄË¶ÅÁî® @code{delete} ËØ≠Âè•Â∞Ü @code{"sorted_in"} ‰ªé @code{PROCINFO} ‰∏≠Âà†Èô§„ÄÇ
Ôºà@code{delete} ËØ≠Âè•ËøòÊ≤°ÊúâËÆ®ËÆ∫Âà∞ÔºåËØ∑Êü•Áúã @ref{Delete}„ÄÇÔºâ
@end itemize

Âè¶Â§ñÔºå@command{gawk} Êèê‰æõ‰∫ÜÂÜÖÂª∫ÁöÑÁî®‰∫éÊï∞ÁªÑÊéíÂ∫èÁöÑÂáΩÊï∞ÔºåÊü•Áúã @ref{Array Sorting Functions}„ÄÇ

@node Numeric Array Subscripts
@section Áî®Êï∞ÂÄº‰Ωú‰∏∫Êï∞ÁªÑ‰∏ãÊ†á

@cindex numbers, as array subscripts
@cindex arrays, numeric subscripts
@cindex subscripts in arrays, numbers as
@cindex @code{CONVFMT} variable, and array subscripts
Ë¶ÅËÆ∞‰ΩèÊï∞ÁªÑÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁÇπÂ∞±ÊòØ@emph{Êï∞ÁªÑÁöÑ‰∏ãÊ†áÊÄªÊòØÂ≠ó‰∏≤}„ÄÇ
ÂΩìÊï∞ÂÄºÁî®‰∫é‰∏ãÊ†áÔºåÂÆÉ‰ºöÂú®Áî®‰∫é‰∏ãÊ†áÂâçË¢´ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÔºàÊü•Áúã @ref{Conversion}Ôºâ„ÄÇ
ËøôÊÑèÂë≥ÁùÄÔºåÈ¢ÑÂÆö‰πâÂèòÈáè @code{CONVFMT} ‰ºöÂΩ±Âìç‰Ω†ÁöÑÁ®ãÂ∫èËÆøÈóÆÊï∞ÁªÑÁöÑÂÖÉÁ¥†„ÄÇ‰æãÂ¶ÇÔºö

@example
xyz = 12.153
data[xyz] = 1
CONVFMT = "%2.2f"
if (xyz in data)
    printf "%s is in data\n", xyz
else
    printf "%s is not in data\n", xyz
@end example

@noindent
Á®ãÂ∫è‰ºöÊâìÂç∞ @samp{12.15 is not in data}„ÄÇ
Á¨¨‰∏ÄÊù°ËØ≠Âè•Áªô‰∫Ü @code{xyz} ‰∏Ä‰∏™Êï∞ÂÄºÂÄº„ÄÇ
@code{data[xyz]} Áî®Â≠ó‰∏≤ @code{"12.153"} ËµãÁªô @code{data} ÁöÑ‰∏ãÊ†á
Ôºà‰ΩøÁî®ÈªòËÆ§ÁöÑ @code{CONVFMT} ËΩ¨Êç¢ÂÄº @code{"%.6g"}Ôºâ„ÄÇ
Âõ†Ê≠§ÔºåÊï∞ÁªÑÂÖÉÁ¥† @code{data["12.153"]} Ë¢´ËµãÂÄº‰∏∫ 1„ÄÇÁ®ãÂ∫èÁÑ∂ÂêéÊîπÂèò @code{CONVFMT} ÁöÑÂÄº„ÄÇ
ÊµãËØïËØ≠Âè• @samp{(xyz in data)} ‰∫ßÁîü‰∏Ä‰∏™ @code{xyz} ÁöÑÊñ∞Â≠ó‰∏≤ÂÄº‚Äî‚ÄîËøôÊ¨°ÂàôÊòØ @code{"12.15"}
‚Äî‚ÄîÂõ†‰∏∫ @code{CONVFMT} ÁöÑÂÄºÂè™ÂÖÅËÆ∏Êúâ‰∏§‰∏™ÊúâÊïà‰Ωç„ÄÇËøô‰∏™ÊµãËØï‰ºöÂ§±Ë¥•ÔºåÂõ†‰∏∫ @code{"12.15"} ‰∏é @code{"12.153"} ÊòØ‰∏çÂêåÁöÑ„ÄÇ

@cindex converting integer array subscripts
@cindex integer array indices
Ê†πÊçÆËΩ¨Êç¢ËßÑÂàôÔºàÊü•Áúã @ref{Conversion}ÔºâÔºåÊï¥Êï∞ÊÄªÊòØ‰ºöËΩ¨Êç¢‰∏∫Êï¥Êï∞ÁöÑÂ≠ó‰∏≤Ôºå‰∏çÁÆ° @code{CONVFMT} ÁöÑÂÄºÊòØ‰ªÄ‰πà„ÄÇÂõ†Ê≠§‰∏ãÈù¢ÁöÑ‰æãÂ≠êÂèØ‰ª•Â∑•‰ΩúÔºö

@example
for (i = 1; i <= maxsub; i++)
    @ii{do something with} array[i]
@end example

‚ÄúÊï¥Êï∞ÊÄªÊòØËΩ¨Êç¢‰∏∫Êï¥Êï∞Â≠ó‰∏≤‚ÄùËßÑÂàôÂú®Êï∞ÁªÑÁ¥¢Âºï‰∏≠ÊúâÂè¶‰∏Ä‰∏™ÁªìÊûú„ÄÇÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂Â∏∏Èáè
@ifnotdocbook
ÔºàÊü•Áúã @ref{Nondecimal-numbers}Ôºâ
@end ifnotdocbook
@ifdocbook
ÔºàÊü•Áúã @ref{Nondecimal-numbers}Ôºâ
@end ifdocbook
Âú®ÂÜÖÈÉ®‰ºöËΩ¨Êç¢‰∏∫Êï∞ÂÄºÔºåÂÆÉ‰ª¨ÁöÑÂéüÂûãÂΩ¢Âºè‰ºöË¢´‰∏¢ÂºÉ„ÄÇËøôÂ∞±ÊòØËØ¥Ôºå@code{array[17]}Ôºå@code{array[021]} ‰∏é @code{array[0x11]} ÈÉΩÊòØÊåáÂêëÂêå‰∏Ä‰∏™ÂÖÉÁ¥†ÔºÅ

‰∏é @command{awk} ËÆ∏Â§öÁöÑ‰∫ãÊÉÖ‰∏ÄÊ†∑ÔºåÂ§ßÈÉ®‰ªΩÊó∂Èó¥‰∏ãÔºå‰∫ãÊÉÖÈÉΩ‰∏é‰Ω†ÊâÄÊúüÊúõÂÆÉÊâÄÂ∫îËØ•ÊòØÈÇ£Ê†∑ÁöÑÊñπÂºèÂ∑•‰Ωú„ÄÇ‰ΩÜÊòØÂØπ‰∫éÂÆûÈôÖËßÑÂàôÂÖ∑ÊúâÁ≤æÁ°ÆÁü•ËØÜÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑÔºåÂõ†‰∏∫ÂÆÉ‰ª¨ÊúâÊó∂‰ºöËÆ©‰Ω†ÁöÑÁ®ãÂ∫èË°®Áé∞Âá∫‰∏Ä‰∫õÂæàÂæÆÂ¶ôÁöÑÁªìÊûú„ÄÇ

@node Uninitialized Subscripts
@section Áî®Êú™ÂàùÂßãÂåñÁöÑÊï∞ÂÄº‰Ωú‰∏∫Êï∞ÁªÑ‰∏ãÊ†á

@cindex variables, uninitialized@comma{} as array subscripts
@cindex uninitialized variables, as array subscripts
@cindex subscripts in arrays, uninitialized variables as
@cindex arrays, subscripts, uninitialized variables as
ÂÅáÂ¶ÇÊúâÂøÖË¶ÅÂÜô‰∏Ä‰∏™Á®ãÂ∫èÊù•Â∞ÜËæìÂÖ•ÁöÑÊï∞ÊçÆÈÄÜÂ∫èÊâìÂç∞„ÄÇ‰∏Ä‰∏™ÂêàÁêÜÁöÑÂ∞ùËØïÊù•Ëøô‰πàÂÅöÔºàÂ∏¶‰∏ä‰∏Ä‰∫õÊµãËØïÊï∞ÊçÆÔºâÂèØËÉΩÂ¶Ç‰∏ãÔºö

@example
$ @kbd{echo 'line 1}
> @kbd{line 2}
> @kbd{line 3' | awk '@{ l[lines] = $0; ++lines @}}
> @kbd{END @{}
>     @kbd{for (i = lines - 1; i >= 0; i--)}
>        @kbd{print l[i]}
> @kbd{@}'}
@print{} line 3
@print{} line 2
@end example

‰∏çÂπ∏ÁöÑÊòØÔºåÁ¨¨‰∏ÄË°åÁöÑÊï∞ÊçÆ‰∏ç‰ºöÂá∫Áé∞Âú®ËæìÂá∫‰∏≠ÔºÅ

ÂàùÁúãËµ∑Êù•ÔºåÊàë‰ª¨ËÆ§‰∏∫Ëøô‰∏™Á®ãÂ∫èÂ∫îËØ•ÂèØ‰ª•Â∑•‰Ωú„ÄÇÂèòÈáè @code{lines} ÊòØÊú™ÂàùÂßãÂåñÁöÑÔºå
ËÄå‰∏Ä‰∏™Êú™ÂàùÂßãÂåñÁöÑÂèòÈáèÂÖ∑ÊúâÂÄº‰∏∫ 0„ÄÇÂõ†Ê≠§Ôºå@command{awk} Â∫îËØ•‰ºöÊâìÂç∞ @code{l[0]} ÁöÑÂÄº„ÄÇ

ËøôÈáåÁöÑÈóÆÈ¢òÊòØ @command{awk} Êï∞ÁªÑ‰∏≠ÁöÑ‰∏ãÊ†á@emph{ÊÄªÊòØ}Â≠óÁ¨¶‰∏≤„ÄÇ
Êú™ÂàùÂßãÂåñÁöÑÂèòÈáèË¢´Áî®‰ΩúÂ≠óÁ¨¶‰∏≤Êó∂ÔºåÂÖ∂ÂÄº‰∏∫ @code{""}ÔºåËÄå‰∏çÊòØ 0„ÄÇ
ÊâÄ‰ª•Ôºå@samp{line 1} ÊúÄÁªàË¢´Â≠òÂú® @code{l[""]} ‰∏≠„ÄÇ‰∏ãÈù¢ÁöÑÁâàÊú¨ÂàôÂèØ‰ª•Ê≠£Á°ÆÂ∑•‰ΩúÔºö

@example
@{ l[lines++] = $0 @}
END @{
    for (i = lines - 1; i >= 0; i--)
       print l[i]
@}
@end example

Âú®ËøôÈáåÔºå@samp{++} Âº∫Âà∂ @code{lines} Êàê‰∏∫‰∏ÄÊï∞ÂÄºÔºåÊâÄÂú®‰ΩøÂæóÂÖ∂‚ÄúÊóßÂÄº‚Äù
ÔºàÂõ†‰∏∫ÊòØÊú™ÂàùÂßãÂåñÁöÑÂèòÈáèÔºåÂõ†Ê≠§Â∞±Êó†ÊâÄË∞ìÊóßÂÄºÔºåËøôÈáåÊòØ‰∏∫Ë°®Ëø∞Êñπ‰æø„ÄÇ‚Äî‚ÄîËØëËÄÖÔºâ‰∏∫Êï∞ÂÄº 0„ÄÇÁÑ∂ÂêéÂÖ∂Ë¢´ËΩ¨Êç¢‰∏∫ @code{"0"} ‰Ωú‰∏∫Êï∞ÁªÑÁöÑ‰∏ãÊ†á„ÄÇ

@cindex null strings, as array subscripts
@cindex dark corner, array subscripts
@cindex lint checking, array subscripts
Â∞±ÁÆó‰∏çÊòØÁâπÂà´Â∏∏Áî®ÔºåÁ©∫‰∏≤Ôºà@code{""}Ôºâ‰πüÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÊï∞ÁªÑ‰∏ãÊ†á„ÄÇ
@value{DARKCORNER}
@command{gawk} ‰ºöÂØπ‰ΩøÁî®Á©∫‰∏≤‰Ωú‰∏∫‰∏ãÊ†áÂèëÂá∫Ë≠¶ÂëäÔºå‰ΩÜËøôÂè™Âú®ÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏≠ÊåáÂÆö‰∫Ü @option{--lint} ÂèÇÊï∞ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ

@node Delete
@section @code{delete} ËØ≠Âè•
@cindex @code{delete} statement
@cindex deleting elements in arrays
@cindex arrays, elements, deleting
@cindex elements in arrays, deleting

‰∏∫‰∫ÜÂà†Èô§Êï∞ÁªÑÁöÑ‰∏Ä‰∏™Áã¨Á´ãÂÖÉÁ¥†ÔºåÂèØ‰ª•‰ΩøÁî® @code{delete} ËØ≠Âè•Ôºö

@example
delete @var{array}[@var{index-expression}]
@end example

‰∏ÄÊó¶Êï∞ÁªÑ‰∏≠ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†Ë¢´Âà†Èô§ÔºåÈÇ£‰∏™ÂÖÉÁ¥†ÁöÑÂÄºÂ∞±‰∏çÂÜçÂèØÁî®„ÄÇ
Â∞±Â•ΩÂÉèÈÇ£‰∏™ÂÖÉÁ¥†‰ªéÊù•Ê≤°ÊúâË¢´‰ΩøÁî®Âà∞ÊàñËÄÖ‰πü‰ªéÊù•Ê≤°ÊúâË¢´ËµãÂÄº„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ªéÊï∞ÁªÑ‰∏≠Âà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†Ôºö

@example
for (i in frequencies)
    delete frequencies[i]
@end example

@noindent
Ëøô‰∏™‰æãÂ≠êÂà†Èô§Êï∞ÁªÑ @code{frequencies} ÁöÑÊâÄÊúâÂÖÉÁ¥†„ÄÇÂè™Ë¶Å‰∏Ä‰∏™ÂÖÉÁ¥†Ë¢´Âà†Èô§‰∫ÜÔºå
ÂêéÁª≠ÁöÑ @code{for} ËØ≠Âè•Êù•Êâ´ÊèèÊï∞ÁªÑÊó∂Â∞±‰∏ç‰ºöÂÜçÊä•ÂëäË¢´Âà†Èô§ÁöÑÂÖÉÁ¥†ÔºåÂπ∂‰∏îÁî® @code{in} Êìç‰ΩúÁ¨¶Êù•Ê£ÄÊü•Ë¢´Âà†Èô§ÁöÑÂÖÉÁ¥†ÁöÑÊòØÂê¶Â≠òÂú®‰ºöËøîÂõû 0ÔºàÂç≥ falseÔºâÔºö

@example
delete foo[4]
if (4 in foo)
    print "This will never be printed"
@end example

@cindex null strings, and deleting array elements
Ë¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†ÁªôÂÖÉÁ¥†Ëµã‰∏Ä‰∏™Á©∫ÂÄºÔºàÁ©∫‰∏≤Ôºå@code{""}ÔºâÊòØ@emph{‰∏§Á†Å‰∫ã}„ÄÇÂ¶ÇÔºö

@example
foo[4] = ""
if (4 in foo)
  print "This is printed, even though foo[4] is empty"
@end example

@cindex lint checking, array elements
Âà†Èô§‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÂÖÉÁ¥†Âπ∂‰∏çÊòØ‰∏Ä‰∏™ÈîôËØØ„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆö‰∫Ü @option{--lint} ÂèÇÊï∞ÔºàÊü•Áúã @ref{Options}ÔºâÔºå
ÂΩìÂà†Èô§Êï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®ÁöÑÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÔºå@command{gawk} ‰ºö‰∫ßÁîü‰∏Ä‰∏™ÂëäË≠¶‰ø°ÊÅØ„ÄÇ

@cindex common extensions, @code{delete} to delete entire arrays
@cindex extensions, common@comma{} @code{delete} to delete entire arrays
@cindex arrays, deleting entire contents
@cindex deleting entire arrays
@cindex @code{delete} @var{array}
@cindex differences in @command{awk} and @command{gawk}, array elements, deleting
ÈÄöËøáÂú® @code{delete} ËØ≠Âè•ÂêéÈù¢ÁöÑÊï∞ÁªÑ‰∏≠Ôºå‰∏çÂÜô‰∏ãÊ†áÊó∂ÔºåÂèØ‰ª•Áî®‰∏Ä‰∏™ËØ≠Âè•Â∞±ÂèØÂà†Èô§Êï∞ÁªÑÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÂ¶Ç‰∏ãÔºö


@example
delete @var{array}
@end example

‰ΩøÁî®ËøôÁßçÁâàÊú¨ÁöÑ @code{delete} ËØ≠Âè•Â§ßÊ¶ÇË¶ÅÊØî‰ΩøÁî®Á≠âÂêåÁöÑ‰∏ÄÊ¨°Âà†Èô§‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÂæ™ÁéØË¶ÅÂø´Â§ßÊ¶Ç 3 ÂÄç„ÄÇ

ËøôÁßçÁ±ªÂûãÁöÑ @code{delete} ËØ≠Âè•‰πüË¢´ BWK @command{awk} ‰∏é @command{mawk} ÊâÄÊîØÊåÅÔºåÂæàÂ§öÂÖ∂‰ªñÁâàÊú¨ÁöÑÂÆûÁé∞‰πüÊîØÊåÅ„ÄÇ

@cindex Brian Kernighan's @command{awk}
@quotation ÊèêÁ§∫
ÂæàÂ§öÂπ¥‰ª•Êù•Ôºå‰ΩøÁî® @code{delete} ËØ≠Âè•‰∏çÂ∏¶‰∏ãÊ†áÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊâ©Â±ï„ÄÇÂú® 2012 Âπ¥ÁöÑ 9 ÊúàÔºåÂÆÉË¢´Êé•ÂèóÂπ∂ÂåÖÂê´Âà∞ POSIX Ê†áÂáÜ‰∏≠„ÄÇ
Êü•Áúã @uref{http://austingroupbugs.net/view.php?id=544,
Austin Group ÁΩëÁ´ô}„ÄÇ
@end quotation

@cindex portability, deleting array elements
@cindex Brennan, Michael
‰∏ãÈù¢ÁöÑËØ≠Âè•Êèê‰æõ‰∫Ü‰∏ÄÁßçÂèØÁßªÊ§ç‰ΩÜÊòØ‰∏çÊòØÁâπÂà´ÊòéÊòæÁöÑÊñπÂºèÊù•Â∞ÜÊï∞ÁªÑÊ∏ÖÈô§Ôºö 
@footnote{ÊÑüË∞¢ Michael Brennan ÊèêÂá∫ËøôÁÇπ„ÄÇ}

@example
split("", array)
@end example

@cindex @code{split()} function, array elements@comma{} deleting
@code{split()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{String Functions}Ôºâ‰ºöÈ¶ñÂÖàÊ∏ÖÈô§ÁõÆÊ†áÊï∞ÁªÑ„ÄÇËøô‰∏™Ë∞ÉÁî®ËØ∑Ê±ÇÂàÜÂâ≤‰∏Ä‰∏™Á©∫‰∏≤„ÄÇÂõ†‰∏∫Ê≤°ÊúâÊï∞ÊçÆÁî®Êù•ÂàÜÂâ≤ÔºåÂáΩÊï∞Âè™ÊòØÁÆÄÂçïÂú∞Ê∏ÖÈô§Êï∞ÁªÑÁÑ∂ÂêéËøîÂõû„ÄÇ

@quotation CAUTION
Ê≥®ÊÑèÔºöÂà†Èô§Êï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†‰∏ç‰ºöÊîπÂèòÂÆÉÁöÑÁ±ªÂûãÔºå‰Ω†‰∏çÂèØÊ∏ÖÈô§‰∏Ä‰∏™Êï∞ÁªÑÔºåÁÑ∂Âêé‰ΩøÁî®Êï∞ÁªÑÁöÑÂêçÂ≠óÊù•‰Ωú‰∏∫‰∏Ä‰∏™Ê†áÈáèÂêçÔºàÊØîÂ¶Ç‰∏Ä‰∏™Â∏∏ËßÑÁöÑÂèòÈáèÔºâ„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏ç‰ºöÂ∑•‰ΩúÔºö

@example
a[1] = 3
delete a
a = 3
@end example
@end quotation

@node Multidimensional
@section Â§öÁª¥Êï∞ÁªÑ

@menu
* Multiscanning::               Scanning multidimensional arrays.
@end menu

@cindex subscripts in arrays, multidimensional
@cindex arrays, multidimensional
@dfn{Â§öÁª¥Êï∞ÁªÑ}ÊòØËøôÊ†∑ÁöÑÊï∞ÁªÑÔºåÂÖ∂ÂÖÉÁ¥†ÁöÑÊ†áËØÜÊòØÈÄöËøá‰∏ÄËøû‰∏≤ÁöÑÁ¥¢ÂºïËÄå‰∏çÊòØÂçï‰∏™Á¥¢ÂºïÊù•Ê†áËØÜÁöÑ„ÄÇ‰æãÂ¶ÇÔºå‰∏§Áª¥Êï∞ÁªÑÈúÄË¶Å‰∏§‰∏™Á¥¢Âºï„ÄÇ
‰∏ÄËà¨ÁöÑÊñπÂºèÔºàÂåÖÊã¨ @command{awk} Âú®ÂÜÖÁöÑËÆ∏Â§öËØ≠Ë®ÄÔºâË¶ÅÂèÇËÄÉÂà∞‰∏§Áª¥Êï∞ @code{grid} ‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÂàôÁî® @code{grid[@var{x},@var{y}]}„ÄÇ

@cindex @code{SUBSEP} variable, and multidimensional arrays
Âú® @command{awk} ‰∏≠ÁöÑÂ§öÁª¥Êï∞ÁªÑÊòØÈÄöËøáÂ∞ÜÁ¥¢ÂºïËøûÊé•ÊàêÂ≠ó‰∏≤Êù•ÂÆûÁé∞ÁöÑ„ÄÇ@command{awk} Â∞ÜÁ¥¢ÂºïËΩ¨Êç¢‰∏∫Â≠ó‰∏≤
ÔºàÊü•Áúã @ref{Conversion}ÔºâÁÑ∂ÂêéÂ∞ÜÂÆÉ‰ªñËøûÊé•Âú®‰∏ÄËµ∑ÔºåÂπ∂Âú®ÂÆÉ‰ª¨‰πãÈó¥Â≠òÊîæÂàÜÈöîÁ¨¶„ÄÇ
ËøôÊ†∑ÂèØ‰ª•ÂàõÂª∫‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂ≠ó‰∏≤Êù•ÊèèËø∞ÂàÜÁ¶ªÁ¥¢ÂºïÁöÑÂÄº„ÄÇÂêàÂπ∂ÂêéÁöÑÂ≠ó‰∏≤Áî®‰ΩúÊôÆÈÄöÁöÑ‰∏ÄÁª¥Êï∞ÁªÑÁöÑ‰∏Ä‰∏™Á¥¢Âºï„ÄÇÂàÜÈöîÁ¨¶Âàô‰ΩøÁî®ÂÜÖÂª∫ÂèòÈáè @code{SUBSEP} ÁöÑÂÄº„ÄÇ

‰æãÂ¶ÇÔºåÂÅáËÆæÊàë‰ª¨ÂØπË°®ËææÂºè @samp{foo[5,12] = "value"} Ê±ÇÂÄºÔºåÂπ∂‰∏î @code{SUBSEP} ÁöÑÂÄº‰∏∫ @code{"@@"} ÁöÑÊó∂ÂÄô„ÄÇ
Êï∞ÂÄº 5 ‰∏é 12 ‰ºöË¢´ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤Âπ∂‰∏îÁî® @samp{@@} ËøûÊé•ÂÆÉ‰ª¨Ôºå‰ªéËÄå‰∫ßÁîü @code{"5@@12"}Ôºõ
ÊâÄ‰ª•ÔºåÊï∞ÁªÑÂÖÉÁ¥† @code{foo["5@@12"]} ÁöÑÂÄºË¢´ËÆæÁΩÆÊàê @code{"value"}„ÄÇ

‰∏ÄÊó¶ÂÖÉÁ¥†Ë¢´Â≠òÂÇ®Ôºå@command{awk} Â∞±‰∏çÂÜçËÆ∞ÂæóÂÆÉÊòØÂ≠òÊàêÂçï‰∏™ÁöÑÁ¥¢ÂºïËøòÊòØÁî®‰∏Ä‰∏≤Á¥¢Âºï„ÄÇ
@samp{foo[5,12]} ‰∏é @w{@samp{foo[5 SUBSEP 12]}} ÊÄªÊòØÁ≠âÂêåÁöÑ„ÄÇ

@code{SUBSEP} ÁöÑÈªòËÆ§ÂÄºÊòØ @code{"\034"}ÔºåËøôÂåÖÂê´‰∫ÜÈùûÊâìÂç∞Â≠óÁ¨¶ÔºåÂπ∂‰∏ç‰ºöÂá∫Áé∞Âú® @command{awk} Á®ãÂ∫è‰∏≠Ôºå
ÊàñËÄÖ‰∏ç‰ºöÂá∫Áé∞Âú®ËæìÂÖ•Êï∞ÊçÆ‰∏≠„ÄÇ‰ΩøÁî®‰∏Ä‰∏™‰∏çÂ§™ÂèØËÉΩÁöÑÂ≠óÁ¨¶ÁöÑÁî®Â§ÑÊù•Ëá™‰∫éËøôÊ†∑ÁöÑ‰∫ãÂÆûÔºå
Âç≥Á¥¢ÂºïÂÄº‰∏≠ÂåÖÂê´‰∏Ä‰∏™‰∏≤ÂåπÈÖç @code{SUBSEP} ÂèØ‰ª•ÂØºËá¥ÂêàÂπ∂ÂêéÁöÑÂ≠ó‰∏≤ÁöÑÂê´‰πâ‰∏çÊòé„ÄÇ
Â¶Ç @code{SUBSEP} ÊòØ @code{"@@"}ÔºåÂàô @w{@samp{foo["a@@b", "c"]}} ‰∏é @w{@samp{foo["a",
"b@@c"]}} ÂàôÊ≤°ÂäûÊ≥ïÂå∫ÂàÜÂºÄÊù•ÔºåÂõ†‰∏∫‰∏§ËÄÖÈÉΩ‰ºöÂ≠òÊàê @samp{foo["a@@b@@c"]} „ÄÇ

@cindex @code{in} operator, index existence in multidimensional arrays
Ë¶ÅÊµãËØï‰∏Ä‰∏™ÁâπÂÆöÁöÑÁ¥¢ÂºïÂ∫èÂàóÊòØÂê¶Â≠òÂú®‰∫éÂ§öÁª¥Êï∞ÁªÑ‰∏≠Ôºå‰ΩøÁî®‰∏é‰∏ÄÁª¥Êï∞ÁªÑÁõ∏ÂêåÁöÑ @code{in} Êìç‰ΩúÁ¨¶„ÄÇ
Â∞ÜÊï¥‰∏™Â∫èÂàóÂÜôÂú®Ê∞îÊã¨Âè∑‰∏≠ÔºåÂπ∂Áî®ÈÄóÂè∑ÂàÜÈöîÔºåÂπ∂ÂÅö‰∏∫ @code{in} ÁöÑÂ∑¶Êìç‰ΩúÊï∞Ôºö

@example
if ((@var{subscript1}, @var{subscript2}, @dots{}) in @var{array})
    @dots{}
@end example

‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Â∞ÜËæìÂÖ•‰Ωú‰∏∫‰∏Ä‰∏™ÂüüÁöÑ‰∫åÁª¥Êï∞ÁªÑÁöÑ‰æãÂ≠êÔºåÁÑ∂ÂêéÂ∞ÜÊï∞ÁªÑÈ°∫Êó∂ÈíàËΩ¨ 90 Â∫¶ÔºàÊ≥®‰∏ãÔºâÔºåÂÜçÊâìÂç∞ÁªìÊûú„ÄÇÂÅáËÆæÊâÄÊúâÁöÑË°åÈÉΩÁõ∏Áõ∏ÂêåÊï∞ÁõÆÁöÑÂÖÉÁ¥†Ôºö

@example
@{
     if (max_nf < NF)
          max_nf = NF
     max_nr = NR
     for (x = 1; x <= NF; x++)
          vector[x, NR] = $x
@}

END @{
     for (x = 1; x <= max_nf; x++) @{
          for (y = max_nr; y >= 1; --y)
               printf("%s ", vector[x, y])
          printf("\n")
     @}
@}
@end example

@noindent
Â¶ÇÊûúËæìÂÖ•Â¶Ç‰∏ãÔºö

@example
1 2 3 4 5 6
2 3 4 5 6 1
3 4 5 6 1 2
4 5 6 1 2 3
@end example

@noindent
ÂàôÁ®ãÂ∫è‰ºö‰∫ßÁîü‰∏ãÈù¢ÁöÑËæìÂá∫Ôºö

@example
4 3 2 1
5 4 3 2
6 5 4 3
1 6 5 4
2 1 6 5
3 2 1 6
@end example

@node Multiscanning
@subsection ÈÅçÂéÜÂ§öÁª¥Êï∞ÁªÑ

Ê≤°ÊúâÁâπÊÆäÁöÑ @code{for} ËØ≠Âè•Áî®Êù•ËøõË°å‚ÄúÂ§öÁª¥‚ÄùÊï∞ÁªÑÁöÑÈÅçÂéÜ„ÄÇ‰πü‰∏ç‰ºöÊúâËøô‰πà‰∏Ä‰∏™ÔºåÂõ†‰∏∫‰∫ãÂÆû‰∏äÔºå@command{awk} Ê†πÊú¨Â∞±Ê≤°Êúâ‰∫åÁª¥Êï∞ÁªÑÊàñËÄÖÂÖÉÁ¥†„ÄÇ
Âè™Êúâ‰∏Ä‰∏™Â§öÁª¥@emph{ÊñπÂºè}Êù•ËÆøÈóÆÊï∞ÁªÑ„ÄÇ

@cindex subscripts in arrays, multidimensional, scanning
@cindex arrays, multidimensional, scanning
@cindex scanning multidimensional arrays
‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†ÁöÑÁ®ãÂ∫èÊúâËøôÊ†∑ÁöÑÊï∞ÁªÑÊÄªÊòØÂÉèÂ§öÁª¥Êï∞ÁªÑ‰∏ÄÊ†∑Êù•ËÆøÈóÆÔºå‰Ω†ÂèØ‰ª•Áî® @code{split()} ÂáΩÊï∞
ÔºàÊü•Áúã @ref{String Functions}ÔºâÊù•Ëé∑Âæó @code{for} ËØ≠Âè•‰∏ÄÊ†∑ÁöÑÊâ´ÊèèÊïàÊûúÔºàÊü•Áúã @ref{Scanning an Array}Ôºâ„ÄÇ
ÂÆÉÊòØ‰ª•‰∏ãÈù¢ÁöÑÊñπÂºèÊù•Â∑•‰ΩúÁöÑÔºö

@example
for (combined in array) @{
    split(combined, separate, SUBSEP)
    @dots{}
@}
@end example

@noindent
ËøôÈáåÂ∞ÜÂèòÈáè @code{combined} ‰∏∫Êï∞ÁªÑ‰∏≠ÊØè‰∏™Á¥¢ÂºïÁöÑËøûÊé•ÁªÑÂêàÔºåÁÑ∂ÂêéÁî® @code{SUBSEP} ÁöÑÂÄºÔºå
Â∞ÜÂÆÉÂàÜÂâ≤‰∏∫Áã¨Á´ãÁöÑÁ¥¢Âºï„ÄÇÂçïÁã¨ÁöÑÁ¥¢ÂºïÁÑ∂ÂêéÂ∞±ÂèØ‰ª•Êàê‰∏∫Êï∞ÁªÑ @code{separate} ÁöÑÂÖÉÁ¥†„ÄÇ

Âõ†Ê≠§ÔºåÂ¶ÇÊûúÂâçÈù¢ÁöÑÂÄºÂ≠òÂú® @code{array[1, "foo"]} ÈáåÔºåÂàô‰ºöÊúâÁ¥¢Âºï‰∏∫ @code{"1\034foo"} ÁöÑÂÖÉÁ¥†Â≠òÂú®Êï∞ÁªÑ‰∏≠„ÄÇ
ÔºàÂõûÂøÜ‰∏Ä‰∏ã @code{SUBSEP} ÁöÑÈªòËÆ§ÂÄºÊòØ ‚Äú\034‚Äù„ÄÇÔºâ
Êó©Êó©ÊôöÊôöÔºå@code{for} ËØ≠Âè•‰ºöÊâæÂà∞Á¥¢ÂºïÔºåÂπ∂Â∞ÜÂèòÈáè @code{combined} ËÆæÁΩÆÊàê @code{"1\034foo"} Êù•ËøõË°åËø≠‰ª£„ÄÇ
ÁÑ∂Âêé @code{split()} ÂáΩÊï∞‰ºöÂÉè‰∏ãÈù¢ËøôÊ†∑Êù•Ë∞ÉÁî®Ôºö

@example
split("1\034foo", separate, "\034")
@end example

@noindent
ÁªìÊûú‰ºöÂ∞Ü @code{separate[1]} ËÆæÁΩÆÊàê @code{"1"}Ôºå@code{separate[2]} ‰∏∫ @code{"foo"}„ÄÇ
Â§™Á•ûÂ•á‰∫ÜÔºåÂéüÊù•ÁöÑÂàÜÁ¶ªÁöÑÁ¥¢ÂºïÂ∫èÂàóÂèàË¢´ÊÅ¢Â§ç‰∫Ü„ÄÇ


@node Arrays of Arrays
@section Â§öÁª¥Êï∞ÁªÑ
@cindex arrays of arrays

@command{gawk} Ë∂ÖË∂ä‰∫ÜÊ†áÂáÜÁöÑ @command{awk} ÁöÑÂ§öÁª¥Êï∞ÁªÑÁöÑËÆøÈóÆÔºåÂπ∂Êèê‰æõ‰∫ÜÁúüÊ≠£ÁöÑÂ§öÁª¥Êï∞ÁªÑ„ÄÇÂ≠êÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÈÄöËøáÂÆÉ‰ª¨Âú®ÊñπÊã¨Âè∑‰∏≠ÁöÑ‰∏ãÊ†áÊù•ÂèñÂæóÔºåÂ∞±ÊòØ‰∏ªÊï∞ÁªÑÂÖÉÁ¥†‰∏ÄÊ†∑„ÄÇ
‰æãÂ¶ÇÔºå‰∏ãÈù¢ÂàõÂª∫‰∏Ä‰∏™‰∏§ÂÖÉÁ¥†ÁöÑÂ≠êÊï∞ÁªÑÔºåÁ¥¢Âºï‰∏∫‰∏ªÊï∞ÁªÑ @code{a} ÁöÑ @code{1}Ôºö

@example
a[1][1] = 1
a[1][2] = 2
@end example

ËøôÈáåÊ®°Êãü‰∫Ü‰∏Ä‰∏™ÁúüÊ≠£ÁöÑ‰∏§Áª¥Êï∞ÁªÑ„ÄÇÊØè‰∏Ä‰∏™Â≠êÊï∞ÁªÑÂÖÉÁ¥†ÂåÖÂê´Âè¶‰∏Ä‰∏™Â≠êÊï∞ÁªÑ‰Ωú‰∏∫ÂÄºÔºåËøõËÄå‰πüÂèØ‰ª•ÂåÖÂê´ÂÖ∂‰ªñÁöÑÊï∞ÁªÑ„ÄÇÈÄöËøáËøôÊ†∑ÁöÑÊñπÂºèÔºå‰Ω†ÂèØ‰ª•ÂàõÂª∫‰∏âÁª¥ÊàñËÄÖÂ§öÁª¥ÁöÑÊï∞ÁªÑ„ÄÇ
Á¥¢ÂºïÂèØ‰ª•ÊòØ @command{awk} ÊâÄ‰ªªÊÑèË°®ËææÂºèÔºåÂåÖÊã¨Áî®ÈÄóÂè∑ÂàÜÈöîÁöÑÊ†áÈáèÔºà‰æãÂ¶ÇÂ∏∏ËßÑÁöÑ @command{awk} Ê®°ÊãüÂ§öÁª¥ÁöÑ‰∏ãÊ†áÔºâ„ÄÇÂõ†Ê≠§Ôºå‰∏ãÈù¢‰ª£Á†ÅÂú® @command{gawk} ‰∏≠ÊòØÊúâÊïàÁöÑÔºö

@example
a[1][3][1, "name"] = "barney"
@end example

ÊØè‰∏Ä‰∏™Â≠êÊï∞ÁªÑ‰∏é‰∏ªÊï∞ÁªÑÂèØ‰ª•Êúâ‰∏çÂêåÁöÑÈïøÂ∫¶„ÄÇÂÆûÈôÖ‰∏äÔºåÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÔºåÊàñËÄÖÂÆÉÁöÑÂ≠êÊï∞ÁªÑ‰∏çÂøÖË¶ÅÈÉΩÂåÖÂê´Áõ∏ÂêåÁ±ªÂûã„ÄÇ
ËøôÊÑèÂë≥ÁùÄÔºå‰∏ªÊï∞ÁªÑ‰∏éÂÆÉÁöÑÂ≠êÊï∞ÁªÑÂú®ÁªìÊûÑ‰∏äÔºåÂèØ‰ª•ÊòØÈùûÁü©ÂΩ¢ÁöÑÔºåÂç≥ÊòØÈîØÈΩøÂΩ¢ÁöÑ„ÄÇ
‰Ω†ÂèØ‰ª•Áªô‰∏ªÊï∞ÁªÑ @code{a} Á¥¢Âºï‰∏∫ @code{4} ÁöÑÂÖÉÁ¥†ËµãÂÄº‰∏Ä‰∏™Ê†áÈáèÔºåÂ∞±ÁÆóÊòØ @code{a[1]} Êú¨Ë∫´ÊòØ‰∏Ä‰∏™Êï∞ÁªÑËÄå‰∏çÊòØ‰∏Ä‰∏™Ê†áÈáèÔºö

@example
a[4] = "An element in a jagged array"
@end example

@dfn{Áª¥Â∫¶}Ôºå@dfn{Ë°å}Ôºå@dfn{Âàó}ËøôÊ†∑ÁöÑÊúØËØ≠Áî®Âú®ËøôÊ†∑ÁöÑÊï∞ÁªÑ‰∏≠ÊòØÊ≤°ÊúâÂê´‰πâÁöÑÔºå‰ΩÜÊòØÊàë‰ª¨‰ΩøÁî®‚ÄúÁª¥Â∫¶‚ÄùË°®Á§∫Ë¶ÅËÆøÈóÆ‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÂÖÉÁ¥†ÁöÑÊâÄÈúÄË¶ÅÁöÑÁ¥¢ÂºïÊï∞ÁöÑÊúÄÂ§ßÂÄº„ÄÇ
‰ªªÊÑèÂÖÉÁ¥†ÁöÑÁ±ªÂûãÔºå‰∏ÄÊó¶Ë¢´ËµãÂÄºÔºåÂ∞±‰∏çËÉΩÈÄöËøáËµãÂÄº‰∏Ä‰∏™‰∏çÂêåÁ±ªÂûãÁöÑÂÄºÊù•ÊîπÂèòÂÆÉÁöÑÁ±ªÂûã„ÄÇ‰Ω†ÂøÖÈ°ªÂÖàÂà†Èô§ÂΩìÂâçÁöÑÂÖÉÁ¥†ÔºåËøôÊ†∑‰Ωø @command{gawk} ÂèØ‰ª•ÊúâÊïàÂú∞‰∏¢ÂºÉÂú®ÈÇ£‰∏™Á¥¢Âºï‰∏ãÁöÑÂÖÉÁ¥†Ôºö

@example
delete a[4]
a[4][5][6][7] = "An element in a four-dimensional array"
@end example

@noindent
ËøôÈáåÂà†Èô§Á¥¢Âºï‰∏∫ @code{4} ÁöÑÊ†áÈáèÂÄºÔºåÁÑ∂ÂêéÊèíÂÖ•‰∏Ä‰∏™ÂåÖÂê´‰∏Ä‰∏™Ê†áÈáèÁöÑ‰∏âÂ±ÇÁöÑÂÜÖÂµåÂ≠êÊï∞ÁªÑ„ÄÇ‰Ω†‰πüÂèØ‰ª•Âà†Èô§Êï¥‰∏™ÁöÑÂ≠êÊï∞ÁªÑÁöÑÂ≠êÊï∞ÁªÑÁöÑ‰∫ÜÊï∞ÁªÑÔºö

@example
delete a[4][5]
a[4][5] = "An element in subarray a[4]"
@end example

‰ΩÜÊòØË¶ÅËÆ∞‰ΩèÔºå‰Ω†‰∏çÂèØ‰ª•Âà†Èô§‰∏ªÊï∞ÁªÑ @code{a}ÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂Áî®‰Ωú‰∏Ä‰∏™Ê†áÈáè„ÄÇ

ÂÜÖÁΩÆÂáΩÊï∞‰∏≠‰ΩøÁî®Êï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞Êó∂ÔºåÂáΩÊï∞‰πüÂèØ‰ª•‰ΩøÁî®Â≠êÊï∞ÁªÑ„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊÆµ‰ΩøÁî® @code{length()}
ÔºàÊü•Áúã @ref{String Functions}ÔºâÊù•Á°ÆÂÆö‰∏ªÊï∞ÁªÑ @code{a} ‰∏éÂÖ∂Â≠êÊï∞ÁªÑÁöÑÂÖÉÁ¥†‰∏™Êï∞Ôºö

@example
print length(a), length(a[1]), length(a[1][3])
@end example

@noindent
ÂØπ‰∏ªÊï∞ÁªÑ @code{a} ÁöÑËæìÂá∫ÁªìÊûúÂ¶Ç‰∏ãÔºö

@example
2, 3, 1
@end example

@noindent
@samp{@var{subscript} in @var{array}} Ë°®ËææÂºèÔºàÊü•Áúã @ref{Reference to Elements}Ôºâ
Â∑•‰ΩúÂéüÁêÜ‰∏éÊ≠£ËßÑÁöÑ @command{awk} Êï∞ÁªÑ‰ª•ÂèäÂ§öÁª¥Êï∞ÁªÑÁöÑÊñπÂºèÁõ∏‰ºº„ÄÇ
‰æãÂ¶ÇÊµãËØïËØ≠Âè• @samp{1 in a}Ôºå@samp{3 in a[1]} ‰∏é @samp{(1, "name") in a[1][3]} ÂØπ‰∫éÊï∞ÁªÑ @code{a} ÈÉΩ‰ºöÊ±ÇÂÄº‰∏∫ 1ÔºàtrueÔºâ„ÄÇ

@samp{for (item in array)} ËØ≠Âè•ÔºàÊü•Áúã @ref{Scanning an Array}ÔºâÂèØ‰ª•ÂµåÂ•óÔºåÁî®Êù•Êâ´Êèè‰∏Ä‰∏™Â§öÁª¥Êï∞ÁªÑÁöÑÊâÄÊúâÂÖÉÁ¥†Ôºå
Âè™Ë¶ÅÂÆÉÂú®ÁªìÊûÑ‰∏äÊòØÁü©ÂΩ¢ÁöÑ„ÄÇ‰∏∫‰∫ÜÊâìÂç∞‰∏§Áª¥Â§öÁª¥Êï∞ÁªÑÁöÑÂÜÖÂÆπÔºàÊ†áÈáèÔºâÔºàÂú®Êï∞ÁªÑ‰∏≠ÔºåÂÆÉÁöÑÁ¨¨‰∏ÄÂ±ÇÊú¨Ë∫´ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºå‰ΩÜ‰∏çÂøÖÊòØÊúâÁõ∏ÂêåÁöÑÈïøÂ∫¶ÔºâÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
for (i in array)
    for (j in array[i])
        print array[i][j]
@end example

@code{isarray()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{Type Functions}Ôºâ
ÂèØ‰ª•ËÆ©‰Ω†ÊµãËØïÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÊòØÂê¶‰∏∫Êï∞ÁªÑÔºö

@example
for (i in array) @{
    if (isarray(array[i]) @{
        for (j in array[i]) @{
            print array[i][j]
        @}
    @}
    else
        print array[i]
@}
@end example

Â¶ÇÊûú‰∏Ä‰∏™‰∫ãÂÖàÁü•ÈÅìÊòØ‰∏Ä‰∏™ÈîØÈΩøÂΩ¢ÁöÑÊï∞ÁªÑÔºå‰Ω†ÈÄöÂ∏∏Ë¶ÅÈÄöËøáÊéßÂà∂ËØ≠Âè•Êù•Ëß£ÂÜ≥ÈÅçÂéÜÈóÆÈ¢ò„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊâìÂç∞‰∏ªÊï∞ÁªÑ @code{a} ÁöÑÂÖÉÁ¥†Ôºö

@example
for (i in a) @{
    for (j in a[i]) @{
        if (j == 3) @{
            for (k in a[i][j])
                print a[i][j][k]
        @} else
            print a[i][j]
    @}
@}
@end example

@noindent
Êü•Áúã @ref{Walking Arrays}ÔºåÊù•Ëé∑ÂèñÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºåÂÖ∂ÂäüËÉΩÂ∞±ÊòØÁî®Êù•ÈÅçÂéÜ‰ªªÊÑèÁª¥Â∫¶ÁöÑÂ§öÁª¥Êï∞ÁªÑ„ÄÇ

ÂõûÂøÜ‰∏Ä‰∏ãÂèÇËÄÉ‰∏Ä‰∏™Êú™ÂàùÂßãÂåñÁöÑÊï∞ÁªÑÂÖÉÁ¥†‰ºö‰∫ßÁîü‰∏Ä‰∏™ @code{""} ÂÄºÔºåÂç≥Á©∫‰∏≤„ÄÇ
ËøôÊúâ‰∏Ä‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÂê´‰πâÔºåÂç≥ÂΩì‰Ω†ÊÉ≥‰ΩøÁî®‰∏Ä‰∏™Â≠êÊï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞ÂêëÂáΩÊï∞‰º†ÈÄíÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÊâÄÂëàÁé∞ÁöÑÔºö

@example
$ @kbd{gawk 'BEGIN @{ split("a b c d", b[1]); print b[1][1] @}'}
@error{} gawk: cmd. line:1: fatal: split: second argument is not an array
@end example

Ë¶ÅËß£ÂÜ≥ËøôÊ†∑ÁöÑÈóÆÈ¢òÔºåÈ¶ñÂÖàË¶ÅÈÄöËøáÂàõÂª∫‰∏Ä‰∏™‰ªªÊÑèÁöÑÁ¥¢ÂºïÔºå‰ª•Âº∫Âà∂ @code{b[1]} ÊàêÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºö

@example
$ @kbd{gawk 'BEGIN @{ b[1][1] = ""; split("a b c d", b[1]); print b[1][1] @}'}
@print{} a
@end example

@node Arrays Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Ê†áÂáÜÁöÑ @command{awk} Êèê‰æõ‰∏ÄÁª¥ÂÖ≥ËÅîÊï∞ÁªÑÔºàÈÄöËøáÂ≠ó‰∏≤ËøõË°åÁ¥¢ÂºïÁöÑÊï∞ÁªÑÔºâ„ÄÇÊâÄÊúâÁöÑÊï∞ÁªÑÈÉΩÊòØÂÖ≥ËÅîÁöÑÔºåÊï∞ÂÄºÁ¥¢Âºï‰ºöË¢´Ëá™Âä®ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤„ÄÇ

@item
Êï∞ÁªÑÂÖÉÁ¥†ÈÄöËøá @code{@var{array}[@var{indx}]} ËøõË°åÂèÇËÄÉ„ÄÇÂèÇËÄÉ‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÂÖÉÁ¥†ÔºåÂàô‰ºöÂàõÂª∫Ëøô‰∏™ÂÖÉÁ¥†„ÄÇ

@item
Ê≠£Á°ÆÁöÑÊü•ÁúãÊòØÂê¶ÁªôÂÆöÁ¥¢ÂºïÁöÑÂÖÉÁ¥†ÊòØÂê¶Â≠òÂú®Êï∞ÁªÑ‰∏≠ÁöÑÊñπÂºèÊòØ‰ΩøÁî® @code{in} Êìç‰ΩúÁ¨¶Ôºö@samp{@var{indx} in @var{array}}

@item
‰ΩøÁî® @samp{for (@var{indx} in @var{array}) @dots{}} Êù•ÊèèËø∞Êï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†„ÄÇ
Âú®ÁéØÂ¢É‰Ωì‰∏≠Ôºå@var{indx} ‰ºöËΩÆÊµÅÂú∞ËÆæÁΩÆ‰∏∫ÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÂÄº„ÄÇ

@item
Áî® @samp{for (@var{indx} in @var{array})} Êù•ÈÅçÂéÜÊï∞ÁªÑÁöÑÈ°∫Â∫èÂú® POSIX @command{awk} ‰∏≠ÊòØÊú™ÂÆö‰πâÁöÑÔºåÂπ∂‰∏î‰∏çÂêåÁöÑÁâàÊú¨ÂÆûÁé∞ÊòØ‰∏çÂêåÁöÑ„ÄÇ
@command{gawk} ‰ΩøÁî®ÈÄöËøáËÆæÁΩÆÈ¢ÑÂÆö‰πâÂèòÈáè @code{PROCINFO["sorted_in"]} ÁöÑÂÄºÊù•ÊéßÂà∂ÈÅçÂéÜÁöÑÈ°∫Â∫è„ÄÇ

@item
‰ΩøÁî® @samp{delete @var{array}[@var{indx}]} Êù•Âà†Èô§Âçï‰∏™ÂÖÉÁ¥†„ÄÇË¶ÅÂà†Èô§Êï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†Ôºå
Âàô‰ΩøÁî® @samp{delete @var{array}} „ÄÇÂêéËÄÖÁöÑÁâπÊÄßÂ§öÂπ¥Êù•ÈÉΩÊòØ‰∏Ä‰∏™ÈÄöÁî®Êâ©Â±ïÔºå‰ΩÜÊòØÁé∞Âú®Â∑≤ÁªèÊ†áÂáÜÂåñ‰∫ÜÔºå
‰ΩÜÊòØÂèØËÉΩ‰∏çÊòØÊâÄÊúâÁöÑË¢´ÂïÜ‰∏öÁâàÊú¨ÁöÑ @command{awk} ÈÉΩÊîØÊåÅ„ÄÇ

@item
Ê†áÂáÜÁöÑ @command{awk} ÈÄöËøáÁî®ÈÄóÂè∑Êù•ÂàÜÈöî‰∏çÂêåÁöÑ‰∏ãÊ†áÊù•Ê®°ÊãüÂ§öÁª¥Êï∞ÁªÑ„ÄÇËøô‰∫õ‰∏ãÊ†áÂÄº‰ºöË¢´ÂêàÂπ∂Êàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑ‰∏≤Ôºå
Âπ∂‰∏î‰ΩøÁî® @code{SUBSEP} ÁöÑÂÄºÊù•ËøõË°åÂàÜÁ¶ª„ÄÇÈÄöËøáËøôÁßçÊñπÂºèÂàõÂª∫ÁöÑ‰∏ãÊ†áÊòØÊ≤°Êúâ‰øùÂ≠òÁöÑÔºåÊâÄ‰ª•ÊîπÂèò @code{SUBSEP} ÁöÑÂÄº‰ºöÂØºËá¥Êú™È¢ÑÊúüÁöÑÁªìÊûú„ÄÇ
‰Ω†ÂèØ‰ª•‰ΩøÁî® @samp{(@var{sub1}, @var{sub2}, @dots{}) in @var{array}} Êù•Êü•Áúã‰∏Ä‰∏™Â§öÁª¥Êï∞ÁªÑÁöÑÁõ∏Â∫î‰∏ãÊ†áÊòØÂê¶Â≠òÂú®Êï∞ÁªÑ‰∏≠„ÄÇ

@item
@command{gawk} Êèê‰æõ‰∫ÜÁúüÊ≠£ÁöÑÂ§öÁª¥Êï∞ÁªÑ„ÄÇÂú®ËøôÊ†∑ÁöÑÊï∞ÁªÑ‰∏≠Ôºå‰Ω†ÂèØ‰ª•Âú®ÊñπÊã¨Âè∑‰∏≠‰ΩøÁî®Áã¨Á´ãÁöÑÈõÜÂêàÊù•Ë°®Á§∫ÊØè‰∏ÄÁª¥„ÄÇ‰æãÂ¶Ç @code{data[row][col]}„ÄÇ
Êï∞ÁªÑÂÖÉÁ¥†Âç≥ÂèØ‰ª•ÊòØÊ†áÈáèÔºàÊï∞ÂÄºÊàñËÄÖÂ≠ó‰∏≤ÔºâÔºå‰πüÂèØ‰ª•ÊòØÂÖ∂‰ªñÁöÑÊï∞ÁªÑÁ±ªÂûã„ÄÇ

@item
‰ΩøÁî® @code{isarray()} ÂÜÖÁΩÆÂáΩÊï∞Êù•Á°ÆÂÆö‰∏Ä‰∏™Êï∞ÁªÑÂÖÉÁ¥†ÊòØ‰∏çÊòØÂ≠êÊï∞ÁªÑ„ÄÇ

@end itemize


@node Functions
@chapter ÂáΩÊï∞

@cindex functions, built-in
@cindex built-in functions
Êú¨@value{CHAPTER}ÊèèËø∞ @command{awk} ÁöÑÂÜÖÁΩÆÂáΩÊï∞ÔºåÂÆÉ‰ª¨Ë¢´ÂàÜÊàê‰∏âÁ±ªÔºöÊï∞ÂÄºÁ±ªÔºåÂ≠ó‰∏≤Á±ª‰∏é I/O Á±ª„ÄÇ
@command{gawk} ËøòÊèê‰æõÈ¢ùÂ§ñÁöÑ‰∏Ä‰∫õÂáΩÊï∞Áî®Êù•Ë°®Á§∫Êó∂Èó¥ÁöÑÂÄº„ÄÅÊàñËÄÖËøõË°å‰ΩçÊìç‰ΩúÔºåÊï∞ÁªÑÊéíÂ∫èÔºåÊèê‰æõÁ±ªÂûã‰ø°ÊÅØÔºåÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞ÂåñÁ®ãÂ∫è„ÄÇ

Èô§‰∫ÜÂÜÖÁΩÆÂáΩÊï∞Ôºå@command{awk} ‰πüÊèê‰æõÂÜôÊñ∞ÂáΩÊï∞ÁöÑËÉΩÂäõÔºåËøôÊ†∑ÂèØ‰ª•Âú®Á®ãÂ∫èÁöÑÂêéÈù¢ËøõË°åË∞ÉÁî®„ÄÇ
Êú¨@value{CHAPTER}ÁöÑ‰∏ãÂçäÈÉ®‰ªΩÊèèËø∞‰∫Ü@dfn{Áî®Êà∑Ëá™ÂÆö‰πâ}ÂáΩÊï∞„ÄÇ
ÊúÄÂêéÔºåÊàë‰ª¨Êé¢ËÆ®Èó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®Ôºå‰∏ÄÁßç @command{gawk} ÊâçÊúâÁöÑÊâ©Â±ïÔºåËøôÊ†∑ÂèØ‰ª•ËÆ©‰Ω†Âú®ËøêË°åÊó∂Êù•Á°ÆÂÆöÊúÄÁªàÊù•Ë∞ÉÁî®‰ªÄ‰πàÊ†∑ÁöÑÂáΩÊï∞„ÄÇ

@menu
* Built-in::                    Summarizes the built-in functions.
* User-defined::                Describes User-defined functions in detail.
* Indirect Calls::              Choosing the function to call at runtime.
* Functions Summary::           Summary of functions.
@end menu

@node Built-in
@section ÂÜÖÁΩÆÂáΩÊï∞

@dfn{ÂÜÖÁΩÆ}ÂáΩÊï∞Âú®‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÊÄªÊòØÂèØÁî®ÁöÑ„ÄÇÊú¨@value{SECTION}ÂÆö‰πâ‰∫ÜÊâÄÊúâÁöÑ @command{awk} ‰∏≠ÁöÑÂáΩÊï∞ÔºåÂÆÉ‰ª¨‰∏≠ÁöÑ‰∏Ä‰∫õÂú®ÂÖ∂‰ªñÁöÑ@value{SECTION}‰∏≠Â∑≤ÁªèË¢´ÊèêÂà∞ËøáÔºåÂú®ËøôÈáåËøõË°åÊ±áÊÄªÔºå‰Ω†ÂèØ‰ª•Êñπ‰æøÂú∞ÂèÇËÄÉ„ÄÇ

@menu
* Calling Built-in::            How to call built-in functions.
* Numeric Functions::           Functions that work with numbers, including
                                @code{int()}, @code{sin()} and @code{rand()}.
* String Functions::            Functions for string manipulation, such as
                                @code{split()}, @code{match()} and
                                @code{sprintf()}.
* I/O Functions::               Functions for files and shell commands.
* Time Functions::              Functions for dealing with timestamps.
* Bitwise Functions::           Functions for bitwise operations.
* Type Functions::              Functions for type information.
* I18N Functions::              Functions for string translation.
@end menu

@node Calling Built-in
@subsection Ë∞ÉÁî®ÂÜÖÁΩÆÂáΩÊï∞

‰∏∫‰∫ÜË∞ÉÁî® @command{awk} ÁöÑÂÜÖÁΩÆÂáΩÊï∞ÔºåÂè™ÈúÄË¶ÅËæìÂÖ•ÂáΩÊï∞ÁöÑÂêçÂ≠óÔºåÂêéÈù¢Ë∑üÁùÄÊîæÁΩÆÂú®Êã¨Âè∑ÂÜÖÁöÑÂèÇÊï∞ÂàóË°®Âç≥ÂèØ„ÄÇ
‰æãÂ¶ÇÔºå@samp{atan2(y + z, 1)} ‰∏∫Ë∞ÉÁî®ÂáΩÊï∞ @code{atan2()}ÔºåÂπ∂Â∏¶Êúâ‰∏§‰∏™ÂèÇÊï∞„ÄÇ

@cindex programming conventions, functions, calling
@cindex whitespace, functions@comma{} calling
ÂÜÖÂª∫ÂáΩÊï∞‰∏≠ÂáΩÊï∞Âêç‰∏éÂºÄÊã¨Âè∑‰πãÈó¥ÁöÑÁ©∫Ê†º‰ºöË¢´ÂøΩÁï•Ôºå‰ΩÜÊòØËøô‰∏çÊòØ‰∏Ä‰∏™Â•ΩÁöÑÁºñÁ®ã‰π†ÊÉØÔºåÂ∫îËØ•Ë¶ÅÈÅøÂÖçÂú®ÂÆÉ‰ª¨‰πãÈó¥ËæìÂÖ•Á©∫Ê†º„ÄÇÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞‰∏çÂÖÅËÆ∏Âú®Ëøô‰∏™‰ΩçÁΩÆÊúâÁ©∫Ê†ºÔºåÂõ†Ê≠§‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁºñÁ®ã‰π†ÊÉØÂ∞±ÂèØ‰ª•ÈÅøÂÖçËøôÊ†∑ÁöÑÈîôËØØ‚Äî‚ÄîÂ∞±ÊòØ‰∏çË¶ÅÂú®ÂáΩÊï∞ÂêçÂêéÈù¢ÊèíÂÖ•Á©∫Ê†º„ÄÇ

@cindex troubleshooting, @command{gawk}, fatal errors@comma{} function arguments
@cindex @command{gawk}, function arguments and
@cindex differences in @command{awk} and @command{gawk}, function arguments (@command{gawk})
ÊØè‰∏™ÂÜÖÁΩÆÂáΩÊï∞ÈÉΩÊé•Êî∂ÁâπÂÆöÊï∞ÁõÆÁöÑÂèÇÊï∞„ÄÇÂú®Êüê‰∫õÊÉÖÂÜµ‰∏ãÔºåÂèÇÊï∞ÂèØ‰ª•ÁúÅÁï•„ÄÇÂØπ‰∫éÁúÅÁï•ÂèÇÊï∞ÁöÑÈªòËÆ§ÂÄºÂáΩÊï∞‰∏éÂáΩÊï∞Èó¥ÊòØ‰∏çÂêåÁöÑÔºåÂπ∂‰∏î‰ºöÂçïÁã¨ËøõË°åËØ¥Êòé„ÄÇ
‰∏Ä‰∫õ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÊúâ‰∏Ä‰∫õÈ¢ùÂ§ñ‰ºöË¢´ÂøΩÁï•„ÄÇ‰ΩÜÊòØÔºåÂú® @command{gawk} ‰∏≠ÔºåÁªôÂÜÖÁΩÆÂáΩÊï∞‰∏Ä‰∏™È¢ùÂ§ñÁöÑÂèÇÊï∞ÊòØ‰∏Ä‰∏™Ëá¥‰ΩøÈîôËØØ„ÄÇ

ÂΩìÂáΩÊï∞Ë¢´Ë∞ÉÁî®Êó∂ÔºåÁîüÊàêÂáΩÊï∞ÂÆûÈôÖÂèÇÊï∞ÁöÑË°®ËææÂºè‰ºöÂú®Ë∞ÉÁî®ÊâßË°åÂâçËøõË°åÊ±ÇÂÄº„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁâáÊÆµ‰∏≠Ôºö

@example
i = 4
j = sqrt(i++)
@end example

@cindex evaluation order, functions
@cindex functions, built-in, evaluation order
@cindex built-in functions, evaluation order
@noindent
ÂèòÈáè @code{i} ‰ºöÂú®Ë∞ÉÁî® @code{sqrt()} ‰πãÂâçÈÄíÂ¢û‰∏∫ÂÄº 5Ôºå‰ΩÜÊòØË∞ÉÁî®Êó∂‰ºöÁî®ÂÄº 4 ‰Ωú‰∏∫ÂÆûÈôÖÁöÑÂèÇÊï∞„ÄÇ‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞ÁöÑË°®ËææÂºèÁöÑÊ±ÇÂÄºÁöÑÈ°∫Â∫èÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇÊâÄ‰ª•ÔºåË¶ÅÈÅøÂÖçÂÜô‰ªéÂ∑¶Âà∞Âè≥ÔºåÊàñËÄÖ‰ªéÂè≥Âà∞Â∑¶ËøõË°åÊ±ÇÂÄºÁöÑÁ®ãÂ∫è„ÄÇÂ¶ÇÔºö

@example
i = 5
j = atan2(++i, i *= 2)
@end example

Â¶ÇÊûúÊ±ÇÂÄºÁöÑÈ°∫Â∫èÊòØ‰ªéÂ∑¶Âà∞Âè≥ÔºåÂàô @code{i} ‰ºö‰∏∫ 6ÔºåÁÑ∂ÂêéÊàê‰∏∫ 12„ÄÇÂàô‰ºöÁî® 6 ‰∏é 12 ‰∏§‰∏™ÂÄºË∞ÉÁî® @code{atan2()}„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúÈ°∫Â∫è‰∏∫‰ªéÂè≥Âà∞Â∑¶Ôºå@code{i} È¶ñÂÖà‰∏∫ 10ÔºåÁÑ∂Âêé‰∏∫ 11ÔºåÂàô @code{atan2()} ‰ºöÁî® 11Ôºå‰∏é 10 Êù•ËøõË°åË∞ÉÁî®„ÄÇ

@node Numeric Functions
@subsection Êï∞ÂÄºÂáΩÊï∞
@cindex numeric functions

‰∏ãÈù¢ÁöÑÂàóË°®ÊèèËø∞‰∫ÜÊâÄÊúâÁöÑÁî®‰∫éÊï∞ÂÄºÂ§ÑÁêÜÁöÑÂÜÖÁΩÆÂáΩÊï∞„ÄÇÂèØÈÄâÁöÑÂèÇÊï∞Áî®ÊñπÊã¨Âè∑@w{ ([ ]):} ÂåÖÂê´Ëµ∑Êù•Ôºö

@c @asis for docbook
@table @asis
@item @code{atan2(@var{y}, @var{x})}
@cindexawkfunc{atan2}
@cindex arctangent
ËøîÂõû @code{@var{y} / @var{x}} ÂºßÂ∫¶ÁöÑÂèçÊ≠£ÂàáÂÄº„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® @samp{pi = atan2(0, -1)} Êù•Ê±ÇÂæó @value{PI} ÁöÑÂÄº„ÄÇ

@item @code{cos(@var{x})}
@cindexawkfunc{cos}
@cindex cosine
ËøîÂõû @var{x} ÁöÑ‰ΩôÂº¶ÂÄºÔºå@var{x} ‰∏∫ÂºßÂ∫¶„ÄÇ

@item @code{exp(@var{x})}
@cindexawkfunc{exp}
@cindex exponent
ËøîÂõû @var{x} ÁöÑËá™ÁÑ∂ÂπÇÔºà@code{e ^ @var{x}}ÔºâÊàñËÄÖ @var{x} ÁöÑÂÄºË∂ÖËøáËåÉÂõ¥ÂàôÊä•Èîô„ÄÇ@var{x} ÁöÑËåÉÂõ¥‰æùËµñ‰∫é‰Ω†ÁöÑÊú∫Âô®ÁöÑÊµÆÁÇπÊï∞Ë°®Á§∫„ÄÇ

@item @code{int(@var{x})}
@cindexawkfunc{int}
@cindex round to nearest integer
ËøîÂõûÊúÄÊé•Ëøë‰∫é @var{x} ÁöÑÊï¥Êï∞ÔºåÂÖ∂ÂÄºÂú® @var{x} ‰∏é 0 ‰πãÈó¥ÔºåÂπ∂Âêë 0 ËøõË°åÊà™Âèñ„ÄÇ
Â¶Ç @code{int(3)} ‰∏∫ 3Ôºå@code{int(3.9)} ‰∏∫ 3Ôºå@code{int(-3.9)} ‰∏∫ @minus{}3Ôºå@code{int(-3)} ‰πü‰∏∫ @minus{}3„ÄÇ

@item @code{log(@var{x})}
@cindexawkfunc{log}
@cindex logarithm
Â¶ÇÊûú @var{x} ‰∏∫Ê≠£Êï∞ÔºåËøîÂõû @var{x} ÁöÑËá™ÁÑ∂ÂØπÊï∞ÔºåÂê¶ÂàôÂú® IEEE 754 ÁöÑÁ≥ªÁªü‰∏äËøîÂõû @code{NaN} Ôºà‚Äúnot a number‚ÄùÔºâ„ÄÇ
Ê≠§Â§ñÔºåÂ¶ÇÊûú @var{x} ‰∏∫Ë¥üÊï∞Ôºå@command{gawk} Ëøò‰ºöÊâìÂç∞‰∏Ä‰∏™Ë≠¶Âëä‰ø°ÊÅØ„ÄÇ

@item @code{rand()}
@cindexawkfunc{rand}
@cindex random numbers, @code{rand()}/@code{srand()} functions
ËøîÂõû‰∏Ä‰∏™ÈöèÊú∫Êï∞„ÄÇ@code{rand()} ÁöÑÂÄº‰∏ÄËá¥Âú∞ÂàÜÂ∏ÉÂú® 0 ‰∏é 1 ‰πãÈó¥ÔºåÂÄºÂèØ‰ª•‰∏∫ 0Ôºå‰ΩÜ‰∏ç‰ºöÁ≠â‰∫é 1„ÄÇ 
@footnote{Â§ßÂÆ∂ÈÉΩÁü•ÈÅìÔºåÂú®ÂæàÂ§ö Unix Á≥ªÁªü‰∏äÁöÑ C ÁâàÊú¨ÁöÑ @code{rand()}Ôºå‰∫ßÁîüÁöÑÈöèÊú∫Êï∞Â∫èÂàóÈùûÂ∏∏‰∏çÂ•Ω„ÄÇ
‰ΩÜÊòØ @command{awk} ÁâàÊú¨ÁöÑÂÆûÁé∞‰∏ÄÁÇπÈÉΩÊ≤°Êúâ‰ΩøÁî® C ÁâàÊú¨ÁöÑ @code{rand()}„ÄÇ
‰∫ãÂÆû‰∏äÔºå@command{gawk} ‰ΩøÁî® BSD ÁöÑ @code{random()} ÂáΩÊï∞ÔºåËøô‰∏™ÂáΩÊï∞‰∫ßÁîüÁöÑÈöèÊú∫Êï∞Ë¶ÅÊØî @code{rand()} Â•ΩÂæàÂ§ö„ÄÇ}

ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºå‰Ω†ÈúÄË¶ÅÁöÑÊòØÈöèÊú∫ÁöÑÊï¥Êï∞„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºåÊ≠§ÂáΩÊï∞ÂèØ‰ª•Áî®Êù•‰∫ßÁîüÂ∞è‰∫é @var{n} ÁöÑÈöèÊú∫ÈùûË¥üÊï¥Êï∞Ôºö

@example
function randint(n)
@{
    return int(n * rand())
@}
@end example

@noindent
‰πòÊ≥ï‰∫ßÁîü‰∏Ä‰∏™ÈöèÊú∫Êï∞Â§ß‰∫éÁ≠â‰∫é 0Ôºå‰ΩÜÂ∞è‰∫é @code{n}„ÄÇ‰ΩøÁî® @code{int()} Âõ†Ê≠§ÂèØ‰ª•‰ΩøÂæóÁªìÊûúÊàê‰∏∫ 0 Âà∞ @code{n} @minus{} 1 ‰πãÈó¥ÁöÑÊï¥Êï∞„ÄÇ

‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî®‰∏Ä‰∏™Áõ∏‰ººÁöÑÂáΩÊï∞Êù•‰∫ßÁîüÂú® 1 Âà∞ @var{n} ‰πãÈó¥ÁöÑÈöèÊú∫Êï¥Êï∞„ÄÇËøô‰∏™Á®ãÂ∫è‰ºö‰∏∫ÊØè‰∏™ËæìÂÖ•ËÆ∞ÂΩïÊâìÂç∞‰∏Ä‰∏™Êñ∞ÁöÑÈöèÊú∫Êï∞Ôºö

@example
# Function to roll a simulated die.
function roll(n) @{ return 1 + int(rand() * n) @}

# Roll 3 six-sided dice and
# print total number of points.
@{
    printf("%d points\n", roll(6) + roll(6) + roll(6))
@}
@end example

@cindex seeding random number generator
@cindex random numbers, seed of
@quotation Ê≥®ÊÑè
Âú®Â§ßÂ§öÊï∞ÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÂåÖÊã¨ @command{gawk}ÔºåÊØèÊ¨°ËøêË°å @command{awk} Êó∂Ôºå@code{rand()} ÈÉΩ‰ªéÁõ∏ÂêåÁöÑÂºÄÂßãÊï∞ÔºåÊàñËÄÖÁßçÂ≠êËµ∑‰∫ßÁîüÈöèÊú∫Êï∞„ÄÇ
@footnote{@command{mawk} ÊØèÊ¨°ÈÉΩ‰ΩøÁî®‰∏çÂêåÁöÑÁßçÂ≠ê„ÄÇ}
ÊâÄ‰ª•ÔºåÁ®ãÂ∫èÊØèÊ¨°ËøêË°åÈÉΩ‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇÂú® @command{awk} ‰∏ÄÊ¨°ËøêË°å‰∏≠‰∫ßÁîüÁöÑÊï∞ÂÄºÊòØÈöèÊú∫ÁöÑÔºå‰ΩÜÊòØÊØèÊ¨°ËøêË°åÊó∂‰∫ßÁîüÁöÑÈöèÊú∫Êï∞Âç¥ÊòØÂèØÈ¢ÑÊµãÁöÑ„ÄÇËøôÁî®‰∏ÄË∞ÉËØïÊó∂ÈùûÂ∏∏ÊúâÁî®Ôºå‰ΩÜÊòØÂ¶ÇÊûú‰Ω†ÊÉ≥Á®ãÂ∫èÊØèÊ¨°‰ΩøÁî®ÁöÑÊó∂ÂÄôÂÅö‰∏çÂêåÁöÑ‰∫ãÊÉÖÔºå‰Ω†ÂøÖÈ°ªÊîπÂèò seed ‰∏∫ÊØèÊ¨°ËøêË°åÈÉΩ‰∏çÁõ∏ÂêåÁöÑÂÄº„ÄÇË¶ÅËøô‰πàÂÅöÔºåÂ∞±Ë∞ÉÁî® @code{srand()} ÂáΩÊï∞„ÄÇ
@end quotation

@item @code{sin(@var{x})}
@cindexawkfunc{sin}
@cindex sine
ËøîÂõûÂºßÂ∫¶ @var{x} ÁöÑÊ≠£Âº¶ÂÄº„ÄÇ

@item @code{sqrt(@var{x})}
@cindexawkfunc{sqrt}
@cindex square root
ËøîÂõû @var{x} ÁöÑÊ≠£Âπ≥ÊñπÊ†π„ÄÇ@command{gawk} Âú® @var{x} ‰∏∫Ë¥üÂÄºÊó∂‰ºöÊâìÂç∞‰∏Ä‰∏™ÂëäË≠¶„ÄÇ@code{sqrt(4)} ÁöÑÂÄºÊòØ 2„ÄÇ

@item @code{srand(}[@var{x}]@code{)}
@cindexawkfunc{srand}
ËÆæÁΩÆÂºÄÂßãÁÇπÔºåÊàñËÄÖÁßçÂ≠êÔºåÁî®Êù•‰∫ßÁîüÁõ∏ÂØπ‰∫é @var{x} ÁöÑÈöèÊú∫Êï∞„ÄÇ

ÊØè‰∏Ä‰∏™ÁßçÂ≠êÈÉΩ‰ºö‰∫ßÁîüÁâπÂÆöÂ∫èÂàóÁöÑÈöèÊú∫Êï∞„ÄÇ
@footnote{ËÆ°ÁÆóÊú∫‰∫ßÁîüÁöÑÈöèÊú∫Êï∞‰∏çÊòØÁúüÊ≠£ÁöÑÈöèÊú∫Êï∞„ÄÇÂú®ÊäÄÊúØ‰∏äÔºåÂÆÉ‰ª¨ÈÉΩÊòØ@dfn{‰º™ÈöèÊú∫}ÁöÑ„ÄÇ
ËøôÂ∞±ÊòØËØ¥ÔºåÂ∞ΩÁÆ°Êï∞ÂÄºÂ∫èÂàóÁúãËµ∑Êù•ÊòØÈöèÊú∫ÁöÑÔºå‰ΩÜÊòØ‰∫ãÂÆû‰∏ä‰ºö‰∏ÄÊ¨°Ê¨°Âú∞‰∫ßÁîüÁõ∏ÂêåÁöÑÈöèÊú∫Â∫èÂàó„ÄÇ}
ÊâÄ‰ª•ÔºåÂ¶ÇÊûúÁßçÂ≠êÊØèÊ¨°ÈÉΩËÆæÁΩÆÊàêÁõ∏ÂêåÁöÑÂÄºÔºåÂàôÈöèÊú∫Êï∞ÊØèÊ¨°ÈÉΩ‰ºö‰∫ßÁîü‰∏ÄÊ†∑„ÄÇ

@quotation Ê≥®ÊÑè
‰∏çÂêåÁöÑ @command{awk} ÂÆûÁé∞‰ΩøÁî®‰∏çÂêåÁöÑÂÜÖÈÉ®ÈöèÊú∫Êï∞‰∫ßÁîüÂô®„ÄÇ‰∏çË¶ÅÂ∏åÊúõ @command{awk} Á®ãÂ∫èË¢´‰∏çÂêåÁâàÊú¨ÁöÑ @command{awk} ÊâßË°åÊó∂‰ºö‰∫ßÁîüÁõ∏ÂêåÁöÑÈöèÊú∫Êï∞Â∫èÂàó„ÄÇ
@end quotation

Â¶ÇÊûúÂú® @samp{srand()} ÂáΩÊï∞‰∏≠ÁúÅÁï•‰∫Ü @var{x}ÔºåÂàô‰ºö‰ΩøÁî®ÂΩìÂâçÁöÑÊó•Êúü‰∏éÂΩìÂ§©ÁöÑÊó∂Èó¥Êù•‰Ωú‰∏∫ÁßçÂ≠ê„ÄÇËøôÁßçÊñπÂºè‰∏ãÂèñÂæóÁöÑÈöèÊú∫Êï∞ÊòØÁúüÊ≠£‰∏çÂèØÈ¢ÑÊµãÁöÑ„ÄÇ

@code{srand()} ËøîÂõûÁöÑÂÄºÊòØÂâç‰∏Ä‰∏™ÁßçÂ≠êÁöÑÂÄº„ÄÇËøôÂèØ‰ª•‰ΩøÂæóÂæàÂÆπÊòìÊù•Ë∑üË∏™ÁßçÂ≠êÔºå‰ª•‰æø‰Ω†ÈúÄË¶Å‰∫ßÁîü‰∏ÄËá¥ÁöÑÈöèÊú∫Êï∞Â∫èÂàó„ÄÇ

POSIX Ê≤°ÊúâÊåáÂÆöÂàùÂßãÁöÑÁßçÂ≠êÂÄºÔºåÂõ†Ê≠§Âú®‰∏çÂêåÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÊòØ‰∏çÂêåÁöÑ„ÄÇ
@end table

@node String Functions
@subsection Â≠ó‰∏≤Êìç‰ΩúÂáΩÊï∞

@cindex string-manipulation functions

Êú¨@value{SECTION}Êàë‰ª¨Êù•ËÆ®ËÆ∫‰∏Ä‰∏ãÊü•ÊâæÊàñËÄÖÊõ¥Êîπ‰∏Ä‰∏™ÊàñËÄÖ‰∏Ä‰∫õ‰∏≤ÁöÑÊñáÊú¨„ÄÇ

@command{gawk} ÂèØ‰ª•ÁêÜËß£Êú¨Êú¨ËØ≠Ë®ÄËÆæÁΩÆÔºàÊü•Áúã @pxref{Locales}ÔºâÂπ∂‰∏îÂØπÂ≠ó‰∏≤ÁöÑÂ§ÑÁêÜÈÉΩÊòØÊ†πÊçÆ@emph{Â≠óÁ¨¶}Êù•ÁöÑÔºåËÄå‰∏çÊòØ@emph{Â≠óËäÇ}„ÄÇ
Ëøô‰∏™Âå∫Âà´Âú®ÁêÜËß£Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠Ôºå‰∏Ä‰∏™Â≠óÁ¨¶ÈúÄË¶ÅÂ§ö‰∏™Â≠óËäÇÊù•Ë°®Á§∫ÁöÑÊó∂ÂÄôÈùûÂ∏∏ÈáçË¶Å„ÄÇÊâÄ‰ª•ÔºåÂÉè @code{length()} ÂáΩÊï∞‰ºöËøîÂõûÂ≠ó‰∏≤‰∏≠ÁöÑÂ≠óÁ¨¶Êï∞ÔºåËÄå‰∏çÊòØÁî®Êù•Ë°®Á§∫Ëøô‰∫õÂ≠óÁ¨¶ÁöÑÂ≠óËäÇÊï∞„ÄÇ
Áõ∏‰ººÂú∞Ôºå@code{index()} ÊòØËøîÂõûÂ≠óÁ¨¶ÁöÑÁ¥¢ÂºïÔºåËÄå‰∏çÊòØÂ≠óËäÇÁöÑÁ¥¢Âºï„ÄÇ

@quotation Ê≥®ÊÑè
ÊúâÂæàÂ§öÁöÑÂáΩÊï∞‰ºöÂ§ÑÁêÜÂ≠ó‰∏≤ÁöÑÁ¥¢Âºï„ÄÇÂØπ‰∫éËøôÊ≠§ÂáΩÊï∞ÔºåÂ≠ó‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑÁ¥¢Âºï‰∏∫ 1„ÄÇËøô‰∏™‰∏é C ‰ª•ÂèäÂÖ∂Ê¥æÁîüÁöÑËØ≠Ë®Ä‰∏çÂêåÔºåÂú®Ëøô‰∫õËØ≠Ë®Ä‰∏≠ÔºåÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑÁ¥¢Âºï‰ΩçÁΩÆ‰∏∫ 0„ÄÇ‰Ω†ÈúÄË¶ÅËÆ∞‰ΩèËøô‰∏™Âå∫Âà´Ôºå‰ª•Ê≠£Á°ÆÂ§ÑÁêÜÁ¥¢ÂºïÁöÑËÆ°ÁÆóÔºåÂ∞§ÂÖ∂ÊòØ‰Ω†Â∑≤Áªè‰π†ÊÉØ‰∫Ü C ÁöÑÊÉÖÂÜµ„ÄÇ
@end quotation

‰∏ãÈù¢ÁöÑÂàóË°®‰∏≠ÔºåÂèØÈÄâÁöÑÂèÇÊï∞ÊîæÂú®ÊñπÊã¨Âè∑‰∏≠@w{ ([ ]).}„ÄÇÊúâÂá†‰∏™ÂáΩÊï∞Áî®Êù•Â§ÑÁêÜÂ≠ó‰∏≤ÊõøÊç¢ÔºåÂÆåÊï¥ÁöÑËÆ®ËÆ∫‰ºöÂú® @code{sub()} ÂáΩÊï∞ÁöÑËØ¥Êòé‰∏≠ÁªôÂá∫ÔºåÂπ∂‰∏î‰ª•Ê≠§‰∏∫ÁªìÊùüÔºåÂõ†‰∏∫ÂàóË°®ÊòØÊåâÂ≠óÊØçÈ°∫Â∫èÊéíÂ∫èÁöÑ„ÄÇ

ÈÇ£‰∫õÁâπÂÆö‰∫é @command{gawk} ÁöÑÂáΩÊï∞Áî®‰∫ïÂè∑Â≠óÁ¨¶Ôºà@samp{#}ÔºâÊ†áËØÜ„ÄÇÂÆÉ‰ª¨Âú®ÂÖºÂÆπÊ®°Âºè‰∏≠‰∏çÂèØÁî®ÔºàÊü•Áúã @ref{Options}ÔºâÔºö


@menu
* Gory Details::                More than you want to know about @samp{\} and
                                @samp{&} with @code{sub()}, @code{gsub()}, and
                                @code{gensub()}.
@end menu

@c @asis for docbook
@table @asis
@item @code{asort(}@var{source} [@code{,} @var{dest} [@code{,} @var{how} ] ]@code{) #}
@itemx @code{asorti(}@var{source} [@code{,} @var{dest} [@code{,} @var{how} ] ]@code{) #}
@cindexgawkfunc{asorti}
@cindex sort array
@cindex arrays, elements, retrieving number of
@cindexgawkfunc{asort}
@cindex sort array indices
Ëøô‰∏§‰∏™ÂáΩÊï∞ÁöÑË°å‰∏∫ÊòØÁ±ª‰ººÁöÑÔºåÂõ†Ê≠§Âú®‰∏ÄËµ∑ÊèèËø∞„ÄÇ

@quotation ÊèêÁ§∫
‰∏ãÈù¢ÁöÑÊèèËø∞ÂøΩÁï•‰∫ÜÁ¨¨‰∏â‰∏™ÂèÇÊï∞Ôºå@var{how}ÔºåÂõ†‰∏∫ÈúÄË¶ÅÁêÜËß£ÁõÆÂâçÊàë‰ª¨ËøòÊ≤°ÊúâËÆ®ËÆ∫Âà∞ÁöÑÁâπÊÄß„ÄÇÊâÄ‰ª•ÔºåËøôÈáåËÆ®ËÆ∫ÊúâÊÑèÁÆÄÂåñ‰∫Ü„ÄÇÔºàÊàë‰ª¨ÂêéÈù¢‰ºöÊèê‰æõÊâÄÊúâÁöÑÁªÜËäÇÔºåÊü•Áúã @ref{Array Sorting Functions}ÔºåÊù•Ëé∑ÂèñÊâÄÊúâÁöÑ‰ø°ÊÅØ„ÄÇÔºâ
@end quotation

‰∏§‰∏™ÂáΩÊï∞ÈÉΩËøîÂõûÊï∞ÁªÑ @var{source} ‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞„ÄÇÂØπ‰∫é @command{asort()}Ôºå@command{gawk} ÂØπ @var{source} ÁöÑÂÄºËøõË°åÊéíÂ∫èÔºåÂπ∂ÊõøÊç¢ÁªèËøáÊéíÂ∫èÁöÑÂÄºÁöÑÁ¥¢Âºï‰∏∫Áî± 1 ÂºÄÂßãËøûÁª≠Êï¥Êï∞„ÄÇÂ¶ÇÊûúÂèØÈÄâÁöÑÊï∞ÁªÑ @var{dest} Â≠òÂú®ÔºåÂàô @var{source} ÁöÑÂÄº‰ºöÂ§çÂà∂Âà∞ @var{dest} ‰∏≠„ÄÇ@var{dest} Âàô‰πüÊòØÁªèËøáÊéíÂ∫èÁöÑÔºåËÄå @var{source} ÁöÑÁ¥¢ÂºïÂàô‰øùÊåÅ‰∏çÂèò„ÄÇ

@cindex @command{gawk}, @code{IGNORECASE} variable in
ÂΩìËøõË°åÂ≠ó‰∏≤ÊØîËæÉÊó∂Ôºå@code{IGNORECASE} ‰ºöÂΩ±ÂìçÊéíÂ∫èÔºàÊü•Áúã @pxref{Array Sorting Functions}Ôºâ„ÄÇ
Â¶ÇÊûú @var{source} Êï∞ÁªÑÂåÖÂê´‰∫ÜÂ≠êÊï∞ÁªÑÔºàÊü•Áúã @pxref{Arrays of Arrays}ÔºâÔºåÂÆÉ‰ª¨‰ºöÂú®ÊâÄÊúâÁöÑÊ†áÈáèÂÄºÁöÑÂêéÈù¢„ÄÇ
Â≠êÊï∞ÁªÑ@emph{‰∏ç‰ºö}ÂÜçËøõË°åÈÄíÂΩíÊéíÂ∫è„ÄÇ

‰æãÂ¶ÇÔºå@code{a} ÁöÑÂÜÖÂÆπÂ¶Ç‰∏ãÔºö

@example
a["last"] = "de"
a["first"] = "sac"
a["middle"] = "cul"
@end example

@noindent
Ë∞ÉÁî® @code{asort()}:

@example
asort(a)
@end example

@noindent
@code{a} ÂÜÖÂÆπÁöÑÁªìÊûúÂ¶Ç‰∏ãÔºö

@example
a[1] = "cul"
a[2] = "de"
a[3] = "sac"
@end example

@code{asorti()} ÂáΩÊï∞‰∏é @code{asort()} Á±ªÂûãÔºå‰ΩÜÊòØÂè™ÂØπ@emph{Á¥¢Âºï}ÊéíÂ∫èÔºåËÄå‰∏çÊòØÈíàÂØπÂÄºËøõË°åÊéíÂ∫è„ÄÇ
ÊâÄ‰ª•ÔºåÂú®ÂâçÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå@code{a} Áî®ÂêåÊ†∑ÁöÑÁ¥¢Âºï‰∏éÂÄºÔºåË∞ÉÁî® @samp{asorti(a)} Âàô‰∫ßÁîüÂ¶Ç‰∏ãÁªìÊûúÔºö

@example
a[1] = "first"
a[2] = "last"
a[3] = "middle"
@end example

@item @code{gensub(@var{regexp}, @var{replacement}, @var{how}} [@code{, @var{target}}]@code{) #}
@cindexgawkfunc{gensub}
@cindex search and replace in strings
@cindex substitute in string
ÊêúÁ¥¢ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºè @var{regexp} ÁöÑÁõÆÊ†áÂ≠ó‰∏≤ÔºåÂ¶ÇÊûú @var{how} ÊòØ‰ª• @samp{g} ÊàñËÄÖ @samp{G} ÂºÄÂ¶ÇÁöÑÂ≠ó‰∏≤Ôºå
ÂàôÁî® @var{replacement} ÊõøÊç¢ÊâÄÊúâÂåπÈÖçÁöÑ @var{regexp}„ÄÇ
Âê¶Âàô @var{how} Â∞Ü‰ºöÂΩìÈù¢Êàê‰∏Ä‰∏™ÊåáÁ§∫Âì™‰∏Ä‰∏™Ë¶ÅËøõË°åÊõøÊç¢ÁöÑÊï∞ÂÄº„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõ @var{target} ÂèÇÊï∞ÔºåÂàô‰ΩøÁî® @code{$0} „ÄÇ
ÂáΩÊï∞ËøîÂõûÁªèËøá‰øÆÊîπÁöÑÂ≠ó‰∏≤ÔºåÂéüÂßãÁöÑÂ≠ó‰∏≤Âàô@emph{‰∏ç‰ºö}ÂèòÂåñ„ÄÇ

@code{gensub()} ÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊõøÊç¢ÂáΩÊï∞„ÄÇÂÆÉÁöÑÁõÆÁöÑÊòØÊèê‰æõÊØîÊ†áÂáÜÁöÑ @code{sub()} ‰∏é @code{gsub()} ÂáΩÊï∞Â§ö‰∏Ä‰∏™ÁâπÊÄß„ÄÇ

@code{gensub()} Êèê‰æõ‰∏Ä‰∏™È¢ùÂ§ñÁöÑÁâπÊÄßÊòØ @code{sub()} ‰∏é @code{gsub()} ÊâÄÊ≤°ÊúâÁöÑÔºåÂç≥ÔºöÂú® @var{replacement} ÊñáÊú¨‰∏≠ÔºåÊåáÂÆö‰∏Ä‰∏™ @var{regexp} ÁªÑ‰ª∂ÁöÑËÉΩÂäõ„ÄÇËøô‰∏™ÈÄöËøáÂú® @var{regexp} ‰∏≠‰ΩøÁî®Êã¨Âè∑Êù•Ê†áÂøóÁªÑ‰ª∂ÔºåÁÑ∂ÂêéÈÄöËøáÂú® @var{replacement} ‰∏≠Áî® @samp{\@var{N}} Êù•ÊåáÂÆöÔºåËøôÈáå @var{N} ÊòØ‰∏Ä‰∏™‰ªé 0 Âà∞ 9 ÁöÑÊï∞Â≠ó„ÄÇÂ¶ÇÔºö

@example
$ @kbd{gawk '}
> @kbd{BEGIN @{}
>      @kbd{a = "abc def"}
>      @kbd{b = gensub(/(.+) (.+)/, "\\2 \\1", "g", a)}
>      @kbd{print b}
> @kbd{@}'}
@print{} def abc
@end example

@noindent
Áî® @code{sub()} ÂáΩÊï∞Ôºå‰Ω†ÂøÖÈ°ªÊåáÂÆö‰∏§‰∏™ÂèçÊñúÊù†Êù•Âú®Â≠ó‰∏≤‰∏≠ÂåÖÂê´‰∏Ä‰∏™„ÄÇÂú®ÊõøÊç¢ÊñáÊú¨‰∏≠Ôºå@samp{\0} ÁöÑÂ∫èÂàóË°®Á§∫Êï¥‰∏™ÂåπÈÖçÁöÑÊñáÊú¨ÔºåÂ¶ÇÂ≠óÁ¨¶ @samp{&} ÊâÄË°®Á§∫ÁöÑ‰∏ÄÊ†∑„ÄÇ

‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòæÁ§∫‰∫Ü‰Ω†ÂèØ‰ª•‰ΩøÁî®Á¨¨‰∏â‰∏™ÂèÇÊï∞Êù•ÊéßÂà∂Âì™‰∏™ÂåπÈÖçÁöÑÊ≠£ÂàôË°®ËææÂºèÂèØ‰ª•Ë¢´ÊõøÊç¢Ôºö

@example
$ @kbd{echo a b c a b c |}
> @kbd{gawk '@{ print gensub(/a/, "AA", 2) @}'}
@print{} a b c AA b c
@end example

Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@code{$0} ÊòØÈªòËÆ§ÁöÑ @var{target} Â≠ó‰∏≤„ÄÇ@code{gensub()} ËøîÂõûÊñ∞ÁöÑ‰∏≤‰Ωú‰∏∫ÂÆÉÁöÑÁªìÊûúÔºåËøô‰∏™ÁªìÊûúÁõ¥Êé•‰º†ÈÄíÁªô @code{print} Áî®Êù•ÊâìÂç∞„ÄÇ

@c @cindex automatic warnings
@c @cindex warnings, automatic
Â¶ÇÊûú @var{how} Ëøô‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™‰∏ç‰ª• @samp{g} ÊàñËÄÖ @samp{G} ÂºÄÂ§¥ÁöÑ‰∏≤ÔºåÊàñËÄÖÊòØ‰∏Ä‰∏™Â∞è‰∫éÁ≠â‰∫é 0 ÁöÑÊï∞ÂÄºÔºåÂàôÂè™Êúâ‰∏Ä‰∏™ÊõøÊç¢‰ºöË¢´ÊâßË°å„ÄÇÂ¶ÇÊûú @var{how} ÊòØ 0Ôºå@command{gawk} ‰ºö‰∫ßÁîü‰∏Ä‰∏™ÂëäË≠¶„ÄÇ

Â¶ÇÊûú @var{regexp} Ê≤°ÊúâÂåπÈÖç @var{target}ÔºåÂàô @code{gensub()} ÁöÑËøîÂõûÂÄºÂ∞±ÊòØÂéüÊù•Êú™ÁªèÊõ¥ÊîπÁöÑ @var{target} ÁöÑÂÄº„ÄÇ

@item @code{gsub(@var{regexp}, @var{replacement}} [@code{, @var{target}}]@code{)}
@cindexawkfunc{gsub}
ÊêúÁ¥¢ @var{target} ‰∏≠@emph{ÊâÄÊúâÁöÑ}ÊúÄÂ∑¶ÊúÄÈïøÁöÑÔºå@emph{Êó†ÈáçÂè†}ÁöÑÂåπÈÖçÂ≠ê‰∏≤ÔºåÂπ∂‰∏îÁî® @var{replacement} ËøõË°åÊõøÊç¢„ÄÇ
@code{gsub()} ‰∏≠ÁöÑ @samp{g} Ë°®Á§∫‚Äúglobal‚ÄùÔºåÂÖ∂Ë°®Á§∫ÊõøÊç¢ÊâÄÊúâÂá∫Áé∞ÁöÑÂ≠ó‰∏≤„ÄÇ‰æãÂ¶ÇÔºö

@example
@{ gsub(/Britain/, "United Kingdom"); print @}
@end example

@noindent
‰ºöÁî® @samp{United Kingdom} ÊõøÊç¢ËæìÂÖ•ËÆ∞ÂΩïÊâÄÊúâÁöÑ @samp{Britain} Â≠ó‰∏≤„ÄÇ

@code{gsub()} ÂáΩÊï∞ËøîÂõûÊâßË°å‰∫ÜÊõøÊç¢ÁöÑ‰∏™Êï∞„ÄÇÂ¶ÇÊûúË¶ÅÊêúÁ¥¢ÂèäÂèòÊõ¥Ôºà@var{target}ÔºâÁöÑÂèòÈáèË¢´ÁúÅÁï•‰∫ÜÔºåÂ∞±ÊòØ‰ΩøÁî®Êï¥‰∏™ËæìÂÖ•ËÆ∞ÂΩï @code{$0} „ÄÇÂ¶ÇÂú® @code{sub()} ‰∏≠ÔºåÂ≠ó‰∏≤ @samp{&} ‰∏é @samp{\} ÊòØÁâπÊÆäÂ≠óÁ¨¶ÔºåÂπ∂‰∏îÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØÂèØËµãÂÄºÁöÑ„ÄÇ

@item @code{index(@var{in}, @var{find})}
@cindexawkfunc{index}
@cindex search in string
@cindex find substring in string
Âú® @var{in} Ëøô‰∏™Â≠ó‰∏≤‰∏≠ÊêúÁ¥¢Á¨¨‰∏ÄÊ¨°Âá∫Áé∞ÁöÑ @var{find} ‰∏≤ÔºåÂπ∂‰∏îËøîÂõûÂú®Â≠ó‰∏≤ @var{in} ‰∏≠Âá∫Áé∞ÁöÑÊúÄÂºÄÂßãÁöÑ‰ΩçÁΩÆ„ÄÇËÄÉËôë‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{awk 'BEGIN @{ print index("peanut", "an") @}'}
@print{} 3
@end example

@noindent
Â¶ÇÊûú @var{find} Ê≤°ÊúâË¢´ÊâæÂà∞Ôºå@code{index()} ‰ºöËøîÂõû 0„ÄÇ
If @var{find} is not found, @code{index()} returns zero.

@cindex dark corner, regexp as second argument to @code{index()}
ÂØπ‰∫é BWK @command{awk} ‰∏é @command{gawk} Ôºå‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÊù•‰Ωú‰∏∫ @var{find} ÂèÇÊï∞‰ºöÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇÂÖ∂‰ªñÁöÑÂÆûÂàôÂÖÅËÆ∏Ôºå‰ªñ‰ª¨‰ªÖÊòØÁÆÄÂçïÂú∞Â∞ÜÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÂΩìÊàê‰∏é @samp{$ 0 ~ /regexp/} ‰∏ÄÊ†∑ÁöÑË°®ËææÂºè„ÄÇ

@item @code{length(}[@var{string}]@code{)}
@cindexawkfunc{length}
@cindex string length
@cindex length of string
ËøîÂõûÂ≠ó‰∏≤ @var{string} ÁöÑÂ≠óÁ¨¶Êï∞„ÄÇÂ¶ÇÊûú @var{string} ÊòØ‰∏Ä‰∏™Êï∞ÂÄºÔºåÂàôË°®Á§∫Ëøô‰∏™Êï∞ÂÄº‰∏≤ÁöÑÊï∞Â≠ó‰ΩçÊï∞Ë¢´ËøîÂõû„ÄÇ
‰æãÂ¶Ç @code{length("abcde")} ÁöÑÂÄº‰∏∫ 5„ÄÇÊØîËæÉ @code{length(15 * 35)} ÂÖ∂ÂÄºÂàô‰∏∫ 3„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå
@iftex
@math{15 @cdot 35 = 525},
@end iftex
@ifnottex
@ifnotdocbook
15 * 35 = 525,
@end ifnotdocbook
@end ifnottex
@docbook
15 &sdot; 35 = 525,
@end docbook
ËÄå 525 ËΩ¨Êç¢ÊàêÂ≠ó‰∏≤ @code{"525"}ÔºåËøôÈáåÈù¢Êúâ‰∏â‰∏™Â≠óÁ¨¶„ÄÇ

@cindex length of input record
@cindex input record, length of
Â¶ÇÊûúÊ≤°ÊúâÊèê‰æõÂèÇÊï∞Ôºå@code{length()} ÂàôËøîÂõû @code{$0} ÁöÑÈïøÂ∫¶„ÄÇ

@c @cindex historical features
@cindex portability, @code{length()} function
@cindex POSIX @command{awk}, functions and, @code{length()}
@quotation ÊèêÁ§∫
Âú®ÊóßÁâàÊú¨ÁöÑ @command{awk} ‰∏≠Ôºå@code{length()} ÂáΩÊï∞ÂèØ‰ª•‰∏çÂ∏¶Êã¨Âè∑ËøõË°åË∞ÉÁî®„ÄÇËøô‰πàÂÅöË¢´ËßÜ‰∏∫Âæà‰∏çÂ•ΩÁöÑÂÆûË∑µÔºåÂ∞ΩÁÆ° 2008 ÁâàÊú¨ÁöÑ POSIX Ê†áÂáÜËøòÊòØÊòæÂºèÂú∞ÂÖÅËÆ∏ÂÆÉÔºå‰ΩÜÈÇ£‰πüÊòØ‰∏∫‰∫ÜÊîØÊåÅÂéÜÂè≤ÂÆûË∑µ„ÄÇ‰∏∫‰∫ÜÁ®ãÂ∫èÁöÑÊúÄÂ§ßÂèØÁßªÊ§çÊÄßÔºåÂú®Ë∞ÉÁî®Êó∂ÊÄªÊòØ‰ΩøÁî®Êã¨Âè∑„ÄÇ
@end quotation

@cindex dark corner, @code{length()} function
Â¶ÇÊûúË∞ÉÁî® @code{length()} Êó∂‰ΩøÁî®ÁöÑÊòØ‰∏Ä‰∏™ËøòÊ≤°ÊúâË¢´‰ΩøÁî®ÁöÑÂèòÈáèÔºå@command{gawk} ‰ºöÂº∫Âà∂ÂèòÈáè‰∏∫‰∏Ä‰∏™Ê†áÈáè„ÄÇÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰ºöÂ∞ÜÂèòÈáè‰øùÁïô‰∏∫‰∏Ä‰∏™Êó†Á±ªÂûãÁöÑÂèòÈáè„ÄÇ
@value{DARKCORNER}
Â¶ÇÔºö

@example
$ @kbd{gawk 'BEGIN @{ print length(x) ; x[1] = 1 @}'}
@print{} 0
@error{} gawk: fatal: attempt to use scalar `x' as array

$ @kbd{nawk 'BEGIN @{ print length(x) ; x[1] = 1 @}'}
@print{} 0
@end example

@noindent
Â¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆö‰∫Ü @option{--lint} ÂèÇÊï∞Ôºå@command{gawk} ‰ºöÂØπËøô‰ΩøÁî®‰∫ßÁîü‰∏Ä‰∏™ÂëäË≠¶„ÄÇ

@cindex common extensions, @code{length()} applied to an array
@cindex extensions, common@comma{} @code{length()} applied to an array
@cindex differences between @command{gawk} and @command{awk}
@cindex number of array elements
@cindex array, number of elements
@command{gawk} ‰∏éÂÖ∂‰ªñÁöÑÂá†‰∏™ @command{awk} ÂÆûÁé∞ÔºåÂΩìÂèÇÊï∞ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÊó∂Ôºå@code{length()} ËøîÂõûÁöÑÊòØÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇ @value{COMMONEXT}
ÂàùÁúãËµ∑Êù•ÔºåËøôÊ≤°‰ªÄ‰πà‰ΩúÁî®ÔºåÂõ†‰∏∫Êï∞ÁªÑÁöÑÁ¥¢ÂºïÂπ∂‰∏ç‰øùËØÅÊòØ‰ªé 1 Âà∞Êï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†Êï∞ÁõÆ„ÄÇÂ¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠‰ΩøÁî®‰∫Ü @option{--lint} ÈÄâÈ°πÔºàÊü•Áúã @ref{Options}ÔºâÔºå@command{gawk} ‰ºöË≠¶ÂëäËØ¥Ôºå‰º†ÈÄíÊï∞ÁªÑÂèÇÊï∞Âπ∂‰∏çÊòØÂèØÁßªÊ§çÁöÑ„ÄÇÂ¶ÇÊûúÊåáÂÆö‰∫Ü @option{--posix} ÈÄâÈ°πÔºåÂàô‰ΩøÁî®Êï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞‰ºöÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØÔºàÊü•Áúã @pxref{Arrays}Ôºâ„ÄÇ

@item @code{match(@var{string}, @var{regexp}} [@code{, @var{array}}]@code{)}
@cindexawkfunc{match}
@cindex string, regular expression match
@cindex match regexp in string
ÊêúÁ¥¢ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºè @var{regexp} ÁöÑÊúÄÈïøÊúÄÂ∑¶ËæπÁöÑÂ≠ê‰∏≤ÔºåÂπ∂ËøîÂõûÂ≠ê‰∏≤ÂºÄÂßãÁöÑÂ≠óÁ¨¶‰ΩçÁΩÆÔºàÁ¥¢ÂºïÔºåÂ¶ÇÊûúÂ≠ê‰∏≤ÊòØÂ≠ó‰∏≤ @var{string} ÁöÑÂºÄÂßãÔºåÂàôËøîÂõû 1 Ôºâ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÂåπÈÖçÔºåÂàôËøîÂõû 0„ÄÇ

@var{regexp} ÂèÇÊï∞Âç≥ÂèØ‰ª•ÊòØÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà@code{/}@dots{}@code{/}ÔºâÔºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏ÈáèÔºà@code{"}@dots{}@code{"}Ôºâ„ÄÇ
Â¶ÇÊûúÊòØÂêéËÄÖÔºåÂ≠ó‰∏≤Ë¢´ÂΩìÊàêÊòØÊ≠£ÂàôË°®ËææÂºèÁî®Êù•ËøõË°åÂåπÈÖç„ÄÇÊü•Áúã @xref{Computed Regexps}ÔºåÂèØ‰ª•‰∫ÜËß£Âà∞‰∏§ÁßçÊñπÂºè‰πãÈó¥‰∏çÂêåÁöÑËÆ®ËÆ∫Ôºå‰ª•ÂèäÂ¶Ç‰ΩïÊù•ÂÜôÂá∫Ê≠£Á°ÆÁöÑÁ®ãÂ∫èÁöÑ‰∏Ä‰∫õÊèêÁ§∫„ÄÇ

‰∏§‰∏™ÂèÇÊï∞ÁöÑÈ°∫Â∫èÔºå‰∏éÂ§ßÂ§öÊï∞ÁöÑÂÖ∂‰ªñÁî®Ê≠£ÂàôË°®ËææÂºèÂ§ÑÁêÜÂ≠ó‰∏≤ÂáΩÊï∞ÁöÑÁõ∏ÂèçÔºåÊØîÂ¶Ç @code{sub()} Ôºå@code{gsub()}„ÄÇ
ËÆ∞‰Ωè @code{match()} ÂáΩÊï∞ÁöÑÂèÇÊï∞È°∫Â∫è‰∏é @samp{~} Êìç‰ΩúÁ¨¶ÊòØ‰∏ÄÊ†∑ÁöÑÔºö@samp{@var{string} ~ @var{regexp}}

@cindex @code{RSTART} variable, @code{match()} function and
@cindex @code{RLENGTH} variable, @code{match()} function and
@cindex @code{match()} function, @code{RSTART}/@code{RLENGTH} variables
@code{match()} ÂáΩÊï∞‰ºöËÆæÁΩÆÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{RSTART} ‰∏∫Á¥¢ÂºïÔºåÂêåÊó∂‰πüËÆæÁΩÆÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{RLENGTH} ‰∏∫ÂåπÈÖçÂ≠ê‰∏≤ÁöÑÈïøÂ∫¶„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊâæÂà∞ÂåπÈÖçÔºå@code{RSTART} ÁöÑÂÄºË¢´ËÆæÁΩÆÊàê 0ÔºåËÄå @code{RLENGTH} ÁöÑÂÄº‰∏∫ @minus{}1„ÄÇ

Â¶ÇÔºö

@example
@c file eg/misc/findpat.awk
@{
    if ($1 == "FIND")
        regex = $2
    else @{
        where = match($0, regex)
        if (where != 0)
            print "Match of", regex, "found at", where, "in", $0
       @}
@}
@c endfile
@end example

@noindent
Ëøô‰∏™Á®ãÂ∫èÊü•ÊâæÈÇ£‰∫õÂåπÈÖçÂ≠òÂÇ®Âú®ÂèòÈáè @code{regex} ‰∏≠ÁöÑÊ≠£ÂàôË°®ËææÂºèÁöÑË°å„ÄÇ
Ëøô‰∏™Ê≠£ÂàôË°®ËææÂºèÂèØ‰ª•Ë¢´Êõ¥Êîπ„ÄÇÂ¶ÇÊûúË°å‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÂçïËØçÊòØ @samp{FIND} ÔºåÂàô @code{regex} ‰ºöË¢´ÊîπÊàêÈÇ£‰∏ÄË°åÁöÑÁ¨¨‰∫å‰∏™ÂçïËØç„ÄÇ
ÊâÄ‰ª•ÔºåÂÅáÂ¶ÇÊúâ‰∏ãÈù¢ÁöÑÊï∞ÊçÆÔºö

@example
@c file eg/misc/findpat.data
FIND ru+n
My program runs
but not very quickly
FIND Melvin
JF+KM
This line is property of Reality Engineering Co.
Melvin was here.
@c endfile
@end example

@noindent
Âàô @command{awk} ‰ºöÊâìÂç∞Ôºö

@example
Match of ru+n found at 12 in My program runs
Match of Melvin found at 1 in Melvin was here.
@end example

@cindex differences in @command{awk} and @command{gawk}, @code{match()} function
Â¶ÇÊûúÊèê‰æõ‰∫Ü @var{array} ÂèÇÊï∞ÔºåÂÆÉÈ¶ñÂÖà‰ºöË¢´Ê∏ÖÈô§ÔºåÁÑ∂ÂêéÊï∞ÁªÑ @var{array} ÁöÑÁ¨¨ 0 ‰∏™ÂÖÉÁ¥†‰ºöË¢´ËÆæÁΩÆ‰∏∫ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºè @var{regexp} ÁöÑÊï¥‰∏™Â≠ó‰∏≤ @var{string}„ÄÇ
Â¶ÇÊûú @var{regexp} ÂåÖÂê´‰∫ÜÊã¨Âè∑ÔºåÊï∞ÁªÑ @var{array} ÁöÑÊï¥Êï∞Á¥¢ÂºïÂÖÉÁ¥†‰ºöË¢´ËÆæÁΩÆÊàêÂåπÈÖçÁõ∏Â∫îÂåπÈÖçÊã¨Âè∑Â≠êË°®ËææÂºèÁöÑÂ≠ó‰∏≤ @var{string} ÁöÑÈÉ®ÂàÜ„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{echo foooobazbarrrrr |}
> @kbd{gawk '@{ match($0, /(fo+).+(bar*)/, arr)}
>         @kbd{print arr[1], arr[2] @}'}
@print{} foooo barrrrr
@end example

Âè¶Â§ñÔºåÂ§öÁª¥‰∏ãÊ†á‰πüÂèØÁî®Êù•Êèê‰æõ start Á¥¢Âºï‰∏éÊØè‰∏™ÂåπÈÖçÂ≠êË°®ËææÂºèÁöÑÈïøÂ∫¶ length Á¥¢ÂºïÔºö

@example
$ @kbd{echo foooobazbarrrrr |}
> @kbd{gawk '@{ match($0, /(fo+).+(bar*)/, arr)}
>           @kbd{print arr[1], arr[2]}
>           @kbd{print arr[1, "start"], arr[1, "length"]}
>           @kbd{print arr[2, "start"], arr[2, "length"]}
> @kbd{@}'}
@print{} foooo barrrrr
@print{} 1 5
@print{} 9 7
@end example

ÊúâÂèØËÉΩÊ≤°Êúâ‰∏∫ÊØè‰∏Ä‰∏™Êã¨Âè∑Â≠êË°®ËææÂºèÊèê‰æõ start ‰ª•Âèä index ÁöÑ‰∏ãÊ†áÔºåÂõ†‰∏∫ÊúâÂèØËÉΩÂπ∂‰∏çÊòØÊâÄÊúâÈÉΩÂåπÈÖçÔºõ
ÊâÄ‰ª•ÔºåÂÆÉ‰ª¨Â∫îËØ•Áî® @code{in} Êìç‰ΩúÁ¨¶Êù•ËøõË°åÊµãËØïÔºàÊü•Áúã @ref{Reference to Elements}Ôºâ„ÄÇ

@cindex troubleshooting, @code{match()} function
@code{match()} ÁöÑ @var{array} ÂèÇÊï∞ÊòØ @command{gawk} Êâ©Â±ï„ÄÇÂú®ÂÖºÂÆπÊ®°Âºè‰∏≠ÔºàÊü•Áúã @ref{Options}ÔºâÔºå‰ΩøÁî®Á¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Ëá¥‰ΩøÈîôËØØ„ÄÇ

@item @code{patsplit(@var{string}, @var{array}} [@code{, @var{fieldpat}} [@code{, @var{seps}} ] ]@code{) #}
@cindexgawkfunc{patsplit}
@cindex split string into array
Â∞Ü @var{string} Áî® @var{fieldpat} ÂÆö‰πâÁöÑÂàÜÈöîÁ¨¶ÂàÜÂâ≤ÊàêÁâáÔºåÂπ∂Â≠òÂÇ®Âú® @var{array} ‰∏≠Ôºå
Âπ∂Â∞ÜÂ≠ó‰∏≤‰∏≠ÂàÜÈöîÁ¨¶Â≠òÂÇ®Âú® @var{seps} Êï∞ÁªÑ‰∏≠„ÄÇ
Á¨¨‰∏ÄÂùóÁâáÂ≠òÂÇ®Âú® @code{@var{array}[1]} ‰∏≠ÔºåÁ¨¨‰∫åÁâáÂ≠òÂÇ®Âú® @code{@var{array}[2]} ‰∏≠Ôºå‰æùÊ≠§Á±ªÊé®„ÄÇ
Á¨¨‰∏â‰∏™ÂèÇÊï∞ @var{fieldpat} ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊèèËø∞Âú® @var{string} ‰∏≠ÁöÑÂüüÔºàÂ∞±Â•ΩÂÉè @code{FPAT} ÊòØ‰∏Ä‰∏™ÊèèËø∞ËæìÂÖ•ËÆ∞ÂΩïÂüüÁöÑÊ≠£ÂàôË°®ËææÂºèÔºâ„ÄÇÂÆÉÂç≥ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤„ÄÇ
Â¶ÇÊûúÁúÅÁï•‰∫Ü @var{fieldpat}ÔºåÂàô‰ºö‰ΩøÁî® @code{FPAT} ÁöÑÂÄº„ÄÇ
@code{patsplit()} ËøîÂõûÂàõÂª∫ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞„ÄÇ@code{@var{seps}[@var{i}]} ÊòØÂú® @code{@var{array}[@var{i}]} ‰∏é @code{@var{array}[@var{i}+1]} ‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶„ÄÇÊâÄÊúâÂâçÂØºÁöÑÂàÜÈöîÁ¨¶ÈÉΩÂ≠òÂÇ®Âú® @code{@var{seps}[0]} ‰∏≠„ÄÇ

@code{patsplit()} ÂáΩÊï∞Â∞ÜÂ≠óÁ¨¶‰∏≤ÂàÜÂâ≤‰∏∫ÁâáÔºåÂÖ∂ÊñπÂºèÊòØ‰∏éÁî® @code{FPAT} Â∞ÜËæìÂÖ•Ë°åÂàÜÂâ≤ÊàêÂüüÁöÑÊñπÂºèÁõ∏‰ººÔºàÊü•Áúã @pxref{Splitting By Content}Ôºâ„ÄÇ

Âú®ÂàÜÂâ≤Â≠óÁ¨¶‰∏≤‰πãÂâçÔºå@code{patsplit()} ‰ºöÂà†Èô§Âú® @var{array} ‰∏é @var{seps} ‰∏≠Â∑≤ÁªèÂ≠òÂú®ÁöÑÂÖÉÁ¥†„ÄÇ

@item @code{split(@var{string}, @var{array}} [@code{, @var{fieldsep}} [@code{, @var{seps}} ] ]@code{)}
@cindexawkfunc{split}
Â∞Ü @var{string} Áî® @var{fieldsep} ÂÆö‰πâÁöÑÂàÜÈöîÁ¨¶ÂàÜÂâ≤ÊàêÁâáÔºåÂπ∂Â≠òÂÇ®Âú® @var{array} ‰∏≠ÔºåÂπ∂Â∞ÜÂ≠ó‰∏≤‰∏≠ÂàÜÈöîÁ¨¶Â≠òÂÇ®Âú® @var{seps} ‰∏≠„ÄÇ
Á¨¨‰∏ÄÂùóÁâáÂ≠òÂÇ®Âú® @code{@var{array}[1]} ‰∏≠ÔºåÁ¨¨‰∫åÁâáÂ≠òÂÇ®Âú® @code{@var{array}[1]} ‰∏≠Ôºå‰æùÊ≠§Á±ªÊé®„ÄÇ
Á¨¨‰∏â‰∏™ÂèÇÊï∞ @var{fieldsep} ÁöÑÂ≠ó‰∏≤ÂÄºÊòØ‰∏Ä‰∏™Áî®Êù•ÊèèËø∞Âú®‰ΩïÁâáÂàÜÂâ≤ @var{string} ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºàÊ≠£Â¶Ç @code{FS} ÂèØ‰ª•‰∏∫Ê≠£ÂàôË°®ËææÂºèÊù•ÊèèËø∞Âú®‰ΩïÂ§ÑÊù•ÂàÜÂâ≤ËæìÂÖ•ËÆ∞ÂΩï‰∏ÄÊ†∑Ôºâ„ÄÇ
Â¶ÇÊûú @var{fieldsep} Ë¢´ÁúÅÁï•‰∫ÜÔºåÂàô‰ΩøÁî® @code{FS} ÁöÑÂÄº„ÄÇ@code{split()} ËøîÂõûË¢´ÂàõÂª∫ÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇ@var{seps} ÊòØ @command{gawk} Êâ©Â±ïÔºå@code{@var{seps}[@var{i}]} ÊòØÂú® @code{@var{array}[@var{i}]} ‰∏é @code{@var{array}[@var{i}+1]} ‰πãÈó¥ÁöÑÂàÜÈöîÁ¨¶„ÄÇ
Â¶ÇÊûú @var{fieldsep} ÊòØ‰∏Ä‰∏™Á©∫Ê†ºÔºåÂàôÂâçÂØºÁöÑÁ©∫Ê†º‰ºöÂÖ®ÈÉ®Â≠òÂÇ® @code{@var{seps}[0]} ‰∏≠ÔºåËÄåÂêéÁºÄÁöÑÁ©∫Ê†º‰ºöÂ≠òÂÇ®Âú® @code{@var{seps}[@var{n}]} ‰∏≠Ôºå
ÂÖ∂‰∏≠ @var{n} ÊòØ @code{split()} ËøîÂõûÁöÑÂÄºÔºàÂç≥ @var{array} Êï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†‰∏™Êï∞Ôºâ„ÄÇ

@code{split()} ÂáΩÊï∞Â∞ÜÂ≠ó‰∏≤ÂàÜÂâ≤ÊàêÁâáÁöÑÊñπÂºè‰∏éÂ∞ÜËæìÂÖ•Ë°åÂàÜÂâ≤ÊàêÂüüÁöÑÊñπÂºèÁ±ª‰ºº„ÄÇÊØîÂ¶ÇÔºö

@example
split("cul-de-sac", a, "-", seps)
@end example

@noindent
@cindex strings splitting, example
Â∞ÜÂ≠ó‰∏≤ @code{"cul-de-sac"} Áî® @samp{-} ÂàÜÂâ≤Êàê‰∏â‰∏™Âüü„ÄÇÂÆÉÂ∞ÜÊï∞ÁªÑ @code{a} ÁöÑÂÜÖÂÆπËÆæÁΩÆÊàêÂ¶Ç‰∏ãÔºö

@example
a[1] = "cul"
a[2] = "de"
a[3] = "sac"
@end example

ÂêåÊó∂ËÆæÁΩÆÊï∞ÁªÑ @code{seps} ÁöÑÂÄº‰∏∫Ôºö

@example
seps[1] = "-"
seps[2] = "-"
@end example

@noindent
Ë∞ÉÁî® @code{split()} ÁöÑËøîÂõûÂÄº‰∏∫ 3„ÄÇ

@cindex differences in @command{awk} and @command{gawk}, @code{split()} function
ÈöèÁùÄËæìÂÖ•ÁöÑÂüüÂàÜÂâ≤ÔºåÂΩì @var{fieldsep} ÁöÑÂÄº‰∏∫ @w{@code{" "}} Êó∂Ôºå
ÂâçÁºÄÂíåÂêéÁºÄÁöÑÁ©∫Ê†ºÈÉΩ‰ºöÂú®ËµãÂÄºÁªôÊï∞ÁªÑ @var{array} ‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑÊó∂ÂÄôË¢´ÂøΩÁï•Ôºå‰ΩÜÊòØÂú® @var{seps} ‰∏≠‰∏ç‰ºöË¢´ÂøΩÁï•Ôºå@var{array} Êï∞ÁªÑÂÖÉÁ¥†ÊòØyouËøûÁª≠ÁöÑÁ©∫Ê†ºÂàÜÂâ≤„ÄÇ
ÂêåÊó∂ÔºåÈöèÁùÄËæìÂÖ•ËÆ∞ÂΩïÁöÑÂàÜÂâ≤ÔºåÂ¶ÇÊûú @var{fieldsep} ÊòØ‰∏Ä‰∏™Á©∫‰∏≤ÔºåÂú®Â≠ó‰∏≤‰∏≠ÁöÑÊØè‰∏Ä‰∏™Â≠óÁ¨¶ÈÉΩÂ∞ÜÂàÜÂâ≤Âà∞Êï∞ÁªÑÁöÑÂÖÉÁ¥†‰∏≠„ÄÇ@value{COMMONEXT}

‰ΩÜÊòØË¶ÅÊ≥®ÊÑèÔºå@code{RS} ÁöÑÂÄºÂØπ @code{split()} ÂáΩÊï∞ÁöÑÂ∑•‰ΩúÊ≤°ÊúâÂΩ±Âìç„ÄÇÂ∞±ÁÆóÊòØ @samp{RS = ""} ‰ºöÂØºËá¥Êç¢Ë°åÁ¨¶Êàê‰∏∫ÂüüÂàÜÂâ≤Á¨¶ÔºåËøô‰πü‰∏ç‰ºöÂΩ±Âìç @code{split()} ÂàÜÂâ≤Â≠ó‰∏≤ÁöÑÊñπÂºè„ÄÇ

@cindex dark corner, @code{split()} function
Áé∞‰ª£ÁöÑ @command{awk} ÂÆûÁé∞ÁâàÊú¨ÔºåÂåÖÊã¨ @command{gawk}ÔºåÂÖÅËÆ∏Á¨¨‰∏â‰∏™ÂèÇÊï∞‰∏∫Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà@w{@code{/}@dots{}@code{/}}ÔºâÔºå‰πüÂèØ‰ª•ÊòØ‰∏ÄÂ≠ó‰∏≤„ÄÇ
POSIX Ê†áÂáÜÂÖÅËÆ∏ËøôÊ†∑ÁöÑÂèÇÊï∞„ÄÇÊü•Áúã @xref{Computed Regexps}ÔºåÂèØ‰∫ÜËß£‰ΩøÁî®Â≠ó‰∏≤Â∏∏Èáè‰∏éÊ≠£ÂàôË°®ËææÂºè‰πãÈó¥ÁöÑÂ∏∏ÈáèÔºåÂπ∂Ëé∑Âèñ‰∏Ä‰∫õÂ¶Ç‰ΩïÊ≠£Á°ÆÂú∞ÂÜôÁ®ãÂ∫èÁöÑÊèêÁ§∫„ÄÇ

Âú®ÂàÜÂâ≤Â≠óÁ¨¶‰∏≤ÂâçÔºå@code{split()} ‰ºöÂà†Èô§Âú®Êï∞ÁªÑ @var{array} ‰∏é @var{seps} ‰∏≠Â∑≤ÁªèÂ≠òÂú®ÁöÑÂÖÉÁ¥†„ÄÇ

Â¶ÇÊûú @var{string} ‰∏∫Á©∫ÔºåÂàôÊï∞ÁªÑÂ∞±‰∏ç‰ºöÊúâÂÖÉÁ¥†„ÄÇÔºàÊâÄ‰ª•ËøôÊòØ‰∏Ä‰∏™ÂèØÁßªÊ§çÁöÑ‰ª•‰∏Ä‰∏™ËØ≠Âè•Êù•Âà†Èô§Êï¥‰∏™Êï∞ÁªÑÁöÑÊñπÊ≥ï„ÄÇÊü•Áúã @xref{Delete}„ÄÇÔºâ

Â¶ÇÊûú @var{string} Ê≤°ÊúâÂåπÈÖç @var{fieldsep}Ôºà‰ΩÜ‰∏çÊòØÁ©∫ÔºâÔºåÂàô @var{array} Âè™‰ºöÊúâ‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÂÖÉÁ¥†ÁöÑÂÄºÂ∞±ÊòØÂéüÊù•ÁöÑÂ≠ó‰∏≤ @var{string}„ÄÇ

Âú® POSIX Ê®°Âºè‰∏ãÔºàÊü•Áúã @ref{Options}ÔºâÔºåÁ¨¨Âõõ‰∏™ÂèÇÊï∞ÊòØ‰∏çÂÖÅËÆ∏ÁöÑ„ÄÇ

@item @code{sprintf(@var{format}, @var{expression1}, @dots{})}
@cindexawkfunc{sprintf}
@cindex formatting strings
ËøîÂõû @code{printf} ÈááÁî®Áõ∏ÂêåÁöÑÂèÇÊï∞Êó∂ÁöÑËæìÂá∫Ôºà‰ΩÜÊòØ‰∏çËæìÂá∫ÔºâÁöÑÂ≠ó‰∏≤„ÄÇÔºàÊü•Áúã @pxref{Printf}Ôºâ„ÄÇ‰æãÂ¶ÇÔºö

@example
pival = sprintf("pi = %.2f (approx.)", 22/7)
@end example

@noindent
Â∞ÜÂ≠ó‰∏≤ @w{@samp{pi = 3.14 (approx.)}} ËµãÂÄºÁªôÂèòÈáè @code{pival}„ÄÇ

@cindexgawkfunc{strtonum}
@cindex convert string to number
@item @code{strtonum(@var{str}) #}
Ê£ÄÊü• @var{str} Âπ∂ËøîÂõûÂÆÉÁöÑÊï∞ÂÄºÂÄº„ÄÇÂ¶ÇÊûú @var{str} ‰ª• @samp{0} ÂºÄÂ§¥ÔºåÂàô @code{strtonum()} ‰ºöÂÅáËÆæ @var{str} ÊòØ‰∏Ä‰∏™ÂÖ´ËøõÂà∂Êï∞„ÄÇ
Â¶ÇÊûú @var{str} ÊòØ‰ª• @samp{0x} ÂºÄÂ§¥ÔºåÊàñËÄÖ @samp{0X} ÂºÄÂ§¥Ôºå@code{strtonum()} ‰ºöÂÅáËÆæ @var{str} ÊòØ‰∏Ä‰∏™ÂçÅÂÖ≠ËøõÂà∂Êï∞„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{echo 0x11 |}
> @kbd{gawk '@{ printf "%d\n", strtonum($1) @}'}
@print{} 17
@end example

‰ΩøÁî® @code{strtonum()} ÂáΩÊï∞‰∏éÁªôÂ≠ó‰∏≤Ê∑ªÂä†‰∏Ä‰∏™Èõ∂‰∏çÂêåÔºåËá™Âä®Âº∫Âà∂ÊÄßÂú∞Â∞ÜÂ≠ó‰∏≤ËΩ¨Êç¢‰∏∫Êï∞ÂÄºÂè™‰ºöÂú®ÂçÅËøõÂà∂Êï∞‰∏ãÊúâÊïàÔºåÂØπ‰∫éÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂ÈÉΩÊòØÊó†ÊïàÁöÑ„ÄÇ 
@footnote{Èô§Èùû‰Ω†‰ΩøÁî®‰∫Ü @option{--non-decimal-data} ÈÄâÈ°πÔºå‰ΩÜÊàë‰ª¨‰∏çÂª∫ËÆÆËøô‰πà‰ΩøÁî®„ÄÇÊü•Áúã @xref{Nondecimal Data}ÔºåÂèñÂæóÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ}

ÂêåÊó∂‰πüË¶ÅÊ≥®ÊÑè @code{strtonum()} ‰ºö‰ΩøÁî®ÂΩìÂâçÁöÑÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÁî®‰∫éËØÜÂà´Êï∞ÂÄºÁöÑÂçÅËøõÂà∂‰ΩçÔºàÊü•Áúã @pxref{Locales}Ôºâ„ÄÇ

@item @code{sub(@var{regexp}, @var{replacement}} [@code{, @var{target}}]@code{)}
@cindexawkfunc{sub}
@cindex replace in string
Âú®Ë¢´ÂΩìÊàêÂ≠ó‰∏≤ÁöÑ @var{target} ‰∏≠ÊêúÁ¥¢ÂåπÈÖçÊ≠£ÂàôË°®ËææÂºè @var{regexp} ÁöÑÊúÄÂ∑¶ÊúÄÈïøÁöÑÂåπÈÖçÂ≠ê‰∏≤„ÄÇÂπ∂Áî® @var{replacement} Êù•ËßÑÂàôÂåπÈÖçÁöÑÂ≠ê‰∏≤„ÄÇ
Ë¢´‰øÆÊîπËøáÁöÑÂ≠ó‰∏≤Êàê‰∏∫ @var{target} ÁöÑÊñ∞ÂÄº„ÄÇËøîÂõûÊõøÊç¢ÁöÑÊ¨°Êï∞Ôºà0 ÊàñËÄÖ 1Ôºâ„ÄÇ

@var{regexp} ÂèÇÊï∞Âç≥ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºà@code{/}@dots{}@code{/}ÔºâÔºå‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤Â∏∏ÈáèÔºà@code{"}@dots{}@code{"}Ôºâ„ÄÇÂØπ‰∫éÂêéËÄÖÔºåÂ≠ó‰∏≤‰ºöË¢´ÂΩìÈù¢Êàê‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊù•ËøõË°åÂåπÈÖç„ÄÇÊü•Áúã @xref{Computed Regexps}Ôºå‰ª•‰∫ÜËß£Ëøô‰∏§ÁßçÂΩ¢Âºè‰πãÈó¥ÁöÑÂ∑ÆÂºÇÔºå‰ª•Âèä‰∫ÜËß£‰∏Ä‰∫õÂ¶Ç‰ΩïÊ≠£Á°ÆÂú∞ÂÜôËøôÊ†∑ÁöÑÁ®ãÂ∫èÁöÑÊèêÁ§∫„ÄÇ

Ëøô‰∏™ÂáΩÊï∞ÈùûÂ∏∏ÁâπÂà´ÔºåÊòØÂõ†‰∏∫ @var{target} Âπ∂‰∏çÊòØÁÆÄÂçïÂú∞‰ΩøÁî®Êù•ËøõË°åËÆ°ÁÆóÂá∫‰∏Ä‰∏™ÂÄºÔºå‰πü‰∏çÂÉèÂÖ∂‰ªñÁöÑË°®ËææÂºè‰∏ÄÊ†∑‚Äî‚ÄîÂÆÉÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÂèòÈáèÔºåÂüüÊàñËÄÖ‰∏Ä‰∏™Êï∞ÁªÑÂÖÉÁ¥†ÔºåÂõ†Ê≠§ @code{sub()} ÂèØ‰ª•Â∞Ü‰øÆÊîπÁöÑÂÄºÂ≠òÂú®ÈÇ£‰∏™Âú∞Êñπ„ÄÇÂ¶ÇÊûúËøô‰∏™ÂèÇÊï∞Ë¢´ÁúÅÁï•‰∫ÜÔºåÂàôÈªòËÆ§ÁöÑÂÄº‰ºö‰ΩøÁî® @code{$0}„ÄÇ
@footnote{Ê≥®ÊÑèËøôÊÑèÂë≥ÁùÄÈÇ£Êù°ËÆ∞ÂΩïÈ¶ñÂÖà‰ºö‰ΩøÁî® @code{OFS} Êù•ÈáçÊñ∞ÁîüÊàêÔºåÂõ†‰∏∫ÊúâÂüüÂ∑≤ÁªèË¢´ÊîπÂèò‰∫ÜÔºåÂπ∂‰∏îÂú®ÊõøÊç¢‰πãÂêéÔºåÂüü‰ºöÊõ¥Êñ∞ÔºåÂ∞±ÁÆóÊìç‰ΩúÊòØ‰∏Ä‰∏™‚Äúno-op‚ÄùÔºå‰æãÂ¶Ç @samp{sub(/^/, "")}„ÄÇ}
‰æãÂ¶ÇÔºö

@example
str = "water, water, everywhere"
sub(/at/, "ith", str)
@end example

@noindent
ÈÄöËøáÂ∞ÜÂá∫Áé∞ @samp{at} ÁöÑÂú∞ÊñπÊõøÊç¢Êàê @samp{ith} Êù•Â∞Ü @code{str} ËÆæÁΩÆÊàê @w{@samp{wither, water, everywhere}}„ÄÇ

Â¶ÇÊûúÁâπÊÆäÂ≠óÁ¨¶ @samp{&} Âá∫Áé∞Âú® @var{replacement} ‰∏≠ÔºåÂÆÉÂ∞±Ë°®Á§∫ÂåπÈÖç @var{regexp} ÁöÑÁ≤æÁ°ÆÂ≠ê‰∏≤„ÄÇÔºàÂ¶ÇÊûú @var{regexp} ÂèØ‰ª•ÂåπÈÖç 1 Âà∞Â§ö‰∏™‰∏≤ÔºåÂàôÁ≤æÁ°ÆÁöÑÂåπÈÖç‰∏≤ÂèØËÉΩ‰∏çÂêå„ÄÇÔºâ‰æãÂ¶ÇÔºö

@example
@{ sub(/candidate/, "& and his wife"); print @}
@end example

@noindent
‰ºöÂ∞ÜËæìÂÖ•ÁöÑË°å‰∏≠Âá∫Áé∞ÁöÑÁ¨¨‰∏Ä‰∏™ @samp{candidate} ÊõøÊç¢Êàê @samp{candidate and his wife} „ÄÇ‰∏ãÈù¢ÊòØÂè¶Â§ñ‰∏Ä‰∏™‰æãÂ≠êÔºö

@example
$ @kbd{awk 'BEGIN @{}
>         @kbd{str = "daabaaa"}
>         @kbd{sub(/a+/, "C&C", str)}
>         @kbd{print str}
> @kbd{@}'}
@print{} dCaaCbaaa
@end example

@noindent
ËøôÈáåÊòæÁ§∫‰∫Ü @samp{&} ÂèØ‰ª•Ë°®Á§∫‰∏Ä‰∏™ÈùûÂ∏∏ÈáèÁöÑÂ≠ó‰∏≤Ôºå‰πüËØ¥Êòé‰∫ÜÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÁöÑÊúÄÂ∑¶ÊúÄÈïøËßÑÂàôÁöÑÂê´‰πâÔºàÊü•Áúã @pxref{Leftmost Longest}Ôºâ„ÄÇ

Ëøô‰∏™ÁâπÊÆäÂ≠óÁ¨¶ @samp{&} ÁöÑÊïàÊûúÂèØ‰ª•Ë¢´ÂÖ≥Èó≠ÔºåÂè™ÈúÄË¶ÅÂú®Â≠ó‰∏≤‰∏≠Ëøô‰∏™Â≠óÁ¨¶ÂâçÂä†‰∏Ä‰∏™ÂèçÊñúÊù†Âç≥ÂèØ„ÄÇÈÄöÂ∏∏Ôºå‰∏∫‰∫ÜÊèíÂÖ•‰∏Ä‰∏™ÂèçÊñúÊù†Âà∞Â≠ó‰∏≤‰∏≠Ôºå‰Ω†ÂøÖÈ°ªÂÜô‰∏§‰∏™ÂèçÊñúÊù†„ÄÇÂõ†Ê≠§Âú®Â≠ó‰∏≤Â∏∏Èáè‰∏≠Ë¶ÅÂÜô @samp{\\&} Êù•Âú®ÊõøÊç¢ÊñáÊú¨‰∏≠ÁîüÊàê‰∏Ä‰∏™Â≠óÈù¢ÁöÑ @samp{&} Â≠óÁ¨¶„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÂ±ïÁ§∫‰∫ÜÂ¶Ç‰ΩïÊù•Ë°å‰∏≠Â∞ÜÁ¨¨‰∏Ä‰∏™ @samp{|} ÊõøÊç¢Êàê @samp{&} Ôºö

@example
@{ sub(/\|/, "\\&"); print @}
@end example

@cindex @code{sub()} function, arguments of
@cindex @code{gsub()} function, arguments of
Â¶Ç‰∏äÈù¢ÊâÄÊèêÂà∞ÁöÑÔºå@code{sub()} ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÂèòÈáèÔºåÂüüÊàñËÄÖÊï∞ÁªÑÂÖÉÁ¥†„ÄÇÊüê‰∫õÁâàÊú¨ÁöÑ @command{awk} ÂÖÅËÆ∏Á¨¨‰∏â‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºåËøô‰∏™Ë°®ËææÂºè‰∏çÊòØ‰∏™Â∑¶‰º†„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@code{sub()} ‰æùÁÑ∂‰ºöÊêúÁ¥¢Ê®°ÂºèÂπ∂ËøîÂõû 0 ÊàñËÄÖ 1Ôºå‰ΩÜÊòØÊõøÊç¢ÁöÑÁªìÊûú‰ºöË¢´‰∏¢ÂºÉÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâÔºåËÄå‰∏ç‰ºöÂèëÁîüÊõøÊç¢„ÄÇËøôÁßçÁâàÊú¨ÁöÑ @command{awk} Êé•Âèó‰∏ãÈù¢ËøôÊ†∑ÁöÑË°®ËææÂºèÔºö

@example
sub(/USA/, "United States", "the USA and Canada")
@end example

@noindent
@cindex troubleshooting, @code{gsub()}/@code{sub()} functions
‰∏∫‰∫ÜÂéÜÂè≤ÁöÑÂÖºÂÆπÔºå@command{gawk} ‰ºöÊéàÂèóËøôÊ†∑ÁöÑÈîôËØØ‰ª£Á†Å„ÄÇ‰ΩÜÊòØ‰ΩøÁî®‰ªª‰Ωï‰∏çÂèØÊõ¥ÊîπÁöÑÂØπË±°‰Ωú‰∏∫Á¨¨‰∏â‰∏™ÂèÇÊï∞Ôºå‰ºöÂØºËá¥Ëá¥ÂëΩÈîôËØØÔºå‰Ω†ÁöÑÁ®ãÂ∫è‰πüÊ≤°ÂäûÊ≥ïÊâßË°å‰∏ãÂéª„ÄÇ

ÊúÄÂêéÔºåÂ¶ÇÊûú @var{regexp} ‰∏çÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÔºåÂàôÂÆÉ‰ºöË¢´ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÁÑ∂ÂêéÂÆÉÁöÑÂÄº‰ºöË¢´ÂΩìÊàêÊ≠£ÂàôË°®ËææÂºèÊù•ËøõË°åÂåπÈÖç„ÄÇ

@item @code{substr(@var{string}, @var{start}} [@code{, @var{length}} ]@code{)}
@cindexawkfunc{substr}
@cindex substring
ËøîÂõûÂ≠ó‰∏≠ @var{string} ÁöÑ‰ªé @var{start} ÂºÄÂßãÁöÑÔºå@var{length} Â≠óÁ¨¶ÈïøÂ∫¶ÁöÑÂ≠ê‰∏≤„ÄÇÂ≠ó‰∏≤ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÁºñÂè∑‰∏∫ 1„ÄÇ
@footnote{ËøôÈáå‰∏çÂêå C Âíå C++ÔºåÂú® C Âíå C++ ‰∏≠Á¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÊòØÊï∞Â≠ó 0„ÄÇ}
‰æãÂ¶Ç @code{substr("washington", 5, 3)} ËøîÂõû @code{"ing"}„ÄÇ

Â¶ÇÊûúÊ≤°ÊúâÊèê‰æõ @var{length} ÂèÇÊï∞Ôºå@code{substr()} ÂàôËøîÂõû @var{string} ‰ªé @var{start} Â≠óÁ¨¶Êï∞ÂºÄÂßãÁöÑÂÖ®ÈÉ®ÂêéÈù¢ÁöÑÂ≠ó‰∏≤„ÄÇ
‰æãÂ¶ÇÔºå@code{substr("washington", 5)} ËøîÂõû @code{"ington"}„ÄÇ
Â¶ÇÊûú @var{length} Â§ß‰∫é @var{string} ÂêéÈù¢Ââ©‰∏ãÁöÑÂ≠óÁ¨¶Êï∞ÔºåÂàô‰πü‰ºöËøîÂõûÊï¥‰∏™ÂêéÁºÄÁöÑÂ≠ó‰∏≤ÔºåËøôÂÖ∂‰∏≠ÂåÖÊã¨ @var{start} Â§ÑÁöÑÂ≠óÁ¨¶„ÄÇ

@cindex Brian Kernighan's @command{awk}
Â¶ÇÊûú @var{start} ÁöÑÂÄºÂ∞è‰∫é 1Ôºå@code{substr()} ‰ºöÂ∞ÜÂÖ∂ÂΩì‰∏∫ 1„ÄÇ
ÔºàPOSIX Ê≤°ÊúâÊåáÂÆöËøôÁßçÊÉÖÂÜµ‰∏ãÂ¶Ç‰ΩïÂ§ÑÁêÜÔºöBWK @command{awk} ‰ºöÂ¶Ç‰∏äËøô‰πàÂ§ÑÁêÜÔºå@command{gawk} ‰πüËøô‰πàÂ§ÑÁêÜ„ÄÇÔºâ
Â¶ÇÊûú @var{start} Â§ß‰∫é @var{string} ‰∏≠ÁöÑÂ≠óÁ¨¶Êï∞Ôºå@code{substr()} ËøîÂõûÁ©∫‰∏≤„ÄÇÁõ∏‰ººÁöÑÔºåÂ¶ÇÊûú @var{length} Êèê‰æõ‰∫ÜÔºå‰ΩÜÊòØÂ∞è‰∫éÁ≠â‰∫é 0Ôºå‰πüËøîÂõûÁ©∫‰∏≤„ÄÇ

@cindex troubleshooting, @code{substr()} function
Áî± @code{substr()} ËøîÂõûÁöÑ‰∏≤@emph{‰∏çÂèØ‰ª•}Ë¢´ËµãÂÄº„ÄÇÊâÄ‰ª•ÔºåËØïÂõæÊîπÂèò‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁöÑ‰∏ÄÈÉ®ÂàÜÊòØ‰∏Ä‰∏™ÈîôËØØÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÊâÄÁ§∫ÁöÑÔºö

@example
string = "abcdef"
# try to get "abCDEf", won't work
substr(string, 3, 3) = "CDE"
@end example

@noindent
Â∞Ü @code{substr()} ÁöÑËøîÂõû‰Ωú‰∏∫ @code{sub()} ÊàñËÄÖ @code{gsub()} ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞Ôºå‰πüÊòØÈîôËØØÁöÑÔºö

@example
gsub(/xyz/, "pdq", substr($0, 5, 20))  # WRONG
@end example

@cindex portability, @code{substr()} function
ÔºàÊúâ‰∏Ä‰∫õÂïÜ‰∏öÁâàÊú¨ÁöÑ @command{awk} ‰ºöÊää @code{substr()} ÁöÑËøîÂõû‰Ωú‰∏∫ÂèØËµãÂÄºÁöÑÔºå‰ΩÜÊòØËøô‰πàÂÅöÊòØ‰∏çÂèØÁßªÊ§çÁöÑ„ÄÇÔºâ

Â¶ÇÊûú‰Ω†ÊÉ≥ÊõøÊç¢‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂ∞Ü @code{substr()} ‰∏éÂ≠ó‰∏≤ËøûÊé•‰∏ÄËµ∑‰ΩøÁî®ÔºåÂ¶Ç‰∏ãÈù¢ÁöÑÊñπÂºèÔºö

@example
string = "abcdef"
@dots{}
string = substr(string, 1, 2) "CDE" substr(string, 6)
@end example

@cindex case sensitivity, converting case
@cindex strings, converting letter case
@item @code{tolower(@var{string})}
@cindexawkfunc{tolower}
@cindex convert string to lower case
ËøîÂõû @var{string} ÁöÑÂ§çÊú¨Ôºå‰ΩÜÊòØÂ∞ÜÊâÄÊúâÁöÑÂ§ßÂÜôÂ≠óÊØçÁî®ÂÆÉÂØπÂ∫îÁöÑÂ∞èÂÜôÂ≠óÊØçËøõË°åÊõøÊç¢„ÄÇÈùûÂ≠óÊØçÂ≠óÁ¨¶Âàô‰∏çÂèòÂåñ„ÄÇ‰æãÂ¶Ç @code{tolower("MiXeD cAsE 123")} ËøîÂõû @code{"mixed case 123"}„ÄÇ

@item @code{toupper(@var{string})}
@cindexawkfunc{toupper}
@cindex convert string to upper case
ËøîÂõû @var{string} ÁöÑÂ§çÊú¨Ôºå‰ΩÜÊòØÂ∞ÜÊâÄÊúâÁöÑÂ∞èÂÜôÂ≠óÊØçÁî®ÂÆÉÂØπÂ∫îÁöÑÂ§ßÂÜôÂ≠óÊØçËøõË°åÊõøÊç¢„ÄÇÈùûÂ≠óÊØçÂ≠óÁ¨¶Âàô‰∏çÂèòÂåñ„ÄÇ‰æãÂ¶Ç @code{toupper("MiXeD cAsE 123")} ËøîÂõû @code{"MIXED CASE 123"}„ÄÇ
@end table

@sidebar ÂåπÈÖçÁ©∫‰∏≤
@cindex matching, null strings
@cindex null strings, matching
@cindex @code{*} (asterisk), @code{*} operator, null strings@comma{} matching
@cindex asterisk (@code{*}), @code{*} operator, null strings@comma{} matching

Âú® @command{awk} ‰∏≠Ôºå@samp{*} Êìç‰ΩúÁ¨¶ÂèØ‰ª•ÂåπÈÖçÁ©∫‰∏≤„ÄÇËøôÂØπ‰∫é @code{sub()}Ôºå@code{gsub()} ‰∏é @code{gensub()} ÂáΩÊï∞Â∞§ÂÖ∂ÈáçË¶Å„ÄÇÂ¶ÇÔºö

@example
$ @kbd{echo abc | awk '@{ gsub(/m*/, "X"); print @}'}
@print{} XaXbXcX
@end example

@noindent
Â∞ΩÁÆ°ËøôÊúâ‰∏Ä‰∫õÊÑè‰πâÔºå‰ΩÜÁúãËµ∑Êù•ËøòÊòØËÆ©‰∫∫ÊúâÁÇπÊÉäËÆ∂„ÄÇ
@end sidebar


@node Gory Details
@subsubsection @code{sub()}„ÄÅ@code{gsub()} ‰∏é @code{gensub()} ÂáΩÊï∞‰∏≠ÁöÑ @samp{\} ‰∏é @samp{&} 
@cindex escape processing, @code{gsub()}/@code{gensub()}/@code{sub()} functions
@cindex @code{sub()} function, escape processing
@cindex @code{gsub()} function, escape processing
@cindex @code{gensub()} function (@command{gawk}), escape processing
@cindex @code{\} (backslash), @code{gsub()}/@code{gensub()}/@code{sub()} functions and
@cindex backslash (@code{\}), @code{gsub()}/@code{gensub()}/@code{sub()} functions and
@cindex @code{&} (ampersand), @code{gsub()}/@code{gensub()}/@code{sub()} functions and
@cindex ampersand (@code{&}), @code{gsub()}/@code{gensub()}/@code{sub()} functions and

@quotation Ê≥®ÊÑè
Êú¨Â∞èËäÇÊçÆÊä•ËØ¥ÊòØ‰ºöÈÄ†ÊàêÂ§¥ÁóõÔºåÊúâÂèØËÉΩÁ¨¨‰∏ÄÊ¨°ÈòÖËØªÊó∂ÊÉ≥Ë∑≥Ëøá„ÄÇ
@end quotation

ÂΩì‰ΩøÁî® @code{sub()}Ôºå@code{gsub()} ÊàñËÄÖ @code{gensub()} ÔºåÂπ∂‰∏îËØïÂõæËé∑ÂèñÂ≠óÈù¢ÁöÑÂèçÊñúÊù†‰∏éÊòüÂè∑ÔºåÂπ∂ÊîæÂú®ÊõøÊç¢ÊñáÊú¨‰∏≠Ôºå‰Ω†ÈúÄË¶ÅËÆ∞‰ΩèÔºåÂà∞Â∫ïÊúâÂá†Á∫ß@dfn{ËΩ¨‰πâÂ§ÑÁêÜ}„ÄÇ

È¶ñÂÖàÔºåÊúâ‰∏Ä‰∏™@dfn{ËØçÊ±á}Â±ÇÔºåÂ∞±ÊòØÂΩì @command{awk} ËØªÂèñ‰Ω†ÁöÑÁ®ãÂ∫èÔºåÂπ∂Âª∫Á´ã‰∏Ä‰∏™Ë¶ÅÊâßË°åÁöÑÂÜÖÈÉ®Â§çÊú¨ÁöÑÊó∂ÂÄô„ÄÇÁÑ∂Âêé‰∏Ä‰∏™ÊòØËøêË°åÊó∂Â±ÇÔºåÂ∞±ÊòØÂΩì @command{awk} ÂÆûÈôÖÊâ´ÊèèÊõøÊç¢ÊñáÊú¨‰∏≤Áî®‰∫éÁ°ÆÂÆöÊâÄ‰∫ßÁîüÁöÑÁªìÊûúÁöÑÊó∂ÂÄô„ÄÇ

@cindex Brian Kernighan's @command{awk}
Âú®‰∏§‰∏™Â±Ç‰∏äÔºå@command{awk} ‰ºöÊêúÁ¥¢Â∑≤ÁªèÂÆö‰πâÂ•ΩÁöÑÂèØ‰ª•ÊîæÂú®ÂèçÊñúÊù†‰πãÂêéÁöÑÂ≠óÁ¨¶ÈõÜ„ÄÇÂú®ËØçÊ±áÂ±ÇÔºåÂÆÉ‰ºöÊêúÁ¥¢Âú® @ref{Escape Sequences} ‰∏≠ÂàóÂá∫ÁöÑËΩ¨‰πâÂ∫èÂàó„ÄÇ
ÊâÄ‰ª•ÔºåÂØπÊØè‰∏Ä‰∏™ @command{awk} Âú®ËøêË°åÂ±ÇÂ§ÑÁêÜÁöÑ @samp{\} Ôºå‰Ω†ÂøÖÈ°ªÂú®ËØçÊ±áÂ±ÇËæìÂÖ•‰∏§‰∏™ÂèçÊñúÊù†„ÄÇÂΩìË∑üÂú® @samp{\} ‰πãÂêéÁöÑÂ≠óÁ¨¶‰∏çÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑËΩ¨Êç¢Â∫èÂàóÔºåGWK @command{awk} ‰∏é @command{gawk} ‰∏§ËÄÖÈÉΩÊòØÁÆÄÂçïÂú∞ÁßªÈô§ @samp{\} Âπ∂Â∞Ü‰∏ã‰∏Ä‰∏™Â≠óÁ¨¶ÊîæÂú®Â≠ó‰∏≤‰∏≠„ÄÇ
Âõ†Ê≠§ÔºåÂ¶Ç @code{"a\qb"} ‰ºöË¢´ÂΩìÊàê @code{"aqb"}„ÄÇ

Âú®ËøêË°åÂ±ÇÔºå‰∏çÂêåÁöÑÂáΩÊï∞Âú®Â§ÑÁêÜ @samp{\} ‰∏é @samp{&} Â∫èÂàóÊó∂ÊòØ‰∏çÂêåÁöÑ„ÄÇËøôÁßçÊÉÖÂÜµÂæàÔºàËõãÁñºÔºâÂú∞ÊúâÁÇπÂ§çÊùÇ„ÄÇÁî±‰∫éÂéÜÂè≤ÂéüÂõ†Ôºå@code{sub()} ‰∏é @code{gsub()} ÂáΩÊï∞ÈÉΩÂ∞Ü‰∏§Â≠óÁ¨¶ @samp{\&} Â∫èÂàóÁâπÊÆäÂØπÂæÖÔºåËøô‰∏™Â∫èÂàóÂú®‰∫ßÁîüÁöÑÊñáÊú¨‰∏≠Ë¢´ÊõøÊç¢‰∏∫ @samp{&} „ÄÇ‰ªª‰ΩïÂú® @var{replacement} ‰∏≠ÁöÑÂÖ∂‰ªñÁöÑ‰∏çÂú® @samp{&} ‰πãÂâçÁöÑ @samp{\} ÈÉΩÂéüÊ†∑Âú∞‰º†ÈÄí„ÄÇËøô‰∏™Â∞ÜÂú® @ref{table-sub-escapes} ‰∏≠Ëß£Èáä„ÄÇ

@c Thank to Karl Berry for help with the TeX stuff.
@float Table,table-sub-escapes
@caption{Áî±‰∫éÂéÜÂè≤ÂéüÂõ† @code{sub()} ‰∏é @code{gsub()} Â§ÑÁêÜËΩ¨‰πâÂ∫èÂàóÊÉÖÂÜµ}
@tex
\vbox{\bigskip
% We need more characters for escape and tab ...
\catcode`_ = 0
\catcode`! = 4
% ... since this table has lots of &'s and \'s, so we unspecialize them.
\catcode`\& = \other \catcode`\\ = \other
_halign{_hfil#!_qquad_hfil#!_qquad#_hfil_cr
      ËæìÂÖ•!@code{sub()} ÊâÄËßÅ!@code{sub()} ‰∫ßÁîü_cr
_hrulefill!_hrulefill!_hrulefill_cr
     @code{\&}!       @code{&}!ÂåπÈÖçÁöÑÂ≠ó‰∏≤_cr
    @code{\\&}!      @code{\&}!Â≠óÁ¨¶ @samp{&}_cr
   @code{\\\&}!      @code{\&}!Â≠óÁ¨¶ @samp{&}_cr
  @code{\\\\&}!     @code{\\&}!Â≠óÁ¨¶ @samp{\&}_cr
 @code{\\\\\&}!     @code{\\&}!Â≠óÁ¨¶ @samp{\&}_cr
@code{\\\\\\&}!    @code{\\\&}!Â≠óÁ¨¶ @samp{\\&}_cr
    @code{\\q}!      @code{\q}!Â≠óÁ¨¶ @samp{\q}_cr
}
_bigskip}
@end tex
@ifdocbook
@multitable @columnfractions .20 .20 .60
@headitem ËæìÂÖ• @tab @code{sub()} ÊâÄËßÅ @tab @code{sub()} ÊâÄ‰∫ßÁîü
@item @code{\&}      @tab @code{&}    @tab ÂåπÈÖçÁöÑÂ≠ó‰∏≤
@item @code{\\&}     @tab @code{\&}   @tab Â≠óÁ¨¶ @samp{&}
@item @code{\\\&}    @tab @code{\&}   @tab Â≠óÁ¨¶ @samp{&}
@item @code{\\\\&}   @tab @code{\\&}  @tab Â≠óÁ¨¶ @samp{\&}
@item @code{\\\\\&}  @tab @code{\\&}  @tab Â≠óÁ¨¶ @samp{\&}
@item @code{\\\\\\&} @tab @code{\\\&} @tab Â≠óÁ¨¶ @samp{\\&}
@item @code{\\q}     @tab @code{\q}   @tab Â≠óÁ¨¶ @samp{\q}
@end multitable
@end ifdocbook
@ifnottex
@ifnotdocbook
@display
 ËæìÂÖ•         @code{sub()} ÊâÄËßÅ          @code{sub()} ÊâÄ‰∫ßÁîü
 --------         ----------          ---------------
     @code{\&}              @code{&}            The matched text
    @code{\\&}             @code{\&}            Â≠óÁ¨¶ @samp{&}
   @code{\\\&}             @code{\&}            Â≠óÁ¨¶ @samp{&}
  @code{\\\\&}            @code{\\&}            Â≠óÁ¨¶ @samp{\&}
 @code{\\\\\&}            @code{\\&}            Â≠óÁ¨¶ @samp{\&}
@code{\\\\\\&}           @code{\\\&}            Â≠óÁ¨¶ @samp{\\&}
    @code{\\q}             @code{\q}            Â≠óÁ¨¶ @samp{\q}
@end display
@end ifnotdocbook
@end ifnottex
@end float

@noindent
‰∏äË°®ÊòæÁ§∫‰∫ÜËØçÊ±áÂ±ÇÁöÑÂ§ÑÁêÜÔºåÂú®ÈáåÈù¢Ôºå‰∏Ä‰∏™Â•áÊï∞‰∏™ÁöÑÂèçÊñúÊù†Âú®ËøêË°åÊó∂ÔºåÂ∞±ÂèòÊàê‰∫ÜÂÅ∂Êï∞ÔºåËøô‰∏é @code{sub()} ÁöÑËøêË°åÊó∂ÁöÑÂ§ÑÁêÜ‰∏ÄÊ†∑„ÄÇÔºà‰∏∫‰∫ÜÁÆÄÂçïËµ∑ËßÅÔºåÂêéÈù¢ÁöÑË°®Âè™ÊòæÁ§∫Âú®ËØçÊ±áÂ±ÇËæìÂÖ•ÂÅ∂Êï∞ÁöÑÂèçÊñúÊù†ÁöÑÊÉÖÂΩ¢„ÄÇÔºâ

ÂéÜÂè≤ÊñπÂºèÁöÑÈóÆÈ¢òÊòØÔºåÊ≤°ÊúâÂäûÊ≥ïÂèñÂæóÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÂ≠ó‰∏≤ÁöÑÂ≠óÈù¢ÁöÑ @samp{\} „ÄÇ

POSIX Ê†áÂáÜÁöÑÂá†‰∏™ÁâàÊú¨ÈÉΩÂ∞ùËØïÊù•‰øÆÂ§çËøô‰∏™ÈóÆÈ¢òÔºå‰ΩÜÊòØÈÉΩ‰∏çÊàêÂäü„ÄÇÁªÜËäÇÂú®Ê≠§Êó†ÂÖ≥„ÄÇ

Âú®Êüê‰∏™Êó∂ÂÄôÔºå@command{gawk} ÁöÑÁª¥Êä§ËÄÖÊèê‰∫§‰∫ÜÂª∫ËÆÆÊñáÊú¨ÔºåÂΩ¢Êàê‰∏Ä‰∏™‰øÆËÆ¢ÁâàÊú¨ÁöÑÊ†áÂáÜÔºå‰ª•ÈÄÜËΩ¨Âà∞‰∏éÊúÄÂàùÂ≠òÂú®ÁöÑÂÆûË∑µÊõ¥Âä†Êé•ËøëÁöÑËßÑÂàô‰∏ä„ÄÇÊèê‰∫§ÁöÑËßÑÂàôÂ≠òÂú®ÁâπÊÆäÊÉÖÂΩ¢Ôºå‰ª•ÊúâÂèØËÉΩ‰∫ßÁîüÂú®ÂåπÈÖçÁöÑÊñáÊú¨ÂâçÁöÑ @samp{\}„ÄÇËøô‰∏™Âú® @ref{table-sub-proposed} ‰∏≠ÊòæÁ§∫„ÄÇ

@float Table,table-sub-proposed
@caption{@command{gawk} ÈíàÂØπ @code{sub()} ‰∏éÂèçÊñúÊù†ÁöÑËßÑÂàô}
@tex
\vbox{\bigskip
% We need more characters for escape and tab ...
\catcode`_ = 0
\catcode`! = 4
% ... since this table has lots of &'s and \'s, so we unspecialize them.
\catcode`\& = \other \catcode`\\ = \other
_halign{_hfil#!_qquad_hfil#!_qquad#_hfil_cr
    ËæìÂÖ•!@code{sub()} ÊâÄËßÅ!@code{sub()} ‰∫ßÁîü_cr
_hrulefill!_hrulefill!_hrulefill_cr
@code{\\\\\\&}!     @code{\\\&}!Â≠óÁ¨¶ @samp{\&}_cr
@code{\\\\&}!     @code{\\&}!Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÊñáÊú¨_cr
  @code{\\&}!      @code{\&}!Â≠óÁ¨¶ @samp{&}_cr
  @code{\\q}!      @code{\q}!Â≠óÁ¨¶ @samp{\q}_cr
 @code{\\\\}!      @code{\\}!@code{\\}_cr
}
_bigskip}
@end tex
@ifdocbook
@multitable @columnfractions .20 .20 .60
@headitem ËæìÂÖ• @tab @code{sub()} ÊâÄËßÅ @tab @code{sub()} ‰∫ßÁîü
@item @code{\\\\\\&} @tab @code{\\\&} @tab Â≠óÁ¨¶ @samp{\&}
@item @code{\\\\&}   @tab @code{\\&}  @tab Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÊñáÊú¨
@item @code{\\&}     @tab @code{\&}   @tab Â≠óÁ¨¶ @samp{&}
@item @code{\\q}     @tab @code{\q}   @tab Â≠óÁ¨¶ @samp{\q}
@item @code{\\\\}    @tab @code{\\}   @tab @code{\\}
@end multitable
@end ifdocbook
@ifnottex
@ifnotdocbook
@display
 ËæìÂÖ•         @code{sub()} ÊâÄËßÅ         @code{sub()} ‰∫ßÁîü
 --------         ----------         ---------------
@code{\\\\\\&}           @code{\\\&}            Â≠óÁ¨¶ @samp{\&}
  @code{\\\\&}            @code{\\&}            Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÊñáÊú¨
    @code{\\&}             @code{\&}            Â≠óÁ¨¶ @samp{&}
    @code{\\q}             @code{\q}            Â≠óÁ¨¶ @samp{\q}
   @code{\\\\}             @code{\\}            @code{\\}
@end display
@end ifnotdocbook
@end ifnottex
@end float

ÊÄªÁöÑÊù•ËØ¥ÔºåÂú®ËøêË°åÊó∂ÔºåÁé∞Âú®Êúâ‰∏â‰∏™ÁâπÊÆäÁöÑÂ≠óÁ¨¶Â∫èÂàóÔºà@samp{\\\&}Ôºå@samp{\\&} Âíå @samp{\&}ÔºâÔºåÁî±‰∫éÂéÜÂè≤ÂéüÂõ†Âè™‰ºöÂ≠òÂú®‰∏Ä‰∏™„ÄÇ‰ΩÜÊòØÂú®ÂéÜÂè≤ÊÉÖÂÜµ‰∏ãÔºå@samp{\} Âπ∂‰∏çÊòØËøô‰∏â‰∏™Â∫èÂàóÁöÑ‰∏ÄÈÉ®‰ªΩ‰πüÂπ∂‰∏çÁâπÊÆäÔºåÂπ∂‰ª•Â≠óÁ¨¶Êú¨Ë∫´ËæìÂá∫„ÄÇ

@command{gawk} 3.0 ‰∏é 3.1 ‰ºöÈíàÂØπ @code{sub()} ‰∏é @code{gsub()} Êù•ÂåπÈÖçËøô‰∫õËßÑÂàô„ÄÇPOSIX Ê†áÂáÜÁöÑ‰øÆÊîπË¶ÅÊØîÊúüÊúõÁöÑÊó∂Èó¥ÈïøÂæóÂ§ö„ÄÇÂè¶Â§ñÔºå@command{gawk} ÁöÑÁª¥Êä§ËÄÖÁöÑÂª∫ËÆÆÂú®Ê†áÂáÜÂåñÁöÑËøáÁ®ã‰∏≠‰∏¢Â§±‰∫Ü„ÄÇÊúÄÂêéÁöÑËßÑÂàôÁúãËµ∑Êù•Êõ¥ÁÆÄÂçï„ÄÇÁªìÊûúÈô§‰∫Ü‰∏Ä‰∏™ÊÉÖÂΩ¢Â§ñÈÉΩÁ±ª‰ºº„ÄÇ

@cindex POSIX @command{awk}, functions and, @code{gsub()}/@code{sub()}
POSIX ËßÑÂàôÊèèËø∞ËØ¥ÔºåÂú®ÊõøÊç¢ÊñáÊú¨‰∏≠ÁöÑ @samp{\&} ‰∫ßÁîü‰∏Ä‰∏™ @samp{&}Ôºå@samp{\\} ‰∫ßÁîü‰∏Ä‰∏™Â≠óÈù¢ @samp{\}Ôºå@samp{\} ÂêéÈù¢ÂÜçË∑üÂÖ∂‰ªñÁöÑÂ≠óÁ¨¶ÈÉΩÊ≤°ÊúâÁâπÊÆäÂê´‰πâÔºå@samp{\} ‰ºöË¢´Áõ¥Êé•ÊîæÂà∞ËæìÂá∫‰∏≠„ÄÇËøô‰∫õËßÑÂàôÂú®ÂêéÈù¢ÁöÑ @ref{table-posix-sub}„ÄÇ

@float Table,table-posix-sub
@caption{POSIX ÈíàÂØπ @code{sub()} ‰∏é @code{gsub()} ÁöÑËßÑÂàô}
@tex
\vbox{\bigskip
% We need more characters for escape and tab ...
\catcode`_ = 0
\catcode`! = 4
% ... since this table has lots of &'s and \'s, so we unspecialize them.
\catcode`\& = \other \catcode`\\ = \other
_halign{_hfil#!_qquad_hfil#!_qquad#_hfil_cr
    ËæìÂÖ•!@code{sub()} ÊâÄËßÅ!@code{sub()} ÁîüÊàê_cr
_hrulefill!_hrulefill!_hrulefill_cr
@code{\\\\\\&}!     @code{\\\&}!Â≠óÁ¨¶ @samp{\&}_cr
@code{\\\\&}!     @code{\\&}!Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÂåπÈÖçÊñáÊú¨_cr
  @code{\\&}!      @code{\&}!Â≠óÁ¨¶ @samp{&}_cr
  @code{\\q}!      @code{\q}!Â≠óÁ¨¶ @samp{\q}_cr
 @code{\\\\}!      @code{\\}!@code{\}_cr
}
_bigskip}
@end tex
@ifdocbook
@multitable @columnfractions .20 .20 .60
@headitem ËæìÂÖ• @tab @code{sub()} ÊâÄËßÅ @tab @code{sub()} ÁîüÊàê
@item @code{\\\\\\&} @tab @code{\\\&} @tab Â≠óÁ¨¶ @samp{\&}
@item @code{\\\\&}   @tab @code{\\&}  @tab Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÂåπÈÖçÊñáÊú¨
@item @code{\\&}     @tab @code{\&}   @tab Â≠óÁ¨¶ @samp{&}
@item @code{\\q}     @tab @code{\q}   @tab Â≠óÁ¨¶ @samp{\q}
@item @code{\\\\}    @tab @code{\\}   @tab @code{\}
@end multitable
@end ifdocbook
@ifnottex
@ifnotdocbook
@display
 ËæìÂÖ•         @code{sub()} ÊâÄËßÅ         @code{sub()} ÁîüÊàê
 --------         ----------         ---------------
@code{\\\\\\&}           @code{\\\&}            Â≠óÁ¨¶ @samp{\&}
  @code{\\\\&}            @code{\\&}            Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÂåπÈÖçÊñáÊú¨
    @code{\\&}             @code{\&}            Â≠óÁ¨¶ @samp{&}
    @code{\\q}             @code{\q}            Â≠óÁ¨¶ @samp{\q}
   @code{\\\\}             @code{\\}            @code{\}
@end display
@end ifnotdocbook
@end ifnottex
@end float

ÂîØ‰∏ÄÂèØÊ≥®ÊÑèÁöÑ‰∏çÂêåÁöÑÊÉÖÂΩ¢ÊòØÊúÄÂêé‰∏Ä‰∏™Ôºö@samp{\\\\} Ë¢´ÁúãÊàê @samp{\\} Âπ∂‰∫ßÁîü @samp{\} ÔºåËÄå‰∏çÊòØ @samp{\\} „ÄÇ

‰ªé 3.1.4 @value{PVERSION}ÂºÄÂßãÔºåÂ¶ÇÊûúÊåáÂÆö‰∫Ü @option{--posix} ÈÄâÈ°πÔºå@command{gawk} ÊåâÁÖß POSIX ÁöÑÊ†áÂáÜÊù•ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇÂê¶ÂàôÔºåÂÆÉËøòÊòØ‰ºö‰ΩøÁî®ÊâÄÂª∫ËÆÆÁöÑÊñπÊ°àÔºåÂõ†‰∏∫ÈÇ£ÊòØÂ§öÂπ¥Êù•ÁöÑË°å‰∏∫„ÄÇ

ÂΩìÂèëÂ∏É‰∫Ü 4.0.0 @value{PVERSION}ÂêéÔºå@command{gawk} Áª¥Êä§ËÄÖÂ∞Ü POSIX ËßÑÂàô‰∏∫ÈªòËÆ§ËßÑÂàôÔºåÊâìÁ†¥‰∫Ü 10 Âá†Âπ¥Êù•ÂêéÂêëÂÖºÂÆπÊÄßÁöÑ‰ª∑ÂÄº„ÄÇ
@footnote{ÈÇ£‰∏™‰∫∫ÁúüÊòØÂπºÁ®öÔºåÂ∞ΩÁÆ°Ëøô‰∏™@value{SECTION}‰∏≠Êúâ‰∏Ä‰∏™ÊèêÁ§∫ËØ¥‰∏ã‰∏™‰∏ªË¶ÅÁöÑÁâàÊú¨‰ºöË∑ü POSIX ‰øùÊåÅ‰∏ÄËá¥„ÄÇ}
Êó†È°ªÂ§öËØ¥ÔºåËøô‰∏™ÊòØÈùûÂ∏∏Á≥üÁ≥ïÁöÑ‰∏ªÊÑèÔºåÂΩì 4.0.1 @value{PVERSION}Êó∂Ôºå@command{gawk} ÊÅ¢Â§ç‰∫ÜÂÆÉÁöÑÂéÜÂè≤Ë°å‰∏∫ÔºåÂΩìÊåáÂÆö‰∫Ü @option{--posix} ÈÄâÈ°πÊó∂ÔºåÂàôÂè™ÈÅµÂÆà POSIX ËßÑÂàô„ÄÇ

@code{gensub()} ÁöÑËßÑÂàôÂàôÁõ∏ÂΩìÁÆÄÂçï„ÄÇÂú®ËøêË°åÂ±ÇÔºåÊó†ËÆ∫‰ªÄ‰πàÊó∂ÂÄô @command{gawk} ÁúãÂà∞‰∏Ä‰∏™ @samp{\}ÔºåÂ¶ÇÊûúÂêéÈù¢Ë∑üÁùÄ‰∏Ä‰∏™Êï∞Â≠óÔºåÂàôÂåπÈÖçÁõ∏Â∫îÊã¨Âè∑ÁöÑÂ≠êË°®ËææÂºèÁöÑÊñá‰ª∂Êù•‰∫ßÁîüËæìÂá∫„ÄÇÂê¶ÂàôÔºå‰∏çÁÆ° @samp{\} ÂêéÈù¢Ë∑üÁùÄ‰ªÄ‰πàÂ≠óÁ¨¶ÔºåÂÆÉÈÉΩÂá∫Áé∞Âú®‰∫ßÁîüÁöÑÊñáÊú¨‰∏≠ÔºåËÄå @samp{\} Âàô‰∏çÂá∫Áé∞„ÄÇ
Â¶Ç @ref{table-gensub-escapes} ÊâÄÁ§∫„ÄÇ

@float Table,table-gensub-escapes
@caption{@code{gensub()} ÁöÑËΩ¨‰πâÂ≠óÁ¨¶}
@tex
\vbox{\bigskip
% We need more characters for escape and tab ...
\catcode`_ = 0
\catcode`! = 4
% ... since this table has lots of &'s and \'s, so we unspecialize them.
\catcode`\& = \other \catcode`\\ = \other
_halign{_hfil#!_qquad_hfil#!_qquad#_hfil_cr
    ËæìÂÖ•!@code{gensub()} ÊâÄËßÅ!@code{gensub()} ‰∫ßÁîü_cr
_hrulefill!_hrulefill!_hrulefill_cr
      @code{&}!           @code{&}!ÂåπÈÖçÊñáÊú¨_cr
    @code{\\&}!          @code{\&}!Â≠óÁ¨¶ @samp{&}_cr
   @code{\\\\}!          @code{\\}!Â≠óÁ¨¶ @samp{\}_cr
  @code{\\\\&}!         @code{\\&}!Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÊñáÊú¨
@code{\\\\\\&}!        @code{\\\&}!Â≠óÁ¨¶ @samp{\&}_cr
    @code{\\q}!          @code{\q}!Â≠óÁ¨¶ @samp{q}_cr
}
_bigskip}
@end tex
@ifdocbook
@multitable @columnfractions .20 .20 .60
@headitem ËæìÂÖ• @tab @code{gensub()} ÊâÄËßÅ @tab @code{gensub()} ‰∫ßÁîü
@item @code{&}       @tab @code{&}    @tab ÂåπÈÖçÊñáÊú¨
@item @code{\\&}     @tab @code{\&}   @tab Â≠óÁ¨¶ @samp{&}
@item @code{\\\\}    @tab @code{\\}   @tab Â≠óÁ¨¶ @samp{\}
@item @code{\\\\&}   @tab @code{\\&}  @tab Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÊñáÊú¨
@item @code{\\\\\\&} @tab @code{\\\&} @tab Â≠óÁ¨¶ @samp{\&}
@item @code{\\q}     @tab  @code{\q}  @tab Â≠óÁ¨¶ @samp{q}
@end multitable
@end ifdocbook
@ifnottex
@ifnotdocbook
@display
  ËæìÂÖ•          @code{gensub()} ÊâÄËßÅ         @code{gensub()} ‰∫ßÁîü
  --------          -------------         ------------------
      @code{&}                    @code{&}            ÂåπÈÖçÊñáÊú¨
    @code{\\&}                   @code{\&}            Â≠óÁ¨¶ @samp{&}
   @code{\\\\}                   @code{\\}            Â≠óÁ¨¶ @samp{\}
  @code{\\\\&}                  @code{\\&}            Â≠óÁ¨¶ @samp{\}ÔºåÂêéÈù¢Ë∑üÁùÄÂåπÈÖçÊñáÊú¨
@code{\\\\\\&}                 @code{\\\&}            Â≠óÁ¨¶ @samp{\&}
    @code{\\q}                   @code{\q}            Â≠óÁ¨¶ @samp{q}
@end display
@end ifnotdocbook
@end ifnottex
@end float

Áî±‰∫éËØçÊ±áÂ±Ç‰∏éËøêË°åÂ±ÇÂ§ÑÁêÜÁöÑÂ§çÊùÇÊÄßÔºå‰ª•Âèä @code{sub()} ‰∏é @code{gsub()} ÁöÑÁâπÊÆäÊÉÖÂΩ¢ÔºåÊàë‰ª¨Âª∫ËÆÆ‰ΩøÁî® @command{gawk} ‰∏é @code{gensub()} Êù•ÊâßË°åÊõøÊç¢Êìç‰Ωú„ÄÇ

@node I/O Functions
@subsection ËæìÂÖ•ËæìÂá∫ÂáΩÊï∞
@cindex input/output functions

‰∏ãÈù¢ÁöÑÂáΩÊï∞‰∏é I/O Áõ∏ÂÖ≥„ÄÇÂèØÈÄâÊã©ÁöÑÂèÇÊï∞ÊîæÂú®ÊñπÊã¨Âè∑‰∏≠Ôºà[ ]ÔºâÔºö

@table @asis
@item @code{close(}@var{filename} [@code{,} @var{how}]@code{)}
@cindexawkfunc{close}
@cindex files, closing
@cindex close file or coprocess
ÂÖ≥Èó≠Áî®‰∫éËæìÂÖ•ÊàñËÄÖËæìÂá∫ÁöÑÊñá‰ª∂ @var{filename}„ÄÇÂè¶Â§ñÔºåÂèÇÊï∞‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™Áî®Êù•ÂàõÂª∫Âπ∂Á®ãÊàñËÄÖÁî®‰∫éÈáçÂÆöÂêëËæìÂá∫ÔºåÊàñËÄÖ‰ªéÁÆ°ÈÅì‰∏≠ËæìÂÖ•ÁöÑ Shell ÂëΩ‰ª§„ÄÇÂ¶ÇÊûúÂèÇÊï∞ÊòØËøô‰∏™ÔºåÂàô‰ºöÂÖ≥Èó≠Áõ∏Â∫îÁöÑÂπ∂Á®ã‰∏éÁÆ°ÈÅì„ÄÇÊü•Áúã @xref{Close Files And Pipes}ÔºåËé∑ÂèñÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

 ÂΩìÂÖ≥Èó≠‰∏Ä‰∏™Âπ∂Á®ãÊó∂ÔºåÊúâÊó∂ÂÖàÂÖ≥Èó≠‰∏§Ë∑ØÁÆ°ÈÅì‰∏≠ÁöÑ‰∏ÄÁ´ØÁÑ∂ÂêéÂÜçÂÖ≥Èó≠Âè¶‰∏ÄÁ´ØÈùûÂ∏∏ÊúâÁî®„ÄÇËøôÈÄöËøáÂêë @code{close()} ‰º†ÈÄíÁ¨¨‰∫å‰∏™ÂèÇÊï∞Êù•ÂÆåÊàê„ÄÇËøôÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ôºà@var{how}ÔºâË¶ÅÊòØ‰∏ãÈù¢‰∏§‰∏™‰∏≤‰∏≠ÁöÑ‰∏Ä‰∏™Ôºå
 Âç≥ @code{"to"} ÊàñËÄÖ @code{"from"}Ôºå‰ª•Ë°®Á§∫ÂÖ≥Èó≠ÁÆ°ÈÅìÁöÑÂì™‰∏ÄÁ´Ø„ÄÇÂ≠ó‰∏≤ÁöÑÂ§ßÂ∞èÂÜôÊòØÊó†ÂÖ≥ÁöÑ„ÄÇÊü•Áúã @ref{Two-way I/O}ÔºåÂú®ÈáåÈù¢Êõ¥ËØ¶ÁªÜÂú∞ËÆ®ËÆ∫‰∫ÜËøô‰∏™ÁâπÊÄßÔºåÂπ∂‰∏îËøò‰∏æ‰∫Ü‰∏Ä‰∏™‰æãÂ≠ê„ÄÇ

Ê≥®ÊÑè @code{close()} ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÊòØ @command{gawk} Êâ©Â±ïÔºåÂú®ÂÖºÂÆπÊ®°Âºè‰∏ãÊòØ‰∏çÂèØÁî®ÁöÑÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ

@item @code{fflush(}[@var{filename}]@code{)}
@cindexawkfunc{fflush}
@cindex flush buffered output
Â∞Ü‰∏é @var{filename} Áõ∏ÂÖ≥ÁöÑÁºìÂ≠òËæìÂá∫Âà∑Âá∫Ôºå@var{filename} Ë¶Å‰πàÊòØ‰∏Ä‰∏™ÊâìÂºÄÁöÑÁî®‰∫éÂÜôÁöÑÊñá‰ª∂ÔºåÊàñËÄÖÁî®‰∫éÈáçÂÆöÂêëËæìÂá∫ÁöÑÁÆ°ÈÅìÔºåÊàñËÄÖÂπ∂Á®ã„ÄÇ

@cindex buffers, flushing
@cindex output, buffering
ÂæàÂ§öÁöÑÂ∑•ÂÖ∑Á®ãÂ∫èÈÉΩ‰ºö@dfn{ÁºìÂ≠ò}ÂÆÉ‰ª¨ÁöÑËæìÂá∫ÔºàÂç≥ÂÆÉ‰ª¨‰ºöÂ∞ÜÂÜôÂà∞Á£ÅÁõòÁöÑÊñá‰ª∂ÊàñËÄÖÂ±èÂπïÁöÑ‰ø°ÊÅØ‰øùÂ≠òÔºåÂπ∂Á≠âÂæÖË∂≥Â§üÁöÑÊó∂Èó¥‰ª•ÂÄºÂæóÂ∞ÜËøô‰∫õÊï∞ÊçÆËæìÂá∫Âà∞ËæìÂá∫ËÆæÂ§á‰∏≠Ôºâ„ÄÇËøôÊØîËµ∑ÊØèÊ¨°ÂáÜÂ§áÂ•Ω‰∏ÄÁÇπÊï∞ÊçÆÂ∞±ÂÜôË¶ÅÈ´òÊïàÂæóÂ§ö„ÄÇ‰ΩÜÊòØÔºåÊúâÊó∂ÂæàÊúâÂøÖË¶ÅÂº∫Âà∂Á®ãÂ∫èË¶Å@dfn{Âà∑Âá∫}ÂÆÉÁöÑÁºìÂ≠òÔºàÂç≥Â∞Ü‰ø°ÊÅØÂÜôÂà∞ÂÆÉÁöÑÁõÆÁöÑÂú∞ÔºåÂ∞±ÊòØÁºìÂ≠òËøòÊ≤°ÊúâÊª°Ôºâ„ÄÇ
ËøôÂ∞±ÊòØ @code{fflush()} ÂáΩÊï∞ÁöÑÁõÆÁöÑ‚Äî‚Äî@command{gawk} ‰πü‰ºöÁºìÂ≠òÂÆÉÁöÑËæìÂá∫ÔºåËÄå @code{fflush()} ÂáΩÊï∞Âº∫Âà∂ @command{gawk} Âà∑Âá∫ÂÆÉÁöÑÁºìÂ≠ò„ÄÇ

@cindex extensions, common@comma{} @code{fflush()} function
@cindex Brian Kernighan's @command{awk}
Brian Kernighan Âú® 1992 Âπ¥ 4 ÊúàÂ∞Ü @code{fflush()} Âä†ÂÖ•Âà∞‰ªñÁöÑ @command{awk} ‰∏≠„ÄÇ‰∫åÂçÅÂπ¥ËøáÂéª‰∫ÜÔºåÂÆÉÁé∞Âú®Êàê‰∏∫‰∫Ü‰∏Ä‰∏™ÈÄöËøáÊâ©Â±ï„ÄÇ2012 Âπ¥ 12 ÊúàÔºåÂÆÉË¢´Êé•ÂèóÂåÖÂê´Âà∞ POSIX Ê†áÂáÜ‰∏≠„ÄÇ
ÂèØ‰ª•Êü•Áúã@uref{http://austingroupbugs.net/view.php?id=634, Austin Group ÁΩëÁ´ô}Êù•‰∫ÜËß£„ÄÇ

POSIX Ê†áÂáÜÂåñ‰∫Ü @code{fflush()} ‰∏ãÈù¢Âá†‰∏™ÊñπÈù¢ÔºöÂ¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞ÔºåÊàñËÄÖÂèÇÊï∞ÊòØÁ©∫‰∏≤Ôºà@w{@code{""}}ÔºâÔºåÂàô @command{awk} Âà∑Âá∫ÊâÄÊúâÂ∑≤ÁªèÊâìÂºÄÁöÑÊñá‰ª∂‰∏éÁÆ°ÈÅìÁöÑÁºìÂ≠ò„ÄÇ

@quotation ÊèêÁ§∫
Âú® 4.0.2 ‰πãÂâçÁöÑ@value{PVERSION}ÔºåÂ¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞Ôºå@command{gawk} ‰ºöÂè™Âà∑Âá∫Ê†áÂáÜËæìÂá∫ÔºåËÄå‰∏∫Á©∫‰∏≤Êó∂ÔºåÊâç‰ºöÂà∑Âá∫ÊâÄÊúâÁöÑËæìÂá∫Êñá‰ª∂‰∏éÁÆ°ÈÅì„ÄÇ‰∏∫‰∫Ü‰∏é Brian Kernighan ÁöÑ @command{awk} ÂÖºÂÆπÔºåÂàôÂØπÂÖ∂‰Ωú‰∫ÜÊõ¥ÊîπÔºåÂπ∂Â∏åÊúõÂú® POSIX ‰∏≠ÂØπËøô‰∏™ÁâπÊÄßÁöÑÊ†áÂáÜÂåñÂèØ‰ª•Êõ¥Âä†ÂÆπÊòìÔºàÂÆûÈôÖ‰∏ä‰πüÁ°ÆÂÆûÊòØËøôÊ†∑Ôºâ„ÄÇ

ÂØπ‰∫é @command{gawk}Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® @samp{fflush("/dev/stdout")} Êù•Âè™Âà∑Âá∫Ê†áÂáÜËæìÂá∫„ÄÇ
@end quotation

@c @cindex automatic warnings
@c @cindex warnings, automatic
@cindex troubleshooting, @code{fflush()} function
Â¶ÇÊûúÁºìÂ≠òË¢´ÊàêÂäüÂà∑Âá∫ÔºåÂàô @code{fflush()} ËøîÂõû 0ÔºåÂê¶ÂàôÔºåÂÆÉ‰ºöËøîÂõû‰∏Ä‰∏™ÈùûÈõ∂ÂÄº„ÄÇÔºà@command{gawk} ËøîÂõû @minus{}1„ÄÇÔºâÂú®ÊâÄÊúâÁöÑÁºìÂ≠òÈÉΩÂà∑Âá∫ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂΩìÂè™ÊúâÊâÄÊúâÁöÑÁºìÂ≠òÈÉΩÊàêÂäüÂà∑Âá∫ÂêéÊâç‰ºöËøîÂõû 0„ÄÇÂê¶Âàô‰ºöËøîÂõû @minus{}1ÔºåÂπ∂ÂØπÊúâÈóÆÈ¢òÁöÑ @var{filename} ÂèëÈÄÅÂëäË≠¶„ÄÇ

Â¶ÇÊûú‰Ω†Âà∑Âá∫ÁöÑÊñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìÊòØÊâìÂºÄÁî®‰∫éËØªÂèñÁöÑÔºàÂ¶Ç @code{getline}ÔºâÔºåÊàñËÄÖ @code{fflush()} ‰∏çÊòØÊâìÂºÄÁöÑÊñá‰ª∂ÔºåÁÆ°ÈÅìÊàñËÄÖÂπ∂Á®ãÔºå@command{gawk} ‰πü‰ºöÂèëÂá∫‰∏Ä‰∏™ÂëäË≠¶„ÄÇËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@code{fflush()} ‰πüËøîÂõû @minus{}1„ÄÇ

@sidebar ‰∫§‰∫íÂºè‰∏éÈùû‰∫§‰∫íÂºèÁºìÂ≠ò
@cindex buffering, interactive vs.@: noninteractive

Â§öËØ¥‰∏ÄÁÇπÔºåÂ¶ÇÊûú‰Ω†ÁöÑÁ®ãÂ∫èÊòØ@dfn{‰∫§‰∫íÂºè}ÁöÑÔºàÂ∞±ÊòØ‰∏éÂùêÂú®ÈîÆÁõòÂâçÁöÑÁî®Êà∑ËøõË°åÈÄö‰ø°ÔºâÔºåÁºìÂ≠òÈóÆÈ¢òÊúâÊó∂‰ºöÈùûÂ∏∏ËÆ©‰∫∫ÁñëÊÉë„ÄÇ
@footnote{Â¶ÇÊûúÊ†áÂáÜËæìÂá∫ËøûÊé•Âà∞‰∏Ä‰∏™ÁªàÁ´ØËÆæÂ§áÔºåÂàôÁ®ãÂ∫èÊòØ‰∫§‰∫íÂºèÁöÑ„ÄÇÂú®Áé∞‰ª£Á≥ªÁªü‰∏≠ÔºåËøôË°®Á§∫ËÆæÂ§áÊòØ‰Ω†ÁöÑÈîÆÁõòÊàñËÄÖÂ±èÂπï„ÄÇ}

@c Thanks to Walter.Mecky@dresdnerbank.de for this example, and for
@c motivating me to write this section.
‰∫§‰∫íÂºèÁöÑÁ®ãÂ∫è‰∏ÄËà¨ÈÉΩÊòØ@dfn{Ë°åÁºìÂ≠ò}ÂÆÉ‰ª¨ÁöÑËæìÂá∫ÔºàÂç≥ÂÆÉ‰ª¨‰∏ÄË°åË°åÂú∞ÂÜôËæìÂá∫Ôºâ„ÄÇÈùû‰∫§‰∫íÂºèÁöÑÁ®ãÂ∫èÁõ¥Âà∞ÁºìÂ≠òÊª°ÂêéÊâç‰ºöËæìÂá∫ÔºåËÄåËøôÂèØËÉΩÂåÖÂê´ÂæàÂ§öË°åËæìÂá∫„ÄÇ‰∏ãÈù¢ÊòØÂÖ∂Â∑ÆÂºÇÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{awk '@{ print $1 + $2 @}'}
@kbd{1 1}
@print{} 2
@kbd{2 3}
@print{} 5
@kbd{Ctrl-d}
@end example

@noindent
ËæìÂá∫ÁöÑÊØè‰∏ÄË°åÊòØÁ´ãÂç≥ÊâìÂç∞ÁöÑ„ÄÇ‰∏é‰∏ãÈù¢Ëøô‰∏™‰æãÂ≠êÁöÑË°å‰∏∫ËøõË°åÊØîËæÉÔºö

@example
$ @kbd{awk '@{ print $1 + $2 @}' | cat}
@kbd{1 1}
@kbd{2 3}
@kbd{Ctrl-d}
@print{} 2
@print{} 5
@end example

@noindent
Âú®ËøôÈáåÔºåÁõ¥Âà∞ÈîÆÂÖ• @kbd{Ctrl-d} ÂêéÊâçÊúâËæìÂá∫ÊâìÂç∞ÔºåÂõ†Ê≠§ÂÆÉÂ∞ÜÊâÄÊúâÁöÑÁºìÂ≠òÔºåÁÑ∂Âêé‰∏ÄÊ¨°ÊÄßÂèëÈÄÅÂà∞ÁÆ°ÈÅìËæìÂá∫Âà∞ @command{cat}„ÄÇ
@end sidebar

@item @code{system(@var{command})}
@cindexawkfunc{system}
@cindex invoke shell command
@cindex interacting with other programs
ÊâßË°åÊìç‰ΩúÁ≥ªÁªüÂëΩ‰ª§ @var{command} Âπ∂ËøîÂõûÂà∞ @command{awk} Á®ãÂ∫è‰∏≠„ÄÇÂêåÊó∂ËøîÂõû @var{command} ÁöÑÈÄÄÂá∫Áä∂ÊÄÅ„ÄÇ

‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÁâáÊÆµÊîæÂú®‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è‰∏≠Ôºö

@example
END @{
     system("date | mail -s 'awk run done' root")
@}
@end example

@noindent
ÂΩì @command{awk} Á®ãÂ∫èÂÆåÊàêÂ§ÑÁêÜËæìÂÖ•ÔºåÂπ∂‰∏îÂºÄÂêØËæìÂÖ•ÁªìÊùüÂ§ÑÁêÜÊµÅÁ®ãÊó∂Ôºå‰ºöÂêëÁ≥ªÁªüÁÆ°ÁêÜÂëòÂèëÈÄÅÈÇÆ‰ª∂„ÄÇ

Ê≥®ÊÑèÈáçÂÆöÂêë @code{print} ÊàñËÄÖ @code{printf} Âà∞ÁÆ°ÈÅì‰∏ÄËà¨Êù•Â∞±Â∞±Â§üÊù•ÂÆåÊàê‰Ω†ÁöÑÂ∑•‰Ωú„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅËøêË°åËÆ∏Â§öÂëΩ‰ª§ÔºåÂàôÁÆÄÂçïÂú∞Â∞ÜÂÆÉ‰ª¨ÈÄöËøáÁÆ°Á∫øÊâìÂç∞Âà∞ Shell Êõ¥È´òÊïàÔºö

@example
while (@var{more stuff to do})
    print @var{command} | "/bin/sh"
close("/bin/sh")
@end example

@noindent
@cindex troubleshooting, @code{system()} function
@cindex @option{--sandbox} option, disabling @code{system()} function
‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÊòØ‰∫§‰∫íÂºèÁöÑÔºå@code{system()} Áî®‰∫éÂ§ßÂûãÁöÑËá™ÂåÖÂê´ÁöÑÁ®ãÂ∫èÂ∞±ÈùûÂ∏∏ÊúâÁî®ÔºåÊØîÂ¶Ç Shell ÊàñËÄÖÁºñËæëÂô®„ÄÇ‰∏Ä‰∫õÊìç‰ΩúÁ≥ªÁªü‰∏çËÉΩÂÆûÁé∞ @code{system()} ÂáΩÊï∞„ÄÇ@code{system()} Âú®‰∏çÂÖ∂‰∏çÊîØÊåÅÁöÑÊÉÖÂÜµ‰∏ãÁîüÊàê‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇ

@quotation Ê≥®ÊÑè
ÂΩìÊåáÂÆö‰∫Ü @option{--sandbox} ÈÄâÈ°πÔºå@code{system()} ÂáΩÊï∞‰ºöË¢´Á¶ÅÁî®ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ
@end quotation

Âú® POSIX Á≥ªÁªü‰∏≠Ôºå‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑÈÄÄÂá∫Áä∂ÊÄÅÊòØ‰∏Ä‰∏™ 16 ‰ΩçÁöÑÊï∞„ÄÇ‰º†ÈÄíÁªô C ËØ≠Ë®ÄÁöÑ @code{exit()} ÂáΩÊï∞ÁöÑÊòØÈÄÄÂá∫Áä∂ÊÄÅÂÄºÁöÑÈ´ò 8 ‰Ωç„ÄÇ
‰Ωé‰ΩçÊï∞Ë°®Á§∫Ëøô‰∏™ËøõÁ®ãÊòØÂê¶ÊòØË¢´‰∏Ä‰∏™‰ø°Âè∑ÔºàÁ¨¨ 7 ‰ΩçÔºâÊùÄÊ≠ªÁöÑ„ÄÇÂ¶ÇÊûúÊòØÁöÑËØùÔºåÂâ©‰∏ãÁöÑ‰ΩçÊï∞Ë°®Á§∫Âá∫ÈîôÁöÑ‰ø°Âè∑Êï∞ÔºàÁ¨¨ 0-6 ‰ΩçÔºâ„ÄÇ

‰º†Áªü‰∏äÔºå@command{awk} ÁöÑ @code{system()} ÂáΩÊï∞ÁÆÄÂçïÂú∞ËøîÂõûÈÄÄÂá∫Áä∂ÊÄÅÂÄºÈô§‰ª• 256 ÁöÑÂÄº„ÄÇ
Âú®‰∏ÄËà¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂ∞±ÊåâÁÖßËøôÊ†∑ËøîÂõûÈÄÄÂá∫Áä∂ÊÄÅÂÄº„ÄÇ‰ΩÜÊòØÂú®ËøõÁ®ãË¢´‰ø°Âè∑ÊùÄÊ≠ªÁöÑÊÉÖÂÜµ‰∏ãÔºå‰ºö‰∫ßÁîü‰∏Ä‰∏™ÊûÅÂ∞èÁöÑÊµÆÁÇπÊï∞ÂÄº„ÄÇ
@footnote{Âú®ÁßÅ‰∫∫ÈÄö‰ø°‰∏≠ÔºåDr.@: Kernighan ÊõæÁªèÂêëÊàëË°®ÊòéÔºåÂ∑≤ÊúâÁöÑËøô‰∏™Â§ÑÁêÜÊñπÂºèÂèØËÉΩÊòØ‰∏Ä‰∏™ÈîôËØØ„ÄÇ}
POSIX Â£∞Êòé @command{awk} ÁöÑ @code{system()} ÂáΩÊï∞Â∫îËØ•ËøîÂõûÂÆåÊï¥ÁöÑ 16 ‰ΩçÊï∞ÂÄº„ÄÇ

@command{gawk} ÈááÂèñ‰∫ÜÊäò‰∏≠ÊñπÊ°à„ÄÇËøîÂõûÂÄºÊÄªÁªìÂú® @ref{table-system-return-values}„ÄÇ

@float Table,table-system-return-values
@caption{@code{system()} ÁöÑËøîÂõûÂÄº}
@multitable @columnfractions .40 .60
@headitem Âú∫ÊôØ @tab @code{system()} ÁöÑËøîÂõûÂÄº
@item @option{--traditional} @tab C @code{system()} ÁöÑÂÄºÈô§‰ª• 256
@item @option{--posix} @tab C @code{system()} ÁöÑÂÄº
@item ‰∏ÄËà¨ÁöÑÈÄÄÂá∫ÂëΩ‰ª§ @tab ÂëΩ‰ª§ÁöÑÈÄÄÂá∫Áä∂ÊÄÅ
@item Ë¢´‰ø°Âè∑ÊùÄÊ≠ªÁöÑÂëΩ‰ª§ @tab 256 + ËøôÁßç‰ø°Âè∑ÁöÑÁºñÂè∑
@item Ë¢´Â∏¶ core dump ÁöÑ‰ø°Âè∑ÊùÄÊ≠ªÁöÑÂëΩ‰ª§ @tab 512 + ËøôÁßç‰ø°Âè∑ÁöÑÁºñÂè∑
@item ÊüêÁßçÈîôËØØ @tab @minus{}1
@end multitable
@end float
@end table

@sidebar ÈÄöËøá @code{system()} Êù•ÊéßÂà∂ËæìÂá∫ÁºìÂ≠ò
@cindex buffers, flushing
@cindex buffering, input/output
@cindex output, buffering

@code{system()} ÂáΩÊï∞Êèê‰æõ‰∫ÜÊòæÂºèÁöÑÊéßÂà∂ËæìÂá∫ÂçïÁã¨Êñá‰ª∂ÊàñËÄÖÁÆ°ÈÅìÁºìÂ≠òÁöÑÊñπÂºè„ÄÇ‰ΩÜÊòØÔºåÂØπ‰∫éËÆ∏Â§öÁöÑÊóßÁöÑ @command{awk} ÂÆûÁé∞Âç¥ÊòØ‰∏çÂèØÁßªÊ§çÁöÑ„ÄÇ‰∏Ä‰∏™ÂèØÁî®ÁöÑÊñπÊ≥ïÂ∞±ÊòØÈÄöËøáË∞ÉÁî® @code{system()} ÂáΩÊï∞ÔºåÂπ∂ÁªôÂÖ∂Êèê‰æõ‰∏Ä‰∏™Á©∫‰∏≤‰Ωú‰∏∫ÂÖ∂ÂèÇÊï∞Êù•Âà∑Âá∫ËæìÂá∫ÁºìÂ≠òÔºö

@example
system("")   # flush output
@end example

@noindent
@command{gawk} Â∞ÜËøôÁßç‰ΩøÁî® @code{system()} ÂáΩÊï∞ÁöÑÊñπÂºè‰Ωú‰∏∫‰∏ÄÁßçÁâπÊÆäÊñπÂºèÊù•ÂØπÂæÖÔºåÂπ∂‰∏îËÅ™ÊòéÂú∞‰∏çÁî®Á©∫ÂëΩ‰ª§Êù•ËøêË°å‰∏Ä‰∏™ ShellÔºàÊàñËÄÖÂÖ∂‰ªñÁöÑÂëΩ‰ª§Ëß£ÈáäÂô®Ôºâ„ÄÇÂõ†Ê≠§ÔºåÂú® @command{gawk} ‰∏≠ÔºåËøôÁßçËåÉÂºè‰∏ç‰ªÖÂæàÊúâÁî®ÔºåÂêåÊó∂‰πüÈùûÂ∏∏È´òÊïà„ÄÇÂ∞ΩÁÆ°Ëøô‰∏™ÊñπÊ≥ï‰πü‰ºöÂú®ÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÂèØÂ∑•‰ΩúÔºå‰ΩÜÊòØÂç¥‰∏çÊòØÂøÖÈ°ªË¶ÅÈÅøÂÖçÂºÄÂêØ‰∏Ä‰∏™‰∏çÂøÖË¶Å Shell„ÄÇÔºàÂÖ∂‰ªñÁöÑÂÆûÁé∞ÂèØËÉΩÂè™Âà∑Âá∫‰∏éÊ†áÂáÜËæìÂá∫ÂÖ≥ÈîÆÁöÑÁºìÂ≠òÔºåËÄåÂøÖÊòØÊâÄÊúâÁöÑÁºìÂ≠òËæìÂá∫„ÄÇÔºâ

Â¶ÇÊûú‰Ω†ËÄÉËôë‰∏Ä‰∏ã‰∏Ä‰∏™Á®ãÂ∫èÂëòÁöÑÈ¢ÑÊúüÔºå@code{system()} ‰ºöÂà∑Âá∫ÊâÄÊúâÁöÑÊåÇËµ∑ÁöÑËæìÂá∫ÁúãËµ∑Êù•Â∞±ÊúâÊÑèÊÄù‰∫Ü„ÄÇ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºö

@example
BEGIN @{
     print "first print"
     system("echo system echo")
     print "second print"
@}
@end example

@noindent
ÂøÖÈ°ªÊâìÂç∞Ôºö

@example
first print
system echo
second print
@end example

@noindent
ËÄå‰∏çÊòØÔºö

@example
system echo
first print
second print
@end example

Â¶ÇÊûú @command{awk} ‰∏çÂú®Ë∞ÉÁî® @code{system()} ÂâçÂà∑Âá∫ÂÆÉÁöÑÁºìÂ≠òÔºå‰Ω†Â∞±ÂèØ‰ª•‰ºöÁúãÂà∞ÂêéÈù¢Ôºà‰∏çÂ∏åÊúõÁúãÂà∞ÁöÑÔºâËæìÂá∫„ÄÇ
@end sidebar

@node Time Functions
@subsection Êó∂Èó¥ÂáΩÊï∞
@cindex time functions

@cindex timestamps
@cindex log files, timestamps in
@cindex files, log@comma{} timestamps in
@cindex @command{gawk}, timestamps
@cindex POSIX @command{awk}, timestamps and
@command{awk} Á®ãÂ∫èÂ∏∏Â∏∏Áî®Êù•Â§ÑÁêÜÂ∏¶Êó∂Èó¥Êà≥‰ø°ÊÅØÁöÑÊó•ÂøóÊñá‰ª∂Ôºå‰ª•ÊèêÁ§∫ÁâπÂÆöÁöÑÊó•ÂøóËÆ∞ÂΩïÊòØ‰ΩïÊó∂Ë¢´ÂÜôÂÖ•ÁöÑ„ÄÇËÆ∏Â§öÁöÑÁ®ãÂ∫èÂ∞ÜÊó•ÂøóÁöÑÊó∂Èó¥‰ø°ÊÅØËÆ∞ÂΩïÊàê @code{time()} Á≥ªÁªüË∞ÉÁî®ËøîÂõûÁöÑÊ†ºÂºèÔºåÂç≥ÊòØ‰ªéÁâπÂÆöÊó∂ÂàªÂºÄÂßãÁöÑÁßíÊï∞„ÄÇÂú® POSIX ÂÖºÂÆπÁöÑÁ≥ªÁªü‰∏äÔºåÂÆÉÊòØ‰ªé 1970-01-01 00:00:00 UTC Êó∂Èó¥ÂºÄÂßã‰ª•Êù•ÁöÑÁßíÊï∞ÔºåÊ≤°ÊúâÂåÖÂê´Ê∂¶Áßí„ÄÇ
@ifclear FOR_PRINT
@footnote{@xref{Glossary}ÔºåÁâπÂà´ÊòØ ‚ÄúEpoch‚Äù ‰∏é ‚ÄúUTC‚Äù È°π„ÄÇ}
@end ifclear
ÊâÄÊúâÁü•ÂêçÁöÑ POSIX ÂÖºÂÆπÁöÑÁ≥ªÁªüÊîØÊåÅ‰ªé 0 Âà∞
@iftex
@math{2^{31} - 1},
@end iftex
@ifinfo
2^31 - 1,
@end ifinfo
@ifnottex
@ifnotinfo
2@sup{31} @minus{} 1,
@end ifnotinfo
@end ifnottex
‰πãÈó¥ÁöÑÊó∂Èó¥Êà≥ÔºåËøô‰∏™Êó∂Èó¥ÂèØ‰ª•Ë°®Á§∫Âà∞ 2038-01-19 03:14:07 UTC ÁöÑÊó∂Èó¥„ÄÇ
ÂæàÂ§öÁöÑÁ≥ªÁªüÊîØÊåÅÊõ¥ÂÆΩÁöÑÊó∂Èó¥Êà≥ËåÉÂõ¥ÔºåÂåÖÊã¨Ë¥üÁöÑÊó∂Èó¥Êà≥Ôºå‰ª•Ë°®Á§∫ epoch ‰πãÈó¥ÁöÑÊó∂Èó¥„ÄÇ

@cindex @command{date} utility, GNU
@cindex time, retrieving
‰∏∫‰∫ÜÊõ¥ÂÆπÊòìÂ§ÑÁêÜËøôÊ†∑ÁöÑÂ∏¶Êó∂Èó¥Êà≥ÁöÑÊó•ÂøóÊñá‰ª∂Âπ∂‰∏î‰∫ßÁîüÊúâÁî®ÁöÑÊä•Ë°®Ôºå@command{gawk} Êèê‰æõ‰∫Ü‰∏ãÈù¢ÁöÑÂáΩÊï∞Êù•Â§ÑÁêÜÊó∂Èó¥Êà≥„ÄÇÂÆÉ‰ª¨ÈÉΩÊòØ @command{gawk} ÁöÑÊâ©Â±ïÔºåÂπ∂Ê≤°ÊúâÂú® POSIX Ê†áÂáÜ‰∏≠ÊåáÂÆö„ÄÇ
@footnote{GNU ÁöÑ @command{date} Â∑•ÂÖ∑‰πüÂèØ‰ª•ÂÅöËøôÈáåÊâÄÊèèËø∞ÁöÑÂæàÂ§öÁöÑ‰∫ãÊÉÖ„ÄÇÂ¶ÇÊûúÂú® Shell ‰∏≠Â§ÑÁêÜÁöÑÊòØÁÆÄÂçïÁöÑ‰∏éÊó∂Èó¥ÊúâÂÖ≥ÁöÑÊìç‰ΩúÔºåÂàôÂèØ‰ºòÂÖà‰ΩøÁî®ÂÆÉ„ÄÇ}
‰ΩÜÊòØÔºå@command{mawk} ÁöÑÊñ∞ËøëÁöÑÁâàÊú¨ÔºàÊü•Áúã @pxref{Other Versions}Ôºâ‰πüÊîØÊåÅËøô‰∫õÂáΩÊï∞„ÄÇÂèØÈÄâÁöÑÂèÇÊï∞Ë¢´ÂåÖÂê´Âú®ÊñπÊã¨Âè∑‰∏≠Ôºà[ ]ÔºâÔºö

@c @asis for docbook
@table @asis
@item @code{mktime(@var{datespec})}
@cindexgawkfunc{mktime}
@cindex generate time values
Â∞Ü @var{datespec} ËΩ¨Êç¢‰∏∫‰∏é @code{systime()} ËøîÂõûÁöÑÁõ∏ÂêåÊ†ºÂºèÁöÑÊó∂Èó¥Êà≥„ÄÇÂÆÉ‰∏éÂú® ISO C ‰∏≠ÂêåÂêçÁöÑÂáΩÊï∞Áõ∏‰ºº„ÄÇ
@var{datespec} ÂèÇÊï∞ÊòØ‰∏Ä‰∏™ @w{@code{"@var{YYYY} @var{MM} @var{DD} @var{HH} @var{MM} @var{SS} [@var{DST}]"}} Ê†ºÂºèÁöÑÂ≠ó‰∏≤„ÄÇ
Â≠ó‰∏≤ÂåÖÂê´ 6 ‰∏™ÊàñËÄÖ 7 ‰∏™Êï∞Â≠óÔºå‰ª•Áõ∏Â∫îÂú∞Ë°®Á§∫Âπ¥ÁöÑÂÖ®ÁöÑ‰∏ñÁ∫™Âπ¥Ôºå‰ªé 1 Âà∞ 12 ÁöÑÊúàÔºå1 Âà∞ 31 ÁöÑÊó•Ôºå‰∏ÄÂ§©‰∏≠‰ªé 0 Âà∞ 23 ÁöÑÂ∞èÊó∂Ôºå0 Âà∞ 59 ÂàÜÈíüÔºå0 Âà∞ 60 ÁßíÔºå@footnote{Âú®ÂÅ∂Â∞îÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏ÄÂπ¥‰∏≠ÊúâÂá†ÂàÜÈíü‰ºöÊúâÊ∂¶ÁßíÔºåÂõ†Ê≠§ÁßíÊï∞ÂèØ‰ª•Âà∞ 60„ÄÇ}
‰ª•Âèä‰∏Ä‰∏™ÂèØÈÄâÁöÑÂ§è‰ª§Êó∂Ê†áÂøó„ÄÇ

Ëøô‰∫õÊï∞Â≠óÁöÑÂÄº‰∏çÊòØÂøÖÈ°ªÂú®ÊâÄÊåáÂÆöÁöÑËåÉÂõ¥ÂÜÖÔºå‰æãÂ¶Ç @minus{}1 Â∞èÊó∂Ë°®Êó∂ÂçàÂ§úÂâçÁöÑ 1 Â∞èÊó∂„ÄÇÂàùÂßãÁöÑÊ†ºÊûóÊó•ÂéÜÁöÑ 0 ‰∏∫ÂßãÔºå0 Âπ¥Ë°®Á§∫ 1 Âπ¥‰πãÂâçÔºåËÄå @minus{}1 Âπ¥Ë°®Á§∫Âú® 0 Âπ¥Ââç„ÄÇÊó∂Èó¥‰πüÂèØ‰ª•ÂÅáËÆæ‰∏∫Êú¨Âú∞Êó∂Èó¥„ÄÇÂ¶ÇÊûúÂ§è‰ª§Êó∂Ê†áÂøó‰∏∫Ê≠£ÔºåÂàôÊó∂Èó¥ÂÅáËÆæ‰∏∫Â§è‰ª§Êó∂Êó∂Èó¥ÔºåÂ¶ÇÊûú‰∏∫ 0ÔºåÂàôÊó∂Èó¥ÂÅáËÆæ‰∏∫Ê†áÂáÜÊó∂Èó¥ÔºåÂ¶ÇÊûú‰∏∫Ë¥üÔºàÈªòËÆ§ÂÄºÔºâÔºå@code{mktime()} ‰ºöËØïÂõæÁ°ÆÂÆöÁâπÂÆöÁöÑÊó∂Èó¥ÊòØÂê¶ÊòØÂ§è‰ª§Êó∂Êó∂Èó¥„ÄÇ

Â¶ÇÊûú @var{datespec} Ê≤°ÊúâÂåÖÂê´Ë∂≥Â§üÁöÑÂÖÉÁ¥†ÊàñËÄÖÁªìÊûúÁöÑÊó∂Èó¥Ë∂ÖÂá∫‰∫ÜËåÉÂõ¥Ôºå@code{mktime()} ËøîÂõû @minus{}1 „ÄÇ

@cindex @command{gawk}, @code{PROCINFO} array in
@cindex @code{PROCINFO} array
@item @code{strftime(}[@var{format} [@code{,} @var{timestamp} [@code{,} @var{utc-flag}] ] ]@code{)}
@cindexgawkfunc{strftime}
@cindex format time string
Ê†πÊçÆÂ≠ó‰∏≤Ê†ºÂºè @var{format} ÁöÑÂÜÖÂÆπÔºåÂ∞ÜÊåáÂÆöÁöÑÊó∂Èó¥Êà≥ @var{timestamp} ËøõË°åÊ†ºÂºèÂåñÔºåÂπ∂ËøîÂõûÁªìÊûú„ÄÇËøô‰∏é ISO C ‰∏≠ÂêåÂêçÁöÑÂáΩÊï∞ÁöÑÂäüËÉΩÁ±ª‰ºº„ÄÇÂ¶ÇÊûúÊèê‰æõ‰∫Ü @var{utc-flag} ÂèÇÊï∞ÔºåÂπ∂‰∏îÊòØÈùû 0ÔºåÊàñËÄÖÈùûÁ©∫ÔºåÂàôÂÄº‰ºöÊ†ºÂºèÂåñ‰∏∫ UTCÔºàÁªü‰∏ÄÂçèË∞ÉÊó∂Èó¥Ôºå‰πãÂâç‰∏∫ GMTÔºåÊ†ºÊûóÂ∞ºÊ≤ªÊ†áÂáÜÊó∂Èó¥Ôºâ„ÄÇÂê¶ÂàôÔºåÂÄºÂ∞ÜË¢´Ê†ºÂºèÂåñ‰∏∫Êú¨Âú∞Êó∂Âå∫Êó∂Èó¥„ÄÇ@var{timestamp} ÁöÑÊ†ºÂºè‰∏é @code{systime()} ËøîÂõûÁöÑÂÄºÁöÑÊ†ºÂºè‰∏ÄÊ†∑„ÄÇ
Â¶ÇÊûúÊ≤°ÊúâÊåáÂÆö @var{timestamp} ÂèÇÊï∞Ôºå@command{gawk} Âàô‰ΩøÁî®ÂΩìÂ§©ÁöÑÂΩìÊó∂Êó∂Èó¥‰Ωú‰∏∫ @var{timestamp}„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊ†ºÂºèÂèÇÊï∞Ôºå@code{strftime()} Âàô‰ΩøÁî® @code{PROCINFO["strftime"]} ÁöÑÂÄº‰Ωú‰∏∫Ê†ºÂºèÂ≠ó‰∏≤ÔºàÊü•Áúã @ref{Built-in Variables}Ôºâ„ÄÇ
ÈªòËÆ§ÁöÑÂ≠ó‰∏≤ÂÄº‰∏∫ @code{@w{"%a %b %e %H:%M:%S %Z %Y"}}„ÄÇËøô‰∏™Ê†ºÂºèÂ≠ó‰∏≤‰∫ßÁîüÁöÑËæìÂá∫‰∏é @command{date} Â∑•ÂÖ∑‰∫ßÁîüÁöÑËæìÂá∫‰∏ÄÊ†∑„ÄÇ‰Ω†ÂèØ‰ª•Áªô @code{PROCINFO["strftime"]} Ëµã‰∏Ä‰∏™Êñ∞ÂÄºÔºå‰ª•ÊîπÂèòÈªòËÆ§Ê†ºÂºèÔºåÊü•Áúã‰∏ãÈù¢ÁöÑÂàóË°®Êù•Ëé∑ÂèñÊ†ºÂºèÊåáÁ§∫Á¨¶„ÄÇ

@item @code{systime()}
@cindexgawkfunc{systime}
@cindex timestamps
@cindex current system time
ËøîÂõû‰ªéÁ≥ªÁªü epoch ÂºÄÂßãÂΩìÂâçÊó∂Èó¥ÁöÑÁßíÊï∞„ÄÇÂú® POSIX Á≥ªÁªü‰∏≠ÔºåËøôÊòØ‰ªé 1970-01-01 00:00:00 UTC ÂºÄÂßãÁöÑÁßíÊï∞Ôºå‰∏çÂåÖÂê´Ê∂¶Áßí„ÄÇÂú®ÂÖ∂‰ªñÁ≥ªÁªü‰∏≠ÂèØËÉΩÊòØ‰∏çÂêåÁöÑÂÄº„ÄÇ
@end table

@code{systime()} ÂáΩÊï∞ÂèØ‰ª•ËÆ©‰Ω†ÊØîËæÉÊó•ÂøóÊñá‰ª∂ÁöÑÊó∂Èó¥Êà≥‰∏éÂΩìÂâçÁöÑÊó∂Èó¥„ÄÇÁâπÂà´ÊòØÔºåÂæàÂÆπÊòìÁ°ÆÂÆöÁõ∏Â∫îÁöÑËÆ∞ÂΩïÊòØÂ§ö‰πÖ‰πãÂâçËÆ∞ÂΩïÁöÑ„ÄÇÂÆÉ‰πüÂèØ‰ª•ËÆ©‰Ω†Áî®‰ªé epoch ÂºÄÂßãÊ†ºÂºèÁöÑÊó∂Èó¥Êù•‰∫ßÁîüÊó•ÂøóËÆ∞ÂΩï„ÄÇ

@cindex converting, dates to timestamps
@cindex dates, converting to timestamps
@cindex timestamps, converting dates to
@code{mktime()} ÂáΩÊï∞ÂèØ‰ª•ËÆ©‰Ω†Â∞ÜÊñáÊú¨ÂΩ¢ÂºèÁöÑÊó•Êúü‰∏éÊó∂Èó¥ÁöÑË°®Á§∫ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™Êó∂Èó¥Êà≥„ÄÇÂõ†Ê≠§ÂæàÂÆπÊòìÊù•‰ΩúÊó•Êúü‰∏éÊó∂Èó¥ÁöÑÂâçÂêéÊØîËæÉÔºåÂ∞§ÂÖ∂ÊòØÂΩìÂ§ÑÁêÜÁöÑÊó•Êúü‰∏éÊó∂Èó¥Êï∞ÊçÆÊù•Ëá™‰∫éÂ§ñÈÉ®ÔºåÊØîÂ¶Ç‰∏Ä‰∏™Êó•ÂøóÊñá‰ª∂„ÄÇ

@code{strftime()} ÂáΩÊï∞ÂèØ‰ª•ËÆ©‰Ω†ÂæàÂÆπÊòìÂ∞Ü‰∏Ä‰∏™Êó∂Èó¥Êà≥ËΩ¨Êç¢Êàê‰∏Ä‰∏™‰∫∫ÂèØËØªÁöÑ‰ø°ÊÅØ„ÄÇËøôÊúâÁÇπÂÉè @code{printf} ÂáΩÊï∞ÔºàÊü•Áúã @ref{String Functions}ÔºâÁöÑÁâπÁÇπ‰∏ÄÊ†∑ÔºåÂú®Ëøô‰∏™ÂáΩÊï∞‰∏≠Â∞ÜÈùûÊ†ºÂºèÂåñÁöÑËåÉÂõ¥Â≠óÁ¨¶‰∏ÄÂ≠ó‰∏çÂèòÂú∞Âä†ÂÖ•Âà∞ËøîÂõû‰∏≤‰∏≠„ÄÇÂ∞ÜÊó•Êúü‰∏éÊó∂Èó¥ÂÄºÊõøÊç¢‰∏∫Ê†ºÂºè‰∏≤ @var{format} ‰∏≠ÊâÄÊåáÂÆöÁöÑÊ†ºÂºèËßÑËåÉ„ÄÇ

@cindex format specifiers, @code{strftime()} function (@command{gawk})
@code{strftime()} ‰ΩøÁî®ÁöÑÊòØ 1999 ISO C ÁöÑÊ†áÂáÜÔºå
@footnote{‰∏çÂπ∏ÁöÑÊòØÔºå‰∏çÊòØÊâÄÊúâÁöÑÁ≥ªÁªüÁöÑ @code{strftime()} ÈÉΩÂøÖÈ°ªÊîØÊåÅËøôÈáåÊâÄÂàóÁöÑÊâÄÊúâËΩ¨Êç¢„ÄÇ}
ÂèØ‰ª•ÊîØÊåÅ‰∏ãÈù¢ÁöÑÊó•ÊúüÊ†ºÂºèËßÑËåÉÔºö

@table @code
@item %a
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠Áº©ÂÜôÁöÑÊòüÊúüÂêç„ÄÇ

@item %A
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÂÆåÊï¥ÁöÑÊòüÊúüÂêç„ÄÇ

@item %b
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠Áº©ÂÜôÁöÑÊúà‰ªΩÂêç„ÄÇ

@item %B
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÂÆåÊï¥ÁöÑÊúà‰ªΩÂêç„ÄÇ

@item %c
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‚ÄúÊÅ∞ÂΩìÁöÑ‚ÄùÊó•Êúü‰∏éÊó∂Èó¥Ë°®Á§∫„ÄÇÔºàËøôÂú® @code{"C"} ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‰∏∫ @samp{%A %B %d %T %Y}Ôºâ

@item %C
ÂΩìÂâçÂπ¥ÁöÑ‰∏ñÁ∫™ÈÉ®ÂàÜ„ÄÇËøôÊòØÂπ¥Èô§‰ª• 100ÔºåÂπ∂Âêë‰∏ãÊï¥Êï∞ËøõË°åÊà™ÂèñÂæóÂà∞ÁöÑÊï∞ÂÄº„ÄÇ

@item %d
Êúà‰∏≠ÁöÑ 10 ËøõÂà∂Êó•ÊúüÔºà01-31Ôºâ„ÄÇ

@item %D
‰∏éÊåáÂÆö @samp{%m/%d/%y} Áõ∏Âêå„ÄÇ

@item %e
Êúà‰∏≠ÁöÑÊó•ÊúüÔºåÂ¶ÇÊûúÂè™Êúâ‰∏Ä‰ΩçÔºåÂàôËøõË°åÁ©∫Ê†ºË°•ÂÖ®„ÄÇ

@item %F
‰∏éÊåáÂÆö @samp{%Y-%m-%d} Á≠âÂêå„ÄÇËøôÊòØ ISO 8601 ÁöÑÊ†ºÂºè„ÄÇ

@item %g
ISO 8601 Ê†áÂáÜ‰∏≠Âπ¥‰∏é 100 ÁöÑÊ®°ÁöÑÂë®Êï∞ÂÄºÔºåÊ†ºÂºè‰∏∫ÂçÅËøõÂà∂Êï∞Ôºà00-99Ôºâ„ÄÇ‰æãÂ¶ÇÔºå2012 Âπ¥ÁöÑ 1 Êúà 1 Êó•Ôºå ÊòØ 2011 Âπ¥ÁöÑ 53 Âë®„ÄÇÂõ†Ê≠§ÔºåÂπ¥Âú® ISO 8601 ‰∏≠ÁöÑÂë®Êï∞Âú® 2011 Âπ¥ÔºåÂ∞±ÁÆóÂπ¥Â∑≤ÁªèÊòØ 2012 Âπ¥‰∫Ü„ÄÇÁõ∏‰ººÁöÑÔºå2012 Âπ¥ 12 Êúà 31 Êó•ÊòØ 2013 Âπ¥ÁöÑÁ¨¨ 1 Âë®„ÄÇÊâÄ‰ª•ÔºåÂπ¥ÁöÑ ISO Âë®ÊòØ 2013 Âπ¥ÔºåÂ∞±ÁÆóÂπ¥ËøòÊòØ 2012 Âπ¥„ÄÇ

@item %G
ISO Âë®Êï∞ÁöÑÂÆåÊï¥Âπ¥Ôºå‰∏∫ÂçÅËøõÂà∂Êï∞„ÄÇ

@item %h
‰∏é @samp{%b} Á≠âÂêå„ÄÇ

@item %H
ÂçÅËøõÂà∂ÁöÑÂ∞èÊó∂Ôºà24 Â∞èÊó∂Âà∂Ôºå00-23Ôºâ„ÄÇ

@item %I
ÂçÅËøõÂà∂ÁöÑÂ∞èÊó∂Ôºà12 Â∞èÊó∂Âà∂Ôºå01-12 Ôºâ„ÄÇ

@item %j
‰∏ÄÂπ¥‰∏≠ÁöÑÂ§©Êï∞ÁöÑÂçÅËøõÂà∂Êï∞Ôºà001-366Ôºâ„ÄÇ

@item %m
Êúà‰ªΩÁöÑÂçÅËøõÂà∂Êï∞Ôºà01-12Ôºâ„ÄÇ

@item %M
ÂàÜÈíüÁöÑÂçÅËøõÂà∂Êï∞Ôºà00-59Ôºâ„ÄÇ

@item %n
Êç¢Ë°åÁ¨¶ÔºàASCII LFÔºâ„ÄÇ

@item %p
‰∏éÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ AM/PM ÁöÑÁ≠âÂêåÔºå‰∏é 12 Â∞èÊó∂Èó¥Âà∂ÂÖ≥ËÅîÁöÑË°®Á§∫Ê≥ï„ÄÇ

@item %r
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ 12 Â∞èÊó∂Âà∂ÁöÑÊó∂ÈíüÊó∂Èó¥„ÄÇÔºàËøôÂú® @code{"C"} ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‰∏∫ @samp{%I:%M:%S %p}„ÄÇÔºâ

@item %R
‰∏é @samp{%H:%M} Á≠âÂêå„ÄÇ

@item %S
ÂçÅËøõÂà∂ÁöÑÁßíÊï∞Ôºà00-60Ôºâ„ÄÇ

@item %t
TAB Â≠óÁ¨¶„ÄÇ

@item %T
‰∏é @samp{%H:%M:%S} Á≠âÂêå„ÄÇ

@item %u
ÂçÅËøõÂà∂ÁöÑÊòüÊúüÊï∞Ôºà1-7Ôºâ„ÄÇÊòüÊúü‰∏Ä‰∏∫ 1„ÄÇ

@item %U
‰∏ÄÂπ¥‰∏≠ÁöÑÂçÅËøõÂà∂ÁöÑÂë®Êï∞Ôºà0-53ÔºåÁ¨¨‰∏Ä‰∏™ÊòüÊúüÊó•‰Ωú‰∏∫Á¨¨‰∏ÄÂë®ÁöÑÁ¨¨‰∏ÄÂ§©Ôºâ„ÄÇ

@c @cindex ISO 8601
@item %V
‰∏ÄÂπ¥‰∏≠ÁöÑÂçÅËøõÂà∂ÁöÑÂë®Êï∞Ôºà01-53ÔºåÁ¨¨‰∏Ä‰∏™ÊòüÊúü‰∏Ä‰Ωú‰∏∫Á¨¨‰∏ÄÂë®ÁöÑÁ¨¨‰∏ÄÂ§©Ôºâ„ÄÇÁ°ÆÂÆöÂë®Êï∞ÁöÑÊñπÊ≥ïÁî± ISO 8601 ‰∏≠ÊâÄÊåáÂÆöÁöÑ‰∏ÄÊ†∑„ÄÇÔºàÂç≥ÔºöÂ¶ÇÊûúÂåÖÂê´ 1 Êúà 1 Êó•ÊòüÊúü‰∏≠ÊúâÂú®Êñ∞ÁöÑ‰∏ÄÂπ¥‰∏≠Êúâ 4 Â§©ÔºåÊàñËÄÖÊõ¥Â§öÁöÑÂ§©Êï∞ÔºåÂàôÂ∞±ÊòØÁÆóÊàê‰∏ÄÂë®ÔºåÂê¶ÂàôÂâç‰∏ÄÂπ¥Â∞±ÊòØ 53 Âë®Ôºå‰∏ã‰∏ÄÂë®Â∞±ÁÆóÊàêÁ¨¨‰∏ÄÂë®„ÄÇÔºâ

@item %w
ÂçÅËøõÂà∂ÁöÑÊòüÊúüÂá†Ôºà0-6Ôºâ„ÄÇÊòüÊúüÂ§©ÊòØ 0 Â§©„ÄÇ

@item %W
‰∏ÄÂπ¥ÁöÑÂë®Êï∞Ôºà00-53ÔºåÁ¨¨‰∏Ä‰∏™ÊòüÊúü‰∏Ä‰Ωú‰∏∫Á¨¨‰∏ÄÂë®ÁöÑÁ¨¨‰∏ÄÂ§©Ôºâ„ÄÇ

@item %x
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‚ÄúÊÅ∞ÂΩìÁöÑ‚ÄùÊó•ÊúüË°®Á§∫„ÄÇÔºàÂØπ‰∫é @code{"C"} ÁöÑËØ≠Ë®ÄËÆæÁΩÆÂàô‰∏∫ @samp{%A %B %d %Y} „ÄÇÔºâ

@item %X
Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‚ÄúÊÅ∞ÂΩìÁöÑ‚ÄùÊó∂Èó¥Ë°®Á§∫„ÄÇÔºàÂØπ‰∫é @code{"C"} ÁöÑËØ≠Ë®ÄËÆæÁΩÆÂàô‰∏∫ @samp{%T} „ÄÇÔºâ

@item %y
Âπ¥‰∏é 100 ÁöÑÊ®°ÁöÑÂçÅËøõÂà∂Êï∞Ôºà00-99Ôºâ„ÄÇ

@item %Y
Âπ¥ÁöÑÂçÅËøõÂà∂ÂÖ®ÂÜôÔºàÂ¶Ç 2015 Ôºâ„ÄÇ

@c @cindex RFC 822
@c @cindex RFC 1036
@item %z
Êó∂Âå∫Â∑ÆÔºåÁî® @samp{+@var{HHMM}} Ê†ºÂºèË°®Á§∫ÔºàÂç≥Ê†ºÂºèÈúÄË¶Å‰∫ßÁîü RFC 822/RFC 1036 ÁöÑÊó•ÊúüÂ§¥Ôºâ„ÄÇ

@item %Z
Êó∂Âå∫ÂêçÊàñËÄÖÊòØÂÖ∂Áº©ÂÜôÔºåÂ¶ÇÊûúÊó∂Âå∫‰∏çËÉΩÁ°ÆÂÆöÂàôÊ≤°ÊúâÂ≠óÁ¨¶„ÄÇ

@item %Ec %EC %Ex %EX %Ey %EY %Od %Oe %OH
@itemx %OI %Om %OM %OS %Ou %OU %OV %Ow %OW %Oy
Âú®ËßÑËåÉ‰∏≠Âè™‰ΩøÁî®Á¨¨‰∫å‰∏™Â≠óÁ¨¶ÁöÑ‚ÄúÊõø‰ª£Ë°®Á§∫‚ÄùÔºà@samp{%c}Ôºå@samp{%C}ÔºåÁ≠âÁ≠âÔºâ„ÄÇ
@footnote{Â¶ÇÊûú‰Ω†‰∏çÁêÜËß£Ëøô‰∏™Ôºå‰πü‰∏çÁî®ÊãÖÂøÉÔºåËøô‰∏™ËÆæÊñΩ‰∏ªË¶ÅÁî®‰∫éÊñπ‰æøÂÆûÁé∞ ‚ÄúÂõΩÈôÖÂåñ‚Äù Á®ãÂ∫è„ÄÇÂÖ∂‰ªñÁöÑÂõΩÈôÖÂåñÁâπÊÄßÂú® @ref{Internationalization}ÔºåËøôÈáåÊèèËø∞„ÄÇ}
ÔºàËøô‰∏™ËÆæÊñΩÊòØ‰∏é POSIX ÁöÑ @command{date} Â∑•ÂÖ∑ÂÖºÂÆπÁöÑ„ÄÇÔºâ

@item %%
A literal @samp{%}.
@end table

Â¶ÇÊûúËΩ¨Êç¢ÊåáÂÆöÁ¨¶‰∏çÊòØ‰∏äÈù¢ÊâÄÂàó‰πã‰∏ÄÔºåË°å‰∏∫Â∞±ÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇ 
@footnote{ËøôÊòØÂõ†‰∏∫ ISO C Â∞Ü C ÁâàÊú¨ÁöÑ @code{strftime()} ‰øùÁïôÂÖ∂Ë°å‰∏∫‰∏∫Êú™ÂÆö‰πâÁöÑÔºå@command{gawk} Â∞±‰ΩøÁî®ÂÖ∂ÊâÄÂú®Á≥ªÁªüÁöÑ @code{strftime()} ÁöÑÁâàÊú¨„ÄÇÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏ãÔºåËΩ¨Êç¢ÊåáÂÆöÁ¨¶Ë¶Å‰πà‰∏ç‰ºöÂá∫Áé∞Âú®ËøîÂõûÁöÑÂ≠ó‰∏≤ÈáåÔºåË¶Å‰πàÂ∞±‰ª•ËøôÈù¢ÁöÑÊñπÂºèÂá∫Áé∞„ÄÇ}

ÂØπ‰∫éÊ≤°ÊúâÂÆåÂÖ®‰∏éÊ†áÂáÜÂÖºÂÆπÁöÑÁ≥ªÁªüÔºå@command{gawk} Êèê‰æõ‰∏Ä‰∏™Êù•Ëá™‰∫é GNU C Â∫ìÁöÑ @code{strftime()} ÁöÑ‰∏Ä‰∏™Â§çÊú¨„ÄÇÂÆÉÊîØÊåÅ‰∏äÈù¢ÊâÄÂàóÁöÑÊâÄÊúâÊ†ºÂºèÊåáÂÆöÁ¨¶„ÄÇÂ¶ÇÊûúÈÇ£‰∏™ÁâàÊú¨Áî®‰∫éÁºñËØë @command{gawk} ÔºàÊü•Áúã @pxref{Installation}ÔºâÔºåÂàô‰∏ãÈù¢ÁöÑÈ¢ùÂ§ñÁöÑÊ†ºÂºèÊåáÂÆöÁ¨¶‰πüÂèØÁî®Ôºö

@table @code
@item %k
24 Â∞èÊó∂Âà∂ÁöÑÂçÅËøõÂà∂Â∞èÊó∂Ôºà0-23Ôºâ„ÄÇ‰∏Ä‰∏™‰ΩçÁöÑÊï∞ÂÄº‰ºöÁî®Á©∫Ê†ºËøõË°åÂ°´Ë°•„ÄÇ

@item %l
12 Â∞èÊó∂Âà∂ÁöÑÂçÅËøõÂà∂Â∞èÊó∂Ôºà1-12Ôºâ„ÄÇ‰∏Ä‰∏™‰ΩçÁöÑÊï∞ÂÄº‰ºöÁî®Á©∫Ê†ºËøõË°åÂ°´Ë°•„ÄÇ

@ignore
@item %N
The ``Emperor/Era'' name.
Equivalent to @samp{%C}.

@item %o
The ``Emperor/Era'' year.
Equivalent to @samp{%y}.
@end ignore

@item %s
ÂçÅËøõÂà∂ÁöÑÊó∂Èó¥Êà≥Ôºå‰ªé epoch ÂºÄÂßãÁöÑÁßíÊï∞„ÄÇ

@ignore
@item %v
The date in VMS format (e.g., @samp{20-JUN-1991}).
@end ignore
@end table

Âè¶Â§ñÔºåÊõø‰ª£ÁöÑË°®Á§∫ÂèØ‰ª•Ë¢´ËØÜÂà´Âà∞Ôºå‰ΩÜÊòØÂè™‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÂ∏∏ËßÑË°®Á§∫„ÄÇ

@cindex @code{date} utility, POSIX
@cindex POSIX @command{awk}, @code{date} utility and
‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòØ POSIX @command{date} Â∑•ÂÖ∑ÁöÑ @command{awk} ÂÆûÁé∞„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºå@command{date} Â∑•ÂÖ∑‰ª•‰∏ÄÁßçÂ§ßÂÆ∂ÈÉΩ‰∫ÜËß£ÁöÑÊ†ºÂºèÊâìÂç∞ÂΩìÂâçÁöÑÊó•Êúü‰∏éÊó∂Èó¥„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†Êèê‰æõ‰∫ÜÂâçÈù¢Â∏¶ @samp{+} ÁöÑÂèÇÊï∞Ôºå@command{date} Âàô‰ºöÂ§çÊùÇÈùûÊ†ºÂºèÊåáÂÆöÁ¨¶Âà∞Ê†áÂáÜËæìÂá∫‰∏≠ÔºåÂπ∂‰∏îÊåâÁÖß‰∏≤‰∏≠ÊâÄÊ†ºÂºèÊåáÂÆöÁ¨¶Êù•Ëß£ÈáäÂΩìÂâçÁöÑÊó∂Èó¥„ÄÇÂ¶ÇÔºö

@example
$ @kbd{date '+Today is %A, %B %d, %Y.'}
@print{} Today is Monday, September 22, 2014.
@end example

‰∏ãÈù¢ÊòØ @command{gawk} ÁâàÊú¨ÁöÑ @command{date} Â∑•ÂÖ∑„ÄÇÂÆÉÊúâ‰∏Ä‰∏™Â£≥‰∏∫‚Äúwrapper‚ÄùÊù•Â§ÑÁêÜ @option{-u} ÈÄâÈ°πÔºåËøô‰∏™ÈÄâÈ°πË¶ÅÊ±Ç @command{date} ËøêË°åÊó∂ÂÅáËÆæÊó∂Âå∫ÊòØ UTCÔºö

@example
#! /bin/sh
#
# date --- approximate the POSIX 'date' command

case $1 in
-u)  TZ=UTC0     # use UTC
     export TZ
     shift ;;
esac

gawk 'BEGIN  @{
    format = PROCINFO["strftime"]
    exitval = 0

    if (ARGC > 2)
        exitval = 1
    else if (ARGC == 2) @{
        format = ARGV[1]
        if (format ~ /^\+/)
            format = substr(format, 2)   # remove leading +
    @}
    print strftime(format)
    exit exitval
@}' "$@@"
@end example

@node Bitwise Functions
@subsection ‰ΩçÊìç‰ΩúÂáΩÊï∞
@cindex bit-manipulation functions
@cindex bitwise, operations
@cindex AND bitwise operation
@cindex OR bitwise operation
@cindex XOR bitwise operation
@cindex operations, bitwise
@quotation
@i{
ÊàëÂèØ‰ª•Âêë‰Ω†Ëß£ÈáäÔºå‰ΩÜÊòØÊ≤°ÂäûÊ≥ïÂ∏Æ‰Ω†ÁêÜËß£„ÄÇ
}
@author Anonymous
@end quotation

ÂæàÂ§öÁöÑËØ≠Ë®ÄÊèê‰æõ‰∫ÜÂú®‰∏§‰∏™Êï¥Êï∞‰πãÈó¥ÊâßË°å@dfn{‰Ωç}Êìç‰ΩúÁöÑËÉΩÂäõ„ÄÇÊç¢Âè•ËØùËØ¥ÔºåÊìç‰ΩúÂú®‰∏§‰∏™Âú®Êìç‰ΩúÊï∞‰∏äÁöÑËøûÁª≠‰ΩçÂØπËøõË°åÊìç‰Ωú„ÄÇ‰∏â‰∏™Â∏∏Áî®ÁöÑÊìç‰Ωú‰∏∫Êåâ‰Ωç ANDÔºåOR ‰∏é XOR„ÄÇÊìç‰ΩúÂú® @ref{table-bitwise-ops} ‰∏≠ÊèèËø∞„ÄÇ

@c 11/2014: Postprocessing turns the docbook informaltable
@c into a table. Hurray for scripting!
@float Table,table-bitwise-ops
@caption{‰ΩçÊìç‰Ωú}
@ifnottex
@ifnotdocbook
@display
                ‰ΩçÊìç‰ΩúÁ¨¶
          |  AND  |   OR  |  XOR
          |---+---+---+---+---+---
Êìç‰ΩúÊï∞  | 0 | 1 | 0 | 1 | 0 | 1
----------+---+---+---+---+---+---
    0     | 0   0 | 0   1 | 0   1
    1     | 0   1 | 1   1 | 1   0
@end display
@end ifnotdocbook
@end ifnottex
@tex
\centerline{
\vbox{\bigskip % space above the table (about 1 linespace)
% Because we have vertical rules, we can't let TeX insert interline space
% in its usual way.
\offinterlineskip
\halign{\strut\hfil#\quad\hfil  % operands
        &\vrule#&\quad#\quad    % rule, 0 (of and)
        &\vrule#&\quad#\quad    % rule, 1 (of and)
        &\vrule#                % rule between and and or
        &\quad#\quad            % 0 (of or)
        &\vrule#&\quad#\quad    % rule, 1 (of of)
        &\vrule#                % rule between or and xor
        &\quad#\quad            % 0 of xor
        &\vrule#&\quad#\quad    % rule, 1 of xor
        \cr
&\omit&\multispan{11}\hfil\bf Bit operator\hfil\cr
\noalign{\smallskip}
&     &\multispan3\hfil AND\hfil&&\multispan3\hfil  OR\hfil
                           &&\multispan3\hfil XOR\hfil\cr
\bf Operands&&0&&1&&0&&1&&0&&1\cr
\noalign{\hrule}
\omit&height 2pt&&\omit&&&&\omit&&&&\omit\cr
\noalign{\hrule height0pt}% without this the rule does not extend; why?
0&&0&\omit&0&&0&\omit&1&&0&\omit&1\cr
1&&0&\omit&1&&1&\omit&1&&1&\omit&0\cr
}}}
@end tex

@docbook
<informaltable>

<tgroup cols="7" colsep="1">
<colspec colname="c1"/>
<colspec colname="c2"/>
<colspec colname="c3"/>
<colspec colname="c4"/>
<colspec colname="c5"/>
<colspec colname="c6"/>
<colspec colname="c7"/>
<spanspec spanname="optitle" namest="c2" nameend="c7" align="center"/>
<spanspec spanname="andspan" namest="c2" nameend="c3" align="center"/>
<spanspec spanname="orspan" namest="c4" nameend="c5" align="center"/>
<spanspec spanname="xorspan" namest="c6" nameend="c7" align="center"/>

<tbody>
<row>
<entry colsep="0"></entry>
<entry spanname="optitle"><emphasis role="bold">Bit operator</emphasis></entry>
</row>

<row rowsep="1">
<entry rowsep="0"></entry>
<entry spanname="andspan">AND</entry>
<entry spanname="orspan">OR</entry>
<entry spanname="xorspan">XOR</entry>
</row>

<row rowsep="1">
<entry ><emphasis role="bold">Operands</emphasis></entry>
<entry colsep="0">0</entry>
<entry colsep="1">1</entry>
<entry colsep="0">0</entry>
<entry colsep="1">1</entry>
<entry colsep="0">0</entry>
<entry colsep="1">1</entry>
</row>

<row>
<entry align="center">0</entry>
<entry colsep="0">0</entry>
<entry>0</entry>
<entry colsep="0">0</entry>
<entry>1</entry>
<entry colsep="0">0</entry>
<entry>1</entry>
</row>

<row>
<entry align="center">1</entry>
<entry colsep="0">0</entry>
<entry>1</entry>
<entry colsep="0">1</entry>
<entry>1</entry>
<entry colsep="0">1</entry>
<entry>0</entry>
</row>

</tbody>
</tgroup>
</informaltable>
@end docbook
@end float

@cindex bitwise, complement
@cindex complement, bitwise
Â¶Ç‰Ω†ÊâÄËßÅÔºåAND Êìç‰ΩúÁöÑÁªìÊûúÊòØÂè™ÊúâÂΩì‰∏§‰∏™‰Ωç@emph{ÈÉΩ}‰∏∫ 1 Êó∂Êâç‰∏∫ 1„ÄÇOR ÁöÑÊìç‰ΩúÁªìÊûúÊòØÂΩì‰∏§‰∏™‰Ωç@emph{Êúâ‰∏Ä‰∏™}‰∏∫ 1 Âàô‰∏∫ 1„ÄÇ
XOR ÁöÑÊìç‰ΩúÁªìÊûúÊòØÊúâ‰∏Ä‰∏™‰Ωç 1 Âàô‰∏∫ 1Ôºå‰ΩÜ‰∏çËÉΩ‰∏§‰∏™ÈÉΩ‰∏∫ 1„ÄÇ‰∏ã‰∏Ä‰∏™ÂèÇÊï∞ÊòØ@dfn{‚ÄúË°•‚Äù}ÔºàÂèñÂèçÔºâÔºå1 ÁöÑË°•‰∏∫ 0Ôºå0 ÁöÑË°•‰∏∫ 1„ÄÇÊâÄ‰ª•ÔºåËøô‰∏™Êìç‰Ωú‚ÄúÁøªËΩ¨‚ÄùÊâÄÁªôÂÄºÁöÑÊâÄÊúâ‰Ωç„ÄÇ

@cindex bitwise, shift
@cindex left shift, bitwise
@cindex right shift, bitwise
@cindex shift, bitwise
ÊúÄÂêéÔºåËøòÊúâ‰∏§‰∏™Â∏∏Áî®ÁöÑÊìç‰ΩúÂ∞Ü‰Ωç‰ªéÂ∑¶ÊàñËÄÖ‰ªéÂè≥ËøõË°åÂπ≥Áßª„ÄÇÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÊúâÂÄº‰∏≤ @samp{10111001}ÔºåÁÑ∂Âêé‰Ω†Â∞ÜÂÆÉÂêëÂè≥Âπ≥Áßª 3 ‰ΩçÔºåÊúÄÁªàÂæóÂà∞ÁöÑÂÄº‰∏∫ @samp{00010111}„ÄÇ
@footnote{Ëøô‰∏™‰æãÂ≠êÊòæÁ§∫Âú®Â∑¶Ëæπ‰ºöÁî® 0 ËøõË°åÂ°´Ë°•„ÄÇÂØπ‰∫é @command{gawk}ÔºåËøôÊÄªÊòØÊ≠£Á°ÆÁöÑÔºå‰ΩÜÊòØÂú®ÂÖ∂‰ªñËØ≠Ë®Ä‰∏≠ÔºåÊúâÂèØËÉΩ‰ºöÁî® 1 ËøõË°åÂ°´Ë°•„ÄÇ}
Â¶ÇÊûú‰Ω†ÂèàÁî®ÂêåÊ†∑ÁöÑÂÄº @samp{10111001} ËøõË°åÂ∑¶Áßª‰∏â‰ΩçÔºåÂàôÂæóÂà∞ @samp{11001000}„ÄÇ‰∏ãÈù¢ÁöÑÂàóË°®‰∏≠ÊèèËø∞‰∫Ü @command{gawk} ‰∏≠ÂÜÖÂª∫ÁöÑÂÆûÁé∞‰ΩçÊìç‰ΩúÁöÑÂáΩÊï∞„ÄÇÂèØÈÄâÁöÑÂèÇÊï∞ÂåÖÂê´Âú®ÊñπÊã¨Âè∑‰∏≠Ôºà[ ]ÔºâÔºö

@cindex @command{gawk}, bitwise operations in
@table @code
@cindexgawkfunc{and}
@cindex bitwise AND
@item @code{and(}@var{v1}@code{,} @var{v2} [@code{,} @dots{}]@code{)}
ËøîÂõûÂèÇÊï∞ÁöÑ AND ÁªìÊûú„ÄÇËá≥Â∞ëÊúâ‰∏§‰∏™ÂèÇÊï∞„ÄÇ

@cindexgawkfunc{compl}
@cindex bitwise complement
@item @code{compl(@var{val})}
ËøîÂõû @var{val} ÁöÑ‰Ωç‚ÄúË°•‚ÄùÁªìÊûú„ÄÇ

@cindexgawkfunc{lshift}
@cindex left shift
@item @code{lshift(@var{val}, @var{count})}
 ËøîÂõû @var{val} Â∑¶Áßª @var{count} ‰ΩçÁöÑÂÄº„ÄÇ

@cindexgawkfunc{or}
@cindex bitwise OR
@item @code{or(}@var{v1}@code{,} @var{v2} [@code{,} @dots{}]@code{)}
ËøîÂõûÂèÇÊï∞ÁöÑ OR ÁªìÊûú„ÄÇËá≥Â∞ëÊúâ‰∏§‰∏™ÂèÇÊï∞„ÄÇ

@cindexgawkfunc{rshift}
@cindex right shift
@item @code{rshift(@var{val}, @var{count})}
ËøîÂõû @var{val} Âè≥Áßª @var{count} ‰ΩçÁöÑÂÄº„ÄÇ

@cindexgawkfunc{xor}
@cindex bitwise XOR
@item @code{xor(}@var{v1}@code{,} @var{v2} [@code{,} @dots{}]@code{)}
ËøîÂõûÂèÇÊï∞ÁöÑ XOR ÁªìÊûú„ÄÇËá≥Â∞ëÊúâ‰∏§‰∏™ÂèÇÊï∞„ÄÇ
@end table

ÂØπÊâÄÊúâËøô‰∫õÂáΩÊï∞Ôºå‰∫ßÁîüÂèåÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÊï∞‰ºöË¢´ËΩ¨Êç¢‰∏∫ÊúÄÂÆΩÁöÑ C ÁöÑÊó†Á¨¶Âè∑Êï¥Êï∞ÔºåÁÑ∂ÂêéÂÜçÊâßË°å‰ΩçÊìç‰Ωú„ÄÇÂ¶ÇÊûúÁªìÊûú‰∏çËÉΩË¢´ C ÁöÑ @code{double} Á≤æÁ°ÆË°®Á§∫ÔºåÂÖ∂ÂâçÂØºÁöÑÈùûÈõ∂‰Ωç‰ºö‰∏Ä‰Ωç‰ΩçÂú∞ÁßªÈô§ÔºåÁõ¥Âà∞ÂèØ‰ª•Ë¢´Á≤æÁ°ÆË°®Á§∫„ÄÇÁªìÊûúÂÜçËΩ¨Êç¢Âä† @code{double} Á±ªÂûã„ÄÇÔºàÂ¶ÇÊûú‰Ω†‰∏çÁêÜËß£Ëøô‰∏™ËΩ¨Êç¢ÂõæÔºå‰πü‰∏çË¶ÅÊãÖÂøÉ„ÄÇÔºâ

ËøôÈáåÊòØ‰∏Ä‰∏™Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºàÊü•Áúã @ref{User-defined}ÔºâÔºåÂÖ∂‰∏≠Ëß£Èáä‰∫ÜËøô‰∫õÂáΩÊï∞ÁöÑ‰ΩøÁî®Ôºö

@cindex @code{bits2str()} user-defined function
@cindex @code{testbits.awk} program
@example
@group
@c file eg/lib/bits2str.awk
# bits2str --- turn a byte into readable ones and zeros

function bits2str(bits,        data, mask)
@{
    if (bits == 0)
        return "0"

    mask = 1
    for (; bits != 0; bits = rshift(bits, 1))
        data = (and(bits, mask) ? "1" : "0") data

    while ((length(data) % 8) != 0)
        data = "0" data

    return data
@}
@c endfile
@end group

@c this is a hack to make testbits.awk self-contained
@ignore
@c file eg/prog/testbits.awk
# bits2str --- turn a byte into readable 1's and 0's

function bits2str(bits,        data, mask)
@{
    if (bits == 0)
        return "0"

    mask = 1
    for (; bits != 0; bits = rshift(bits, 1))
        data = (and(bits, mask) ? "1" : "0") data

    while ((length(data) % 8) != 0)
        data = "0" data

    return data
@}
@c endfile
@end ignore
@c file eg/prog/testbits.awk
BEGIN @{
    printf "123 = %s\n", bits2str(123)
    printf "0123 = %s\n", bits2str(0123)
    printf "0x99 = %s\n", bits2str(0x99)
    comp = compl(0x99)
    printf "compl(0x99) = %#x = %s\n", comp, bits2str(comp)
    shift = lshift(0x99, 2)
    printf "lshift(0x99, 2) = %#x = %s\n", shift, bits2str(shift)
    shift = rshift(0x99, 2)
    printf "rshift(0x99, 2) = %#x = %s\n", shift, bits2str(shift)
@}
@c endfile
@end example

@noindent
ÂΩìÊâßË°åÊó∂Ôºå‰∫ßÁîüÂ¶Ç‰∏ãËæìÂá∫Ôºö

@example
$ @kbd{gawk -f testbits.awk}
@print{} 123 = 01111011
@print{} 0123 = 01010011
@print{} 0x99 = 10011001
@print{} compl(0x99) = 0x3fffffffffff66 = 00111111111111111111111111111111111111111111111101100110
@print{} lshift(0x99, 2) = 0x264 = 0000001001100100
@print{} rshift(0x99, 2) = 0x26 = 00100110
@end example

@cindex converting, strings to numbers
@cindex strings, converting
@cindex numbers, converting
@cindex converting, numbers to strings
@cindex number as string of bits
@code{bits2str()} ÂáΩÊï∞Â∞Ü‰∏Ä‰∏™‰∫åËøõÂà∂Êï∞ËΩ¨Êç¢‰∏∫Â≠óÁ¨¶‰∏≤„ÄÇÁªô @code{mask} ÂàùÂßãÂåñ‰∏∫ 1 Êù•ÂàõÂª∫‰∏Ä‰∏™ËøôÊ†∑ÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆÔºåÂÖ∂ÊúÄÂè≥ËæπÁöÑ‰ΩçË¢´ËÆæÁΩÆ‰∏∫ 1„ÄÇ‰ΩøÁî®Ëøô‰∏™ @code{mask}ÔºåÂáΩÊï∞ÈáçÂ§çÂú∞Ê£ÄÊü•ÊúÄÂè≥ËæπÁöÑ‰Ωç„ÄÇÂ∞Ü @code{mask} ‰∏éÂÄºËøõË°å AND Êìç‰ΩúÔºåÂèØ‰ª•ÊòæÁ§∫Âá∫ÊúÄÂè≥ËæπÁöÑ‰ΩçÊòØ 1 ËøòÊòØ 0„ÄÇÂ¶ÇÊûúÊòØ 1ÔºåÂ∞±‰ºöÂú®Â≠ó‰∏≤ÁöÑÂâçÈù¢ËøûÊé•‰∏Ä‰∏™ @code{"1"}ÔºåÂê¶ÂàôËøûÊé•‰∏Ä‰∏™ @code{"0"}„ÄÇÂÄºÁÑ∂ÂêéÂêëÂè≥Áß∞ 1 ‰ΩçÔºåÁõ¥Âà∞Ê≤°ÊúâÊõ¥Â§öÁöÑ 1 Â≠òÂú®„ÄÇ

Â¶ÇÊûúÂàùÂßãÂÄº‰∏∫ 0ÔºåÂÆÉ‰ºöÁÆÄÂçïÂú∞ËøîÂõû @code{"0"}„ÄÇÂê¶ÂàôÊúÄÂêéÔºå‰ºöÂ∞ÜÂÄºËøõË°åÂ°´Ë°•‰ª•‰∫ßÁîü 8 ‰ΩçÊï∞ÈáèÁöÑÊï¥ÂÄçÊï∞„ÄÇÂú®Áé∞‰ª£ÁöÑËÆ°ÁÆóÊú∫‰∏≠ËøôÊòØ‰∏ÄÁßçÂÖ∏ÂûãÁöÑÂ§ÑÁêÜ„ÄÇ

Âú® @code{BEGIN} ‰∏≠ÁöÑ‰∏ª‰ª£Á†ÅËßÑÂàôÊòæÁ§∫‰∫ÜÂçÅËøõÂà∂‰∏éÂÖ´ËøõÂà∂Êï∞ÊçÆÁöÑÂêå‰∏Ä‰∏™ÂÄºÁöÑ‰∏çÂêåÔºàÊü•Áúã @pxref{Nondecimal-numbers}ÔºâÔºåÁÑ∂ÂêéÂ±ïÁ§∫‰∫Ü @code{compl()}Ôºå@code{lshift()}Ôºå ‰∏é @code{rshift()} ÂáΩÊï∞ÁöÑÁªìÊûú„ÄÇ

@node Type Functions
@subsection Ëé∑ÂèñÁ±ªÂûã‰ø°ÊÅØ

@command{gawk} Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞Êù•ËÆ©‰Ω†ÂèØ‰ª•Âå∫ÂàÜÊï∞ÁªÑ‰∏éÊ†áÈáèÂèòÈáè„ÄÇËøôÂú®ÈÅçÂéÜÂ§öÁª¥Êï∞ÁªÑÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑÔºàÊü•Áúã @pxref{Arrays of Arrays}Ôºâ„ÄÇ

@table @code
@cindexgawkfunc{isarray}
@cindex scalar or array
@item isarray(@var{x})
Â¶ÇÊûú @var{x} ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇ
@end table

@code{isarray()} ‰∏ªË¶ÅÁî®Âú®‰∏§ÁßçÁéØÂ¢É‰∏≠„ÄÇÁ¨¨‰∏ÄÁßçÊòØÂΩìÈÅçÂéÜÂ§öÁª¥Êï∞ÁªÑÊó∂Ôºå‰Ω†ÂèØ‰ª•ÊµãËØïÊüê‰∏™ÂÖÉÁ¥†ÊòØÂê¶ÊòØÊï∞ÁªÑ„ÄÇÁ¨¨‰∫å‰∏™Âú∫ÊôØÊòØÂú®Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰∏≠ÔºàËøòÊú™ËÆ®ËÆ∫Âà∞ÔºåÊü•Áúã @ref{User-defined}ÔºâÔºåÁî®Êù•ÊµãËØïÂèÇÊï∞ÊòØÂê¶‰∏∫Êï∞ÁªÑ„ÄÇ

@quotation ÊèêÁ§∫
Âú®ÂÖ®Â±ÄËåÉÂõ¥ÂÜÖ‰ΩøÁî® @code{isarray()} Êù•ÊµãËØïÂèòÈáèÂπ∂Ê≤°ÊúâÂê´‰πâ„ÄÇÂõ†‰∏∫‰Ω†Â∞±ÊòØÂÜôÁ®ãÂ∫èÁöÑ‰∫∫Ôºå‰Ω†ÂΩìÁÑ∂Áü•ÈÅì‰Ω†ÁöÑÂèòÈáèÊòØ‰∏çÊòØÊï∞ÁªÑÔºåÂÆûÈôÖ‰∏äÔºåÁî±‰∫é @command{gawk} ÁöÑÂ∑•ÂÖ∑ÊñπÂºèÔºåÂ¶ÇÊûú‰Ω†ÂèòÈáèÁöÑÂêçÂ≠óÂú® @code{isarray()} ‰πãÂâçËøòÊ≤°ÊúâÁî®Âà∞Ôºå@command{gawk} ‰ºöÂ∞ÜÂÖ∂ËΩ¨Êç¢Êàê‰∏Ä‰∏™Ê†áÈáè„ÄÇ
@end quotation

@node I18N Functions
@subsection Â≠ó‰∏≤ÁøªËØëÂáΩÊï∞
@cindex @command{gawk}, string-translation functions
@cindex functions, string-translation
@cindex string-translation functions
@cindex internationalization
@cindex @command{awk} programs, internationalizing

@command{gawk} Êèê‰æõ‰∫Ü‰∏Ä‰∫õËÆæÊñΩÁî®Êù•ÂõΩÈôÖÂåñ @command{awk} Á®ãÂ∫è„ÄÇËøô‰∫õÂåÖÂê´‰∫Ü‰∏ãÈù¢ÂàóË°®‰∏≠ÊèèËø∞ÁöÑÂáΩÊï∞„ÄÇËøô‰∫õÁöÑÊèèËø∞Âè™ÊòØÁõÆÁöÑÊÄßÁöÑ„ÄÇ
Êü•Áúã @xref{Internationalization}ÔºåÊù•Êü•ÁúãÂÖ®ÈÉ®ÁöÑËØ¥Êòé„ÄÇÂèØÈÄâÁöÑÂèÇÊï∞ÊîæÂú®ÊñπÊã¨Âè∑‰∏≠Ôºà[ ]ÔºâÔºö

@table @asis
@cindexgawkfunc{bindtextdomain}
@cindex set directory of message catalogs
@item @code{bindtextdomain(@var{directory}} [@code{,} @var{domain}]@code{)}
ËÆæÁΩÆÁõÆÂΩïÔºåÂΩì‰∏ç‰ºöÊàñËÄÖ‰∏çËÉΩÂÆö‰ΩçÂà∞‚ÄúÊ†áÂáÜ‚ÄùÁöÑ‰ΩçÁΩÆÊó∂Ôºå@command{gawk} ‰ºöÂú®Ëøô‰∏™ÁõÆÂΩïÈáåÊü•Êâæ‰ø°ÊÅØÁøªËØëÊñá‰ª∂ÔºàÂ¶ÇÂú®ÊµãËØïÊúüÈó¥Ôºâ„ÄÇ
ÂÆÉËøîÂõûÁªëÂÆö @var{domain} ÁöÑÁõÆÂΩï„ÄÇ

ÈªòËÆ§ÁöÑ @var{domain} ÊòØ @code{TEXTDOMAIN} ÁöÑÂÄº„ÄÇÂ¶ÇÊûúÁõÆÂΩïÊòØ‰∏Ä‰∏™Á©∫‰∏≤Ôºà@code{""}ÔºâÔºåÂàô @code{bindtextdomain()} ËøîÂõûÁªôÂÆö @var{domain} ÁöÑÂΩìÂâçÁªëÂÆö„ÄÇ

@cindexgawkfunc{dcgettext}
@cindex translate string
@item @code{dcgettext(@var{string}} [@code{,} @var{domain} [@code{,} @var{category}] ]@code{)}
ËøîÂõûÂú®ÊñáÊú¨Âüü @var{domain} ‰∏≠ÔºåÂØπ‰∫éÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ @var{category} ÁöÑ‰∏≤ @var{string} ÁöÑÁøªËØë‰∏≤„ÄÇ
ÈªòËÆ§ÁöÑ @var{domain} ÂÄºÊòØÂΩìÂâç @code{TEXTDOMAIN} ÁöÑÂÄº„ÄÇ
@var{category} ÁöÑÈªòËÆ§ÂÄºÊòØ @code{"LC_MESSAGES"}„ÄÇ

@cindexgawkfunc{dcngettext}
@item @code{dcngettext(@var{string1}, @var{string2}, @var{number}} [@code{,} @var{domain} [@code{,} @var{category}] ]@code{)}
ËøîÂõûÂú®ÂàÜÁ±ª @var{category} ÁöÑÊñáÊú¨Âüü @var{domain} ‰∏≠ÔºåÁî®‰∫éËøõË°å @var{string1} ‰∏é @var{string2} ÁøªËØëÁöÑÊï∞ÁõÆ @var{number} ÁöÑÂ§çÊï∞ÂΩ¢Âºè„ÄÇ@var{string1} ÊòØÊüê‰∏™Ê∂àÊÅØÁöÑËã±ËØ≠Âçï‰∏ÄÂèò‰ΩìÔºå@var{string2} Âêå‰∏Ä‰∏™Ê∂àÊÅØÁöÑËã±ËØ≠Â§çÊï∞ÂΩ¢Âºè„ÄÇ@var{domain} ÁöÑÈªòËÆ§ÂÄºÂ∞±ÊòØ @code{TEXTDOMAIN} ÁöÑÂΩìÂâçÂÄº„ÄÇ@var{category} ÁöÑÈªòËÆ§ÂÄºÊòØ @code{"LC_MESSAGES"}„ÄÇ
@end table

@node User-defined
@section Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞

@cindex user-defined functions
@cindex functions, user-defined
Â§çÊùÇÁöÑ @command{awk} Á®ãÂ∫èÂ∏∏Â∏∏ÈÄöËøáÂÆö‰πâËá™Â∑±ÁöÑÂáΩÊï∞Êù•ËøõË°åÁÆÄÂåñ„ÄÇÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰πüÂèØ‰ª•ÂÉèÂÜÖÁΩÆÂáΩÊï∞‰∏ÄÊ†∑Ë∞ÉÁî®ÔºàÊü•Áúã @pxref{Function Calls}ÔºâÔºå‰ΩÜÊòØÂÆö‰πâ‰ªñ‰ª¨ÂàôÊòØ‰Ω†ÁöÑËá™Áî±ÔºàÂç≥ÂëäËØâ @command{awk} ‰Ω†ÊâÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÔºâ„ÄÇ

@menu
* Definition Syntax::           How to write definitions and what they mean.
* Function Example::            An example function definition and what it
                                does.
* Function Caveats::            Things to watch out for.
* Return Statement::            Specifying the value a function returns.
* Dynamic Typing::              How variable types can change at runtime.
@end menu

@node Definition Syntax
@subsection ÂáΩÊï∞ÂÆö‰πâËØ≠Ê≥ï

@quotation
@i{
ËØ¥ @command{awk} Êú¨Âú∞ÂèòÈáèÁöÑÂÆö‰πâËØ≠Ê≥ïÊÉä‰∫∫ÁöÑÁ≥üÁ≥ïÊòØÂæàÂÖ¨Ê≠£ÁöÑ„ÄÇ
}
@author Brian Kernighan
@end quotation

@cindex functions, defining
ÂáΩÊï∞ÁöÑÂÆö‰πâÂèØ‰ª•Âá∫Áé∞Âú® @command{awk} Á®ãÂ∫èËßÑÂàô‰πãÈó¥ÁöÑ‰ªª‰ΩïÂú∞Êñπ„ÄÇ
ÊâÄ‰ª•Ôºå@command{awk} Á®ãÂ∫èÁöÑ‰∏ÄËà¨ÂΩ¢ÂºèÊòØË¢´Êâ©Â±ï‰∏∫ÂåÖÂê´‰∏ÄÁ≥ªÂàóÁöÑËßÑÂàô@emph{‰∏é}Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÂÆö‰πâ„ÄÇÊ≤°ÊúâÂøÖÈ°ªÂ∞ÜÂáΩÊï∞ÂÆö‰πâÊîæÂú®ÊâÄÊúâ‰ΩøÁî®ÂáΩÊï∞ÁöÑÂú∞Êñπ‰πãÈó¥„ÄÇËøôÊòØÂõ†‰∏∫ @command{awk} ËØªÂèñÁ®ãÂ∫èÊòØÂú®ÂºÄÂßãÊâßË°å‰ªª‰ΩïÈÉ®‰ªΩ‰πãÂâç„ÄÇ

Êüê‰∏™ÂáΩÊï∞Âêç‰∏∫ @var{name} ÁöÑÂÆö‰πâÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@display
@code{function} @var{name}@code{(}[@var{parameter-list}]@code{)}
@code{@{}
     @var{body-of-function}
@code{@}}
@end display

@cindex names, functions
@cindex functions, names of
@cindex namespace issues, functions
@noindent
Âú®ËøôÈáåÔºå@var{name} ÊòØË¶ÅÂÆö‰πâÂáΩÊï∞ÁöÑÂêçÂ≠ó„ÄÇÊúâ‰∏Ä‰∏™ÊúâÊïàÁöÑÂáΩÊï∞ÂêçÂ∞±ÂÉè‰∏Ä‰∏™ÊúâÊïàÁöÑÂèòÈáèÂêç‰∏ÄÊ†∑Ôºö‰∏ÄÁ≥ªÂàóÁöÑÂ≠óÊØç„ÄÅÊï∞Â≠ó‰ª•Âèä‰∏ãÂàíÁ∫øÔºåÂêåÊó∂‰∏ç‰ª•Êï∞Â≠óÂºÄÂ§¥ÁöÑÂ∫èÂàó„ÄÇÂõ†Ê≠§ÔºåÂè™Êúâ 52 ‰∏™Â§ßÂÜôË∑üÂ∞èÂÜôÁöÑËã±ÊñáÂ≠óÊØçÂèØ‰ª•Áî®‰∫éÂáΩÊï∞Âêç„ÄÇ
Âú®‰∏Ä‰∏™ÂçïÁã¨ÁöÑ @command{awk} Á®ãÂ∫è‰∏≠Ôºå‰ªª‰ΩïÁâπÂÆöÁöÑÂêçÂ≠óÂè™ËÉΩË¢´‰Ωú‰∏∫ÂèòÈáè„ÄÅÊï∞ÁªÑÊàñËÄÖÂáΩÊï∞Êù•‰ΩøÁî®„ÄÇ

@var{parameter-list} ÊòØ‰∏Ä‰∏™ÂèØÈÄâÁöÑÂáΩÊï∞ÂèÇÊï∞Ôºå‰ª•ÂèäÊú¨Âú∞ÂèòÈáèÂêçÁöÑÂàóË°®ÔºåÈÄöËøáÈÄóÂè∑ÂàÜÈöî„ÄÇÂΩìÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÂèÇÊï∞ÂêçÁî®‰∫éÂú®Ë∞ÉÁî®Êó∂‰º†ÈÄíÁöÑÂèÇÊï∞ÂÄº„ÄÇ

ÂáΩÊï∞‰∏çÂèØ‰ª•Áî®‰∏§‰∏™Áõ∏ÂêåÂêçÂ≠óÁöÑÂèÇÊï∞Ôºå‰πü‰∏çÂèØ‰ª•‰∏éÂáΩÊï∞ÁöÑÂêçÂ≠óÂêåÂêç„ÄÇ

@quotation Ê≥®ÊÑè
Ê†πÊçÆ POSIX Ê†áÂáÜÔºåÂáΩÊï∞ÂèÇÊï∞‰∏çÂèØ‰ª•‰∏éÁâπÊÆäÁöÑÈ¢ÑÂÆö‰πâÂèòÈáèÂêåÂêçÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÔºåÂáΩÊï∞ÂèÇÊï∞‰πü‰∏çÂèØ‰ª•‰∏éÂè¶‰∏Ä‰∏™ÂáΩÊï∞ÂêçÂêåÂêç„ÄÇ

Âπ∂‰∏çÊòØÊâÄÊúâÁöÑ @command{awk} ÁâàÊú¨ÈÉΩÂº∫Âà∂Ëøô‰∫õÈôêÂà∂„ÄÇ@command{gawk} ÊÄªÊòØÂº∫Âà∂Á¨¨‰∏ÄÊù°ÈôêÂà∂„ÄÇÂú®ÊåáÂÆö @option{--posix} ÈÄâÈ°πÊó∂ÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂÆÉ‰πüÂº∫Âà∂Á¨¨‰∫å‰∏™ÈôêÂà∂„ÄÇ
@end quotation

Â¶ÇÊûúË¢´ÂèÇËÄÉÁöÑÂú∞ÊñπÈúÄË¶Å‰∏Ä‰∏™Â≠ó‰∏≤ÂÄºÁöÑÊó∂ÂÄôÔºåÊú¨ÂèòÈáèË°®Áé∞ÂÉè‰∏Ä‰∏™Á©∫‰∏≤ÔºåÂ¶ÇÊûúÂèÇËÄÉÂà∞ÁöÑÂú∞ÊñπÈúÄË¶Å‰∏Ä‰∏™Êï∞ÂÄºÁöÑÊó∂ÂÄôÔºåÂ∞±Ë°®Áé∞‰∏∫ 0„ÄÇËøô‰∏éÂ∏∏ËßÑÁöÑÂèòÈáèÂú®ËøòÊ≤°ÊúâË¢´ËµãÂÄºÊó∂ÁöÑË°®Áé∞‰∏ÄÊ†∑„ÄÇÔºàË¶ÅÊõ¥Â§öÂú∞ÁêÜËß£Êú¨Âú∞ÂèòÈáèÔºåÊü•Áúã @pxref{Dynamic Typing}Ôºâ

@var{body-of-function} Áî± @command{awk} ÁöÑËØ≠Âè•ÁªÑÊàê„ÄÇËøôÊòØÂÆö‰πâÁöÑÊúÄÈáçË¶ÅÁöÑÈÉ®ÂàÜÔºåÂõ†Ê≠§ÂÆÉÂÆö‰πâ‰∫ÜÂáΩÊï∞ÂÆûÈôÖË¶Å@emph{ÂÅö}ÁöÑ‰∫ãÊÉÖ„ÄÇÂèÇÊï∞ÂêçÂ≠òÂú®Áªô‰∫ÜÂáΩÊï∞‰Ωì‰∏éÂèÇÊï∞ËøõË°åÂØπËØùÁöÑÊñπÂºèÔºåÊú¨Âú∞ÂèòÈáèÁöÑÂ≠òÂú®ÂèØ‰ª•‰ΩøÂáΩÊï∞‰ΩìÊù•‰øùÂ≠ò‰∏¥Êó∂ÂÄº„ÄÇ

ÂèÇÊï∞Âêç‰∏éÊú¨Âú∞ÂèòÈáèÂêçÊ≤°ÊúâËØ≠Ê≥ï‰∏äÁöÑÂå∫Âà´„ÄÇÁõ∏ÂèçÔºåË∞ÉÁî®ÂáΩÊï∞Êó∂Êèê‰æõÁöÑÂèÇÊï∞‰∏™Êï∞ÂÜ≥ÂÆö‰∫ÜÊúâÂ§öÂ∞ë‰∏™ÂèÇÊï∞ÂèòÈáè„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÁªô‰∫Ü‰∏â‰∏™ÂèÇÊï∞ÂÄºÔºå@var{parameter-list} ‰∏≠ÁöÑÂ§¥‰∏â‰∏™ÂêçÂ≠óÂ∞±ÊòØÂèÇÊï∞ÔºåËÄåÂâ©‰∏ãÁöÑÂ∞±ÊòØÊú¨Âú∞ÂèòÈáè„ÄÇ

ËßÑÂàôÊòØËøôÊ†∑ÁöÑÔºåÂ¶ÇÊûúÂèÇÊï∞ÁöÑ‰∏™Êï∞‰∏éÊâÄÊúâÁöÑÂáΩÊï∞ÁöÑÊâÄÊúâË∞ÉÁî®ÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÂú® @var{parameter-list} ‰∏≠ÁöÑ‰∏Ä‰∫õÂêçÂ≠óÊúâÊó∂ÊòØÂèÇÊï∞ÔºåËÄåÂú®ÂÖ∂‰ªñÊó∂Èó¥ÂàôÊòØÊú¨Âú∞ÂèòÈáè„ÄÇÂè¶‰∏Ä‰∏™ÊÄùËÄÉËøô‰∏™ÈóÆÈ¢òÁöÑÊñπÂºèÊòØÔºåË¢´ÁúÅÁï•ÁöÑÂèÇÊï∞ÁöÑÈªòËÆ§ÂÄº‰∏∫Á©∫‰∏≤„ÄÇ

@cindex programming conventions, functions, writing
ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂΩì‰Ω†ÂÜô‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÊó∂ÂÄôÔºå‰Ω†Áü•ÈÅì‰Ω†Ë¶Å‰ΩøÁî®ÁöÑÂêçÂ≠óÊï∞Ôºå‰ª•Âü∫‰Ωú‰∏∫ÂèÇÊï∞ÔºåËÄåÊúâÁõ∏Â∫îÁöÑ‰∏™Êï∞Áî®Êù•‰ΩúÊú¨Âú∞ÂèòÈáè„ÄÇÂ∞Ü‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑÁ©∫Ê†ºÊîæÂú®ÂèÇÊï∞‰∏éÊú¨Âú∞ÂèòÈáè‰πãÈó¥ÂèØ‰ª•ÂæàÊñπ‰æøÂú∞Êù•Âä†‰ª•Âå∫ÂàÜÔºåËøôÂèØ‰ª•‰Ωú‰∏∫Â¶Ç‰ΩïÊù•‰ΩøÁî®ÂáΩÊï∞ÁöÑÊñáÊ°£„ÄÇ

@cindex variables, shadowing
@cindex shadowing of variable values
Âú®ÂáΩÊï∞‰ΩìÁöÑÊâßË°åËøáÁ®ã‰∏≠ÔºåÂèÇÊï∞‰∏éÊú¨Âú∞ÂèòÈáè‰ºöË¢´ÈöêËóèÔºåÊàñËÄÖ@dfn{ÈÅÆÁõñ}ÊéâÔºåÁ®ãÂ∫èÂêéÈù¢ÊâÄÊúâ‰ΩøÁî®Âà∞ÁöÑÂêåÂêçÁöÑÂèòÈáè„ÄÇË¢´ÈÅÆÁõñÊéâÁöÑÂèòÈáèÂú®ÂáΩÊï∞ÂÆö‰πâ‰∏≠ÊòØ‰∏çÂèØËÆøÈóÆÁöÑÔºåÂõ†Ê≠§Ê≤°ÊúâÊñπÊ≥ïÂú®ÂÆÉ‰ª¨ÁöÑÂêçÂ≠óË¢´Áî®‰∫éÂèÇÊï∞ÊàñËÄÖÊú¨Âú∞ÂèòÈáèÊó∂ËøõË°åÂëΩÂêç„ÄÇÊâÄ‰ª•ÂÖ∂‰ªñÁöÑÂú® @command{awk} Á®ãÂ∫è‰∏≠‰ΩøÁî®ÁöÑÂèòÈáèÂèØ‰ª•Âú®ÂáΩÊï∞‰Ωì‰∏≠Ë¢´ÂèÇËÄÉÔºåÊàñËÄÖËÆæÁΩÆ„ÄÇÂèÇÊï∞‰∏éÊú¨Âú∞ÂèòÈáèÂè™ÊåÅÁª≠Âà∞ÂáΩÊï∞‰ΩìÊâßË°åÂÆåÊàê„ÄÇÂè™Ë¶ÅÂáΩÊï∞‰Ωì‰∏ÄÂÆåÊàêÔºå‰Ω†Â∞±ÂÜç‰∏ÄÊ¨°ÂèØ‰ª•ËÆøÈóÆÈÇ£‰∫õÂú®ÂáΩÊï∞ÊâßË°åÊó∂Ë¢´ÈÅÆÁõñÊéâÁöÑÂèòÈáè„ÄÇ

ÂáΩÊï∞‰ΩìÂèØ‰ª•ÂåÖÂê´Ë∞ÉÁî®ÂáΩÊï∞ÁöÑË°®ËææÂºè„ÄÇ‰ªñ‰ª¨ÁîöËá≥ÂèØ‰ª•Ë∞ÉÁî®ÂáΩÊï∞Êú¨Ë∫´ÔºåÁõ¥Êé•Âú∞ÊàñËÄÖÈÄöËøáÂè¶‰∏Ä‰∏™ÂáΩÊï∞Êù•Ë∞ÉÁî®„ÄÇÂΩìÂèëÁîü‰∫ÜËøôÊ†∑ÁöÑ‰∫ãÊÉÖÊó∂ÔºåÊàë‰ª¨Áß∞ÂáΩÊï∞ÊòØÈÄíÂΩíÁöÑ„ÄÇÂáΩÊï∞Ë∞ÉÁî®ÂÖ∂Êú¨Ë∫´ÁöÑÂä®‰ΩúÁß∞‰∏∫ÈÄíÂΩí„ÄÇ

@cindex recursive functions
@cindex functions, recursive
ÂáΩÊï∞‰ΩìÂèØ‰ª•ÂåÖÂê´Ë∞ÉÁî®ÂáΩÊï∞ÁöÑË°®ËææÂºè„ÄÇ‰ªñ‰ª¨ÁîöËá≥ÂèØ‰ª•Ë∞ÉÁî®ÂáΩÊï∞Êú¨Ë∫´ÔºåÁõ¥Êé•Âú∞ÊàñËÄÖÈÄöËøáÂè¶‰∏Ä‰∏™ÂáΩÊï∞Êù•Ë∞ÉÁî®„ÄÇÂΩìÂèëÁîü‰∫ÜËøôÊ†∑ÁöÑ‰∫ãÊÉÖÊó∂ÔºåÊàë‰ª¨Áß∞ÂáΩÊï∞ÊòØ@dfn{ÈÄíÂΩíÁöÑ}„ÄÇÂáΩÊï∞Ë∞ÉÁî®ÂÖ∂Êú¨Ë∫´ÁöÑÂä®‰ΩúÁß∞‰∏∫@dfn{ÈÄíÂΩí}„ÄÇ

ÊâÄÊúâÁöÑÂÜÖÂª∫ÂáΩÊï∞ËøîÂõû‰∏Ä‰∏™ÂÄºÁªôÂÆÉ‰ªñÁöÑË∞ÉÁî®ËÄÖ„ÄÇÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰πüÂèØ‰ª•Ëøô‰πàÂÅöÔºåÂè™ÈúÄË¶Å‰ΩøÁî® @code{return} ËØ≠Âè•ÔºåÂÆÉÂú® @ref{Return Statement}ÔºåËøõË°åËØ¶ÁªÜÁöÑÊèèËø∞„ÄÇÊú¨@value{SECTION}‰∏≠ÂêéÁª≠ÁöÑÂæàÂ§ö‰æãÂ≠êÈÉΩ‰ΩøÁî® @code{return} ËØ≠Âè•„ÄÇ

@cindex common extensions, @code{func} keyword
@cindex extensions, common@comma{} @code{func} keyword
@c @cindex @command{awk} language, POSIX version
@c @cindex POSIX @command{awk}
@cindex POSIX @command{awk}, @code{function} keyword in
Âú®ÂæàÂ§öÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÂåÖÊã¨ @command{gawk}ÔºåÂÖ≥ÈîÆËØç @code{function} ÂèØ‰ª•ÁÆÄÂÜô‰∏∫ @code{func}„ÄÇ@value{COMMONEXT}
‰ΩÜÊòØ POSIX Âè™ÊåáÂÆö‰∫Ü‰ΩøÁî®ÂÖ≥ÈîÆËØç @code{function}„ÄÇÂÆûÈôÖ‰∏äÊúâ‰∏Ä‰∫õÂÆûË∑µ‰∏äÁöÑÈöê‰πâ„ÄÇÂ¶ÇÊûú @command{gawk} ÊòØ POSIX ÂÖºÂÆπÊ®°ÂºèÔºàÊü•Áúã @ref{Options}ÔºâÔºåÂàô‰∏ãÈù¢ÁöÑËØ≠Âè•@emph{‰∏ç‰ºö}ÂÆö‰πâ‰∏Ä‰∏™ÂáΩÊï∞Ôºö

@example
func foo() @{ a = sqrt($1) ; print a @}
@end example

@noindent
Áõ∏ÂèçÔºåÂÆÉÂÆö‰πâ‰∫ÜËøôÊ†∑ÁöÑ‰∏Ä‰∏™ËßÑÂàôÔºöÂØπÊØè‰∏Ä‰∏™ËÆ∞ÂΩïÔºåËøûÊé•ÂèòÈáè @samp{func} ÁöÑÂÄº‰∏éÂáΩÊï∞ @samp{foo} ÁöÑËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÁªìÊûúÂ≠ó‰∏≤ÊòØÈùûÁ©∫ÁöÑÔºåÂä®‰ΩúÂ∞±‰ºöË¢´ÊâßË°å„ÄÇËøôÂèØËÉΩ‰∏çÊòØÊâÄÊÉ≥Ë¶ÅÁöÑ„ÄÇÔºà@command{awk} Êé•Êî∂ËøôÊ†∑ÁöÑËæìÂÖ•‰∏∫ËØ≠Ê≥ïÊúâÊïàÔºåÂõ†Ê≠§ÂáΩÊï∞ÂèØ‰ª•Âú®ÂÆÉ‰ª¨Âú® @command{awk} Á®ãÂ∫è‰∏≠ÂÆö‰πâ‰πãÂâçË¢´Ë∞ÉÁî®„ÄÇ@footnote{Ëøô‰∏™Á®ãÂ∫èÂÆûÈôÖ‰∏ä‰∏ç‰ºöËøêË°åÔºåÂõ†‰∏∫ @code{foo()} ÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇ}Ôºâ

@cindex portability, functions@comma{} defining
‰∏∫‰∫Ü‰øùËØÅ‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÊòØÂèØÁßªÊ§çÁöÑÔºåÂú®ÂÆö‰πâÂáΩÊï∞Êó∂ÔºåÊÄªÊòØ‰ΩøÁî®ÂÖ≥ÈîÆÂ≠ó @code{function}„ÄÇ

@node Function Example
@subsection ÂáΩÊï∞ÂÆö‰πâËåÉ‰æã
@cindex function definition example

‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑ‰æãÂ≠êÔºåÂáΩÊï∞ÂêçÂ≠óÂè´ @code{myprint()}ÔºåËØ•ÂáΩÊï∞ÂèñÂæó‰∏Ä‰∏™Êï∞ÂÄºÔºåÂπ∂‰ª•ÊåáÂÆöÁöÑÊ†ºÂºèÊâìÂç∞ÂÆÉÔºö

@example
function myprint(num)
@{
     printf "%6.3g\n", num
@}
@end example

@noindent
‰∏∫‰∫ÜËß£Ê∏ÖÊ•öÔºå‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰ΩøÁî® @code{myprint()} ÂáΩÊï∞ÁöÑ @command{awk} ËßÑÂàôÔºö

@example
$3 > 0     @{ myprint($3) @}
@end example

@noindent
Ê≠§Á®ãÂ∫èÁî®Êàë‰ª¨ÁâπÂÆöÁöÑÊ†ºÂºèÊâìÂç∞ÊâÄÊúâËæìÂÖ•‰∏≠Á¨¨‰∏â‰∏™ÂüüÊòØÊ≠£Êï∞ÁöÑÂüü„ÄÇÂõ†Ê≠§ÔºåÂΩìÊúâ‰∏ãÈù¢ÁöÑËæìÂÖ•Êó∂Ôºö

@example
 1.2   3.4    5.6   7.8
 9.10 11.12 -13.14 15.16
17.18 19.20  21.22 23.24
@end example

@noindent
Áî®Êàë‰ª¨ÁöÑÁ®ãÂ∫èÊ†ºÂºèÔºåÂàô‰ºöÊâìÂç∞Ôºö

@example
   5.6
  21.2
@end example

‰∏ãÈù¢Ëøô‰∏™ÂáΩÊï∞Âà†Èô§Êï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºàÂõûÂøÜ‰∏Ä‰∏ãÈ¢ùÂ§ñÁöÑÁ©∫Ê†ºÊù•Ê†áËØÜÊú¨Âú∞ÂèòÈáèÂàóË°®ÔºâÔºö

@example
function delarray(a,    i)
@{
    for (i in a)
        delete a[i]
@}
@end example

ÂΩì‰∏éÊï∞ÁªÑ‰∏ÄËµ∑ÊâßË°åÊó∂ÔºåÂ∏∏Â∏∏ÈúÄË¶ÅÂà†Èô§Êï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåÂπ∂ÂºÄÂßã‰∏Ä‰∏™Êñ∞ÁöÑÂÖÉÁ¥†ÂàóË°®ÔºàÊü•Áúã @pxref{Delete}Ôºâ„ÄÇ‰∏∫‰∫Ü‰∏çÂú®ÊØè‰∏™Ë¶ÅÊ∏ÖÈô§Êï∞ÁªÑÁöÑÂú∞ÊñπÈÉΩË¶ÅÈáçÂ§çÂú∞ÂÜôËøôÊ†∑ÁöÑÂæ™ÁéØÔºå‰Ω†ÁöÑÁ®ãÂ∫èÂ∞±Âè™Ë∞ÉÁî® @code{delarray()}„ÄÇÔºàËøô‰øùËØÅ‰∫ÜÁßªÊ§çÊÄß„ÄÇ@samp{delete @var{array}} ÁöÑ‰ΩøÁî®Áî®Êù•Âà†Èô§Êï¥‰∏™Êï∞ÁªÑÊòØÊúÄÊñ∞Ëøë ÊâçÂä†ÂÖ•Âà∞ POSIX Ê†áÂáÜ‰∏≠ÁöÑ„ÄÇ@footnote{2012 Âπ¥ÁöÑÊôö‰∫õÊó∂ÂÄô„ÄÇ}Ôºâ

‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ÈÄíÂΩíÂáΩÊï∞ÁöÑ‰æãÂ≠ê„ÄÇÂÆÉÂèñ‰∏Ä‰∏™Â≠ó‰∏≤‰Ωú‰∏∫ËæìÂá∫ÂèÇÊï∞ÔºåÂπ∂ËøîÂõûÈÄÜÂ∫èÂ≠ó‰∏≤„ÄÇÈÄíÂΩíÂáΩÊï∞ÂøÖÈ°ªÊúâ‰∏Ä‰∏™ÊµãËØïÊù°‰ª∂Êù•ÂÅúÊ≠¢ÈÄíÂΩí„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂú®ËæìÂÖ•‰∏≤‰∏∫Á©∫Êó∂Â∞±ÁªìÊùüÈÄíÂΩíÔºö

@c 8/2014: Thanks to Mike Brennan for the improved formulation
@cindex @code{rev()} user-defined function
@example
function rev(str)
@{
    if (str == "")
        return ""

    return (rev(substr(str, 2)) substr(str, 1, 1))
@}
@end example

Â¶ÇÊûúËøô‰∏™ÂáΩÊï∞Âú®‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ @file{rev.awk} ÁöÑÊñá‰ª∂‰∏≠ÔºåÊàë‰ª¨ÂèØ‰ª•Ëøô‰πàÊù•ÊµãËØïÔºö

@example
$ @kbd{echo "Don't Panic!" |}
> @kbd{gawk -e '@{ print rev($0) @}' -f rev.awk}
@print{} !cinaP t'noD
@end example

C ÁöÑ @code{ctime()} ÂáΩÊï∞ËæìÂÖ•‰∏Ä‰∏™Êó∂Èó¥Êà≥ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™Áî®Â∏∏Áî®ÁöÑÂΩ¢ÂºèÊ†ºÂºèÂåñÁöÑÂ≠ó‰∏≤„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî®ÂÜÖÁΩÆÂáΩÊï∞ @code{strftime()}ÔºàÊü•Áúã @ref{Time Functions}ÔºâÊù•ÂàõÂª∫‰∏Ä‰∏™ @command{awk} ÁâàÊú¨ÁöÑ @code{ctime()}„ÄÇ

@cindex @code{ctime()} user-defined function
@example
@c file eg/lib/ctime.awk
# ctime.awk
#
# awk version of C ctime(3) function

function ctime(ts,    format)
@{
    format = "%a %b %e %H:%M:%S %Z %Y"

    if (ts == 0)
        ts = systime()       # use current time as default
    return strftime(format, ts)
@}
@c endfile
@end example

‰Ω†ÂèØËÉΩËÆ§‰∏∫ @code{ctime()} ÂèØ‰ª•‰ΩøÁî® @code{PROCINFO["strftime"]} Êù•‰Ωú‰∏∫Ê†ºÂºè‰∏≤„ÄÇ‰ΩÜÈÇ£‰ºöÊòØ‰∏™ÈîôËØØÔºåÂõ†‰∏∫ @code{ctime()} ÂÅáËÆæËøîÂõûÁöÑÊòØÊ†áÂáÜÁöÑÊ†ºÂºèÔºåËÄåÁî®Êà∑Á∫ßÁöÑ‰ª£Á†ÅÂèØËÉΩÂ∑≤ÁªèÊõ¥Êîπ‰∫Ü @code{PROCINFO["strftime"]}„ÄÇ

@node Function Caveats
@subsection Ë∞ÉÁî®Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞

@cindex functions, user-defined, calling
Ë∞É@dfn{Áî®‰∏Ä‰∏™ÂáΩÊï∞}‰ºöÂØºËá¥ÈÇ£‰∏™ÂáΩÊï∞Ë¢´ÊâßË°å„ÄÇË∞ÉÁî®Ë∞ÉÁî®ÊòØ‰∏Ä‰∏™Ë°®ËææÂºèÔºåÂÖ∂ÂÄºÂ∞±ÊòØÂáΩÊï∞ËøîÂõûÁöÑÂÄº„ÄÇ

@menu
* Calling A Function::          Don't use spaces.
* Variable Scope::              Controlling variable scope.
* Pass By Value/Reference::     Passing parameters.
@end menu

@node Calling A Function
@subsubsection Â¶Ç‰ΩïË∞ÉÁî®ÂáΩÊï∞

ÂáΩÊï∞Ë∞ÉÁî®ÂåÖÂê´ÂáΩÊï∞ÂêçÔºåÂêéÈù¢ÂÜçË∑üÁùÄÂú®Êã¨Âè∑‰∏≠ÁöÑÂèÇÊï∞„ÄÇ@command{awk} Ë°®ËææÂºèÂ∞±ÊòØÁî®ÊääÂèÇÊï∞ÂÜôÂú®ÂáΩÊï∞Ë∞ÉÁî®‰∏≠„ÄÇÊØèÊ¨°Ë∞ÉÁî®ÊâßË°åÊó∂ÔºåËøô‰∫õË°®ËææÂºè‰ºöÂÖàÊ±ÇÂÄºÔºåÁÑ∂ÂêéÂÄº‰∏∫Êàê‰∏∫ÂÆûÈôÖÁöÑÂèÇÊï∞„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢ÊòØ‰∏Ä‰∏™Áî®‰∏â‰∏™ÂèÇÊï∞Ë∞ÉÁî® @code{foo()} ÂáΩÊï∞‰æãÂ≠êÔºàÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ËøûÊé•ÔºâÔºö

@example
foo(x y, "lose", 4 * z)
@end example

@quotation Ê≥®ÊÑè
Âú®ÂáΩÊï∞Âêç‰∫ÜÂèÇÊï∞ÂàóË°®ÁöÑÂºÄÊã¨Âè∑‰πãÈó¥ÁöÑÁ©∫ÁôΩÔºàÁ©∫Ê†º‰∏é TABsÔºâÊòØ‰∏çÂÖÅËÆ∏ÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÂ∞èÂøÉÂÜô‰∫Ü‰∏™Á©∫ÁôΩÂú®ÈáåÈù¢Ôºå@command{awk} ÂèØËÉΩÂ∞Ü‰Ω†ÁöÑÊÑèÊÄùÁêÜËß£ÊàêÊù•ËøûÊé•‰∏Ä‰∏™ÂèòÈáè‰∏éÊã¨Âè∑Ë°®ËææÂºèÁöÑÂÄº„ÄÇ‰ΩÜÊòØÔºåÊúÄÂêéÂÆÉ‰ºöÊ≥®ÊÑèÂà∞‰Ω†‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞ÂêçÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™ÂèòÈáèÂêçÔºåÂõ†Ê≠§‰ºöÊä•‰∏Ä‰∏™ÈîôËØØ„ÄÇ
@end quotation

@node Variable Scope
@subsubsection ÊéßÂà∂ÂèòÈáè‰ΩúÁî®Âüü

@cindex local variables, in a function
@cindex variables, local to a function
‰∏çÂÉèÂÖ∂‰ªñÁöÑÂæàÂ§öËØ≠Ë®ÄÔºåÂú® @command{awk} Ê≤°ÊúâÂäûÊ≥ï‰Ωø‰∏Ä‰∏™ÂèòÈáèÂè™Âú® @code{@{} @dots{} @code{@}} Âùó‰∏≠Êúâ‰ΩúÁî®Ôºå‰ΩÜÊòØ‰Ω†ÂèØ‰ª•‰Ωø‰∏Ä‰∏™ÂèòÈáèÊàê‰∏∫‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÊú¨Âú∞ÂèòÈáè„ÄÇËøô‰πàÂÅöÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂÆûË∑µÔºåÂú®‰ªª‰ΩïÊó∂ÂÄôÂú®ÂáΩÊï∞‰∏≠‰ΩøÁî®‰∏Ä‰∏™ÂèòÈáèÊó∂ÔºåÈÉΩÂ∞ÜÂÖ∂ÁΩÆÊàêÊú¨Âú∞ÂèòÈáè„ÄÇ

‰∏∫‰∫Ü‰Ωø‰∏Ä‰∏™ÂèòÈáèÊàê‰∏∫ÂáΩÊï∞ÁöÑÊú¨Âú∞ÂèòÈáèÔºåÂè™ÈúÄË¶ÅÁÆÄÂçïÂú∞Âú®ÂÆûÈôÖÁöÑÂèÇÊï∞ÔºàÊü•Áúã @pxref{Definition Syntax}ÔºâÁöÑÂêéÈù¢Â£∞ÊòéÂ∞±ÂèØ‰ª•„ÄÇÁúã‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºåÂèòÈáè @code{i} ÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáèÔºåÂç≥ÂèØ‰ª•Ë¢´ @code{foo()} ‰ΩøÁî®Ôºå‰πüÂèØ‰ª•Ë¢´ @code{bar()} ‰ΩøÁî®Ôºö

@example
function bar()
@{
    for (i = 0; i < 3; i++)
        print "bar's i=" i
@}

function foo(j)
@{
    i = j + 1
    print "foo's i=" i
    bar()
    print "foo's i=" i
@}

BEGIN @{
      i = 10
      print "top's i=" i
      foo(0)
      print "top's i=" i
@}
@end example

ÊâßË°åËøô‰∏™ËÑöÊú¨ÔºåÂàô‰ºö‰∫ßÁîü‰∏ãÈù¢ÁöÑËæìÂá∫ÔºåÂõ†‰∏∫ @code{i} Âú® @code{foo()} ÂáΩÊï∞‰∏é @code{bar()} ÂáΩÊï∞‰∏≠‰ª•ÂèäÂú®ÊúÄÈ°∂Â±ÇÈÉΩÊåáÂêëÂêå‰∏Ä‰∏™ÂèòÈáèÂÆû‰ΩìÔºö

@example
top's i=10
foo's i=1
bar's i=0
bar's i=1
bar's i=2
foo's i=3
top's i=3
@end example

Â¶ÇÊûú‰Ω†ÊÉ≥ @code{i} Êàê‰∏∫ @code{foo()} ‰∏é @code{bar()} ÁöÑÊú¨Âú∞ÂèòÈáèÔºåËøë‰∏ãÈù¢Ëøô‰πàÂÅöÔºàÂú® @code{i} ‰πãÂâçÁöÑÈ¢ùÂ§ñÁ©∫Ê†ºÊòØ‰∏ÄÁßçÁºñÁ†Å‰π†ÊÉØÔºå‰ª•Áî®Êù•Ë°®Á§∫ @code{i} ÊòØ‰∏Ä‰∏™Êú¨Âú∞ÂèòÈáèÔºåËÄå‰∏çÊòØ‰∏Ä‰∏™ÂèÇÊï∞ÔºâÔºö

@example
function bar(    i)
@{
    for (i = 0; i < 3; i++)
        print "bar's i=" i
@}

function foo(j,    i)
@{
    i = j + 1
    print "foo's i=" i
    bar()
    print "foo's i=" i
@}

BEGIN @{
      i = 10
      print "top's i=" i
      foo(0)
      print "top's i=" i
@}
@end example

ÊâßË°å‰øÆÊ≠£ËøáÁöÑËÑöÊú¨‰∫ßÁîüÂ¶Ç‰∏ãËæìÂá∫Ôºö

@example
top's i=10
foo's i=1
bar's i=0
bar's i=1
bar's i=2
foo's i=1
top's i=10
@end example

Èô§‰∫ÜÊ†áÈáèÔºàÂ≠ó‰∏≤‰∏éÊï∞ÂÄºÔºâÂ§ñÔºå‰Ω†‰πüÂèØ‰ª•ÊúâÊú¨Âú∞Êï∞ÁªÑ„ÄÇÈÄöËøáÂ∞ÜÊüê‰∏™ÂèòÈáèÂêçÁî®‰ΩúÊï∞ÁªÑÔºå@command{awk} Â∞±‰ºöÂ∞ÜÂÖ∂ÂΩì‰∏∫Êï∞ÁªÑÔºåÂπ∂‰∏îÊòØÂáΩÊï∞ÁöÑÊú¨Âú∞Êï∞ÁªÑ„ÄÇÂè¶Â§ñÔºåÈÄíÂΩíË∞ÉÁî®‰ºöÂàõÂª∫Êñ∞ÁöÑÊï∞ÁªÑ„ÄÇËÄÉËôë‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö

@example
function some_func(p1,      a)
@{
    if (p1++ > 3)
        return

    a[p1] = p1

    some_func(p1)

    printf("At level %d, index %d %s found in a\n",
         p1, (p1 - 1), (p1 - 1) in a ? "is" : "is not")
    printf("At level %d, index %d %s found in a\n",
         p1, p1, p1 in a ? "is" : "is not")
    print ""
@}

BEGIN @{
    some_func(1)
@}
@end example

ÂΩìÊâßË°åÊó∂ÔºåÁ®ãÂ∫è‰∫ßÁîü‰∏ãÈù¢ÁöÑËæìÂá∫Ôºö

@example
At level 4, index 3 is not found in a
At level 4, index 4 is found in a

At level 3, index 2 is not found in a
At level 3, index 3 is found in a

At level 2, index 1 is not found in a
At level 2, index 2 is found in a
@end example

@node Pass By Value/Reference
@subsubsection ÂáΩÊï∞ÂèòÈáè‰∏≠ÁöÑ‰º†ÂèÇ‰∏é‰º†ÂºïÁî®

Âú® @command{awk} ‰∏≠ÔºåÂΩì‰Ω†Â£∞Êòé‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊ≤°ÊúâÂäûÊ≥ïÊòæÂºèÂú∞Â£∞ÊòéÂèÇÊï∞ÊòØÈÄöËøá‰º†@dfn{ÂÄº}ËøòÊòØ‰º†@dfn{ÂºïÁî®}„ÄÇ

Áõ∏ÂèçÔºå‰º†ÈÄíËßÑËåÉÊòØÂú®ÂáΩÊï∞Ë∞ÉÁî®Êó∂Ê†πÊçÆ‰∏ãÈù¢ÁöÑËßÑÂàôÊù•Âä®ÊÄÅÁ°ÆÂÆöÁöÑÔºöÂ¶ÇÊûúÂèÇÊï∞ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂèòÈáèÔºåÂàôÊòØÈÄöËøá‰º†ÂºïÁî®„ÄÇÂê¶ÂàôÔºåÂèÇÊï∞Â∞±ÊòØÈÄöËøá‰º†ÂÄº„ÄÇ

@cindex call by value
ÂΩìË∞ÉÁî®ÂèÇÊï∞ÂØπÂèÇÊï∞ËøõË°å‰º†ÂÄºÔºåÊÑèÊòØÊòØËØ¥ÔºåÂÆÉÁªô‰∫ÜÂèÇÊï∞‰∏Ä‰∏™@emph{Â§çÊú¨}„ÄÇË∞ÉÁî®ËÄÖ‰ΩøÁî®ÂèòÈáèÊù•‰ΩúÁî®ÂèÇÊï∞ÁöÑË°®ËææÂºèÔºå‰ΩÜÊòØË¢´Ë∞ÉÁî®ÁöÑÂáΩÊï∞Âç¥Âπ∂‰∏çÁü•ÈÅìËøôÂõû‰∫ã‚Äî‚ÄîÂÆÉÂè™Áü•ÈÅìÂèÇÊï∞ÂÖ∑Êúâ‰ªÄ‰πàÊ†∑ÁöÑÂÄº„ÄÇ‰æãÂ¶ÇÔºåÂ¶ÇÊûú‰Ω†ÂÜô‰∫Ü‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
foo = "bar"
z = myfunc(foo)
@end example

@noindent
Âàô‰Ω†‰∏çË¶ÅÂ∞Ü @code{myfunc()} ÁöÑÂèÇÊï∞ÊÉ≥Ë±°‰∏∫‚Äú@code{foo} ÂèòÈáè‚Äù„ÄÇÁõ∏ÂèçÔºåÂàôÂ∫îËØ•Â∞ÜÂèÇÊï∞ÊÉ≥‰∏∫Â≠ó‰∏≤ÂÄº @code{"bar"}„ÄÇ
Â¶ÇÊûúÂáΩÊï∞ @code{myfunc()} ÊîπÂèò‰∫ÜÂÆÉÊú¨Âú∞ÂèòÈáèÁöÑÂÄºÔºåÂÆÉÂØπ‰∫éÂÖ∂‰ªñÁöÑÂèòÈáèÊ≤°Êúâ‰ªª‰ΩïÂΩ±Âìç„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûú @code{myfunc()} ÊâßË°åÔºö

@example
function myfunc(str)
@{
   print str
   str = "zzz"
   print str
@}
@end example

@noindent
Êù•ÊîπÂèòÂÆÉÁöÑÂèÇÊï∞ÂèòÈáè @code{str}ÔºåÂÆÉ@emph{‰∏ç‰ºö}Êõ¥ÊîπË∞ÉÁî®ËÄÖ @code{foo} ÁöÑÂÄº„ÄÇÂú®Ë∞ÉÁî® @code{myfunc()} ‰∏≠ @code{foo} ÁöÑËßíËâ≤Â∞±Âú®ÂÆÉÁöÑÂÄºÔºà@code{"bar"}ÔºâË¢´ËÆ°ÁÆóÂÆåÂêéÁªìÊùü‰∫Ü„ÄÇÂ¶ÇÊûú @code{str} ‰πüÂú® @code{myfunc()} ‰πãÂ§ñÂ≠òÂú®ÔºåÂàôÂáΩÊï∞‰Ωì‰∏çËÉΩÊõ¥ÊîπÂ§ñÈù¢ÁöÑÂÄºÔºåÂõ†‰∏∫ÂÆÉÂ∑≤ÁªèÂú® @code{myfunc()} ÊâßË°åÊó∂Ë¢´ÈÅÆÁõñÊéâ‰∫ÜÔºå‰∏çËÉΩ‰ªéÈÇ£‰∏™Âú∞ÊñπË¢´ÁúãÂà∞Ôºå‰πü‰∏çËÉΩË¢´ÊîπÂèò„ÄÇ

@cindex call by reference
@cindex arrays, as parameters to functions
@cindex functions, arrays as parameters to
‰ΩÜÊòØÔºåÂΩìË∞ÉÁî®ÂáΩÊï∞‰º†ÈÄíÁöÑÊòØ‰∏Ä‰∏™Êï∞ÁªÑÊó∂ÔºåÂ∞±@emph{‰∏ç‰ºö}ÊâßË°åÂ§çÂà∂„ÄÇÁõ∏ÂèçÔºåÊï∞ÁªÑÂèòÈáèÊú¨Ë∫´‰ºöË¢´ÂáΩÊï∞ËøõË°åÁõ¥Êé•Êìç‰Ωú„ÄÇËøô‰∏™Âú®ÊúØËØ≠‰∏ä‰∏ÄËà¨Âè´‰Ωú@dfn{ÂºïÁî®Ë∞ÉÁî®}„ÄÇÂú®ÂáΩÊï∞‰ΩìÂÜÖÂØπ‰∫éÊï∞ÁªÑÁöÑÊõ¥ÊîπÂú®ÂáΩÊï∞Â§ñÈÉ®‰πü@emph{ÊòØ}ÂèØËßÅÁöÑ„ÄÇ

@quotation ÊèêÁ§∫
Â¶ÇÊûú‰Ω†Áúã‰∏çÂà∞‰Ω†ÊâÄÂÅöÁöÑ‰∫ãÊÉÖÔºåÂú®ÂáΩÊï∞‰∏≠ÊîπÂèòÊï∞ÁªÑÂèÇÊï∞‰ºöÈùûÂ∏∏Âç±Èô©„ÄÇÂ¶ÇÔºö

@example
function changeit(array, ind, nvalue)
@{
     array[ind] = nvalue
@}

BEGIN @{
    a[1] = 1; a[2] = 2; a[3] = 3
    changeit(a, 2, "two")
    printf "a[1] = %s, a[2] = %s, a[3] = %s\n",
            a[1], a[2], a[3]
@}
@end example

@noindent
‰ºöÊâìÂç∞ @samp{a[1] = 1, a[2] = two, a[3] = 3}ÔºåÂõ†‰∏∫ @code{changeit()} ‰ºöÂ∞Ü @code{"two"} Â≠òÂÇ®Âà∞ @code{a} ÁöÑÁ¨¨‰∫å‰∏™ÂÖÉÁ¥†‰∏≠„ÄÇ
@end quotation

@cindex undefined functions
@cindex functions, undefined
Êúâ‰∏Ä‰∫õ @command{awk} ÂÆûÁé∞ÂèØ‰ª•ËÆ©‰Ω†Ë∞ÉÁî®ËøòÊ≤°ÊúâÂÆö‰πâÁöÑÂáΩÊï∞„ÄÇÂΩìÁ®ãÂ∫èÂÆûÈôÖ‰∏äËØïÂõæË∞ÉÁî®Êó∂ÔºåÂÆÉÂè™Âú®ËøêË°åÊó∂Êä•ÂëäÈóÆÈ¢ò„ÄÇÂ¶ÇÔºö

@example
BEGIN @{
    if (0)
        foo()
    else
        bar()
@}
function bar() @{ @dots{} @}
# note that `foo' is not defined
@end example

@noindent
Âõ†‰∏∫ @samp{if} ËØ≠Âè•ÂÜ≥‰∏ç‰ºö‰∏∫ trueÔºå@code{foo()} Ê≤°ÊúâÂÆö‰πâ‰πü‰∏ç‰ºöÊòØ‰∏™ÁúüÊ≠£ÁöÑÈóÆÈ¢ò„ÄÇ‰ΩÜÊòØÔºå‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÁ®ãÂ∫èË∞ÉÁî®‰∏Ä‰∏™Ê≤°ÊúâÂÆö‰πâÁöÑÂáΩÊï∞Á°ÆÂÆûÊòØ‰∏™ÈóÆÈ¢ò„ÄÇ

@cindex lint checking, undefined functions
Â¶ÇÊûúÊåáÂÆö‰∫Ü @option{--lint} ÂèÇÊï∞ÔºàÊü•Áúã @ref{Options}ÔºâÔºå@command{gawk} ‰ºöÊä•ÂëäË∞ÉÁî®Áî®‰∫ÜÊú™ÂÆö‰πâÁöÑÂáΩÊï∞„ÄÇ

@cindex portability, @code{next} statement in user-defined functions
Â¶ÇÊûú‰Ω†Âú®Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰∏≠‰ΩøÁî®‰∫Ü @code{next} ËØ≠Âè•ÊàñËÄÖ @code{nextfile} ËØ≠Âè•ÔºàÊü•Áúã @ref{Next Statement}Ôºå‰ª•Âèä‰∏Ä‰∫õ 
@ifdocbook
 @ref{Next Statement}ÔºâÔºå
@end ifdocbook
@ifnotdocbook
 @ref{Next Statement}ÔºâÔºå
@end ifnotdocbook
@command{awk} ÂÆûÁé∞‰ºö‰∫ßÁîü‰∏Ä‰∏™ËøêË°åÊó∂ÈîôËØØ„ÄÇ@command{gawk} ÂàôÊ≤°ÊúâËøô‰∏™ÈôêÂà∂„ÄÇ 

@node Return Statement
@subsection @code{return} ËØ≠Âè•
@cindex @code{return} statement@comma{} user-defined functions

Â¶ÇÂú®‰πãÂâçÁöÑÂá†‰∏™‰æãÂ≠ê‰∏≠ÊâÄËßÅÂà∞ÁöÑÔºåÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞‰ΩìÂÜÖÂèØ‰ª•ÂåÖÂê´‰∏Ä‰∏™ @code{return} ËØ≠Âè•„ÄÇËøô‰∏™ËØ≠Âè•Â∞ÜÊéßÂà∂ËøîÂõûÂà∞ @command{awk} Á®ãÂ∫èË∞ÉÁî®ÁöÑÂú∞Êñπ„ÄÇ‰πüÂèØ‰ª•Áî®‰∫éËøîÂõû‰∏Ä‰∏™ÂÄºÔºå‰ª•Âú® @command{awk} Á®ãÂ∫èÁöÑÂêéÈù¢Êù•‰ΩøÁî®„ÄÇÁúãÊù•Ëµ∑ÂÖ∂ÂΩ¢ÂºèÂ¶Ç‰∏ãÔºö

@display
@code{return} [@var{expression}]
@end display

@var{expression} ÁöÑÈÉ®ÂàÜÊòØÂèØÈÄâÁöÑ„ÄÇÊûÅÊúâÂèØËÉΩÊòØÂõ†‰∏∫ÁñèÂøΩÔºåPOSIX Ê≤°ÊúâÂÆö‰πâÂ¶ÇÊûú @var{expression} Ë¢´ÁúÅÁï•ÁöÑÊÉÖÂÜµ‰∏ãËØ•ËøîÂõû‰ªÄ‰πàÊ†∑ÁöÑÂÄº„ÄÇ‰ªéÊäÄÊúØ‰∏äËØ¥ÔºåËøô‰ºö‰ΩøËøîÂõûÁöÑÂÄºÊòØÊú™ÂÆö‰πâÁöÑÔºåÂõ†Ê≠§‰πüÊòØ‰∏çÂèØÈ¢ÑÊµãÁöÑ„ÄÇ‰ΩÜÊòØÂú®ÂÆûË∑µ‰∏≠ÔºåÊâÄÊúâÁöÑ @command{awk} ÁâàÊú¨ÈÉΩÊòØÁÆÄÂçïÂú∞ËøîÂõû‰∏Ä‰∏™Á©∫‰∏≤ÔºåÂú®ÈúÄË¶ÅÊï∞ÂÄºÁöÑ‰∏ä‰∏ãÊñáÂàô‰∏∫ 0„ÄÇ

@code{return} ËØ≠Âè•‰∏≠Ê≤°Êúâ @var{expression} Ë¢´ÂÅáËÆæ‰∏∫ÊØè‰∏Ä‰∏™ÂáΩÊï∞ÂÆö‰πâÁöÑÂÆåÊàêÂ§Ñ„ÄÇÊâÄ‰ª•ÔºåÂ¶ÇÊûúÊéßÂà∂Âà∞Ëææ‰∫ÜÂáΩÊï∞‰ΩìÁöÑÂ∞æÈÉ®ÔºåÂáΩÊï∞ÊäÄÊúØÊÄßÂú∞ËøîÂõû‰∏Ä‰∏™‰∏çÂèØÈ¢ÑÊµãÁöÑÂÄº„ÄÇÂú®ÂÆûË∑µ‰∏≠ÔºåÂÆÉËøîÂõû‰∏Ä‰∏™Á©∫‰∏≤„ÄÇ@command{awk} Âú®‰Ω†‰ΩøÁî®ËøôÊ†∑ÁöÑÂáΩÊï∞ËøîÂõûÂÄºÊòØ@emph{‰∏ç‰ºö}‰∫ßÁîüÂëäË≠¶„ÄÇ

ÊúâÊó∂Ôºå‰Ω†ÊÉ≥ÂÜôÁöÑÂáΩÊï∞‰Ω†ÂÖ≥Ê≥®ÁöÑÊòØÂÆÉÊâÄÂÅöÁöÑÔºåËÄå‰∏çÊòØÂÆÉÊâÄËøîÂõûÁöÑ„ÄÇËøôÊ†∑ÁöÑÂáΩÊï∞‰∏é C „ÄÅC++ ÊàñËÄÖ Java ‰∏≠ÁöÑ @code{void} ÂáΩÊï∞‰ª•Âèä Ada ‰∏≠ÁöÑ @code{procedure} ÂáΩÊï∞ÂØπÂ∫î„ÄÇÊâÄ‰ª•Ôºå‰∏çËøîÂõû‰ªª‰ΩïÂÄºÊòØÊÅ∞ÂΩìÁöÑÔºåÂè™ÈúÄË¶ÅÁÆÄÂçïÂú∞ËÆ∞‰Ωè‰∏çË¶Å‰ΩøÁî®Ëøô‰∫õÂèÇÊï∞ÁöÑËøîÂõûÂÄºÂç≥ÂèØ„ÄÇ

‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊòØ‰∏Ä‰∏™ËøîÂõûÊï∞ÁªÑÂÖÉÁ¥†‰∏≠ÊúÄÂ§ßÁöÑÊï∞ÂÄºÁöÑÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞Ôºö

@example
function maxelt(vec,   i, ret)
@{
     for (i in vec) @{
          if (ret == "" || vec[i] > ret)
               ret = vec[i]
     @}
     return ret
@}
@end example

@cindex programming conventions, function parameters
@noindent
‰Ω†Áî®‰∏Ä‰∏™ÂèÇÊï∞Êù•Ë∞ÉÁî® @code{maxelt()}ÔºåËøô‰∏™ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÂêç„ÄÇÊú¨Âú∞ÂèòÈáè @code{i} ‰ª•Âèä @code{ret} ÈÉΩ‰∏çÊòØÁî®Êù•‰ΩúÂèÇÊï∞ÁöÑÔºåÊ≤°Êúâ‰ªÄ‰πàÂèØ‰ª•ÈòªÊ≠¢‰Ω†‰º†ÈÄíÂ§ö‰∫é‰∏Ä‰∏™ÂèÇÊï∞Âà∞ @code{maxelt()} ‰∏≠Ôºå‰ΩÜÈÇ£‰ºö‰∫ßÁîüÂ•áÊÄ™ÁöÑÁªìÊûú„ÄÇÂú®ÂèÇÊï∞ÂàóË°®‰∏≠Ôºå@code{i} ‰πãÂâçÈ¢ùÂ§ñÁöÑÁ©∫Ê†ºË°®Á§∫ @code{i} ‰∏é @code{ret} ÈÉΩÊòØÊú¨Âú∞ÂèòÈáè„ÄÇ‰Ω†Âú®ÂÆö‰πâÂáΩÊï∞Êó∂Â∫îËØ•‰ΩøÁî®Ëøô‰∫õÁöÑ‰π†ÊÉØ„ÄÇ

‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰ºö‰ΩøÁî® @code{maxelt()} ÂáΩÊï∞„ÄÇÂÆÉË£ÖÂÖ•‰∏Ä‰∏™Êï∞ÁªÑÔºåÁÑ∂ÂêéË∞ÉÁî® @code{maxelt()} ÁÑ∂ÂêéÊä•ÂëäÊï∞ÁªÑ‰∏≠ÁöÑÊúÄÂ§ßÂÖÉÁ¥†Ôºö

@example
function maxelt(vec,   i, ret)
@{
     for (i in vec) @{
          if (ret == "" || vec[i] > ret)
               ret = vec[i]
     @}
     return ret
@}

# Load all fields of each record into nums.
@{
     for(i = 1; i <= NF; i++)
          nums[NR, i] = $i
@}

END @{
     print maxelt(nums)
@}
@end example

Â¶ÇÊûúÊúâ‰∏ãÈù¢ÁöÑËæìÂÖ•Ôºö

@example
 1 5 23 8 16
44 3 5 2 8 26
256 291 1396 2962 100
-6 467 998 1101
99385 11 0 225
@end example

@noindent
ÂàôÁ®ãÂ∫èÊä•ÂëäÔºàÂèØÈ¢ÑÊµãÁöÑÔºâ99,385 ÊòØÊï∞ÁªÑ‰∏≠ÊúÄÂ§ßÁöÑÂÄº„ÄÇ

@node Dynamic Typing
@subsection ÂáΩÊï∞‰∏éÂÖ∂Âú®ÂèòÈáèÁ±ªÂûã‰∏äÁöÑÂΩ±Âìç

@command{awk} ÊòØ‰∏ÄÁßçÈùûÂ∏∏ÈöèÊÑèÁöÑËØ≠Ë®Ä„ÄÇ@command{awk} ÊúâÂèØËÉΩÂäûÊ≥ïÂëäËØâ‰Ω†‰∏Ä‰∏™Ê†áËØÜÁ¨¶ÊòØ‰∏Ä‰∏™Ê†áÈáèÂèòÈáèËøòÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÁõ¥Âà∞ËøêË°åÊó∂Êâç‰ºöÁü•ÈÅì„ÄÇËøôÊòØ‰∏Ä‰∏™Áî®Êù•ËØ¥ÊòéÁöÑ‰æãÂ≠êÁ®ãÂ∫èÔºö

@example
function foo(a)
@{
    a[1] = 1   # parameter is an array
@}

BEGIN @{
    b = 1
    foo(b)  # invalid: fatal type mismatch

    foo(x)  # x uninitialized, becomes an array dynamically
    x = 1   # now not allowed, runtime error
@}
@end example

Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÔºåÁ¨¨‰∏ÄÊ¨°Ë∞ÉÁî® @code{foo()} ‰ºö‰∫ßÁîü‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØÔºåÊâÄ‰ª• @command{awk} ‰∏ç‰ºöÊä•ÂëäÁ¨¨‰∫å‰∏™ÈîôËØØ„ÄÇÂ¶ÇÊûú‰Ω†Â∞ÜËøô‰∏™Ë∞ÉÁî®Ê≥®ÈáäÊéâÔºåÂàô @command{awk} ‰ºöÊä•Á¨¨‰∫å‰∏™ÈîôËØØ„ÄÇ

‰∏ÄËà¨Êù•ËØ¥ÔºåËøôÁßç‰∫ã‰∏çÊòØ‰ªÄ‰πàÂ§ßÈóÆÈ¢òÔºå‰ΩÜÊòØÂÄºÂæóÊ≥®ÊÑè„ÄÇ

@node Indirect Calls
@section Èó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®

@cindex indirect function calls
@cindex function calls, indirect
@cindex function pointers
@cindex pointers to functions
@cindex differences in @command{awk} and @command{gawk}, indirect function calls

Ëøô‰∏ÄËäÇÊèèËø∞‰∫Ü‰∏ÄÁßçÈ´òÁ∫ßÁöÑÔºåÁâπÂÆö‰∫é @command{gawk} ÁöÑÊâ©Â±ï„ÄÇ

ÁªèÂ∏∏ÁöÑÔºå‰Ω†Â∏åÊúõÂú®Áõ¥Êé•ËøêË°åÊó∂ÊâçÁ°ÆÂÆö‰Ω†Ë¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ‰æãÂ¶ÇÔºå‰Ω†Êúâ‰∏çÂêåÁ±ªÂûãÁöÑËÆ∞ÂΩïÔºåÊØè‰∏Ä‰∏™ÈÉΩË¶ÅÊúâ‰∏çÂêåÁöÑÂ§ÑÁêÜÊñπÂºè„ÄÇ

Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºå‰Ω†‰∏çÂæó‰∏çÁî®‰∏ÄÁ≥ªÂàóÁöÑ @code{if}-@code{else} ËØ≠Âè•Êù•ÂÜ≥ÂÆöË¶ÅË∞ÉÁî®Âì™‰∏Ä‰∏™ÂáΩÊï∞„ÄÇÈÄöËøá‰ΩøÁî®@dfn{Èó¥Êé•}ÂáΩÊï∞Ë∞ÉÁî®Ôºå‰Ω†ÂèØ‰ª•ÊåáÂÆöÂáΩÊï∞ÁöÑÂêçÂ≠ó‰∏∫‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÁÑ∂ÂêéÊù•ÂÜçË∞ÉÁî®ÂáΩÊï∞„ÄÇËÆ©Êàë‰ª¨Êù•Áúã‰∏ã‰∏Ä‰æãÂ≠êÔºö

ÂÅáËÆæ‰Ω†Êúâ‰∏Ä‰∏™Êñá‰ª∂ÔºåÈáåÈù¢Êúâ‰Ω†ÁöÑÈÄâÊã©ÁöÑËØæÁ®ãÁöÑÊµãËØïÊàêÁª©ÔºåÂπ∂‰∏î‰Ω†Â∏åÊúõÂèñÂæóËøô‰∫õÊàêÁª©ÁöÑÊÄªÂêà‰∏éÂπ≥ÂùáÂÄº„ÄÇÁ¨¨‰∏Ä‰∏™ÂüüÊòØ‰∏Ä‰∏™ËØæÁ®ãÂêç„ÄÇÂêéÈù¢ÁöÑÂüüÊòØÂáΩÊï∞Ë∞ÉÁî®Ë¶ÅÂ§ÑÁêÜÁöÑÊï∞ÁªÑÔºåÁõ¥Âà∞‰∏Ä‰∏™ÂüüÊ†áËØÜ @samp{data:} ‰∏∫Ê≠¢ÔºåÂú®Ê†áËØÜÂêéÈù¢Âà∞ËÆ∞ÂΩïÁöÑÊú´Â∞æÔºåÈÉΩÊòØ‰∏ÄÁ≥ªÂàóÁöÑÊµãËØïÊàêÁª©„ÄÇ

ËøôÈáåÊúÄÂºÄÂßãÁöÑÊñá‰ª∂Ôºö

@example
@c file eg/data/class_data1
Biology_101 sum average data: 87.0 92.4 78.5 94.9
Chemistry_305 sum average data: 75.2 98.3 94.7 88.2
English_401 sum average data: 100.0 95.6 87.1 93.4
@c endfile
@end example

‰∏∫‰∫ÜÂ§ÑÁêÜÊï∞ÊçÆÔºå‰Ω†ÂèØËÉΩÂºÄÂßãËøô‰πàÂÜôÔºö

@example
@{
    class = $1
    for (i = 2; $i != "data:"; i++) @{
        if ($i == "sum")
            sum()   # processes the whole record
        else if ($i == "average")
            average()
        @dots{}           # and so on
    @}
@}
@end example

@noindent
ËøôÊ†∑È£éÊ†ºÁöÑÁ®ãÂ∫è‰πüÂèØ‰ª•Ôºå‰ΩÜÊòØÁúãËµ∑Êù•ÊúâÁÇπÂà´Êâ≠„ÄÇÈÄöËøá@dfn{Èó¥Êé•}ÂáΩÊï∞Ë∞ÉÁî®Ôºå‰Ω†ÂëäËØâ @command{gawk} ‰ΩøÁî®ÂáΩÊï∞@emph{ÂêçÁß∞}ÂèòÈáèÁöÑ@emph{ÂÄº}‰Ωú‰∏∫ÂáΩÊï∞Êù•Ë∞ÉÁî®„ÄÇ

@cindex @code{@@}-notation for indirect function calls
@cindex indirect function calls, @code{@@}-notation
@cindex function calls, indirect, @code{@@}-notation for
ËØ≠Ê≥ïÈùûÂ∏∏Á±ª‰ºº‰∫éÂ∏∏ËßÑÁöÑÂáΩÊï∞Ë∞ÉÁî®Ôºö‰∏Ä‰∏™Ê†áËØÜÁ¨¶ÔºåÂêéÈù¢Ë∑üÁùÄ‰∏Ä‰∏™ÂºÄÊã¨Âè∑ÔºåÊâÄÊúâÁöÑÂèÇÊï∞ÔºåÁÑ∂ÂêéÊòØ‰∏Ä‰∏™Èó≠Êã¨Âè∑ÔºåÂä†‰∏ä‰∏Ä‰∏™ÂâçÂØºÁöÑ @samp{@@} Á¨¶Âè∑Ôºö

@example
the_func = "sum"
result = @@the_func()   # calls the sum() function
@end example

ËøôÊòØÂ§ÑÁêÜÂâçÊâÄÁ§∫ÁöÑÊï∞ÊçÆÁöÑÂÆåÊï¥Á®ãÂ∫èÔºå‰ΩøÁî®ÁöÑÊòØÈó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®Ôºö

@example
@c file eg/prog/indirectcall.awk
# indirectcall.awk --- Demonstrate indirect function calls
@c endfile
@ignore
@c file eg/prog/indirectcall.awk
#
# Arnold Robbins, arnold@skeeve.com, Public Domain
# January 2009
@c endfile
@end ignore

@c file eg/prog/indirectcall.awk
# average --- return the average of the values in fields $first - $last

function average(first, last,   sum, i)
@{
    sum = 0;
    for (i = first; i <= last; i++)
        sum += $i

    return sum / (last - first + 1)
@}

# sum --- return the sum of the values in fields $first - $last

function sum(first, last,   ret, i)
@{
    ret = 0;
    for (i = first; i <= last; i++)
        ret += $i

    return ret
@}
@c endfile
@end example

Ëøô‰∏§‰∏™ÂáΩÊï∞ÊúüÊúõÊòØÂ∑•‰Ωú‰∫éÂüüÔºåÂõ†Ê≠§ÔºåÂèÇÊï∞ @code{first} ‰∏é @code{last} Ë°®Á§∫ÂüüÂ§ÑÁêÜÁöÑÂºÄÂßã‰∏éÁªìÊùü„ÄÇÂê¶ÂàôÔºåÂÆÉ‰ª¨ÊâßË°åÊòØÊúüÊúõÁöÑËÆ°ÁÆó‰ΩÜ‰∏çÊ≠£Á°ÆÔºö

@example
@c file eg/prog/indirectcall.awk
# For each record, print the class name and the requested statistics
@{
    class_name = $1
    gsub(/_/, " ", class_name)  # Replace _ with spaces

    # find start
    for (i = 1; i <= NF; i++) @{
        if ($i == "data:") @{
            start = i + 1
            break
        @}
    @}

    printf("%s:\n", class_name)
    for (i = 2; $i != "data:"; i++) @{
        the_function = $i
        printf("\t%s: <%s>\n", $i, @@the_function(start, NF) "")
    @}
    print ""
@}
@c endfile
@end example

ËøôÊòØÂ§ÑÁêÜÊØè‰∏™ËÆ∞ÂΩïÁöÑ‰∏ªËøáÁ®ã„ÄÇÂÆÉÊâìÂç∞ËØæÁ®ãÂêçÔºàÂ∞Ü‰∏ãÂàíÁ∫øÊõøÊç¢ÊàêÁ©∫Ê†ºÔºâ„ÄÇÁÑ∂ÂêéÊü•ÊâæÂÆûÈôÖÊï∞ÊçÆÁöÑÂºÄÂßãÔºåÂπ∂Â∞ÜÂÆÉ‰øùÂ≠òÂú® @code{start} ‰∏≠„ÄÇ
‰ª£Á†ÅÁöÑÊúÄÂêé‰∏ÄÈÉ®ÂàÜÊòØÂæ™ÁéØÊØè‰∏Ä‰∏™ÂáΩÊï∞ÂêçÔºà‰ªé @code{$2} Âà∞ @samp{data:} Ê†áËØÜÔºâÔºåË∞ÉÁî®ÂüüÊâÄË°®Á§∫ÁöÑÂêçÂ≠ó„ÄÇÈó¥Êé•Ë∞ÉÁî®ÂáΩÊï∞Â∞ÜÂÖ∂‰Ωú‰∏∫ @code{printf} ÂáΩÊï∞ÁöÑ‰∏Ä‰∏™ÂèÇÊï∞„ÄÇ
Ôºà@code{printf} ÁöÑÊ†ºÂºè‰∏≤‰ΩøÁî® @samp{%s} ‰Ωú‰∏∫Ê†ºÂºèÊåáÂÆöÁ¨¶ÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ËøîÂõûÂ≠ó‰∏≤ÁöÑÂáΩÊï∞ÔºåÂΩìÁÑ∂‰πüÂåÖÊã¨Êï∞ÂÄº„ÄÇÊ≥®ÊÑè‰ªéÈó¥Êé•Ë∞ÉÁî®ËøîÂõûÁöÑÁªìÊûú‰∏éÁ©∫‰∏≤ËøõË°åÂêàÂπ∂ÔºåÊòØ‰∏∫Â∞ÜÂÖ∂Âº∫Âà∂ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÂÄº„ÄÇÔºâ

ËøôÊòØÊâßË°åÁ®ãÂ∫èÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f indirectcall.awk class_data1}
@print{} Biology 101:
@print{}     sum: <352.8>
@print{}     average: <88.2>
@print{}
@print{} Chemistry 305:
@print{}     sum: <356.4>
@print{}     average: <89.1>
@print{}
@print{} English 401:
@print{}     sum: <376.1>
@print{}     average: <94.025>
@end example

ÂèØ‰ª•‰ΩøÁî®Èó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®ÁöÑËÉΩÂäõÊØîÂàùÁúãËµ∑Êù•Ë¶ÅÂº∫Â§ßÂæóÂ§ö„ÄÇC ‰∏é C++ ËØ≠Ë®ÄÊèê‰æõ‰∫Ü‚ÄúÂáΩÊï∞ÊåáÈíà‚ÄùÔºåÈÇ£‰πüÊòØ‰∏Ä‰∏™Âú®ÊâßË°åÊó∂ÈÄâÊã©Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÊú∫Âà∂„ÄÇËøô‰∏™ËÉΩÂäõÁî®ÂæóÊúÄÂ§öÁöÑÊòØ C @code{qsort()} ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞‰ΩøÁî®ÊúâÂêçÁöÑÂø´ÈÄüÊéíÂ∫è
ÔºàÊü•Áúã @uref{http://en.wikipedia.org/wiki/Quicksort, Wikipedia ÁöÑÊñáÊ°£} Êù•‰∫ÜËß£Êõ¥Â§öÁöÑ‰ø°ÊÅØÔºâÁÆóÊ≥ïÊù•ÂØπÊï∞ÁªÑËøõË°åÊéíÂ∫è„ÄÇ‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∏™ÂáΩÊï∞Ôºå‰Ω†ÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™Áî®‰∫éÊØîËæÉÁöÑÂáΩÊï∞ÊåáÈíà„ÄÇËøô‰∏™Êú∫Âà∂ÂèØ‰ª•‰ΩøÁî®ÂØπ‰ªªÊÑè‰ª•Âèä‰ªª‰ΩïÊñπÂºèÂØπÊï∞ÊçÆËøõË°åÊéíÂ∫è„ÄÇ

Êàë‰ª¨Áî® @command{gawk} ‰πüÂèØ‰ª•ÂÅöÂêåÊ†∑ÁöÑ‰∫ãÊÉÖÔºåÂ¶ÇÔºö

@example
@c file eg/lib/quicksort.awk
# quicksort.awk --- Quicksort algorithm, with user-supplied
#                   comparison function
@c endfile
@ignore
@c file eg/lib/quicksort.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# January 2009

@c endfile
@end ignore
@c file eg/lib/quicksort.awk

# quicksort --- C.A.R. Hoare's quicksort algorithm. See Wikipedia
#               or almost any algorithms or computer science text.
@c endfile
@ignore
@c file eg/lib/quicksort.awk
#
# Adapted from K&R-II, page 110
@c endfile
@end ignore
@c file eg/lib/quicksort.awk

function quicksort(data, left, right, less_than,    i, last)
@{
    if (left >= right)  # do nothing if array contains fewer
        return          # than two elements

    quicksort_swap(data, left, int((left + right) / 2))
    last = left
    for (i = left + 1; i <= right; i++)
        if (@@less_than(data[i], data[left]))
            quicksort_swap(data, ++last, i)
    quicksort_swap(data, left, last)
    quicksort(data, left, last - 1, less_than)
    quicksort(data, last + 1, right, less_than)
@}

# quicksort_swap --- helper function for quicksort, should really be inline

function quicksort_swap(data, i, j,      temp)
@{
    temp = data[i]
    data[i] = data[j]
    data[j] = temp
@}
@c endfile
@end example

@code{quicksort()} ÂáΩÊï∞Êé•Êî∂ @code{data} Êï∞ÁªÑÔºå‰ª•ÂèäË¶ÅËøõË°åÊéíÂ∫èÁöÑÂºÄÂßã‰∏éÁªìÊùü‰∏ãÊ†áÔºà@code{left} ‰∏é @code{right}ÔºâÔºå‰ª•ÂèäÊâßË°å‚Äúless than‚ÄùÊØîËæÉÁöÑÂáΩÊï∞Âêç„ÄÇ‰πãÂêéÂÆûÁé∞ quicksort ÁÆóÊ≥ï„ÄÇ

‰∏∫‰ΩøÁî®Ëøô‰∏™ÊéíÂ∫èÂáΩÊï∞ÔºåÊàë‰ª¨ÂÜçÂõûÂà∞‰πãÂâçÁöÑ‰æãÂ≠ê„ÄÇÁ¨¨‰∏Ä‰ª∂‰∫ãÊÉÖÂ∞±ÊòØË¶ÅÂÜô‰∏Ä‰∏™ÊØîËæÉÂáΩÊï∞Ôºö

@example
@c file eg/prog/indirectcall.awk
# num_lt --- do a numeric less than comparison

function num_lt(left, right)
@{
    return ((left + 0) < (right + 0))
@}

# num_ge --- do a numeric greater than or equal to comparison

function num_ge(left, right)
@{
    return ((left + 0) >= (right + 0))
@}
@c endfile
@end example

@code{num_ge()} ÂáΩÊï∞Âú®ÊâßË°åÈôçÂ∫èÊéíÂ∫èÊó∂ÈúÄË¶ÅÔºåÂΩìÊâßË°å ‚Äúless than‚Äù ÁöÑÊµãËØïÊó∂ÔºåÂÖ∂ÊâßË°åÁöÑÂàöÊâçÊòØÁõ∏ÂèçÁöÑÔºàÂç≥Â§ß‰∫éÊàñËÄÖÁ≠â‰∫éÔºâÔºåËøô‰ºö‰∫ßÁîü‰∏Ä‰∏™ÈôçÂ∫è„ÄÇ

‰∏ãÈù¢ÂàôÊòØÊéíÂ∫èÂáΩÊï∞„ÄÇËøôÊòØ‰∏Ä‰∏™ÂèÇÊï∞Âåñ‰∫Ü starting ‰∏é ending ÂüüÊï∞ÂÄº‰∏éÊØîËæÉÂáΩÊï∞ÁöÑÂáΩÊï∞„ÄÇÂÆÉÂàõÂª∫Êúâ data Êï∞ÁªÑÂπ∂Ë∞ÉÁî® @code{quicksort()} ÂáΩÊï∞„ÄÇÁÑ∂ÂêéÂ∞ÜÁªìÊûú‰Ωú‰∏∫‰∏Ä‰∏™Â≠ó‰∏≤ËæìÂá∫Ôºö

@example
@c file eg/prog/indirectcall.awk
# do_sort --- sort the data according to `compare'
#             and return it as a string

function do_sort(first, last, compare,      data, i, retval)
@{
    delete data
    for (i = 1; first <= last; first++) @{
        data[i] = $first
        i++
    @}

    quicksort(data, 1, i-1, compare)

    retval = data[1]
    for (i = 2; i in data; i++)
        retval = retval " " data[i]

    return retval
@}
@c endfile
@end example

ÊúÄÂêéÔºå‰∏§‰∏™ÊéíÂ∫èÂáΩÊï∞Ë∞ÉÁî® @code{do_sort()}ÔºåÂπ∂Â∞Ü‰∏§‰∏™ÊØîËæÉÂáΩÊï∞Âêç‰º†ÈÄíËøõÂéªÔºö

@example
@c file eg/prog/indirectcall.awk
# sort --- sort the data in ascending order and return it as a string

function sort(first, last)
@{
    return do_sort(first, last, "num_lt")
@}

# rsort --- sort the data in descending order and return it as a string

function rsort(first, last)
@{
    return do_sort(first, last, "num_ge")
@}
@c endfile
@end example

ËøôÊòØ@value{DF}ÁöÑÊâ©Â±ïÁâàÊú¨Ôºö

@example
@c file eg/data/class_data2
Biology_101 sum average sort rsort data: 87.0 92.4 78.5 94.9
Chemistry_305 sum average sort rsort data: 75.2 98.3 94.7 88.2
English_401 sum average sort rsort data: 100.0 95.6 87.1 93.4
@c endfile
@end example

ÊúÄÂêéÔºåËøôÊòØÂ¢ûÂº∫ËøáÁöÑÁ®ãÂ∫èÁöÑËøêË°åÁªìÊûúÔºö

@example
$ @kbd{gawk -f quicksort.awk -f indirectcall.awk class_data2}
@print{} Biology 101:
@print{}     sum: <352.8>
@print{}     average: <88.2>
@print{}     sort: <78.5 87.0 92.4 94.9>
@print{}     rsort: <94.9 92.4 87.0 78.5>
@print{}
@print{} Chemistry 305:
@print{}     sum: <356.4>
@print{}     average: <89.1>
@print{}     sort: <75.2 88.2 94.7 98.3>
@print{}     rsort: <98.3 94.7 88.2 75.2>
@print{}
@print{} English 401:
@print{}     sum: <376.1>
@print{}     average: <94.025>
@print{}     sort: <87.1 93.4 95.6 100.0>
@print{}     rsort: <100.0 95.6 93.4 87.1>
@end example

Âè¶‰∏Ä‰∏™‰ΩøÁî®Èó¥Êé•ÂáΩÊï∞ÈùûÂ∏∏ÊúâÁî®ÁöÑÂú∞ÊñπÂèØ‰ª•Âú®Â§ÑÁêÜÊï∞ÁªÑÁöÑÂú∞ÊñπÊâæÂà∞„ÄÇËøôÂú® @ref{Walking Arrays}Ôºå‰∏≠ÊúâÊèèËø∞„ÄÇ

Ë¶ÅËÆ∞‰ΩèÔºåÂú®Ë∞ÉÁî®Èó¥Êé•ÂáΩÊï∞‰πãÂâçÔºåÂøÖÈ°ªÂú®ÂÖ∂ÂâçÈù¢ÊîæÁΩÆ‰∏Ä‰∏™ @samp{@@} Á¨¶Âè∑„ÄÇ

‰ªé 4.1.2 @value{PVERSION}ÂºÄÂßãÔºå@command{gawk} Èó¥Êé•Ë∞ÉÁî®‰πüÂèØ‰ª•Áî®‰∫éÂÜÖÁΩÆÂáΩÊï∞‰ª•ÂèäÊâ©Â±ïÂáΩÊï∞ÔºàÊü•Áúã @pxref{Dynamic Extensions}Ôºâ„ÄÇ‰ªñ‰ª¨Âú®‰ΩøÁî®Èó¥Êé•Ë∞ÉÁî®ÂÜÖÁΩÆÂáΩÊï∞Êó∂Êúâ‰∏Ä‰∫õÈôêÂà∂ÔºåÂ¶Ç‰∏ãÔºö

@itemize @value{BULLET}
@item
ÈÄöËøáÈó¥Êé•Ë∞ÉÁî®Ôºå‰Ω†‰∏çÂèØ‰ª•‰º†ÈÄíÊ≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÂà∞‰∏Ä‰∏™ÂÜÖÁΩÆÂáΩÊï∞‰∏≠„ÄÇ
@footnote{Ëøô‰∏™Âú®Êú™Êù•ÁöÑÁâàÊú¨ÂèØËÉΩ‰ºöÊîπÂèòÔºöË¶ÅÊ£ÄÊü•‰∏é‰Ω†ÁöÑ @command{gawk} ‰∏ÄËµ∑ÁöÑÊñáÊ°£Êù•Êü•ÁúãÊòØÂê¶Â∑≤ÁªèÊîπÂèò„ÄÇ}
ËøôÂêåÊó∂‰πüÈÄÇÁî®‰∫é @code{sub()}Ôºå@code{gsub()}Ôºå@code{gensub()}Ôºå@code{match()}Ôºå@code{split()} ‰∏é @code{patsplit()} ÂáΩÊï∞„ÄÇ

@item
Â¶ÇÊûúË∞ÉÁî® @code{sub()} ÊàñËÄÖ @code{gsub()}Ôºå‰Ω†Âè™ÂèØ‰ª•‰º†ÈÄí‰∏§‰∏™ÂèÇÊï∞ÔºåÂõ†‰∏∫Ëøô‰∫õÂáΩÊï∞ÈÄöÂ∏∏‰ºöÊõ¥ÊîπÂÆÉÂÆÉ‰ª¨ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞„ÄÇËøôË°®Á§∫ @code{$0} ‰ºöË¢´ÊîπÂèò„ÄÇ
@end itemize

@command{gawk} ‰ºöÂ∞ΩÂäõÂú∞‰ΩøÈó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®ÈùûÂ∏∏È´òÊïà„ÄÇÂ¶ÇÔºåÂú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºö

@example
for (i = 1; i <= n; i++)
    @@the_func()
@end example

@noindent
@command{gawk} ÂÆûÈôÖ‰∏äÂè™Êü•Êâæ‰∏ÄÊ¨°Ë¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ

@node Functions Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
@command{awk} Êèê‰æõ‰∫ÜÂÜÖÁΩÆÂáΩÊï∞Ôºå‰πüÂèØ‰ª•ËÆ©‰Ω†Ëá™Â∑±ÂÆö‰πâÂáΩÊï∞„ÄÇ

@item
POSIX @command{awk} Êèê‰æõ‰∫Ü‰∏âÁßçÂÜÖÁΩÆÂáΩÊï∞ÔºöÊï∞ÂÄºÔºåÂ≠ó‰∏≤‰∏é I/O„ÄÇ@command{gawk} Êèê‰æõ‰∫ÜÂØπÊï∞ÁªÑÊéíÂ∫èÁöÑÂáΩÊï∞ÔºåÂ§ÑÁêÜÊó∂Èó¥ÁöÑÂáΩÊï∞ÔºåÊâßË°å‰ΩçÊìç‰ΩúÁöÑÂáΩÊï∞ÔºåÁ°ÆÂÆöÂèòÈáèÁ±ªÂûãÁöÑÂáΩÊï∞ÔºàÊï∞ÁªÑËøòÊòØÊ†áÈáèÔºâÔºå‰∏éÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞ÂåñÁöÑÂáΩÊï∞„ÄÇ@command{gawk} ‰πüÊèê‰æõ‰∫ÜÊ†áÂáÜÂáΩÊï∞ÁöÑÊâ©Â±ïÔºåÂÖ∏ÂûãÁöÑÊòØÈíàÂØπÈ¢ùÂ§ñÂèÇÊï∞ÁöÑÂΩ¢Âºè„ÄÇ

@item
ÂáΩÊï∞Êé•Êî∂ 0 ‰∏™ÊàñËÄÖÊõ¥Â§öÁöÑÂèÇÊï∞ÔºåÂπ∂ËøîÂõû‰∏Ä‰∏™ÂÄº„ÄÇÊèê‰æõÂèÇÊï∞ÂÄºÁöÑË°®ËææÂºèÂú®ÂáΩÊï∞Ë∞ÉÁî®Ââç‰ºöÈ¶ñÂÖàÂÖ®ÈÉ®Ê±ÇÂÄº„ÄÇÊ±ÇÂÄºÁöÑÈ°∫Â∫èÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇËøîÂõûÂÄºÂèØ‰ª•Ë¢´ÂøΩÁï•„ÄÇ

@item
@code{sub()} ‰∏é @code{gsub()} ÂáΩÊï∞ÂØπ‰∫éÂèçÊñúÊù†ÁöÑÂ§ÑÁêÜÊúâÁÇπÂ§çÊùÇ„ÄÇÂú® @command{gawk} ÁöÑ @code{gensub()} ÂáΩÊï∞‰∏≠ÂàôÊõ¥Áõ¥Êé•‰∏ÄÁÇπÔºå‰ΩÜÊòØ‰ΩøÁî®Ëøô‰∏™ÂáΩÊï∞‰πüÈúÄË¶ÅÊ≥®ÊÑè„ÄÇ

@item
Áî®Êà∑ÂÆö‰πâÁöÑÂáΩÊï∞Êèê‰æõ‰∫ÜÂæàÈáçË¶ÅÁöÑËÉΩÂäõÔºå‰ΩÜÊòØÂÖ∂ËØ≠Ê≥ïÁ°ÆÂπ∂‰∏ç‰ºòÈõÖ„ÄÇÂú®ÂáΩÊï∞Ë∞ÉÁî®Êó∂ÔºåÂú®ÂáΩÊï∞Âêç‰∏éÂèÇÊï∞ÂàóË°®ÁöÑÂºÄÊã¨Âè∑‰πãÈó¥‰∏çÂèØ‰ª•ÊúâÁ©∫Ê†º„ÄÇ‰πüÊ≤°ÊúâÊèê‰æõÊú¨Âú∞ÂèòÈáèÔºåÊâÄ‰ª•‰π†ÊÉØÊòØÊ∑ªÂä†È¢ùÂ§ñÁöÑÂèÇÊï∞ÔºåÂπ∂Áî®Á©∫Ê†ºÂèØËßÜÂåñÂú∞Â∞ÜÂÆÉ‰ª¨‰∏éÂèÇÊï∞ÂàóË°®ÂàÜÂºÄ„ÄÇ

@item
Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÂèØ‰ª•Ë∞ÉÁî®ÂÖ∂‰ªñÁöÑÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞Ôºà‰ª•ÂèäÂÜÖÁΩÆÂáΩÊï∞ÔºâÔºå‰πüÂèØ‰ª•ÈÄíÂΩíÂú∞Ë∞ÉÁî®ÂÆÉ‰ª¨Ëá™Â∑±„ÄÇÂáΩÊï∞ÂèÇÊï∞‰ºö‚ÄúÈöêËóè‚Äù‰ªª‰ΩïÁöÑÂêåÂêçÁöÑÂÖ®Â±ÄÂèÇÊï∞„ÄÇ‰Ω†‰∏çÂèØ‰ª•‰ΩøÁî®‰øùÁïôÁöÑÂèòÈáèÔºàÂ¶Ç @code{ARGC} Êù•‰Ωú‰∏∫Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑÂèÇÊï∞ÂêçÂ≠ó„ÄÇ

@item
Ê†áÈáèÂÄºÊòØÈÄöËøá‰º†ÂÄºÊñπÂºè‰º†ÈÄíÂà∞Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑ„ÄÇÊï∞ÁªÑÂèÇÊï∞ÂàôÊòØÈÄöËøá‰º†ÂºïÁî®ÔºåÂáΩÊï∞ÂØπ‰∫éÊï∞ÁªÑÁöÑ‰ªª‰ΩïÊîπÂèòÈÉΩ‰ºöÂú®ÂáΩÊï∞ËøîÂõû‰πãÂêéÂèØËßÅ„ÄÇ

@item
‰ΩøÁî® @code{return} ËØ≠Ë®ÄÊù•‰ªéÁî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰∏≠ËøîÂõû„ÄÇÂèØÈÄâÁöÑË°®ËææÂºèÊàê‰∏∫ÂáΩÊï∞ÁöÑËøîÂõûÂÄº„ÄÇÂáΩÊï∞Âè™ÂèØ‰ª•ËøîÂõûÊ†áÈáèÂÄº„ÄÇ

@item
Â¶ÇÊûú‰º†ÈÄíÂà∞Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰∏≠ÁöÑÂèòÈáè‰ªéÊù•Ê≤°ÊúâË¢´‰ΩøÁî®ËøáÔºåÈÇ£‰πàÂáΩÊï∞Â¶Ç‰ΩïÊù•ÁúãÂæÖËøô‰∏™ÂèòÈáèÔºöË¶Å‰πàÊòØÊ†áÈ¢òË¶Å‰πàÊòØÊï∞ÁªÑ„ÄÇ

@item
@command{gawk} ‰ΩøÁî®ÁâπÊÆäËØ≠Ê≥ïÔºåÊèê‰æõ‰∫ÜÈó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®„ÄÇÈÄöËøáÂ∞ÜÊüê‰∏™ÂèòÈáèÁöÑÂÄºËÆæÁΩÆÊàêÂáΩÊï∞ÂêçÔºå‰Ω†ÂèØ‰ª•Âú®ËøêË°åÊó∂Á°ÆÂÆöÂú®ÊÉ≥ËØ¥ÁÇπË¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇËøô‰∏™‰∏é C Ë∑ü C++ ‰∏≠ÁöÑÂáΩÊï∞ÊåáÈíàÁ≠âÂêå„ÄÇ

@end itemize


@ifnotinfo
@part @value{PART2}Áî® @command{awk} Êù•Ëß£ÂÜ≥ÈóÆÈ¢ò
@end ifnotinfo

@ifdocbook
Part II shows how to use @command{awk} and @command{gawk} for problem solving.
There is lots of code here for you to read and learn from.
It contains the following chapters:

@itemize @value{BULLET}
@item
@ref{Library Functions}

@item
@ref{Sample Programs}
@end itemize
@end ifdocbook

@node Library Functions
@chapter @command{awk} ÂáΩÊï∞Â∫ì
@cindex libraries of @command{awk} functions
@cindex functions, library
@cindex functions, user-defined, library of

Âú® @ref{User-defined}ÔºåÊèèËø∞‰∫ÜÂ¶Ç‰ΩïÊù•ÂÜô‰Ω†Ëá™Â∑±ÁöÑ @command{awk} ÂáΩÊï∞„ÄÇÂÜôÂáΩÊï∞ÊòØÂæàÈáçË¶ÅÁöÑÔºåÂõ†‰∏∫ÂÆÉÂèØ‰ª•ËÆ©‰Ω†Â∞ÜÁÆóÊ≥ï‰∏éÁ®ãÂ∫è‰ªªÂä°Â∞ÅÈó≠Âú®‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂú∞Êñπ„ÄÇÂêåÊó∂ÔºåÂÆÉ‰πüÁÆÄÂåñÁºñÁ®ãÔºå‰ΩøÂæóÁ®ãÂ∫èÂºÄÂèëÊõ¥ÊúâÂèØÁÆ°ÁêÜÊÄßÔºåÊõ¥ÂèØËØª„ÄÇ

@cindex Kernighan, Brian
@cindex Plauger, P.J.@:
Brian Kernighan ‰∏é P.J.@: Plauger Âú®‰ªñ‰ª¨ 1976 Âπ¥ÁöÑ‰π¶Ôºå@cite{Software Tools} 
@footnote{ÂæàÊÉ®ÁöÑÊòØÔºå35 Âπ¥‰πãÂêéÔºåËøôÊú¨‰π¶‰∏≠ÊâÄÊïôÁöÑÁªèÈ™åËøòÊ≤°ÊúâË¢´Â§ßÈáèÁöÑÂÆûË∑µ‰∏≠ÁöÑÁ®ãÂ∫èÂëòÊâÄÂ≠¶Âà∞„ÄÇ}
‰∏≠ÂÜôÂà∞Ôºö

@quotation
Â•ΩÁöÑÁºñÁ®ã‰∏çÊòØ‰ªé‰∏ÄËà¨ÊÄßÊù•Â≠¶‰π†ÔºåËÄåÊòØÈÄöËøáËøêÁî®Â∏∏ËØÜ‰∏éÁºñÁ®ãÂÆûË∑µÔºåÁúãÁ®ãÂ∫èÂ¶Ç‰ΩïËÉΩÂ§üÂÜôÂæóÊ∏ÖÊô∞ÔºåÊòìËØªÔºåÊòìÁª¥Êä§‰∏é‰øÆÊîπÔºåÂèØË¢´‰∫∫Â∑•Á®ãÂåñÔºåÈ´òÊïà‰∏éÂèØÈù†„ÄÇ‰ªîÁªÜÂ≠¶‰π†‰∏éÊ®°ÊãüÂ•ΩÁöÑÁºñÁ®ãÂèØ‰ª•ÂÜôÂæóÊõ¥Â•Ω„ÄÇ
@end quotation

ÂÆûÈôÖ‰∏äÔºå‰ªñ‰ª¨ËßâÂæóËøô‰∫õÊÄùÊÉ≥ÊòØÂ¶Ç‰ΩïÈáçË¶ÅÔºå‰ª•Ëá¥‰∫éÂÆÉ‰ª¨Â∞ÜËøô‰∏™Ë°®Ëø∞ÊîæÂú®‰π¶ÁöÑÂ∞ÅÈù¢‰∏ä„ÄÇÁî±‰∫éÊàë‰ª¨Âº∫ÁÉàÂú∞ËÆ§‰∏∫Ëøô‰∏™Ë°®Ëø∞ÊòØÊó†Ê≠§Ê≠£Á°ÆÁöÑÔºåÊâÄÂú®Âú®Ëøô@value{CHAPTER}‰∏≠‰∏é @ref{Sample Programs}ÔºåÊèê‰æõ‰∫ÜÂ§ßÂ∞èÂêàÈÄÇÁöÑ‰ª£Á†ÅÊù•ËÆ©‰Ω†Â≠¶‰π†ÔºåÊàë‰ª¨Â∏åÊúõ‰Ω†ËÉΩ‰ªé‰∏≠Â≠¶Âà∞‰ªÄ‰πà„ÄÇ

Ëøô‰∏Ä@value{CHAPTER}ÂëàÁé∞‰∫Ü @command{awk} ‰∏≠ÊúâÂæàÊúâÁî®ÁöÑÂáΩÊï∞Â∫ì„ÄÇÂæàÂ§öÂêéÈù¢ÁöÑ‰æãÂ≠ê‰ª£Á†ÅÈÉΩ‰ΩøÁî®Ëøô‰∫õÂáΩÊï∞„ÄÇËøôÈáåÂëàÁé∞ÁöÑÂáΩÊï∞‰ªéÁÆÄÂçïÂà∞Â§çÊùÇËøõË°åÂèòÂåñ„ÄÇ

@cindex Texinfo
Âú® @ref{Extract Program}Ôºå‰∏≠Êèê‰∫§‰∫Ü‰∏Ä‰∏™Á®ãÂ∫èÔºå‰Ω†ÂèØ‰ª•Áî®Êù•‰ªéËøô‰∫õ‰æãÂ≠êÂ∫ìÂáΩÊï∞‰∏≠ÊèêÂèñÊ∫ê‰ª£Á†ÅÔºå‰ª•Âèä‰ªéÊú¨@value{DOCUMENT}ÁöÑ Texinfo Ê∫ê‰ª£Á†Å‰∏≠ÊèêÂá∫Á®ãÂ∫è„ÄÇÔºàËøôÂ∑≤Áªè‰Ωú‰∏∫ @command{gawk} ÂèëË°åÁâàÊú¨ÁöÑ‰∏ÄÈÉ®‰ªΩÂÆåÊàê‰∫Ü„ÄÇÔºâ

@ifclear FOR_PRINT
Â¶ÇÊûú‰Ω†ÂÜô‰∫Ü‰∏Ä‰∫õÊúâÁî®ÁöÑÔºåÈÄöÁî®ÁõÆÁöÑÁöÑ @command{awk} Á®ãÂ∫èÔºåÂπ∂‰∏îÊÉ≥Â∞ÜÂÆÉ‰ª¨Ë¥°ÁåÆÁªô @command{awk} Á§æÂå∫ÔºåÊü•Áúã @ref{How To Contribute}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ
@end ifclear

@cindex portability, example programs
Ëøô‰∏Ä@value{CHAPTER}‰ª•Âèä @ref{Sample Programs} ‰∏≠ÁöÑÁ®ãÂ∫èÔºåÂèØ‰ª•Ëá™Áî±Âú∞‰ΩøÁî® @command{gawk} ÁâπÊúâÁöÑÁâπÊÄß„ÄÇ‰∏∫‰∏çÂêåÁöÑ @command{awk} ÂÆûÁé∞ÈáçÂÜôËøô‰∫õÁ®ãÂ∫è‰πüÁõ∏ÂΩìÂú∞Áõ¥Êé•Ôºö

@itemize @value{BULLET}
@item
Âå∫Âà´ÈîôËØØ‰ø°ÊÅØÂπ∂ÂèëÈÄÅÂà∞ @file{/dev/stderr}„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁ≥ªÁªü‰∏≠Ê≤°Êúâ @file{/dev/stderr}ÔºåÊàñËÄÖ‰Ω†Êó†Ê≥ï‰ΩøÁî® @command{gawk}Ôºå
Âàô‰ΩøÁî® @samp{| "cat 1>&2"} ËÄå‰∏çÊòØ @samp{> "/dev/stderr"}„ÄÇ

@item
ÊúâÂæàÂ§öÁöÑÁ®ãÂ∫è‰∏≠‰ΩøÁî® @code{nextfile}ÔºàÊü•Áúã @pxref{Nextfile Statement}ÔºâÊù•Ë∑≥Ëøá‰ªªÊÑèÂâ©‰∏ãÁöÑËæìÂÖ•Êñá‰ª∂ÁöÑËæìÂÖ•„ÄÇ

@item
@c 12/2000: Thanks to Nelson Beebe for pointing out the output issue.
@cindex case sensitivity, example programs
@cindex @code{IGNORECASE} variable, in example programs
ÊúÄÂêéÔºåÊüê‰∫õÁ®ãÂ∫èÈÄâÊã©ÂøΩÁï•ËæìÂÖ•‰∏≠ÁöÑÂ§ßÂ∞èÂÜô„ÄÇÂÆÉ‰ª¨ÊòØÈÄöËøáÂ∞Ü @code{IGNORECASE} ËµãÂÄº‰∏∫ 1 Êù•ÂÆûÁé∞ÁöÑ„ÄÇ‰Ω†ÂèØ‰ª•ÂæóÂà∞Âá†‰πéÁõ∏ÂêåÁöÑÊïàÊûúÔºå
@footnote{ÊïàÊûúÊòØ‰∏çÂÆåÂÖ®Áõ∏Âêå„ÄÇÂèòÂåñËÆ∞ÂΩïÁöÑËæìÂá∫ÊâÄÊúâÁöÑÈÉΩÊòØÂ∞èÂÜô„ÄÇËÄå @code{IGNORECASE} ‰øùÊåÅ‰∫ÜËæìÂÖ•ËÆ∞ÂΩïÁöÑÊúÄÂàùÂÄº„ÄÇ}
Âè™Ë¶ÅÂ∞Ü‰∏ãÈù¢ÁöÑËßÑÂàôÂä†Âà∞Á®ãÂ∫èÁöÑÂºÄÂßãÔºö

@example
# ignore case
@{ $0 = tolower($0) @}
@end example

@noindent
ÂêåÊó∂ÔºåÁ°ÆÂÆöÊâÄÊúâÁöÑÊ≠£ÂàôË°®ËææÂºè‰ª•ÂèäÁî®Âú®ÊØîËæÉ‰∏≠ÁöÑÂ≠ó‰∏≤Â∏∏ÈáèÂÖ®ÈÉΩÊòØÂ∞èÂÜôÂ≠óÊØç„ÄÇ
@end itemize

@menu
* Library Names::               How to best name private global variables in
                                library functions.
* General Functions::           Functions that are of general use.
* Data File Management::        Functions for managing command-line data
                                files.
* Getopt Function::             A function for processing command-line
                                arguments.
* Passwd Functions::            Functions for getting user information.
* Group Functions::             Functions for getting group information.
* Walking Arrays::              A function to walk arrays of arrays.
* Library Functions Summary::   Summary of library functions.
* Library Exercises::           Exercises.
@end menu

@node Library Names
@section ÂëΩÂêçÂáΩÊï∞Â∫ìÁöÑÂÖ®Â±ÄÂèòÈáè

@cindex names, arrays/variables
@cindex names, functions
@cindex namespace issues
@cindex @command{awk} programs, documenting
@cindex documentation, of @command{awk} programs
Áî±‰∫é @command{awk} ËØ≠Ë®ÄÁöÑÊºîÂåñÊñπÊ°àÔºåÂèòÈáèË¶Å‰πàÊòØ@dfn{ÂÖ®Â±Ä}ÁöÑÔºàÂèØ‰ª•Âú®Êï¥‰∏™Á®ãÂ∫è‰∏≠‰ΩøÁî®ÔºâÔºåË¶Å‰πàÊòØ@dfn{Êú¨Âú∞}ÁöÑÔºàÂè™Âú®ÁâπÂÆöÁöÑÂáΩÊï∞‰∏≠‰ΩøÁî®Ôºâ„ÄÇÊ≤°Êúâ‰∏é C ‰∏≠ÁöÑ @code{static} ÂèòÈáèÁ±ª‰ººÁöÑ‰∏≠Èó¥Áä∂ÊÄÅ„ÄÇ

@cindex variables, global, for library functions
@cindex private variables
@cindex variables, private
Â∫ìÂáΩÊï∞Â∏∏Â∏∏ÈúÄË¶ÅÊúâÂÖ®Â±ÄÂèòÈáèÊù•‰øùÂ≠òÂú®Ë∞ÉÁî®ÂáΩÊï∞‰πãÈó¥ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ‚Äî‚ÄîÊØîÂ¶ÇÔºå@code{getopt()} ÁöÑÂèòÈáè @code{_opti}ÔºàÊü•Áúã @pxref{Getopt Function}Ôºâ„ÄÇËøôÊ†∑ÁöÑÂèòÈáèÁß∞‰∏∫@dfn{ÁßÅÊúâ}ÂèòÈáèÔºåÂõ†‰∏∫Âú®Â∫ì‰∏≠‰ΩøÁî®ÂÆÉ‰ª¨ÁöÑÂáΩÊï∞Âè™Êúâ‰∏Ä‰∏™„ÄÇ

ÂΩìÂÜô‰∏Ä‰∏™Â∫ìÂáΩÊï∞ÁöÑÊó∂ÂÄôÔºå‰Ω†Â∫îËØ•Ë¶ÅÂ∞ùËØïÈÄâÊã©‰Ω†Ëá™Â∑±ÁöÑÁßÅÊúâÂèòÈáèÁöÑÂêçÂ≠óÔºåËøôÊ†∑‰∏ç‰ºö‰∏éÂÖ∂‰ªñÁöÑÂ∫ìÂáΩÊï∞ÊàñËÄÖÁî®Êà∑‰∏ªÁ®ãÂ∫èÊâÄ‰ΩøÁî®ÁöÑÂèòÈáèÂÜ≤Á™Å„ÄÇÂ¶ÇÂÉèÂêçÂ≠ó @code{i} ÊàñËÄÖ @code{j} Â∞±‰∏çÊòØÂ•ΩÁöÑÈÄâÊã©ÔºåÂõ†Ê≠§Áî®Êà∑Á®ãÂ∫èÂ∏∏Â∏∏‰ΩøÁî®Ëøô‰∫õÁ±ª‰ººÁöÑÂêçÂ≠óÊù•Áî®‰ªªËá™Â∑±ÁöÑÁõÆÁöÑ„ÄÇ

@cindex programming conventions, private variable names
Âú®Êú¨@value{CHAPTER}‰∏≠ÂëàÁé∞ÁöÑ‰æãÂ≠ê‰ª£Á†Å‰∏≠ÔºåÊâÄÊúâÁßÅÊúâÂèòÈáèÁöÑÂêçÂ≠óÈÉΩ‰ª•‰∏ãÂàíÁ∫øÂºÄÂßãÔºà@samp{_}Ôºâ„ÄÇÁî®Êà∑‰∏ÄËà¨Êù•ËØ¥‰∏ç‰ºö‰ΩøÁî®ÂâçÂØºÁöÑ‰∏ãÂàíÁ∫øÊù•ÂëΩÂêçÂèòÈáèÔºåÊâÄ‰ª•ËøôÊ†∑ÁöÑÊÉØ‰æãÁ´ãÂç≥Èôç‰Ωé‰∫ÜÂèòÈáèÂêçÂ≠óÂÅ∂ÁÑ∂‰∏éÁî®Êà∑Á®ãÂ∫èÂÜ≤Á™ÅÁöÑÊú∫Áéá„ÄÇ

@cindex @code{_} (underscore), in names of private variables
@cindex underscore (@code{_}), in names of private variables
Âè¶Â§ñÔºåÊúâÂá†‰∏™Â∫ìÂáΩÊï∞Ëøò‰ΩøÁî®Áõ∏Â∫îÁöÑÂâçÁºÄÔºåÁî®Êù•ÊåáÁ§∫‰ªÄ‰πàÊ†∑ÁöÑÂáΩÊï∞ÊàñËÄÖÂáΩÊï∞ÈõÜÊù•‰ΩøÁî®ÂèòÈáè‚Äî‚ÄîÂ¶ÇÔºåÂú®Áî®Êà∑Êï∞ÊçÆÂ∫ì‰æãÁ®ã‰∏≠ÁöÑ @code{_pw_byname()}ÔºàÊü•Áúã @pxref{Passwd Functions}Ôºâ„ÄÇËøôÊ†∑ÁöÑÊÉØ‰æãÊàë‰ª¨ÊòØÊé®ËçêÁöÑÔºåÂõ†‰∏∫ËøôÊõ¥Ëøõ‰∏ÄÊ≠•Èôç‰Ωé‰∫Ü‰∏çÂ∞èÂøÉÁöÑÂèòÈáèÂêçÂ≠óÂÜ≤Á™ÅÊú∫Áéá„ÄÇË¶ÅÊ≥®ÊÑèÔºåËøôÊ†∑ÁöÑÊÉØ‰æã‰πüÂèØÁî®‰∫éÂèòÈáèÂêç‰∏éÁßÅÊúâÂáΩÊï∞Âêç„ÄÇ 
@footnote{Â∞ΩÁÆ°ÊâÄÊúâÁöÑÂ∫ì‰æãÁ®ãÈÉΩ‰ΩøÁî®ËøôÊ†∑ÁöÑÊÉØ‰æãËøõË°å‰∫ÜÈáçÂÜôÔºå‰ΩÜÊòØËøòÊ≤°ÊúâÂÆåÊàê„ÄÇ‰∏∫‰∫ÜÊòæÁ§∫Êàë‰ª¨Ëá™Â∑±ÁöÑ @command{awk} Á®ãÂ∫èÈ£éÊ†ºÁöÑÊºîÂåñÔºå‰πü‰∏∫‰∫ÜËøô‰∫õËÆ®ËÆ∫Êèê‰æõ‰∏Ä‰∫õÂü∫Á°ÄÁ¥†Êùê„ÄÇ}

Âú®ÂáΩÊï∞ÂëΩÂêç‰∏äËøòÊúâÊúÄÂêé‰∏Ä‰∏™ÊèêÁ§∫ÔºåÂ¶ÇÊûúÂáΩÊï∞‰ΩøÂÖ®Â±ÄÂèòÈáèÂèØË¢´‰∏ªÁ®ãÂ∫è‰ΩøÁî®ÔºåÈÇ£‰πàÊÉØ‰æã‰∏äÈúÄË¶Å‰ª•‰∏Ä‰∏™Â§ßÂÜôÂ≠óÊØçÊù•ÂºÄÂßãÂèòÈáèÁöÑÂêçÂ≠ó‚Äî‚ÄîÂ¶Ç @code{getopt()} ÁöÑ @code{Opterr} ‰∏é @code{Optind} ÂèòÈáèÔºàÊü•Áúã @pxref{Getopt Function}Ôºâ„ÄÇÂâçÂØºÁöÑÂ§ßÂÜôÂ≠óÊØçË°®Á§∫ËøôÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáèÔºåËÄåÂèòÈáèÁöÑÂêçÂ≠ó‰∏çÂÖ®ÊòØÂ§ßÂÜôÂ≠óÊØçÂàôÊòØË°®Á§∫ÂèòÈáè‰∏çÊòØ @command{awk} È¢ÑÂÆö‰πâÁöÑÂèòÈáèÔºåÊØîÂ¶Ç @code{FS}„ÄÇ

@cindex @option{--dump-variables} option, using for library functions
Âú®Â∫ì‰∏≠ÁöÑÂáΩÊï∞ÁöÑ@emph{ÊâÄÊúâ}ÂèòÈáèÂÆûÈôÖ‰∏ä‰∏çÁî®‰∫éÂ≠òÂÇ®Áä∂ÊÄÅÁöÑÂèòÈáèÈÉΩÂ£∞Êòé‰∏∫Êú¨Âú∞ÂèòÈáè‰πüÈùûÂ∏∏ÈáçË¶Å„ÄÇ
@footnote{@command{gawk} ÁöÑ @option{--dump-variables} ÂëΩ‰ª§Ë°åÈÄâÈ°πÁî®Êù•È™åËØÅËøô‰∏™ÈùûÂ∏∏ÊúâÁî®„ÄÇ}
Â¶ÇÊûú‰∏çÊòØËøô‰πàÂÅöÁöÑÔºåÂèòÈáèÊúâÂèØËÉΩÂÅ∂ÁÑ∂Âú®Áî®Êà∑Á®ãÂ∫è‰∏≠‰ΩøÁî®Ôºå‰ªéËÄåÂØºËá¥ÈùûÂ∏∏Èöæ‰ª•ËøΩË∏™ÁöÑ Bug„ÄÇ

@example
function lib_func(x, y,    l1, l2)
@{
    @dots{}
    # some_var should be local but by oversight is not
    @var{use variable} some_var
    @dots{}
@}
@end example

@cindex arrays, associative, library functions and
@cindex libraries of @command{awk} functions, associative arrays and
@cindex functions, library, associative arrays and
@cindex Tcl
Âú® Tcl Á§æÂå∫‰∏≠‰πüÊúâÁõ∏ÂêåÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØ‰ΩøÁî®‰∏çÂêåÁöÑÊÉØ‰æãÔºåÂç≥Áî®Âçï‰∏ÄÁöÑÂÖ≥ËÅîÊï∞ÁªÑÊù•Â≠òÂÇ®Â∫ìÂáΩÊï∞ÊàñËÄÖ‚ÄúÂåÖ‚ÄùÊâÄ‰ΩøÁî®ÁöÑÂÄº„ÄÇËøôÊõ¥Ëøõ‰∏ÄÊ≠•Âú∞Èôç‰Ωé‰∫ÜÂÆûÈôÖÂÖ®Â±Ä‰ΩøÁî®ÁöÑÂèòÈáèÁöÑÊï∞ÁõÆ„ÄÇ
‰æãÂ¶ÇÔºåÂú® @ref{Passwd Functions} ‰∏≠ÊèèËø∞ÁöÑÂáΩÊï∞ÔºåÂ∑≤Áªè‰ΩøÁî®Êï∞ÁªÑÂÖÉÁ¥† @code{@w{PW_data["inited"]}}Ôºå@code{@w{PW_data["total"]}}Ôºå@code{@w{PW_data["count"]}} ‰∏é @code{@w{PW_data["awklib"]}}ÔºåËÄå‰∏çÊòØ‰ΩøÁî® @code{@w{_pw_inited}}Ôºå@code{@w{_pw_awklib}}Ôºå@code{@w{_pw_total}} ‰∏é @code{@w{_pw_count}}„ÄÇ

Ëøô@value{SECTION}‰∏≠ÊâÄÂëàÁé∞ÁöÑÊÉØ‰æãÂ∞±ÊòØÔºöÁ∫¶ÂÆö‰øóÊàê„ÄÇ‰ΩÜ‰Ω†‰∏çÈúÄË¶ÅÊåâËøôÁßçÊñπÂºèÊù•ÂÜô‰Ω†ÁöÑÁ®ãÂ∫è‚Äî‚ÄîÊàë‰ª¨Âè™ÊòØÂª∫ËÆÆ‰Ω†Ëøô‰πàÂÅö„ÄÇ

@node General Functions
@section ÈÄöÁî®ÁºñÁ®ã

Ëøô‰∏Ä@value{SECTION}‰∏≠ÂëàÁé∞‰∫ÜÂú®ÈÄöÁî®ÁºñÁ®ã‰∏≠‰ΩøÁî®Âà∞ÁöÑÂá†‰∏™ÂáΩÊï∞„ÄÇ

@menu
* Strtonum Function::           A replacement for the built-in
                                @code{strtonum()} function.
* Assert Function::             A function for assertions in @command{awk}
                                programs.
* Round Function::              A function for rounding if @code{sprintf()}
                                does not do it correctly.
* Cliff Random Function::       The Cliff Random Number Generator.
* Ordinal Functions::           Functions for using characters as numbers and
                                vice versa.
* Join Function::               A function to join an array into a string.
* Getlocaltime Function::       A function to get formatted times.
* Readfile Function::           A function to read an entire file at once.
* Shell Quoting::               A function to quote strings for the shell.
@end menu

@node Strtonum Function
@subsection Â∞ÜÊï∞ÂÄºËΩ¨Êç¢ÊàêÂ≠ó‰∏≤

@code{strtonum()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{String Functions}ÔºâÊòØ‰∏Ä‰∏™ @command{gawk} Êâ©Â±ï„ÄÇ‰∏ãÈù¢ÁöÑÂáΩÊï∞Êèê‰æõ‰∫Ü @command{awk} ‰∏≠Âè¶‰∏Ä‰∏™ÁâàÊú¨ÁöÑÂÆûÁé∞Ôºö

@example
@c file eg/lib/strtonum.awk
# mystrtonum --- convert string to number

@c endfile
@ignore
@c file eg/lib/strtonum.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# February, 2004
# Revised June, 2014

@c endfile
@end ignore
@c file eg/lib/strtonum.awk
function mystrtonum(str,        ret, n, i, k, c)
@{
    if (str ~ /^0[0-7]*$/) @{
        # octal
        n = length(str)
        ret = 0
        for (i = 1; i <= n; i++) @{
            c = substr(str, i, 1)
            # index() returns 0 if c not in string,
            # includes c == "0"
            k = index("1234567", c)

            ret = ret * 8 + k
        @}
    @} else if (str ~ /^0[xX][[:xdigit:]]+$/) @{
        # hexadecimal
        str = substr(str, 3)    # lop off leading 0x
        n = length(str)
        ret = 0
        for (i = 1; i <= n; i++) @{
            c = substr(str, i, 1)
            c = tolower(c)
            # index() returns 0 if c not in string,
            # includes c == "0"
            k = index("123456789abcdef", c)

            ret = ret * 16 + k
        @}
    @} else if (str ~ \
  /^[-+]?([0-9]+([.][0-9]*([Ee][0-9]+)?)?|([.][0-9]+([Ee][-+]?[0-9]+)?))$/) @{
        # decimal number, possibly floating point
        ret = str + 0
    @} else
        ret = "NOT-A-NUMBER"

    return ret
@}

# BEGIN @{     # gawk test harness
#     a[1] = "25"
#     a[2] = ".31"
#     a[3] = "0123"
#     a[4] = "0xdeadBEEF"
#     a[5] = "123.45"
#     a[6] = "1.e3"
#     a[7] = "1.32"
#     a[8] = "1.32E2"
#
#     for (i = 1; i in a; i++)
#         print a[i], strtonum(a[i]), mystrtonum(a[i])
# @}
@c endfile
@end example

ÂáΩÊï∞È¶ñÂÖàÊâæ C È£éÊ†ºÁöÑÂÖ´ËøõÂà∂Êï∞Ôºà‰ª• 8 ‰∏∫Â∫ïÔºâ„ÄÇÂ¶ÇÊûúËæìÂá∫‰∏≤ÂåπÈÖç‰∏Ä‰∏™ÊèèËø∞ÂÖ´ËøõÂà∂ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂàô @code{mystrtonum()} Ëø≠‰ª£Âú®‰∏≤‰∏≠ÁöÑÊØè‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇÂÆÉÂ∞Ü @code{k} ËÆæÁΩÆÊàêÂΩìÂâçÂÖ´ËøõÂà∂Êï∞Âú® @code{"1234567"} ‰∏≠ÁöÑÁ¥¢Âºï„ÄÇËøîÂõûÂÄºË¶Å‰πàÊòØ‰∏éÊï∞Â≠óÁõ∏ÂêåÁöÑÂÄºÔºåÊàñËÄÖÂú®‰∏çÂ≠òÂú®Ëøô‰∏™Â≠óÁ¨¶Êó∂ËøîÂõû 0„ÄÇÈÇ£Â∞±ÊòØÁúüÊ≠£ÁöÑ @samp{0}„ÄÇËøôÊòØÂÆâÂÖ®ÁöÑÔºåÂõ†‰∏∫Âú® @code{if} ‰∏≠ÁöÑÊ≠£ÂàôË°®ËææÂºè‰øùËØÅ‰∫ÜÂè™ÊúâÂÖ´ËøõÂà∂Êâç‰ºöËøõË°åËΩ¨Êç¢„ÄÇ

Áõ∏ÂêåÁöÑÈÄªËæë‰πüÂèØ‰ª•Â∫îÁî®Âà∞ËΩ¨Êç¢ÂçÅÂÖ≠ËøõÂà∂ÁöÑ‰ª£Á†Å‰∏≠ÔºåËøô‰∫õÂÄº‰ª• @samp{0x} ÊàñËÄÖ @samp{0X} ÂºÄÂ§¥„ÄÇ‰ΩøÁî® @code{tolower()} ÂèØ‰ª•ÁÆÄÂåñÊü•ÊâæÊØè‰∏™ÂçÅÂÖ≠ËøõÂà∂‰ΩçÊï∞Â≠óÁöÑËÆ°ÁÆó„ÄÇ

ÊúÄÂêéÔºåÂ¶ÇÊûúÂ≠ó‰∏≤ÂåπÈÖçÔºàÁõ∏ÂΩìÂ§çÊùÇÁöÑÔºâÂ∏∏ËßÑÂçÅËøõÂà∂ÊàñËÄÖÊµÆÁÇπÊï∞ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂàô @samp{ret = str + 0} ÁöÑËÆ°ÁÆóÂèØ‰ª•ËÆ© @command{awk} Â∞ÜËøô‰∏™ÂÄºËΩ¨Êç¢Êàê‰∏Ä‰∏™Êï∞„ÄÇ

Ë¢´Ê≥®ÈáäÊéâÁöÑÊòØÊµãËØïÁ®ãÂ∫èÔºåÊâÄ‰ª•ÂáΩÊï∞ÂèØ‰ª•Áî® @command{gawk} Êù•ÊµãËØïÔºåÂπ∂‰∏îÁªìÊûúÂèØ‰ª•Áî®Êù•‰∏éÂÜÖÁΩÆÁöÑ @code{strtonum()} ÂáΩÊï∞ÁªìÊûúÊù•ÊØîËæÉ„ÄÇ

@node Assert Function
@subsection Êñ≠Ë®Ä

@cindex assertions
@cindex @code{assert()} function (C library)
@cindex libraries of @command{awk} functions, assertions
@cindex functions, library, assertions
@cindex @command{awk} programs, lengthy, assertions
ÂΩìÂÜô‰∏Ä‰∏™ÂæàÂ§ßÁöÑÁ®ãÂ∫èÁöÑÊó∂ÂÄôÔºåÂ∏∏Â∏∏‰∫ÜËß£‰∏Ä‰∫õÊù°‰ª∂ÊàñËÄÖÊüêÈõÜÂêàÁöÑÊù°‰ª∂‰∏∫ true ÊòØÂæàÊúâÁî®ÁöÑ„ÄÇÂú®ÊâßË°åÁâπÂÆöËÆ°ÁÆó‰πãÂâçÔºå‰Ω†Ë¶ÅÂÜô‰∏ÄÊù°ËØ≠Âè•‰Ω†Á°Æ‰ø°Êù°‰ª∂ÊàêÁ´ã„ÄÇËøôÊ†∑ÁöÑËØ≠Âè•Ë¢´Áß∞‰∏∫@dfn{Êñ≠Ë®Ä}„ÄÇ
C ËØ≠Ë®ÄÊèê‰æõ‰∫Ü @code{<assert.h>} Â§¥Êñá‰ª∂‰ª•ÂèäÁõ∏Â∫îÁöÑ @code{assert()} ÂÆèÔºåËøôÊ†∑Á®ãÂ∫èÂèØ‰ª•Áî®ÂÆÉÊù•‰ΩúÊñ≠Ë®Ä„ÄÇÂ¶ÇÊûúÊñ≠Ë®ÄÂ§±Ë¥•Ôºå@code{assert()} ÂÆè‰ºöÊâìÂç∞‰∏Ä‰∫õËØäÊñ≠‰ø°ÊÅØ‰ª•ÊèèËø∞Êù°‰ª∂Â∫îËØ•‰∏∫ trueÔºå‰ΩÜÂÆûÈôÖ‰∏ä‰∏çÊòØÔºåÁÑ∂ÂêéÊùÄÊ≠ªÁ®ãÂ∫è„ÄÇÂú® C ËØ≠Ë®Ä‰∏≠ÔºåÂÉèËøôÊ†∑Êù•‰ΩøÁî® @code{assert()}Ôºö

@example
#include <assert.h>

int myfunc(int a, double b)
@{
     assert(a <= 5 && b >= 17.1);
     @dots{}
@}
@end example

Â¶ÇÊûúÊñ≠Ë®ÄÂ§±Ë¥•ÔºåÁ®ãÂ∫èÊâìÂç∞ÂÉè‰∏ãÈù¢ËøôÊ†∑ÁöÑ‰ø°ÊÅØÔºö

@example
prog.c:5: assertion failed: a <= 5 && b >= 17.1
@end example

@cindex @code{assert()} user-defined function
C ËØ≠Ë®ÄÂèØ‰ª•‰ΩøÊù°‰ª∂ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÔºåÂπ∂Âú®ÊâìÂç∞ËØäÊñ≠‰ø°ÊÅØÈáå‰ΩøÁî®„ÄÇ‰ΩÜÂú® @command{awk} ‰∏≠Âç¥‰∏çÂèØËÉΩÔºåÊâÄ‰ª• @code{assert()} ÂáΩÊï∞‰πüÈúÄË¶Å‰∏Ä‰∏™ÊµãËØïÊù°‰ª∂ÁöÑÂ≠ó‰∏≤ÁâàÊú¨„ÄÇ‰∏ãÈù¢ÂàôÊòØÂ≠ó‰∏≤ÂáΩÊï∞Ôºö

@example
@c file eg/lib/assert.awk
# assert --- assert that a condition is true. Otherwise, exit.

@c endfile
@ignore
@c file eg/lib/assert.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May, 1993

@c endfile
@end ignore
@c file eg/lib/assert.awk
function assert(condition, string)
@{
    if (! condition) @{
        printf("%s:%d: assertion failed: %s\n",
            FILENAME, FNR, string) > "/dev/stderr"
        _assert_exit = 1
        exit 1
    @}
@}

@group
END @{
    if (_assert_exit)
        exit 1
@}
@end group
@c endfile
@end example

@code{assert()} ÂáΩÊï∞ÊµãËØï @code{condition} ÂèÇÊï∞„ÄÇÂ¶ÇÊûúÂ§±Ë¥•ÔºåÂàôÊâìÂç∞‰∏Ä‰∏™‰ø°ÊÅØÂà∞Ê†áÂáÜËæìÂá∫ÔºåÂπ∂‰ΩøÁî® @code{string} ÂèÇÊï∞Êù•ÊèèËø∞Â§±Ë¥•ÁöÑÊù°‰ª∂„ÄÇ
ÁÑ∂ÂêéÂÆÉÂ∞ÜÂèòÈáè @code{_assert_exit} ËÆæÁΩÆÊàê 1ÔºåÂπ∂ÊâßË°å @code{exit} ËØ≠Âè•„ÄÇ@code{exit} ËØ≠Âè•‰ºöË∑≥Âà∞ @code{END} ËßÑÂàô‰∏≠Êù•ÊâßË°å„ÄÇÂ¶ÇÊûú @code{END} ËßÑÂàôÂèëÁé∞ @code{_assert_exit} ‰∏∫ trueÔºåÂ∞±‰ºöÁ´ãÂç≥ÈÄÄÂá∫„ÄÇ

Âú® @code{END} ËßÑÂàô‰∏≠ÊµãËØïÁöÑÁõÆÁöÑÊòØË¶Å‰øùËØÅ‰ªªÊÑèÁöÑÂÖ∂‰ªñ @code{END} ËßÑÂàô‰∏çË¢´ÊâßË°å„ÄÇÂΩìÊñ≠Ë®ÄÂ§±Ë¥•ÔºåÁ®ãÂ∫èÂ∫îËØ•Á´ãÂç≥ÈÄÄÂá∫„ÄÇÂ¶ÇÊûúÊñ≠Ë®ÄÈÄöËøáÔºåÂàô @code{_assert_exit} Âàô‰æùÁÑ∂ÊòØ falseÔºåÂΩì @code{END} ËßÑÂàôÊâßË°åÊó∂ÔºåÁ®ãÂ∫èÁöÑÂÖ∂‰ªñÁöÑ @code{END} ËßÑÂàôÂàô‰πü‰ºöË¢´ÊâßË°å„ÄÇ‰∏∫‰∫Ü‰ΩøËøô‰∏ÄÂàáÈÉΩÊ≠£Á°ÆÊâßË°åÔºå@file{assert.awk} ÂøÖÈ°ªÊàê‰∏∫ @command{awk} ËØªÂèñÁöÑÁ¨¨‰∏Ä‰∏™Ê∫ê‰ª£Á†ÅÊñá‰ª∂„ÄÇÂáΩÊï∞ÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑÊñπÂºèË¢´‰ΩøÁî®Ôºö

@example
function myfunc(a, b)
@{
     assert(a <= 5 && b >= 17.1, "a <= 5 && b >= 17.1")
     @dots{}
@}
@end example

@noindent
Â¶ÇÊûúÊñ≠Ë®ÄÂ§±Ë¥•Ôºå‰Ω†ÂèØ‰ª•ÁúãÂà∞Â¶Ç‰∏ãÁöÑ‰ø°ÊÅØÔºö

@example
mydata:1357: assertion failed: a <= 5 && b >= 17.1
@end example

@cindex @code{END} pattern, @code{assert()} user-defined function and
Ëøô‰∏™ÁâàÊú¨ÁöÑ @code{assert()} Êúâ‰∏Ä‰∏™Â∞èÈóÆÈ¢ò„ÄÇ‰∏Ä‰∏™ @code{END} ËßÑÂàô‰ºöËá™Âä®Âä†Âà∞Ë∞ÉÁî® @code{assert()} ÂáΩÊï∞ÁöÑÁ®ãÂ∫è‰∏≠„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúÁ®ãÂ∫èÁî± @code{BEGIN} ËßÑÂàôÁªÑÊàêÔºåËæìÂÖ•Êñá‰ª∂‰∏é/ÊàñËÄÖÊ†áÂáÜËæìÂÖ•‰∏ç‰ºöË¢´ËØªÂèñ„ÄÇ‰ΩÜÊòØÔºåÁé∞Âú®Á®ãÂ∫èÊúâ‰∏Ä‰∏™ @code{END} ËßÑÂàôÔºå@command{awk} ‰ºöÂ∞ùËØïËØªÂèñËæìÂÖ•Êñá‰ª∂ÁöÑÊï∞ÊçÆÊàñËÄÖÊ†áÂáÜËæìÂÖ•ÁöÑÊï∞ÊçÆÔºàÊü•Áúã @pxref{Using BEGIN/END}ÔºâÔºåÂæàÊúâÂèØËÉΩÂØºËá¥Á®ãÂ∫èÊåÇËµ∑ÔºåÂõ†ÂºïÂÆÉÂèØËÉΩ‰ºö‰∏ÄÁõ¥Á≠âÂæÖËæìÂÖ•„ÄÇ

@cindex @code{BEGIN} pattern, @code{assert()} user-defined function and
Êúâ‰∏Ä‰∏™ÂæàÁÆÄÂçïÁöÑËß£ÂÜ≥ÊñπÊ≥ïÔºöÁ°Æ‰øùËøôËøôÊ†∑ÁöÑ @code{BEGIN} ËßÑÂàôÊÄªÊòØÁî®‰∏Ä‰∏™ @code{exit} ËØ≠Âè•Êù•ÁªìÊùü„ÄÇ

@node Round Function
@subsection Êï∞ÂÄºËàçÂÖ•ËàçÂá∫

@cindex rounding numbers
@cindex numbers, rounding
@cindex libraries of @command{awk} functions, rounding numbers
@cindex functions, library, rounding numbers
@cindex @code{print} statement, @code{sprintf()} function and
@cindex @code{printf} statement, @code{sprintf()} function and
@cindex @code{sprintf()} function, @code{print}/@code{printf} statements and
@code{printf} ‰∏é @code{sprintf} ÁöÑÂ∑•‰ΩúÊñπÂºèÔºàÊü•Áúã @pxref{Printf}ÔºâÊâßË°åÁöÑËàçÂÖ•ËàçÂá∫Â∏∏Â∏∏‰æùËµñ‰∫éÁ≥ªÁªüÁöÑ C ÂáΩÊï∞ @code{sprintf} ‰æãÁ®ã„ÄÇÂú®ÂæàÂ§öÁöÑÊú∫Âô®‰∏äÔºå@code{sprintf} ËàçÂÖ•ËàçÂá∫ÊòØ@dfn{Ê≤°ÊúâÂÅèÂêëÁöÑ}ÔºåÂç≥ÊòØËØ¥ÔºåÂÆÉÂπ∂‰∏çÊÄªÊòØÊää 0.5 Âêë‰∏äËàçÂÖ•ÔºåËøô‰∏éÂæàËá™ÁÑ∂ÁöÑÈ¢ÑÊúüÁõ∏Âèç„ÄÇÂú®Ê≤°ÊúâÂÅèÂêëÁöÑËàçÂÖ•ËàçÂá∫‰∏≠„ÄÇ.5 ‰ºöÂÅ∂Êï∞ËàçÂÖ•ËàçÂá∫ÔºåËÄåÂπ∂‰∏çÊÄªÊòØËàçÂÖ•ÔºåÊâÄ‰ª•Ôºå1.5 ËàçÂÖ•‰∏∫ 2ÔºåËÄå 4.5 ÂàôËàçÂá∫‰∏∫ 4„ÄÇËøôÂ∞±ÊòØËØ¥ÔºåÂ¶ÇÊûú‰Ω†‰ΩøÁî®‰∏Ä‰∏™‰∏çËàçÂÖ•ËàçÂá∫ÁöÑÊ†ºÂºèÔºàÊØîÂ¶Ç @code{"%.0f"}ÔºâÔºå‰Ω†Â∫îËØ•Ê£ÄÊü•‰Ω†ÁöÑÁ≥ªÁªüÊâÄÊâßË°åÁöÑÁªìÊûú„ÄÇ‰∏ãÈù¢ÁöÑÂáΩÊï∞ÊÄªÊòØÊâßË°å‰º†ËæìÁöÑËàçÂÖ•ËàçÂá∫ÔºåÂ¶ÇÊûú‰Ω†ÁöÑ @command{awk} ÁöÑ @code{printf} ÊâßË°åÁöÑÊòØÊ≤°ÊúâÂÅèÂêëÁöÑËàçÂÖ•ËàçÂá∫ÔºåÂàôÂèØËÉΩÂæàÊúâÁî®„ÄÇ

@cindex @code{round()} user-defined function
@example
@c file eg/lib/round.awk
# round.awk --- do normal rounding
@c endfile
@ignore
@c file eg/lib/round.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# August, 1996
@c endfile
@end ignore
@c file eg/lib/round.awk

function round(x,   ival, aval, fraction)
@{
   ival = int(x)    # integer part, int() truncates

   # see if fractional part
   if (ival == x)   # no fraction
      return ival   # ensure no decimals

   if (x < 0) @{
      aval = -x     # absolute value
      ival = int(aval)
      fraction = aval - ival
      if (fraction >= .5)
         return int(x) - 1   # -2.5 --> -3
      else
         return int(x)       # -2.3 --> -2
   @} else @{
      fraction = x - ival
      if (fraction >= .5)
         return ival + 1
      else
         return ival
   @}
@}
@c endfile
@c don't include test harness in the file that gets installed

# test harness
# @{ print $0, round($0) @}
@end example

@node Cliff Random Function
@subsection Cliff ÈöèÊú∫Êï∞ÁîüÊàêÂô®
@cindex random numbers, Cliff
@cindex Cliff random numbers
@cindex numbers, Cliff random
@cindex functions, library, Cliff random numbers

@uref{http://mathworld.wolfram.com/CliffRandomNumberGenerator.html, Cliff ÈöèÊú∫Êï∞‰∫ßÁîüÂô®}ÊòØ‰∏Ä‰∏™ÈùûÂ∏∏ÁÆÄÂçïÁöÑÈöèÊú∫‰∏∫Êï∞ÁîüÊàêÂô®ÔºåÂç≥‚ÄúÈÄöËøáÊó†ÁªìÊûÑÊòæÁ§∫Êù•‰∏∫ÈöèÊú∫ÊÄß‰º†ÈÄíÂô™Â£∞ÁêÉÊµãËØï‚Äù„ÄÇ‰ªñÂæàÂÆπÊòìÁºñÁ®ãÔºå‰∏çÂà∞ 10 Ë°åÁöÑ @command{awk} ‰ª£Á†ÅÂ∞±ÂèØ‰ª•ÂÆåÊàêÔºö

@cindex @code{cliff_rand()} user-defined function
@example
@c file eg/lib/cliff_rand.awk
# cliff_rand.awk --- generate Cliff random numbers
@c endfile
@ignore
@c file eg/lib/cliff_rand.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# December 2000
@c endfile
@end ignore
@c file eg/lib/cliff_rand.awk

BEGIN @{ _cliff_seed = 0.1 @}

function cliff_rand()
@{
    _cliff_seed = (100 * log(_cliff_seed)) % 1
    if (_cliff_seed < 0)
        _cliff_seed = - _cliff_seed
    return _cliff_seed
@}
@c endfile
@end example

ÁÆóÊ≥ïÈúÄË¶Å‰∏Ä‰∏™ÂàùÂßãÁöÑÁßçÂ≠êÂÄºÔºå‰∏∫ 0.1„ÄÇÊØè‰∏™Êñ∞ÂÄºÈÉΩ‰ΩøÁî®ÂΩìÂâçÁöÑÁßçÂ≠êÁöÑ‰Ωú‰∏∫ËæìÂá∫Êù•ËøõË°åËÆ°ÁÆó„ÄÇÂ¶ÇÊûúÂÜÖÁΩÆ @code{rand()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{Numeric Functions}Ôºâ‰∏çÂ§üÈöèÊú∫Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÂáΩÊï∞Êù•‰ª£Êõø„ÄÇ

@node Ordinal Functions
@subsection Âú®Â≠óÁ¨¶‰∏éÊï∞ÂÄº‰πãÈó¥ÂèòÊç¢

@cindex libraries of @command{awk} functions, character values as numbers
@cindex functions, library, character values as numbers
@cindex characters, values of as numbers
@cindex numbers, as values of characters
‰∏Ä‰∏™ÂïÜ‰∏öÁâàÊú¨ÁöÑ @command{awk} ÂÆûÁé∞Êèê‰æõ‰∫ÜÂÜÖÁΩÆÁöÑÂáΩÊï∞ @code{ord()}ÔºåËæìÂÖ•‰∏Ä‰∏™Â≠óÁ¨¶ÔºåÁÑ∂ÂêéËøîÂõûÈÇ£‰∏™Â≠óÁ¨¶Âú®Êú∫Âô®ÁöÑÂ≠óÁ¨¶ÈõÜ‰∏≠ÁöÑÊï∞ÂÄºÂÄº„ÄÇÂ¶ÇÊûú‰º†ÈÄíÂà∞ @code{ord()} ÂáΩÊï∞‰∏∫Â≠ó‰∏≤ÔºåÂàô‰ºöÊúâÂ§ö‰∏™Â≠óÁ¨¶Ôºå‰ΩÜÊòØÂè™ÊúâÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶Ë¢´ËΩ¨Êç¢„ÄÇ

Ëøô‰∏™ÂáΩÊï∞Áõ∏ÂèçÁöÑÂáΩÊï∞Âàô‰∏∫ @code{chr()}ÔºàÊù•Ëá™Áî± Pascal ÂêåÂêçÂáΩÊï∞ÔºâÔºåÂÆÉËæìÂÖ•‰∏Ä‰∏™Êï∞ÂÄºÔºåÁÑ∂ÂêéËøîÂõûÁõ∏Â∫îÁöÑÂ≠óÁ¨¶„ÄÇËøô‰∏§‰∏™ÂáΩÊï∞Âú® @command{awk} ‰∏≠ÈÉΩÂèØ‰ª•ÂæàÂÆπÊòìÂÆûÁé∞ÔºåÂõ†Ê≠§Ê≤°ÊúâÁúüÂÆûÁöÑÁêÜÁî±Ë¶ÅÂ∞Ü‰ªñ‰ª¨ÊûÑÂª∫ËøõË°å @command{awk} Ëß£ÊûêÂô®Ôºö

@cindex @code{ord()} user-defined function
@cindex @code{chr()} user-defined function
@cindex @code{_ord_init()} user-defined function
@example
@c file eg/lib/ord.awk
# ord.awk --- do ord and chr

# Global identifiers:
#    _ord_:        numerical values indexed by characters
#    _ord_init:    function to initialize _ord_
@c endfile
@ignore
@c file eg/lib/ord.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# 16 January, 1992
# 20 July, 1992, revised
@c endfile
@end ignore
@c file eg/lib/ord.awk

BEGIN    @{ _ord_init() @}

function _ord_init(    low, high, i, t)
@{
    low = sprintf("%c", 7) # BEL is ascii 7
    if (low == "\a") @{    # regular ascii
        low = 0
        high = 127
    @} else if (sprintf("%c", 128 + 7) == "\a") @{
        # ascii, mark parity
        low = 128
        high = 255
    @} else @{        # ebcdic(!)
        low = 0
        high = 255
    @}

    for (i = low; i <= high; i++) @{
        t = sprintf("%c", i)
        _ord_[t] = i
    @}
@}
@c endfile
@end example

@cindex character sets (machine character encodings)
@cindex ASCII
@cindex EBCDIC
@cindex Unicode
@cindex mark parity
Ë¢´ @code{_ord_init()} ÊâÄ‰ΩøÁî®ÁöÑÊï∞ÂÄºÈúÄË¶Å‰∏Ä‰∫õËß£Èáä„ÄÇ‰ªäÂ§©ÊâÄ‰ΩøÁî®ÁöÑÊúÄÈáçË¶ÅÁöÑÂ≠óÁ¨¶ÈõÜÂ∞±ÊòØ ASCII„ÄÇ
@footnote{Ëøô‰∏™Ê≠£Âú®ÊîπÂèòÔºöÂæàÂ§öÁöÑÁ≥ªÁªü‰ΩøÁî® Unicode„ÄÇËøôÊòØ‰∏ÄÁßçÂæàÂ§ßÁöÑÂ≠óÁ¨¶ÈõÜÔºåASCII ÊòØÂÆÉÁöÑ‰∏Ä‰∏™Â≠êÈõÜ„ÄÇÂú®ÂÆåÂÖ®ÊîØÊåÅ Unicode ÁöÑÁ≥ªÁªü‰∏≠Ôºå‰∏Ä‰∏™Â≠óÁ¨¶ÂèØ‰ª•Âç†Âà∞ 32 ‰Ωç„ÄÇ‰ΩøÂæóËøôÈáåÊâÄ‰ΩøÁî®ÁöÑÁÆÄÂçïÊµãËØïÊúâÂèØËÉΩ‰πüÈùûÂ∏∏Ê∂àËÄóÊÄßËÉΩ„ÄÇ}
Â∞ΩÁÆ° 8 ‰ΩçÁöÑÂ≠óËäÇÂèØ‰ª•Ë°®Á§∫ 256 ‰∏™‰∏çÂêåÁöÑÂÄºÔºà‰ªé 0 Âà∞ 255 ÔºâÔºåASCII Âè™ÂÆö‰πâ‰∫Ü‰ªé 0 Âà∞ 127 ‰πãÈó¥ÁöÑÂ≠óÁ¨¶„ÄÇ
@footnote{ASCII Ë¢´Êâ©Â±ïÂà∞ÂæàÂ§öÁöÑÂõΩÂÆ∂ÔºåÂπ∂‰ΩøÁî®Âà∞ 128 Âà∞ 255 ‰πãÈó¥ÁöÑÂÄºË°®Á§∫ÁâπÂÆöÂõΩÂÆ∂ÁöÑÂ≠óÁ¨¶„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁ≥ªÁªü‰ΩøÁî®Ëøô‰∫õÊâ©Â±ïÔºå‰Ω†ÂèØÁÆÄÂåñ @code{_ord_init()} Êù•Ëø≠‰ª£‰ªé0 Âà∞ 255 ÁöÑÊï∞ÂÄº„ÄÇ}
Âú®Âæà‰πÖÁöÑËøáÂéªÔºåËá≥Â∞ëÊúâ‰∏Ä‰∏™Ëø∑‰Ω†ËÆ°ÁÆóÊú∫ÂéÇÂïÜ
@c Pr1me, blech
‰ΩøÁî® ASCIIÔºå‰ΩÜÊòØÂ∏¶‰∏Ä‰∏™Ê†°È™å‰ΩçÔºåÂç≥Â≠óËäÇÁöÑÊúÄÈ´ò‰ΩçÊÄªÊòØ 1„ÄÇËøôË°®Á§∫ÔºåÂú®ËøôÊ†∑ÁöÑÁ≥ªÁªü‰∏≠ÔºåÂ≠óÁ¨¶ÁöÑÂÄºÊòØ‰ªé 128 Âà∞ 255„ÄÇÊúÄÂêéÔºåÂæàÂ§öÁöÑÂ§ßÂûãÊú∫‰ΩøÁî® EBCDIC Â≠óÁ¨¶ÈõÜ„ÄÇËøô‰∏™ÈõÜ‰∏≠‰ΩøÁî®ÊâÄÊúâÁöÑ 256 ‰∏™Â≠óÁ¨¶„ÄÇÂú®‰∏Ä‰∫õÊóßÁ≥ªÁªü‰∏≠‰πü‰ΩøÁî®ÂÖ∂‰ªñÁöÑÂ≠óÁ¨¶ÈõÜÔºå‰ΩÜÊòØÊ≤°ÊúâÂøÖÈ°ª‰∏∫Ê≠§ÊìçÂøÉ‰∫Ü„ÄÇ

@example
@c file eg/lib/ord.awk
function ord(str,    c)
@{
    # only first character is of interest
    c = substr(str, 1, 1)
    return _ord_[c]
@}

function chr(c)
@{
    # force c to be numeric by adding 0
    return sprintf("%c", c + 0)
@}
@c endfile

#### test code ####
# BEGIN @{
#    for (;;) @{
#        printf("enter a character: ")
#        if (getline var <= 0)
#            break
#        printf("ord(%s) = %d\n", var, ord(var))
#    @}
# @}
@c endfile
@end example

Ëøô‰∏™ÂáΩÊï∞ÁöÑ‰∏Ä‰∏™ÊòéÊòæÊîπËøõÊòØÂ∞Ü @code{@w{_ord_init}} ÂáΩÊï∞ÁöÑ‰ª£Á†ÅÁßªÂà∞‰∫Ü @code{BEGIN} ËßÑÂàô‰∏≠„ÄÇËøô‰πàÂÅöÁöÑÊúÄÂàùÁõÆÁöÑÊòØ‰∏∫‰∫ÜÂºÄÂèëÁöÑÊñπ‰æø„ÄÇ

@node Join Function
@subsection Â∞ÜÊï∞ÁªÑÂêàÂπ∂ÊàêÂ≠ó‰∏≤

@cindex libraries of @command{awk} functions, merging arrays into strings
@cindex functions, library, merging arrays into strings
@cindex strings, merging arrays into
@cindex arrays, merging into strings
ÂΩìÂ§ÑÁêÜÂ≠ó‰∏≤Êó∂ÔºåÂèØ‰ª•Â∞ÜÊï∞ÁªÑÁöÑÊâÄÊúâÂ≠ó‰∏≤ËøûÊé•‰∏∫‰∏Ä‰∏™ÈïøÁöÑÂ≠ó‰∏≤Â∏∏Â∏∏ÂæàÊúâÁî®„ÄÇ‰∏ãÈù¢ÁöÑ @code{join()} ÂáΩÊï∞Êù•ÂÅöËøôÊ†∑ÁöÑÂ∑•‰Ωú„ÄÇÂÆÉÂú®ÂêéÈù¢ÁöÑÂá†‰∏™Â∫îÁî®Á®ãÂ∫è‰∏≠Ë¢´‰ΩøÁî®Âà∞ÔºàÊü•Áúã @pxref{Sample Programs}Ôºâ„ÄÇ

Â•ΩÁöÑÂáΩÊï∞ËÆæËÆ°ÊòØÂæàÈáçË¶ÅÁöÑÔºåËøô‰∏™ÂáΩÊï∞Â∫îËØ•ÊòØÈÄöÁî®ÁöÑÔºå‰ΩÜÊòØÂÆÉ‰πüÂ∫îËØ•Êúâ‰∏Ä‰∏™ÂêàÁêÜÁöÑÈªòËÆ§Ë°å‰∏∫„ÄÇËøô‰∏™ÂáΩÊï∞ÂêàÁî®‰∏Ä‰∏™Êï∞ÁªÑ‰ª•ÂèäË¶ÅÂêàÂπ∂ÁöÑÂºÄÂßã‰∏éÁªìÊùüÁ¥¢ÂºïÔºå‰Ωú‰∏∫ÂèÇÊï∞„ÄÇÂÆÉÂÅáËÆæÊï∞ÁªÑÁöÑÁ¥¢ÂºïÊòØÊï∞ÂÄºÁöÑ‚Äî‚ÄîËøôÊòØÂêàÁêÜÁöÑÂÅáÂÖÖÔºåÂõ†Ê≠§Êï∞ÁªÑÊúâÂèØËÉΩ‰ΩøÁî® @code{split()} ÂáΩÊï∞ÂàõÂª∫ÁöÑÔºàÊü•Áúã @ref{String Functions}ÔºâÔºö

@cindex @code{join()} user-defined function
@example
@c file eg/lib/join.awk
# join.awk --- join an array into a string
@c endfile
@ignore
@c file eg/lib/join.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
@c endfile
@end ignore
@c file eg/lib/join.awk

function join(array, start, end, sep,    result, i)
@{
    if (sep == "")
       sep = " "
    else if (sep == SUBSEP) # magic value
       sep = ""
    result = array[start]
    for (i = start + 1; i <= end; i++)
        result = result sep array[i]
    return result
@}
@c endfile
@end example

‰∏Ä‰∏™ÂèØÈÄâÁöÑÂèÇÊï∞ÊòØÁî®Êù•ËøûÊé•Â≠ó‰∏≤ÁöÑÂàÜÈöîÁ¨¶„ÄÇÂ¶ÇÊûúË∞ÉÁî®ËÄÖÊèê‰æõ‰∫ÜÈùûÁ©∫ÁöÑÂÄºÔºå@code{join()} Âàô‰ΩøÁî®ÂÆÉÔºåÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõÔºåÂÖ∂ÂÄºÂàô‰∏∫Á©∫ÂÄº„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@code{join()} ‰ΩøÁî®‰∏Ä‰∏™Á©∫Ê†ºÊù•‰Ωú‰∏∫ÈªòËÆ§ÁöÑÂ≠ó‰∏≤ÂàÜÈöîÁ¨¶„ÄÇÂ¶ÇÊûúÂÄº‰∏é @code{SUBSEP} ÁöÑÂÄºÁõ∏ÂêåÔºåÂàô @code{join()} ‰ºöÂú®ËøûÊé•ÁöÑÂ≠ó‰∏≤‰∏≠‰∏ç‰ΩøÁî®ÂàÜÈöîÁ¨¶„ÄÇ@code{SUBSEP} ‰Ωú‰∏∫‰∏Ä‰∏™‚ÄúÈ≠îÊ≥ï‚ÄùÂÄºÊù•ÊåáÁ§∫‰∏çË¶ÅÂú®Â≠ó‰∏≤ÁªÑ‰ª∂‰πãÈó¥‰ΩøÁî®ÂàÜÈöîÁ¨¶„ÄÇ 
@footnote{Â¶ÇÊûú @command{awk} Êúâ‰∏Ä‰∏™ËµãÂÄºÊìç‰ΩúÁ¨¶Êù•ËøõË°åËøûÊé•Â∞±ÂæàÂ•Ω‰∫Ü„ÄÇÁº∫Â∞ë‰∏Ä‰∏™ÊòæÂºèÁöÑËøûÊé•Êìç‰ΩúÁ¨¶‰ΩøÂæóÂ≠ó‰∏≤Êìç‰ΩúÊØîÂÆûÈôÖÈúÄË¶ÅÁöÑË¶ÅÈöæ‰∏Ä‰∫õ„ÄÇ}

@node Getlocaltime Function
@subsection ÁÆ°ÁêÜÊó∂Èó¥

@cindex libraries of @command{awk} functions, managing, time
@cindex functions, library, managing time
@cindex timestamps, formatted
@cindex time, managing
Âú® @ref{Time Functions}ÔºåÊèèËø∞ÁöÑ @code{systime()} ‰∏é @code{strftime()} ÂáΩÊï∞ÔºåÊèê‰æõ‰∫ÜÊúÄÂ∞èÁöÑÂäüËÉΩÈúÄÊ±ÇÊù•Â§ÑÁêÜ‰∫∫ÂèØËØªÂΩ¢ÂºèÁöÑÊó∂Èó¥Â§ÑÁêÜ„ÄÇÂ∞ΩÁÆ° @code{strftime()} ÊòØÊâ©Â±ïÁöÑÔºåÊ†ºÂºèÊéßÂà∂‰∏çÂÆπÊòìËÆ∞‰ΩèÔºåÊàñËÄÖÂú®ËØªÁ®ãÂ∫èÊó∂ÊÑèÊÄù‰∏çËøô‰πàÊòéÊòæ„ÄÇ

‰∏ãÈù¢ÁöÑÂáΩÊï∞ @code{getlocaltime()} ‰ΩøÁî®Áî®Êà∑Êèê‰æõÁöÑÈ¢ÑÂÆö‰πâÊó∂Èó¥Ê†ºÂºè‰ø°ÊÅØÊï∞ÁªÑ„ÄÇÂÆÉËøîÂõû‰∏Ä‰∏™‰∏é @command{date} Â∑•ÂÖ∑‰∫ßÁîü‰∏ÄÊ†∑ÁöÑÁöÑÊó∂Èó¥Ê†ºÂºèÁöÑÂ≠ó‰∏≤Ôºö

@cindex @code{getlocaltime()} user-defined function
@example
@c file eg/lib/gettime.awk
# getlocaltime.awk --- get the time of day in a usable format
@c endfile
@ignore
@c file eg/lib/gettime.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain, May 1993
#
@c endfile
@end ignore
@c file eg/lib/gettime.awk

# Returns a string in the format of output of date(1)
# Populates the array argument time with individual values:
#    time["second"]       -- seconds (0 - 59)
#    time["minute"]       -- minutes (0 - 59)
#    time["hour"]         -- hours (0 - 23)
#    time["althour"]      -- hours (0 - 12)
#    time["monthday"]     -- day of month (1 - 31)
#    time["month"]        -- month of year (1 - 12)
#    time["monthname"]    -- name of the month
#    time["shortmonth"]   -- short name of the month
#    time["year"]         -- year modulo 100 (0 - 99)
#    time["fullyear"]     -- full year
#    time["weekday"]      -- day of week (Sunday = 0)
#    time["altweekday"]   -- day of week (Monday = 0)
#    time["dayname"]      -- name of weekday
#    time["shortdayname"] -- short name of weekday
#    time["yearday"]      -- day of year (0 - 365)
#    time["timezone"]     -- abbreviation of timezone name
#    time["ampm"]         -- AM or PM designation
#    time["weeknum"]      -- week number, Sunday first day
#    time["altweeknum"]   -- week number, Monday first day

function getlocaltime(time,    ret, now, i)
@{
    # get time once, avoids unnecessary system calls
    now = systime()

    # return date(1)-style output
    ret = strftime("%a %b %e %H:%M:%S %Z %Y", now)

    # clear out target array
    delete time

    # fill in values, force numeric values to be
    # numeric by adding 0
    time["second"]       = strftime("%S", now) + 0
    time["minute"]       = strftime("%M", now) + 0
    time["hour"]         = strftime("%H", now) + 0
    time["althour"]      = strftime("%I", now) + 0
    time["monthday"]     = strftime("%d", now) + 0
    time["month"]        = strftime("%m", now) + 0
    time["monthname"]    = strftime("%B", now)
    time["shortmonth"]   = strftime("%b", now)
    time["year"]         = strftime("%y", now) + 0
    time["fullyear"]     = strftime("%Y", now) + 0
    time["weekday"]      = strftime("%w", now) + 0
    time["altweekday"]   = strftime("%u", now) + 0
    time["dayname"]      = strftime("%A", now)
    time["shortdayname"] = strftime("%a", now)
    time["yearday"]      = strftime("%j", now) + 0
    time["timezone"]     = strftime("%Z", now)
    time["ampm"]         = strftime("%p", now)
    time["weeknum"]      = strftime("%U", now) + 0
    time["altweeknum"]   = strftime("%W", now) + 0

    return ret
@}
@c endfile
@end example

Ëøô‰∫õÂ≠ó‰∏≤‰∏ãÊ†áÂæàÂÆπÊòì‰ΩøÁî®Âπ∂ÊØî @code{strftime()} ÊâÄ‰ΩøÁî®ÁöÑ‰∏ÄÁ≥ªÂàóÁöÑÊ†ºÂºèË¶ÅÂÆπÊòì„ÄÇÂú® @ref{Alarm Program}ÔºåÂëàÁé∞ÁöÑ @code{alarm} Á®ãÂ∫èÔºå‰ΩøÁî®‰∫ÜËøô‰∏™ÂáΩÊï∞„ÄÇ@code{getlocaltime()} ÂáΩÊï∞Êõ¥ÈÄöÁî®ÁöÑËÆæËÆ°ÂèØ‰ª•ÂÖÅËÆ∏Áî®Êà∑Êèê‰æõ‰∏Ä‰∏™ÂèØÈÄâÁöÑÊó∂Èó¥Êà≥ÂÄºÔºåËÄå‰∏çÊòØ‰ªÖ‰ΩøÁî®ÂΩìÂâçÊó∂Èó¥„ÄÇ

@node Readfile Function
@subsection ‰∏ÄÊ¨°ËØªÂèñÊï¥‰∏™Êñá‰ª∂

Â¶ÇÊûúÂ∞ÜÊï¥‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπÈÉΩÊîæÂú®ÂÜÖÂ≠ò‰∏≠‰Ωú‰∏∫‰∏Ä‰∏™Â≠ó‰∏≤ÁªèÂ∏∏ÂæàÊúâÁî®„ÄÇ‰∏Ä‰∏™Áõ¥Êé•ÁöÑÔºå‰ΩÜÊòØÊØîËæÉÂπºÁ®öÁöÑÊñπÊ≥ïÂèØËÉΩÂ¶Ç‰∏ãÔºö

@example
function readfile(file,    tmp, contents)
@{
    if ((getline tmp < file) < 0)
        return

    contents = tmp
    while (getline tmp < file) > 0)
        contents = contents RT tmp

    close(file)
    return contents
@}
@end example

Ëøô‰∏™ÂáΩÊï∞‰∏ÄÊ¨°‰ªéÊñá‰ª∂ @code{file} ËØªÂèñ‰∏Ä‰∏™ËÆ∞ÂΩïÔºåÁÑ∂ÂêéÁî®Êñá‰ª∂ÁöÑÂÜÖÂÆπÊù•ÊûÑÂª∫Êú¨Âú∞ÂèòÈáè @code{contents}„ÄÇËøôÊúâÁî®Ôºå‰ΩÜÊòØ‰∏çÂ§üÈ´òÊïà„ÄÇ

‰∏ãÈù¢ÁöÑÂáΩÊï∞Ôºå‰ΩøÁî®Áî± Denis Shirokov ÊèêÁöÑÂª∫ËÆÆÔºåÊù•‰∏ÄÊ¨°ËØªÂèñÊåáÂÆöÂêçÂ≠óÁöÑÊñá‰ª∂ÂÜÖÂÆπÔºö

@cindex @code{readfile()} user-defined function
@example
@c file eg/lib/readfile.awk
# readfile.awk --- read an entire file at once
@c endfile
@ignore
@c file eg/lib/readfile.awk
#
# Original idea by Denis Shirokov, cosmogen@@gmail.com, April 2013
#
@c endfile
@end ignore
@c file eg/lib/readfile.awk

function readfile(file,     tmp, save_rs)
@{
    save_rs = RS
    RS = "^$"
    getline tmp < file
    close(file)
    RS = save_rs

    return tmp
@}
@c endfile
@end example

ÈÄöËøáÂ∞Ü @code{RS} ËÆæÁΩÆÊàê @samp{^$}ÔºåÂç≥‰∏Ä‰∏™‰∏ÄÂÆö‰∏ç‰ºöÂåπÈÖçÊñá‰ª∂ÂÜÖÂÆπÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ@command{gawk} ‰ªéÊñá‰ª∂‰∏≠ËØªÂèñÂÜÖÂÆπÂà∞ @code{tmp} ‰∏≠ÔºåÂπ∂Â∞ùËØïÂåπÈÖç @code{RS}„ÄÇÊØèÊ¨°ËØªÂêéÁöÑÂåπÈÖçÈÉΩÂ§±Ë¥•Ôºå‰ΩÜÂæàÂåπÈÖçÂ§±Ë¥•ÂæàÂø´ÔºåËøôÊ†∑ @command{gawk} Â∞Ü @code{tmp} ÁöÑÂÜÖÂÆπÁî®Êñá‰ª∂ÁöÑÂÜÖÂÆπÊù•ËøõË°åÂ°´ÂÖÖ„ÄÇ
ÔºàÊü•Áúã @xref{Records}ÔºåÊù•Ëé∑Âèñ @code{RT} ‰∏é @code{RS} ÁöÑ‰ø°ÊÅØÔºâ

Â¶ÇÊûúÊñá‰ª∂ @code{file} ‰∏∫Á©∫ÔºåÂàôËøîÂõûÂÄº‰∏∫Á©∫‰∏≤„ÄÇÊâÄ‰ª•ÔºåË∞ÉÁî®‰ª£Á†ÅÂèØ‰ª•‰ΩøÁî®ËøôÊ†∑ÁöÑ‰ª£Á†ÅÔºö

@example
contents = readfile("/some/path")
if (length(contents) == 0)
    # file was empty @dots{}
@end example

ËøôÈáåÊµãËØïÁªìÊûúÁúãÂÖ∂ÊòØÂê¶‰∏∫Á©∫ËøòÊòØ‰∏ç‰∏∫Á©∫Ôºå‰∏Ä‰∏™Á≠âÂêåÁöÑÊµãËØï‰∏∫ @samp{contents == ""}„ÄÇ

Êü•Áúã @xref{Extension Sample Readfile}ÔºåÊù•Êü•ÁúãÊâ©Â±ïÁöÑÂáΩÊï∞ÔºåÂÆÉ‰πüÂ∞ÜÊï¥‰∏™Êñá‰ª∂ÁöÑÂÜÖÂÆπËØªÂèñÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇ

@node Shell Quoting
@subsection Â∞ÜÂ≠ó‰∏≤Áî®ÂºïÂè∑ÂºïËµ∑Âπ∂‰º†ÈÄíÁªô Shell

@c included by permission
@ignore
Date: Sun, 27 Jul 2014 17:16:16 -0700
Message-ID: <CAKuGj+iCF_obaCLDUX60aSAgbfocFVtguG39GyeoNxTFby5sqQ@mail.gmail.com>
Subject: Useful awk function
From: Mike Brennan <mike@madronabluff.com>
To: Arnold Robbins <arnold@skeeve.com>
@end ignore

Michael Brennan Êèê‰æõ‰∫Ü‰∏ãÈù¢ÁöÑÁºñÁ®ãÊ®°ÂºèÔºå‰ªñÁªèÂ∏∏ÊòØËøô‰πà‰ΩøÁî®Ôºö

@example
#! /bin/sh

awkp='
   @dots{}
   '

@var{input_program} | awk "$awkp" | /bin/sh
@end example

ÊØîÂ¶ÇÔºå‰ªñÁöÑ‰∏Ä‰∏™Á®ãÂ∫èÂêç‰∏∫ @command{flac-edit} Â∞±‰ΩøÁî®ËøôÁßçÂΩ¢ÂºèÔºö

@example
$ @kbd{flac-edit -song="Whoope! That's Great" file.flac}
@end example

ÂÆÉ‰∫ßÁîü‰∏ãÈù¢ÁöÑËæìÂá∫ÔºåËøô‰∫õËæìÂá∫ÈÄöËøáÁÆ°ÈÅìËæìÂá∫Áªô ShellÔºà@file{/bin/sh}ÔºâÔºö

@example
chmod +w file.flac
metaflac --remove-tag=TITLE file.flac
LANG=en_US.88591 metaflac --set-tag=TITLE='Whoope! That'"'"'s Great' file.flac
chmod -w file.flac
@end example

Ê≥®ÊÑè Shell ÈúÄË¶ÅÂºïÂè∑„ÄÇÂáΩÊï∞ @code{shell_quote()} Â∞±ÊòØÊù•ÂÅöËøô‰∏™‰∫ãÊÉÖÁöÑ„ÄÇ@code{SINGLE} ÊòØ‰∏Ä‰∏™‰∏ÄÂ≠óÁ¨¶ÁöÑ‰∏≤ @code{"'"}ÔºåËÄå @code{QSINGLE} ÊòØ‰∏Ä‰∏™‰∏âÂ≠óÁ¨¶ÁöÑ‰∏≤ @code{"\"'\""}Ôºö

@example
@c file eg/lib/shellquote.awk
# shell_quote --- quote an argument for passing to the shell
@c endfile
@ignore
@c file eg/lib/shellquote.awk
#
# Michael Brennan
# brennan@@madronabluff.com
# September 2014
@c endfile
@end ignore
@c file eg/lib/shellquote.awk

function shell_quote(s,             # parameter
    SINGLE, QSINGLE, i, X, n, ret)  # locals
@{
    if (s == "")
        return "\"\""

    SINGLE = "\x27"  # single quote
    QSINGLE = "\"\x27\""
    n = split(s, X, SINGLE)

    ret = SINGLE X[1] SINGLE
    for (i = 2; i <= n; i++)
        ret = ret QSINGLE SINGLE X[i] SINGLE

    return ret
@}
@c endfile
@end example

@node Data File Management
@section @value{DDF}ÁÆ°ÁêÜ


@cindex files, managing
@cindex libraries of @command{awk} functions, managing, data files
@cindex functions, library, managing data files
Êú¨@value{SECTION}ÂëàÁé∞ÁöÑÂáΩÊï∞Áî®‰∫éÁÆ°ÁêÜÂëΩ‰ª§Ë°å@value{DF}ÈùûÂ∏∏ÊúâÁî®„ÄÇ

@menu
* Filetrans Function::          A function for handling data file transitions.
* Rewind Function::             A function for rereading the current file.
* File Checking::               Checking that data files are readable.
* Empty Files::                 Checking for zero-length files.
* Ignoring Assigns::            Treating assignments as file names.
@end menu

@node Filetrans Function
@subsection Ê≥®ÊÑè@value{DDF}ÁöÑËæπÁïå

@cindex files, managing, data file boundaries
@cindex files, initialization and cleanup
@code{BEGIN} ‰∏é @code{END} ËßÑÂàôÁõ∏Â∫îÂú∞Âú®‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÁöÑÂºÄÂßã‰∏éÁªìÊùüÊâßË°å‰∏ÄÊ¨°ÔºàÊü•Áúã @pxref{BEGIN/END}Ôºâ„ÄÇÊàë‰ª¨Ôºà@command{gawk} ÁöÑ‰ΩúËÄÖ‰ª¨ÔºâÈÅáÂà∞Ëøá‰∏Ä‰∏™Áî®Êà∑ÔºåÈîôËØØÂú∞ËÆ§‰∏∫ @code{BEGIN} ËßÑÂàôÂú®ÊØè‰∏™@value{DF}ÁöÑÂºÄÂßãÈÉΩÊâßË°åÔºåËÄå @code{END} ËßÑÂàôÂú®ÊØè‰∏™@value{DF}ÁöÑÁªìÊùüÊó∂ÊâßË°å„ÄÇ

ÂΩìË¢´ÈÄöÁü•ËØ¥‰∫ãÊÉÖ‰∏çÊòØËøôÊ†∑ÁöÑÔºåÁî®Êà∑ËØ∑Ê±ÇÊàë‰ª¨Âä†‰∏Ä‰∏™Êñ∞ÁöÑÁâπÂÆöÊ®°ÂºèÂà∞ @command{gawk} ‰∏≠ÔºåÁß∞‰∏∫ @code{BEGIN_FILE} ‰∏é @code{END_FILE}ÔºåËøô‰∫õÈÉΩÂàôÂÖ∑ÊúâÊâÄÊúüÊúõÁöÑË°å‰∏∫„ÄÇ‰ªñÁîöËá≥‰∏∫Êàë‰ª¨Êèê‰æõËøô‰πàÂÅöÁöÑ‰ª£Á†Å„ÄÇ

Áªô @command{gawk} Âä†Ëøô‰∏™ÁâπÊÆäÊ®°ÂºèÂπ∂‰∏çÊòØÂøÖÈúÄÁöÑÔºå@command{awk} Ëá™Â∑±ÈÉΩÂ∞±ÂèØ‰ª•ÂæàÊ∏ÖÊ•öÂú∞ÂÆåÊàêËøô‰∏™‰∫ãÊÉÖÔºåÂ¶Ç‰∏ãÈù¢ÁöÑÂáΩÊï∞Á®ãÂ∫èÊâÄËß£ÈáäÁöÑ‰∏ÄÊ†∑„ÄÇÂÆÉ‰ºöË∞ÉÁî®‰∏§‰∏™Áî®Êà∑Ëá™Â∑±Êèê‰æõÁöÑÂáΩÊï∞ Ôºå@code{beginfile()} ‰∏é @code{endfile()} ÂàÜÂà´Âú®ÊØè‰∏™@value{DF}ÁöÑÂºÄÂßã‰∏éÁªìÊùü„ÄÇ‰∏ç‰ΩÜ@emph{ÂæàÂ•ΩÂú∞}Áî® 9 Ë°å‰ª£Á†ÅËß£ÂÜ≥‰∏äÈù¢ÁöÑÈóÆÈ¢òÔºåËÄå‰∏îËøòÂèØÁßªÊ§çÁß∞ÔºåËøôÂú®‰ªª‰Ωï @command{awk} ÂÆûÁé∞ÁâàÊú¨ÈÉΩÂèØÂ∑•‰Ωú„ÄÇ

@example
# transfile.awk
#
# Give the user a hook for filename transitions
#
# The user must supply functions beginfile() and endfile()
# that each take the name of the file being started or
# finished, respectively.
@c #
@c # Arnold Robbins, arnold@@skeeve.com, Public Domain
@c # January 1992

FILENAME != _oldfilename @{
    if (_oldfilename != "")
        endfile(_oldfilename)
    _oldfilename = FILENAME
    beginfile(FILENAME)
@}

END @{ endfile(FILENAME) @}
@end example

Ëøô‰∏™Êñá‰ª∂ÂøÖÈ°ªÂú®Áî®Êà∑ÁöÑ‰∏ªÁ®ãÂ∫è‰πãÂâçË£ÖÂÖ•ÔºåÂõ†Ê≠§ËøôÈáåÊâÄÊèê‰æõÁöÑËßÑÂàô‰ºöÈ¶ñÂÖàÊâßË°å„ÄÇ

Ëøô‰∏™ËßÑÂàô‰æùËµñ‰∫é @command{awk} ÁöÑ @code{FILENAME} ÂèòÈáèÔºåËøô‰∏™ÂèòÈáèÂú®Â§ÑÁêÜÊØè‰∏™Êñ∞ÁöÑ@value{DF}Êó∂Ëá™Âä®ÂèòÂåñ„ÄÇ
ÂΩìÂâçÁöÑ@value{DF}Â≠òÂÇ®Âú®‰∏Ä‰∏™ÁßÅÊúâÂèòÈáèÔºå@code{_oldfilename} ‰∏≠„ÄÇÂ¶ÇÊûú @code{FILENAME} ‰∏é @code{_oldfilename} ‰∏çÁõ∏ÂêåÔºåÂàô‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆÊñá‰ª∂Ê≠£Âú®Ë¢´Â§ÑÁêÜÔºåÂàôÊúâÂøÖÈ°ª‰∏∫ÊóßÊñá‰ª∂Ë∞ÉÁî® @code{endfile()}„ÄÇÂõ†‰∏∫ @code{endfile()} ‰ªÖÂú®‰∏Ä‰∏™Êñá‰ª∂Ë¢´Â§ÑÁêÜÂÆåÂêé‰ºöË∞ÉÁî®ÔºåÊâÄ‰ª•ÔºåÁ®ãÂ∫èÈ¶ñÂÖàË¶ÅÊ£ÄÊü•Á°ÆÂÆö @code{_oldfilename} ‰∏çÊòØ‰∏Ä‰∏™Á©∫‰∏≤„ÄÇÁ®ãÂ∫èÁÑ∂ÂêéÂ∞ÜÂΩìÂâç@value{FN}ËµãÂÄºÁªô @code{_oldfilename} ÁÑ∂Âêé‰∏∫ÂΩìÂâçÊñá‰ª∂Ë∞ÉÁî® @code{beginfile()}„ÄÇÂÉè @command{awk} ÁöÑÂèòÈáè‰∏ÄÊ†∑ÔºåÂõ†‰∏∫ @code{_oldfilename} Ë¢´ÂàùÂßãÂåñ‰∏∫Á©∫‰∏≤ÔºåËøô‰∏™ËßÑÂàôÁîöËá≥Âú®ËØªÂèñÁ¨¨‰∏Ä‰∏™@value{DF}Êó∂‰πüÊòØÊ≠£Á°ÆÁöÑ„ÄÇ

Á®ãÂ∫è‰πüÊèê‰æõ‰∏Ä‰∏™ @code{END} ËßÑÂàôÊù•Â§ÑÁêÜÊúÄÂêé‰∏Ä‰∏™Êñá‰ª∂„ÄÇÂõ†‰∏∫Ëøô‰∏™ @code{END} ËßÑÂàôÂú®‰ªª‰ΩïÂÖ∂‰ªñÁöÑÁî±‰∏ªÁ®ãÂ∫èÊèê‰æõ @code{END} ËßÑÂàô‰πãÂâçÔºåÂõ†Ê≠§ @code{endfile()} ‰ºöÈ¶ñÂÖàË¢´Ë∞ÉÁî®„ÄÇÂÜç‰∏ÄÊ¨°Âú∞Ôºå Â§ö‰∏™ @code{BEGIN} ‰∏é @code{END} ËßÑÂàôÁöÑÂÄºÂ∫îËØ•Ë¢´Ê∏ÖÈô§„ÄÇ

@cindex @code{beginfile()} user-defined function
@cindex @code{endfile()} user-defined function
Â¶ÇÊûúÂêåÊ†∑ÁöÑ@value{DF}Âú®‰∏Ä‰∏™ÂëΩ‰ª§‰∏≠Âá∫Áé∞‰∫Ü‰∏§Ê¨°ÔºåÂàô @code{endfile()} ‰∏é @code{beginfile()} Âú®Á¨¨‰∏ÄËΩÆÁªìÊùüÁöÑÊó∂ÂÄô‰∏ç‰ºöË¢´ÊâßË°åÔºåËÄåÂú®Á¨¨‰∫åËΩÆÂºÄÂßãÁöÑÊó∂ÂÄôÊâßË°å„ÄÇ‰∏ãÈù¢ÁöÑÁâàÊú¨Ëß£ÂÜ≥‰∫ÜËøô‰∏™ÈóÆÈ¢òÔºö

@example
@c file eg/lib/ftrans.awk
# ftrans.awk --- handle datafile transitions
#
# user supplies beginfile() and endfile() functions
@c endfile
@ignore
@c file eg/lib/ftrans.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# November 1992
@c endfile
@end ignore
@c file eg/lib/ftrans.awk

FNR == 1 @{
    if (_filename_ != "")
        endfile(_filename_)
    _filename_ = FILENAME
    beginfile(FILENAME)
@}

END @{ endfile(_filename_) @}
@c endfile
@end example

Âú® @ref{Wc Program}Ôºå‰∏≠Â±ïÁ§∫‰∫ÜËøô‰∏™Â∫ìÂáΩÊï∞ÂèØ‰ª•Áî®‰∫é‰ª•ÂèäÂ¶Ç‰ΩïÊù•ÁÆÄÂåñ‰∏ªÁ®ãÂ∫èÁöÑÁºñÂÜô„ÄÇ

@sidebar ÈÇ£‰πà‰∏∫‰ªÄ‰πà @command{gawk} ÈúÄË¶Å @code{BEGINFILE} ‰∏é @code{ENDFILE}?

‰Ω†ÂèØËÉΩÂæàÂ•áÊÄ™ÔºåÂ¶ÇÊûú @code{beginfile()} ‰∏é @code{endfile()} ÂáΩÊï∞ÂèØ‰ª•ÂÅöÁõ∏ÂêåÁöÑ‰∫ãÊÉÖÔºå‰∏∫‰ªÄ‰πà @command{gawk} ËøòË¶ÅÊúâ @code{BEGINFILE} ‰∏é @code{ENDFILE} Ê®°ÂºèÂë¢Ôºü

ÈóÆÈ¢òÂæàÂ•Ω„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú @command{awk} Ê≤°Ê≥ïÊâìÂºÄ‰∏Ä‰∏™Êñá‰ª∂ÔºåËøô‰ºöÁ´ãÂç≥ÂØºËá¥‰∏Ä‰∏™Ëá¥‰ΩøÈîôËØØ„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂØπ‰∫éÁî®Êà∑Ëá™Â∑±ÂÆö‰πâÁöÑÂáΩÊï∞Êù•ËÆ≤ÔºåÂ∞±Ê≤°ÊúâÂäûÊ≥ïÊù•Â§ÑÁêÜËøô‰∏™ÈóÆÈ¢ò„ÄÇÂõ†‰∏∫Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÊú∫Âà∂‰æùËµñ‰∫éÊ≠£Âú®Ë¢´ÊâìÂºÄÁöÑÊñá‰ª∂ÂèäÂÖ∂Á¨¨‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇÊâÄ‰ª•Ôºå@code{BEGINFILE} ÁöÑ‰∏ªË¶ÅÂéüÂõ†ÊòØÁªô‰Ω†‰∏Ä‰∏™‚ÄúÂãæÂ≠ê‚ÄùÊù•ÊçïËé∑‰∏çËÉΩË¢´Â§ÑÁêÜÁöÑÊñá‰ª∂„ÄÇË¶ÅÂèñÂæóÊõ¥Â§öÁöÑ‰ø°ÊÅØÔºåËØ∑Êü•Áúã @ref{BEGINFILE/ENDFILE}„ÄÇ
@end sidebar

@node Rewind Function
@subsection ÈáçÊñ∞ËØªÂèñÂΩìÂâçÊñá‰ª∂

@cindex files, reading
ÂØπ‰∫éÂÜÖÁΩÆÂáΩÊï∞ÁöÑÂè¶‰∏Ä‰∏™ËØ∑Ê±ÇÂàôÊòØÂä†ÂÖ•ËøôÊ†∑ÁöÑ‰∏Ä‰∏™ÂáΩÊï∞‰ΩøÂÖ∂ÂèØ‰ª•ÈáçÊñ∞ËØªÂèñÂΩìÂâçÊñá‰ª∂„ÄÇËØ∑Ê±ÇÁöÑÁî®Êà∑‰∏çÊÉ≥Âú®Âæ™ÁéØ‰∏≠‰ΩøÁî® @code{getline}ÔºàÊü•Áúã @pxref{Getline}Ôºâ„ÄÇ

‰ΩÜÊòØÔºåÂè™Ë¶Å‰Ω†Ëøò‰∏çÂú® @code{END} ËßÑÂàô‰∏≠ÔºåÂ∞±ÈùûÂ∏∏ÂÆπÊòìÂÆâÊéíÁ´ãÂç≥ÂÖ≥Èó≠ÂΩìÂâçÊñá‰ª∂ÔºåÁÑ∂Êñ∞Â§¥ÂºÄÂßãÂ§ÑÁêÜËøô‰∏™Êñá‰ª∂„ÄÇÁî±‰∫éÁº∫Â∞ëÂ•ΩÂêçÂ≠óÔºåÊàë‰ª¨ÊääÂÆÉÂèñÂêç‰∏∫ @code{rewind()}Ôºö

@cindex @code{rewind()} user-defined function
@example
@c file eg/lib/rewind.awk
# rewind.awk --- rewind the current file and start over
@c endfile
@ignore
@c file eg/lib/rewind.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# September 2000
@c endfile
@end ignore
@c file eg/lib/rewind.awk

function rewind(    i)
@{
    # shift remaining arguments up
    for (i = ARGC; i > ARGIND; i--)
        ARGV[i] = ARGV[i-1]

    # make sure gawk knows to keep going
    ARGC++

    # make current file next to get done
    ARGV[ARGIND+1] = FILENAME

    # do it
    nextfile
@}
@c endfile
@end example

@code{rewind()} ÂáΩÊï∞‰æùËµñ‰∫é @code{ARGIND} ÂèòÈáèÔºàÊü•Áúã @pxref{Auto-set}ÔºâÔºåËøô‰∏™ÂèòÈáèÊòØ @command{gawk} ÁâπÊúâÁöÑ„ÄÇÂêåÊó∂‰πü‰æùËµñ‰∫é @code{nextfile} ÂÖ≥ÈîÆËØçÔºàÊü•Áúã @pxref{Nextfile Statement}Ôºâ„ÄÇÁî±‰∫éËøô‰∏™ÂéüÂõ†Ôºå‰Ω†‰∏çÂèØ‰ª•Âú® @code{ENDFILE} ËßÑÂàô‰∏≠Ë∞ÉÁî®ÂÆÉ„ÄÇÔºà‰πüÊ≤°ÊúâÂøÖË¶ÅÔºåÂõ†Ê≠§ @command{gawk} Âè™Ë¶Å @code{ENDFILE} ‰∏ÄÁªìÊùüÂ∞±ÂºÄÂßã‰∫Ü‰∏ã‰∏Ä‰∏™Êñá‰ª∂ÔºÅÔºâ

‰Ω†ÈúÄË¶ÅÂ∞èÂøÉÂú∞Ë∞ÉÁî® @code{rewind()}„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÊ≥®ÊÑèÁöÑËØùÔºåÂèØËÉΩ‰ºöÂºïÂèëÊó†ÈôêÂæ™ÁéØËÄåÁªìÊùüÁ®ãÂ∫è„ÄÇËøôÈáåÊòØ‰∏Ä‰∏™‰ΩøÁî®ÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{cat data}
@print{} a
@print{} b
@print{} c
@print{} d
@print{} e

$ cat @kbd{test.awk}
@print{} FNR == 3 && ! rewound @{
@print{} 	rewound = 1
@print{} 	rewind()
@print{} @}
@print{} 
@print{} @{ print FILENAME, FNR, $0 @}

$ @kbd{gawk -f rewind.awk -f test.awk data }
@print{} data 1 a
@print{} data 2 b
@print{} data 1 a
@print{} data 2 b
@print{} data 3 c
@print{} data 4 d
@print{} data 5 e
@end example

@node File Checking
@subsection Ê£ÄÊü•ÂèØËØªÁöÑ@value{DDF}

@cindex troubleshooting, readable data files
@cindex readable data files@comma{} checking
@cindex files, skipping
‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú‰Ω†Êèê‰æõ @command{awk} ‰∏Ä‰∏™@value{DF}ÊòØ‰∏çÂèØËØªÁöÑÔºåÂÆÉ‰ºö‰ª•Ëá¥‰ΩøÈîôËØØËÄåÁªìÊùü„ÄÇÊúâ‰∏Ä‰∫õÊó∂ÂÄôÔºå‰Ω†ÂèØËÉΩÊÉ≥ÂøΩÁï•ËøôÊ†∑ÁöÑÈóÆÈ¢òÂπ∂ÂæÄ‰∏ãËµ∞„ÄÇ
@footnote{@code{BEGINFILE} ÁâπÂÆöÊ®°ÂºèÔºàÊü•Áúã @pxref{BEGINFILE/ENDFILE}ÔºâÊèê‰æõ‰∫ÜÂè¶‰∏ÄÁßçÊú∫Âà∂Êù•Â§ÑÁêÜÈÇ£‰∫õ‰∏çÂèØ‰ª•ÊâìÂºÄÁöÑÊñá‰ª∂„ÄÇ‰ΩÜÊòØÔºåËøôÈáåÁöÑ‰ª£Á†ÅÊèê‰æõ‰∫Ü‰∏ÄÁßçÂèØÁßªÊ§çÁöÑÊñπÊ°à„ÄÇ}
‰Ω†ÂèØ‰ª•Â∞Ü‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÊèíÂÖ•Âà∞‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è‰∏≠Ôºö

@cindex @code{readable.awk} program
@example
@c file eg/lib/readable.awk
# readable.awk --- library file to skip over unreadable files
@c endfile
@ignore
@c file eg/lib/readable.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# October 2000
# December 2010
@c endfile
@end ignore
@c file eg/lib/readable.awk

BEGIN @{
    for (i = 1; i < ARGC; i++) @{
        if (ARGV[i] ~ /^[a-zA-Z_][a-zA-Z0-9_]*=.*/ \
            || ARGV[i] == "-" || ARGV[i] == "/dev/stdin")
            continue    # assignment or standard input
        else if ((getline junk < ARGV[i]) < 0) # unreadable
            delete ARGV[i]
        else
            close(ARGV[i])
    @}
@}
@c endfile
@end example

@cindex troubleshooting, @code{getline} function
Ëøô‰∏™ÂèØ‰ª•Â∑•‰ΩúÔºåÂõ†‰∏∫ @code{getline} ‰∏ç‰ºöÂØºËá¥Ëá¥‰ΩøÈîôËØØ„ÄÇÂ∞Ü @code{delete} ‰ªé @code{ARGV} Êï∞ÁªÑ‰∏≠ÁßªÈô§ÂÖÉÁ¥†‰ª•Ë∑≥ËøáËøô‰∫õÊñá‰ª∂ÔºàÂõ†Ê≠§ÂÆÉ‰∏çÂÜçÂú®ÂàóË°®‰∏≠Ôºâ„ÄÇÊü•Áúã @ref{ARGC and ARGV}„ÄÇ

Áî±‰∫é @command{awk} ÂèòÈáèÂêçÂ≠óÂè™ÂÖÅËÆ∏ÊòØËã±ÊñáÂ≠óÊØçÔºåÊâÄ‰ª•Ê≠£ÂàôË°®ËææÂºèÊ£ÄÊü•ÊúâÊÑè‰∏ç‰ΩøÁî®Â≠óÁ¨¶Á±ªÔºåÂ¶Ç @samp{[:alpha:]} ‰∏é @samp{[:alnum:]} ÔºàÊü•Áúã 
@pxref{Bracket Expressions}Ôºâ„ÄÇ

@node Empty Files
@subsection Ê£ÄÊü•ÈïøÂ∫¶‰∏∫Èõ∂ÁöÑÊñá‰ª∂

ÊâÄÊúâÂ∑≤Áü•ÁöÑ @command{awk} ÂÆûÁé∞ÈÉΩÈªòÈªòÂú∞Ë∑≥ËøáÈïøÂ∫¶‰∏∫Èõ∂ÁöÑÊñá‰ª∂„ÄÇËøôÊòØÁî± @command{awk} ÈöêÂºèËßÑÂàô‚ÄúËØªÂèñËÆ∞ÂΩïÂπ∂ÂåπÈÖçËßÑÂàô‚ÄùÂæ™ÁéØ‰∫ßÁîüÁöÑÁªìÊûú„ÄÇÂΩì @command{awk} Â∞ùËØïËØªÂèñÁ©∫Êñá‰ª∂ËÆ∞ÂΩïÊó∂ÔºåÂÆÉÁ´ãÂç≥‰ºöÊé•Êî∂Âà∞Êñá‰ª∂ÁªìÊùüÁöÑÊåáÁ§∫ÔºåÁÑ∂Âêé‰ºöÂÖ≥Èó≠Êñá‰ª∂ÔºåÂπ∂Â§ÑÁêÜÂëΩ‰ª§Ë°å‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™@value{DF}ÔºåËÄå@emph{‰∏ç‰ºö}ÊâßË°å‰ªªÂä°Áî®Êà∑Â±ÇÁöÑ @command{awk} Á®ãÂ∫è‰ª£Á†Å„ÄÇ

‰ΩøÁî® @command{gawk} ÁöÑ @code{ARGIND} ÂèòÈáèÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÔºåÊúâÂèØËÉΩÊù•Ê£ÄÊµãÂΩìÈÅáÂà∞‰∏Ä‰∏™Á©∫@value{DF}Êó∂ÂàôË∑≥Ëøá„ÄÇ
‰∏éÂú® @ref{Filetrans Function}ÔºåÂëàÁé∞ÁöÑÂ∫ìÊñá‰ª∂Áõ∏‰ººÔºå‰∏ãÈù¢ÁöÑÂ∫ìÊñá‰ª∂‰ºöË∞ÉÁî®Áî®Êà∑ÂøÖÈ°ªÊèê‰æõÁöÑÂáΩÊï∞ÔºåÂêç‰∏∫ @code{zerofile()}„ÄÇ‰º†ÈÄíÁöÑÂèÇÊï∞‰∏∫@value{FN}Ôºå‰ª•ÂèäÂÖ∂Âú® @code{ARGV} ‰∏≠ÁöÑ‰ΩçÁΩÆÔºö

@cindex @code{zerofile.awk} program
@example
@c file eg/lib/zerofile.awk
# zerofile.awk --- library file to process empty input files
@c endfile
@ignore
@c file eg/lib/zerofile.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# June 2003
@c endfile
@end ignore
@c file eg/lib/zerofile.awk

BEGIN @{ Argind = 0 @}

ARGIND > Argind + 1 @{
    for (Argind++; Argind < ARGIND; Argind++)
        zerofile(ARGV[Argind], Argind)
@}

ARGIND != Argind @{ Argind = ARGIND @}

END @{
    if (ARGIND > Argind)
        for (Argind++; Argind <= ARGIND; Argind++)
            zerofile(ARGV[Argind], Argind)
@}
@c endfile
@end example

Áî®Êà∑Â±ÇÁöÑÂèòÈáè @code{Argind} ÂÖÅËÆ∏ @command{awk} Á®ãÂ∫èË∑üË∏™ÂÆÉÁöÑ @code{ARGV} ËøõÂ∫¶„ÄÇ
Êó†ËÆ∫‰ªÄ‰πàÊó∂ÂÄôÁ®ãÂ∫èÊ£ÄÊµãÂà∞‰∫Ü @code{ARGIND} Â§ß‰∫é @samp{Argind + 1}ÔºåËøôÂ∞±Ë°®Á§∫‰∏ÄÂà∞Â§ö‰∏™ÁöÑÊñá‰ª∂ÂêçÂ∑≤ÁªèË¢´Ë∑≥Ëøá‰∫Ü„ÄÇÁÑ∂ÂêéË∞ÉÁî® @code{zerofile()} ÁöÑÂä®‰ΩúÊù•Â§ÑÁêÜÊØè‰∏Ä‰∏™Êñá‰ª∂ÔºåÂπ∂ÈÄíÂ¢û Argind ÂèòÈáè„ÄÇ

@samp{Argind != ARGIND} ‰∏≠ÊòØÁÆÄÂçïÂú∞Êù•‰Ωø @code{Argind} Âú®Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊõ¥Êñ∞‰∏∫ÊúÄÊñ∞Áä∂ÊÄÅ„ÄÇ

ÊúÄÂêé @code{END} ËßÑÂàô‰ºöÊçïËé∑Âú®ÂëΩ‰ª§Ë°åÊúÄÂêéÁöÑÂèÇÊï∞‰∏≠ÁöÑÁ©∫Êñá‰ª∂„ÄÇÊ≥®ÊÑèÂú® @code{for} Âæ™ÁéØ‰∏≠‰ΩøÁî®ÁöÑÊµãËØïÊù°‰ª∂ÔºåÊòØ ‰ΩøÁî® @samp{<=} Êìç‰ΩúÁ¨¶ËÄå‰∏çÊòØ @samp{<}„ÄÇ

@node Ignoring Assigns
@subsection Â∞ÜËµãÂÄºÂΩìÊàêÊòØ@value{FFN}

@cindex assignments as filenames
@cindex filenames, assignments as
ÊúâÊó∂ÂÄôÔºå‰Ω†‰∏çÊÉ≥ @command{awk} Êù•Â§ÑÁêÜÂëΩ‰ª§Ë°åÁöÑÂèòÈáèËµãÂÄºÔºàÊü•Áúã @pxref{Assignment Options}Ôºâ„ÄÇ
Â∞§ÂÖ∂ÊòØ‰Ω†Êúâ‰∏Ä‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´ @samp{=} Á¨¶Âè∑Ôºå@command{awk} ‰ºöÂ∞ÜËøô‰∏™@value{FN}ÂΩìÊàê‰∏Ä‰∏™ËµãÂÄºÔºåËÄå‰∏ç‰ºöÂ§ÑÁêÜÂÆÉ„ÄÇ

‰∏Ä‰∫õÁî®Êà∑ÊõæÂª∫ËÆÆ‰∫Ü‰∏Ä‰∏™È¢ùÂ§ñÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÊù•Áªô @command{gawk} ÂéªÁ¶ÅÁî®ÂëΩ‰ª§Ë°åÁöÑËµãÂÄº„ÄÇ‰ΩÜÊòØÔºå‰∏Ä‰∫õÂ∫ìÊñá‰ª∂‰∏≠ÁöÑÁÆÄÂçïÁöÑÁ®ãÂ∫èÂ∞±ÂèØ‰ª•Ëß£ÂÜ≥Ôºö

@cindex @code{noassign.awk} program
@example
@c file eg/lib/noassign.awk
# noassign.awk --- library file to avoid the need for a
# special option that disables command-line assignments
@c endfile
@ignore
@c file eg/lib/noassign.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# October 1999
@c endfile
@end ignore
@c file eg/lib/noassign.awk

function disable_assigns(argc, argv,    i)
@{
    for (i = 1; i < argc; i++)
        if (argv[i] ~ /^[a-zA-Z_][a-zA-Z0-9_]*=.*/)
            argv[i] = ("./" argv[i])
@}

BEGIN @{
    if (No_command_assign)
        disable_assigns(ARGC, ARGV)
@}
@c endfile
@end example

ÁÑ∂Âêé‰Ω†Ëøô‰πàÊù•ËøêË°åÁ®ãÂ∫èÔºö

@example
awk -v No_command_assign=1 -f noassign.awk -f yourprog.awk *
@end example

ÂáΩÊï∞‰ºöËø≠‰ª£ÊâÄÊúâÁöÑÂèÇÊï∞„ÄÇÂÆÉ‰ºöÂú®ÂåπÈÖçÂèòÈáèËµãÂÄºÂΩ¢ÂºèÁöÑÂèÇÊï∞ÂâçÊèíÂÖ• @samp{./}ÔºåÊù•Â∞ÜÂèÇÊï∞ËΩ¨Êç¢‰∏∫@value{FN}„ÄÇ

ÈÄöËøáÁªô @code{No_command_assign} Âú®Ë∞ÉÁî®Êó∂ËµãÂÄº‰∏∫ trueÔºåÂèØ‰ª•ËÆ©‰Ω†Ë∞ÉÁî®Êó∂Á¶ÅÁî®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑËµãÂÄº„ÄÇÂΩìÊ≤°ÊúâËÆæÁΩÆÊó∂ÔºåÂÆÉÁöÑÂàùÂßãÂÄº‰∏∫ 0ÔºàÂç≥ falseÔºâÔºåÊâÄ‰ª•ÂëΩ‰ª§Ë°åÂèÇÊï∞Â∞±‰∏ç‰ºöÂèòÂåñ„ÄÇ

@node Getopt Function
@section Â§ÑÁêÜÂëΩ‰ª§Ë°åÈÄâÈ°π

@cindex libraries of @command{awk} functions, command-line options
@cindex functions, library, command-line options
@cindex command-line options, processing
@cindex options, command-line, processing
@cindex functions, library, C library
@cindex arguments, processing
Âú® POSIX ÂÖºÂÆπÁöÑÁ≥ªÁªü‰∏äÁöÑÂ§ßÂ§öÊï∞Â∑•ÂÖ∑ÈÉΩ‰ªéÂëΩ‰ª§Ë°å‰∏≠ÂèñÂæóÈÄâÈ°πÔºåÁî®Ê≠§Êù•ÊîπÂèòÁ®ãÂ∫èÁöÑË°å‰∏∫ÊñπÂºè„ÄÇ@command{awk} ÊòØ‰∏Ä‰∏™ËøôÊ†∑ÁöÑ‰æãÂ≠êÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ
ÁªèÂ∏∏Âú∞ÔºåÈÄâÈ°πÈÉΩ‰ºöÊúâ@dfn{ÂèÇÊï∞}ÔºàÂç≥Á®ãÂ∫èÂëΩ‰ª§Ë°åË¶ÅÊ≠£Á°ÆÈÅµÂÆàÈÄâÈ°πÁöÑÊâÄÈúÄË¶ÅÁöÑÊï∞ÊçÆÔºâ„ÄÇ‰æãÂ¶Ç @command{awk} ÁöÑ @option{-F} ÈÄâÈ°πÔºåÈúÄË¶Å‰∏Ä‰∏™‰∏≤Êù•‰Ωú‰∏∫ÂüüÁöÑÂàÜÈöîÁ¨¶„ÄÇÁ¨¨‰∏Ä‰∏™Âá∫Áé∞Âú®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑ @option{--} ÊàñËÄÖ‰∏çËÉΩ @samp{-} ÂºÄÂ§¥ÁöÑÂ≠ó‰∏≤ÁªìÊùüÈÄâÈ°π„ÄÇ

@cindex @code{getopt()} function (C library)
Áé∞Âú®ÁöÑ Unix Á≥ªÁªüÊèê‰æõ‰∫Ü C ÂáΩÊï∞ÔºåÂêçÂ≠ó‰∏∫ @code{getopt()} Êù•Â§ÑÁêÜÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇÁ®ãÂ∫èÂëòÊèê‰æõ‰∏Ä‰∏™Â≠ó‰∏≤Áî®Êù•ÊèèËø∞ÂçïÂ≠óÊØçÁöÑÈÄâÈ°π„ÄÇÂ¶ÇÊûúÈÄâÈ°πÈúÄË¶Å‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂàôÂÆÉÂú®Â≠ó‰∏≤ÂêéÂêéÈù¢‰ºöË∑ü‰∏Ä‰∏™ÂÜíÂè∑„ÄÇ@code{getopt()} ÂêåÊó∂‰πü‰º†ÈÄíÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÊï∞Èáè‰∏éÂÄºÔºåÂπ∂Âú®Âæ™ÁéØ‰∏≠ËøõË°åË∞ÉÁî®„ÄÇ@code{getopt()} ‰∏∫ÈÄâÈ°πÂ≠óÊØçÂ§ÑÁêÜÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇÊØèÊ¨°Ëø≠‰ª£Âæ™ÁéØÔºåÂÆÉÂ∞±ËøîÂõû‰∏Ä‰∏™‰ª£Ë°®‰∏ã‰∏Ä‰∏™ÂÆÉÊâÄÂèëÁé∞ÁöÑÈÄâÈ°πÂ≠óÊØçÔºåÊàñËÄÖ‰∏∫Êó†ÊïàÁöÑÈÄâÈ°πÁöÑÊó∂ÂÄôÔºåËøîÂõû @samp{?}„ÄÇÂΩìËøîÂõû @minus{}1 Êó∂ÔºåË°®Á§∫ÂëΩ‰ª§Ë°å‰∏≠Ê≤°ÊúâË¶ÅÂ§ÑÁêÜÁöÑÈÄâÈ°π‰∫Ü„ÄÇ

ÂΩì‰ΩøÁî® @code{getopt()} Êó∂ÔºåÊ≤°ÊúâÂ∏¶ÂèÇÊï∞ÁöÑÈÄâÈ°πÂèØ‰ª•Ë¢´ÂêàÂπ∂Âú®‰∏ÄËµ∑„ÄÇÂè¶Â§ñÔºåÈúÄË¶ÅÂ∏¶ÂèÇÊï∞ÈÄâÈ°πÈúÄË¶ÅÂèÇÊï∞‰∏éË¶ÅÊèê‰æõ„ÄÇÂèÇÊï∞ÂèØ‰ª•Áõ¥Êé•Ë∑üÂú®ÈÄâÈ°πÂ≠óÊØçÂêéÈù¢ÔºåÊàñËÄÖ‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂàÜÁ¶ªÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇ

ÂÅáËÆæÊúâ‰∏Ä‰∏™ÂÅáÊÉ≥ÁöÑÁ®ãÂ∫èÔºåÊé•Êî∂‰∏â‰∏™ÂëΩ‰ª§Ë°åÂèÇÊï∞Ôºå@option{-a}Ôºå@option{-b} ‰∏é @option{-c}ÔºåËÄå @option{-b} ÈúÄË¶Å‰∏Ä‰∏™ÂèÇÊï∞Ôºå‰∏ãÈù¢ÊâÄÊúâÁöÑËØ•ÂΩìÈÉΩÊòØÊúâÊïàÁöÑË∞ÉÁî®Á®ãÂ∫èÁöÑÊñπÂºèÔºö

@example
prog -a -b foo -c data1 data2 data3
prog -ac -bfoo -- data1 data2 data3
prog -acbfoo data1 data2 data3
@end example

Ê≥®ÊÑèÂà∞ÔºåÂΩìÂèÇÊï∞‰∏éÂÆÉÁöÑÈÄâÈ°πËøõË°åÁªÑÂêàÊó∂ÔºåÂèÇÊï∞ÂêéÈù¢ÁöÑÈÉ®ÂàÜÈÉΩË¢´ÂΩìÊàêÊòØÈÄâÈ°πÁöÑÂèÇÊï∞„ÄÇÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@option{-abcfoo} Ë°®Á§∫ÊâÄÊúâÁöÑ @option{-a}Ôºå@option{-b} ‰∏é @option{-c} ÈÄâÈ°πÔºåÂπ∂‰∏î @samp{foo} ÊòØ @option{-b} ÈÄâÈ°πÁöÑÂèÇÊï∞„ÄÇ

@code{getopt()} Êèê‰æõ‰∫Ü 4 ‰∏™Â§ñÈÉ®ÁöÑÂèòÈáèÔºå‰æõÁ®ãÂ∫èÂëò‰ΩøÁî®Ôºö

@table @code
@item optind
Âú®ÂèÇÊï∞ÂÄºÊï∞ÁªÑÔºà@code{argv}Ôºâ‰∏≠ÁöÑÁ¥¢ÂºïÔºåÂú®Ëøô‰∏™Êï∞ÁªÑ‰∏≠ÔºåÂèØ‰ª•ÊâæÂà∞Á¨¨‰∏Ä‰∏™‰∏çÊòØÈÄâÈ°πÁöÑÂëΩ‰ª§ÂèÇÊï∞„ÄÇ

@item optarg
ÊüêÊ≠§ÈÄâÈ°πÁöÑÂèÇÊï∞ÁöÑÂ≠ó‰∏≤ÂÄº„ÄÇ

@item opterr
ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºå@code{getopt()} Âú®ÊâæÂà∞‰∏Ä‰∏™Êó†ÊïàÁöÑÈÄâÈ°πÁöÑÊó∂ÂÄô‰ºöÊâìÂç∞‰∏Ä‰∏™ÈîôËØØÊ∂àÊÅØ„ÄÇÂ∞Ü @code{opterr} ËÆæÁΩÆ‰∏∫ 0 ÂèØ‰ª•Á¶ÅÁî®Ëøô‰∏™ÁâπÊÄß„ÄÇÔºàÂ∫îÁî®Á®ãÂ∫èÂèØËÉΩÊÉ≥ÊâìÂç∞Ëá™Â∑±ÁöÑÈîôËØØÊ∂àÊÅØ„ÄÇÔºâ

@item optopt
‰ª£Ë°®ÂëΩ‰ª§Ë°åÈÄâÈ°πÁöÑÂ≠óÊØç„ÄÇ
@end table

‰∏ãÈù¢ÁöÑ C ‰ª£Á†ÅÁâàÊú¨Â±ïÁ§∫‰∫Ü @code{getopt()} Â¶Ç‰ΩïÊù•Â§ÑÁêÜ @command{awk} ÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÂèØËÉΩÊñπÂºèÔºö

@example
int
main(int argc, char *argv[])
@{
    @dots{}
    /* print our own message */
    opterr = 0;
    while ((c = getopt(argc, argv, "v:f:F:W:")) != -1) @{
        switch (c) @{
        case 'f':    /* file */
            @dots{}
            break;
        case 'F':    /* field separator */
            @dots{}
            break;
        case 'v':    /* variable assignment */
            @dots{}
            break;
        case 'W':    /* extension */
            @dots{}
            break;
        case '?':
        default:
            usage();
            break;
        @}
    @}
    @dots{}
@}
@end example

Êèí‰∏ÄÂè•Ôºå@command{gawk} ÂÆûÈôÖ‰∏äÊòØ‰ΩøÁî® GNU ÁöÑ @code{getopt_long()} ÂáΩÊï∞Êù•Â§ÑÁêÜÂ∏∏ËßÑÁöÑÈÄâÈ°π‰ª•Âèä GNU È£éÊ†ºÁöÑÈïøÈÄâÈ°πÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ

Áî± @code{getopt()} Êèê‰æõÁöÑÊäΩË±°ÈùûÂ∏∏ÊúâÁî®ÔºåÂπ∂‰∏îÂú® @command{awk} Á®ãÂ∫è‰∏≠‰πüÈùûÂ∏∏Êñπ‰æø„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™ @command{awk} ÁâàÊú¨ÁöÑ @code{getopt()}„ÄÇ
Ëøô‰∏™ÂáΩÊï∞Á™ÅÂá∫‰∫Ü @command{awk} ‰∏≠ÊúÄÂº±ÁöÑ‰∏Ä‰∏™ÊñπÈù¢ÔºåÂç≥ÂÆÉÂú®Â§ÑÁêÜÂçï‰∏™Â≠óÁ¨¶ÁöÑÊó∂ÂÄôÈùûÂ∏∏Â∑Æ„ÄÇÈáçÂ§çÂú∞Ë∞ÉÁî® @code{substr()} Âú®ËØªÂèñÂçï‰∏™Â≠óÁ¨¶Êó∂ÊòØÂøÖÈ°ªÁöÑÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ 
@footnote{Ëøô‰∏™ÁâàÊú¨Âú® @command{gawk} Ë¶ÅÊ±ÇÁî® @code{""} Â∞ÜÂ≠ó‰∏≤ÂàÜÈöî‰∏∫Â≠óÁ¨¶ÁöÑËÉΩÂäõ‰πãÂâçÂÜôÊàêÁöÑ„ÄÇÊàë‰ª¨Â∑≤Áªè‰∏çÁÆ°ÂÆÉ‰∫ÜÔºåÂõ†‰∏∫Áî® @code{substr()} ÂèØÁßªÊ§çÊÄßÊõ¥Â•Ω„ÄÇ}

‰∏ãÈù¢‰∏ÄÁÇπÁÇπÂú∞Êù•Ëß£Èáä‰ª£Á†ÅÔºö

@cindex @code{getopt()} user-defined function
@example
@c file eg/lib/getopt.awk
# getopt.awk --- Do C library getopt(3) function in awk
@c endfile
@ignore
@c file eg/lib/getopt.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
#
# Initial version: March, 1991
# Revised: May, 1993
@c endfile
@end ignore
@c file eg/lib/getopt.awk

# External variables:
#    Optind -- index in ARGV of first nonoption argument
#    Optarg -- string value of argument to current option
#    Opterr -- if nonzero, print our own diagnostic
#    Optopt -- current option letter

# Returns:
#    -1     at end of options
#    "?"    for unrecognized option
#    <c>    a character representing the current option

# Private Data:
#    _opti  -- index in multiflag option, e.g., -abc
@c endfile
@end example

ÂáΩÊï∞‰ª•Ê≥®ÈáäÂºÄÂßãÔºåËØ¥Êòé‰∫ÜÂÆÉÊâÄ‰ΩøÁî®ÁöÑÂÖ®Â±ÄÂèòÈáèÁöÑ‰∏Ä‰∏™ÂàóË°®ÔºåËøîÂõûÁöÑÂÄºÊòØ‰ªÄ‰πàÔºå‰ªñ‰ª¨ÂèàË°®Á§∫‰ªÄ‰πàÔºå‰ª•ÂèäËøô‰∏™Â∫ìÂáΩÊï∞ÊâÄÁßÅÊúâÁöÑÂÖ®Â±ÄÂèòÈáè„ÄÇËøôÊ†∑ÁöÑÊñáÊ°£ÂØπ‰∫é‰ªª‰ΩïÁ®ãÂ∫èÊù•ËÆ≤ÈÉΩÊòØÂæàÈáçË¶ÅÁöÑÔºåÂ∞§ÂÖ∂ÊòØÂØπ‰∫éÂ∫ìÂáΩÊï∞„ÄÇ

@code{getopt()} ÂáΩÊï∞È¶ñÂÖàÊ£ÄÊü•Á°ÆÂÆûÊòØ‰ª•ÈÄâÈ°πÁöÑ‰∏≤Êù•ËøõË°åË∞ÉÁî®ÁöÑÔºà@code{options} ÂèÇÊï∞Ôºâ„ÄÇ
Â¶ÇÊûú @code{options} ÁöÑÈïøÂ∫¶‰∏∫ 0ÔºåÂàô @code{getopt()} ‰ºöÁ´ãÂç≥ËøîÂõû @minus{}1 Ôºö

@cindex @code{getopt()} user-defined function
@example
@c file eg/lib/getopt.awk
function getopt(argc, argv, options,    thisopt, i)
@{
    if (length(options) == 0)    # no options given
        return -1

@group
    if (argv[Optind] == "--") @{  # all done
        Optind++
        _opti = 0
        return -1
@end group
    @} else if (argv[Optind] !~ /^-[^:[:space:]]/) @{
        _opti = 0
        return -1
    @}
@c endfile
@end example

‰∏ã‰∏™Ë¶ÅÂÅöÁöÑ‰∫ãÊÉÖÊòØË¶ÅÊ£ÄÊü•ÈÄâÈ°πÁöÑÁªìÊùü„ÄÇ@option{--} Áî®‰∫éÁªìÊùüÂëΩ‰ª§Ë°åÈÄâÈ°πÔºåÂõ†‰∏∫Ê≤°Êúâ‰ªª‰ΩïÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏çÊòØ‰ª• @samp{-} ÂºÄÂßã„ÄÇ@code{Optind} Áî®Êù•‰∏Ä‰∏™‰∏™Âú∞Ëø≠‰ª£ÂëΩ‰ª§Ë°åÂèÇÊï∞Êï∞ÁªÑÔºåÂÆÉÂú®Ë∞ÉÁî® @code{getopt()} ÁöÑËøáÁ®ã‰∏≠‰∏ÄÁõ¥‰øùÁïôÂÆÉÁöÑÂÄºÔºåÂõ†‰∏∫ÂÆÉÊòØ‰∏Ä‰∏™ÂÖ®Â±ÄÂèòÈáè„ÄÇ

Âú®ËøôÈáå‰ΩøÁî®‰∫ÜÊ≠£ÂàôË°®ËææÂºè @code{@w{/^-[^:[:space:]/}}ÔºåÁî®‰∫éÊ£ÄÊü• @samp{-} ÂêéÈù¢Ë∑ü‰ªªÊÑèÁöÑ‰∏çÊòØÁ©∫Ê†º‰∏éÂÜíÂè∑ÁöÑÂ≠óÁ¨¶„ÄÇÂ¶ÇÊûúÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏çÂåπÈÖçËøô‰∏™Ê®°ÂºèÔºåÂàôÂÆÉÂ∞±‰∏çÊòØ‰∏Ä‰∏™ÈÄâÈ°πÔºåÁÑ∂ÂêéÁªìÊùüÂ§ÑÁêÜ„ÄÇÂêéÁª≠Ôºö

@example
@c file eg/lib/getopt.awk
    if (_opti == 0)
        _opti = 2
    thisopt = substr(argv[Optind], _opti, 1)
    Optopt = thisopt
    i = index(options, thisopt)
    if (i == 0) @{
        if (Opterr)
            printf("%c -- invalid option\n", thisopt) > "/dev/stderr"
        if (_opti >= length(argv[Optind])) @{
            Optind++
            _opti = 0
        @} else
            _opti++
        return "?"
    @}
@c endfile
@end example

@code{_opti} ÂèòÈáèÁî®‰∫éË∑üË∏™ÂΩìÂâçÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑ‰ΩçÁΩÆÔºà@code{argv[Optind]}Ôºâ„ÄÇÂ¶ÇÊûúÊúâÂ§ö‰∏™ÈÄâÈ°πÁî® @samp{-} ÂêàÂπ∂Âú®‰∏ÄËµ∑ÔºàÂ¶ÇÔºå@option{-abx}ÔºâÔºåÂàôÊúâÂøÖË¶Å‰∏ÄÊ¨°ËøîÂõû‰∏Ä‰∏™„ÄÇ

Â¶ÇÊûú @code{_opti} ÁöÑÁ≠â‰∫é 0ÔºåÂàôË¢´ËÆæÁΩÆ‰∏∫ 2ÔºåËøô‰∏™ÂÄºÊòØÂ≠ó‰∏≤‰∏≠‰∏ã‰∏Ä‰∏™Ë¶ÅÊü•ÊâæÂ≠óÁ¨¶ÁöÑ‰ΩçÁΩÆÔºàÊàë‰ª¨Ë∑≥Ëøá @samp{-}ÔºåËÄåÂÆÉÁöÑ‰ΩçÁΩÆÊòØ 1 Ôºâ„ÄÇÂèòÈáè @code{thisopt} ‰øùÂ≠òÁî® @code{substr()} ÂèñÂæóÁöÑÂ≠óÁ¨¶„ÄÇÂÆÉË¢´‰øùÂ≠ò‰∫é @code{Optopt} ‰ª•Â§á‰∏ªÁ®ãÂ∫èÁöÑ‰ΩøÁî®„ÄÇ

Â¶ÇÊûú @code{thisopt} ‰∏çÂú®ÈÄâÈ°π‰∏≤ @code{options} ‰∏≠ÔºåÂàôÂÆÉ‰∏çÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÈÄâÈ°π„ÄÇÂ¶ÇÊûú @code{Opterr} ÁöÑÂÄº‰∏∫Èùû 0Ôºå@code{getopt()} ÊâìÂç∞‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÂà∞Ê†áÂáÜÈîôËØØËæìÂá∫‰∏äÔºåËøô‰∏™‰∏é C ÁâàÊú¨ÁöÑ @code{getopt()} ÁöÑ‰ø°ÊÅØÁ±ª‰ºº„ÄÇ

Áî±‰∫éÈÄâÈ°πÊòØÊó†ÊïàÁöÑÔºåÂ∞±ÊúâÂøÖÈ°ªË∑≥ËøáÂÆÉÂπ∂Â§ÑÁêÜ‰∏ã‰∏Ä‰∏™ÈÄâÈ°πÂ≠óÁ¨¶„ÄÇÂ¶ÇÊûú @code{_opti} Â§ß‰∫éÊàñËÄÖÁ≠â‰∫éÂΩìÂâçÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑ‰∏™ÈïøÂ∫¶ÔºåÂàôÊúâÂøÖË¶ÅÁßªÂä®Âà∞‰∏ã‰∏Ä‰∏™ÂèÇÊï∞„ÄÇÊâÄ‰ª•Ôºå@code{Optind} Ë¢´ÈÄíÂ¢ûÔºå@code{_opti} Ë¢´ËÆæÁΩÆ‰∏∫ 0„ÄÇÂê¶ÂàôÁöÑËØùÔºå@code{Optind} ‰∏ç‰ºöÊîπÂèòÔºåËÄåÂè™ÈÄíÂ¢û @code{_opti}„ÄÇ

Âú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÔºåÁî±‰∫éÈÄâÈ°πÊòØÊó†ÊïàÁöÑÔºå@code{getopt()} ÈÉΩËøîÂõû @code{"?"}„ÄÇ‰∏ªÁ®ãÂ∫èÂèØ‰ª•Ê£ÄÊü• @code{Optopt} ‰ª•Á°ÆÂÆöÊó†ÊïàÁöÑÈÄâÈ°πÂà∞Â∫ïÊòØ‰ªÄ‰πà„ÄÇÁªßÁª≠Ôºö

@example
@c file eg/lib/getopt.awk
    if (substr(options, i + 1, 1) == ":") @{
        # get option argument
        if (length(substr(argv[Optind], _opti + 1)) > 0)
            Optarg = substr(argv[Optind], _opti + 1)
        else
            Optarg = argv[++Optind]
        _opti = 0
    @} else
        Optarg = ""
@c endfile
@end example

Â¶ÇÊûúÈÄâÈ°πÈúÄË¶Å‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂú®ÈÄâÈ°πÂ≠ó‰∏≤ @code{options} ‰∏≠ÁöÑÈÄâÈ°πÂ≠óÊØçÂêéÈù¢‰ºöË∑üÁùÄ‰∏Ä‰∏™ÂÜíÂè∑„ÄÇÂ¶ÇÊûúÂú®ÂΩìÂâçÁöÑÂëΩ‰ª§ÂèÇÊï∞ÂàóË°®‰∏≠Ôºà@code{argv[Optind]}ÔºâËøòÊúâÂ≠óÁ¨¶ÔºåÂàôÂ≠ó‰∏≤ÂêéÈù¢ÁöÑÂÜÖÂÆπ‰ºöË¢´ËµãÂÄºÁªô @code{Optarg}„ÄÇÂê¶ÂàôÂ∞±‰ΩøÁî®‰∏ã‰∏Ä‰∏™ÂëΩ‰ª§ÂèÇÊï∞Ôºà@samp{-xFOO} ÂØπ @samp{@w{-x FOO}}Ôºâ„ÄÇ
Âú®‰ªª‰∏ÄÊÉÖÂÜµ‰∏ãÔºå@code{_opti} ÈÉΩË¢´ËÆæÁΩÆ‰∏∫ 0ÔºåÂõ†‰∏∫Ê≤°ÊúâÊõ¥Â§öÁöÑÂ≠óÁ¨¶Ââ©‰∏ãÊù•Ê£ÄÊü•ÂΩìÂâçÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇÁªßÁª≠Ôºö

@example
@c file eg/lib/getopt.awk
    if (_opti == 0 || _opti >= length(argv[Optind])) @{
        Optind++
        _opti = 0
    @} else
        _opti++
    return thisopt
@}
@c endfile
@end example

ÊúÄÂêéÔºåÂ¶ÇÊûú @code{_opti} ‰∏∫ 0 ÊàñËÄÖÂ§ß‰∫éÂΩìÂâçÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÈïøÂ∫¶ÔºåÂàôÂÆÉË°®Á§∫ÂÖÉÁ¥†Âú® argv ‰∏≠Â∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÔºåÊâÄ‰ª•Ôºå@code{Optind} Ë¢´ÈÄíÂ¢û‰ª•ÊåáÂêë‰∏ã‰∏Ä‰∏™ @code{argv} ‰∏≠ÁöÑÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúÊ≤°Êúâ‰∏Ä‰∏™Êù°‰ª∂‰∏∫ trueÔºåÂàôÂè™Êúâ @code{_opti} Ë¢´ÈÄíÂ¢ûÔºåÊâÄ‰ª•‰∏ã‰∏Ä‰∏™ÈÄâÈ°πÂ≠óÊØçÂèØ‰ª•Âú®‰∏ãÊ¨°Ë∞ÉÁî® @code{getopt()} Êó∂Ë¢´Â§ÑÁêÜ„ÄÇ

@code{BEGIN} ËßÑÂàô‰∏≠Â∞Ü @code{Opterr} ‰∏é @code{Optind} ÈÉΩËÆæÁΩÆ‰∏∫ 1„ÄÇ@code{Opterr} Ë¢´ËÆæÁΩÆ‰∏∫ 1 ÁöÑÂéüÂõ†ÊòØ @code{getopt()} ÁöÑÈªòËÆ§Ë°å‰∏∫Â∞±ÊòØÂú®ÂèëÁé∞Êó†ÊïàÈÄâÈ°πÁöÑÊó∂ÂÄôÊâìÂç∞ËØäÊñ≠‰ø°ÊÅØ„ÄÇ@code{Optind} ËÆæÁΩÆ‰∏∫ 1 ÊòØÂõ†‰∏∫Ê≤°ÊúâÂéüÂõ†Ë¶ÅÂéªÊü•ÁúãÁ®ãÂ∫èÂêçÔºåÂõ†‰∏∫Á®ãÂ∫èÂêçÂ≠òÂú® @code{ARGV[0]} ‰∏≠Ôºö

@example
@c file eg/lib/getopt.awk
BEGIN @{
    Opterr = 1    # default is to diagnose
    Optind = 1    # skip ARGV[0]

    # test program
    if (_getopt_test) @{
        while ((_go_c = getopt(ARGC, ARGV, "ab:cd")) != -1)
            printf("c = <%c>, Optarg = <%s>\n",
                                       _go_c, Optarg)
        printf("non-option arguments:\n")
        for (; Optind < ARGC; Optind++)
            printf("\tARGV[%d] = <%s>\n",
                                    Optind, ARGV[Optind])
    @}
@}
@c endfile
@end example

@code{BEGIN} ËßÑÂàôÁöÑÂâ©‰∏ãÈÉ®ÂàÜÂ∞±ÊòØ‰∏Ä‰∏™ÂæàÁÆÄÂçïÁöÑÊµãËØïÁ®ãÂ∫è„ÄÇËøôÊòØ‰∏§‰∏ä‰æãÂ≠êÔºåËøêË°åÊµãËØïÁ®ãÂ∫èÊó∂ÁöÑÁªìÊûúÔºö

@example
$ @kbd{awk -f getopt.awk -v _getopt_test=1 -- -a -cbARG bax -x}
@print{} c = <a>, Optarg = <>
@print{} c = <c>, Optarg = <>
@print{} c = <b>, Optarg = <ARG>
@print{} non-option arguments:
@print{}         ARGV[3] = <bax>
@print{}         ARGV[4] = <-x>

$ @kbd{awk -f getopt.awk -v _getopt_test=1 -- -a -x -- xyz abc}
@print{} c = <a>, Optarg = <>
@error{} x -- invalid option
@print{} c = <?>, Optarg = <>
@print{} non-option arguments:
@print{}         ARGV[4] = <xyz>
@print{}         ARGV[5] = <abc>
@end example

Âú®‰∏§Ê¨°ËøêË°åÈáåÔºåÁ¨¨‰∏Ä‰∏™ @option{--} ‰ºöÁªàÁªì @command{awk} ‰∏≠ÁöÑÂèÇÊï∞ÔºåÊâÄ‰ª•ÂÆÉ‰∏ç‰ºöËØïÂõæÂéªÂ∞Ü @option{-a} Á≠âÁ≠âÊù•ÂΩìÊàêËá™Â∑±ÁöÑÈÄâÈ°π„ÄÇ

@quotation ÊèêÁ§∫
Âú® @code{getopt()} ÂÆåÊàêÂêéÔºåÁî®Êà∑Â±Ç‰ª£Á†ÅÂøÖÈ°ªÊ∏ÖÈô§ÊâÄÊúâÁöÑ @code{ARGV} ÂÖÉÁ¥†Ôºå‰ªéÁ¥¢Âºï 1 Âà∞ @code{Optind}ÔºåÊâÄ‰ª•Ôºå@command{awk} ‰∏ç‰ºöËØïÂõæÂéªÊääÂëΩ‰ª§Ë°åÈÄâÈ°πÂΩìÊàê@value{FN}Êù•Â§ÑÁêÜ„ÄÇ
@end quotation

‰ΩøÁî® @samp{#!} Âπ∂Â∏¶‰∏ä @option{-E} ÈÄâÈ°πÂèØ‰ª•ÈÅøÂÖçÂ∞Ü‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÈÄâÈ°π‰∏é @command{gawk} ÁöÑÈÄâÈ°πÁöÑÂÜ≤Á™ÅÔºåÂõ†‰∏∫ @option{-E} ÈÄâÈ°π‰ºöÂØºËá¥ @command{gawk} ÊîæÂºÉÂ§ÑÁêÜÂêéÁª≠ÁöÑÈÄâÈ°πÔºàÊü•Áúã @pxref{Executable Scripts}Ôºå‰ª•Âèä 
@ifnotdocbook
@ref{Options}Ôºâ„ÄÇ
@end ifnotdocbook
@ifdocbook
@ref{Options}Ôºâ„ÄÇ
@end ifdocbook

Âú® @ref{Sample Programs}Ôºå‰∏≠ÁöÑÂá†‰∏™‰æãÂ≠ê‰ΩøÁî® @code{getopt()} Êù•Â§ÑÁêÜÂÆÉ‰ª¨ÁöÑÂèÇÊï∞„ÄÇ

@node Passwd Functions
@section ËØªÂèñÁî®Êà∑Êï∞ÊçÆÂ∫ì

@cindex libraries of @command{awk} functions, user database, reading
@cindex functions, library, user database@comma{} reading
@cindex user database@comma{} reading
@cindex database, users@comma{} reading
@cindex @code{PROCINFO} array
@code{PROCINFO} Êï∞ÁªÑÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÊèê‰æõ‰∫ÜËÆøÈóÆÂΩìÂâçÁî®Êà∑Áõ¥ÂÆû‰∏éÊúâÊïàÁöÑÁî®Êà∑‰∏éÁªÑ ID Êï∞ÂÄºÁöÑÊñπÂºèÔºåÂπ∂‰∏îÂ¶ÇÊûúÂèØÁî®ÔºåÁî®Êà∑ÁöÑË°•ÂÖÖÁöÑÁªÑÈõÜ‰πüÂèØ‰ª•ËÆøÈóÆ„ÄÇ‰ΩÜÊòØÔºåÂõ†‰∏∫Ëøô‰∫õÈÉΩÊòØ‰∫õÊï∞ÂÄºÔºåÂÆÉ‰ª¨Ê≤°ÊúâÊèê‰æõÈùûÂ∏∏ÊúâÁî®ÁöÑ‰ø°ÊÅØÁªôÂà∞ÊôÆÈÄöÁöÑÁî®Êà∑„ÄÇÂøÖÈ°ªÊúâ‰ªÄ‰πàÊ†∑ÁöÑÊñπÊ≥ïÊù•ÊâæÂà∞‰∏éÁî®Êà∑‰∏éÁªÑ ID Êï∞ÁªÑÁõ∏ÂÖ≥ÁöÑÁî®Êà∑‰ø°ÊÅØ„ÄÇ
Ëøô‰∏Ä@value{SECTION}Â∞±ÊòØÊèê‰æõ‰∏ÄÁªÑÂáΩÊï∞Êù•‰ªéÁî®Êà∑Êï∞ÊçÆÂ∫ì‰∏≠ËøîÂõû‰ø°ÊÅØ„ÄÇÊü•Áúã @xref{Group Functions}ÔºåÂèØ‰∫ÜËß£‰ªéÁªÑÊï∞ÊçÆÂ∫ì‰∏≠ËøîÂõû‰ø°ÊÅØÁöÑ‰∏ÄÁªÑÂáΩÊï∞„ÄÇ

@cindex @code{getpwent()} function (C library)
@cindex @code{getpwent()} user-defined function
@cindex users, information about, retrieving
@cindex login information
@cindex account information
@cindex password file
@cindex files, password
POSIX Ê†áÂáÜÊ≤°ÊúâÂÆö‰πâÁî®Êà∑ÁöÑ‰ø°ÊÅØÂ≠òÂú®Âì™„ÄÇÁõ∏ÂèçÔºåÂÆÉÊèê‰æõ‰∫Ü @code{<pwd.h>} Â§¥Êñá‰ª∂‰ª•ÂèäÂá†‰∏™ C ËØ≠Ë®Ä‰æãÁ®ãÊù•Ëé∑ÂèñÁî®Êà∑ÁöÑ‰ø°ÊÅØ„ÄÇ‰∏ªË¶ÅÁöÑÂáΩÊï∞Êúâ @code{getpwent()}ÔºåÁî®Êù•‚Äúget password entry‚ÄùÔºàËé∑ÂèñÂØÜÁ†ÅÈ°πÔºâ„ÄÇÂØÜÁ†ÅÊù•Ëá™‰∫éÊúÄÂàùÁöÑÁî®Êà∑Êï∞ÊçÆÂ∫ìÊñá‰ª∂Ôºå@file{/etc/passwd}ÔºåÂú®ÈáåÈù¢Â≠òÂÇ®‰∫ÜÁî®Êà∑‰ø°ÊÅØ‰ª•ÂèäÂä†ÂØÜËøáÁöÑÂØÜÁ†ÅÔºà‰∏éÂêçÂ≠óÊúâÁõ∏ÂÖ≥Ôºâ„ÄÇ

@cindex @command{pwcat} program
Â∞ΩÁÆ° @command{awk} Á®ãÂ∫èÂèØ‰ª•ÁÆÄÂçïÁõ¥Êé•Âú∞ËØªÂèñ @file{/etc/passwd} Êñá‰ª∂Ôºå‰ΩÜÊòØÊñá‰ª∂Âπ∂Ê≤°ÊúâÂåÖÂê´Á≥ªÁªü‰∏≠Áî®Êà∑ÈõÜÁöÑÂÆåÊï¥‰ø°ÊÅØ„ÄÇ
@footnote{Áî®Êà∑ÁöÑÂØÜÁ†Å‰ø°ÊÅØÂæàÂ§öÊÉÖÂÜµ‰∏ãÈÉΩÂ≠òÂÇ®Âú®ÁΩëÁªúÊï∞ÊçÆÂ∫ì‰∏≠„ÄÇ}
‰∏∫‰∫ÜÁ°Æ‰øù‰Ω†ËÉΩÂ§ü‰∫ßÁîüÂèØËØªÁöÑ‰ª•ÂèäÂÆåÊï¥ÁöÑÁî®Êà∑Êï∞ÊçÆÁâàÊú¨ÔºåÊúâÂøÖË¶ÅË∞ÉÁî® @code{getpwent()} Êù•ÂÜô‰∏Ä‰∏™Â∞èÁöÑ C Á®ãÂ∫è„ÄÇ@code{getpwent()} ÂÆö‰πâ‰∏∫ËøîÂõû @code{struct passwd} ÁöÑÊåáÈíà„ÄÇÊØèÊ¨°Ë∞ÉÁî®ÔºåÂÆÉÈÉΩËøîÂõû‰∏ã‰∏Ä‰∏™È°π„ÄÇÂΩìÊ≤°ÊúâÊõ¥Â§öÁöÑÈ°πÊó∂ÔºåÂàôËøîÂõû @code{NULL}ÔºåÂç≥Á©∫ÊåáÈíà„ÄÇ
ÂΩìÂá∫Áé∞Ëøô‰∏™ÁªìÊûúÂêéÔºåC Á®ãÂ∫èÂàôË¶ÅË∞ÉÁî® @code{endpwent()} Êù•ÂÖ≥Èó≠Êï∞ÊçÆÂ∫ì„ÄÇ‰∏ãÈù¢ÊòØ @command{pwcat}Ôºå‰∏Ä‰∏™ C Á®ãÂ∫èÁî®Êù•‚ÄúËøûÊé•‚ÄùÂØÜÁ†ÅÊï∞ÊçÆÂ∫ìÔºö

@example
@c file eg/lib/pwcat.c
/*
 * pwcat.c
 *
 * Generate a printable version of the password database.
 */
@c endfile
@ignore
@c file eg/lib/pwcat.c
/*
 * Arnold Robbins, arnold@@skeeve.com, May 1993
 * Public Domain
 * December 2010, move to ANSI C definition for main().
 */

#if HAVE_CONFIG_H
#include <config.h>
#endif

@c endfile
@end ignore
@c file eg/lib/pwcat.c
#include <stdio.h>
#include <pwd.h>

@c endfile
@ignore
@c file eg/lib/pwcat.c
#if defined (STDC_HEADERS)
#include <stdlib.h>
#endif

@c endfile
@end ignore
@c file eg/lib/pwcat.c
int
main(int argc, char **argv)
@{
    struct passwd *p;

    while ((p = getpwent()) != NULL)
@c endfile
@ignore
@c file eg/lib/pwcat.c
#ifdef HAVE_STRUCT_PASSWD_PW_PASSWD
@c endfile
@end ignore
@c file eg/lib/pwcat.c
        printf("%s:%s:%ld:%ld:%s:%s:%s\n",
            p->pw_name, p->pw_passwd, (long) p->pw_uid,
            (long) p->pw_gid, p->pw_gecos, p->pw_dir, p->pw_shell);
@c endfile
@ignore
@c file eg/lib/pwcat.c
#else
        printf("%s:*:%ld:%ld:%s:%s\n",
            p->pw_name, (long) p->pw_uid,
            (long) p->pw_gid, p->pw_dir, p->pw_shell);
#endif
@c endfile
@end ignore
@c file eg/lib/pwcat.c

    endpwent();
    return 0;
@}
@c endfile
@end example

Â¶ÇÊûú‰Ω†‰∏çÁêÜËß£ C ‰ª£Á†ÅÔºå‰πüÊ≤°ÊúâÂÖ≥Á≥ª„ÄÇ@command{pwcat} ÁöÑËæìÂá∫Â∞±ÊòØ‰ª•‰º†ÁªüÁöÑ @file{/etc/passwd} ÁöÑÂÜíÂè∑ÂàÜÈöîÂüüÁöÑÊ†ºÂºèËæìÂá∫Áî®Êà∑Êï∞ÊçÆÂ∫ì„ÄÇËøô‰∫õÂüüÊòØÔºö

@table @asis
@item Login name
Áî®Êà∑ÁöÑÁôªÂΩïÂêç„ÄÇ

@item Encrypted password
Áî®Êà∑Âä†ÂØÜËøáÁöÑÂØÜÁ†Å„ÄÇËøôÂú®Êüê‰∫õÁ≥ªÁªü‰∏äÂèØËÉΩÂæó‰∏çÂà∞„ÄÇ

@item User-ID
Áî®Êà∑ÁöÑÊï∞ÂÄº ID„ÄÇÔºàÂú®‰∏Ä‰∫õÁ≥ªÁªü‰∏äÔºåËøôÊòØ‰∏Ä‰∏™ C ÁöÑ @code{long} Á±ªÂûãÔºåËÄå‰∏çÊòØ @code{int} ÂûãÔºåÊâÄ‰ª•ÔºåÊàë‰ª¨Âú®ÊâÄÊúâÁöÑÊÉÖÂÜµ‰∏ãÈÉΩËΩ¨Êç¢‰∏∫ @code{long}„ÄÇÔºâ

@item Group-ID
Áî®Êà∑ÁöÑÁªÑÊï∞ÂÄº ID„ÄÇÔºàÂÜÖÂÆπ‰∏éÂàöÊâçÊâÄËø∞ÁöÑ @code{long} ‰∏é @code{int} Á±ªÂûãÁöÑËß£ÈáäÁ±ª‰ºº„ÄÇÔºâ

@item Full name
Áî®Êà∑ÁöÑÂÖ®ÂêçÔºå‰ª•Âèä‰∏éËøô‰∏™Áî®Êà∑Áõ∏ÂÖ≥ÁöÑÂÖ∂‰ªñ‰ø°ÊÅØ„ÄÇ

@item Home directory
Áî®Êà∑ÁöÑÁôªÂΩïÁõÆÂΩïÔºàÊàñËÄÖ‚Äúhome‚ÄùÔºâÔºàShell Á®ãÂ∫èÂëòÁÜüÊÇâÁöÑ @code{$HOME}Ôºâ„ÄÇ

@item Login shell
ÂΩìÁî®Êà∑ÁôªÂΩïÊó∂ÊâÄË¶ÅËøêË°åÁöÑÁ®ãÂ∫è„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÊòØ‰∏Ä‰∏™ Shell Á®ãÂ∫èÔºåÂ¶Ç Bash„ÄÇ
@end table

@command{pwcat} ÁöÑËæìÂá∫ÁöÑÂá†Ë°åÂÜÖÂÆπ‰æãÂ≠êÂ¶Ç‰∏ãÔºö

@cindex Jacobs, Andrew
@cindex Robbins, Arnold
@cindex Robbins, Miriam
@example
$ @kbd{pwcat}
@print{} root:x:0:1:Operator:/:/bin/sh
@print{} nobody:*:65534:65534::/:
@print{} daemon:*:1:1::/:
@print{} sys:*:2:2::/:/bin/csh
@print{} bin:*:3:3::/bin:
@print{} arnold:xyzzy:2076:10:Arnold Robbins:/home/arnold:/bin/sh
@print{} miriam:yxaay:112:10:Miriam Robbins:/home/miriam:/bin/sh
@print{} andy:abcca2:113:10:Andy Jacobs:/home/andy:/bin/sh
@dots{}
@end example

Ê†πÊçÆ‰πãÂâçÁöÑ‰∏Ä‰∫õËØ¥ÊòéÔºå‰∏ãÈù¢ÊòØ‰∏ÄÁªÑÂáΩÊï∞Áî®Êù•ÂèñÂæóÁî®Êà∑ÁöÑ‰ø°ÊÅØÁöÑÂáΩÊï∞„ÄÇËøôÈáåÊúâÂá†‰∏™ÂáΩÊï∞‰∏é C ‰∏≠ÂêåÂêçÁöÑÂáΩÊï∞ÂØπÂ∫îÔºö

@cindex @code{_pw_init()} user-defined function
@example
@c file eg/lib/passwdawk.in
# passwd.awk --- access password file information
@c endfile
@ignore
@c file eg/lib/passwdawk.in
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised October 2000
# Revised December 2010
@c endfile
@end ignore
@c file eg/lib/passwdawk.in

BEGIN @{
    # tailor this to suit your system
    _pw_awklib = "/usr/local/libexec/awk/"
@}

function _pw_init(    oldfs, oldrs, olddol0, pwcat, using_fw, using_fpat)
@{
    if (_pw_inited)
        return

    oldfs = FS
    oldrs = RS
    olddol0 = $0
    using_fw = (PROCINFO["FS"] == "FIELDWIDTHS")
    using_fpat = (PROCINFO["FS"] == "FPAT")
    FS = ":"
    RS = "\n"

    pwcat = _pw_awklib "pwcat"
    while ((pwcat | getline) > 0) @{
        _pw_byname[$1] = $0
        _pw_byuid[$3] = $0
        _pw_bycount[++_pw_total] = $0
    @}
    close(pwcat)
    _pw_count = 0
    _pw_inited = 1
    FS = oldfs
    if (using_fw)
        FIELDWIDTHS = FIELDWIDTHS
    else if (using_fpat)
        FPAT = FPAT
    RS = oldrs
    $0 = olddol0
@}
@c endfile
@end example

@cindex @code{BEGIN} pattern, @code{pwcat} program
@code{BEGIN} ËßÑÂàôÂ∞ÜÁßÅÊúâÂèòÈáèËÆæÁΩÆ‰∏∫ @command{pwcat} ÊâÄÂú®ÁöÑÁõÆÂΩï„ÄÇÂõ†‰∏∫ÂÆÉÁî®‰∫éËæÖÂä© @command{awk} ÁöÑÂ∫ì‰æãÁ®ã„ÄÇÊàë‰ª¨Â∑≤ÁªèÂ∞ÜÂÖ∂ÊîæÂú® @file{/usr/local/libexec/awk} ‰∏≠Ôºå‰ΩÜÊòØÔºå‰Ω†ÂèØËÉΩÊÉ≥ÊîæÂà∞‰Ω†ÁöÑÁ≥ªÁªü‰∏≠ÁöÑÂè¶Â§ñ‰∏Ä‰∏™‰ΩçÁΩÆ„ÄÇ

ÂáΩÊï∞ @code{_pw_init()} ‰ºöÂ∞ÜÁî®Êà∑‰ø°ÊÅØÁöÑ‰∏â‰∏™Â§çÊú¨Â°´ÂÖ•Âà∞‰∏â‰∏™Áõ∏ÂÖ≥ÁöÑÊï∞ÁªÑ„ÄÇÊï∞ÁªÑÁî±Áî®Êà∑ÂêçËøõË°åÔºà@code{_pw_byname})ÔºåÁî®Êà∑ IDÔºà@code{_pw_byuid})Ôºå‰ª•ÂèäÂá∫Áé∞ÁöÑÈ°∫Â∫èÔºà@code{_pw_bycount}ÔºâËøõË°åÁ¥¢Âºï„ÄÇÂèòÈáè @code{_pw_inited} ‰∏∫‰∫ÜÈ´òÊïàËÄåËÆæÁΩÆÔºåÂõ†Ê≠§ @code{_pw_init()} Âè™ÈúÄË¶ÅË∞ÉÁî®‰∏ÄÊ¨°„ÄÇ

@cindex @code{PROCINFO} array, testing the field splitting
@cindex @code{getline} command, @code{_pw_init()} function
Áî±‰∫éÂáΩÊï∞‰ΩøÁî® @code{getline} Êù•‰ªé @command{pwcat} ‰∏≠ËØªÂèñ‰ø°ÊÅØÔºåÂÆÉÈ¶ñÂÖàÂ∞Ü @code{FS}Ôºå@code{RS} ‰∏é @code{$0} ÁöÑÂÄºÂ≠òËµ∑Êù•„ÄÇ‰ΩøÁî® @code{using_fw} ÂèòÈáèÊù•Ë°®Á§∫ÂüüÊòØÂê¶ÊòØÁî® @code{FIELDWIDTHS} Êù•ËøõË°åÂàÜÂâ≤„ÄÇËøô‰πàÂÅöÊòØÊúâÂøÖË¶ÅÁöÑÔºåÂõ†‰∏∫Ëøô‰∫õÂáΩÊï∞‰πüÂèØ‰ªéÁî®Êà∑Á®ãÂ∫èÁöÑ‰ªª‰ΩïÂú∞ÊñπËøõË°åË∞ÉÁî®ÔºåÂπ∂‰∏îÁî®Êà∑ÊúâÂÆÉËá™Â∑±ÁöÑËÆ∞ÂΩïÂüüÁöÑÂàÜÂâ≤ÊñπÂºè„ÄÇËøôÊ†∑ÔºåÈÄöËøáËøôÊ†∑ÁöÑÊñπÂºè‰ΩøÊàë‰ª¨ÂèØ‰ª•ÊÅ¢Â§çÊ≠£Á°ÆÁöÑÂàÜÂâ≤Êú∫Âà∂„ÄÇÊµãËØïÂè™ÈíàÂØπ @command{gawk}„ÄÇÂú®ÊüêÊ≠§ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÂ¶ÇÊûú‰ΩøÁî® @code{FS} ÊàñËÄÖ @code{FPAT}ÔºåÂàôËøô‰∏™ÂÄº‰∏∫ false„ÄÇ

Ê£ÄÊü•ÊòØÂê¶‰ΩøÁî® @code{FPAT} ÁöÑ‰ª£Á†ÅÂà©Áî® @code{using_fpat} ÂèòÈáè‰∏é @code{PROCINFO["FS"]} ‰πüÊòØÁ±ª‰ººÁöÑÊÉÖÂÜµ„ÄÇ

ÂáΩÊï∞ÁöÑ‰∏ª‰ΩìÈÉ®ÂàÜ‰ΩøÁî®Âæ™ÁéØÊù•ËØªÂèñÊï∞ÊçÆÂ∫ìË°åÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ÂàÜÂâ≤‰∏∫‰∏çÂêåÁöÑÂüüÔºåÁÑ∂ÂêéÂ∞ÜË°åÂ≠òÂÇ®Âà∞Êï∞ÁªÑ‰∏≠‰ª•Â§á‰ΩøÁî®„ÄÇÂΩìÂæ™ÁéØÁªìÊùüÊó∂Ôºå@code{@w{_pw_init()}} ÈÄöËøáÂÖ≥Èó≠ÁÆ°Á∫øÊ∏ÖÁêÜÔºåÂπ∂Â∞Ü @code{@w{_pw_inited}} ËÆæÁΩÆ‰∏∫ 1ÔºåÁÑ∂ÂêéÊÅ¢Â§ç @code{FS} ÁöÑÂÄºÔºàÂ¶ÇÊûúÂøÖË¶ÅÁöÑÊÉÖÂÜµ‰∏ã‰πüÊÅ¢Â§ç @code{FIELDWIDTHS} ‰∏é @code{FPAT}ÔºâÔºå@code{RS} ÁöÑÂÄº‰∏é @code{$0} ÁöÑÂÄº„ÄÇ@code{@w{_pw_count}} ÁöÑ‰ΩøÁî®ÂêéÈù¢ÂÜçËß£Èáä„ÄÇ

@cindex @code{getpwnam()} function (C library)
@code{getpwnam()} ÂáΩÊï∞ÂèñÁî®Êà∑ÂêçÁöÑÂ≠ó‰∏≤‰∏∫ÂèÇÊï∞„ÄÇÂ¶ÇÊûúÁî®Êà∑Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂàôÂÖ∂ËøîÂõûÁõ∏Â∫îÁöÑË°å„ÄÇÂê¶ÂàôÔºåÈÄöËøáÊåáÂêë‰∏Ä‰∏™‰∏çÂ≠òÂú®ÁöÑÂÖÉÁ¥†ÁöÑÂºïÁî®‰ºöÂàõÂª∫‰∏Ä‰∏™ÂÄº‰∏∫Á©∫‰∏≤ÁöÑÂÖÉÁ¥†„ÄÇ

@cindex @code{getpwnam()} user-defined function
@example
@group
@c file eg/lib/passwdawk.in
function getpwnam(name)
@{
    _pw_init()
    return _pw_byname[name]
@}
@c endfile
@end group
@end example

@cindex @code{getpwuid()} function (C library)
Á±ª‰ººÂú∞Ôºå@code{getpwuid()} ÂáΩÊï∞‰ΩøÁî®Áî®Êà∑ÁöÑ ID ÂÄº‰Ωú‰∏∫ÂèÇÊï∞„ÄÇÂ¶ÇÊûúÁî®Êà∑Êï∞ÁªÑÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÔºåÂàôËøîÂõûÁõ∏Â∫îÁöÑË°åÔºåÂê¶ÂàôËøîÂõû‰∏Ä‰∏™Á©∫‰∏≤Ôºö

@cindex @code{getpwuid()} user-defined function
@example
@c file eg/lib/passwdawk.in
function getpwuid(uid)
@{
    _pw_init()
    return _pw_byuid[uid]
@}
@c endfile
@end example

@cindex @code{getpwent()} function (C library)
@code{getpwent()} ÂáΩÊï∞ÁÆÄÂçïÂú∞ÈÅçÂéÜÊï∞ÊçÆÂ∫ìÔºå‰∏ÄÊ¨°‰∏ÄÈ°π„ÄÇÂÆÉ‰ΩøÁî® @code{_pw_count} Êù•Ë∑üË∏™ @code{_pw_bycount} Êï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆÔºö

@cindex @code{getpwent()} user-defined function
@example
@c file eg/lib/passwdawk.in
function getpwent()
@{
    _pw_init()
    if (_pw_count < _pw_total)
        return _pw_bycount[++_pw_count]
    return ""
@}
@c endfile
@end example

@cindex @code{endpwent()} function (C library)
@code{@w{endpwent()}} ÂáΩÊï∞ÈáçÊñ∞Â∞Ü @code{@w{_pw_count}} ËÆæÁΩÆ‰∏∫ 0ÔºåÊâÄ‰ª•ÂêéÁª≠ÂØπ‰∫é @code{getpwent()} ÁöÑË∞ÉÁî®‰ºöÈáçÂ§¥ÂºÄÂßãÔºö

@cindex @code{endpwent()} user-defined function
@example
@c file eg/lib/passwdawk.in
function endpwent()
@{
    _pw_count = 0
@}
@c endfile
@end example

Âú®Ëøô‰∏ÄÁªÑ‰æãÁ®ãÁöÑ‰∏ÄËá¥ËÆæËÆ°ÂÜ≥Á≠ñÊòØÊØè‰∏Ä‰∏™‰æãÁ®ãÈÉΩË∞ÉÁî® @code{@w{_pw_init()}} Êù•ÂàùÂßãÂåñÊï∞ÁªÑÂ∫ìÊï∞ÁªÑ„ÄÇËøêË°åÂè¶‰∏Ä‰∏™ËøõÁ®ãÊù•‰∫ßÁîüÁî®Êà∑Êï∞ÁªÑÂ∫ìÔºå‰ª•ÂèäÊâ´ÊèèÊï∞ÊçÆÂ∫ìÁöÑË¥üÊãÖ‰ªÖÂú®Áî®Êà∑ÁöÑ‰∏ªÁ®ãÂ∫èÁ®ãÂ∫èË∞ÉÁî®ÂÖ∂‰∏≠ÁöÑÊüê‰∏™ÂáΩÊï∞Êâç‰ºö‰∫ßÁîü„ÄÇÂ¶ÇÊûúËøô‰∏™Â∫ìÊñá‰ª∂‰∏éÁî®Êà∑Á®ãÂ∫è‰∏ÄËµ∑Ë£ÖËΩΩÔºå‰ΩÜÊòØÂèàÊ≤°ÊúâË∞ÉÁî®ÂÖ∂‰∏≠ÁöÑ‰ªª‰Ωï‰æãÁ®ãÔºåÂàô‰∏ç‰ºöÊúâ‰ªª‰ΩïÁöÑËøêË°åÊó∂Ë¥üÊãÖ„ÄÇÔºàÂè¶‰∏Ä‰∏™ÈÄâÊã©ÊòØÂ∞Ü @code{@w{_pw_init()}} ÁöÑÊâßË°å‰ΩìÁßªÂà∞ @code{BEGIN} ËßÑÂàô‰∏≠ÔºåÂú®ËøôÈáåÈÉ®‰ºöÊâßË°å pwcat„ÄÇËøôÁÆÄÂåñ‰∫Ü‰ª£Á†ÅÔºå‰ΩÜÊòØ‰ºöËøêË°å‰∏Ä‰∫õ‰ªéÊù•‰∏ç‰ºöÈúÄË¶ÅÁöÑÈ¢ùÂ§ñËøáÁ®ã„ÄÇÔºâ

ÂÜçËÄÖÔºåË∞ÉÁî® @code{_pw_init()} ‰ª£‰ª∑‰πü‰∏çÈ´òÔºåÂõ†‰∏∫ @code{_pw_inited} ÂèòÈáè‰ºö‰ΩøÁ®ãÂ∫è‰ªéÊï∞ÊçÆÂ∫ì‰∏≠ËØªÂèñÊï∞ÊçÆÊ¨°Êï∞‰∏ç‰ºöÂá∫‰∫é‰∏ÄÊ¨°„ÄÇÂ¶ÇÊûú‰Ω†ÊãÖÂøÉËøôÊ†∑ÁöÑÊµãËØï‰ºöÈÅçÂéÜÂú®‰Ω†ÁöÑÁ®ãÂ∫è‰∏≠Ôºå‰Ω†‰πüÂèØ‰ª•Â∞ÜÊ£ÄÊü• @code{_pw_inited} ÁöÑ‰ª£Á†ÅË°®‰ªé @code{_pw_init()} ÁßªÂá∫ÂéªÔºåÂπ∂Â§çÂà∂Âà∞ÊâÄÊúâÁöÑÂÖ∂‰ªñÂáΩÊï∞‰∏≠„ÄÇÂú®ÂÆûË∑µ‰∏≠ÔºåËøôÊòØÊ≤°ÊúâÂøÖË¶ÅÁöÑÔºåÂõ†‰∏∫Â§ßÂ§öÊï∞ÁöÑ @command{awk} Á®ãÂ∫èÈÉΩÊòØ I/O ÂûãÁöÑÔºåËøôÊ†∑ÊîπÂèò‰ºöÂºÑ‰π±‰ª£Á†Å„ÄÇ

Âú® @ref{Id Program}Ôºå‰∏≠ÁöÑ @command{id} Á®ãÂ∫è‰ºö‰ΩøÁî®Âà∞Ëøô‰∫õÂáΩÊï∞„ÄÇ

@node Group Functions
@section ËØªÂèñÁªÑÊï∞ÊçÆÂ∫ì

@cindex libraries of @command{awk} functions, group database, reading
@cindex functions, library, group database@comma{} reading
@cindex group database, reading
@cindex database, group, reading
@cindex @code{PROCINFO} array, and group membership
@cindex @code{getgrent()} function (C library)
@cindex @code{getgrent()} user-defined function
@cindex groups@comma{} information about
@cindex account information
@cindex group file
@cindex files, group
Âú® @ref{Passwd Functions}Ôºå‰∏≠ËÆ®ËÆ∫ÁöÑÂæàÂ§öÈóÆÈ¢ò‰πüÈÉΩÂèØ‰ª•Áî®‰∫éÁªÑÊï∞ÊçÆÂ∫ì‰∏≠„ÄÇÂ∞ΩÁÆ°‰º†Áªü‰∏ä‰ª•Â§ßÂÆ∂ÈÉΩ‰∫ÜËß£ÁöÑÊ†ºÂºè‰∏éÊñá‰ª∂Ôºà@file{/etc/group}ÔºâÂ≠òÂÇ®Ôºå‰ΩÜÊòØ POSIX Ê†áÂáÜÂè™Êèê‰æõ‰∫Ü‰∏ÄÁªÑ C Â∫ìÂáΩÊï∞Ôºà@code{<grp.h>} ‰∏é @code{getgrent()}ÔºâÊù•ËÆøÈóÆ‰ø°ÊÅØ„ÄÇÂ∞±ÁÆóÂ≠òÂú®Ëøô‰∫õÊñá‰ª∂Ôºå‰ΩÜÊòØ‰πüÂèØËÉΩÊ≤°ÊúâÂÆåÊï¥ÁöÑ‰ø°ÊÅØ„ÄÇÂõ†Ê≠§Ôºå‰∏éÁî®Êà∑Êï∞ÊçÆÂ∫ì‰∏ÄÊ†∑Ôºå‰πüÊúâÂøÖË¶ÅÊù•ÂÜô‰∏Ä‰∏™Â∞èÁöÑ C Á®ãÂ∫èÊù•‰∫ßÁîüÁªÑ‰ø°ÊÅØ„ÄÇ
@command{grcat} ÂàôÊòØ‰∏Ä‰∏™ËøôÊ†∑ÁöÑ C Á®ãÂ∫èÁî®Êù•‚Äúcat‚ÄùÁªÑÊï∞ÊçÆÂ∫ìÔºåÂ¶Ç‰∏ãÔºö

@cindex @command{grcat} program
@example
@c file eg/lib/grcat.c
/*
 * grcat.c
 *
 * Generate a printable version of the group database.
 */
@c endfile
@ignore
@c file eg/lib/grcat.c
/*
 * Arnold Robbins, arnold@@skeeve.com, May 1993
 * Public Domain
 * December 2010, move to ANSI C definition for main().
 */

/* For OS/2, do nothing. */
#if HAVE_CONFIG_H
#include <config.h>
#endif

#if defined (STDC_HEADERS)
#include <stdlib.h>
#endif

#ifndef HAVE_GETGRENT
int main() { return 0; }
#else
@c endfile
@end ignore
@c file eg/lib/grcat.c
#include <stdio.h>
#include <grp.h>

int
main(int argc, char **argv)
@{
    struct group *g;
    int i;

    while ((g = getgrent()) != NULL) @{
@c endfile
@ignore
@c file eg/lib/grcat.c
#ifdef HAVE_STRUCT_GROUP_GR_PASSWD
@c endfile
@end ignore
@c file eg/lib/grcat.c
        printf("%s:%s:%ld:", g->gr_name, g->gr_passwd,
                                     (long) g->gr_gid);
@c endfile
@ignore
@c file eg/lib/grcat.c
#else
        printf("%s:*:%ld:", g->gr_name, (long) g->gr_gid);
#endif
@c endfile
@end ignore
@c file eg/lib/grcat.c
        for (i = 0; g->gr_mem[i] != NULL; i++) @{
            printf("%s", g->gr_mem[i]);
@group
            if (g->gr_mem[i+1] != NULL)
                putchar(',');
        @}
@end group
        putchar('\n');
    @}
    endgrent();
    return 0;
@}
@c endfile
@ignore
@c file eg/lib/grcat.c
#endif /* HAVE_GETGRENT */
@c endfile
@end ignore
@end example

Âú®ÁªÑÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∏ÄË°å‰ª£Ë°®‰∏Ä‰∏™ÁªÑ„ÄÇÂüüÂàôÈÄöËøáÂÜíÂè∑Êù•ÂàÜÈöîÔºåË°®Á§∫Â¶Ç‰∏ã‰ø°ÊÅØÔºö

@table @asis
@item Group Name
ÁªÑÂêç„ÄÇ

@item Group Password
ÁªÑÁöÑÂä†ÂØÜÂØÜÁ†Å„ÄÇÂú®ÂÆûË∑µ‰∏≠ÔºåËøô‰∏™Âüü‰∏ç‰ºö‰ΩøÁî®Âà∞ÔºåÈÄöËøá‰∏∫Á©∫ÊàñËÄÖËÆæÁΩÆ‰∏∫ @samp{*}„ÄÇ

@item Group ID Number
ÁªÑÁöÑÊï∞ÂÄº IDÔºåÂ∞ÜÂêçÂ≠ó‰∏éÊï∞ÂÄºÂÖ≥ËÅîÂú®Êñá‰ª∂‰∏≠ÂøÖÈ°ªÊòØÂîØ‰∏ÄÁöÑ„ÄÇÔºàÂú®‰∏Ä‰∫õÁ≥ªÁªü‰∏äÔºåÂÆÉÊòØ C ÁöÑ @code{long} Á±ªÂûãÔºåËÄå‰∏çÊòØ @code{int} Á±ªÂûã„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨ÈÉΩÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫ @code{long}„ÄÇÔºâ
The group's numeric group ID number;

@item Group Member List
‰∏Ä‰∏™ÈÄóÂè∑ÂàÜÈöîÁöÑÁî®Êà∑ÂàóË°®„ÄÇËøô‰∫õÁî®Êà∑ÊòØÁªÑÁöÑÊàêÂëò„ÄÇÁé∞‰ª£ÁöÑ Unix Á≥ªÁªüÂÖÅËÆ∏Áî®Êà∑ÂêåÊó∂ÊòØÂ§ö‰∏™ÁªÑÁöÑÊàêÂëò„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁ≥ªÁªüÂèØ‰ª•ÊîØÊåÅÔºåÂàôÂú® @code{PROCINFO} ‰∏≠‰ºö‰∏∫Ëøô‰∫õÁªÑ ID Â≠òÂÇ®ÂÖÉÁ¥† @code{"group1"} Âà∞ @code{"group@var{N}"}„ÄÇÔºàÊ≥®ÊÑèÔºå@code{PROCINFO} ÊòØ‰∏Ä‰∏™ @command{gawk} Êâ©Â±ïÔºåÊü•Áúã @pxref{Built-in Variables}Ôºâ
@end table

ËøêË°å @command{grcat} Êó∂‰∫ßÁîüÁöÑËæìÂá∫ÂèØËÉΩÂ¶Ç‰∏ãÔºö

@example
$ @kbd{grcat}
@print{} wheel:*:0:arnold
@print{} nogroup:*:65534:
@print{} daemon:*:1:
@print{} kmem:*:2:
@print{} staff:*:10:arnold,miriam,andy
@print{} other:*:20:
@dots{}
@end example

Ëøô‰∫õÂáΩÊï∞Áî®Êù•‰ªéÁªÑÊï∞ÊçÆÂ∫ì‰∏≠Ëé∑Âèñ‰ø°ÊÅØ„ÄÇÊúâÂá†‰∏™ÔºåÊåâÁÖß C Â∫ìÂáΩÊï∞ÁöÑÊñπÂºèÊù•ÂëΩÂêçÔºö

@cindex @code{getline} command, @code{_gr_init()} user-defined function
@cindex @code{_gr_init()} user-defined function
@example
@c file eg/lib/groupawk.in
# group.awk --- functions for dealing with the group file
@c endfile
@ignore
@c file eg/lib/groupawk.in
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised October 2000
# Revised December 2010
@c endfile
@end ignore
@c line break on _gr_init for smallbook
@c file eg/lib/groupawk.in

BEGIN @{
    # Change to suit your system
    _gr_awklib = "/usr/local/libexec/awk/"
@}

function _gr_init(    oldfs, oldrs, olddol0, grcat,
                             using_fw, using_fpat, n, a, i)
@{
    if (_gr_inited)
        return

    oldfs = FS
    oldrs = RS
    olddol0 = $0
    using_fw = (PROCINFO["FS"] == "FIELDWIDTHS")
    using_fpat = (PROCINFO["FS"] == "FPAT")
    FS = ":"
    RS = "\n"

    grcat = _gr_awklib "grcat"
    while ((grcat | getline) > 0) @{
        if ($1 in _gr_byname)
            _gr_byname[$1] = _gr_byname[$1] "," $4
        else
            _gr_byname[$1] = $0
        if ($3 in _gr_bygid)
            _gr_bygid[$3] = _gr_bygid[$3] "," $4
        else
            _gr_bygid[$3] = $0

        n = split($4, a, "[ \t]*,[ \t]*")
        for (i = 1; i <= n; i++)
            if (a[i] in _gr_groupsbyuser)
                _gr_groupsbyuser[a[i]] = gr_groupsbyuser[a[i]] " " $1
            else
                _gr_groupsbyuser[a[i]] = $1

        _gr_bycount[++_gr_count] = $0
    @}
    close(grcat)
    _gr_count = 0
    _gr_inited++
    FS = oldfs
    if (using_fw)
        FIELDWIDTHS = FIELDWIDTHS
    else if (using_fpat)
        FPAT = FPAT
    RS = oldrs
    $0 = olddol0
@}
@c endfile
@end example

@code{BEGIN} ËßÑÂàôÂ∞ÜÂ≠òÂÇ® @command{grcat} ÊâÄÊúâÁöÑÁõÆÂΩïÂ≠òÂÇ®Âú®ÁßÅÊúâÂèòÈáè‰∏≠„ÄÇÂõ†Ê≠§ËøôÁî®‰∫éÊåáÂá∫ @command{awk} Â∫ìÂáΩÊï∞ÁöÑ‰ΩçÁΩÆ„ÄÇÊàë‰ª¨Â∞ÜÂÖ∂ÊîæÂú® @file{/usr/local/libexec/awk} ‰∏≠„ÄÇÂèØËÉΩ‰Ω†‰ºöÈÄâÊã©Â≠òÂú®Âè¶‰∏Ä‰∏™Âú∞Êñπ„ÄÇ

Ëøô‰∫õ‰æãÁ®ãÈÅµÂæ™‰∏éÁî®Êà∑Êï∞ÊçÆÂ∫ì‰æãÁ®ã‰∏ÄÊ†∑ÁöÑÊ°ÜÊû∂ÔºàÊü•Áúã @pxref{Passwd Functions}Ôºâ„ÄÇ@code{@w{_gr_inited}} ÂèòÈáèÁî®‰∫é‰øùËØÅÊï∞ÊçÆÂ∫ìÂè™Ë¢´Êâ´Êèè‰∏ÄÊ¨°„ÄÇ@code{@w{_gr_init()}} ÂáΩÊï∞È¶ñÂÖàÂ≠òÂÇ® @code{FS}Ôºå@code{RS} ‰ª•Âèä @code{$0} ÂÄºÔºåÁÑ∂ÂêéÂ∞Ü @code{FS} ‰∏é @code{RS} ÁöÑÂÄºËÆæÁΩÆÊàêÊ≠£ÂàôÊâ´ÊèèÁªÑ‰ø°ÊÅØÁöÑÊ†ºÂºè„ÄÇÂêåÊó∂‰πü‰ºöÊ≥®ÊÑèÊòØÂê¶ÊòØÁî® @code{FIELDWIDTHS} ÊàñËÄÖ @code{FPAT}ÔºåÂêéÈù¢‰ª•Áî®Êù•ÊÅ¢Â§çÊÅ∞ÂΩìÁöÑÂüüÂàÜÂâ≤Êú∫Âà∂„ÄÇ

ÁªÑ‰ø°ÊÅØÂ≠òÂÇ®Âú®Âá†‰∏™ÂÖ≥ËÅîÁöÑÊï∞ÁªÑ‰∏≠„ÄÇÊï∞ÁªÑÁî±ÁªÑÂêçÔºà@code{@w{_gr_byname}})ÔºåÁªÑIDÔºà@code{@w{_gr_bygid}}ÔºâÔºå‰ª•ÂèäÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰ΩçÁΩÆÔºà@code{@w{_gr_bycount}}ÔºâÊù•Á¥¢Âºï„ÄÇËøòÊúâ‰∏Ä‰∏™Êï∞ÁªÑÁî±Áî®Êà∑ÂêçÊù•Á¥¢ÂºïÔºà@code{@w{_gr_groupsbyuser}}ÔºâÔºåËøôÊòØÊØè‰∏™Áî®Êà∑ÊâÄÂ±ûÁöÑÁªÑÔºåÊØè‰∏Ä‰∏™Áî®Á©∫Ê†ºÂàÜÂâ≤„ÄÇ

‰∏éÁî®Êà∑Êï∞ÊçÆÂ∫ì‰∏çÂêåÔºåÂÆÉÊúâÂèØËÉΩÂú®‰∏Ä‰∏™Êï∞ÊçÆÂ∫ìÊúâÂ§ö‰∏™ËÆ∞ÂΩïÊúâÁõ∏ÂêåÁöÑÁªÑÂêç„ÄÇÂΩìËøô‰∏™ÁªÑÊúâÂæàÂ§öÁöÑÊàêÂëòÁöÑÊó∂ÂÄôËøôÂæàÊ≠£Â∏∏„ÄÇ‰∏§‰∏™ËøôÊ†∑ÁöÑÈ°πÁúãËµ∑Êù•ÂÉèÔºö

@example
tvpeople:*:101:johnny,jay,arsenio
tvpeople:*:101:david,conan,tom,joan
@end example

Âõ†‰∏∫Ëøô‰∏™Ôºå@code{_gr_init()} Ë¶ÅÊü•ÁúãÊòØÂê¶ÊúâÁõ∏ÂêåÁöÑÁªÑÂêç‰∏éÁªÑ ID ÂÄº„ÄÇÂ¶ÇÊûúÊúâÔºåÁî®Êà∑ÂêçÂè™ÊòØÁÆÄÂçïÂú∞ËøûÊé•Âà∞ÂâçÈù¢ÁöÑÁî®Êà∑ÂàóË°®‰∏≠„ÄÇ 
@footnote{ÂàöÊâçÂ±ïÁ§∫ÁöÑ‰ª£Á†ÅÊúâ‰∏Ä‰∏™ÂæàÁªÜÂæÆÁöÑÈóÆÈ¢ò„ÄÇÂÅáËÆæÁ¨¨‰∏ÄÊ¨°Êó∂ÊòØÊ≤°ÊúâÂêçÂ≠óÁöÑÔºåÂàôËøô‰∏™‰ª£Á†Å‰ºöÂ∞ÜÂêçÂ≠óÂâçÈù¢Â∏¶ÈÄóÂè∑Âä†ÂÖ•„ÄÇÂêåÊó∂‰πüÊ≤°ÊúâÊ£ÄÊµãÊòØÂê¶ÊúâÁ¨¨ 4 ‰∏™ÂüüÔºå@code{$4}„ÄÇ}

ÊúÄÂêéÔºå@code{_gr_init()} ÂÖ≥Èó≠ @command{grcat} ÁöÑÁÆ°Á∫øÔºåÊÅ¢Â§ç @code{FS} ÔºàÂ¶ÇÊûúÊúâÂøÖË¶Å‰πüÊÅ¢Â§ç @code{FIELDWIDTHS} ÊàñËÄÖ @code{FPAT}ÔºâÔºå@code{RS} ‰∏é @code{$0} ÁöÑÂÄºÔºåÂ∞Ü @code{_gr_count} ÁöÑÂÄºÊÅ¢Â§ç‰∏∫ 0 ÔºàÂêéÈù¢‰ºö‰ΩøÁî®Âà∞ÔºâÔºåÂπ∂‰Ωø @code{_gr_inited} ‰∏∫ÈùûÈõ∂„ÄÇ

@cindex @code{getgrnam()} function (C library)
@code{getgrnam()} ÂáΩÊï∞ÂèñÁªÑÂêç‰∏∫ÂèÇÊï∞ÔºåÂ¶ÇÊûúÂ≠òÂú®Áõ∏Â∫îÁöÑÁªÑÔºåÂàôËøîÂõû„ÄÇÂê¶ÂàôÂÖ∂ÊâÄ‰æùËµñÁöÑÊï∞ÁªÑÔºå‰ºö‰ª•Á©∫‰∏≤ÂàõÂª∫‰∏Ä‰∏™ÂÖÉÁ¥†Ôºö

@cindex @code{getgrnam()} user-defined function
@example
@c file eg/lib/groupawk.in
function getgrnam(group)
@{
    _gr_init()
    return _gr_byname[group]
@}
@c endfile
@end example

@cindex @code{getgrgid()} function (C library)
@code{getgrgid()} ÂáΩÊï∞Á±ª‰ººÔºå‰ª•Êï∞ÂÄºÁöÑÁªÑ ID ‰∏∫ÂèÇÊï∞ÔºåÊù•Êü•Êâæ‰∏éËøô‰∏™ ID Áõ∏ÂÖ≥ÁöÑÁªÑÁöÑ‰ø°ÊÅØÔºö

@cindex @code{getgrgid()} user-defined function
@example
@c file eg/lib/groupawk.in
function getgrgid(gid)
@{
    _gr_init()
    return _gr_bygid[gid]
@}
@c endfile
@end example

@cindex @code{getgruser()} function (C library)
@code{getgruser()} ÂáΩÊï∞Ê≤°ÊúâÁõ∏Â∫îÁöÑ C ‰æãÁ®ãÂØπÂ∫î„ÄÇÂÆÉÂèñÁî®Êà∑Âêç‰∏∫ÂèÇÊï∞ÔºåÂπ∂ËøîÂõûËØ•ÁªÑ‰∏≠ÁöÑÊàêÂëòÁî®Êà∑ÁöÑÂàóË°®Ôºö

@cindex @code{getgruser()} function, user-defined
@example
@c file eg/lib/groupawk.in
function getgruser(user)
@{
    _gr_init()
    return _gr_groupsbyuser[user]
@}
@c endfile
@end example

@cindex @code{getgrent()} function (C library)
@code{getgrent()} ÂáΩÊï∞Ëø≠‰ª£Êï∞ÊçÆÂ∫ìÔºå‰∏ÄÊ¨°‰∏Ä‰∏™„ÄÇÂÆÉ‰ΩøÁî® @code{_gr_count} Êù•Ë∑üË∏™Âú®ÂàóË°®‰∏≠ÁöÑ‰ΩçÁΩÆÔºö

@cindex @code{getgrent()} user-defined function
@example
@c file eg/lib/groupawk.in
function getgrent()
@{
    _gr_init()
    if (++_gr_count in _gr_bycount)
        return _gr_bycount[_gr_count]
    return ""
@}
@c endfile
@end example

@cindex @code{endgrent()} function (C library)
@code{endgrent()} ÂáΩÊï∞Â∞Ü @code{_gr_count} ËÆæÁΩÆ‰∏∫ 0ÔºåÂõ†Ê≠§ @code{getgrent()} ÂèØ‰ª•ÈáçÂ§¥ÂºÄÂßãÔºö

@cindex @code{endgrent()} user-defined function
@example
@c file eg/lib/groupawk.in
function endgrent()
@{
    _gr_count = 0
@}
@c endfile
@end example

‰∏éÁî®Êà∑Êï∞ÊçÆÂ∫ìÂàóË°®Áõ∏‰ººÔºåÊØè‰∏Ä‰∏™ÂáΩÊï∞ÈÉΩË∞ÉÁî® @code{_gr_init()} Êù•ÂàùÂßãÂåñÊï∞ÁªÑ„ÄÇËøô‰πàÂÅöÔºå‰ΩøÁî® @command{grcat} Êó∂ÂØºËá¥‰∏Ä‰∫õÈ¢ùÂ§ñÁöÑË¥üÊãÖÔºàÁõ∏ÂØπ‰∫éÂ∞Ü @code{_gr_init()} ÁöÑÊâßË°å‰ΩìÁßªÂà∞ @code{BEGIN} ËßÑÂàô‰∏≠Ôºâ„ÄÇ

Â§ßÂ§öÊï∞ÁöÑÂ∑•‰ΩúÈÉΩÈõÜ‰∏≠‰∫éÊâ´ÊèèÊï∞ÊçÆÂ∫ìÔºåÂπ∂‰∏îÂª∫Á´ãÂ§ö‰∏™ÂÖ≥ËÅîÊï∞ÁªÑ„ÄÇÁî®Êà∑Ëá™Â∑±ÊâÄË∞ÉÁî®ÁöÑÂáΩÊï∞ÂàôÁõ∏ÂΩìÁÆÄÂçïÔºåËøô‰æùËµñ‰∫é @command{awk} ÁöÑÂÖ≥ËÅîÊï∞ÁªÑÊâÄÂÅöÁöÑÂ∑•‰Ωú„ÄÇ

Âú® @ref{Id Program}Ôºå‰∏≠ÁöÑ @command{id} Á®ãÂ∫è‰ºö‰ΩøÁî®Âà∞Ëøô‰∫õÂáΩÊï∞„ÄÇ

@node Walking Arrays
@section ÈÅçÂéÜÂ§öÁª¥Êï∞ÁªÑ

Âú® @ref{Arrays of Arrays}Ôºå‰∏≠ÊèèËø∞‰∫Ü @command{gawk} Â¶Ç‰ΩïÊù•Êèê‰æõÂ§öÁª¥Êï∞ÁªÑ„ÄÇÁâπÂà´ÊòØÔºåÊï∞ÁªÑÁöÑ‰ªªÊÑèÂÖÉÁ¥†Âç≥ÂèØ‰ª•ÊòØÊ†áÈáèÔºå‰πüÂèØ‰ª•ÊòØÂè¶‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇ@code{isarray()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{Type Functions}ÔºâÂèØ‰ª•ËÆ©‰Ω†Â∞ÜÊ†áÈáè‰∏éÊï∞ÁªÑÂå∫ÂàÜ„ÄÇ‰∏ãÈù¢ÁöÑÂáΩÊï∞Ôºå@code{walk_array()} ÈÄíÂΩíÂú∞ÈÅçÂéÜÊï∞ÁªÑÔºåÊâìÂç∞Êï∞ÁªÑÁöÑÁ¥¢Âºï‰ª•ÂèäÂÄº„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÊï∞ÁªÑ‰∏é‰ª£Ë°®Ëøô‰∏™Êï∞ÁªÑÁöÑÂ≠ó‰∏≤ÂêçÊù•Ë∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞Ôºö

@cindex @code{walk_array()} user-defined function
@example
@c file eg/lib/walkarray.awk
function walk_array(arr, name,      i)
@{
    for (i in arr) @{
        if (isarray(arr[i]))
            walk_array(arr[i], (name "[" i "]"))
        else
            printf("%s[%s] = %s\n", name, i, arr[i])
    @}
@}
@c endfile
@end example

@noindent
ÂáΩÊï∞ÈÄöËøáÂæ™ÁéØËø≠‰ª£Êï∞ÁªÑÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†Êù•Â∑•‰Ωú„ÄÇÂ¶ÇÊûúÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂàôÂáΩÊï∞‰ºöÈÄíÂΩíÂú∞Ë∞ÉÁî®Ëá™Â∑±ÔºåÂ∞ÜÂ≠êÊï∞ÁªÑ‰∏éË°®Á§∫ÂΩìÂâçÁ¥¢ÂºïÁöÑÂ≠ó‰∏≤‰º†ÈÄíËøáÂéª„ÄÇÂê¶ÂàôÔºåÂáΩÊï∞ÁÆÄÂçïÂú∞ÊâìÂç∞ÂÖÉÁ¥†ÁöÑÂêçÂ≠óÔºåÁ¥¢Âºï‰ª•ÂèäÂÆÉÁöÑÂÄº„ÄÇËøôÈáåÊòØÊºîÁ§∫ÁöÑ‰∏ªÁ®ãÂ∫èÔºö

@example
BEGIN @{
    a[1] = 1
    a[2][1] = 21
    a[2][2] = 22
    a[3] = 3
    a[4][1][1] = 411
    a[4][2] = 42

    walk_array(a, "a")
@}
@end example

ÂΩìÊâßË°åÊó∂Ôºå‰∫ßÁîü‰∏ãÈù¢ÁöÑËæìÂá∫Ôºö

@example
$ @kbd{gawk -f walk_array.awk}
@print{} a[1] = 1
@print{} a[2][1] = 21
@print{} a[2][2] = 22
@print{} a[3] = 3
@print{} a[4][1][1] = 411
@print{} a[4][2] = 42
@end example

ÂáΩÊï∞‰ªÖÊòØÁÆÄÂçïÂú∞ÊâìÂç∞ÂêçÂ≠ó‰∏éÊØè‰∏™Ê†áÈáèÁöÑÊï∞ÁªÑÂÖÉÁ¥†„ÄÇ‰ΩÜÊòØÔºå‰πüÂæàÂÆπÊòìÊù•ËøõË°åÈÄöÁî®ÂåñÔºåÂè™Ë¶Å‰º†ÈÄí‰∏Ä‰∏™Ë¶ÅÈÅçÂéÜÊï∞ÁªÑÁöÑÂáΩÊï∞ÂêçÂ∞±ÂèØ‰ª•ÂÅöÂà∞„ÄÇ‰øÆÊîπËøáÂêéÁöÑÂáΩÊï∞ÁúãËµ∑Êù•Â¶Ç‰∏ãÔºö

@example
@c file eg/lib/processarray.awk
function process_array(arr, name, process, do_arrays,   i, new_name)
@{
    for (i in arr) @{
        new_name = (name "[" i "]")
        if (isarray(arr[i])) @{
            if (do_arrays)
                @@process(new_name, arr[i])
            process_array(arr[i], new_name, process, do_arrays)
        @} else
            @@process(new_name, arr[i])
    @}
@}
@c endfile
@end example

ÂèÇÊï∞Â¶Ç‰∏ãÔºö

@table @code
@item arr
Áõ∏Â∫îÁöÑÊï∞ÁªÑ„ÄÇ

@item name
Êï∞ÁªÑÂêçÔºàÂ≠ó‰∏≤Ôºâ„ÄÇ

@item process
Ë¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞Âêç„ÄÇ

@item do_arrays
Â¶ÇÊûú‰∏∫ trueÔºåÂáΩÊï∞ÂèØ‰ª•Â§ÑÁêÜ‰∏∫Â≠êÊï∞ÁªÑÁöÑÂÖÉÁ¥†„ÄÇ
@end table

Â¶ÇÊûúÂ≠êÊï∞ÁªÑË¶ÅË¢´Â§ÑÁêÜÔºåÂàôÂú®Ëøõ‰∏ÄÊ≠•Ëø≠‰ª£Êó∂ËøõË°åÂ§ÑÁêÜ„ÄÇ

ÂΩìÂ±ïÂºÄÊâßË°åÊó∂ÔºåÂáΩÊï∞‰∫ßÁîü‰∏éÊó©ÂâçÁöÑ @code{walk_array()} ÂáΩÊï∞‰∏ÄÊ†∑ÁöÑËæìÂá∫ÁªìÊûúÔºö

@example
BEGIN @{
    a[1] = 1
    a[2][1] = 21
    a[2][2] = 22
    a[3] = 3
    a[4][1][1] = 411
    a[4][2] = 42

    process_array(a, "a", "do_print", 0)
@}

function do_print(name, element)
@{
    printf "%s = %s\n", name, element
@}
@end example

@node Library Functions Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
ÈòÖËØªÁ®ãÂ∫èÊòØÂ≠¶‰π†ÁºñÁ®ãÁöÑÊúÄÂ•ΩÊñπÊ≥ï„ÄÇÂú®ËøôÁ´†‰ª•Âèä‰∏ã‰∏Ä@value{CHAPTER}‰∏≠Êèê‰æõÁöÑÂáΩÊï∞‰ª•ÂèäÁ®ãÂ∫èÂ∞±Áî®‰∫éËøôÊ†∑ÁöÑÁõÆÁöÑ„ÄÇ

@item
ÂΩìÂÜôÈÄöÁî®ÁõÆÁöÑÁöÑÂ∫ìÂáΩÊï∞Êó∂ÔºåË¶ÅÁî®‰∏ÄÊ≠§‰∫õËßÑÂàôÊù•ÂëΩ‰ª§‰ªªÊÑèÁöÑÂÖ®Â±ÄÂèòÈáèÔºåËøôÊ†∑ÂÆÉ‰ªñ‰∏ç‰ºö‰∏éÁî®Êà∑Á®ãÂ∫èÁöÑÂèòÈáèÂÜ≤Á™Å„ÄÇ

@item
ËøôÈáåÂëàÁé∞ÁöÑÂáΩÊï∞ÂèØ‰ª•ÂàÜ‰∏∫‰∏ãÈù¢ÁöÑÁ±ªÂûãÔºö

@c nested list
@table @asis
@item ‰∏ÄËà¨ÈóÆÈ¢ò
Êï∞ÁªÑÂà∞Â≠ó‰∏≤ÁöÑËΩ¨Êç¢ÔºåÊµãËØïÊñ≠Ë®ÄÔºåËàçÂÖ•ËàçÂá∫ÔºåÈöèÊú∫Êï∞‰∫ßÁîüÔºåÂ∞ÜÂ≠óÁ¨¶ËΩ¨Êç¢‰∏∫Êï∞ÁªÑÔºåËøûÊé•Â≠ó‰∏≤ÔºåÊñπ‰æøÂú∞ÂèñÂæóÊó∂Èó¥Èó¥‰ø°ÊÅØÔºå‰∏ÄÊ¨°ËØªÂèñÊâÄÊúâÊñá‰ª∂„ÄÇ

@item ÁÆ°ÁêÜ@value{DF}
ÊèêÁ§∫@value{DF}ÁöÑËæπÁïåÔºåÈáçËØªÂΩìÂâçÊñá‰ª∂ÔºåÊ£ÄÊü•Êñá‰ª∂ÁöÑÂèØËØªÊÄßÔºåÊ£ÄÊü• 0 ÈïøÂ∫¶Êñá‰ª∂Ôºå‰ª•ÂèäÂ∞ÜËµãÂÄºÂΩìÊàê@value{FN}Â§ÑÁêÜ„ÄÇ

@item Â§ÑÁêÜÂëΩ‰ª§Ë°åÈÄâÈ°π
@command{awk} ÁâàÊú¨ÁöÑÊ†áÂáÜ C ÂáΩÊï∞ @code{getopt()}„ÄÇ

@item ËØªÂèñÁî®Êà∑‰∏éÁªÑÊï∞ÊçÆÂ∫ì
‰∏§‰∏™‰∏é C ÁâàÊú¨ÁöÑÂ∫ìÂáΩÊï∞Áõ∏ÂêåÁöÑÂáΩÊï∞ÈõÜ„ÄÇ

@item ÈÅçÂéÜÊï∞
‰∏§‰∏™ÂáΩÊï∞Áî®Êù•ËøõË°å‰ªªÊÑèÊ∑±Â∫¶ÁöÑÂ§öÁª¥Êï∞ÁªÑÁöÑÈÅçÂéÜ„ÄÇ
@end table
@c end nested list

@end itemize

@c EXCLUDE START
@node Library Exercises
@section ÁªÉ‰π†

@enumerate
@item
Âú® @ref{Empty Files}Ôºå‰∏≠Êàë‰ª¨ÂëàÁé∞‰∫Ü @file{zerofile.awk} Á®ãÂ∫èÔºåËøô‰∏™Á®ãÂ∫èÂà©Áî® @command{gawk} ÁöÑ @code{ARGIND} ÂèòÈáè„ÄÇËøô‰∏™ÈóÆÈ¢òÊòØÂê¶‰∏ç‰æùËµñ @code{ARGIND} ÂèòÈáèÂ∞±ÂèØ‰ª•Ëß£ÂÜ≥ÔºüÂ¶ÇÊûúÂèØ‰ª•ÔºåÂ¶Ç‰ΩïËß£ÂÜ≥Ôºü

@ignore
# zerofile2.awk --- same thing, portably

BEGIN @{
    ARGIND = Argind = 0
    for (i = 1; i < ARGC; i++)
        Fnames[ARGV[i]]++

@}
FNR == 1 @{
    while (ARGV[ARGIND] != FILENAME)
        ARGIND++
    Seen[FILENAME]++
    if (Seen[FILENAME] == Fnames[FILENAME])
        do
            ARGIND++
        while (ARGV[ARGIND] != FILENAME)
@}
ARGIND > Argind + 1 @{
    for (Argind++; Argind < ARGIND; Argind++)
        zerofile(ARGV[Argind], Argind)
@}
ARGIND != Argind @{
    Argind = ARGIND
@}
END @{
    if (ARGIND < ARGC - 1)
        ARGIND = ARGC - 1
    if (ARGIND > Argind)
        for (Argind++; Argind <= ARGIND; Argind++)
            zerofile(ARGV[Argind], Argind)
@}
@end ignore

@item
‰Ωú‰∏∫Áõ∏ÂÖ≥ÁöÑÊåëÊàòÔºå‰øÆÊîπ‰ª£Á†ÅÊù•Â§ÑÁêÜËøôÊ†∑ÁöÑÊÉÖÂΩ¢ÔºåÂú® @code{ARGV} ‰∏≠ÁöÑÊèíÂÖ•ÂÄºÊòØ‰∏Ä‰∏™ÂèòÈáèËµãÂÄº„ÄÇ

@ignore
@c June 13 2015: Antonio points out that this is answered in the text. Ooops.
@item
Âú® @ref{Walking Arrays}Ôºå‰∏≠ÂëàÁé∞‰∫Ü‰∏Ä‰∏™ÈÅçÂéÜ‰∏Ä‰∏™Â§öÁª¥Êï∞ÁªÑÂπ∂ÊâìÂç∞ÂÖ∂ÂÖÉÁ¥†ÁöÑÂáΩÊï∞„ÄÇ‰ΩÜÊòØÔºåÈÅçÂéÜ‰∏éÂ§ÑÁêÜÊï∞ÁªÑÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÊìç‰Ωú„ÄÇÈÄöÁî®Âåñ @code{walk_array()} ÂáΩÊï∞Âè™ÈúÄË¶ÅÂä†ÂÖ•Âêç‰∏∫ @code{process} ÁöÑÈ¢ùÂ§ñÂèÇÊï∞„ÄÇ

ÁÑ∂ÂêéÔºåÂú®Âæ™ÁéØ‰∏≠ÔºåÂ∞ÜÊâìÂç∞Êï∞ÁªÑÂÖÉÁ¥†Á¥¢Âºï‰∏éÂÄºÁöÑÊìç‰ΩúÔºåÊõøÊç¢‰∏∫‰ª•Èó¥Êé•ÂáΩÊï∞Ë∞ÉÁî® @code{process} ÁöÑËØ≠Ê≥ïÔºàÊü•Áúã @ref{Indirect Calls}ÔºâÔºåÂπ∂Â∞ÜÁ¥¢Âºï‰∏éÂÄº‰º†ÈÄíËøõÂéª„ÄÇ

ÂΩìË∞ÉÁî® @code{walk_array()} Êó∂Ôºå‰Ω†Ë¶Å‰º†ÈÄíÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞ÊúüÊúõÊé•Êî∂Á¥¢Âºï‰∏éÂÄºÔºåÁÑ∂ÂêéÊù•Â§ÑÁêÜÁõ∏Â∫îÁöÑÂÖÉÁ¥†„ÄÇ

ÈÄöËøáÊâìÂç∞Êï∞ÁªÑÊù•ÊµãËØï‰Ω†ÁöÑÊñ∞ÁâàÊú¨ÁöÑ‰ª£Á†ÅÔºå‰Ω†ÊâìÂç∞ÁöÑÊ†ºÂºèÂ∫î‰∏éÊúÄÂàùÁâàÊú¨ÁöÑÊâìÂç∞Ê†ºÂºèÁõ∏Âêå„ÄÇ
@end ignore

@end enumerate
@c EXCLUDE END


@node Sample Programs
@chapter ÂÆûÁî®ÁöÑ @command{awk} Á®ãÂ∫è
@cindex @command{awk} programs, examples of

@c FULLXREF ON
Âú® @ref{Library Functions} ‰∏≠ÂëàÁé∞‰∫ÜËØªÁ®ãÂ∫èÁöÑ‰ª£Á†ÅÊù•ËøõË°åÁ®ãÂ∫èËØ≠Ë®ÄÁöÑÂ≠¶‰π†ÁöÑËßÇÁÇπ„ÄÇËøô‰∏ÄÁ´†ÁªßÁª≠ËøôÊ†∑ÁöÑ‰∏ªÈ¢òÔºåÂπ∂ÈÄöËøáÂëàÁé∞ÂêÑÁßçÂêÑÊ†∑ÁöÑ @command{awk} Á®ãÂ∫è‰ª•‰∫´ËØªËÄÖ„ÄÇ
@c FULLXREF OFF
@ifnotinfo
Ëøô‰∏Ä@value{CHAPTER}Êúâ‰∏â‰∏™@value{SECTION}„ÄÇ
Á¨¨‰∏Ä@value{SECTION}ÊèèËø∞Â¶ÇÂèØÊù•ËøõË°åËøô‰∏ÄÁ´†‰∏≠Êèê‰æõÁöÑÁ®ãÂ∫è„ÄÇ

Á¨¨‰∫å@value{SECTION}ÂëàÁé∞ @command{awk} ÁâàÊú¨ÁöÑÂá†‰∏™ÈÄöÁî®ÁöÑ POSIX Â∑•ÂÖ∑„ÄÇËøô‰∫õÁ®ãÂ∫èÂ∏åÊúõ‰Ω†‰πüÂ∑≤ÁªèÁÜüÊÇâ‰∫ÜÔºåÂπ∂‰∏î‰πü‰∫ÜËß£‰∫ÜËøô‰∫õÂ∑•ÂÖ∑ÁöÑÈóÆÈ¢ò„ÄÇÈÄöËøáÁî® @command{awk} ÈáçÊñ∞ÂÆûÁé∞Ëøô‰∫õÂ∑•ÂÖ∑Ôºå‰Ω†ÂèØ‰ª•Â∞ÜÁÑ¶ÁÇπÈõÜ‰∏≠‰∫é @command{awk} Áõ∏ÂÖ≥ÁöÑËß£ÂÜ≥Á®ãÂ∫èÈóÆÈ¢òÁöÑÊñπÈù¢„ÄÇ

Á¨¨‰∏â@value{SECTION}ÂàôÊòØ‰∏Ä‰∫õÊúâË∂£ÁöÑÁ®ãÂ∫èÈõÜÂêà„ÄÇËøô‰∫õÁ®ãÂ∫èËß£ÂÜ≥‰∫ÜÂæàÂ§öÊï∞ÁªÑÂ§ÑÁêÜ‰∏éÁÆ°ÁêÜÁõ∏ÂÖ≥ÁöÑÈóÆÈ¢ò„ÄÇÂæàÂ§öÁöÑÁ®ãÂ∫èÈÉΩÂæàÁü≠Ôºå‰ª•Áî®‰∫éÂº∫Ë∞É @command{awk} Áî®Âá†Ë°å‰ª£Á†ÅÂç≥ÂèØÂ§ÑÁêÜÂæàÂ§ö‰∫ãÊÉÖÁöÑËÉΩÂäõ„ÄÇ
@end ifnotinfo

ËøôÂΩì‰∏≠ÁöÑÂæàÂ§öÁ®ãÂ∫è‰ºö‰ΩøÁî®Âú® @ref{Library Functions}Ôºå‰∏≠Âá∫Áé∞ËøáÁöÑÂ∫ìÂáΩÊï∞„ÄÇ

@menu
* Running Examples::            How to run these examples.
* Clones::                      Clones of common utilities.
* Miscellaneous Programs::      Some interesting @command{awk} programs.
* Programs Summary::            Summary of programs.
* Programs Exercises::          Exercises.
@end menu

@node Running Examples
@section ËøêË°å‰æãÂ≠êÁ®ãÂ∫è

Ë¶ÅËøêË°å‰∏Ä‰∏™Á®ãÂ∫èÔºåÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏ã‰Ω†ËæìÂÖ•‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö

@example
awk -f @var{program} -- @var{options} @var{files}
@end example

@noindent
Âú®ËøôÈáåÔºå@var{program} ÊòØ @command{awk} Á®ãÂ∫èÁöÑÂêçÂ≠óÔºàÂ¶Ç @file{cut.awk}ÔºâÔºåÈÄâÈ°π @var{options} ÂàôÊòØ‰ªªÊÑèÁ®ãÂ∫èÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºå‰ª• @samp{-} ÂºÄÂ§¥ÔºåËÄå @var{files} ÂàôÊòØÂÆûÈôÖÁöÑ@value{DF}„ÄÇ

Â¶ÇÊûú‰Ω†ÁöÑÁ≥ªÁªüÊîØÊåÅ @samp{#!} ÂèØÊâßË°åËß£ÈáäÂô®Êú∫Âà∂ÔºàÊü•Áúã @pxref{Executable Scripts}ÔºâÔºå‰Ω†ÂèØ‰ª•Áõ¥Êé•Ëøô‰πàËæìÂÖ•Ôºö

@example
cut.awk -c1-8 myfiles > results
@end example

Â¶ÇÊûú @command{awk} ‰∏çÊòØ @command{gawk}Ôºå‰Ω†ÂèØËÉΩË¶ÅËøô‰πàÊù•‰ΩøÁî®Ôºö

@example
cut.awk -- -c1-8 myfiles > results
@end example

@node Clones
@section ‰∏∫Âø´‰πê‰∏éËØÑÊµãÈáçÊñ∞ÂèëÊòéËΩÆÂ≠ê
@cindex POSIX, programs@comma{} implementing in @command{awk}

Êú¨@value{SECTION}‰∏≠ÂëàÁé∞‰∫ÜÂá†‰∏™Áî® @command{awk} ËØ≠Ë®ÄÂÆûÁé∞ÁöÑ POSIX Â∑•ÂÖ∑„ÄÇÈáçÊñ∞Áî® @command{awk} Êù•ÂèëÊòéËøô‰∫õÁ®ãÂ∫èÔºåÂè™ÊòØÂ•ΩÁé©ÔºåÂõ†Ê≠§ÁÆóÊ≥ïÂèØ‰ª•Ë¢´Ê∏ÖÊô∞Âú∞Ë°®ËææÔºåËÄå‰∏î‰ª£Á†Å‰∏ÄËà¨Êù•ËØ¥ÈÉΩÈùûÂ∏∏Á≤æÁÆÄ‰∏éÁÆÄÂçï„ÄÇÂõ†‰∏∫ @command{awk} Á°ÆÂÆû‰∏∫‰Ω†ÂÅö‰∫ÜÂæàÂ§öÁöÑ‰∫ãÊÉÖ‰∫Ü„ÄÇ

‰πüË¶ÅÊ≥®ÊÑèÂà∞ÔºåËøô‰∫õÁ®ãÂ∫èÊ≤°ÊúâÂøÖË¶ÅË¶ÅÂéªÊõøÊç¢Á≥ªÁªü‰∏≠Â∑≤ÁªèÂÆâË£ÖÁöÑÁâàÊú¨„ÄÇÂÖ∂‰∏≠‰πüÊ≤°ÊúâÁ®ãÂ∫èË¢´ÂÆåÂÖ®Âú∞ÂÆûÁé∞‰∫ÜÊúÄËøëÁöÑ POSIX Ê†áÂáÜ„ÄÇ‰ΩÜËøô‰∏çÊòØ‰∏™ÈóÆÈ¢òÔºåÂÆÉ‰ª¨ÁöÑÁõÆÁöÑÊòØÁî®‰∫éËß£Èáä @command{awk} Á®ãÂ∫èËØ≠Ë®Ä‰∏∫‚ÄúÁé∞ÂÆû‰∏ñÁïå‚ÄùÁöÑ‰ªªÂä°ÁöÑÁºñÁ®ãÊñπÂºè„ÄÇ

Á®ãÂ∫è‰ª•Â≠óÊØçÈ°∫Â∫èÂëàÁé∞„ÄÇ

@menu
* Cut Program::                 The @command{cut} utility.
* Egrep Program::               The @command{egrep} utility.
* Id Program::                  The @command{id} utility.
* Split Program::               The @command{split} utility.
* Tee Program::                 The @command{tee} utility.
* Uniq Program::                The @command{uniq} utility.
* Wc Program::                  The @command{wc} utility.
@end menu

@node Cut Program
@subsection Ââ™ÂàáÂüü‰∏éÂàó

@cindex @command{cut} utility
@cindex @command{cut} utility
@cindex fields, cutting
@cindex columns, cutting
@command{cut} Ëøô‰∏™Â∑•ÂÖ∑‰ªéÂÆÉÁöÑÊ†áÂáÜËæìÂÖ•‰∏≠ÈÄâÊã©ÔºåÊàñËÄÖËØ¥‚ÄúÂàáÂàÜ‚ÄùÔºåÂ≠óÁ¨¶ÊàñËÄÖÂüüÂπ∂ËæìÂá∫Ëøô‰∫õÂ≠óÁ¨¶Âà∞ÂÆÉÁöÑÊ†áÂáÜËæìÂá∫‰∏≠„ÄÇÂüüÈªòËÆ§ÊòØÈÄöËøá TABs Êù•ËøõË°åÂàÜÈöîÁöÑÔºå‰ΩÜÊòØ‰Ω†ÂèØ‰ª•Êèê‰æõ‰∏Ä‰∏™ÂëΩ‰ª§Ë°åÂèÇÊï∞Êù•ÊîπÂèò@dfn{ÂüüÁïåÂÆöÁ¨¶}ÔºàÂç≥ÂüüÂàÜÈöîÁ¨¶Ôºâ„ÄÇ@command{cut} ÁöÑÂüüÂÆö‰πâÊ≤°Êúâ @command{awk} ÁöÑÂüüÈÇ£‰πà‰∏ÄËà¨Âåñ„ÄÇ

@command{cut} ÈÄöÂ∏∏ÁöÑ‰ΩøÁî®ÊñπÂºèÂèØËÉΩÊòØ‰ªéÂëΩ‰ª§ @command{who} ÁöÑËæìÂá∫ÁªìÊûú‰∏≠‰ªÖ‰ªÖÊäΩÂá∫Â∑≤ÁôªÂΩïÁî®Êà∑ÁöÑÁôªÂΩïÂêç„ÄÇ
‰æãÂ¶ÇÔºå‰∏ãÈù¢ÁöÑÁÆ°Á∫ø‰ºö‰∫ßÁîüÊúâÂ∫èÁöÑÔºåÂîØ‰∏ÄÁöÑÁôªÂΩïÂà∞Á≥ªÁªü‰∏≠ÁöÑÁî®Êà∑ÂàóË°®Ôºö

@example
who | cut -c1-8 | sort | uniq
@end example

@command{cut} ÁöÑÈÄâÈ°πÊúâÔºö

@table @code
@item -c @var{list}
‰ΩøÁî® @var{list} ‰Ωú‰∏∫Ë¶ÅÂàáÂàÜÁöÑÂ≠óÁ¨¶ÂàóË°®„ÄÇÂú®ÂàóË°®‰∏≠ÁöÑÈ°πÂèØ‰ª•Áî®ÈÄóÂè∑ÂàÜÈöîÔºåÊüê‰∏™ËåÉÂõ¥ÁöÑÂ≠óÁ¨¶ÂèØ‰ª•Áî®Ê®™Êù†Êù•ÂàÜÈöî„ÄÇÂàóË°® @samp{1-8,15,22-35} ÊåáÂÆö‰∫Ü 1 Âà∞ 8 ÁöÑÂ≠óÁ¨¶Ôºå15 ‰ª•Âèä 22 Âà∞ 35 ‰πãÈó¥ÁöÑÂ≠óÁ¨¶„ÄÇ

@item -f @var{list}
‰ΩøÁî® @var{list} ‰Ωú‰∏∫Ë¶ÅÂàáÂàÜÁöÑÂüüÂàóË°®„ÄÇ

@item -d @var{delim}
‰ΩøÁî® @var{delim} ‰ΩúÁî®ÂüüÂàÜÈöîÁ¨¶ÔºåËÄå‰∏çÊòØ‰ΩøÁî® TAB Â≠óÁ¨¶„ÄÇ

@item -s
‰ºöÊäëÂà∂ÊâìÂç∞ÈÇ£‰∫õ‰∏çÂê´ÊúâÂüüÁïåÂÆöÁ¨¶ÁöÑË°å„ÄÇ
@end table

@command{awk} ÁöÑ @command{cut} ÂÆûÁé∞‰ΩøÁî® @code{getopt()} Â∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Getopt Function}Ôºâ‰ª•Âèä @code{join()} Â∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Join Function}Ôºâ„ÄÇ

Á®ãÂ∫è‰ª•ÊèèËø∞ÈÄâÈ°πÁöÑÊ≥®ÈáäÂºÄÂßãÔºåÈúÄË¶ÅÁöÑÂ∫ìÂáΩÊï∞‰ª•Âèä‰∏Ä‰∏™ @code{usage()} ÂáΩÊï∞Êù•ÊâìÂç∞‰ΩøÁî®‰ø°ÊÅØÂêéÈÄÄÂá∫„ÄÇ@code{usage()} Âú®ÈÅáÂà∞‰∏Ä‰∏™Êó†ÊïàÁöÑÂèÇÊï∞Êó∂‰ºöË¢´Ë∞ÉÁî®Ôºö

@cindex @code{cut.awk} program
@example
@c file eg/prog/cut.awk
# cut.awk --- implement cut in awk
@c endfile
@ignore
@c file eg/prog/cut.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
@c endfile
@end ignore
@c file eg/prog/cut.awk

# Options:
#    -f list     Cut fields
#    -d c        Field delimiter character
#    -c list     Cut characters
#
#    -s          Suppress lines without the delimiter
#
# Requires getopt() and join() library functions

@group
function usage()
@{
    print("usage: cut [-f list] [-d c] [-s] [files...]") > "/dev/stderr"
    print("usage: cut [-c list] [files...]") > "/dev/stderr"
    exit 1
@}
@end group
@c endfile
@end example

@cindex @code{BEGIN} pattern, running @command{awk} programs and
@cindex @code{FS} variable, running @command{awk} programs and
Êé•‰∏ãÊù•Â∞±ËΩÆÂà∞ @code{BEGIN} ËßÑÂàôÔºåÂú®ÈáåÈù¢ÂØπÂëΩ‰ª§Ë°åËøõË°åÈÄâÈ°πÂàÜÊûê„ÄÇÂÆÉÂ∞Ü @code{FS} ËÆæÁΩÆ‰∏∫Âçï‰∏™ÁöÑ TAB Â≠óÁ¨¶ÔºåÂõ†Ê≠§ÈÇ£ÊòØ @command{cut} ÁöÑÈªòËÆ§ÂüüÂàÜÈöîÁ¨¶„ÄÇ‰ΩøÁî® @code{getopt()} Êù•ËøõË°åÂæ™ÁéØÂëΩ‰ª§Ë°å‰∏≠ÁöÑÈÄâÈ°π„ÄÇ@code{by_fields} ‰∏é @code{by_chars} ‰∏≠Âè™Êúâ‰∏Ä‰∏™ÂèòÈáèË¢´ËÆæÁΩÆ‰∏∫ trueÔºå‰ª•ÊåáÁ§∫Â§ÑÁêÜÊòØÈÄöËøáÂüüÊù•ÂÆåÊàêËøòÊòØÈÄöËøáÂ≠óÁ¨¶Êù•ÂÆåÊàê„ÄÇÂΩì‰ª•Â≠óÁ¨¶Êù•ÂàáÂàÜÊó∂ÔºåËæìÂá∫ÂüüÂàÜÈöîÁ¨¶Ë¢´ËÆæÁΩÆ‰∏∫Á©∫‰∏≤Ôºö

@example
@c file eg/prog/cut.awk
BEGIN @{
    FS = "\t"    # default
    OFS = FS
    while ((c = getopt(ARGC, ARGV, "sf:c:d:")) != -1) @{
        if (c == "f") @{
            by_fields = 1
            fieldlist = Optarg
        @} else if (c == "c") @{
            by_chars = 1
            fieldlist = Optarg
            OFS = ""
        @} else if (c == "d") @{
            if (length(Optarg) > 1) @{
                printf("cut: using first character of %s" \
                       " for delimiter\n", Optarg) > "/dev/stderr"
                Optarg = substr(Optarg, 1, 1)
            @}
            fs = FS = Optarg
            OFS = FS
            if (FS == " ")    # defeat awk semantics
                FS = "[ ]"
        @} else if (c == "s")
            suppress = 1
        else
            usage()
    @}

    # Clear out options
    for (i = 1; i < Optind; i++)
        ARGV[i] = ""
@c endfile
@end example

@cindex field separators, spaces as
‰ª£Á†ÅÂøÖÈ°ªÂ∞èÂøÉÂ§ÑÁêÜÂüüÂàÜÁïåÁ¨¶‰∏∫Á©∫Ê†ºÁöÑÊÉÖÂÜµ„ÄÇ‰ΩøÁî®ÂçïÁã¨ÁöÑÁ©∫Ê†ºÔºà@code{@w{" "}}ÔºâÊù•‰Ωú‰∏∫ @code{FS} ÁöÑÂÄºÊòØ‰∏çÊ≠£Á°ÆÁöÑ‚Äî‚Äî@command{awk} ‰ºöÁî®ËøûÁª≠ÁöÑÁ©∫Ê†º„ÄÅTABs ‰∏é/ÊàñÊç¢Ë°åÁ¨¶Êù•ËøõË°åÂüüÂàÜÂâ≤Ôºå‰ΩÜÊàë‰ª¨ÊòØÊÉ≥Áî®ÂçïÁã¨ÁöÑÁ©∫Ê†ºÊù•ËøõË°åÂàáÂàÜ„ÄÇ
‰∏∫‰∫ÜËææÂà∞Ëøô‰∏ÄÊïàÊûúÔºåÊàë‰ª¨ÊääÂéüÂßãÁöÑÁ©∫Ê†ºÂ≠óÁ¨¶‰∏≤Â≠òÂú®ÂèòÈáè @code{fs} Èáå‰ª•Â§á‰πãÂêé‰ΩøÁî®ÔºõÂú®Êää @code{FS} ËÆæÁΩÆ‰∏∫ @code{"[ ]"} ‰πãÂêéÔºåÊàë‰ª¨‰∏çËÉΩÁõ¥Êé•Áî®ÂÆÉÊü•ÁúãÊòØÂê¶ÂüüÂàÜÁïåÁ¨¶Âú®Ëøô‰∏™Â≠óÁ¨¶‰∏≤‰∏≠„ÄÇ

ÂêåÊó∂‰πüË¶ÅËÆ∞‰ΩèÂΩì @code{getopt()} ÂÆåÊàêÔºàÂú® @ref{Getopt Function}Ôºå‰∏≠ËøõË°å‰∫ÜÊèèËø∞ÔºâÔºåÊàë‰ª¨Ë¶ÅÊ∏ÖÈô§Âú® @code{ARGV} ‰∏≠ 1 Âà∞ @code{Optind} ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºåËøôÊ†∑ @command{awk} ‰∏ç‰ºöÂ∞ÜËøô‰∫õÂëΩ‰ª§Ë°åÂèÇÊï∞ÂΩìÊàê@value{FN}ËøõË°åÂ§ÑÁêÜ„ÄÇ

Âú®Â§ÑÁêÜ‰∫ÜÂëΩ‰ª§Ë°åÈÄâÈ°πÂêéÔºåÁ®ãÂ∫èË¶ÅÈ™åËØÅÈÄâÈ°πÊòØÂê¶ÊòØÊúâÁî®ÁöÑ„ÄÇÂè™Êúâ @option{-c} ‰∏é @option{-f} ‰πã‰∏ÄË¢´‰ΩøÁî®ÔºåËÄå‰∏§ËÄÖÈÉΩÈúÄË¶Å‰∏Ä‰∏™ÂüüÂàóË°®„ÄÇÁÑ∂ÂêéÁ®ãÂ∫èË∞ÉÁî® @code{set_fieldlist()} ÊàñËÄÖ @code{set_charlist()} Êù•Â∞ÜÂüüÊàñËÄÖÂ≠óÁ¨¶Ë°®ËøõË°åÊãÜÂàÜÔºö

@example
@c file eg/prog/cut.awk
    if (by_fields && by_chars)
        usage()

    if (by_fields == 0 && by_chars == 0)
        by_fields = 1    # default

    if (fieldlist == "") @{
        print "cut: needs list for -c or -f" > "/dev/stderr"
        exit 1
    @}

    if (by_fields)
        set_fieldlist()
    else
        set_charlist()
@}
@c endfile
@end example

@code{set_fieldlist()} Â∞ÜÂàóË°®‰ª•ÈÄóÂè∑ËøõË°åÂàÜÂâ≤ÔºåÂπ∂Â≠òÂÇ®Âà∞Êï∞ÁªÑ‰∏≠„ÄÇÁÑ∂ÂêéÂØπÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÔºåÊü•ÁúãÂÖ∂ÊòØÂê¶ÊòØ‰∏Ä‰∏™ËåÉÂõ¥ÔºåÂ¶ÇÊûúÊòØÔºåÂàôÂ∞ÜÂÖ∂ÂàÜÂºÄ„ÄÇÂáΩÊï∞Ê£ÄÊü•ËåÉÂõ¥‰ª•Á°Æ‰øùÁ¨¨‰∏Ä‰∏™Êï∞ÂÄºÊòØÂ∞è‰∫éÁ¨¨‰∫å‰∏™Êï∞ÂÄºÁöÑ„ÄÇÂú®ÂàóË°®‰∏≠ÊØè‰∏Ä‰∏™Êï∞ÂÄºÈÉΩ‰ºöÂä†Âà∞ @code{flist} Êï∞ÁªÑ‰∏≠ÔºåËøô‰∏™Êï∞ÁªÑÂè™ÊòØÁÆÄÂçïÂú∞ËÆ∞ÂΩïË¶ÅÊâìÂç∞ÁöÑÂüü„ÄÇ‰ΩøÁî®ÁöÑÊòØÂ∏∏ËßÑÁöÑÂüüÂàÜÂâ≤Á≠ñÁï•„ÄÇÁ®ãÂ∫è‰Ωø @command{awk} Â§ÑÁêÜÂüüÂàÜÂâ≤ÁöÑÂ∑•‰ΩúÔºö

@example
@c file eg/prog/cut.awk
function set_fieldlist(        n, m, i, j, k, f, g)
@{
    n = split(fieldlist, f, ",")
    j = 1    # index in flist
    for (i = 1; i <= n; i++) @{
        if (index(f[i], "-") != 0) @{ # a range
            m = split(f[i], g, "-")
@group
            if (m != 2 || g[1] >= g[2]) @{
                printf("cut: bad field list: %s\n",
                                  f[i]) > "/dev/stderr"
                exit 1
            @}
@end group
            for (k = g[1]; k <= g[2]; k++)
                flist[j++] = k
        @} else
            flist[j++] = f[i]
    @}
    nfields = j - 1
@}
@c endfile
@end example

@code{set_charlist()} ÂáΩÊï∞Ë¶ÅÊØî @code{set_fieldlist()} Ë¶ÅÂ§çÊùÇÂæóÂ§ö„ÄÇËøôÈáåÁöÑÊÉ≥Ê≥ïÊòØÂà©Áî® @command{gawk} ÁöÑ @code{FIELDWIDTHS} ÂèòÈáèÔºàÊü•Áúã @pxref{Constant Size}ÔºâÔºåËøô‰∏™ÂèòÈáèÊèèËø∞‰∫ÜËæìÂÖ•ÁöÑÂ∏∏ÈáèÂÆΩÂ∫¶„ÄÇÂΩì‰ΩøÁî®Â≠óÁ¨¶ÂàóË°®Êó∂ÔºåËøôÊ≠£ÊòØÊàë‰ª¨ÊâÄÈúÄË¶ÅÁöÑ„ÄÇ

ËÆæÁΩÆ @code{FIELDWIDTHS} ÁöÑÂÄºË¶ÅÊØîÁÆÄÂçïÂú∞ÂàóË°®ÈÇ£‰∫õË¶ÅÊâìÂç∞ÁöÑÂüüË¶ÅÁÆÄÂçïÂæóÂ§ö„ÄÇÊàë‰ª¨Ë¶ÅË∑üË∏™Ë¶ÅÊâìÂç∞ÁöÑÂüü‰ª•ÂèäË¶ÅË∑≥ËøáÁöÑ‰∏≠Èó¥Â≠óÁ¨¶„ÄÇ‰æãÂ¶ÇÔºåÂÅáËÆæ‰Ω†ÊÉ≥Ë¶ÅÁöÑÂ≠óÁ¨¶‰∏∫ 1 Âà∞ 8Ôºå15Ôºå‰ª•Âèä 22 Âà∞ 35„ÄÇÂèØÈúÄË¶Å‰ΩøÁî® @samp{-c 1-8,15,22-35}„ÄÇ
@code{FIELDWIDTHS} ÁöÑÂÄºÂ∫îËØ•ÊòØ @code{@w{"8 6 1 6 14"}}„ÄÇËøô‰ºö‰∫ßÁîü 5 ‰∏™ÂüüÔºåË¶ÅÊâìÂç∞ÁöÑÂüü‰∏∫ @code{$1}Ôºå@code{$3} ‰∏é @code{$5}„ÄÇ‰∏≠Èó¥ÁöÑÂüüÂàôÊòØÂ°´ÂÖÖÁ¨¶ÔºåÊòØÊâÄÈúÄË¶ÅÁöÑÂüü‰πãÈó¥ÁöÑÂ≠óÁ¨¶„ÄÇ@code{flist} ÂàóÂá∫‰∫ÜË¶ÅÊâìÂç∞ÁöÑÂüüÔºå@code{t} ÂàôÊòØÁî®Êù•Ë∑üË∏™ÂÆåÊï¥ÁöÑÂüüÂàóË°®ÔºåÂåÖÊã¨Â°´ÂÖÖÂüüÔºö

@example
@c file eg/prog/cut.awk
function set_charlist(    field, i, j, f, g, n, m, t,
                          filler, last, len)
@{
    field = 1   # count total fields
    n = split(fieldlist, f, ",")
    j = 1       # index in flist
    for (i = 1; i <= n; i++) @{
        if (index(f[i], "-") != 0) @{ # range
            m = split(f[i], g, "-")
            if (m != 2 || g[1] >= g[2]) @{
                printf("cut: bad character list: %s\n",
                               f[i]) > "/dev/stderr"
                exit 1
            @}
            len = g[2] - g[1] + 1
            if (g[1] > 1)  # compute length of filler
                filler = g[1] - last - 1
            else
                filler = 0
@group
            if (filler)
                t[field++] = filler
@end group
            t[field++] = len  # length of field
            last = g[2]
            flist[j++] = field - 1
        @} else @{
            if (f[i] > 1)
                filler = f[i] - last - 1
            else
                filler = 0
            if (filler)
                t[field++] = filler
            t[field++] = 1
            last = f[i]
            flist[j++] = field - 1
        @}
    @}
    FIELDWIDTHS = join(t, 1, field - 1)
    nfields = j - 1
@}
@c endfile
@end example

‰∏ã‰∏Ä‰∏™ÂàôÊòØÂ§ÑÁêÜÊï∞ÊçÆÁöÑËßÑÂàô„ÄÇÂ¶ÇÊûúÊåáÂÆö‰∫Ü @option{-s} ÈÄâÈ°πÔºåÂàô @code{suppress} ‰∏∫ true„ÄÇÁ¨¨‰∏Ä‰∏™ @code{if} ËØ≠Âè•Á°Æ‰øùËæìÂÖ•ÁöÑËÆ∞ÂΩï‰∏≠Á°ÆÂÆûÂåÖÂê´ÂüüÂàÜÈöîÁ¨¶„ÄÇÂ¶ÇÊûú @command{cut} Ê≠£Âú®Â§ÑÁêÜÂüüÔºåËÄå @code{suppress} ‰∏∫ trueÔºåÂπ∂‰∏îÂüüÂàÜÈöîÂ≠óÁ¨¶‰∏çÂú®ËÆ∞ÂΩï‰∏≠ÔºåÂàôËøôÊù°ËÆ∞ÂΩï‰ºöË¢´Ë∑≥Ëøá„ÄÇ

Â¶ÇÊûúËÆ∞ÂΩïÊòØÊúâÊïàÁöÑÔºåÂàô @command{gawk} ‰ºöÂ∞ÜËÆ∞ÂΩïÂàÜÂâ≤ÊàêÂüüÔºåË¶Å‰πà‰ΩøÁî®ÁöÑÊòØ @code{FS} ‰∏≠ÁöÑÂ≠óÁ¨¶ÔºåË¶Å‰πàÊòØ‰ΩøÁî®Âõ∫ÂÆöÂÆΩÂ∫¶ÁöÑÊñπÂºèÔºå‰ª•Âèä @code{FIELDWIDTHS} ÊñπÂºè„ÄÇÂæ™ÁéØËø≠‰ª£ÈÇ£‰∫õË¶ÅË¢´ÊâìÂç∞ÁöÑÂüüÂàóË°®„ÄÇÂ¶ÇÊûúÂÖ∂ÂåÖÂê´Áõ∏Â∫îÊï∞ÊçÆÔºåÂàôÊâìÂç∞Áõ∏Â∫îÁöÑÂüü„ÄÇÂ¶ÇÊûú‰∏ã‰∏Ä‰∏™Âüü‰πüÂåÖÂê´Êï∞ÊçÆÔºåÂàôÂú®‰∏§‰∏™Âüü‰πãÈó¥ËæìÂá∫ÂàÜÈöîÁ¨¶Ôºö

@example
@c file eg/prog/cut.awk
@{
    if (by_fields && suppress && index($0, fs) == 0)
        next

    for (i = 1; i <= nfields; i++) @{
        if ($flist[i] != "") @{
            printf "%s", $flist[i]
            if (i < nfields && $flist[i+1] != "")
                printf "%s", OFS
        @}
    @}
    print ""
@}
@c endfile
@end example

Ëøô‰∏™ÁâàÊú¨ÁöÑ @command{cut} ‰æùËµñ‰∫é @command{gawk} ÁöÑ @code{FIELDWIDTHS} ÂèòÈáèÊù•ÂÅöÂü∫‰∫éÂ≠óÁ¨¶ÁöÑÂàáÂàÜ„ÄÇ‰πüÂèØ‰ª•Âú®ÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰∏≠‰ΩøÁî® @code{substr()}ÔºàÊü•Áúã @ref{String Functions}ÔºâÔºå‰ΩÜÊòØÈÇ£ÂÆûÁé∞Ëµ∑Êù•‰πüÂæàÁóõËã¶„ÄÇ@code{FIELDWIDTHS} ÂèòÈáèÊèê‰æõ‰∫Ü‰∏ÄÁßçÂæà‰ºòÈõÖÁöÑËß£ÂÜ≥ÊñπÊ≥ïÊù•Â§ÑÁêÜË¢´Â≠óÁ¨¶ÂàÜÂâ≤ÁöÑËæìÂÖ•Ë°å„ÄÇ


@node Egrep Program
@subsection Áî®Ê≠£ÂàôË°®ËææÂºèÂú®Êñá‰ª∂‰∏≠ÊêúÁ¥¢

@cindex regular expressions, searching for
@cindex searching, files for regular expressions
@cindex files, searching for regular expressions
@cindex @command{egrep} utility
@command{egrep} Â∑•ÂÖ∑Ë¶ÅÊù•ÊåâÊ®°ÂºèÊêúÁ¥¢Êñá‰ª∂ÂÜÖÂÆπ„ÄÇÂÆÉ‰ΩøÁî®ÁöÑÊ≠£ÂàôË°®ËææÂºèÂá†‰πé‰∏é @command{awk} ÊâÄ‰ΩøÁî®ÁöÑ‰∏ÄÊ†∑ÔºàÊü•Áúã @pxref{Regexp}Ôºâ„ÄÇ‰Ω†Ëøô‰πàÊù•Ë∞ÉÁî®Ôºö

@display
@command{egrep} [@var{options}] @code{'@var{pattern}'} @var{files} @dots{}
@end display

@var{pattern} ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºè„ÄÇÂú®ÂÖ∏ÂûãÁöÑ‰ΩøÁî®ÊÉÖÂÜµ‰∏ãÔºåÊ≠£ÂàôË°®ËææÂºè‰ºöË¢´ÂºïËµ∑Êù•Ôºå‰ª•ÈÅøÂÖç Shell Â∞Ü‰∏Ä‰∫õÁâπÊÆäÂ≠óÁ¨¶Êâ©Â±ï‰∏∫@value{FN}ÁöÑÈÄöÈÖçÁ¨¶„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå@command{egrep} ÊâìÂç∞ÂåπÈÖçÁöÑË°å„ÄÇÂ¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠Êèê‰æõ‰∫ÜÂ§ö‰∏™@value{FN}ÔºåÂàôÊØè‰∏™ËæìÂá∫Ë°åÂâçÈÉΩÂ∏¶‰∏äÊñá‰ª∂ÂêçÔºåÂêéÈù¢Ë∑üÁùÄÂÜíÂè∑Ôºö

@command{egrep} ÁöÑÈÄâÈ°πÂ¶Ç‰∏ãÔºö

@table @code
@item -c
ÊâìÂç∞ÂåπÈÖç pattern ÁöÑË°åÁöÑÊÄªÊï∞ÔºåËÄå‰∏çÊòØÂåπÈÖçË°åÊú¨Ë∫´„ÄÇ

@item -s
ÈùôÈªòÂ§ÑÁêÜÔºå‰∏ç‰∫ßÁîüËæìÂá∫ÔºåÂπ∂‰∏îÁî®ÈÄÄÂá∫ÂÄºÊù•Ë°®Á§∫ÊòØÂê¶ÊúâÂåπÈÖçÁöÑË°å„ÄÇ

@item -v
ÂØπÂåπÈÖçÊµãËØïÂèñÂèç„ÄÇ@command{egrep} ÊâìÂç∞ÈÇ£‰∫õ‰∏çÂåπÈÖçÊ®°ÂºèÁöÑË°åÔºåÂπ∂‰∏îÂ¶ÇÊûúÂåπÈÖç@emph{Ê≤°Êúâ}ÊàêÂäüÔºåÂàô‰ª•ÊàêÂäüÈÄÄÂá∫„ÄÇ

@item -i
ÂøΩÁï• pattern ‰∏éËæìÂÖ•Êï∞ÊçÆÁöÑÂ§ßÂ∞èÂÜô„ÄÇ

@item -l
Âè™ÊâìÂç∞ÔºàÂàóÂá∫ÔºâÂåπÈÖçÁöÑÊñá‰ª∂ÂêçÔºåËÄå‰∏çÊòØÂåπÈÖçÁöÑË°å„ÄÇ

@item -e @var{pattern}
‰ΩøÁî® @var{pattern} ‰∏∫Ë¶ÅÂåπÈÖçÁöÑÊ≠£ÂàôË°®ËææÂºè„ÄÇ@option{-e} ÈÄâÈ°πÁöÑÁõÆÁöÑÊòØÂÖÅËÆ∏Ê®°ÂºèÂèØ‰ª•‰ª• @samp{-} ÂºÄÂßã„ÄÇ
@end table

Ëøô‰∏™ÁâàÊú¨‰ΩøÁî® @code{getopt()} Â∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Getopt Function}Ôºâ‰ª•ÂèäÊñá‰ª∂ËΩ¨Êç¢Â∫ìÁ®ãÂ∫èÔºàÊü•Áúã @pxref{Filetrans Function}Ôºâ„ÄÇ

Á®ãÂ∫è‰ª•ÊèèËø∞ÊÄßÁöÑÊ≥®ÈáäÂºÄÂßãÔºåÁÑ∂ÂêéÊòØ @code{BEGIN} ËßÑÂàôË∞ÉÁî® @code{getopt()} ÂáΩÊï∞Êù•Â§ÑÁêÜÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇ @option{-i}ÔºàÂøΩÁï•Â§ßÂ∞èÂÜôÔºâÈÄâÈ°πÂØπ‰∫é @command{gawk} Êù•ËØ¥Â∞§ÂÖ∂ÁÆÄÂçïÔºåÊàë‰ª¨Âè™‰ΩøÁî®È¢ÑÂÆö‰πâÁöÑ @code{IGNORECASE} ÂèòÈáèÂ∞±ÂèØ‰ª•ÂÆûÁé∞ÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÔºö

@cindex @code{egrep.awk} program
@example
@c file eg/prog/egrep.awk
# egrep.awk --- simulate egrep in awk
#
@c endfile
@ignore
@c file eg/prog/egrep.awk
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993

@c endfile
@end ignore
@c file eg/prog/egrep.awk
# Options:
#    -c    count of lines
#    -s    silent - use exit value
#    -v    invert test, success if no match
#    -i    ignore case
#    -l    print filenames only
#    -e    argument is pattern
#
# Requires getopt and file transition library functions

BEGIN @{
    while ((c = getopt(ARGC, ARGV, "ce:svil")) != -1) @{
        if (c == "c")
            count_only++
        else if (c == "s")
            no_print++
        else if (c == "v")
            invert++
        else if (c == "i")
            IGNORECASE = 1
        else if (c == "l")
            filenames_only++
        else if (c == "e")
            pattern = Optarg
        else
            usage()
    @}
@c endfile
@end example

Êé•‰∏ãÊù•ÂàôÊòØÂ§ÑÁêÜ @command{egrep} Áõ∏ÂÖ≥ÁöÑË°å‰∏∫„ÄÇÂ¶ÇÊûúÊ≤°Êúâ‰ΩøÁî® @option{-e} ÈÄâÈ°πÊèê‰æõ pattern ÂèÇÊï∞ÔºåÂàô‰ºö‰ΩøÁî®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™ÈùûÈÄâÈ°πÂèÇÊï∞„ÄÇ@command{awk} ‰∏≠Âà∞ @code{ARGV[Optind]} ‰∏≠ÁöÑÂèÇÊï∞‰ºöË¢´Ê∏ÖÁ©∫ÔºåÊâÄ‰ª• @command{awk} ‰∏ç‰ºöÂ∞ùËØïÂ∞ÜÂÆÉ‰ª¨ÂΩìÊàêÊñá‰ª∂ËøõË°åÂ§ÑÁêÜ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÊñá‰ª∂ÔºåÂàô‰ΩøÁî®Ê†áÂáÜÁöÑËæìÂÖ•ÔºåËÄåÂ¶ÇÊûúÊåáÂÆöÁöÑÂ§ö‰∏™Êñá‰ª∂ÔºåÊàë‰ª¨Ë¶ÅÁ°Æ‰øùË¶ÅÁúãÂà∞ËøôÁßçÊÉÖÂÜµÔºåÂõ†Ê≠§@value{FN}Ë¶ÅÂá∫Áé∞Âú®ËæìÂá∫ÁöÑË°å‰πãÂâçÔºö

@example
@c file eg/prog/egrep.awk
    if (pattern == "")
        pattern = ARGV[Optind++]

    for (i = 1; i < Optind; i++)
        ARGV[i] = ""
    if (Optind >= ARGC) @{
        ARGV[1] = "-"
        ARGC = 2
    @} else if (ARGC - Optind > 1)
        do_filenames++

#    if (IGNORECASE)
#        pattern = tolower(pattern)
@}
@c endfile
@end example

ÊúÄÂêé‰∏§Ë°åË¢´Ê≥®ÈáäÊéâ‰∫ÜÔºåÂõ†‰∏∫Âú® @command{gawk} ‰∏≠‰∏çÈúÄË¶Å„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{awk}ÔºåÂàô‰Ω†ÂèØËÉΩÈúÄË¶ÅÂ∞Ü‰ªñ‰ª¨ÂèçÊ≥®ÈáäÂõûÊù•„ÄÇ

Â¶ÇÊûú‰Ω†‰∏çÊòØ‰ΩøÁî®ÁöÑ @command{gawk}Ôºå‰∏ãÈù¢ÊòØË¶ÅË¢´ÂèçÊ≥®ÈáäÊéâÁöÑË°å„ÄÇËøô‰∏™ËßÑÂàôÂú®ÊåáÂÆö‰∫Ü @option{-i} ÂèÇÊï∞Êó∂ÔºåÂ∞ÜÊâÄÊúâÁöÑËæìÂÖ•Ë°å‰∏≠ÁöÑÂ≠óÁ¨¶ËΩ¨Êç¢‰∏∫Â∞èÂÜô„ÄÇ
@footnote{ËøôÈáåÂêåÊó∂‰πüÂºïÂÖ•‰∫Ü‰∏Ä‰∏™ÈöêËîΩÁöÑ BugÔºåÂ¶ÇÊûúÂèëÁîü‰∫ÜÂåπÈÖçÔºåÊàë‰ª¨ËæìÂá∫Ë¢´ËΩ¨Êç¢‰∫ÜÁöÑË°åÔºåËÄå‰∏çÊòØÂéüÊù•ÁöÑË°å„ÄÇ}
ÂÆÉ‰ª¨Ë¢´Ê≥®ÈáäÊéâÔºåÊòØÂõ†‰∏∫Ëøô‰∫õ‰ª£Á†ÅÂú® @command{gawk} ‰∏≠‰ΩøÁî®„ÄÇ

@example
@c file eg/prog/egrep.awk
#@{
#    if (IGNORECASE)
#        $0 = tolower($0)
#@}
@c endfile
@end example

ÂΩìÊØèÂ§ÑÁêÜ‰∏Ä‰∏™Êñ∞Êñá‰ª∂ÁöÑÊó∂ÂÄôÔºå@code{beginfile()} ÂáΩÊï∞Âú® @file{ftrans.awk} ‰∏≠Ë¢´Ë∞ÉÁî®„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊòØÈùûÂ∏∏ÁÆÄÂçïÁöÑÔºåÊâÄË¶ÅË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÂ∞±ÊòØÂàùÂßãÂåñÂèòÈáè @code{fcount} ‰∏∫ 0„ÄÇ@code{fcount} Áî®Êù•Ë∑üË∏™ÂΩìÂâçÁöÑÊñá‰ª∂‰∏≠ÊúâÂ§öÂ∞ëË°åÂåπÈÖç pattern„ÄÇÂêçÂ≠ó‰∏∫ @code{junk} ÁöÑÂèÇÊï∞ÊòæÁ§∫ @code{beginfile()} ‰ºö‰ΩøÁî®‰∏Ä‰∏™ÂèÇÊï∞Êù•Ë∞ÉÁî®Ôºå‰ΩÜÊòØÊàë‰ª¨ÂØπÂÖ∂ÂÄº‰∏çÊÑüÂÖ¥Ë∂£Ôºö

@example
@c file eg/prog/egrep.awk
function beginfile(junk)
@{
    fcount = 0
@}
@c endfile
@end example

ÂΩìÊØè‰∏Ä‰∏™Êñá‰ª∂Ë¢´Â§ÑÁêÜÂÆåÂêéÔºå‰ºöË∞ÉÁî® @code{endfile()}„ÄÇÂÆÉÂè™‰ºöÂú®Áî®Êà∑ÊÉ≥Áü•ÈÅìÊúâÂ§öÂ∞ëË°åÂåπÈÖçÊó∂Êâç‰ºöÂΩ±ÂìçËæìÂá∫„ÄÇ@code{no_print} ÈúÄË¶ÅÈÄÄÂá∫Áä∂ÊÄÅÊó∂Êâç‰∏∫‰ºö true„ÄÇ@code{count_only} Â¶ÇÊûúË¶ÅÁªüËÆ°Êó∂Êâç‰ºö‰∏∫ true„ÄÇÂ¶ÇÊûúÊâìÂç∞‰∏éÁªüËÆ°Ë¢´ÂêØÁî®Ôºå@code{egrep} Âõ†Ê≠§Âè™ÊâìÂç∞Ë°åÁªüËÆ°Êï∞„ÄÇËæìÂá∫ÁöÑÊ†ºÂºèÂøÖÈ°ªÊ†πÊçÆË¶ÅÂ§ÑÁêÜÁöÑÊñá‰ª∂ËøõË°åÂ§ÑÁêÜ„ÄÇÊúÄÂêéÔºå@code{fcount} Ë¢´Âä†Ëøõ @code{total}ÔºåÂõ†Ê≠§Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÊÄªÂÖ±ÊúâÂ§öÂ∞ëË°åÂåπÈÖç‰∫Ü patternÔºö

@example
@c file eg/prog/egrep.awk
function endfile(file)
@{
    if (! no_print && count_only) @{
        if (do_filenames)
            print file ":" fcount
        else
            print fcount
    @}

    total += fcount
@}
@c endfile
@end example

@code{BEGINFILE} ‰∏é @code{ENDFILE} Ëøô‰∏§‰∏™ÁâπÊÆäÊ®°ÂºèÔºàÊü•Áúã @pxref{BEGINFILE/ENDFILE}Ôºâ‰πüÂèØ‰ª•‰ΩøÁî®Ôºå‰ΩÜÊòØÁ®ãÂ∫èÂøÖÈ°ªÊòØÁî® @command{gawk} Êù•ËøêË°åÁöÑ„ÄÇÂè¶Â§ñÔºåËøô‰∏™‰æãÂ≠êÂÜô‰∫é @command{gawk} Âä†ÂÖ• @code{BEGINFILE} ‰∏é @code{ENDFILE} ÁâπÊÄß‰πãÂâç„ÄÇ

‰∏ãÈù¢ÁöÑËßÑÂàôÂ§ÑÁêÜ‰∫ÜÂ§ßÈÉ®ÂàÜÁöÑÂåπÈÖçË°åÁöÑÂ∑•‰Ωú„ÄÇÂèòÈáè @code{matches} Âú®Ë°åÂåπÈÖç pattern Êó∂‰∏∫Áúü„ÄÇÂ¶ÇÊûúÁî®Êà∑ÊÉ≥Ë¶Å‰∏çÂåπÈÖçÁöÑË°åÔºåÂàô @code{matches} ÁöÑÊÑè‰πâÂ∞±Áî® @samp{!} Ë¢´ÂèçËøáÊù•‰ΩøÁî®„ÄÇ@code{fcount} ‰ºöÁî® @code{matches} ÁöÑÂÄº‰∏ÄËµ∑ÈÄíÂ¢ûÔºåÊ†πÊçÆÂåπÈÖçÊàêÂäü‰∏éÂê¶ÔºåÂÖ∂Ë¶Å‰πàÊòØ 0ÔºåË¶Å‰πàÊòØ 1„ÄÇÂ¶ÇÊûúË°å‰∏çÂåπÈÖçÔºåÂàô @code{next} ËØ≠Âè•‰ºöË∞ÉÁî®ÔºåÁî®‰∫éÂ§ÑÁêÜ‰∏ã‰∏ÄÊù°ËÆ∞ÂΩï„ÄÇ

‰∏ãÈù¢ÊâßË°å‰∫ÜÂæàÂ§öÁöÑÊµãËØïÔºå‰ΩÜÊòØÂÆÉ‰ª¨Âè™‰ºöÂú®Êàë‰ª¨‰∏çËøõË°åË°åÁªüËÆ°Êó∂ÊâßË°å„ÄÇÈ¶ñÂÖàÔºåÂ¶ÇÊûúÁî®Êà∑ÊÉ≥Ë¶ÅÁöÑÊòØÈÄÄÂá∫Áä∂ÊÄÅÔºà@code{no_print} ‰∏∫ trueÔºâÔºåÂàôÂè™ÈúÄË¶ÅÁü•ÈÅìÊñá‰ª∂‰∏≠ÁöÑÊüê@emph{‰∏Ä}Ë°åÊòØÂê¶ÂåπÈÖçÂ∞±ÂèØ‰ª•‰∫ÜÔºåÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•Áî® @code{nextfile} Êù•Ë∑≥Âà∞‰∏ã‰∏Ä‰∏™Êñá‰ª∂„ÄÇÁõ∏‰ººÂú∞ÔºåÂ¶ÇÊûúÊàë‰ª¨‰ªÖÈúÄË¶ÅÊâìÂç∞@value{FN}ÔºåÊàë‰ª¨ÂàôÊâìÂç∞@value{FN}ÂêéÁî® @code{nextfile} ËØ≠Âè•Êù•Ë∑≥Âà∞‰∏ã‰∏Ä‰∏™Êñá‰ª∂„ÄÇÊúÄÂêéÔºåÊàë‰ª¨‰ºöÊâìÂç∞ÊØè‰∏ÄË°åÔºåÂ¶ÇÊûúÈúÄË¶ÅÁöÑËØùÔºåÂú®ÂÖ∂ÂâçÈù¢Âä†ÂÖ•@value{FN}‰∏éÂÜíÂè∑Ôºö

@cindex @code{!} (exclamation point), @code{!} operator
@cindex exclamation point (@code{!}), @code{!} operator
@example
@c file eg/prog/egrep.awk
@{
    matches = ($0 ~ pattern)
    if (invert)
        matches = ! matches

    fcount += matches    # 1 or 0

    if (! matches)
        next

    if (! count_only) @{
        if (no_print)
            nextfile

        if (filenames_only) @{
            print FILENAME
            nextfile
        @}

        if (do_filenames)
            print FILENAME ":" $0
        else
            print
    @}
@}
@c endfile
@end example

@code{END} ËßÑÂàôË¶ÅÂ§ÑÁêÜÂ•ΩÊ≠£Á°ÆÁöÑËøîÂõûÁä∂ÊÄÅ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂåπÈÖçÔºåÂàôÈÄÄÂá∫Áä∂ÊÄÅ‰∏∫ 1ÔºåÂê¶Âàô‰∏∫ 0 Ôºö

@example
@c file eg/prog/egrep.awk
END @{
    exit (total == 0)
@}
@c endfile
@end example

@code{usage()} ÂáΩÊï∞Áî®Êù•Âú®ËæìÂÖ•Êó†ÊïàÈÄâÈ°πÁöÑÊó∂ÂÄôÊâìÂç∞‰ΩøÁî®‰ø°ÊÅØÔºåÁÑ∂ÂêéÈÄÄÂá∫Ôºö

@example
@c file eg/prog/egrep.awk
function usage()
@{
    print("Usage: egrep [-csvil] [-e pat] [files ...]") > "/dev/stderr"
    print("\n\tegrep [-csvil] pat [files ...]") > "/dev/stderr"
    exit 1
@}
@c endfile
@end example


@node Id Program
@subsection ÊâìÂç∞Áî®Êà∑‰ø°ÊÅØ

@cindex printing, user information
@cindex users, information about, printing
@cindex @command{id} utility
@command{id} Â∑•ÂÖ∑ÂàóÂá∫Áî®Êà∑ÁöÑÁúüÂÆû‰∏éÊúâÊïàÁöÑÁî®Êà∑ ID ÂÄºÔºåÁúüÂÆû‰∏éÊúâÊïàÁöÑÁªÑ ID ÂÄºÔºåÂ¶ÇÊûúÊúâÁöÑËØùÔºåÂåÖÂê´Áî®Êà∑ÁöÑÁªÑÈõÜ„ÄÇ@command{id} Âè™ÊúâÂú®ÂÆÉÂêå‰∫éÁúüÂÆûÁöÑID ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊâçÊâìÂç∞ÊúâÊïàÁöÑÁî®Êà∑ ID ‰∏éÁªÑ ID„ÄÇÂ¶ÇÊûúÂèØËÉΩÔºå@command{id} ‰πüÊèê‰æõ‰∫ÜÁõ∏Â∫îÁöÑÂâçÊà∑‰∏éÁªÑÂêç„ÄÇËæìÂá∫ÂèØËÉΩÂ¶Ç‰∏ãÔºö

@example
$ @kbd{id}
@print{} uid=1000(arnold) gid=1000(arnold) groups=1000(arnold),4(adm),7(lp),27(sudo)
@end example

@cindex @code{PROCINFO} array, and user and group ID numbers
ËøôÈáåÁöÑ‰ø°ÊÅØ‰∏ÄÈÉ®‰ªΩÊòØÁî± @command{gawk} ÁöÑ @code{PROCINFO} Êï∞ÁªÑÊù•Êèê‰æõÁöÑÔºàÊü•Áúã @pxref{Built-in Variables}Ôºâ„ÄÇ‰ΩÜÊòØÔºå@command{id} Â∑•ÂÖ∑‰ºöÊèê‰æõÊØîÂçïÁ∫ØÁöÑÊï∞ÁªÑÊõ¥Â•ΩÁöÑËæìÂá∫„ÄÇ

ËøôÈáåÊòØ @command{id} ÁöÑ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁâàÊú¨ÔºåÁî® @command{awk} ÂÜôÊàê„ÄÇÂÆÉ‰ΩøÁî®Êù•Ëá™‰∫é @ref{Library Functions}ÔºåÁöÑÁî®Êà∑Êï∞ÊçÆÂ∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Passwd Functions}Ôºâ ‰ª•ÂèäÁªÑÊï∞ÊçÆÂ∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Group Functions}Ôºâ„ÄÇ

Á®ãÂ∫èÁõ∏ÂΩìÁõ¥Êé•„ÄÇÊâÄÊúâÁöÑÂ∑•‰ΩúÈÉΩÂú® @code{BEGIN} ËßÑÂàô‰∏≠ÂÆåÊàê„ÄÇÁî®Êà∑‰ª•ÂèäÁªÑ ID ÂÄº‰ªé @code{PROCINFO} ‰∏≠ÂèñÂæó„ÄÇ‰ª£Á†ÅÊòØÂèØÈáçÂ§çÁöÑ„ÄÇÂú®Áî®Êà∑Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÁî®‰∫éÁúüÂÆûÁî®Êà∑ID ÁöÑÈ°πË¢´Áî® @samp{:} ÂàÜÂâ≤Êàê‰∏çÂêåÁöÑÈÉ®ÂàÜ„ÄÇÁ¨¨‰∏ÄÈ°πÊòØÂêçÂ≠ó„ÄÇÁõ∏Â∫îÁöÑ‰ª£Á†Å‰πüÂèØ‰ª•Áî®‰∫éÊúâÊïàÁöÑÁî®Êà∑ ID ‰∏éÁªÑÁõ∏ÂÖ≥ÁöÑÂÄºÔºö

@cindex @code{id.awk} program
@example
@c file eg/prog/id.awk
# id.awk --- implement id in awk
#
# Requires user and group library functions
@c endfile
@ignore
@c file eg/prog/id.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised February 1996
# Revised May 2014
# Revised September 2014

@c endfile
@end ignore
@c file eg/prog/id.awk
# output is:
# uid=12(foo) euid=34(bar) gid=3(baz) \
#             egid=5(blat) groups=9(nine),2(two),1(one)

@group
BEGIN @{
    uid = PROCINFO["uid"]
    euid = PROCINFO["euid"]
    gid = PROCINFO["gid"]
    egid = PROCINFO["egid"]
@end group

    printf("uid=%d", uid)
    pw = getpwuid(uid)
    pr_first_field(pw)

    if (euid != uid) @{
        printf(" euid=%d", euid)
        pw = getpwuid(euid)
        pr_first_field(pw)
    @}

    printf(" gid=%d", gid)
    pw = getgrgid(gid)
    pr_first_field(pw)

    if (egid != gid) @{
        printf(" egid=%d", egid)
        pw = getgrgid(egid)
        pr_first_field(pw)
    @}

    for (i = 1; ("group" i) in PROCINFO; i++) @{
        if (i == 1)
            printf(" groups=")
        group = PROCINFO["group" i]
        printf("%d", group)
        pw = getgrgid(group)
        pr_first_field(pw)
        if (("group" (i+1)) in PROCINFO)
            printf(",")
    @}

    print ""
@}

function pr_first_field(str,  a)
@{
    if (str != "") @{
        split(str, a, ":")
        printf("(%s)", a[1])
    @}
@}
@c endfile
@end example

Âú® @code{for} Âæ™ÁéØ‰∏≠ÁöÑÊµãËØïÂÄºÂæóÊ≥®ÊÑè‰∏Ä‰∏ã„ÄÇ‰ªªÊÑèÂú® @code{PROCINFO} Êï∞ÁªÑ‰∏≠ÁöÑË°•ÂÖÖÁöÑÂÄºÈÉΩÊúâÁ¥¢Âºï‰ªé @code{"group1"} Âà∞Êüê‰∏™ÂÄº @var{N} ÁöÑ @code{"group@var{N}"}ÔºàÂç≥Ë°•ÂÖÖÁªÑÁöÑÊÄªÊï∞Ôºâ„ÄÇ‰ΩÜÊòØÔºåÊàë‰ª¨‰∫ãÂÖà‰∏çÁü•ÈÅìÊúâÂ§öÂ∞ë‰∏™ËøôÊ†∑ÁöÑÁªÑ„ÄÇ

Âæ™ÁéØ‰ªé 1 ÂºÄÂßãÔºåÂ∞ÜÂÄºÊòØ @code{"group"} ËøõË°åËøûÊé•ÔºåÁÑ∂Âêé‰ΩøÁî® @code{in} Êìç‰ΩúÁ¨¶Êù•Êü•ÁúãÁõ∏Â∫îÁöÑÂÄºÊòØÂê¶Âú®Êï∞ÁªÑ‰∏≠ÔºàÊü•Áúã @ref{Reference to Elements}Ôºâ„ÄÇÊúÄÂêéÔºå@code{i} ‰ºöÈÄíÂ¢ûË∂äËøáÊï∞ÁªÑ‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™ÁªÑÔºåÁÑ∂ÂêéÂæ™ÁéØÈÄÄÂá∫„ÄÇ

Âæ™ÁéØÂú®@emph{Ê≤°Êúâ}Ë°•ÂÖÖÁªÑÁöÑÊÉÖÂÜµ‰∏ã‰πüÊòØÊ≠£Á°ÆÁöÑÔºåËøôÊ†∑Á¨¨‰∏ÄÊ¨°ÊµãËØïÊó∂Êù°‰ª∂Â∞±‰∏∫ falseÔºåËøôÊ†∑Âæ™ÁéØÂ∞±Ê†πÊú¨Ê≤°ÊúâÊâßË°åËøá„ÄÇ

@code{pr_first_field()} ÂáΩÊï∞ÁÆÄÂçïÂú∞ÈöîÁ¶ª‰∏Ä‰∫õË¶ÅÈáçÂ§ç‰ΩøÁî®ÁöÑ‰ª£Á†ÅÔºå‰ΩøÂæóÊï¥‰∏™Á®ãÂ∫èÊõ¥Áü≠Êõ¥Ê∏ÖÊô∞„ÄÇÁâπÂà´ÊòØÂ∞ÜÊ£ÄÊµãÁ©∫‰∏≤ÁöÑ‰ª£Á†ÅÁßªËøõ‰∏™ÂáΩÊï∞‰∏≠„ÄÇ


@node Split Program
@subsection Â∞ÜÂ§ßÊñá‰ª∂ÂàÜÁâá

@c FIXME: One day, update to current POSIX version of split

@cindex files, splitting
@cindex @code{split} utility
@command{split} Â∑•ÂÖ∑Â∞ÜÂ§ßÁöÑÊñáÊú¨Êñá‰ª∂ÂàÜÂâ≤ÊàêÊõ¥Â∞è‰∫ÜÂá†‰∏™„ÄÇÁî®Ê≥ïÂ¶Ç‰∏ãÔºö 
@footnote{ËøôÊòØ‰º†ÁªüÁöÑÁî®Ê≥ï„ÄÇPOSIX ÁöÑÁî®Ê≥ïÊòØ‰∏çÂêåÁöÑÔºå‰ΩÜÊòØÂØπ‰∫éË¶ÅÁ®ãÂ∫èË¶ÅËØ¥ÊòéÁöÑ‰∏úË•øÊòØÊó†ÂÖ≥ÁöÑ„ÄÇ}

@display
@command{split} [@code{-@var{count}}] [@var{file}] [@var{prefix}]
@end display

ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåËæìÂá∫Êñá‰ª∂ÂëΩÂêç‰∏∫ @file{xaa}Ôºå@file{xab} Á≠âÁ≠â„ÄÇÊØè‰∏™Êñá‰ª∂Êúâ‰∏ÄÂçÉË°åÔºåÊúÄÂêé‰∏Ä‰∏™Êñá‰ª∂‰æãÂ§ñ „ÄÇ‰∏∫‰∫ÜÊØè‰∏™Êñá‰ª∂‰∏≠ÁöÑË°åÊï∞ÔºåÂú®ÂëΩ‰ª§Ë°å‰∏≠ËæìÂÖ•‰∏Ä‰∏™Êï∞ÂÄºÔºåÂâçÈù¢Â∏¶‰∏Ä‰∏™ÂáèÂè∑ÔºàÂ¶Ç @samp{-500} ‰ΩøÊØè‰∏™Êñá‰ª∂‰∏≠Êúâ 500 Ë°åÔºåËÄå‰∏çÊòØ 1000 Ë°åÔºâ„ÄÇ‰∏∫‰∫ÜÊîπÂèòËæìÂá∫Êñá‰ª∂ÁöÑÂêçÂ≠ó‰∏∫ËØ∏Â¶Ç @file{myfileaa}Ôºå@file{myfileab} Á≠âÁ≠âÔºåÂàôÊèê‰æõ‰∏Ä‰∏™È¢ùÂ§ñÁöÑÂèÇÊï∞Êù•ÊåáÂÆö@value{FN}ÁöÑÂâçÁºÄ„ÄÇ

‰∏ãÈù¢ÊòØ @command{awk} ÁâàÊú¨ÁöÑ split„ÄÇÂÆÉ‰ΩøÁî®Âú® @ref{Ordinal Functions}Ôºå‰∏≠ÁöÑ @code{ord()} ‰∏é @code{chr()} ÂáΩÊï∞„ÄÇ

Á®ãÂ∫èÈ¶ñÂÖàËÆæÁΩÆÂÆÉÁöÑÈªòËÆ§Ë°å‰∏∫ÔºåÁÑ∂ÂêéÊµãËØï‰ª•Á°Æ‰øù‰∏ç‰ºöÊúâÂ§™Â§öÁöÑÂèÇÊï∞„ÄÇÁÑ∂Âêé‰æùÊ¨°Êü•ÁúãÊØè‰∏™ÂèÇÊï∞„ÄÇÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂèØ‰ª•‰∏Ä‰∏™Ë¥üÂè∑ÔºåÂêéÈù¢Ë∑ü‰∏Ä‰∏™Êï∞ÂÄº„ÄÇÂ¶ÇÊûúÊûúÔºåËøôÁúãËµ∑Êù•Â∞±ÂÉèÊòØ‰∏Ä‰∏™Ë¥üÊï∞ÔºåÊâÄ‰ª•‰ΩøÂÖ∂‰∏∫Ê≠£Êï∞ÔºåÂç≥ÊòØË°åÁöÑÊï∞ÂÄº„ÄÇ@value{DF}ÂêçË¢´ÂøΩÁï•ËøáÂéªÔºåÊúÄÂêé‰∏Ä‰∏™ÂèÇÊï∞Áî®‰∫éËæìÂá∫@value{FN}ÁöÑÂâçÁºÄÔºö

@cindex @code{split.awk} program
@example
@c file eg/prog/split.awk
# split.awk --- do split in awk
#
# Requires ord() and chr() library functions
@c endfile
@ignore
@c file eg/prog/split.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised slightly, May 2014

@c endfile
@end ignore
@c file eg/prog/split.awk
# usage: split [-count] [file] [outname]

BEGIN @{
    outfile = "x"    # default
    count = 1000
    if (ARGC > 4)
        usage()

    i = 1
    if (i in ARGV && ARGV[i] ~ /^-[[:digit:]]+$/) @{
        count = -ARGV[i]
        ARGV[i] = ""
        i++
    @}
    # test argv in case reading from stdin instead of file
    if (i in ARGV)
        i++    # skip datafile name
    if (i in ARGV) @{
        outfile = ARGV[i]
        ARGV[i] = ""
    @}

    s1 = s2 = "a"
    out = (outfile s1 s2)
@}
@c endfile
@end example

‰∏ã‰∏Ä‰∏™ËßÑÂàôÂÅöÂâ©‰∏ãÁöÑÂ§ßÈÉ®ÂàÜÁöÑ‰∫ãÊÉÖÔºå@code{tcount}Ôºàtemporary countÔºâË∑üË∏™ÂΩìÂâçÂ∑≤ÁªèÊúâÂ§öÂ∞ëË°åËæìÂá∫Âà∞‰∫ÜËæìÂá∫Êñá‰ª∂‰∏≠„ÄÇÂ¶ÇÊûúÂÖ∂Â§ß‰∫é @code{count}ÔºåÂàôË¶ÅÂÖ≥Èó≠ÂΩìÂâçÁöÑÊñá‰ª∂ÁÑ∂ÂêéÂºÄÂêØ‰∏Ä‰∏™Êñ∞ÁöÑÊñá‰ª∂„ÄÇ@code{s1} ‰∏é @code{s2} Ë∑üË∏™ÂΩìÂâçÁöÑÊñá‰ª∂ÂêçÂâçÁºÄ„ÄÇÂ¶ÇÊûú‰ªñ‰ª¨‰∏§‰∏™ÈÉΩÊòØ @samp{z}ÔºåÂàôË°®Á§∫Êñá‰ª∂Â§™Â§ß‰∫Ü„ÄÇÂê¶ÂàôÔºå@code{s1} ÁßªÂä®Âà∞Â≠óÊØçË°®‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™Â≠óÊØçÔºå@code{s2} Âàô‰ªé @samp{a} ÂºÄÂßãÔºö

@c else on separate line here for page breaking
@example
@c file eg/prog/split.awk
@{
    if (++tcount > count) @{
        close(out)
        if (s2 == "z") @{
            if (s1 == "z") @{
                printf("split: %s is too large to split\n",
                       FILENAME) > "/dev/stderr"
                exit 1
            @}
            s1 = chr(ord(s1) + 1)
            s2 = "a"
        @}
@group
        else
            s2 = chr(ord(s2) + 1)
@end group
        out = (outfile s1 s2)
        tcount = 1
    @}
    print > out
@}
@c endfile
@end example

@noindent
@code{usage()} ÂáΩÊï∞ÁÆÄÂçïÂú∞ÊâìÂç∞ÈîôËØØÂπ∂ËæìÂá∫Ôºö

@example
@c file eg/prog/split.awk
function usage()
@{
    print("usage: split [-num] [file] [outname]") > "/dev/stderr"
    exit 1
@}
@c endfile
@end example

Ëøô‰∏™Á®ãÂ∫èÁ®ãÂ∫èÊúâ‰∏ÄÁÇπÊªëÂ§¥Ôºå‰ªñ‰æùËµñ‰∫é @command{awk} Êù•Ëá™Âä®ÂÖ≥Èó≠ÊúÄÂêé‰∏Ä‰∏™Êñá‰ª∂ÔºåËÄå‰∏çÊòØÂú® @code{END} ËßÑÂàô‰∏≠Êù•Â§ÑÁêÜ„ÄÇÂêåÊó∂ÔºåÂÆÉ‰πüÂÅáËÆæÂ≠óÊØçÂú®Â≠óÁ¨¶ÈõÜ‰∏≠ÊòØËøûÁª≠ÁöÑÔºåËøôÂú® EBCDIC ÁöÑÁ≥ªÁªü‰∏≠ÊòØ‰∏çÊàêÁ´ãÁöÑ„ÄÇ

@ifset FOR_PRINT
‰Ω†ÂèØËÉΩ‰ºöËÄÉËôëÊÄé‰πàÈÅøÂÖç‰ΩøÁî® @code{ord()} Âíå @code{chr()}ÔºõËøô‰πüËÉΩÈÄöËøáÂíåËß£ÂÜ≥ EBCDIC ÈóÆÈ¢òÂêåÊ†∑ÁöÑÊñπÂºèËß£ÂÜ≥„ÄÇ
@end ifset


@node Tee Program
@subsection Â∞ÜËæìÂá∫Â§çÂà∂Âà∞Â§ö‰∏™Êñá‰ª∂‰∏≠

@cindex files, multiple@comma{} duplicating output into
@cindex output, duplicating into files
@cindex @code{tee} utility
@code{tee} Á®ãÂ∫èÊòØ‰∏Ä‰∏™‚ÄúÁÆ°ÈÅìÈÄÇÈÖçÂô®‚Äù„ÄÇ@code{tee} Â∞Ü‰ªñÁöÑÊ†áÂáÜËæìÂá∫Âà∞ÂÆÉÁöÑÊ†áÂáÜËæìÂá∫‰∏≠ÔºåÂπ∂Â∞ÜÂÖ∂Â§çÂà∂Âà∞ÂëΩ‰ª§Ë°å‰∏≠Êãâ‰∏ÅÊåáÂÆöÁöÑÊñá‰ª∂Âêç‰∏≠„ÄÇÂÆÉÁöÑÁî®Ê≥ïÂ¶Ç‰∏ãÔºö

@display
@command{tee} [@option{-a}] @var{file} @dots{}
@end display

@option{-a} ÈÄâÈ°πÂëäËØâ @code{tee} Â∞ÜÂÜÖÂÆπÈôÑÂä†Âà∞ÂëΩ‰ª§ÁöÑÊñá‰ª∂‰∏≠ÔºåËÄå‰∏çÊòØÂ∞ÜËøô‰∫õÊñá‰ª∂Ë°åÊ∏ÖÈô§ÂÜçÈáçÊñ∞ÂºÄÂßã„ÄÇ

@code{BEGIN} ËßÑÂàôÈ¶ñÂÖàÁîüÊàêÊâÄÊúâÂëΩ‰ª§Ë°åÂèÇÊï∞ÁöÑÂ§çÊú¨Âà∞Âêç‰∏∫ @code{copy} ÁöÑÊï∞ÁªÑ‰∏≠„ÄÇ@code{ARGV[0]} ÊòØ‰∏çÈúÄË¶ÅÁöÑÔºåÊâÄ‰ª•ÂÆÉ‰∏ç‰ºöË¢´Â§çÂà∂„ÄÇ@code{tee} ‰∏çÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® @code{ARGV} Âõ†‰∏∫ @command{awk} ‰ºöÂ∞ùËØïÂ∞Ü @code{ARGV} ‰∏≠ÁöÑ@value{FN}ÂΩìÊàêËæìÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇ

@cindex flag variables
Â¶ÇÊûúÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ @option{-a}ÔºåÁÑ∂ÂêéÊ†áÂøóÂèòÈáè @code{append} Ë¢´ËÆæÁΩÆ‰∏∫ trueÔºå@code{ARGV[1]} ‰∏é @code{copy[1]} ‰∏§‰∏™ÂÖÉÁ¥†ÈÉΩË¢´Âà†Èô§„ÄÇÂ¶ÇÊûú @code{ARGC} Â∞è‰∫é 2ÔºåÂàôË°®Á§∫Ê≤°ÊúâÊèê‰æõ@value{FN}ÔºåÂàô @code{tee} ‰ºöÊâìÂç∞‰∏Ä‰∏™‰ΩøÁî®‰ø°ÊÅØÁÑ∂ÂêéÈÄÄÂá∫„ÄÇÊúÄÂêéÔºå@command{awk} Ë¢´Âº∫Âà∂‰ªéÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñÊï∞ÊçÆÔºåÂè™Ë¶ÅÂ∞Ü @code{ARGV[1]} ÁöÑÂÄºËÆæÁΩÆ‰∏∫ @code{"-"}ÔºåÂêåÊó∂ @code{ARGC} ËÆæÁΩÆ‰∏∫ 2 Ôºö

@cindex @code{tee.awk} program
@example
@c file eg/prog/tee.awk
# tee.awk --- tee in awk
#
# Copy standard input to all named output files.
# Append content if -a option is supplied.
#
@c endfile
@ignore
@c file eg/prog/tee.awk
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised December 1995

@c endfile
@end ignore
@c file eg/prog/tee.awk
BEGIN @{
    for (i = 1; i < ARGC; i++)
        copy[i] = ARGV[i]

    if (ARGV[1] == "-a") @{
        append = 1
        delete ARGV[1]
        delete copy[1]
        ARGC--
    @}
    if (ARGC < 2) @{
        print "usage: tee [-a] file ..." > "/dev/stderr"
        exit 1
    @}
    ARGV[1] = "-"
    ARGC = 2
@}
@c endfile
@end example

‰∏ãÈù¢ÁÆÄÂçïÁöÑËßÑÂàôÊâßË°åÊâÄÊúâÁöÑÂ∑•‰Ωú„ÄÇÁî±‰∫éÊ≤°ÊúâÊ®°ÂºèÔºåÊâÄ‰ª•ÂÆÉ‰ºöÂØπÊØè‰∏Ä‰∏™ËæìÂÖ•Ë°åÈÉΩÊâßË°å„ÄÇËßÑÂàôÁöÑÊâßË°å‰ΩìÂè™ÊòØÁÆÄÂçïÂú∞ÊâìÂç∞Ë°åÂà∞ÊØè‰∏™ÂëΩ‰ª§Ë°å‰∏äÁöÑÊñá‰ª∂ÔºåÁÑ∂ÂêéÂÜçÊâìÂç∞Âà∞Ê†áÂáÜËæìÂá∫‰∏≠Ôºö

@example
@c file eg/prog/tee.awk
@{
    # moving the if outside the loop makes it run faster
    if (append)
        for (i in copy)
            print >> copy[i]
    else
        for (i in copy)
            print > copy[i]
    print
@}
@c endfile
@end example

@noindent
‰πüÂèØ‰ª•Ëøô‰πàÊù•ÂÜôÂæ™ÁéØÔºö

@example
for (i in copy)
    if (append)
        print >> copy[i]
    else
        print > copy[i]
@end example

@noindent
ËøôÊ†∑Êõ¥Á≤æÁÆÄÔºå‰ΩÜÊòØÂç¥Ê≤°ÊúâËøô‰πàÈ´òÊïà„ÄÇ@samp{if} ‰ºöÂØπÊØè‰∏™ËÆ∞ÂΩï‰ª•ÂèäÊØè‰∏™ËæìÂá∫Êñá‰ª∂ÈÉΩËøõË°åÊµãËØï„ÄÇÈÄöËøáÂ§çÂà∂Âæ™ÁéØ‰ΩìÔºå@samp{if} ÂØπÊØè‰∏™ËæìÂÖ•ËÆ∞ÂΩïÂè™ÊâßË°å‰∏ÄÊ¨°ÊµãËØï„ÄÇÂ¶ÇÊûúÊúâ @var{N} ‰∏™ËæìÂÖ•ËÆ∞ÂΩïÔºåÂπ∂‰∏îÊúâ @var{M} ‰∏™ËæìÂá∫Êñá‰ª∂ÔºåÁ¨¨‰∏ÄÁßçÊñπÊ≥ïÂè™ÊâßË°å @var{N} ‰∏™ @samp{if} ËØ≠Âè•ÔºåËÄåÁ¨¨‰∫åÁßçÊñπÊ≥ï‰ºöÊâßË°å @var{N}@code{*}@var{M} ‰∏™ @samp{if} ËØ≠Âè•„ÄÇ

ÊúÄÂêéÔºå@code{END} ËßÑÂàôÈÄöËøáÂÖ≥Èó≠ÊâÄÊúâÁöÑËæìÂá∫Êñá‰ª∂Êù•ËøõË°åÊ∏ÖÁêÜÔºö

@example
@c file eg/prog/tee.awk
END @{
    for (i in copy)
        close(copy[i])
@}
@c endfile
@end example

@node Uniq Program
@subsection ÊâìÂç∞ÂéªÈáçÊñáÊú¨Ë°å

@c FIXME: One day, update to current POSIX version of uniq

@cindex printing, unduplicated lines of text
@cindex text@comma{} printing, unduplicated lines of
@cindex @command{uniq} utility
@command{uniq} Â∑•ÂÖ∑‰ªéÂÆÉÁöÑÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñÁªèËøáÊéíÂ∫èÁöÑË°åÔºåÂπ∂‰∏îÈªòËÆ§Âú∞ÁßªÈô§ÈáçÂ§çÁöÑË°å„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂÆÉÂè™ÊâìÂç∞ÂîØ‰∏ÄÁöÑË°å‚Äî‚ÄîÂ¶ÇÊ≠§ÂêçÂ≠óÊâÄË°®Á§∫ÁöÑÊÑèÊÄù„ÄÇ@command{uniq} ÊúâÂæàÂ§öÁöÑÈÄâÈ°π„ÄÇÂÖ∂‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö

@display
@command{uniq} [@option{-udc} [@code{-@var{n}}]] [@code{+@var{n}}] [@var{inputfile} [@var{outputfile}]]
@end display

@command{uniq} ÁöÑÈÄâÈ°πÂ¶Ç‰∏ãÔºö

@table @code
@item -d
Âè™ÊâìÂç∞ÈáçÂ§çÁöÑÔºàÊúâÂ§çÊú¨ÔºâÁöÑË°å„ÄÇ

@item -u
Âè™ÊâìÂç∞‰∏çÈáçÂ§çÁöÑÔºàÂîØ‰∏ÄÁöÑÔºâË°å„ÄÇ

@item -c
ÁªüËÆ°Ë°å„ÄÇËøô‰∏™ÈÄâÈ°π‰ºöË¶ÜÁõñ @option{-d} ‰∏é @option{-u}„ÄÇÈáçÂ§çÁöÑ‰∏éÈùûÈáçÂ§çÁöÑË°åÈÉΩ‰ºöË¢´ÁªüËÆ°„ÄÇ

@item -@var{n}
Âú®ÊØîËæÉË°åÂâçË∑≥Ëøá @var{n} ‰∏™Âüü„ÄÇÂüüÁöÑÂÆö‰πâ‰∏é @command{awk} ÁöÑÈªòËÆ§ÁöÑÁ±ª‰ººÔºöË¢´‰∏ÄËøûÁª≠ÁöÑÁ©∫Ê†º‰∏é/ÊàñËÄÖ TABs ÂàÜÈöîÁöÑÈùûÁ©∫ÁôΩÂ≠óÁ¨¶„ÄÇ

@item +@var{n}
Âú®ÊØîËæÉË°åÂâçË∑≥Ëøá @var{n} ‰∏™Â≠óÁ¨¶„ÄÇÈÄöËøá @samp{-@var{n}} ÊåáÂÆöÁöÑ‰ªª‰ΩïÂüü‰ºöÈ¶ñÂÖàË¢´Ë∑≥Ëøá„ÄÇ

@item @var{inputfile}
Êï∞ÊçÆ‰ªéÂú®ÂëΩ‰ª§Ë°å‰∏≠ÊåáÂÆöÁöÑÊñá‰ª∂‰∏≠ËØªÂèñÔºåËÄå‰∏çÊòØ‰ªéÊ†áÂáÜËæìÂÖ•ËØªÂèñ„ÄÇ

@item @var{outputfile}
Â∞Ü‰∫ßÁîüÁöÑËæìÂá∫ÂèëÈÄÅÂà∞ @var{outputfile} ÂëΩÂêçÁöÑÊñá‰ª∂‰∏≠ÔºåËÄå‰∏çÊòØÂà∞Ê†áÂáÜËæìÂá∫‰∏≠„ÄÇ
@end table

‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÔºå@command{uniq} ÁöÑË°å‰∏∫Â∞±ÂÉè @option{-d} ‰∏é @option{-u} ‰∏§‰∏™ÈÄâÈ°πÈÉΩÊåáÂÆöÁöÑ‰∏ÄÊ†∑„ÄÇ

@command{uniq} ‰ΩøÁî® @code{getopt()} Â∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Getopt Function}Ôºâ‰ª•Âèä @code{join()} Â∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Join Function}Ôºâ„ÄÇ

Á®ãÂ∫è‰ª• @code{usage()} ÂáΩÊï∞ÂºÄÂßã‰ª•Âèä‰∏Ä‰∫õÂÜôÂú®Ê≥®Èáä‰∏≠ÁöÑÁÆÄÂçïÁöÑÈÄâÈ°πÂèäÂÖ∂Âê´‰πâÁöÑËØ¥Êòé„ÄÇ@code{BEGIN} ËßÑÂàôÂ§ÑÂëΩ‰ª§Ë°åÂèÇÊï∞‰∏éÈÄâÈ°π„ÄÇÂÆÉ‰ΩøÁî®‰∫Ü‰∏Ä‰∏™ÊäÄÂ∑ßÊù•ËÆ© @code{getopt()} Â§ÑÁêÜÂ¶Ç @samp{-25} Ëøô‰∏™ÁöÑÈÄâÈ°πÔºåÂ∞ÜËøôÊ†∑ÁöÑÈÄâÈ°πÂΩìÂÅöÊòØÂ≠óÊØç @samp{2} ÁöÑÈÄâÈ°π‰∏éÂÖ∂ÂèÇÊï∞ @samp{5}„ÄÇÂ¶ÇÊûúÂÆûÈôÖ‰∏äÊèê‰æõ‰∫Ü‰∏§‰∏™ÊàñËÄÖÂ§ö‰∏™Êï∞Â≠óÔºà@code{Optarg} ÁúãËµ∑Êù•ÂÉè‰∏Ä‰∏™Êï∞ÂÄºÔºâÔºå@code{Optarg} ‰ºö‰∏éÈÄâÈ°πÊï∞Â≠ó‰∏ÄËøûÊé•ÔºåÁÑ∂ÂêéÁªìÊûú‰∏é 0 Áõ∏Âä†Êù•‰ΩøÂÖ∂ËΩ¨Êç¢‰∏∫Êï∞ÂÄº„ÄÇÂ¶ÇÊûúÂè™Êúâ‰∏Ä‰∏™Êï∞ÂÄºÂú®ÈÄâÈ°π‰∏≠Ôºå@code{Optarg} Â∞±‰∏çÈúÄË¶Å‰∫Ü„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@code{Optind} ÂøÖÈ°ªË¢´ÈÄíÂáèÔºåËøôÊ†∑ @code{getopt()} ‰ºöÂú®‰∏ã‰∏ÄËΩÆ‰∏≠Â§ÑÁêÜÂÆÉ„ÄÇËøô‰∏™‰ª£Á†ÅÁ°ÆÂÆûÁé©‰∫Ü‰∏ÄÁÇπËä±Êãõ„ÄÇ

Â¶ÇÊûúÊ≤°ÊúâÊèê‰æõÈÄâÈ°πÔºåÂàô‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑË°å‰∏∫ÔºåÂç≥ÊâìÂç∞ÈáçÂ§ç‰∏éÈùûÈáçÂ§çÁöÑË°å„ÄÇÂ¶ÇÊûúÊèê‰æõ‰∫ÜËæìÂá∫Êñá‰ª∂ÔºåÂ∞ÜÂÖ∂Ë¢´ËµãÂÄºÁªô @code{outputfile}„ÄÇÂú®Êó©ÊúüÔºå@code{outputfile} Ë¢´ÂàùÂßãÂåñ‰∏∫Ê†áÂáÜËæìÂá∫ÔºåÂç≥ @file{/dev/stdout}Ôºö

@cindex @code{uniq.awk} program
@example
@c file eg/prog/uniq.awk
@group
# uniq.awk --- do uniq in awk
#
# Requires getopt() and join() library functions
@end group
@c endfile
@ignore
@c file eg/prog/uniq.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
@c endfile
@end ignore
@c file eg/prog/uniq.awk

function usage()
@{
    print("Usage: uniq [-udc [-n]] [+n] [ in [ out ]]") > "/dev/stderr"
    exit 1
@}

# -c    count lines. overrides -d and -u
# -d    only repeated lines
# -u    only nonrepeated lines
# -n    skip n fields
# +n    skip n characters, skip fields first

BEGIN @{
    count = 1
    outputfile = "/dev/stdout"
    opts = "udc0:1:2:3:4:5:6:7:8:9:"
    while ((c = getopt(ARGC, ARGV, opts)) != -1) @{
        if (c == "u")
            non_repeated_only++
        else if (c == "d")
            repeated_only++
        else if (c == "c")
            do_count++
        else if (index("0123456789", c) != 0) @{
            # getopt() requires args to options
            # this messes us up for things like -5
            if (Optarg ~ /^[[:digit:]]+$/)
                fcount = (c Optarg) + 0
            else @{
                fcount = c + 0
                Optind--
            @}
        @} else
            usage()
    @}

    if (ARGV[Optind] ~ /^\+[[:digit:]]+$/) @{
        charcount = substr(ARGV[Optind], 2) + 0
        Optind++
    @}

    for (i = 1; i < Optind; i++)
        ARGV[i] = ""

    if (repeated_only == 0 && non_repeated_only == 0)
        repeated_only = non_repeated_only = 1

    if (ARGC - Optind == 2) @{
        outputfile = ARGV[ARGC - 1]
        ARGV[ARGC - 1] = ""
    @}
@}
@c endfile
@end example

‰∏ãÈù¢ÁöÑÂáΩÊï∞ @code{are_equal()} Áî®Êù•Â∞ÜÂΩìÂâçË°åÔºå@code{$0}Ôºå‰∏éÂâç‰∏ÄË°å @code{last} ËøõË°åÊØîËæÉ„ÄÇÂÆÉÂ§ÑÁêÜË¶ÅË∑≥ËøáÁöÑÂüü‰∏éÂ≠óÁ¨¶„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂüüÁªüËÆ°‰ª•ÂèäÂ≠óÁ¨¶ÁªüËÆ°Ôºå@code{are_equal()} ËøîÂõû 1ÔºåÊàñËÄÖ 0ÔºåËøô‰æùËµñ‰∫é @code{last} ‰∏é @code{$0} Â≠ó‰∏≤ÁöÑÁÆÄÂçïÁöÑÊØîËæÉÁªìÊûú„ÄÇ

‰∏çÁÑ∂ÁöÑËØùÔºå‰∫ãÊÉÖ‰ºöÂèòÈáèÊõ¥Âä†Â§çÊùÇ„ÄÇÂ¶ÇÊûúË¶ÅË∑≥ËøáÂüüÔºåÊØè‰∏ÄË°åÈÉΩ‰ºöÁî® @code{split()}ÔºàÊü•Áúã @ref{String Functions}ÔºâÊãÜÂàÜÊàêÊï∞ÁªÑÔºåÁïô‰∏ãÊù•ÁöÑÂüüÁÑ∂ÂêéÂÜçÁî® @code{join()} ÁªÑÂêàÊàê‰∏ÄË°å„ÄÇË¢´ÁªÑÂêàÁöÑË°åÂ≠òÂõû @code{clast} ‰∏é @code{cline} ‰∏≠„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂüüË¶ÅË∑≥ËøáÔºå@code{clast} ‰∏é @code{cline} ÂàôË¢´ËÆæÁΩÆÊàê @code{last} ‰∏é @code{$0}„ÄÇÊúÄÂêéÔºåÂ¶ÇÊûúÊúâÂ≠óÁ¨¶Ë¶ÅË∑≥ËøáÔºå@code{substr()} Áî®‰∫éÊ∏ÖÈô§ @code{clast} ‰∏é @code{cline} ‰∏≠ÂâçÈù¢ @code{count} ‰∏™ÁöÑÂ≠óÁ¨¶„ÄÇ‰∏§‰∏™Â≠ó‰∏≤ÁÑ∂ÂêéËøõË°åÊØîËæÉÔºå@code{are_equal()} ËøîÂõûÊØîËæÉÁöÑÁªìÊûúÔºö

@example
@c file eg/prog/uniq.awk
function are_equal(    n, m, clast, cline, alast, aline)
@{
    if (fcount == 0 && charcount == 0)
        return (last == $0)

    if (fcount > 0) @{
        n = split(last, alast)
        m = split($0, aline)
        clast = join(alast, fcount+1, n)
        cline = join(aline, fcount+1, m)
    @} else @{
        clast = last
        cline = $0
    @}
    if (charcount) @{
        clast = substr(clast, charcount + 1)
        cline = substr(cline, charcount + 1)
    @}

    return (clast == cline)
@}
@c endfile
@end example

‰∏ãÈù¢ÁöÑ‰∏§‰∏™ËßÑÂàôÊòØÁ®ãÂ∫è‰Ωì„ÄÇÁ¨¨‰∏Ä‰∏™Âè™Áî®Âú®Êï∞ÊçÆÁöÑÁ¨¨‰∏ÄË°å„ÄÇÂÆÉÂ∞Ü @code{last} ËÆæÁΩÆ‰∏∫ @code{$0}ÔºåÊâÄ‰ª•ÔºåÂêéÁª≠ÁöÑË°åÊâçÊúâÂèØ‰ª•ÊØîËæÉÁöÑ‰∏úË•ø„ÄÇ

Á¨¨‰∫å‰∏™ËßÑÂàôÊâßË°åÁõ∏Â∫îÁöÑÂ∑•‰Ωú„ÄÇÂèòÈáè @code{equal} ‰∏∫ 1 ÊàñËÄÖ 0ÔºåÂàô‰æùËµñ‰∫é @code{are_equal()} ÁöÑÊØîËæÉÁªìÊûú„ÄÇÂ¶ÇÊûú @command{uniq} Ê≠£Âú®ÁªüËÆ°ÈáçÂ§çÁöÑË°åÔºåËÄåË°åÊòØÁõ∏ÂêåÁöÑÔºåÂàôÂÖ∂‰ºöÈÄíÂ¢û @code{count} ÂèòÈáè„ÄÇÂê¶ÂàôÔºåÂÆÉÊâìÂç∞Ë°åÁÑ∂ÂêéÈáçÊñ∞ËÆæÁΩÆ @code{count}ÔºåÂõ†‰∏∫‰∏§Ë°åÂ∑≤Áªè‰∏çÁõ∏Âêå‰∫Ü„ÄÇ

Â¶ÇÊûú @command{uniq} ‰∏çÂú®ÁªüËÆ°‰∏≠ÔºåËÄåÊØîËæÉÁªìÊûúÊòØÁõ∏ÂêåÁöÑÔºå@code{count} Âàô‰ºöË¢´ÈÄíÂ¢û„ÄÇ‰∏ç‰ºöÊâìÂç∞ËæìÂá∫Ë°åÔºåÂõ†‰∏∫Ë¶ÅÁßªÈô§ÈáçÂ§çÁöÑË°å„ÄÇÂê¶ÂàôÔºåÂ¶ÇÊûú @command{uniq} Ê≠£Âú®ÁªüËÆ°ÈáçÂ§çÁöÑË°åÔºåÂπ∂‰∏îÊúâÁúãÂà∞‰∫ÜÂ§ö‰∫é‰∏ÄË°åÁõ∏ÂêåË°åÔºåÊàñËÄÖÂ¶ÇÊûú @command{uniq} Âú®ÁªüËÆ°ÈùûÈáçÂ§çÁöÑË°åÔºåÂàôÂè™‰ºöËßÅÂà∞‰∏ÄË°åÔºåÁÑ∂ÂêéËØ•Ë°å‰ºöË¢´ÊâìÂç∞ËæìÂá∫ÔºåËÄå @code{count} ‰ºöË¢´ÈáçÁΩÆ„ÄÇ

ÊúÄÂêéÔºå@code{END} ÊâìÂç∞ËæìÂÖ•Êï∞ÊçÆÁöÑÊúÄÂêé‰∏ÄË°åÁöÑËßÑÂàô‰πüÈááÁî®Áõ∏‰ººÁöÑÈÄªËæëÔºö

@example
@c file eg/prog/uniq.awk
NR == 1 @{
    last = $0
    next
@}

@{
    equal = are_equal()

    if (do_count) @{    # overrides -d and -u
        if (equal)
            count++
        else @{
            printf("%4d %s\n", count, last) > outputfile
            last = $0
            count = 1    # reset
        @}
        next
    @}

    if (equal)
        count++
    else @{
        if ((repeated_only && count > 1) ||
            (non_repeated_only && count == 1))
                print last > outputfile
        last = $0
        count = 1
    @}
@}

END @{
    if (do_count)
        printf("%4d %s\n", count, last) > outputfile
    else if ((repeated_only && count > 1) ||
            (non_repeated_only && count == 1))
        print last > outputfile
    close(outputfile)
@}
@c endfile
@end example

@c FIXME: Include this?
@ignore
This program does not follow our recommended convention of naming
global variables with a leading capital letter.  Doing that would
make the program a little easier to follow.
@end ignore

@ifset FOR_PRINT
The logic for choosing which lines to print represents a @dfn{state
machine}, which is ``a device that can be in one of a set number of stable
conditions depending on its previous condition and on the present values
of its inputs.''@footnote{This is the definition returned from entering
@code{define: state machine} into Google.}
Brian Kernighan suggests that
``an alternative approach to state machines is to just read
the input into an array, then use indexing.  It's almost always
easier code, and for most inputs where you would use this, just
as fast.''  Consider how to rewrite the logic to follow this
suggestion.
@end ifset



@node Wc Program
@subsection ÁªüËÆ°

@c FIXME: One day, update to current POSIX version of wc

@cindex counting
@cindex input files, counting elements in
@cindex words, counting
@cindex characters, counting
@cindex lines, counting
@cindex @command{wc} utility
@command{wc}Ôºàword countÔºâÂ∑•ÂÖ∑Áî®Êù•ÁªüËÆ°‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Êñá‰ª∂‰∏≠ÁöÑË°åÔºåÂ≠ó‰∏éÂ≠óÁ¨¶„ÄÇÂÆÉÁöÑÁî®Ê≥ïÂ¶Ç‰∏ãÔºö

@display
@command{wc} [@option{-lwc}] [@var{files} @dots{}]
@end display

Â¶ÇÊûúÂú®ÂëΩ‰ª§Ë°å‰∏≠Ê≤°ÊúâÊåáÂÆöÊñá‰ª∂Ôºå@command{wc} Âàô‰ªéÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñ„ÄÇÂ¶ÇÊûúÊúâÂ§ö‰∏™Êñá‰ª∂ÔºåÂàôÂÆÉ‰ºöÊâìÂç∞ÊâÄÊúâÊñá‰ª∂ÁöÑÊÄªÁöÑÁªüËÆ°‰ø°ÊÅØ„ÄÇ@command{wc} ÁöÑÈÄâÈ°πÂèäÂÖ∂ÊÑè‰πâÂ¶Ç‰∏ãÔºö

@table @code
@item -l
Âè™ÁªüËÆ°Ë°å„ÄÇ

@item -w
Âè™ÁªüËÆ°ÂçïËØç„ÄÇ‰∏Ä‰∏™‚ÄúÂçïËØç‚ÄùÊòØ‰∏Ä‰∏™ËøûÁª≠ÁöÑÈùûÁ©∫ÁôΩÂ≠óÁ¨¶Â≠óÁ¨¶Â∫èÂàóÔºåÁõ∏‰∫í‰πãÈó¥‰ª•Á©∫Ê†º‰∏é/ÊàñËÄÖ TABs Êù•ÂàÜÂâ≤„ÄÇÂπ∏ËøêÁöÑÊòØËøô‰πüÊòØ @command{awk} ÂØπËæìÂÖ•Êï∞ÊçÆËøõË°åÂüüÂàÜÂâ≤ÁöÑÂ∏∏ËßÑÊñπÂºè„ÄÇ

@item -c
Âè™ÁªüËÆ°Â≠óÁ¨¶„ÄÇ
@end table

@command{awk} ‰∏≠ÁöÑ @command{wc} ÂÆûÁé∞ÁâπÂÆö‰ºòÈõÖÔºåÂõ†‰∏∫ @command{awk} Â∑≤Áªè‰∏∫Êàë‰ª¨ÂÅö‰∫ÜÂæàÂ§öÁöÑ‰∫ãÊÉÖ‰∫ÜÔºå@command{awk} Â∞ÜË°åÂàÜÂâ≤ÊàêÂçïËØçÔºàÂç≥ÂüüÔºâÁÑ∂ÂêéÁªüËÆ°ÂÆÉ‰ª¨Ôºå‰πüÁªüËÆ°Ë°åÔºàÂç≥ËÆ∞ÂΩïÔºâÔºåÂÆÉ‰πüÂèØ‰ª•ÂæàÂÆπÊòìÂú∞ÂëäËØâÊàë‰ª¨Ë°åÁöÑÈïøÂ∫¶ÊòØÂ§öÂ∞ë„ÄÇ

Á®ãÂ∫è‰ΩøÁî®Âà∞ @code{getopt()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{Getopt Function}Ôºâ‰ª•ÂèäÊñá‰ª∂ËΩ¨Êç¢ÂáΩÊï∞
ÔºàÊü•Áúã @pxref{Filetrans Function}Ôºâ„ÄÇ

Ëøô‰∏™ÁâàÊú¨‰∏é‰º†ÁªüÁöÑ @command{wc} ÁâàÊú¨Ê≤°Êúâ‰ªÄ‰πàÁâπÂà´ÁöÑ‰∏çÂêåÔºöÂÆÉÊÄªÊòØÊåâË°åÔºåÂçïËØçÔºåÂ≠óÁ¨¶ËøôÊ†∑ÁöÑÈ°∫Â∫èÊù•ÊâìÂç∞ÁªüËÆ°„ÄÇ‰º†ÁªüÁöÑÁâàÊú¨‰ºöÊ≥®ÊÑèÂà∞ @option{-l}Ôºå@option{-w}Ôºå@option{-c} ÈÄâÈ°πÂú®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÈ°∫Â∫èÔºåÂπ∂‰ª•ÈÄâÈ°πÁöÑÈ°∫Â∫èÊù•ÊâìÂç∞ÁªüËÆ°„ÄÇ

@code{BEGIN} ËßÑÂàô‰ΩúÂèÇÊï∞Â§ÑÁêÜ„ÄÇÂèòÈáè @code{print_total} Âú®ÂëΩ‰ª§Ë°å‰∏≠ÊúâÂ§ö‰∫é‰∏Ä‰∏™Êñá‰ª∂ÁöÑÊÉÖÂÜµ‰∏ã‰∏∫ trueÔºö

@cindex @code{wc.awk} program
@example
@c file eg/prog/wc.awk
# wc.awk --- count lines, words, characters
@c endfile
@ignore
@c file eg/prog/wc.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
@c endfile
@end ignore
@c file eg/prog/wc.awk

# Options:
#    -l    only count lines
#    -w    only count words
#    -c    only count characters
#
# Default is to count lines, words, characters
#
# Requires getopt() and file transition library functions

BEGIN @{
    # let getopt() print a message about
    # invalid options. we ignore them
    while ((c = getopt(ARGC, ARGV, "lwc")) != -1) @{
        if (c == "l")
            do_lines = 1
        else if (c == "w")
            do_words = 1
        else if (c == "c")
            do_chars = 1
    @}
    for (i = 1; i < Optind; i++)
        ARGV[i] = ""

    # if no options, do all
    if (! do_lines && ! do_words && ! do_chars)
        do_lines = do_words = do_chars = 1

    print_total = (ARGC - i > 1)
@}
@c endfile
@end example

@code{beginfile()} ÂáΩÊï∞ÂæàÁÆÄÂçïÔºåÂÆÉ‰ªÖÊòØÊääË°åÊï∞ÔºåÂçïËØçÊï∞‰∏éÂ≠óÁ¨¶Êï∞ËÆæÁΩÆ‰∏∫ 0ÔºåÂπ∂Â∞ÜÂΩìÂâçÁöÑ@value{FN}Â≠òÂú® @code{fname} ‰∏≠Ôºö

@example
@c file eg/prog/wc.awk
function beginfile(file)
@{
    lines = words = chars = 0
    fname = FILENAME
@}
@c endfile
@end example

@code{endfile()} ÂáΩÊï∞Â∞ÜÂΩìÂâçÊñá‰ª∂ÁöÑÊï∞ÂÄºÂä†Âà∞ÊÄªÁöÑË°åÔºåÂçïËØç‰∏éÂ≠óÁ¨¶Êï∞‰∏ä„ÄÇÁÑ∂Âêé‰∏∫ÂàöÊâçÊâÄËØªÂèñÁöÑÊñá‰ª∂ÊâìÂç∞Áõ∏Â∫îÁöÑÊï∞ÂÄº„ÄÇÂÆÉ‰æùËµñ‰∫é @code{beginfile()} Êù•ÈáçÁΩÆÂêéÈù¢ÁöÑ@value{DF}ÁöÑÊï∞ÂÄºÔºö

@example
@c file eg/prog/wc.awk
function endfile(file)
@{
    tlines += lines
    twords += words
    tchars += chars
    if (do_lines)
        printf "\t%d", lines
@group
    if (do_words)
        printf "\t%d", words
@end group
    if (do_chars)
        printf "\t%d", chars
    printf "\t%s\n", fname
@}
@c endfile
@end example

Êúâ‰∏Ä‰∏™ÂØπÊØè‰∏™Ë°åÈÉΩÊâßË°åÁöÑËßÑÂàô„ÄÇÂú®ÈáåÈù¢‰ºöÂØπËÆ∞ÂΩïÁöÑÈïøÂ∫¶Âä†Âà∞ @code{chars} ‰∏äÔºåÂÜçÂä†‰∏ä 1„ÄÇ
@footnote{Áî±‰∫é @command{gawk} ÂèØ‰ª•Â§ÑÁêÜÂ§öÂ≠óËäÇÁöÑÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆÔºåÊâÄ‰ª•Ëøô‰∏™‰ª£Á†ÅÁªüËÆ°ÁöÑÊòØÂ≠óÁ¨¶ÔºåËÄå‰∏çÊòØÂ≠óËäÇ„ÄÇ}
Â∞ÜËÆ∞ÂΩïÁöÑÈïøÂ∫¶Âä† 1 ÊòØÂõ†‰∏∫Êç¢Ë°åÁ¨¶Áî®Êù•ÂàÜÂâ≤ËÆ∞ÂΩïÔºàÂç≥ @code{RS} ÁöÑÂÄºÔºâ‰ΩÜÂÆÉÂèà‰∏çÊòØËÆ∞ÂΩïÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÂõ†Ê≠§‰∏çÂåÖÂê´Âú®ÈïøÂ∫¶Èáå„ÄÇÂêéÈù¢ÔºåÂØπÊØè‰∏ÄË°åËØªÂèñÊó∂ @code{lines} ‰ºöÈÄíÂ¢ûÔºåËÄå @code{words} ‰ºöÈÄíÂ¢û @code{NF} ÁöÑÂÄºÔºåËÄåÂÆÉÁöÑÂÄºÂ∞±ÊòØÊú¨Êù°Ë°å‰∏≠‚ÄúÂçïËØç‚ÄùÁöÑ‰∏™Êï∞Ôºö

@example
@c file eg/prog/wc.awk
# do per line
@{
    chars += length($0) + 1    # get newline
    lines++
    words += NF
@}
@c endfile
@end example

ÊúÄÂêéÔºå@code{END} ËßÑÂàôÁÆÄÂçïÂú∞Èì∫ÊâÄÊúâÊñá‰ª∂ÁöÑÊÄªÂêàÔºö

@example
@c file eg/prog/wc.awk
END @{
    if (print_total) @{
        if (do_lines)
            printf "\t%d", tlines
        if (do_words)
            printf "\t%d", twords
        if (do_chars)
            printf "\t%d", tchars
        print "\ttotal"
    @}
@}
@c endfile
@end example

@node Miscellaneous Programs
@section @command{awk} Á®ãÂ∫èÁöÑÂ§ßÈõÜÂêà

Ëøô‰∏Ä@value{SECTION}‰∏≠ÊòØ‰∏Ä‰∏™‰∏çÂêåÁ®ãÂ∫èÁöÑ‚ÄúÂ§ßÈõÜÂêà‚Äù„ÄÇÊàë‰ª¨Â∏åÊúõ‰Ω†‰ºöËßâÂæó‰ªñ‰ª¨Âç≥ÊúâË∂£‰πüÂæàÂ•ΩÁé©„ÄÇ

@menu
* Dupword Program::             Finding duplicated words in a document.
* Alarm Program::               An alarm clock.
* Translate Program::           A program similar to the @command{tr} utility.
* Labels Program::              Printing mailing labels.
* Word Sorting::                A program to produce a word usage count.
* History Sorting::             Eliminating duplicate entries from a history
                                file.
* Extract Program::             Pulling out programs from Texinfo source
                                files.
* Simple Sed::                  A Simple Stream Editor.
* Igawk Program::               A wrapper for @command{awk} that includes
                                files.
* Anagram Program::             Finding anagrams from a dictionary.
* Signature Program::           People do amazing things with too much time on
                                their hands.
@end menu

@node Dupword Program
@subsection Êü•ÊâæÊñáÊ°£‰∏≠ÁöÑÈáçÂ§çÂ≠ó

@cindex words, duplicate@comma{} searching for
@cindex searching, for words
@cindex documents@comma{} searching
Âú®ÂÜôÂ§ßÈáèÁöÑÂçïË∞ÉÊñáÁ´†ÁöÑÂ∏∏ËßÅÈîôËØØÂ∞±ÊòØ‰ºöÂÅ∂ÁÑ∂ËæìÂÖ•ÈáçÂ§çÁöÑËØç„ÄÇ‰∏ÄËà¨ÊÉÖÂÜµ‰∏ã‰Ω†‰ºöÁúãÂà∞‰ºº‰∏ãÈù¢ÁöÑ‰∏úË•ø‚Äúthe the program does the following@dots{}‚Äù„ÄÇÂΩìÊñá‰ª∂ÊòØÂú®Á∫øÁöÑÊó∂ÂÄôÔºåÈáçÂ§çÁöÑËØçÂ∏∏Â∏∏Âá∫Áé∞Âú®‰∏ÄË°åÁöÑÂ∞æÈÉ®‰ª•ÂèäÂè¶‰∏ÄË°åÁöÑË°åÈ¶ñÔºåÂõ†Ê≠§ÂæàÈöæËøõË°åÂÆö‰Ωç„ÄÇ
A common error when writing large amounts of prose is to accidentally
duplicate words.  Typically you will see this in text as something like ``the
the program does the following@dots{}''  When the text is online, often
the duplicated words occur at the end of one line and the
@c as here!

@file{dupword.awk} Ëøô‰∏™Á®ãÂ∫è‰ºöÊâ´ÊèèÊï¥‰∏™Êñá‰ª∂Ôºå‰∏ÄÊ¨°‰∏ÄË°åÔºåÂπ∂Êü•ÊâæÂêå‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑÁöÑËøûÁª≠Âá∫Áé∞„ÄÇÂÆÉÂêåÊó∂‰πü‰øùÂ≠ò‰∏ÄË°å‰∏≠ÁöÑÊúÄÂêé‰∏Ä‰∏™ÂçïËØçÔºàÊîæÂú®ÂèòÈáè @code{prev} ‰∏≠ÔºâÔºåÁî®‰∫é‰∏é‰∏ã‰∏Ä‰∏™ÂçïËØçÁöÑÁ¨¨‰∏Ä‰∏™ÂçïËØçËøõË°åÊØîËæÉ„ÄÇ

@cindex Texinfo
Â§¥‰∏§‰∏™ËØ≠Âè•Ë¶ÅÁ°Æ‰øùË°åÂÖ®ÊòØÂ∞èÂÜôÁöÑÔºåÊâÄ‰ª•ÔºåÂÉè‚ÄúThe‚Äù‰∏é‚Äúthe‚ÄùÂèØ‰ª•Áõ∏‰∫íËøõË°åÊØîËæÉ„ÄÇ‰∏ã‰∏ÄÊù°ËØ≠Âè•‰ºöÊõøÊç¢ÈùûÂ≠óÊØçÊï∞Â≠ó‰∏éÈùûÁ©∫Ê†ºÂ≠óÁ¨¶‰∏∫Á©∫Ê†ºÔºåÊâÄ‰ª•Ê†áÁÇπÁ¨¶Âè∑‰πü‰∏ç‰ºöÂΩ±ÂìçÊØîËæÉ„ÄÇÁî®Á©∫Ê†ºÊõøÊç¢Â≠óÁ¨¶ËøôÊ†∑Ê†ºÂºèÊéßÂà∂Â≠óÁ¨¶‰∏ç‰ºöÂàõÂª∫‰∏Ä‰∫õÊ≤°ÊúâÊÑè‰πâÁöÑÂçïËØçÔºàÂ¶Ç Texinfo ‰∏≠ÁöÑ @samp{@@code@{NF@}} Âú®ÁÆÄÂçïÂú∞Âà†Èô§Ê†áÁÇπÁöÑÊÉÖÂÜµ‰∏ã‰ºöÂèòÊàê @samp{codeNF}Ôºâ„ÄÇËÆ∞ÂΩïÁÑ∂Âêé‰ºöË¢´ÂàÜÂâ≤‰∏∫ÂüüÔºå‰∫ßÁîü‰∫Ü‰∏ÄË°å‰∏≠ÁöÑÂÆûÈôÖÂçïËØçÔºåÂπ∂‰∏î‰øùËØÅ‰∏ç‰ºöÊúâÁ©∫ÁöÑÂüü„ÄÇ

Â¶ÇÊûúÂú®ÁßªÈô§‰∫ÜÊâÄÊúâÁöÑÊ†áÁÇπÂêéÊ≤°ÊúâÂüüÔºåÂàôÂΩìÂâçÁöÑËÆ∞ÂΩï‰ºöË¢´Ë∑≥Ëøá„ÄÇÂê¶ÂàôÁ®ãÂ∫è‰ºöËø≠‰ª£ÊØè‰∏Ä‰∏™ÂçïËØçÔºåÂπ∂‰∏îÂÖ∂Ââç‰∏Ä‰∏™ÂçïËØçËøõË°åÊØîËæÉÔºö

@cindex @code{dupword.awk} program
@example
@c file eg/prog/dupword.awk
# dupword.awk --- find duplicate words in text
@c endfile
@ignore
@c file eg/prog/dupword.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# December 1991
# Revised October 2000

@c endfile
@end ignore
@c file eg/prog/dupword.awk
@{
    $0 = tolower($0)
    gsub(/[^[:alnum:][:blank:]]/, " ");
    $0 = $0         # re-split
    if (NF == 0)
        next
    if ($1 == prev)
        printf("%s:%d: duplicate %s\n",
            FILENAME, FNR, $1)
    for (i = 2; i <= NF; i++)
        if ($i == $(i-1))
            printf("%s:%d: duplicate %s\n",
                FILENAME, FNR, $i)
    prev = $NF
@}
@c endfile
@end example

@node Alarm Program
@subsection Êä•Ë≠¶Êó∂ÈíüÁ®ãÂ∫è
@cindex insomnia, cure for
@cindex Robbins, Arnold
@quotation
@i{
Ê≤°Êúâ‰ªÄ‰πàÂÉèÈóπÈíü‰∏ÄÊ†∑ÂèØ‰ª•Ê≤ªÊÑàÂ§±Áú†„ÄÇ
}
@author Arnold Robbins
@end quotation
@cindex Quanstrom, Erik
@ignore
Date: Sat, 15 Feb 2014 16:47:09 -0500
Subject: Re: 9atom install question
Message-ID: <l2jcvx6j6mey60xnrkb0hhob.1392500829294@email.android.com>
From: Erik Quanstrom <quanstro@quanstro.net>
To: Aharon Robbins <arnold@skeeve.com>

yes.

- erik

Aharon Robbins <arnold@skeeve.com> wrote:

>> sleep is for web developers.
>
>Can I quote you, in the gawk manual?
>
>Thanks,
>
>Arnold
@end ignore
@quotation
@i{
Áù°Áú†ÊòØÁªô Web ÂºÄÂèëËÄÖÁöÑ„ÄÇ
}
@author Erik Quanstrom
@end quotation

@cindex time, alarm clock example program
@cindex alarm clock example program
‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‚ÄúÈóπÈíü‚ÄùÁ®ãÂ∫è„ÄÇ‰Ω†ÁªôÂÆÉ‰∏Ä‰∏™Êó∂Èó¥‰ª•Âèä‰∏Ä‰∏™ÂèØÈÄâÁöÑÊ∂àÊÅØÔºåÂú®ÊåáÂÆöÁöÑÊó∂Èó¥‰∏äÔºåÂÆÉ‰ºöÊâìÂç∞Ê∂àÊÅØÂà∞Ê†áÂáÜËæìÂá∫‰∏ä„ÄÇÂè¶Â§ñÔºå‰Ω†ÂèØ‰ª•ÁªôÂÆÉ‰∏Ä‰∏™Ê∂àÊÅØÈáçÂ§çÁöÑËµÑÊñôÔºå‰ª•ÂèäÈáçÂ§ç‰πãÈó¥ÁöÑÂª∂ËøüÊó∂Èó¥„ÄÇ

Ëøô‰∏™Á®ãÂ∫è‰ΩøÁî® @code{getlocaltime()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{Getlocaltime Function}Ôºâ„ÄÇ

Âú® @code{BEGIN} ËßÑÂàô‰∏≠ÂÆåÊàêÊâÄÊúâÁöÑÂ∑•‰Ωú„ÄÇÁ¨¨‰∏ÄÈÉ®ÂàÜÊòØÂèÇÊï∞Ê£ÄÊü•ÔºåÂπ∂ËÆæÁΩÆÈªòËÆ§ÂÄºÔºödelayÔºåcountÔºå‰ª•ÂèäË¶ÅÊâìÂç∞ÁöÑ message„ÄÇÂ¶ÇÊûúÁî®Êà∑Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰∏çÂ∏¶ ASCII BEL Â≠óÁ¨¶ÁöÑÊ∂àÊÅØÔºà‰∏∫‚Äúalert‚ÄùÂ≠óÁ¨¶Ôºå@code{\a}ÔºâÔºåÁÑ∂ÂêéÂÆÉ‰ºöË¢´Âä†Âà∞ message ‰∏≠„ÄÇÔºàÂú®ÂæàÂ§öÁöÑÁ≥ªÁªü‰∏≠ÔºåÊâìÂç∞ ASCII BEL ‰ºö‰∫ßÁîü‰∏Ä‰∏™ÂèØ‰ª•Âê¨ÂæóÂà∞ÁöÑÊä•Ë≠¶Âùó„ÄÇÊâÄ‰ª•Ôºå ÂΩìÊä•Ë≠¶Ê∂àÈô§Êó∂ÔºåÁ≥ªÁªü‰ºöÂú®Áî®Êà∑Ê≤°ÊúâÁúãÁîµËÑëÊó∂Êù•Âî§Ëµ∑ÂÖ∂Ê≥®ÊÑè„ÄÇÔºâÂè™ÊòØ‰∏∫‰∫ÜÂÅö‰∏Ä‰∫õÊîπÂèòÔºåËøô‰∏™Á®ãÂ∫è‰ΩøÁî® @code{switch} ËØ≠Âè•ÔºàÊü•Áúã @pxref{Switch Statement}ÔºâÔºå‰ΩÜÊòØÂ§ÑÁêÜ‰πüÂèØ‰ª•Áî®‰∏ÄÁ≥ªÂàóÁöÑ @code{if}-@code{else} ËØ≠Âè•Êù•ÂÆåÊàê„ÄÇ‰∏ãÈù¢ÊòØÁ®ãÂ∫èÔºö

@cindex @code{alarm.awk} program
@example
@c file eg/prog/alarm.awk
# alarm.awk --- set an alarm
#
# Requires getlocaltime() library function
@c endfile
@ignore
@c file eg/prog/alarm.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised December 2010

@c endfile
@end ignore
@c file eg/prog/alarm.awk
# usage: alarm time [ "message" [ count [ delay ] ] ]

BEGIN @{
    # Initial argument sanity checking
    usage1 = "usage: alarm time ['message' [count [delay]]]"
    usage2 = sprintf("\t(%s) time ::= hh:mm", ARGV[1])

    if (ARGC < 2) @{
        print usage1 > "/dev/stderr"
        print usage2 > "/dev/stderr"
        exit 1
    @}
    switch (ARGC) @{
    case 5:
        delay = ARGV[4] + 0
        # fall through
    case 4:
        count = ARGV[3] + 0
        # fall through
    case 3:
        message = ARGV[2]
        break
    default:
        if (ARGV[1] !~ /[[:digit:]]?[[:digit:]]:[[:digit:]]@{2@}/) @{
            print usage1 > "/dev/stderr"
            print usage2 > "/dev/stderr"
            exit 1
        @}
        break
    @}

    # set defaults for once we reach the desired time
    if (delay == 0)
        delay = 180    # 3 minutes
@group
    if (count == 0)
        count = 5
@end group
    if (message == "")
        message = sprintf("\aIt is now %s!\a", ARGV[1])
    else if (index(message, "\a") == 0)
        message = "\a" message "\a"
@c endfile
@end example

‰ª£Á†ÅÁöÑ‰∏ã‰∏Ä@value{SECTION}‰ºöÂ∞ÜÊä•Ë≠¶Êó∂Èó¥ËΩ¨Êç¢‰∏∫Â∞èÊó∂ÂàÜÈíüÔºåÂπ∂ËΩ¨Êç¢ÔºàÂ¶ÇÊûúÊúâÂøÖË¶ÅÁöÑËØùÔºâ‰∏∫‰∏Ä‰∏™ 24 Â∞èÊó∂Âà∂ÁöÑÊó∂Èó¥ÔºåÁÑ∂ÂêéÂ∞ÜÊó∂Èó¥ËΩ¨Êç¢‰∏∫‰ªéÂçàÂ§ú‰ª•Êù•ÁöÑÁßíÊï∞„ÄÇÂêéÈù¢ÂÆÉ‰ºöÂ∞ÜÂΩìÂâçÁöÑÊó∂ÂÄôËΩ¨Êç¢‰∏∫‰ªéÂçàÂ§ú‰ª•Êù•ÁöÑÁßíÊï∞„ÄÇ‰∏§‰∏™Êó∂Èó¥‰πãÈó¥ÁöÑÂ∑ÆÂ∞±ÊòØË¶ÅËÆæÁΩÆÊä•Ë≠¶Ë¶ÅÁ≠âÂæÖÁöÑÊó∂Èó¥Ôºö

@example
@c file eg/prog/alarm.awk
    # split up alarm time
    split(ARGV[1], atime, ":")
    hour = atime[1] + 0    # force numeric
    minute = atime[2] + 0  # force numeric

    # get current broken down time
    getlocaltime(now)

    # if time given is 12-hour hours and it's after that
    # hour, e.g., `alarm 5:30' at 9 a.m. means 5:30 p.m.,
    # then add 12 to real hour
    if (hour < 12 && now["hour"] > hour)
        hour += 12

    # set target time in seconds since midnight
    target = (hour * 60 * 60) + (minute * 60)

    # get current time in seconds since midnight
    current = (now["hour"] * 60 * 60) + \
               (now["minute"] * 60) + now["second"]

    # how long to sleep for
    naptime = target - current
    if (naptime <= 0) @{
        print "alarm: time is in the past!" > "/dev/stderr"
        exit 1
    @}
@c endfile
@end example

@cindex @command{sleep} utility
ÊúÄÂêéÔºåÁ®ãÂ∫è‰ΩøÁî® @code{system()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{I/O Functions}ÔºâÊù•Ë∞ÉÁî® @command{sleep} Â∑•ÂÖ∑„ÄÇ@command{sleep} Â∑•ÂÖ∑‰ºöÊöÇÂÅúÁªôÂÆöÁöÑÁßíÊï∞„ÄÇÂ¶ÇÊûúÂÖ∂ÈÄÄÂá∫Êó∂Èó¥‰∏çÊòØ 0ÔºåËÄåÁ®ãÂ∫è‰ºöÂÅáËÆæ‰ºëÁú†‰∏≠Êñ≠Âπ∂ÈÄÄÂá∫„ÄÇÂ¶ÇÊûú @command{sleep} ÈÄÄÂá∫ÔºåÈÄÄÂá∫‰ª£Á†Å‰∏∫ 0ÔºåÂàôÁ®ãÂ∫è‰ºöÂú®Âæ™ÁéØ‰∏≠ÊâìÂç∞Ê∂àÊÅØÔºåÁÑ∂ÂêéÂÜçÈÄöËøá @command{sleep} Êù•ËøüÂª∂‰∏çÁÆ°Â§öÂ∞ëÂøÖË¶ÅÁöÑÁßíÊó∂Èó¥Ôºö

@example
@c file eg/prog/alarm.awk
    # zzzzzz..... go away if interrupted
    if (system(sprintf("sleep %d", naptime)) != 0)
        exit 1

    # time to notify!
    command = sprintf("sleep %d", delay)
    for (i = 1; i <= count; i++) @{
        print message
        # if sleep command interrupted, go away
        if (system(command) != 0)
            break
    @}

    exit 0
@}
@c endfile
@end example

@node Translate Program
@subsection ËΩ¨Êç¢Â≠óÁ¨¶

@cindex characters, transliterating
@cindex @command{tr} utility
Á≥ªÁªüÁöÑ @command{tr} Â∑•ÂÖ∑Áî®Êù•ËøõË°åÂ≠óÁ¨¶ÁöÑ‰∏ÄÂØπ‰∏ÄËΩ¨Êç¢„ÄÇ‰æãÂ¶ÇÔºåÁî®Êù•Â∞ÜÂ§ßÂÜôÂ≠óÊØçËΩ¨Êç¢‰∏∫Â∞èÂÜôÂ≠óÊØç‰ª•‰æøËøõË°åËøõ‰∏ÄÊ≠•ÁöÑÂ§ÑÁêÜÔºö

@example
@var{generate data} | tr 'A-Z' 'a-z' | @var{process data} @dots{}
@end example

@command{tr} ÈúÄË¶Å‰∏§‰∏™Â≠óÁ¨¶ÂàóË°®„ÄÇ 
@footnote{Âú®‰∏Ä‰∫õÊóßÁöÑÁ≥ªÁªü‰∏äÔºåÂåÖÊã¨ SolarisÔºå@command{tr} ÁöÑÁ≥ªÁªüÁâàÊú¨ÂèØËÉΩÈúÄË¶ÅÂàóË°®Ë¶ÅÂÜôÂú®ËåÉÂõ¥Ë°®ËææÂºèÔºåÂπ∂ÂåÖÂê´Âú®ÊñπÊã¨Âè∑‰∏≠Ôºà@samp{[a-z]}ÔºâÔºåÂºïËµ∑Êù•Ôºå‰∏∫ÁöÑÊòØÈÅøÂÖç Shell ‰ºöÂ∞ùËØïÂØπ@value{FN}Êâ©Â±ï„ÄÇ‰ΩÜËøô‰∏çÊòØ‰∏™ÁâπÊÄß„ÄÇ}
ÂΩìÂ§ÑÁêÜËæìÂÖ•Êó∂ÔºåÂú®Á¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÂàóË°®‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶‰ºöË¢´Á¨¨‰∫å‰∏™ÂàóË°®‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÊõøÊç¢ÔºåËÄåÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÂàóË°®‰∏≠ÁöÑÁ¨¨‰∫å‰∏™Â≠óÁ¨¶‰ºöË¢´Á¨¨‰∫å‰∏™Â≠óÁ¨¶ÂàóË°®‰∏≠ÁöÑÁ¨¨‰∫å‰∏™Â≠óÁ¨¶ÊõøÊç¢Ôºå‰ª•Ê≠§Á±ªÊé®„ÄÇÂ¶ÇÊûúÂú®‚Äúfrom‚ÄùÂàóË°®‰∏≠ÊúâÊØî‚Äúto‚ÄùÂàóË°®‰∏≠Êõ¥Â§öÁöÑÂ≠óÁ¨¶ÔºåÂàôÂú®‚Äúto‚Äù‰∏≠ÁöÑÊúÄÂêéÁöÑÂ≠óÁ¨¶Áî®Êù•ÊõøÊç¢Âú®‚Äúfrom‚ÄùÂàóË°®‰∏≠ÁöÑÂÖ∂‰ªñÂ≠óÁ¨¶„ÄÇ

‰ª•ÂâçÔºå
@c early or mid-1989!
ÊúâÁî®Êà∑Âª∫ËÆÆÂú® @command{gawk} ‰∏≠Âä†ÂÖ•Â≠óÁ¨¶ËΩ¨Êç¢ÂáΩÊï∞„ÄÇ
@c Wishing to avoid gratuitous new features,
@c at least theoretically
‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂèØ‰ª•ËØÅÊòéÁî®Êà∑Â±ÇÁöÑÂáΩÊï∞‰πüÂèØ‰ª•Áî®Êù•ÂÆûÁé∞Â≠óÁ¨¶ÁöÑËΩ¨Êç¢ÂäüËÉΩ„ÄÇËøô‰∏™Á®ãÂ∫èÊ≤°Êúâ @command{tr} Â∑•ÂÖ∑ÈÇ£‰πàÂÆåÊï¥Ôºå‰ΩÜÊòØÂèØ‰ª•ÂÅöÂ§ßÈÉ®‰ªΩÁöÑ‰∫ãÊÉÖ„ÄÇ

ËΩ¨Êç¢Á®ãÂ∫è @command{translate} ÊòØÂú® @command{gawk} ÂèñÂæóÂØπÊØè‰∏™Â≠ó‰∏≤‰∏≠ÁöÑÂ≠óÁ¨¶ËøõË°åÂàÜÂâ≤Âà∞Êï∞ÁªÑ‰∏≠ÁöÑËÉΩÂäõÂæà‰πÖ‰πãÂâçÂÜôÁöÑ„ÄÇÊâÄ‰ª•ÔºåÂÆÉÈáçÂ§çÂú∞‰ΩøÁî® @code{substr()}Ôºå@code{index()} ‰∏é @code{gsub()} Á≠âÂÜÖÁΩÆÂáΩÊï∞ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇ‰∏ãÈù¢Êúâ‰∏§‰∏™ÂáΩÊï∞ÔºåÁ¨¨‰∏Ä‰∏™ÂáΩÊï∞ @code{stranslate()}ÔºåÊúâ‰∏â‰∏™ÂèÇÊï∞Ôºö

@table @code
@item from
Ë¶ÅËΩ¨Êç¢ÁöÑÂ≠óÁ¨¶ÂàóË°®„ÄÇ

@item to
Ë¶ÅËΩ¨Êç¢ÊàêÁöÑÂ≠óÁ¨¶ÂàóË°®„ÄÇ

@item target
Ë¶ÅÊâßË°åËΩ¨Êç¢ÁöÑÂ≠ó‰∏≤„ÄÇ
@end table

ÂÖ≥ËÅîÊï∞ÁªÑ‰ΩøÂæóËΩ¨Êç¢ÈÉ®ÂàÜÈùûÂ∏∏ÂÆπÊòì„ÄÇ@code{t_ar} ‰øùÂ≠ò‚Äúto‚ÄùÁöÑÂ≠óÁ¨¶ÔºåÂπ∂Áî®‚Äúfrom‚ÄùÁöÑÂ≠óÁ¨¶‰Ωú‰∏∫Á¥¢Âºï„ÄÇÁÑ∂Âêé‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂæ™ÁéØÊù•Âæ™ÁéØ @code{from} Â≠óÁ¨¶Ôºå‰∏ÄÊ¨°‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇÂØπÂú® @code{from} ‰∏≠ÁöÑÊØè‰∏™Â≠óÁ¨¶ÔºåÂ¶ÇÊûúÂ≠óÁ¨¶Âá∫Áé∞Âú® @code{target} ‰∏≠ÔºåÂàôÂÆÉË¢´ÊõøÊç¢‰∏∫ @code{to} ‰∏≠ÁöÑÁõ∏Â∫îÂ≠óÁ¨¶„ÄÇ

@code{translate()} ÂáΩÊï∞Ë∞ÉÁî® @code{stranslate()}ÔºåÂπ∂Â∞Ü @code{$0} ‰Ωú‰∏∫ @code{target} ÂèÇÊï∞„ÄÇ‰∏ªÁ®ãÂ∫èÁî®Êù•Ëá™Áî±ÂëΩ‰ª§Ë°åÁöÑÂÄºËÆæÁΩÆ‰∏§‰∏™ÂÖ®Â±ÄÂèòÈáèÔºå@code{FROM} ‰∏é @code{TO}ÔºåÁÑ∂ÂêéÂ∞Ü @code{ARGV} Êõ¥Êîπ‰∏∫ @command{awk} ‰ªéÊ†áÂáÜËæìÂÖ•‰∏≠ËØªÂèñ„ÄÇ

ÊúÄÂêéÔºåÂ§ÑÁêÜËßÑÂàôÂè™ÊòØÁÆÄÂçïÂú∞Ë∞ÉÁî® @code{translate()} Êù•Â§ÑÁêÜÊØè‰∏ÄÊù°ËÆ∞ÂΩïÔºö

@cindex @code{translate.awk} program
@example
@c file eg/prog/translate.awk
# translate.awk --- do tr-like stuff
@c endfile
@ignore
@c file eg/prog/translate.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# August 1989
# February 2009 - bug fix

@c endfile
@end ignore
@c file eg/prog/translate.awk
# Bugs: does not handle things like tr A-Z a-z; it has
# to be spelled out. However, if `to' is shorter than `from',
# the last character in `to' is used for the rest of `from'.

function stranslate(from, to, target,     lf, lt, ltarget, t_ar, i, c,
                                                               result)
@{
    lf = length(from)
    lt = length(to)
    ltarget = length(target)
    for (i = 1; i <= lt; i++)
        t_ar[substr(from, i, 1)] = substr(to, i, 1)
    if (lt < lf)
        for (; i <= lf; i++)
            t_ar[substr(from, i, 1)] = substr(to, lt, 1)
    for (i = 1; i <= ltarget; i++) @{
        c = substr(target, i, 1)
        if (c in t_ar)
            c = t_ar[c]
        result = result c
    @}
    return result
@}

function translate(from, to)
@{
    return $0 = stranslate(from, to, $0)
@}

# main program
BEGIN @{
@group
    if (ARGC < 3) @{
        print "usage: translate from to" > "/dev/stderr"
        exit
    @}
@end group
    FROM = ARGV[1]
    TO = ARGV[2]
    ARGC = 2
    ARGV[1] = "-"
@}

@{
    translate(FROM, TO)
    print
@}
@c endfile
@end example

ÊúâÂèØËÉΩÂú®Áî®Êà∑Â±ÇÁöÑÂáΩÊï∞‰∏≠Êù•ÊâßË°åÂ≠óÁ¨¶ËΩ¨Êç¢Ôºå‰ΩÜÊòØÊ≤°ÊúâËøô‰πàÈ´òÊïàÔºåÊàë‰ª¨ÔºàÂç≥ @command{gawk} ÁöÑÂºÄÂèëËÄÖÔºâÂºÄÂßãËÄÉËôëÊ∑ªÂä†‰∏Ä‰∏™ÂÜÖÁΩÆÁöÑÂáΩÊï∞„ÄÇ‰ΩÜÊòØÔºåÂú®ÂÆåÊàêËøô‰∏™Á®ãÂ∫è‰πãÂêé‰∏ç‰πÖÔºåÊàë‰ª¨‰∫ÜËß£Âà∞ Brian Kernighan Â∑≤ÁªèÂä†ÂÖ•‰∫Ü @code{toupper()} ‰∏é @code{tolower()} ÂáΩÊï∞Âà∞ÂÆÉÁöÑ @command{gawk} ‰∏≠ÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇËøô‰∫õÂáΩÊï∞Â§ÑÁêÜÂ§ÑÁêÜ‰∫ÜÂ§ßÈáèÁöÑÊâÄÈúÄË¶ÅÁöÑÂ≠óÁ¨¶ËΩ¨Êç¢ÁöÑ‰∏ªË¶ÅÈÉ®ÂàÜÔºåÂõ†Ê≠§Êàë‰ª¨Âè™Â•ΩÈÄâÊã©Êù•ÁÆÄÂçïÂú∞Â∞ÜËøô‰∫õÂáΩÊï∞Âä†Âà∞ @command{gawk}ÔºåÂπ∂‰øùËØÅÂÆÉ‰ª¨Ë∂≥Â§üÁã¨Á´ã„ÄÇ

ÂØπËøô‰∏™Á®ãÂ∫èÁöÑÊòéÊòæÊèêÂçáÂ∞±ÊòØÂú® @code{BEGIN} ËßÑÂàô‰∏≠‰ªÖËÆæÁΩÆ @code{t_ar} Êï∞ÁªÑ‰∏ÄÊ¨°„ÄÇ‰ΩÜÊòØÔºåËøôÂÅáËÆæ‚Äúfrom‚Äù‰∏é‚Äúto‚ÄùÁöÑÂàóË°®Âú®Á®ãÂ∫èÁöÑÁîüÂëΩÊúüÂÜÖ‰∏ç‰ºöÊîπÂèò„ÄÇ

Âè¶‰∏Ä‰∏™ÊòéÊòæÁöÑÊîπËøõÔºåÂ∞±ÊòØÂÖÅËÆ∏‰ΩøÁî® @command{tr} Â∑•ÂÖ∑ÊâÄ‰ΩøÁî®ÁöÑËåÉÂõ¥ÔºåÂ¶Ç @samp{a-z}„ÄÇÊü•Áúã @file{cut.awk}ÔºàÊü•Áúã @pxref{Cut Program}Ôºâ‰ª£Á†ÅÊù•Êü•ÁúãÂÖ∂‰∏≠ÁöÑÁÅµÊÑü„ÄÇ


@node Labels Program
@subsection ÊâìÂç∞ÈÇÆ‰ª∂Ê†áÈ¢ò

@cindex printing, mailing labels
@cindex mailing labels@comma{} printing
ËøôÈáåÊòØ‰∏Ä‰∏™‚ÄúÁúüÂÆû‰∏ñÁïå‚Äù ‰∏≠ÁöÑÁ®ãÂ∫è„ÄÇ
@footnote{‚ÄúÁúüÂÆû‰∏ñÁïå‚ÄùÂÆö‰πâ‰∏∫‚ÄúÂ∞±ÊòØÂÆûÈôÖ‰∏äÁî®Êù•Â§ÑÁêÜÊüê‰∫õ‰∫ãÊÉÖÁöÑÁ®ãÂ∫è‚Äù„ÄÇ}
Ëøô‰∏™ËÑöÊú¨ËØªÂèñÂêçÂ≠ó‰∏éÂú∞ÂùÄÂàóË°®ÔºåÁÑ∂Âêé‰∫ßÁîüÈÇÆ‰ª∂Ê†áÁ≠æ„ÄÇÊ†áÁ≠æÁöÑÊØè‰∏ÄÈ°µÊúâ 20 ‰∏™Ê†áÁ≠æÂú®ÈáåÂ§¥Ôºå2 Ë°å 10 Âàó„ÄÇÂú∞ÂùÄ‰øùËØÅÂ§ö‰∫é 5 Ë°å„ÄÇÊØè‰∏Ä‰∏™Âú∞ÊñπÈÉΩÈÄöËøá‰∏Ä‰∏™Á©∫Ë°å‰∏é‰∏ã‰∏Ä‰∏™Âú∞ÊñπËøõË°åÂàÜÈöî„ÄÇ

Âü∫Êú¨ÁöÑÊÉ≥Ê≥ïÊòØËØªÂèñ 20 ‰∏™Ê†áÁ≠æÁöÑÊï∞ÊçÆ„ÄÇÊØè‰∏™Ê†áÁ≠æÁöÑÊØè‰∏ÄË°åÈÉΩÂ≠òÂú® @code{line} Êï∞ÁªÑ‰∏≠„ÄÇ‰∏Ä‰∏™ÂçïÁã¨ÁöÑËßÑÂàôÊù•Â§ÑÁêÜÂ°´ÂÖÖ @code{line} Êï∞ÁªÑÔºåÂπ∂Âú®ËØªÂà∞ 20 ‰∏™Ê†áÁ≠æÁöÑÊó∂ÂÄôÊâìÂç∞È°µ„ÄÇ

@code{BEGIN} ËßÑÂàôÁÆÄÂçïÂú∞Â∞Ü @code{RS} ËÆæÁΩÆÊàêÁ©∫‰∏≤ÔºåÂõ†Ê≠§ @command{awk} ‰ºöÂ∞ÜËÆ∞ÂΩï‰ª•Á©∫Ë°åÂàÜÂâ≤ÔºàÊü•Áúã @pxref{Records}Ôºâ„ÄÇÁÑ∂ÂêéÂ∞Ü @code{MAXLINES} ËÆæÁΩÆ‰∏∫ 100ÔºåÂõ†Ê≠§ 100 ÊòØÂú®È°µ‰∏≠ÁöÑÊúÄÂ§ßË°åÊï∞
@iftex
Ôºà@math{20 @cdot 5 = 100}Ôºâ„ÄÇ
@end iftex
@ifnottex
@ifnotdocbook
Ôºà20 * 5 = 100Ôºâ„ÄÇ
@end ifnotdocbook
@end ifnottex
@docbook
Ôºà20 &sdot; 5 = 100Ôºâ„ÄÇ
@end docbook

Â§ßÂ§öÊï∞ÁöÑÂ∑•‰ΩúÊòØÂú® @code{printpage()} ÂáΩÊï∞‰∏≠ÂÆåÊàêÁöÑ„ÄÇÊ†áÁ≠æË°åË¢´È°∫Â∫èÂú∞Â≠òÂú® @code{line} Êï∞ÁªÑ‰∏≠„ÄÇ
‰ΩÜÊòØ‰ªñ‰ª¨Ë¶ÅÊ∞¥Âπ≥Âú∞ÊâìÂç∞Âá∫Êù•Ôºö@code{line[1]} ÂêéÈù¢ÊòØ @code{line[6]}Ôºå@code{line[2]} ‰∏é @code{line[7]} Áõ∏ÈÇªÔºåÁ≠âÁ≠â„ÄÇÁî®‰∏§‰∏™Âæ™ÁéØÊù•ÂÆåÊàêËøô‰∏™ÂäüËÉΩ„ÄÇÂ§ñÂ±ÇÁöÑÂæ™ÁéØÈÄöËøá @code{i} Êù•ÊéßÂà∂ÔºåÁî®Êù•Ëø≠‰ª£Êï∞ÊçÆÁöÑÊØè 10 Ë°åÔºåËøôÊòØÊØè‰∏ÄË°åÁöÑÊ†áÁ≠æ„ÄÇÂÜÖÂæ™ÁéØÔºåÈÄöËøá @code{j} ÊéßÂà∂Ôºå‰∏çÁî®Ëø≠‰ª£‰∏ÄË°å‰∏≠ÁöÑÂÜÖÂÆπ„ÄÇÂΩì @code{j} ‰ªé 0 Ëø≠‰ª£Âà∞ 4ÔºåÂàô @samp{i+j} Â∞±ÊòØË°å‰∏≠ÁöÑÁ¨¨ @code{j} Ë°å„ÄÇ @samp{i+j+5} Âàô‰∏∫‰∏ã‰∏ÄË°å„ÄÇËæìÂá∫ÊúÄÁªàËæìÂá∫ÂèØËÉΩÂ¶Ç‰∏ãÔºö

@example
line 1          line 6
line 2          line 7
line 3          line 8
line 4          line 9
line 5          line 10
@dots{}
@end example

@noindent
@code{printf} ÁöÑ @samp{%-41s} Â≠ó‰∏≤Ë°®Á§∫ÊòØÂ∑¶ÂØπÈΩêÊï∞ÊçÆÔºåÂπ∂Âú®Âõ∫ÂÆöÁöÑÂÆΩÂ∫¶Âüü‰∏äËøõË°åÊâìÂç∞„ÄÇ

‰Ωú‰∏∫ÊúÄÂêéÊèêÁ§∫ÔºåÂú®Ë°å 21 ‰∏éË°å 61 ‰∏≠‰ºöÊúâ‰∏Ä‰∏™Á©∫Ë°åËæìÂá∫ÔºåÊù•‰øùÊåÅËæìÂá∫Ë°åÊòØÊ†áÁ≠æÊòØÂØπÈΩêÁöÑ„ÄÇËøô‰æùËµñ‰∫éÂÜôÁ®ãÂ∫èÊó∂ÊâÄ‰ΩøÁî®ÁöÑÁâπÂà´ÁöÑÊ†áÁ≠æÁ±ªÂûã„ÄÇ‰Ω†‰πüÈúÄË¶ÅÊ≥®ÊÑèÔºåÂú®ÂºÄÂ§¥‰∏éÁªìÂ∞æÈÉΩÊúâ‰∏§‰∏™Á©∫Ë°å„ÄÇ

@code{END} ËßÑÂàôÁî®Êù•Â∞ÜÊúÄÂêéÈ°µÁöÑÊ†áÁ≠æËæìÂá∫ÔºåÂõ†‰∏∫ÊúâÂèØËÉΩÊ≤°ÊúâÂ§ö‰∏™Êï¥ 20 ‰∏™Ê†áÁ≠æÂ≠òÂú®Ôºö

@cindex @code{labels.awk} program
@example
@c file eg/prog/labels.awk
# labels.awk --- print mailing labels
@c endfile
@ignore
@c file eg/prog/labels.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# June 1992
# December 2010, minor edits
@c endfile
@end ignore
@c file eg/prog/labels.awk

# Each label is 5 lines of data that may have blank lines.
# The label sheets have 2 blank lines at the top and 2 at
# the bottom.

BEGIN    @{ RS = "" ; MAXLINES = 100 @}

function printpage(    i, j)
@{
    if (Nlines <= 0)
        return

    printf "\n\n"        # header

    for (i = 1; i <= Nlines; i += 10) @{
        if (i == 21 || i == 61)
            print ""
        for (j = 0; j < 5; j++) @{
            if (i + j > MAXLINES)
                break
            printf "   %-41s %s\n", line[i+j], line[i+j+5]
        @}
        print ""
    @}

    printf "\n\n"        # footer

    delete line
@}

# main rule
@{
    if (Count >= 20) @{
        printpage()
        Count = 0
        Nlines = 0
    @}
    n = split($0, a, "\n")
    for (i = 1; i <= n; i++)
        line[++Nlines] = a[i]
    for (; i <= 5; i++)
        line[++Nlines] = ""
    Count++
@}

END @{
    printpage()
@}
@c endfile
@end example

@node Word Sorting
@subsection ÁîüÊàêÂ≠ó‰ΩøÁî®ÁªüËÆ°

@cindex words, usage counts@comma{} generating

ÂΩìË¶ÅÂ§ÑÁêÜÂ§ßÈáèÁöÑÊñáÊú¨ÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûú‰∫ÜËß£ÂçïËØçÁöÑ‰ΩøÁî®È¢ëÁéáÊòØ‰∏Ä‰ª∂ÂæàÊúâË∂£ÁöÑ‰∫ãÊÉÖ„ÄÇ‰æãÂ¶ÇÔºå‰ΩúËÄÖÂèØËÉΩ‰ºöÂÆπÊòì‰ΩøÁî®ÁâπÂÆöÁöÑËØçÔºåÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå‰ªñÊàñËÄÖÂ•πÂèØËÉΩÊÉ≥Êâæ‰∏Ä‰∫õÂêå‰πâËØçÊù•‰ª£ÊõøÈÇ£‰∫õÂá∫Áé∞ÂæóÂ§™È¢ëÁπÅÁöÑËØç„ÄÇËøô‰∏Ä@value{SUBSECTION}‰∏≠ÂºÄÂèë‰∫Ü‰∏Ä‰∏™ËøôÊ†∑ÁöÑÁ®ãÂ∫èÊù•ÁªüËÆ°ÂçïËØç‰ª•ÂèäÂÆÉÂá∫Áé∞ÁöÑÈ¢ëÁéáÔºåÂπ∂‰ª•‰∏ÄÁßçÊúâÁî®ÁöÑÊñπÂºèËæìÂá∫Ëøô‰∫õ‰ø°ÊÅØ„ÄÇ

‰πçÁúã‰πã‰∏ãÔºåÂÉè‰∏ãÈù¢ËøôÊ†∑ÁöÑÁ®ãÂ∫èÂèØ‰ª•ÂÆåÊàêËøôÊ†∑ÁöÑÂäüËÉΩÔºö

@example
# wordfreq-first-try.awk --- print list of word frequencies

@{
    for (i = 1; i <= NF; i++)
        freq[$i]++
@}

END @{
    for (word in freq)
        printf "%s\t%d\n", word, freq[word]
@}
@end example

Á®ãÂ∫è‰æùËµñ‰∫é @command{awk} ÁöÑÈªòËÆ§ÂüüÂàÜÂâ≤Êú∫Âà∂Êù•Â∞ÜÊØè‰∏ÄË°åÂàÜÂâ≤ÊàêËØçÂπ∂‰ΩøÁî®ÂÖ≥ËÅîÊï∞ÁªÑ @code{freq} Êù•Â≠òÂÇ®ÂÆÉ‰ª¨ÔºåÁî®ÂçïËØçÊù•‰Ωú‰∏∫Á¥¢ÂºïÔºåÊù•ÁªüËÆ°ÂçïËØçÂá∫Áé∞ÁöÑÊ¨°Êï∞ÔºåÂú® @code{END} ËßÑÂàô‰∏≠Êù•ÊâìÂç∞ÁªüËÆ°„ÄÇ

Ëøô‰∏™Á®ãÂ∫èÊúâÂá†‰∏™ÈóÆÈ¢ò‰ºöÂØºËá¥ÂÖ∂Â§ÑÁêÜÁúüÂÆûÊñáÊú¨Êó∂ÊúâÂèØÁî®Á®ãÂ∫¶Ôºö

@itemize @value{BULLET}
@item
@command{awk} ËØ≠Ë®Ä‰ºöÊääÂ§ßÂÜô‰∏éÂ∞èÂÆöÊòØÊúâÂå∫Âà´ÁöÑ„ÄÇÊâÄ‰ª•Ôºå‚Äúbartender‚Äù‰∏é‚ÄúBartender‚Äù‰ºöÂΩìÊàê‰∏ç‰∏ÄÊ†∑ÁöÑËØç„ÄÇËøô‰∏çÊòØÊÉ≥Ë¶ÅÁöÑÁªìÊûúÔºåÂõ†‰∏∫ÂçïËØçÂú®Ê≠£Â∏∏ÁöÑÊñáÊú¨‰∏≠ÁöÑÂè•È¶ñÔºå‰ºöËøõË°åÈ¶ñÂ≠óÂ§ßÂÜôÔºåËÄåÈ¢ëÁéáÂàÜÊûêÂô®Âç¥ÂØπÈ¶ñÂ≠óÂ§ßÂÜô‰∏çÊïèÊÑü„ÄÇ

@item
ÂçïËØçÁöÑÊ£ÄÊµã‰ΩøÁî®ÁöÑÊòØ @command{awk} ÈªòËÆ§‰ΩøÁî®Á©∫Ê†ºËøõË°åÂüüÂàÜÂâ≤ÁöÑÊÉØ‰æã„ÄÇÂú®ËæìÂÖ•‰∏≠ÁöÑÂÖ∂‰ªñÂ≠óÁ¨¶Ôºà‰∏çÂåÖÂê´Êç¢Ë°åÁ¨¶ÔºâÂØπ‰∫é @command{awk} Êù•ËØ¥Ê≤°ÊúâÁâπÊÆäÁöÑÂê´‰πâ„ÄÇËøôË°®Á§∫Ê†áÁÇπÁ¨¶Âè∑‰πü‰ºöÊàê‰∏∫ÂçïËØçÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

@item
ËæìÂá∫‰∏ç‰ºöÊúâ‰ªÄ‰πàÊúâÁî®ÁöÑÈ°∫Â∫è„ÄÇ‰Ω†Êõ¥ÊúâÂèØËÉΩÂØπÊúÄÂ∏∏Âá∫Áé∞ÁöÑÂçïËØçÊÑüÂÖ¥Ë∂£ÔºåÊàñËÄÖÂΩ¢Êàê‰∏Ä‰∏™Â≠óÊØçË°®Êù•Ë°®Á§∫ÊØè‰∏™ÂçïËØçÁöÑÂá∫Áé∞È¢ëÁéá„ÄÇ
@end itemize

@cindex @command{sort} utility
Á¨¨‰∏Ä‰∏™ÈóÆÈ¢òÂèØ‰ª•ÈÄöËøá @code{tolower()} Êù•ÁßªÈô§Â§ßÂ∞èÂÆöÊù•Ëß£ÂÜ≥„ÄÇÁ¨¨‰∏â‰∏™ÈóÆÈ¢òÂèØ‰ª•Áî® @code{gsub()} ÁßªÈô§Ê†áÁÇπÁ¨¶Âè∑Êù•Ëß£ÂÜ≥„ÄÇÊúÄÂêéÔºåÊàë‰ª¨ÈÄöËøá‰ΩøÁî®Á≥ªÁªüÁöÑ @command{sort} Â∑•ÂÖ∑Â§ÑÁêÜ @command{awk} ËÑöÊú¨ÁöÑËæìÂá∫Êù•Ëß£ÂÜ≥Á¨¨‰∏â‰∏™ÈóÆÈ¢ò„ÄÇËøôÊòØ‰∏Ä‰∏™Êñ∞ÁâàÊú¨ÁöÑÁ®ãÂ∫èÔºö

@cindex @code{wordfreq.awk} program
@example
@c file eg/prog/wordfreq.awk
# wordfreq.awk --- print list of word frequencies

@{
    $0 = tolower($0)    # remove case distinctions
    # remove punctuation
    gsub(/[^[:alnum:]_[:blank:]]/, "", $0)
    for (i = 1; i <= NF; i++)
        freq[$i]++
@}

@c endfile
END @{
    for (word in freq)
        printf "%s\t%d\n", word, freq[word]
@}
@end example

Ê≠£ÂàôË°®ËææÂºè @code{/[^[:alnum:]_[:blank:]]/} Êú¨ÂèØ‰ª•ÂÜôÂú® @code{/[[:punct:]]/}Ôºå‰ΩÜÊòØ‰∏ãÂàíÁ∫ø‰πüË¶ÅÁßªÈô§Ôºå‰ΩÜÊàë‰ª¨ÊÉ≥‰øùÁïôÂÆÉ„ÄÇ

ÂÅáËÆæÊàë‰ª¨ÊääËøô‰∏™Á®ãÂ∫è‰øùÁïô‰∏∫ÂêçÂ≠ó‰∏∫ @file{wordfreq.awk} ÁöÑÊñá‰ª∂ÔºåÊï∞ÊçÆÂú® @file{file1} ‰∏≠ÔºåÂàô‰∏ãÈù¢ÁöÑÁÆ°Á®ãÔºö

@example
awk -f wordfreq.awk file1 | sort -k 2nr
@end example

@noindent
‰ºö‰∫ßÁîüÂá∫Áé∞Âú® @file{file1} ‰∏≠ÁöÑÂçïËØçÈ¢ëÁéáÁöÑÈôçÂ∫èË°®„ÄÇ

@command{awk} Á®ãÂ∫èÈÄÇÂêà‰∫éÂ§ÑÁêÜ‰ø°ÊÅØ‰ª•ÂèäÊï∞ÊçÆÊù•‰∫ßÁîüÂçïËØçÈ¢ëÁéáË°®Ôºå‰ΩÜÊòØ‰∏çÊòØÊúâÂ∫èÁöÑ„ÄÇ@command{awk} ÁöÑËÑöÊú¨ËæìÂá∫ÁÑ∂ÂêéÈÄöËøá @command{sort} Â∑•ÂÖ∑Êù•ÊéíÂ∫èÔºåÁÑ∂ÂêéÂÜçÊâìÂç∞Âà∞Â±èÂπï‰∏ä„ÄÇ

Êèê‰∫§Áªô @command{sort} Â∑•ÂÖ∑ÁöÑÈÄâÊã©ÊåáÂÆöÊéíÂ∫è‰ΩøÁî®ÊØè‰∏™ËæìÂÖ•Ë°åÁöÑÁ¨¨‰∫å‰∏™ÂüüÔºàË∑≥ËøáÁ¨¨‰∏Ä‰∏™ÂüüÔºâÔºåÊéíÂ∫èÈîÆË¢´ÂΩìÊàêÊï∞ÂÄºÈáèÊù•ÂØπÂæÖÔºà‰∏çÁÑ∂ @samp{15} ‰ºöÊéíÂú® @samp{5} ‰πãÂâçÔºâÔºåÁÑ∂ÂêéÊéíÂ∫è‰ºö‰ª•ÈôçÂ∫èÔºàÈÄÜÂ∫èÔºâÁöÑÊñπÂºèÊù•ÊâßË°å„ÄÇ

@command{sort} ÁîöËá≥ÂèØ‰ª•Âú®Á®ãÂ∫è‰∏≠ÂÆåÊàêÔºåÂè™Ë¶ÅÊää @code{END} ÁöÑÂä®‰ΩúÊîπÊàêÂ¶Ç‰∏ãÔºö

@example
@c file eg/prog/wordfreq.awk
END @{
    sort = "sort -k 2nr"
    for (word in freq)
        printf "%s\t%d\n", word, freq[word] | sort
    close(sort)
@}
@c endfile
@end example

ËøôÁßçÊñπÂºèÁöÑÊéíÂ∫èÂøÖÈ°ª‰ΩøÁî®Âú®ÈÇ£‰∫õÂú®ÂëΩ‰ª§Ë°å‰∏ÄÂ±ÇÊ≤°ÊúâÁúüÊ≠£ÁöÑÁÆ°ÈÅìÁöÑÁöÑÁ≥ªÁªü‰∏äÔºàÊàñËÄÖÊâπÂ§ÑÁêÜÊñá‰ª∂Ôºâ„ÄÇÊü•ÁúãÊìç‰ΩúÁ≥ªÁªü‰∏äÂ¶Ç‰Ωï‰ΩøÁî® @command{sort} Á®ãÂ∫èÁöÑÊñáÊ°£Êù•Ëé∑ÂèñÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

@node History Sorting
@subsection ‰ªéÊú™ÊéíÂ∫èÁöÑÊñáÊú¨‰∏≠ÂéªÈáç

@cindex lines, duplicate@comma{} removing
@command{uniq} Á®ãÂ∫èÔºàÊü•Áúã @pxref{Uniq Program}ÔºâÂú®@emph{ÁªèËøáÊéíÂ∫è}ÁöÑÊï∞ÊçÆ‰∏≠ÁßªÈô§ÈáçÂ§çÁöÑË°å„ÄÇ

‰ΩÜÊòØÔºå‰Ω†ÂèØËÉΩÈúÄË¶ÅÁßªÈô§@value{DF}‰∏≠ÁöÑÈáçÂ§çÁöÑË°åÔºåËÄåÂèàÊÉ≥‰øùÁïôË°å‰∏≠ÁöÑÈ°∫Â∫è„ÄÇËøôÊ†∑Â§ÑÁêÜÁöÑ‰∏Ä‰∏™ÂêàÈÄÇÁöÑ‰æãÂ≠êÂ∞±ÊòØ Shell ÁöÑ histroy Êñá‰ª∂„ÄÇhistory Êñá‰ª∂‰øùÁïô‰∫Ü‰Ω†Â∑≤ÁªèËæìÂÖ•ËøáÁöÑÂëΩ‰ª§ÁöÑÂ§çÊú¨ÔºåÂú®‰∏ÄË°å‰∏≠ÈáçÂ§çÂá†Ê¨°Áõ∏ÂêåÁöÑÂëΩ‰ª§ÁöÑÊÉÖÂÜµÂπ∂‰∏çÂ§öËßÅ„ÄÇÊúâÊó∂ÂÄôÔºå‰Ω†ÂèØËÉΩÊÉ≥ÁßªÈô§ÈáçÂ§çÁöÑË°åÊù•ÂéãÁº©Êñá‰ª∂„ÄÇ‰ΩÜÊòØËøòË¶Å‰øùÁïôÊúÄÂàùÂëΩ‰ª§Ë°åÁöÑÈ°∫Â∫è„ÄÇ

‰∏ãÈù¢Ëøô‰∏™ÁÆÄÂçïÁöÑÁ®ãÂ∫èÂèØ‰ª•ÂÆåÊàêËøô‰∏™Â∑•‰Ωú„ÄÇÂÆÉ‰ºö‰ΩøÁî®‰∏§‰∏™Êï∞ÁªÑ„ÄÇ @code{data} Êï∞ÁªÑÁî±ÊØèË°åÁöÑÊñáÊú¨Êù•‰ΩúÁ¥¢Âºï„ÄÇÂØπÊØè‰∏ÄË°åÔºå@code{data[$0]} ‰ºöËøõË°åÈÄíÂ¢û„ÄÇÂ¶ÇÊûúÊüê‰∏™ÁâπÂÆöÁöÑË°å‰πãÂâçÊ≤°ÊúâÂá∫Áé∞ËøáÔºåÂàô @code{data[$0]} ‰ºöÊòØ 0„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÈÇ£‰∏ÄË°åÁöÑÊñáÊú¨‰ºöÂ≠òÂú® @code{lines[count]} ‰∏≠„ÄÇ@code{lines} ‰∏≠ÁöÑÂÖÉÁ¥†ÈÉΩÊòØÂîØ‰∏ÄÁöÑÔºåËÄå @code{lines} ÁöÑÁ¥¢ÂºïË°®Á§∫‰∫ÜË°åÂá∫Áé∞ÁöÑÈ°∫Â∫è„ÄÇ@code{END} ËßÑÂàô‰∏≠‰ªãÁÆÄÂçïÂú∞ÊåâÈ°∫Â∫èÊâìÂç∞Ëøô‰∫õË°åÔºö

@cindex Rakitzis, Byron
@cindex @code{histsort.awk} program
@example
@c file eg/prog/histsort.awk
# histsort.awk --- compact a shell history file
# Thanks to Byron Rakitzis for the general idea
@c endfile
@ignore
@c file eg/prog/histsort.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
@c endfile
@end ignore
@c file eg/prog/histsort.awk

@group
@{
    if (data[$0]++ == 0)
        lines[++count] = $0
@}
@end group

@group
END @{
    for (i = 1; i <= count; i++)
        print lines[i]
@}
@end group
@c endfile
@end example

Ëøô‰∏™Á®ãÂ∫è‰πüÊèê‰æõ‰∫ÜÁî®‰∫é‰∫ßÁîüÊúâÁî®‰ø°ÊÅØÁöÑ‰∏Ä‰∏™Âü∫Á°Ä„ÄÇÂ¶ÇÔºåÂú® @code{END} ËßÑÂàô‰∏≠‰ΩøÁî®‰∏ãÈù¢ÁöÑ @code{print} ËØ≠Âè•Ë°®Á§∫ÁâπÂÆöÂëΩ‰ª§‰ΩøÁî®ÁöÑÈ¢ëÂ∫¶Ôºö

@example
print data[lines[i]], lines[i]
@end example

@noindent
Ëøô‰πàÂÅöÊúâÊïàÊòØÂõ†‰∏∫ @code{data[$0]} Âú®Ë°åÊØèÂá∫Áé∞‰∏ÄÊ¨°ÈÉΩ‰ºöËøõË°åÈÄíÂ¢û„ÄÇ

@node Extract Program
@subsection ‰ªé Texinfo Ê∫êÊñá‰ª∂‰∏≠ÊèêÂèñÁ®ãÂ∫è

@cindex Texinfo, extracting programs from source files
@cindex files, Texinfo@comma{} extracting programs from
@ifnotinfo
Âú®Êú¨Á´†‰∏éÂâç‰∏ÄÁ´†ÔºàÊü•Áúã @ref{Library Functions}Ôºâ‰∏≠ÔºåÈÉΩÂ±ïÁ§∫‰∫ÜÂ§ßÈáèÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ
@end ifnotinfo
@ifinfo
Á´†ËäÇ @ref{Library Functions} Âíå @ref{Sample Programs} ÊòØÈ´òÁ≠âÁ∫ßÁöÑÂÜÖÂÆπÔºåÂÖ≥‰∫éÊõ¥Â§öÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ
@end ifinfo
Â¶ÇÊûú‰Ω†ÊÉ≥ÂÆûË∑µËøô‰∫õÁ®ãÂ∫èÔºåÂ¶ÇÊûúÂÜçÊ¨°ÊâãÂ∑•ËæìÂá∫Ëøô‰∫õÁ®ãÂ∫èÂàôÂ∞±Â§™ÁπÅÁêê‰∫Ü„ÄÇËøôÈáåÔºåÊàë‰ª¨Â±ïÁ§∫‰∫Ü‰∏Ä‰∏™Á®ãÂ∫èÂèØ‰ª•‰ªé Texinfo ÁöÑËæìÂÖ•Êñá‰ª∂‰∏≠ÊèêÂá∫ÈÉ®ÂàÜÂà∞‰∏Ä‰∏™Áã¨Á´ãÁöÑÊñá‰ª∂‰∏≠„ÄÇ

@cindex Texinfo
Êú¨@value{DOCUMENT} ÊòØÁî® @uref{http://www.gnu.org/software/texinfo/, Texinfo} ÂÜôÊàêÁöÑÔºåËøôÊòØ GNU È°πÁõÆÁöÑÊñáÊ°£Ê†ºÂºèËØ≠Ë®Ä„ÄÇ‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Texinfo Ê∫êÊñá‰ª∂ÂèØ‰ª•Áî®Êù•‰∫ßÁîüÊâìÂç∞ÁöÑ @TeX{} ÊñáÊ°£Ôºå‰πüÂèØ‰ª•‰∫ßÁîüÂú®Á∫øÊñáÊ°£„ÄÇ
@ifnotinfo
ÔºàTexinfo Âú®‰π¶ @cite{Texinfo---The GNU Documentation Format} ÊúâÂÆåÊï¥ÁöÑÊñáÊ°£Ôºå‰πüÂèØ‰ªéËá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÂèñÂæóÔºå‰πüÂèØ‰ª•Âú®
@uref{http://www.gnu.org/software/texinfo/manual/texinfo/, ÁΩë‰∏ä} ÂèñÂæó„ÄÇÔºâ
@end ifnotinfo
@ifinfo
ÔºàTexinfo ËØ≠Ë®ÄÊúâËØ¶ÁªÜÁöÑÊñáÊ°£Ôºå‰ªé @inforef{Top, , Texinfo, texinfo,Texinfo---The GNU Documentation Format} ÂºÄÂßã‰∫ÜËß£„ÄÇÔºâ
@end ifinfo

ÂØπ‰∫éÊàë‰ª¨Ëá™Â∑±ÁöÑÁõÆÁöÑÔºåÁü•ÈÅì Texinfo ËæìÂÖ•Êñá‰ª∂ÁöÑ‰∏â‰ª∂‰∫ãÊÉÖÂ∞±Â§ü‰∫ÜÔºö

@itemize @value{BULLET}
@item
‚Äúat‚Äù Á¨¶Âè∑Ôºà@samp{@@}ÔºâÂú® Texinfo ‰∏≠ÊòØÁâπÊÆäÁ¨¶Âè∑ÔºåÂ∞±ÂÉèÊòØÂú® C ÊàñËÄÖ @command{awk} ‰∏≠ÁöÑÂèçÊñúÊù†‰∏ÄÊ†∑Ôºà@samp{\}Ôºâ„ÄÇÂ≠óÈù¢ÁöÑ @samp{@@} Âú® Texinfo Ê∫êÊñá‰ª∂‰∏≠Áî± @samp{@@@@} Êù•Ë°®Á§∫„ÄÇ

@item
Ê≥®ÈáäÂêå @samp{@@c} ÂºÄÂßãÔºåÊàñËÄÖÁî± @samp{@@comment} ÂºÄÂßã„ÄÇÊñá‰ª∂ÊèêÂá∫Á®ãÂ∫èÈÄöËøá‰ΩøÁî®Âú®Ë°åÈ¶ñÂºÄÂßãÁöÑÁâπÊÆäÁöÑÊ≥®Èáä„ÄÇ

@item
ÂåÖÂê´ @samp{@@group} ‰∏é @samp{@@end group} ÂëΩ‰ª§ÂåÖÂê´‰æãÂ≠êÊñáÊú¨‰∏çÂèØ‰ª•ÂàÜÈ°µ„ÄÇÔºà‰∏çÂπ∏ÁöÑÊòØÔºå@TeX{} ‰∏çÊÄªÊòØË∂≥Â§üÊù•ÂÅöÊ≠£Á°ÆÁöÑ‰∫ãÊÉÖÔºåÂõ†Ê≠§Êàë‰ª¨ËøòÂæóÁªôÂÆÉ‰∏Ä‰∫õÂ∏ÆÂä©„ÄÇÔºâ
@end itemize

‰∏ãÈù¢ÁöÑÁ®ãÂ∫è @file{extract.awk} ‰ªé Texinfo Ê∫êÊñá‰ª∂‰∏≠ËØªÂèñÔºåÂπ∂Ê†πÊçÆÁâπÊÆäÊ≥®ÈáäÂÅö‰∏§‰ª∂‰∫ãÊÉÖ„ÄÇÂΩìÁúãÂà∞ @samp{@w{@@c system @dots{}}} Êó∂ÔºåÂÆÉÊâßË°å‰∏Ä‰∏™ÂëΩ‰ª§ÔºåÂπ∂‰ªéÂëΩ‰ª§ÊñáÊú¨‰∏≠ÊèêÂèñÊéßÂà∂Ë°åÂπ∂Â∞ÜÂÖ∂‰º†ÈÄíÁªô @code{system()} ÂáΩÊï∞
ÔºàÊü•Áúã @pxref{I/O Functions}Ôºâ„ÄÇÂΩìÁúãÂà∞ @samp{@@c file @var{filename}} Êó∂ÔºåÂÖ∂ÂêéÁª≠ÁöÑË°åÂ∞ÜË¢´ÂèëÈÄÅÂà∞Êñá‰ª∂ @var{filename} ‰∏≠ÔºåÁõ¥Âà∞ÁúãÂà∞ @samp{@@c endfile} ‰∏∫Ê≠¢„ÄÇ
Âú® @file{extract.awk} ËßÑÂàô‰∏≠ÔºåË¶Å‰πàÂåπÈÖç @samp{@@c} Ë¶Å‰πàÂåπÈÖç @samp{@@comment}ÔºåÂè™Ë¶ÅÂ∞Ü @samp{omment} Êàê‰∏∫ÂèØÈÄâÁöÑÈÉ®ÂàÜÂç≥ÂèØ„ÄÇÂåÖÂê´ @samp{@@group} ‰∏é @samp{@@end group} ÁöÑË°åÔºåÂè™ÊòØÁÆÄÂçïÂú∞ÁßªÈô§„ÄÇ@file{extract.awk} ‰ΩøÁî®Âà∞ @code{join()} Â∫ìÂáΩÊï∞ÔºàÊü•Áúã @pxref{Join Function}Ôºâ„ÄÇ

Âú® @cite{@value{TITLE}} Ôºà@file{gawktexi.in}ÔºâÁöÑ Texinfo ÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÁöÑ‰æãÂ≠êÁ®ãÂ∫èÈÉΩÂ∑≤ÁªèÂåÖÂê´Âú® @samp{file} ‰∏é @samp{endfile} ‰∏≠ÁöÑË°åÈáå„ÄÇ
@command{gawk} ÂèëË°åÁâàÊú¨‰ΩøÁî® @file{extract.awk} ÁöÑ‰∏Ä‰∏™Â§çÊú¨Êù•ÊèêÂèñ‰æãÂ≠êÁ®ãÂ∫èÔºåÂπ∂Â∞Ü‰ªñ‰ª¨‰∏≠ÁöÑÂ§öÊï∞ÂÆâË£ÖÂà∞‰∫ÜÊ†áÂáÜÁöÑ @command{gawk} ÂèØÊü•ÊâæÂà∞ÁõÆÂΩï‰∏≠„ÄÇTexinfo Êñá‰ª∂ÁúãËµ∑Êù•ËøôÊ†∑Ôºö

@example
@dots{}
This program has a @@code@{BEGIN@} rule
that prints a nice message:

@@example
@@c file examples/messages.awk
BEGIN @@@{ print "Don't panic!" @@@}
@@c endfile
@@end example

It also prints some final advice:

@@example
@@c file examples/messages.awk
END @@@{ print "Always avoid bored archaeologists!" @@@}
@@c endfile
@@end example
@dots{}
@end example

@file{extract.awk} Â∞Ü @code{IGNORECASE} ËÆæÁΩÆ‰∏∫ 1ÔºåÊâÄ‰ª•Â§ßÂ∞èÂÜôÊ∑∑ÂêàÂú®ÊåáÁ§∫Á¨¶‰∏≠‰∏ç‰ºöÊúâ‰ªÄ‰πàÂΩ±Âìç„ÄÇ

Á¨¨‰∏Ä‰∏™ËßÑÂàôÂ§ÑÁêÜ @code{system()} Ë∞ÉÁî®ÔºåÊ£ÄÊü•Ë¶ÅÊâßË°åÁöÑÂëΩ‰ª§Ôºà@code{NF} Ëá≥Â∞ë‰∏∫ 3 ÔºâÂπ∂‰∏î‰πüÊ£ÄÊü•ÂëΩ‰ª§Âá∫‰ª£Á†Å‰∏∫ÊòØÂê¶‰∏∫ 0ÔºåÂç≥Ë°®Á§∫ÊâßË°å OKÔºö

@cindex @code{extract.awk} program
@example
@c file eg/prog/extract.awk
# extract.awk --- extract files and run programs from Texinfo files
@c endfile
@ignore
@c file eg/prog/extract.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# May 1993
# Revised September 2000
@c endfile
@end ignore
@c file eg/prog/extract.awk

BEGIN    @{ IGNORECASE = 1 @}

/^@@c(omment)?[ \t]+system/ @{
    if (NF < 3) @{
        e = ("extract: " FILENAME ":" FNR)
        e = (e  ": badly formed `system' line")
        print e > "/dev/stderr"
        next
    @}
    $1 = ""
    $2 = ""
    stat = system($0)
    if (stat != 0) @{
        e = ("extract: " FILENAME ":" FNR)
        e = (e ": warning: system returned " stat)
        print e > "/dev/stderr"
    @}
@}
@c endfile
@end example

@noindent
ÂèòÈáè @code{e} Áî®Êù•‰ΩøËßÑÂàôÂæàÂ•ΩÂú∞ÂåπÈÖçÈ°µ @value{PAGE}„ÄÇ

Á¨¨‰∫å‰∏™ËßÑÂàôÂ∞ÜÊï∞ÊçÆÁßªÂä®Âà∞Êñá‰ª∂‰∏≠„ÄÇÂÆÉ‰ºöÊ£ÄÊü•Âú®ÊåáÁ§∫Á¨¶‰∏≠ÁªôÂá∫ÁöÑ@value{FN}„ÄÇÂ¶ÇÊûúÊñá‰ª∂Âêç‰∏çÊòØÂΩìÂâçÁöÑÊñá‰ª∂ÔºåÁÑ∂ÂêéÂΩìÂâçÊñá‰ª∂Â∞±‰ºöË¢´ÂÖ≥Èó≠„ÄÇËÆ©ÂΩìÂâçÁöÑÊñá‰ª∂‰∏ÄÁõ¥ÊâìÂºÄÂà∞Â§ÑÁêÜ‰∏ã‰∏Ä‰∏™Êñ∞Êñá‰ª∂ÔºåËøôÊ†∑‰Ω†ÂèØ‰ª•‰ΩøÁî® @samp{>} Êù•ÈáçÂÆöÂêëÊâìÂç∞ÂÜÖÂÆπÔºåÊâìÂºÄÊñá‰ª∂ÁöÑÁÆ°ÁêÜ‰πüÂæàÁÆÄÂçï„ÄÇ

@code{for} Âæ™ÁéØÂ§ÑÁêÜÁúüÊ≠£ÁöÑÂ∑•‰Ωú„ÄÇÂÆÉ‰ΩøÁî® @code{getline} ÔºàÊü•Áúã @pxref{Getline}ÔºâÊù•ËØªÂèñË°å„ÄÇÂØπ‰∫é‰∏Ä‰∏™Êú™ÊúüÊúõÁöÑÊñá‰ª∂Â∞æÔºåÂÆÉ‰ºöË∞ÉÁî® @code{@w{unexpected_eof()}} ÂáΩÊï∞„ÄÇÂ¶ÇÊûúË°åÊòØ‰∏Ä‰∏™ @samp{endfile} Ë°åÔºåÂàôÂÆÉÂ∞±Ë∑≥Âá∫Âæ™ÁéØ„ÄÇÂ¶ÇÊûúË°åÊòØ @samp{@@group} ÊàñËÄÖ @samp{@@end group} Ë°åÔºåÂàôÂÆÉ‰ºöÂøΩÁï•ÊéâÔºåÁÑ∂ÂêéÁªßÁª≠Â§ÑÁêÜ‰∏ã‰∏ÄË°å„ÄÇÁ±ª‰ººÂú∞Ôºå‰æãÂ≠ê‰∏≠ÁöÑÊ≥®Èáä‰πüË¢´ÂøΩÁï•Êéâ„ÄÇ

Â§ßÂ§öÊï∞ÁöÑÂ∑•‰ΩúÈÉΩÂú®‰∏ãÈù¢Âá†Ë°å„ÄÇÂ¶ÇÊûúË°å‰∏≠Ê≤°Êúâ @samp{@@} Á¨¶Âè∑ÔºåÂàôÁ®ãÂ∫èÂèØ‰ª•Áõ¥Êé•ÊâìÂç∞ÂÆÉÔºåÂê¶ÂàôÊØè‰∏Ä‰∏™ÂâçÂØºÁöÑ @samp{@@} ÂøÖÈ°ªË¢´ÂéªÊéâ„ÄÇ‰∏∫‰∫ÜÁßªÈô§ @samp{@@} Á¨¶Âè∑Ôºå‰ΩøÁî® @code{split()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{String Functions}ÔºâË°åË¢´ÂàÜÂâ≤Êàê @code{a} Êï∞ÁªÑÁöÑ‰∏çÂêåÂÖÉÁ¥†„ÄÇ
@samp{@@} Á¨¶Âè∑Ë¢´Áî®‰∫éÂàÜÈöîÁ¨¶„ÄÇ@code{a} ÁöÑÊØè‰∏Ä‰∏™Á©∫ÂÖÉÁ¥†Ë°®Á§∫Âú®ÂéüË°å‰∏≠ÁöÑ‰∏§‰∏™ËøûÁª≠ÁöÑ @samp{@@} Á¨¶Âè∑„ÄÇÂØπÊØè‰∏§‰∏™Á©∫ÂÖÉÁ¥†ÔºàÂú®ÂéüÊñá‰ª∂‰∏≠ÁöÑ @samp{@@@@}ÔºâÔºåÊàë‰ª¨ÈúÄË¶ÅÂä†‰∏Ä‰∏™ @samp{@@} Á¨¶Âè∑ËøõÊù•„ÄÇ

ÂΩìÊï∞ÁªÑÁöÑÂ§ÑÁêÜÂ∑≤ÁªèÂÆåÊàêÔºå@code{join()} ÂàôË¢´‰ª• @code{SUBSEP} ÁöÑÂÄºË∞ÉÁî®ÔºàÊü•Áúã @pxref{Multidimensional}ÔºâÔºåÁî®‰ª•Â∞ÜÂàÜÊï£ÁöÑÂùóËøûÊé•Êàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑË°å„ÄÇËØ•Ë°åÁÑ∂ÂêéË¢´ÊâìÂç∞Âà∞ËæìÂá∫Êñá‰ª∂‰∏≠Ôºö

@example
@c file eg/prog/extract.awk
/^@@c(omment)?[ \t]+file/ @{
    if (NF != 3) @{
        e = ("extract: " FILENAME ":" FNR ": badly formed `file' line")
        print e > "/dev/stderr"
        next
    @}
    if ($3 != curfile) @{
        if (curfile != "")
            close(curfile)
        curfile = $3
    @}

    for (;;) @{
        if ((getline line) <= 0)
            unexpected_eof()
        if (line ~ /^@@c(omment)?[ \t]+endfile/)
            break
        else if (line ~ /^@@(end[ \t]+)?group/)
            continue
        else if (line ~ /^@@c(omment+)?[ \t]+/)
            continue
        if (index(line, "@@") == 0) @{
            print line > curfile
            continue
        @}
        n = split(line, a, "@@")
        # if a[1] == "", means leading @@,
        # don't add one back in.
        for (i = 2; i <= n; i++) @{
            if (a[i] == "") @{ # was an @@@@
                a[i] = "@@"
                if (a[i+1] == "")
                    i++
            @}
        @}
        print join(a, 1, n, SUBSEP) > curfile
    @}
@}
@c endfile
@end example

ËøôÈáåË¶ÅÊ≥®ÊÑè‰∏Ä‰∏™ÈáçË¶ÅÁöÑ‰∫ãÊÉÖÂ∞±ÊòØ @samp{>} ÈáçÂÆöÂêëÁ¨¶ÁöÑ‰ΩøÁî®„ÄÇÁî® @samp{>} ËæìÂá∫Âè™‰ºöÊâìÂºÄ‰∏ÄÊ¨°Êñá‰ª∂ÔºåÁÑ∂Âêé‰ºö‰∏Ä‰øùÊåÅÊâìÂºÄÔºåÂêéÁª≠ÁöÑËæìÂá∫Êìç‰Ωú‰ºöÈôÑÂä†Âà∞Êñá‰ª∂‰∏≠ÔºàÊü•Áúã @pxref{Redirection}Ôºâ„ÄÇËøô‰ΩøÂæóÂæàÂÆπÊòìÊ∑∑ÂêàÁ®ãÂ∫èÊñáÊú¨‰∏éÈíàÂØπÁõ∏ÂêåÊ∫êÊñá‰ª∂ÁöÑËß£ÈáäÊÄßÁöÑÊñáÂ≠óÔºàÊ≠£Â¶ÇËøôÈáåÊâÄÂÅöÁöÑ‰∏ÄÊ†∑ÔºâËÄåÊ≤°Êúâ‰ªª‰ΩïÈóÆÈ¢ò„ÄÇÊñá‰ª∂Âè™Âú®Â§ÑÁêÜ‰∏Ä‰∏™Êñ∞ÁöÑ@value{DF}ÁöÑÊó∂ÂÄôÊâç‰ºöË¢´ÂÖ≥Èó≠ÔºåÊàñËÄÖÂú®ËæìÂÖ•Êñá‰ª∂ËæìÂÖ•ÁªìÊùüÊó∂ÂÖ≥Èó≠„ÄÇ

ÊúÄÂêéÔºå@code{@w{unexpected_eof()}} ÂáΩÊï∞ÊâìÂç∞ÂêàÈÄÇÁöÑÈîôËØØ‰ø°ÊÅØÂπ∂ÈÄÄÂá∫„ÄÇ@code{END} ËßÑÂàôÂ§ÑÁêÜÊúÄÂêéÁöÑÊ∏ÖÁêÜÂ∑•‰ΩúÔºåÂÖ≥Èó≠ÊâìÂºÄÁöÑÊñá‰ª∂Ôºö

@example
@c file eg/prog/extract.awk
@group
function unexpected_eof()
@{
    printf("extract: %s:%d: unexpected EOF or error\n",
                     FILENAME, FNR) > "/dev/stderr"
    exit 1
@}
@end group

END @{
    if (curfile)
        close(curfile)
@}
@c endfile
@end example

@node Simple Sed
@subsection ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊµÅÁºñËæëÂô®

@cindex @command{sed} utility
@cindex stream editors
@command{sed} ÊòØ‰∏Ä‰∏™ÊµÅÁºñËæëÂô®ÔºåÂÆÉÊòØ‰∏Ä‰∏™@dfn{ËØªÂèñÊï∞ÊçÆÊµÅ}ÔºåÊîπÂèòÂÆÉÁÑ∂Âêé‰º†ÈÄíÂÆÉÁöÑÁ®ãÂ∫è„ÄÇÈÄöËøáÂÆÉË¢´Áî®Êù•ÂØπ‰∏Ä‰∏™Â§ßÁöÑÊñá‰ª∂ÊàñËÄÖÁî±ÂëΩ‰ª§ÁöÑÁÆ°Á®ã‰∫ßÁîüÁöÑÊï∞ÊçÆÊµÅÂÅö‰∏Ä‰∫õÂÖ®Â±ÄÊÄßÁöÑÊõ¥Êîπ„ÄÇÂ∞ΩÁÆ° @command{sed} Âú®ÂÆÉÈÇ£ËæπÊù•ËØ¥ÊòØ‰∏Ä‰∏™ÂæàÂ§çÊùÇÁöÑÁ®ãÂ∫èÔºå‰ΩÜÊòØÂÆÉÁöÑÈÄöÂ∏∏Áî®Ê≥ïÊòØÂú®ÁÆ°Á∫øÁöÑ‰∏≠ÈÄîÂÅö‰∏Ä‰∫õÂÖ®Â±ÄÊÄßÁöÑÊõøÊç¢Ôºö

@example
@var{command1} < orig.data | sed 's/old/new/g' | @var{command2} > result
@end example

Â¶Ç @samp{s/old/new/g} ÂëäËØâ @command{sed} Âú®ÊØè‰∏Ä‰∏™ËæìÂÖ•Ë°åÊü•ÊâæÊ≠£ÂàôË°®ËææÂºè @samp{old}ÔºåÂπ∂ÂÖ®Â±ÄÊÄßÂú∞ÊõøÊç¢ÂÆÉ‰∏∫ @samp{new} ÔºàÂç≥Âú®‰∏ÄË°å‰∏≠ÊâÄÊúâÂá∫Áé∞Ôºâ„ÄÇËøô‰∏™‰∏é @command{awk} ÁöÑ @code{gsub()} ÂáΩÊï∞ÔºàÊü•Áúã @ref{String Functions}ÔºâÈùûÂ∏∏Á±ª‰ºº„ÄÇ

‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºå@file{awksed.awk} Êé•Êî∂Ëá≥Â∞ë‰∏§‰∏™ÂëΩ‰ª§Ë°åÂèÇÊï∞Ôºö‰∏Ä‰∏™ÊòØË¶ÅÊü•ÊâæÁöÑÊ®°ÂºèÔºå‰ª•ÂèäÊõøÊç¢ÂÆÉÁöÑÊñáÊú¨„ÄÇ‰ªª‰ΩïÂÖ∂‰ªñÁöÑÂèÇÊï∞ÈÉΩÂΩìÊàêÊòØË¶ÅÂ§ÑÁêÜÁöÑ@value{DF}Âêç„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõÊñá‰ª∂ÂêçÔºåÂàô‰ΩøÁî®Ê†áÂáÜËæìÂÖ•Ôºö

@cindex Brennan, Michael
@cindex @command{awksed.awk} program
@c @cindex simple stream editor
@c @cindex stream editor, simple
@example
@c file eg/prog/awksed.awk
# awksed.awk --- do s/foo/bar/g using just print
#    Thanks to Michael Brennan for the idea
@c endfile
@ignore
@c file eg/prog/awksed.awk
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# August 1995
@c endfile
@end ignore
@c file eg/prog/awksed.awk

function usage()
@{
    print "usage: awksed pat repl [files...]" > "/dev/stderr"
    exit 1
@}

BEGIN @{
    # validate arguments
    if (ARGC < 3)
        usage()

    RS = ARGV[1]
    ORS = ARGV[2]

    # don't use arguments as files
    ARGV[1] = ARGV[2] = ""
@}

@group
# look ma, no hands!
@{
    if (RT == "")
        printf "%s", $0
    else
        print
@}
@end group
@c endfile
@end example

Á®ãÂ∫è‰æùËµñ‰∫é @command{gawk} ÂèØ‰ª•Â∞Ü @code{RS} ËµãÂÄº‰∏∫Ê≠£ÂàôË°®ËææÂºèÁöÑËÉΩÂäõÔºå‰ª•ÂèäËÆæÁΩÆ @code{RT} ‰∏∫ÂÆûÈôÖÁöÑÁªìÊùüËÆ∞ÂΩïÁöÑÊñáÊú¨ÔºàÊü•Áúã @pxref{Records}Ôºâ„ÄÇ

ÊÄùË∑ØÂ∞±ÊòØËÆ© @code{RS} Êàê‰∏∫Ë¶ÅÊü•ÊâæÁöÑÊ®°Âºè„ÄÇ@command{gawk} ‰ºöÂ§ÑÁΩÆËÆæÁΩÆ @code{$0} ‰∏∫Âú®ÂåπÈÖçÊ®°Âºè‰πãÈó¥ÁöÑÊñáÊú¨„ÄÇËøôÂ∞±ÊòØÊàë‰ª¨ÊÉ≥Ë¶Å‰øùÁïôÁöÑÔºå‰∏çÁªè‰øÆÊîπÁöÑÊñáÊú¨„ÄÇÁÑ∂ÂêéÔºåËÆæÁΩÆ @code{ORS} ‰∏∫ÊõøÊç¢ÁöÑÊñá‰ª∂„ÄÇ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ @code{print} ËØ≠Âè•ËæìÂá∫Êàë‰ª¨ÊÉ≥Ë¶Å‰øùÁïôÁöÑÊñáÊú¨ÔºåÂêéÈù¢Ë∑üÁùÄË¶ÅÊõøÊç¢ÁöÑÊñáÊú¨„ÄÇ

Ëøô‰∏™ÊñπÊ≥ïÊúâ‰∏Ä‰∏™‰∏çÂÆåÁæéÁöÑÂú∞ÊñπÔºåÂç≥Â¶ÇÊûúÊúÄÂêé‰∏ÄÊù°ËÆ∞ÂΩï‰∏çÊòØ‰ª•ÂåπÈÖç @code{RS} ÁöÑÊñáÊú¨ÁªìÊùüËØ•ÊÄé‰πàÂäû„ÄÇ‰ΩøÁî® @code{print} ËØ≠Âè•Êó†Êù°‰ª∂Âú∞ÊâìÂç∞ÊõøÊç¢ÊñáÊú¨ÊòØ‰∏çÊ≠£Á°ÆÁöÑ„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÊñá‰ª∂‰∏çÊòØ‰ª•ÂåπÈÖç @code{RS} ÁöÑÊñáÊú¨ÁªìÊùüÔºå@code{RT} ‰ºöË¢´ËÆæÁΩÆÊàêÁ©∫‰∏≤„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî® @code{printf} Êù•ÊâìÂç∞ @code{$0}„ÄÇÔºàÊü•Áúã @pxref{Printf}Ôºâ

@code{BEGIN} ËßÑÂàôÂ§ÑÁêÜÁéØÂ¢ÉÁöÑËÆæÁΩÆÔºåÊ£ÄÊü•ÂèÇÊï∞ÁöÑÊ≠£Á°ÆÊï∞ÂÄºÔºåÂπ∂Âú®Âá∫ÈóÆÈ¢òÊó∂Ë∞ÉÁî® @code{usage()} ÂáΩÊï∞„ÄÇÁÑ∂ÂêéÂÜçËÆæÁΩÆ @code{RS} ‰∏é @code{ORS} ‰∏∫‰ªéÂëΩ‰ª§Ë°å‰∏≠ÂèñÂæóÁöÑÂèÇÊï∞ÔºåÂπ∂Ë∞ÉÂçè @code{ARGV[1]} ‰∏é @code{ARGV[2]} ‰∏∫Á©∫‰∏≤ÔºåËøôÊ†∑ÂÆÉ‰ª¨Â∞±‰∏ç‰ºöË¢´ÂΩìÊàêÊñá‰ª∂ÂêçÊù•Â§ÑÁêÜÔºàÊü•Áúã @pxref{ARGC and ARGV}Ôºâ„ÄÇ

@code{usage()} ÂáΩÊï∞‰ºöÊâìÂç∞‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÂπ∂ÈÄÄÂá∫„ÄÇÊúÄÂêéÔºå‰∏Ä‰∏™ÁÆÄÂçïÁöÑËßÑÂàôÊ†πÊçÆ @code{RT} ÁöÑÂÄºÊù•Áõ∏Â∫îÂú∞‰ΩøÁî® @code{print} ‰∏é @code{printf} Êù•ÊâìÂç∞‰πãÂâçÁ°ÆÂÆöÂ•ΩÁöÑÊñπÊ°à„ÄÇ

@node Igawk Program
@subsection ‰ΩøÁî®Â∫ìÂáΩÊï∞ÁöÑÁÆÄÂçïÊñπÂºè

@cindex libraries of @command{awk} functions, example program for using
@cindex functions, library, example program for using
Âú® @ref{Include Files} ‰∏≠Êàë‰ª¨ÁúãÂà∞‰∫Ü @command{gawk} Â¶Ç‰ΩïÊù•Êèê‰æõÂÜÖÁΩÆÁöÑÊñá‰ª∂ÂåÖÂê´ËÉΩÂäõ„ÄÇ‰ΩÜÊòØÔºåËøôÊòØ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇ
Ëøô‰∏Ä@value{SECTION}Êèê‰æõ‰∫ÜËÆ©Ê†áÂáÜÁöÑ @command{awk} ÊúâÊñá‰ª∂ÂåÖÂê´ËÉΩÂäõÁöÑÂä®Êú∫Ôºå‰ª•ÂèäÂ¶Ç‰ΩïÈÄöËøá Shell ‰∏é @command{awk} ÁöÑÁºñÁ®ãÁªÑÂêàÊù•ÂÆûÁé∞„ÄÇ

‰ΩøÁî®Âú® @command{awk} ‰∏≠ÁöÑÂ∫ìÂáΩÊï∞Áî®Â§ÑÈùûÂ∏∏Â§ß„ÄÇÂÆÉÈºìÂä±‰ª£Á†ÅÈáçÁî®Êù•ÂÜô‰∏Ä‰∫õÈÄöÁî®ÂáΩÊï∞„ÄÇÁ®ãÂ∫èÁúãËµ∑Êù•‰ºöÊõ¥Â∞èÊõ¥Ê∏ÖÊô∞„ÄÇ‰ΩÜÊòØÔºåÂÜô @command{awk} Á®ãÂ∫èÊó∂‰ΩøÁî®Â∫ìÂáΩÊï∞ÈùûÂ∏∏ÂÆπÊòìÔºå‰ΩÜÊòØËøêË°å‰ªñ‰ª¨Êó∂Âç¥ÂæàÁóõËã¶ÔºåÂõ†‰∏∫ÈúÄË¶ÅÂ§ö‰∏™ @option{-f} ÈÄâÈ°π„ÄÇÂ¶ÇÊûú @command{gawk} ‰∏çÂèØÁî®ÔºåÂàôÈÄöËøá @env{AWKPATH} ÁéØÂ¢ÉÊù•ÂèòÈáèÊù•Â∞Ü @command{awk} ÂáΩÊï∞ÊîæÂà∞Â∫ìÁõÆÂΩïÁöÑËÉΩÂäõ‰πü‰∏ÄÊ†∑ÁóõËã¶ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇÂ¶ÇÊûúËÉΩ‰ª•‰∏ãÈù¢ÁöÑÊñπÂºèÊù•ÂÜôÁ®ãÂ∫èÂàôÂ∞±ÈùûÂ∏∏Â•Ω‰∫ÜÔºö

@example
# library functions
@@include getopt.awk
@@include join.awk
@dots{}

# main program
BEGIN @{
    while ((c = getopt(ARGC, ARGV, "a:b:cde")) != -1)
        @dots{}
    @dots{}
@}
@end example

‰∏ãÈù¢ÁöÑÁ®ãÂ∫è @file{igawk.sh} Êèê‰æõ‰∫ÜËøôÊ†∑ÁöÑÊúçÂä°„ÄÇÂÆÉÊ®°Êãü @command{gawk} ÁöÑÊêúÁ¥¢ @env{AWKPATH} ÂèòÈáèÁöÑË°å‰∏∫ÔºåÂπ∂ÂÖÅËÆ∏@dfn{ÂµåÂ•ó}ÁöÑÂåÖÂê´ÔºàÂç≥Ë¢´ @code{@@include} ÂåÖÂê´ÁöÑÊñá‰ª∂ÂèØ‰ª•ÂÜçÂåÖÂê´ @code{@@include} ËØ≠Âè•Ôºâ„ÄÇ@command{igawk} Âä™Âäõ‰ΩøÊñá‰ª∂Âè™Ë¢´ÂåÖÂê´‰∏ÄÊ¨°ÔºåÂõ†Ê≠§ÂµåÂ•óÁöÑÂåÖÂê´‰∏ç‰ºöÂÅ∂ÁÑ∂ÂåÖÂê´‰∏Ä‰∏™Â∫ìÂáΩÊï∞‰∏§Ê¨°„ÄÇ

@command{igawk} Â∫îËØ•Â§ñÂú®Ë°®Áé∞ÂæóÂÉè @command{gawk}„ÄÇËøôÂ∞±ÊòØËØ¥ÔºåÂÆÉÂèØ‰ª•Êé•Êî∂ÊâÄÊúâÁöÑ @command{gawk} ÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞ÔºåÂåÖÂê´ÈÄöËøá @option{-f} ÊåáÂÆöÂ§ö‰∏™Ê∫êÊñá‰ª∂ÁöÑËÉΩÂäõ‰ª•ÂèäËÉΩÂ§üÊ∑∑Áî®ÂëΩ‰ª§Ë°å‰∏éÂ∫ìÊ∫êÊñá‰ª∂ÁöÑËÉΩÂäõ„ÄÇ

Á®ãÂ∫è‰ΩøÁî® POSIX ShellÔºà@command{sh}ÔºâÂëΩ‰ª§ËØ≠Ë®ÄÂÜôÊàê„ÄÇ
@footnote{ÂÆåÊï¥ÁöÑ @command{sh} ËØ≠Ë®ÄÁöÑËß£ÈáäË∂ÖÂá∫‰∫ÜËøôÊú¨‰π¶ÁöÑËåÉÂõ¥„ÄÇÊàë‰ª¨Êèê‰æõ‰∫Ü‰∏Ä‰∫õÊúÄÂ∞èÁöÑËØ¥ÊòéÔºå‰ΩÜÊòØÂ¶ÇÊûú‰Ω†ÊÉ≥Êõ¥Ê∑±ÂÖ•Âú∞ÁêÜËß£ÔºåËØ∑ÈòÖËØª‰∏Ä‰∏™Â•ΩÁöÑ Shell ÁºñÁ®ã‰π¶„ÄÇ}
ÂÆÉÂ∑•‰ΩúÊñπÂºèÂ¶Ç‰∏ãÔºö

@enumerate
@item
ÂΩìÁ®ãÂ∫èÂ±ïÂºÄÊâßË°åÊó∂ÔºåÂæ™ÁéØËø≠‰ª£ÂèÇÊï∞Ôºå‰øùÂ≠òÊâÄÊúâ‰∏ç‰ª£Ë°® @command{awk} Ê∫ê‰ª£Á†ÅÁöÑÂèÇÊï∞‰ª•Â§áÁî®„ÄÇ

@item
ÂØπ‰∫é‰ªª‰Ωï‰∏ç‰ª£Ë°® @command{awk} Êñá‰ª∂ÁöÑÂèÇÊï∞ÔºåÂ∞ÜÂèÇÊï∞ÊîæÂà∞‰∏Ä‰∏™ÂèØÂ±ïÂºÄÁöÑ Shell ÂèòÈáè‰∏≠„ÄÇÊúâ‰∏§ÁßçÊÉÖÂΩ¢Ôºö

@enumerate a
@item
ÂØπ‰∫éÁî± @option{-e} ÊàñËÄÖ @option{--source} Êèê‰æõÁöÑÂ≠óÈù¢ÊñáÊú¨„ÄÇËøô‰∏™ÊñáÊú¨Âè™ÊòØÁõ¥Êé•ËøõË°åÈôÑÂä†„ÄÇ

@item
Áî± @option{-f} ÂèÇÊï∞Êèê‰æõÁöÑÊ∫ê@value{FN}„ÄÇÊàë‰ª¨‰ΩøÁî®‰∏Ä‰∏™Â∞èÊäÄÂ∑ßÔºåÂπ∂ÈôÑÂä† @samp{@@include @var{filename}} Âà∞ Shell ÂèòÈáèÁöÑÂÜÖÂÆπ‰∏≠„ÄÇÁî±‰∫éÊñá‰ª∂ÂåÖÂê´Á®ãÂ∫èÂ¶Ç @command{gawk} ‰∏ÄÊ†∑ÁöÑÂ∑•‰ΩúÊñπÂºèÔºåËøôÂèØ‰ª•Âú®Ê≠£Á°ÆÁöÑÁÇπÂèñÂæóÁ®ãÂ∫è‰∏≠ÂåÖÂê´ÁöÑÊñá‰ª∂ÁöÑÊñáÊú¨„ÄÇ
@end enumerate

@item
Âú® Shell ÂèòÈáè‰πã‰∏äÔºåÊâßË°å @command{awk} Á®ãÂ∫èÔºàËá™ÁÑ∂Âú∞ÔºâÊù•Â±ïÂºÄ @code{@@include} ËØ≠Âè•„ÄÇË¢´Â±ïÂºÄÁöÑÁ®ãÂ∫èÊîæÊîæÂú®Á¨¨‰∫å‰∏™ Shell ÂèòÈáè‰∏≠„ÄÇ

@item
Áî® @command{gawk} ËøêË°åÂ±ïÂºÄÁöÑÁ®ãÂ∫è‰ª•ÂèäÂÖ∂‰ªñÁöÑÁî®Êà∑Êèê‰æõÁöÑÂëΩ‰ª§ÂèÇÊï∞Ôºà‰æãÂ¶Ç@value{DF}ÂêçÔºâ„ÄÇ
@end enumerate

Ëøô‰∏™Á®ãÂ∫èÊâ©Â±ïÂú∞‰ΩøÁî® Shell ÂèòÈáèÔºöÁî®‰∫éÂ≠òÂÇ®ÂëΩ‰ª§Ë°åÂèÇÊï∞‰ª•ÂèäÂ∞Ü‰ºöÂ±ïÂºÄÁî®Êà∑Á®ãÂ∫èÁöÑ @command{awk} Á®ãÂ∫èÁöÑÊñáÊú¨ÔºåÁî®‰∫éÁî®Êà∑ÁöÑÂàùÂßãÁ®ãÂ∫è‰ª•ÂèäÂ±ïÂºÄÁöÑÁ®ãÂ∫è„ÄÇËøô‰πàÂÅöÂèØ‰ª•ÁßªÈô§‰∏Ä‰∫õÂΩìÊàë‰ª¨‰ΩøÁî®‰∏¥Êó∂Êñá‰ª∂ËÄåÂØºËá¥ÁöÑÊΩúÂú®ÁöÑÈóÆÈ¢òÔºå‰ΩÜÊòØ‰ª£‰ª∑Â∞±ÊòØ‰ΩøËÑöÊú¨Â∏¶Êù•‰∏ÄÂÆöÁöÑÂ§çÊùÇÊÄß„ÄÇ

Á®ãÂ∫èÁöÑÂºÄÂßãÈÉ®ÂàÜÔºåÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØ @samp{debug}ÔºåÂàôÊâìÂºÄ Shell ÁöÑË∑üË∏™„ÄÇ

‰∏ã‰∏Ä‰∏™ÈÉ®ÂàÜ‰ºöÂæ™ÁéØÊâÄÊúâÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞„ÄÇÊúâÂá†‰∏™ÊÉÖÂÜµÈùûÂ∏∏ÊúâÊÑèÊÄùÔºö

@c @asis for docbook
@table @asis
@item @option{--}
ËøôÁî±‰∫éÁªìÊùü @command{igawk} ÁöÑÂèÇÊï∞„ÄÇÂÖ∂‰ªñÁöÑ‰ªªÊÑèÂèÇÊï∞Â∫îËØ•Ë¢´ÂéüÊ†∑Âú∞‰º†ÈÄíÂà∞Áî®Êà∑ÁöÑ @command{awk} Á®ãÂ∫è„ÄÇ

@item @option{-W}
ËøôË°®Á§∫‰∏ã‰∏Ä‰∏™ÈÄâÈ°πÊòØÁâπÂÆö‰∫é @command{gawk} ÁöÑ„ÄÇ‰∏∫‰∫Ü‰ΩøÂèÇÊï∞Â§ÑÁêÜÊõ¥Âä†ÂÆπÊòìÔºå@option{-W} Ë¢´ÈôÑÂä†Âà∞Ââ©‰∏ãÁöÑÂèÇÊï∞ÁöÑÂâçÈù¢ÔºåÁÑ∂ÂêéÁªßÁª≠Âæ™ÁéØ„ÄÇÔºàËøôÊòØ‰∏Ä‰∏™ @command{sh} ÁöÑÁºñÁ®ãÊäÄÂ∑ß„ÄÇÂ¶ÇÊûú‰Ω†‰∏çÁÜüÊÇâ @command{sh} ‰πü‰∏çÁî®ÊãÖÂøÉ„ÄÇÔºâ

@item @option{-v}, @option{-F}
Ëøô‰ºöË¢´Â≠òÂÇ®Âπ∂Ë¢´‰º†ÈÄíÁªô @command{gawk}„ÄÇ

@item @option{-f}, @option{--file}, @option{--file=}, @option{-Wfile=}
‰ΩøÁî® @code{@@include} ËØ≠Âè•Êää@value{FN}ÈôÑÂä†Âà∞ Shell ÂèòÈáèÁ®ãÂ∫è @code{program}„ÄÇ@command{expr} Â∑•ÂÖ∑Áî®‰∫éÁßªÈô§ÂèÇÊï∞ÂâçÈù¢ÁöÑÁöÑÈÄâÈ°πÈÉ®ÂàÜÔºàÊØîÂ¶Ç @samp{--file=}Ôºâ„ÄÇÔºàÂÖ∏ÂûãÁöÑ @command{sh} Áî®Ê≥ïÂ∫îËØ•ÊòØ‰ΩøÁî® @command{echo} ‰ª•Âèä @command{sed} Â∑•ÂÖ∑Êù•ÂÅöËøôÊ†∑ÁöÑ‰∫ãÊÉÖ„ÄÇÂæà‰∏çÂπ∏ÁöÑÊòØÔºåÊúâ‰∏Ä‰∫õÁâàÊú¨ÁöÑ @command{echo} ‰ºöÂØπÂÆÉÁöÑÂèÇÊï∞ÂàóË°®‰∏≠ÁöÑËΩ¨‰πâÂ∫èÂàóËøõË°åÊ±ÇÂÄºÔºåÊúâÂèØËÉΩ‰ºöÂºÑ‰π±Á®ãÂ∫èÊñáÊú¨„ÄÇ‰ΩøÁî® @command{expr} ÂèØ‰ª•ÈÅøÂÖçËøô‰∏™ÈóÆÈ¢ò„ÄÇÔºâ

@item @option{--source}, @option{--source=}, @option{-Wsource=}
Ê∫ê‰ª£Á†ÅË¢´ÈôÑÂä†Âà∞Á®ãÂ∫è @code{program} ‰∏≠„ÄÇ

@item @option{--version}, @option{-Wversion}
@command{igawk} ÊâìÂç∞ÂÆÉÁöÑÁâàÊú¨Âè∑ÔºåËøêË°å @samp{gawk --version} Êù•ÂèñÂæó @command{gawk} ÁöÑÁâàÊú¨‰ø°ÊÅØÔºåÁÑ∂ÂêéÈÄÄÂá∫„ÄÇ
@end table

Â¶ÇÊûú @option{-f}Ôºå@option{--file}Ôºå@option{-Wfile}Ôºå@option{--source} ÊàñËÄÖ @option{-Wsource} ÂèÇÊï∞‰∏Ä‰∏™ÈÉΩÊ≤°ÊúâÊèê‰æõÔºåÂàôÁ¨¨‰∏Ä‰∏™ÈùûÈÄâÈ°πÂèÇÊï∞‰ºöÁî®‰Ωú @command{awk} ÁöÑÁ®ãÂ∫è„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂÖ∂‰ªñÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞Ôºå@command{igawk} ÊâìÂç∞‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÂêéÈÄÄÂá∫„ÄÇÂê¶ÂàôÔºåÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰ºöË¢´ÈôÑÂä†Âà∞Á®ãÂ∫è @code{program}„ÄÇÂú®‰ªª‰ΩïÊÉÖÂÜµ‰∏ãÔºåÂú®ÂèÇÊï∞Ë¢´Â§ÑÁêÜÂêéÔºåShell ÂèòÈáèÁ®ãÂ∫èÂåÖÂê´ÊúÄÂàù @command{awk} Á®ãÂ∫èÁöÑÂÆåÂÖ®ÁöÑÊñáÊú¨„ÄÇ

Á®ãÂ∫èÂ¶Ç‰∏ãÔºö

@cindex @code{igawk.sh} program
@example
@c file eg/prog/igawk.sh
#! /bin/sh
# igawk --- like gawk but do @@include processing
@c endfile
@ignore
@c file eg/prog/igawk.sh
#
# Arnold Robbins, arnold@@skeeve.com, Public Domain
# July 1993
# December 2010, minor edits
@c endfile
@end ignore
@c file eg/prog/igawk.sh

if [ "$1" = debug ]
then
    set -x
    shift
fi

# A literal newline, so that program text is formatted correctly
n='
'

# Initialize variables to empty
program=
opts=

while [ $# -ne 0 ] # loop over arguments
do
    case $1 in
    --)     shift
            break ;;

    -W)     shift
            # The $@{x?'message here'@} construct prints a
            # diagnostic if $x is the null string
            set -- -W"$@{@@?'missing operand'@}"
            continue ;;

    -[vF])  opts="$opts $1 '$@{2?'missing operand'@}'"
            shift ;;

    -[vF]*) opts="$opts '$1'" ;;

    -f)     program="$program$n@@include $@{2?'missing operand'@}"
            shift ;;

    -f*)    f=$(expr "$1" : '-f\(.*\)')
            program="$program$n@@include $f" ;;

    -[W-]file=*)
            f=$(expr "$1" : '-.file=\(.*\)')
            program="$program$n@@include $f" ;;

    -[W-]file)
            program="$program$n@@include $@{2?'missing operand'@}"
            shift ;;

    -[W-]source=*)
            t=$(expr "$1" : '-.source=\(.*\)')
            program="$program$n$t" ;;

    -[W-]source)
            program="$program$n$@{2?'missing operand'@}"
            shift ;;

    -[W-]version)
            echo igawk: version 3.0 1>&2
            gawk --version
            exit 0 ;;

    -[W-]*) opts="$opts '$1'" ;;

    *)      break ;;
    esac
    shift
done

if [ -z "$program" ]
then
     program=$@{1?'missing program'@}
     shift
fi

# At this point, `program' has the program.
@c endfile
@end example

Â§ÑÁêÜ @code{@@include} Êåá‰ª§ÁöÑ @command{awk} Á®ãÂ∫èË¢´Â≠òÂÇ®Âú® Shell ÁöÑÂèòÈáè @code{expand_prog} ‰∏≠„ÄÇËøô‰πàÂÅöÂèØ‰ª•‰ΩøÂæó Shell ËÑöÊú¨Êõ¥ÂèØËØª„ÄÇ@command{awk} Á®ãÂ∫è‰ΩøÁî® @code{getline} ÔºàÊü•Áúã @pxref{Getline}ÔºâËØªÂèñÁî®Êà∑ÁöÑÁ®ãÂ∫èÔºå‰∏ÄÊ¨°‰∏ÄË°å„ÄÇËæìÂÖ•Êñá‰ª∂Âêç‰ª•Âèä @code{@@include} ËØ≠Âè•‰ΩøÁî®Ê†àÊù•ÁÆ°ÁêÜ„ÄÇ
ÊØèÈÅáÂà∞‰∏Ä‰∏™ @code{@@include}ÔºåÂΩìÂâçÁöÑÊñá‰ª∂Âêç‰ºöË¢´Êé®Âà∞Ê†à‰∏≠ÔºåÂú® @code{@@include} ‰∏≠ÁöÑ@value{FN}ÂàôÊàê‰∏∫ÂΩìÂâç@value{FN}„ÄÇÊØèÂÆåÊàê‰∏Ä‰∏™Êñá‰ª∂ÔºåÂàô‰ºöÂØπÊ†àËøõË°åÂºπÂá∫ÔºåËøôÊ†∑Ââç‰∏Ä‰∏™Êñá‰ª∂‰ºöÊàê‰∏∫ÂΩìÂâçÊñá‰ª∂„ÄÇÂ§ÑÁêÜÊòØ‰ª•ÊúÄÂºÄÂßãÁöÑÊñá‰ª∂‰Ωú‰∏∫Ê†à‰∏≠ÁöÑÁ¨¨‰∏Ä‰∏™Êñá‰ª∂ÂºÄÂßãÁöÑ„ÄÇ

@code{pathto()} ÂáΩÊï∞Â§ÑÁêÜÊü•ÊâæÊñá‰ª∂ÂÖ®Ë∑ØÂæÑÁöÑ‰∫ãÊÉÖ„ÄÇÂÆÉÊ®°Êãü @command{gawk} ÁöÑÊü•Êâæ @env{AWKPATH}ÔºàÊü•Áúã @pxref{AWKPATH Variable}Ôºâ ÁéØÂ¢ÉÂèòÈáèÁöÑË°å‰∏∫„ÄÇÂ¶ÇÊûúÊñá‰ª∂Âêç‰∏≠Êúâ @samp{/}ÔºåÂàô‰∏ç‰ºöËøõË°åË∑ØÂæÑÊêúÁ¥¢„ÄÇ
Á±ª‰ººÂú∞ÔºåÂ¶ÇÊûú@value{FN}ÊòØ@code{"-"}ÔºåÂàôÁõ∏Â∫îÁöÑÂ≠ó‰∏≤ÂàôÂéüÊ†∑‰∏çÂèò„ÄÇÂê¶ÂàôÔºå@value{FN}Ë¢´‰∏éË∑ØÂæÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™‰∏äËøõËøõË°åËøûÊé•ÔºåÂπ∂Â∞ùËØïÊâìÂºÄÁîüÊàêÁöÑ@value{FN}„ÄÇÂîØ‰∏ÄÁöÑÊµãËØïÊñá‰ª∂ÊòØÂê¶ÂèØÂú® @command{awk} ‰∏≠ËøõË°åËØªÂèñÁöÑÊñπÂºèÊòØÁªßÁª≠ÈÄöËøá @code{getline} Êù•Â∞ùËØïËØªÂèñÔºåËøôÊ≠£ÊòØ @code{pathto()} ÊâÄÂÅöÁöÑ„ÄÇ
@footnote{Âú®‰∏Ä‰∫õÈùûÂ∏∏ËÄÅÁöÑ @command{awk} ÁâàÊú¨‰∏≠ÔºåÂ¶ÇÊûúÊñá‰ª∂Â≠òÂú®‰ΩÜ‰∏∫Á©∫Ôºå@samp{getline junk < t} ËøôÊ†∑ÁöÑÊµãËØïËÉΩÂ§üÊ∞∏ËøúÂæ™ÁéØ„ÄÇ}
Â¶ÇÊûúÊñá‰ª∂ÂèØËØªÔºåÂàôÂÖ≥Èó≠ÂÆÉÔºåÊääËøîÂõû@value{FN}Ôºö

@ignore
An alternative way to test for the file's existence would be to call
@samp{system("test -r " t)}, which uses the @command{test} utility to
see if the file exists and is readable.  The disadvantage to this method
is that it requires creating an extra process and can thus be slightly
slower.
@end ignore

@example
@c file eg/prog/igawk.sh
expand_prog='

function pathto(file,    i, t, junk)
@{
    if (index(file, "/") != 0)
        return file

    if (file == "-")
        return file

    for (i = 1; i <= ndirs; i++) @{
        t = (pathlist[i] "/" file)
@group
        if ((getline junk < t) > 0) @{
            # found it
            close(t)
            return t
        @}
@end group
    @}
    return ""
@}
@c endfile
@end example

‰∏ªÁ®ãÂ∫èÂåÖÂê´Âú® @code{BEGIN} ËßÑÂàô‰∏≠„ÄÇÂÆÉÊâÄÂÅöÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÊÉÖÂ∞±ÊòØËÆæÁΩÆ‰∏Ä‰∏™ @code{pathlist} Êï∞ÁªÑÁªô @code{pathto()} ‰ΩøÁî®„ÄÇÂú®‰ΩøÁî® @samp{:} ÂàÜÂâ≤Ë∑ØÂæÑ‰πãÂêéÔºåÁ©∫ÁöÑÂÖÉÁ¥†Áî® @code{"."} ËøõË°åÊõøÊç¢ÔºåÂÆÉË°®Á§∫ÁöÑÊòØÂΩìÂâçË∑ØÂæÑÔºö

@example
@c file eg/prog/igawk.sh
BEGIN @{
    path = ENVIRON["AWKPATH"]
    ndirs = split(path, pathlist, ":")
    for (i = 1; i <= ndirs; i++) @{
        if (pathlist[i] == "")
            pathlist[i] = "."
    @}
@c endfile
@end example

Ê†à‰ΩøÁî® @code{ARGV[1]} Êù•ËøõË°åÂàùÂßãÂåñÔºåÂÆÉÁöÑÂÄº‰∏∫ @code{"/dev/stdin"}„ÄÇÂêéÈù¢ÂàôÊòØ‰∏ªÂæ™ÁéØ„ÄÇËæìÂÖ•Ë°å‰ºö‰∏ÄË°åË°åËøûÁª≠„ÄÇ‰∏çËÉΩ @code{@@include} ÂºÄÂßãÁöÑË°åÂàô‰ºöÂéüÊ†∑ÊâìÂç∞„ÄÇÂ¶ÇÊûúË°åÁ°ÆÂÆûÊòØ‰ª• @code{@@include} ÂºÄÂßãÁöÑÔºåÂàô@value{FN}‰ºöÂ≠òÂÇ®Âú® @code{$2} ‰∏≠„ÄÇ
@code{pathto()} Áî®Êù•‰∫ßÁîüÂÆåÊï¥ÁöÑË∑ØÂæÑ„ÄÇÂ¶ÇÊûúÊ≤°Ê≥ï‰∫ßÁîüÔºåÁ®ãÂ∫èÂàôÊâìÂç∞‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÂêéÁªßÁª≠„ÄÇ

‰∏ã‰∏Ä‰∏™Ë¶ÅÂÅöÁöÑ‰∫ãÊÉÖÂ∞±ÊòØÊ£ÄÊü•Êñá‰ª∂ÊòØÂê¶Â∑≤ÁªèË¢´ÂåÖÂê´„ÄÇÂ∑≤ÁªèÂ§ÑÁêÜÁöÑÊï∞ÁªÑ @code{processed} Áî®Â∑≤ÁªèÂåÖÂê´ÁöÑ@value{FN}ÁöÑÂÖ®ÂêçÊù•ËøõË°åÁ¥¢ÂºïÔºåÂÆÉ‰ºö‰∏∫Êàë‰ª¨Ë∑üË∏™Áõ∏Â∫îÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÊñá‰ª∂ÂÜçÊ¨°ÁúãÂà∞Ôºå‰ºöÊâìÂç∞‰∏Ä‰∏™Ë≠¶Âëä‰ø°ÊÅØ„ÄÇÂê¶ÂàôÊñ∞ÁöÑ@value{FN}‰ºöË¢´Êé®Âà∞Ê†à‰∏≠Âπ∂ÁªßÁª≠Â§ÑÁêÜ„ÄÇ

ÊúÄÂêéÔºåÂΩì @code{getline} ÈÅáÂà∞‰∫ÜËæìÂÖ•ÁöÑÊñá‰ª∂Â∞æÔºåÊñá‰ª∂ÂàôË¢´ÂÖ≥Èó≠ÔºåÊ†àÂºπÂá∫„ÄÇÂΩì @code{stackptr} Â∞è‰∫é 0 Êó∂ÔºåÁ®ãÂ∫èÂÆåÊàêÔºö

@example
@c file eg/prog/igawk.sh
    stackptr = 0
    input[stackptr] = ARGV[1] # ARGV[1] is first file

    for (; stackptr >= 0; stackptr--) @{
        while ((getline < input[stackptr]) > 0) @{
            if (tolower($1) != "@@include") @{
                print
                continue
            @}
            fpath = pathto($2)
@group
            if (fpath == "") @{
                printf("igawk: %s:%d: cannot find %s\n",
                    input[stackptr], FNR, $2) > "/dev/stderr"
                continue
            @}
@end group
            if (! (fpath in processed)) @{
                processed[fpath] = input[stackptr]
                input[++stackptr] = fpath  # push onto stack
            @} else
                print $2, "included in", input[stackptr],
                    "already included in",
                    processed[fpath] > "/dev/stderr"
        @}
        close(input[stackptr])
    @}
@}'  # close quote ends `expand_prog' variable

processed_program=$(gawk -- "$expand_prog" /dev/stdin << EOF
$program
EOF
)
@c endfile
@end example

Shell ÁöÑ @samp{@var{command} << @var{marker}} ÁªìÊûÑÁß∞‰∏∫@dfn{Â∞±Âú∞ÊñáÊ°£}„ÄÇÂú® Shell ËÑöÊú¨‰∏≠ÁöÑÂà∞Ëøô‰∏™Ê†áÂøó @var{marker} ÁöÑÊâÄÊúâÂÜÖÂÆπÈÉΩË¢´ÂΩìÊàêÊòØ @var{command} ÁöÑËæìÂÖ•„ÄÇ Shell Â§ÑÁêÜÂ∞±Âú∞ÊñáÊ°£ÁöÑÂÜÖÂÆπÁî®‰∫éÂèòÈáè‰∏éÂëΩ‰ª§ÁöÑÊõøÊç¢Ôºà‰πüÂèØ‰ª•ÊòØÂÖ∂‰ªñÁöÑ‰∫ãÊÉÖÔºåËøôË¶ÅÁúã ShellÔºâ„ÄÇ

Shell ÁöÑ @samp{$(@dots{})} ËøôÊ†∑ÁöÑÁªìÊûÑÁß∞‰∏∫@dfn{ÂëΩ‰ª§ÊõøÊç¢}„ÄÇÂú®Êã¨Âè∑‰∏≠ÁöÑÂëΩ‰ª§ÁöÑËæìÂá∫‰ºöÊõøÊç¢ÂëΩ‰ª§Ë°å„ÄÇÂõ†‰∏∫ÁªìÊûú‰ºöÂú®ÂèòÈáèËµãÂÄº‰∏≠‰ΩøÁî®ÔºåÂÆÉ‰ºöË¢´Â≠òÊàê‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂ≠ó‰∏≤ÔºåÂ∞±ÁÆóÁªìÊûúÂåÖÂê´Á©∫Ê†º„ÄÇ

Â±ïÂºÄÁöÑÁ®ãÂ∫èË¢´‰øùÂ≠òÂú®ÂèòÈáè @code{processed_program} ‰∏≠„ÄÇÂÆÉÈÄöËøá‰∏ãÈù¢Âá†Ê≠•Êù•ÂÆåÊàêÔºö

@enumerate
@item
‰∏é‰ªéÊ†áÂáÜËæìÂÖ•ËØªÂèñÁöÑ @code{@@include} Á®ãÂ∫è‰∏ÄËµ∑ÊâßË°å @command{gawk}ÔºàÂç≥ @code{expand_prog} Shell ÂèòÈáèÁöÑÂÄºÔºâ„ÄÇ

@item
Ê†áÂáÜËæìÂÖ•ÊòØÁî®Êà∑Á®ãÂ∫èÁöÑÂÜÖÂÆπÔºåÊù•Ëá™‰∫é Shell ÂèòÈáèÁ®ãÂ∫è @code{program}„ÄÇÂ∞ÜÂÆÉÁöÑÂÜÖÂÆπÈÄöËøáÂ∞±Âú∞ÊñáÊ°£ÁöÑÊñπÂºèÁÅåÂÖ• @command{gawk} ‰∏≠„ÄÇ

@item
Â∞ÜËøô‰∏™Â§ÑÁêÜÁöÑÁªìÊûú‰ΩøÁî®ÂëΩ‰ª§ÊõøÊç¢Â≠òÂà∞ Shell ÂèòÈáè @code{processed_program} ‰∏≠„ÄÇ
@end enumerate

ÊúÄÂêé‰∏ÄÊ≠•‰ΩøÁî®Â±ïÂºÄÁöÑÁ®ãÂ∫è‰ª•ÂèäÁî®Êà∑Êèê‰æõÁöÑÊúÄÂàùÁöÑÈÄâÈ°π‰ª•ÂèäÂëΩ‰ª§Ë°åÂèÇÊï∞Ë∞ÉÁî® @command{gawk} Ôºö

@example
@c file eg/prog/igawk.sh
eval gawk $opts -- '"$processed_program"' '"$@@"'
@c endfile
@end example

@command{eval} ÂëΩ‰ª§ÊòØ‰∏Ä‰∏™ Shell ÁªìÊûúÁî®Êù•ÈáçÊñ∞ÊâßË°å Shell ÁöÑÂàÜÊûêËøáÁ®ã„ÄÇËøô‰ΩøÂæóÂÜÖÂÆπ‰ºöË¢´ÊÅ∞ÂΩìÂú∞ÂºïËµ∑Êù•„ÄÇ

@command{igawk} ÁöÑËøô‰∏™ÁâàÊú¨ÂëàÁé∞‰∫ÜËøô‰∏™Á®ãÂ∫èÁöÑÁ¨¨‰∫î‰∏™ÁâàÊú¨„ÄÇÊúâ 4 ‰∏™ÂÖ≥ÈîÆÁöÑÁÆÄÂåñ‰ΩøÂæóÁ®ãÂ∫èËøêË°åÂæóÊõ¥Â•ΩÔºö

@itemize @value{BULLET}
@item
‰ΩøÁî® @code{@@include} ‰ΩøÂæóÊúÄÂºÄÂßãÁöÑÈõÜÂêà @command{awk} Á®ãÂ∫èÊõ¥ÁÆÄÂçïÔºåÂç≥‰ΩøÊòØ‰ΩøÁî® @option{-f} ÊåáÂÆöÁöÑÊñá‰ª∂ÂêçÔºåÊâÄÊúâÁöÑ @code{@@include} Â§ÑÁêÜÈÉΩÂèØ‰ª•‰∏ÄÊ¨°ÂÆåÊàê„ÄÇ

@item
ÂΩìÊµãËØïÊñá‰ª∂ÁöÑÂèØËÆøÈóÆÊÄßÔºå‰ª•Âú®‰∏ªÁ®ãÂ∫è‰∏≠‰ΩøÁî®Êó∂Ôºå‰∏ç‰ºöÂ∞ùËØïÂ≠òÂÇ®Âú® @code{pathto()} ÂáΩÊï∞‰∏≠‰ΩøÁî® @code{getline} ËØªÂèñÁöÑË°å„ÄÇËøô‰ΩøÂæó‰∫ãÊÉÖÂæóÂà∞Áõ∏ÂΩìÁöÑÁÆÄÂåñ„ÄÇ

@item
Âú® @code{BEGIN} ËßÑÂàô‰∏≠‰ΩøÁî® @code{getline} Âú®‰∏Ä‰∏™Âú∞ÊñπÂ∞±ÂÆåÊàêÊâÄÊúâÁöÑÂ∑•‰Ωú„ÄÇÊ≤°ÊúâÂøÖË¶ÅÂÜçË∞ÉÁî®Âè¶Â§ñ‰∏Ä‰∏™Âæ™ÁéØÊù•Â§ÑÁêÜÂµåÂ•óÁöÑ @code{@@include} ËØ≠Âè•„ÄÇ

@item
‰∏çÂ∞ÜÂ±ïÂºÄÁöÑÁ®ãÂ∫èÂ≠òÂú®‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂‰∏≠ÔºåËÄåÊòØÂ∞ÜÂÆÉ‰ª¨ÊîæÂú®‰∏Ä‰∏™ Shell ÂèòÈáè‰∏≠ÂèØ‰ª•ÈÅøÂÖç‰∏Ä‰∫õÊΩúÂú®ÁöÑÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ‰ΩÜËøô‰πüÊúâÁº∫ÁÇπÔºåÂõ†‰∏∫ËÑöÊú¨Ë¶Å‰æùËµñ‰∫é @command{sh} ËØ≠Ë®ÄÁöÑÊõ¥Â§öÁâπÊÄßÔºå‰ΩøÂæóÈÇ£‰∫õ‰∏çÁÜüÊÇâ @command{sh} ÁöÑ‰∫∫ÂæàÈ™åËØÅ‰∫éË∑üË∏™„ÄÇ
@end itemize

ÂêåÊó∂ ÔºåËøô‰∏™Á®ãÂ∫è‰πüËØ¥Êòé‰∫ÜÂ∞Ü @command{sh} ‰∏é @command{awk} Á®ãÂ∫èÊ∑∑Âêà‰ΩøÁî®ÊòØÂÄºÂæó‰∏ÄËØïÁöÑ„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáËøôÊ†∑Êù•ÂÆåÊàêÂæàÂ§öÁöÑ‰∫ãÊÉÖÔºå‰∏çÁî®ÂØªÊ±ÇÊõ¥Âä†Â∫ïÂ±ÇÁöÑ C ÊàñËÄÖ C++ ËØ≠Ë®ÄÔºåÈÄöÂ∏∏Âú® Shell ‰∏≠Ë¶ÅÊØî @command{awk} ‰πüÊõ¥ÂÆπÊòìÊù•Â§ÑÁêÜÁâπÂÆöÁ±ªÂûãÁöÑÂ≠ó‰∏≤‰∏éÂèÇÊï∞Êìç‰Ωú„ÄÇ

ÊúÄÂêé @command{igawk} Â±ïÁ§∫‰∫ÜÁªôÁ®ãÂ∫èÊ∑ªÂä†Êñ∞ÁöÑÁâπÊÄßÂπ∂‰∏çÊÄªÊòØÂøÖË¶ÅÁöÑÔºåÂÆÉ‰ª¨ÂèØ‰ª•‰∏ÄÂ±ÇÂ±ÇÂè†Âä†Êù•ÂÆûÁé∞„ÄÇ 
@footnote{@command{gawk} Ëá™Â∑±Êù•Â§ÑÁêÜ @code{@@include}Ôºå‰∏∫ÁöÑÊòØÊîØÊåÅÂ∞Ü @command{awk} Á®ãÂ∫èÁî®‰Ωú WEB CGI ËÑöÊú¨„ÄÇ}


@node Anagram Program
@subsection ‰ªéÂ≠óÂÖ∏‰∏≠Êü•ÊâæÂçïËØç

@cindex anagrams, finding
‰∏Ä‰∏™ÊúâË∂£ÁöÑÁºñÁ®ãÊåëÊàòÂ∞±ÊòØÂú®‰∏Ä‰∏™ÂçïËØçÂàóË°®‰∏≠Êü•Êâæ@dfn{ÂêåÂ≠óÊØçÂºÇÂ∫èËØç}ÔºàËØçÁöÑÂ≠óÊØçÈ°∫Â∫èÂèòÊç¢ÂêéÁªÑÊàêÁöÑÊñ∞ËØçÔºåÂ¶ÇÂú®ÂæàÂ§öÁöÑ GNU/Linux Á≥ªÁªü‰∏≠ÁöÑ @file{/usr/share/dict/words}Ôºâ„ÄÇÂ¶ÇÊûú‰∏§‰∏™ÂçïËØçÂåÖÂê´Áõ∏ÂêåÁöÑÂ≠óÊØçÔºåÂàô‰∏Ä‰∏™ÂçïËØçÊòØÂè¶‰∏Ä‰∏™ÂçïËØçÁöÑÂ≠óË∞úÔºàÂ¶Ç ‚Äúbabbling‚Äù ‰∏é ‚Äúblabbing‚ÄùÔºâ„ÄÇ

Jon Bentley ÊâÄËëóÁöÑ‰π¶ @cite{Programming Pearls}ÔºåÁ¨¨‰∫åÁâàÔºåÁ¨¨‰∫åÂç∑ÁöÑÈóÆÈ¢ò CÔºåÊèêÂá∫‰∫Ü‰∏Ä‰∏™‰ºòÈõÖÁöÑÁÆóÊ≥ï„ÄÇÂÖ∂ÊÄùÊÉ≥ÊòØÁªôÂçïËØçÁöÑÂ≠óË∞ú‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÁÆÄÂçïÔºåÂπ∂ÈÄöËøáËøô‰∫õÁ≠æÂêçÊù•ÂØπÂçïËØçËøõË°åÊéíÂ∫èÔºåÁÑ∂ÂêéÊâìÂç∞ÂÆÉ‰ª¨„ÄÇBentley ÂçöÂ£´ÂèëÁé∞ÂèëÁé∞Áî®ÊØè‰∏™ÂçïËØç‰∏≠Âá∫Áé∞ÁöÑÂ≠óÊØçÔºåÂπ∂ÂØπÂÆÉ‰ª¨ÊéíÂ∫èÊù•‰Ωú‰∏∫ÂçïËØçÁöÑÁ≠æÂêç.

‰∏ãÈù¢ÁöÑÁ®ãÂ∫è‰ΩøÁî®Â§öÁª¥Êï∞ÁªÑÊù•Â∞ÜÊúâÁõ∏ÂêåÁ≠æÂêçÁöÑÂçïËØçÁªÑÁªáÂú®‰∏ÄËµ∑Ôºå‰ª•ÂèäÂØπÊï∞ÁªÑÊéíÂ∫èÊù•‰ª•ÊúâÂ∫èÁöÑÊñπÂºèÊâìÂç∞ÂçïËØçÔºö

@cindex @code{anagram.awk} program
@example
@c file eg/prog/anagram.awk
# anagram.awk --- An implementation of the anagram-finding algorithm
#                 from Jon Bentley's "Programming Pearls," 2nd edition.
#                 Addison Wesley, 2000, ISBN 0-201-65788-0.
#                 Column 2, Problem C, section 2.8, pp 18-20.
@c endfile
@ignore
@c file eg/prog/anagram.awk
#
# This program requires gawk 4.0 or newer.
# Required gawk-specific features:
#   - True multidimensional arrays
#   - split() with "" as separator splits out individual characters
#   - asort() and asorti() functions
#
# See http://savannah.gnu.org/projects/gawk.
#
# Arnold Robbins
# arnold@@skeeve.com
# Public Domain
# January, 2011
@c endfile
@end ignore
@c file eg/prog/anagram.awk

/'s$/   @{ next @}        # Skip possessives
@c endfile
@end example

Á®ãÂ∫è‰ª•‰∏Ä‰∏™Â§¥ÈÉ®ÂºÄÂßãÔºåÁÑ∂ÂêéË∑≥ËøáÂú®Â≠óÂÖ∏Êñá‰ª∂‰∏≠ÁöÑÊâÄÊúâÊ†º„ÄÇ‰∏ã‰∏Ä‰∏™ËßÑÂàôÂàôÊòØÁî®Êù•Âª∫Á´ãÊï∞ÁªÑÁªìÊûÑ„ÄÇÊï∞ÁªÑÁöÑÁ¨¨‰∏ÄÁª¥Áî±Á≠æÂêçÊù•ËøõË°åÁ¥¢ÂºïÔºåÁ¨¨‰∫åÁª¥ÂàôÊòØÂçïËØçÊú¨Ë∫´Ôºö

@example
@c file eg/prog/anagram.awk
@{
    key = word2key($1)  # Build signature
    data[key][$1] = $1  # Store word with signature
@}
@c endfile
@end example

@code{word2key()} Áî®Êù•ÂàõÂª∫Á≠æÂêçÔºåÂÆÉÂ∞ÜÂçïËØçÂàÜÊàê‰∏Ä‰∏™‰∏™ÁöÑÂ≠óÁ¨¶ÔºåÂπ∂ÂØπÂ≠óÁ¨¶ËøõË°åÊéíÂ∫èÔºåÁÑ∂ÂêéÂÜçÂ∞ÜÂÆÉÂÖ®ÂêàÂπ∂Ôºö

@example
@c file eg/prog/anagram.awk
# word2key --- split word apart into letters, sort, and join back together

function word2key(word,     a, i, n, result)
@{
    n = split(word, a, "")
    asort(a)

    for (i = 1; i <= n; i++)
        result = result a[i]

    return result
@}
@c endfile
@end example

ÊúÄÂêéÔºå@code{END} ËßÑÂàôÁî®Êù•ÈÅçÂéÜÊï∞ÁªÑÔºåÁÑ∂ÂêéÊâìÂá∫Âá∫Â≠óË∞úÂàóË°®„ÄÇÂÆÉ‰ºöÂ∞ÜËæìÂá∫Á≥ªÁªüÁöÑ @command{sort} Â∑•ÂÖ∑ÔºåÂõ†‰∏∫‰∏çËøô‰πàÂ§ÑÁêÜÔºåÂ≠óË∞úÂ∞±‰ºö‰ª•ÈöèÊú∫ÁöÑÈ°∫Â∫èÂá∫Áé∞Ôºö

@example
@c file eg/prog/anagram.awk
END @{
    sort = "sort"
    for (key in data) @{
        # Sort words with same key
        nwords = asorti(data[key], words)
        if (nwords == 1)
            continue

        # And print. Minor glitch: trailing space at end of each line
        for (j = 1; j <= nwords; j++)
            printf("%s ", words[j]) | sort
        print "" | sort
    @}
    close(sort)
@}
@c endfile
@end example

Á®ãÂ∫èËøêË°åÊó∂Ôºå‰∏ãÈù¢ÊòØÈÉ®ÂàÜËæìÂá∫Ôºö

@example
$ @kbd{gawk -f anagram.awk /usr/share/dict/words | grep '^b'}
@dots{}
babbled blabbed
babbler blabber brabble
babblers blabbers brabbles
babbling blabbing
babbly blabby
babel bable
babels beslab
babery yabber
@dots{}
@end example


@node Signature Program
@subsection Êù•‰∫õÊñ∞È≤úÁöÑ

@cindex signature program
@cindex Brini, Davide
‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÁî± Davide Brini ÁºñÂÜôÂπ∂ÂèëÂ∏ÉÂú®‰∫Ü@uref{http://backreference.org/2011/02/03/obfuscated-awk/, ‰ªñÁöÑÁΩëÁ´ô}‰∏ä„ÄÇ
@c (@email{dave_br@@gmx.com})
ÂÆÉÁî®Êù•‰Ωú‰∏∫‰ªñÂú® Usenet Â∞èÁªÑ @code{comp.lang.awk} ÁöÑÁ≠æÂêç„ÄÇÂÆÉÊèê‰æõ‰∫Ü‰∏ãÈù¢ÁöÑÁâàÊú¨Â£∞ÊòéÔºö

@quotation
Copyright @copyright{} 2008 Davide Brini

Êó†ËÆ∫ÊòØÂê¶‰øÆÊîπÈÉΩÂÖÅËÆ∏Âú®‰ªª‰Ωï‰ªãË¥®‰∏äÔºåÂ§çÂà∂ÂèëÂ∏ÉÊú¨È°µ‰∏≠ÂÖ¨ÂºÄÁöÑ‰ª£Á†ÅÔºåËÄå‰∏çÈúÄË¶ÅÊèê‰æõÊ≠£ÂºèÁöÑÁâàÊú¨Â£∞ÊòéÔºåÂè™Ë¶Å‰øùÁïôÊú¨ÊèêÁ§∫Âç≥ÂèØ„ÄÇ
@end quotation

ËøôÈáåÂÆÉÁöÑÁ®ãÂ∫èÔºö

@example
awk 'BEGIN@{O="~"~"~";o="=="=="==";o+=+o;x=O""O;while(X++<=x+o+o)c=c"%c";
printf c,(x-O)*(x-O),x*(x-o)-o,x*(x-O)+x-O-o,+x*(x-O)-x+o,X*(o*o+O)+x-O,
X*(X-x)-o*o,(x+X)*o*o+o,x*(X-x)-O-O,x-O+(O+o+X+x)*(o+O),X*X-X*(x-O)-x+O,
O+X*(o*(o+O)+O),+x+O+X*o,x*(x-o),(o+X+x)*o*o-(x-O-O),O+(X-x)*(X+O),x-O@}'
@end example

@cindex Johansen, Chris
Á®ãÂ∫èÂÅöÁöÑ‰∫ãÊÉÖÁî±‰Ω†Êù•Á°ÆÂÆö„ÄÇÔºàÂ¶ÇÊûú‰Ω†ÁúüÁöÑÂú®ÁêÜËß£ÂÆÉÊó∂ÁªùÊúõ‰∫ÜÔºåÊü•Áúã Chris Johansen ÁöÑËß£ÈáäÔºåËØ•Ëß£ÈáäÂÜÖÂµåÂú®Êú¨@value{DOCUMENT}ÁöÑ Texinfo Ê∫êÊñá‰ª∂‰∏≠„ÄÇ

@ignore
To: "Arnold Robbins" <arnold@skeeve.com>
Date: Sat, 20 Aug 2011 13:50:46 -0400
Subject: The GNU Awk User's Guide, Section 13.3.11
From: "Chris Johansen" <johansen@main.nc.us>
Message-ID: <op.v0iw6wlv7finx3@asusodin.thrudvang.lan>

Arnold, you don't know me, but we have a tenuous connection.  My wife is
Barbara A. Field, FAIA, GIT '65 (B. Arch.).

I have had a couple of paper copies of "Effective Awk Programming" for
years, and now I'm going through a Kindle version of "The GNU Awk User's
Guide" again.  When I got to section 13.3.11, I reformatted and lightly
commented Davide Brin's signature script to understand its workings.

It occurs to me that this might have pedagogical value as an example
(although imperfect) of the value of whitespace and comments, and a
starting point for that discussion.  It certainly helped _me_ understand
what's going on.  You are welcome to it, as-is or modified (subject to
Davide's constraints, of course, which I think I have met).

If I were to include it in a future edition, I would put it at some
distance from section 13.3.11, say, as a note or an appendix, so as not to
be a "spoiler" to the puzzle.

Best regards,
--
Chris Johansen {johansen at main dot nc dot us}
  . . . collapsing the probability wave function, sending ripples of
certainty through the space-time continuum.


#! /usr/bin/gawk -f

# From "13.3.11 And Now For Something Completely Different"
#   http://www.gnu.org/software/gawk/manual/html_node/Signature-Program.html#Signature-Program

# Copyright ¬© 2008 Davide Brini

# Copying and distribution of the code published in this page, with
# or without modification, are permitted in any medium without
# royalty provided the copyright notice and this notice are preserved.

BEGIN {
  O = "~" ~ "~";    #  1
  o = "==" == "=="; #  1
  o += +o;          #  2
  x = O "" O;       # 11


  while ( X++ <= x + o + o ) c = c "%c";

  # O is  1
  # o is  2
  # x is 11
  # X is 17
  # c is "%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c%c"

  printf c,
    ( x - O )*( x - O),                  # 100 d
    x*( x - o ) - o,                     #  97 a
    x*( x - O ) + x - O - o,             # 118 v
    +x*( x - O ) - x + o,                # 101 e
    X*( o*o + O ) + x - O,               #  95 _
    X*( X - x ) - o*o,                   #  98 b
    ( x + X )*o*o + o,                   # 114 r
    x*( X - x ) - O - O,                 #  64 @
    x - O + ( O + o + X + x )*( o + O ), # 103 g
    X*X - X*( x - O ) - x + O,           # 109 m
    O + X*( o*( o + O ) + O ),           # 120 x
    +x + O + X*o,                        #  46 .
    x*( x - o),                          #  99 c
    ( o + X + x )*o*o - ( x - O - O ),   # 111 0
    O + ( X - x )*( X + O ),             # 109 m
    x - O                                #  10 \n
}
@end ignore

@node Programs Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Êú¨@value{CHAPTER}‰∏≠Êèê‰æõÁöÑÁ®ãÂ∫èÔºåÂª∂Áª≠‰∫ÜËøôÊ†∑ÁöÑ‰∏ªÊó®ÔºåÂ∞±ÊòØË¶ÅÂ≠¶Â•ΩÁºñÁ®ãÁöÑÁªàÊûÅÊñπÊ≥ïÂ∞±ÊòØÂéªÈòÖËØªÁ®ãÂ∫è„ÄÇ

@item
‰ΩøÁî® @samp{#!} Êù•‰ΩøÁî® @command{awk} Á®ãÂ∫èÂèØ‰ª•Áõ¥Êé•ËøêË°åËÄåÊõ¥Â•Ω‰ΩøÁî®„ÄÇÂê¶ÂàôÂ∞±ÂæóËøô‰πàÊù•Ë∞ÉÁî®Á®ãÂ∫èÔºö@samp{awk -f @dots{}}„ÄÇ

@item
Áî® @command{awk} ÈáçÊñ∞ÂÆûÁé∞Ê†áÂáÜÁöÑ POSIX Á®ãÂ∫èÊòØ‰∏Ä‰∏™‰ª§‰∫∫ÊÑâÂø´ÁöÑÁªÉ‰π†Ôºå@command{awk} ÁöÑË°®ËææÁöÑÂ®ÅÂäõ‰Ω†‰ª•ËÆ©‰Ω†Áî®ÂæàÂ∞ëÁöÑ‰ª£Á†ÅÂ∞±Êù•ÂÜôÂá∫ËøôÊ†∑ÁöÑÁ®ãÂ∫èÔºåÂêåÊó∂ÂäüËÉΩÂÆåÂ§áÂπ∂‰∏îÂèØÁî®„ÄÇ

@item
@command{awk} ÁöÑ‰∏Ä‰∏™Âº±ÁÇπ‰πã‰∏ÄÂ∞±ÊòØÂú®Â§ÑÁêÜÂçï‰∏™Â≠óÁ¨¶ÁöÑÊó∂ÂÄô„ÄÇ‰ΩøÁî® @code{split()} ‰ª•ÂèäÁ©∫‰∏≤Êù•‰Ωú‰∏∫ÂàÜÈöîÁ¨¶Â≠ó‰∏≤ÁöÑËÉΩÂäõÂèØ‰ª•ÊûÅÂ§ßÂú∞ÁÆÄÂåñËøô‰∏™Â∑•‰Ωú„ÄÇ

@item
ËøôÈáåÁöÑ‰æãÂ≠êË°®Êòé‰∫ÜÊù•Ëá™ @ref{Library Functions} ÁöÑÂ∫ìÂáΩÊï∞ÂØπ‰∫éÂæàÂ§öÁöÑÔºàÂ∞èÔºâÁ®ãÂ∫èÁöÑÁî®Â§Ñ„ÄÇ

@item
Èô§‰∫ÜÈáçÊñ∞ÂèëÊòé POSIX ËΩÆÂ≠êÔºåÂÖ∂‰ªñÁöÑÁ®ãÂ∫èÂèØ‰ª•Ëß£ÈáäÂæàÂ§öÁöÑÊúâË∂£ÁöÑÈóÆÈ¢òÔºåÂ¶ÇÊü•ÊâæÊñáÊú¨‰∏≠ÁöÑÈáçÂ§çÂçïËØçÔºåÊâìÂç∞ÈÇÆ‰ª∂Ê†áÁ≠æÔºåÊàñËÄÖÊü•ÊâæÂ≠óË∞úÁ≠â„ÄÇ

@end itemize

@c EXCLUDE START
@node Programs Exercises
@section ÁªÉ‰π†

@enumerate
@item
‰ΩøÁî® @code{""} ‰Ωú‰∏∫ÂàÜÈöîÁ¨¶Êù•Ë∞ÉÁî® @code{split()} Êù•ÈáçÂÜô @file{cut.awk}ÔºàÊü•Áúã @pxref{Cut Program}Ôºâ„ÄÇ

@item
Âú® @ref{Egrep Program}Ôºå‰∏≠Êàë‰ª¨ÊèêÂà∞Ëøá @samp{egrep -i} ÂèØ‰ª•‰ΩøÁî® @code{tolower()} Áî®‰∫éË°å‰∏éÊ®°ÂºèÊù•Ê®°Êãü @command{awk} ‰∏≠Ê≤°Êúâ @code{IGNORECASE} ÁâàÊú¨ÁöÑÊÉÖÂÜµ„ÄÇÂú®ÈÇ£‰∏™ÈáåÁöÑ‰∏Ä‰∏™ËÑöÊ≥®‰∏≠ÔºåÊàë‰ª¨‰πüÊèêÂà∞Ëøô‰∏™Ëß£ÂÜ≥ÊñπÊ°àÊúâ‰∏Ä‰∏™ BugÔºöË¢´ËΩ¨Êç¢ÁöÑË°åËæìÂá∫ÂêéÔºå‰∏çÊòØÂéüÊù•ÁöÑÈÇ£Ë°å„ÄÇËØ∑‰øÆÂ§çËøô‰∏™ÈóÆÈ¢ò„ÄÇ
@c Exercise: Fix this, w/array and new line as key to original line

@item
POSIX ÁâàÊú¨ÁöÑ @command{id} ÈÄöËøáÈÄâÈ°πÊù•ÊéßÂà∂Ë¶ÅÊâìÂç∞‰ªÄ‰πàÊ†∑ÁöÑ‰ø°ÊÅØ„ÄÇ‰øÆÊîπ @command{awk} ÁâàÊú¨ÔºàÊü•Áúã @pxref{Id Program}ÔºâÊù•Êé•Êî∂Áõ∏ÂêåÁöÑÂèÇÊï∞Âπ∂ÊâßË°åÁõ∏ÂêåÁöÑÁªìÊûú„ÄÇ

@item
@code{split.awk} Á®ãÂ∫èÔºàÊü•Áúã @pxref{Split Program}ÔºâÂÅáËÆæÂ≠óÊØçÂú®Â≠óÁ¨¶ÈõÜÊòØËøûÁª≠ÁöÑÔºå‰ΩÜÊòØÂØπ‰∫é EBCDIC ÁöÑÁ≥ªÁªü‰∏äÂç¥‰∏çÊòØËøôÊ†∑ÁöÑ„ÄÇËØ∑‰øÆÂ§çËøô‰∏™ÈóÆÈ¢ò„ÄÇÔºàÊèêÁ§∫ÔºöËÄÉËôë‰∏ÄÁßç‰∏çÂêåÁöÑÊñπÊ≥ïÊù•ÈÅçÂéÜÂ≠óÊØçË°®ÔºåËÄå‰∏çÊòØ‰ΩøÁî® @code{ord()} ‰∏é @code{chr()} ÂáΩÊï∞„ÄÇÔºâ

@item
Âú® @file{uniq.awk} ‰∏≠ÔºàÊü•Áúã @pxref{Uniq Program}ÔºâÔºåÈÄâÊã©Âì™‰∏Ä‰∫õÊù•ÊâìÂç∞ÁöÑÈÄªËæëË°®Âºè‰∏ÄÁßç@dfn{Áä∂ÊÄÅÊú∫}ÔºåÂç≥‚ÄúÊüê‰∏™ËÆæÂ§áÂèØ‰ª•Â§Ñ‰∫éÊüê‰∫õÁ®≥ÂÆöÁöÑÁä∂ÊÄÅ‰æùËµñ‰∫éÂÖ∂ÂâçÈù¢ÁöÑÁä∂ÊÄÅ‰ª•ÂèäÂÆÉËæìÂÖ•ÁöÑÂΩìÂâçÂÄº‚Äù„ÄÇ
@footnote{Ëøô‰∏™ÊòØÁî±ËæìÂÖ• @code{define: state machine} Âà∞ Google ËøîÂõûÁöÑÂÆö‰πâ„ÄÇ}
Brian Kernighan ÂàôÂª∫ËÆÆ‚ÄúÁä∂ÊÄÅÊú∫ÁöÑÂè¶‰∏ÄÁßçÊñπÂºèÊòØÂè™Â∞ÜËæìÂÖ•ËØªÂà∞Êï∞ÁªÑ‰∏≠ÔºåÁÑ∂ÂêéÁõ¥Êé•‰ΩøÁî®Á¥¢Âºï„ÄÇËøôÂá†‰πéÊÄªÊòØËÉΩÂ§ü‰ΩøÁî®Êõ¥ÁÆÄÂçïÁöÑ‰ª£Á†ÅÊù•ÂÆûÁé∞ÔºåÂú®‰Ω†‰ΩøÁî®Ëøô‰∏™ÊñπÂºèÁöÑÂ§ßÂ§öÊï∞ËæìÂÖ•‰∏≠ÔºåÊòØÈùûÂ∏∏Âø´ÁöÑ„ÄÇ‚ÄùËØ∑Ê†πÊçÆËøôÊ†∑ÁöÑÂª∫ËÆÆÊù•ÈáçÂÜô‰∏äÈù¢ÁöÑÈÄªËæë„ÄÇ


@item
‰∏∫‰ªÄ‰πà @file{wc.awk}ÔºàÊü•Áúã @pxref{Wc Program}ÔºâÁ®ãÂ∫è‰∏çÂèØ‰ª•Âú® @code{endfile()} ‰∏≠‰ΩøÁî® @code{FNR} ÁöÑÂÄºÔºüÊèêÁ§∫ÔºöÊ£ÄÊü• @ref{Filetrans Function}Ôºå‰∏≠ÁöÑ‰ª£Á†Å„ÄÇ

@ignore
@command{wc} can't just use the value of @code{FNR} in
@code{endfile()}. If you examine the code in @ref{Filetrans Function},
you will see that @code{FNR} has already been reset by the time
@code{endfile()} is called.
@end ignore

@item
Âú®ËΩ¨Êç¢Á®ãÂ∫è @command{translate}ÔºàÊü•Áúã @pxref{Translate Program}Ôºâ‰∏≠‰ΩøÁî®Ê†áÂáÜ @command{awk} ÂáΩÊï∞Êìç‰ΩúÂçï‰∏™ÁöÑÂ≠óÁ¨¶ÊòØÂæàÁóõËã¶ÁöÑ„ÄÇÂÅáËÆæ @command{gawk} ÂèØ‰ª•Áî® @code{""} ‰ΩúÂàÜÈöîÁ¨¶Êù•Â∞ÜÂ≠ó‰∏≤ÂàÜÂâ≤‰∏∫ÂçïÁã¨ÁöÑÂ≠óÁ¨¶Ôºå‰Ω†‰ºöÂ¶Ç‰Ωï‰ΩøÁî®Ëøô‰∏™ÁâπÂÆöÊù•ÁÆÄÂåñÁ®ãÂ∫èÔºü

@item
@file{extract.awk} Á®ãÂ∫èÔºàÊü•Áúã @pxref{Extract Program}ÔºâÊòØÂú® @command{gawk} Êúâ @code{gensub()} ÂáΩÊï∞‰πãÂâçÂÜôÁöÑ„ÄÇ‰ΩøÁî®ÂÆÉÊù•ÁÆÄÂåñ‰ª£Á†Å„ÄÇ

@item
Áî®Êõ¥Áõ¥Êé•ÁöÑÊñπÂºèÊù•ÊØîËæÉ @file{awksed.awk} Á®ãÂ∫èÔºàÊü•Áúã @pxref{Simple Sed}ÔºâÁöÑÊÄßËÉΩÔºö

@example
BEGIN @{
    pat = ARGV[1]
    repl = ARGV[2]
    ARGV[1] = ARGV[2] = ""
@}

@{ gsub(pat, repl); print @}
@end example

@item
‰∏éÁúüÊ≠£ÁöÑ @command{sed} Â∑•ÂÖ∑ÊØîËµ∑Êù•Ôºå@file{awksed.awk} Êúâ‰ªÄ‰πàÊ†∑ÁöÑ‰ºòÁº∫ÁÇπÔºü

@ignore
  Advantage: egrep regexps
             speed (?)
  Disadvantage: no & in replacement text

Others?
@end ignore

@item
Âú® @ref{Igawk Program} ‰∏≠Êàë‰ª¨ÊèêÂà∞ÔºåÂΩìÂú®ÊµãËØïÊñá‰ª∂ÁöÑÂèØËÆøÈóÆÊÄßÊó∂Ôºå‰∏çË¶ÅÂ∞ùËØïÂú® @code{pathto()} ÂáΩÊï∞‰∏≠Â∞Ü @code{getline} ËØªÂèñÁöÑË°åËøõË°å‰øùÂ≠òÔºåÂèØ‰ª•‰∏é‰∏ªÁ®ãÂ∫èÁöÑ‰∏ÄËµ∑‰ΩøÁî®Êó∂ÔºåÊûÅÂ§ßÂú∞ÁÆÄÂåñÂÆûÁé∞„ÄÇÈÇ£‰πàËøôÈáåÈù¢Âà∞Â∫ïÊúâ‰ªÄ‰πàÈóÆÈ¢òÔºü
@c answer, reading from "-" or /dev/stdin

@cindex search paths
@cindex search paths, for source files
@cindex source files@comma{} search path for
@cindex files, source@comma{} search path for
@cindex directories, searching
@item
‰Ωú‰∏∫Âπ∂‰∏çÊÄªÊòØÈúÄË¶ÅÁªôÁ®ãÂ∫èÂä†Êñ∞ÂäüËÉΩÁöÑÊÉ≥Ê≥ïÁöÑ‰∏Ä‰∏™È¢ùÂ§ñÁöÑ‰æãÂ≠êÂ∞±ÊòØÔºåÂÅáËÆæÊúâ‰∏§‰∏™Êñá‰ª∂Âú®ÊêúÁ¥¢Ë∑ØÂæÑ‰∏ãÁöÑÊÉ≥Ê≥ïÔºö

@table @file
@item default.awk
Ëøô‰∏™Êñá‰ª∂ÂåÖÂê´ÈªòËÆ§ÂáΩÊï∞ÈõÜÔºåÂ¶Ç @code{getopt()} ‰∏é @code{assert()}„ÄÇ

@item site.awk
Ëøô‰∏™Êñá‰ª∂ÂåÖÂê´ÁöÑÂ∫ìÂáΩÊï∞ÁâπÂÆö‰∫éÊüê‰∏™ÁÇπÊàñËÄÖÂÆâË£ÖÁâàÊú¨ÔºåÂ¶ÇÊú¨Âú∞ÁöÑÂºÄÂèëÂáΩÊï∞„ÄÇÁî®ËøôÊ†∑ÁöÑ‰∏Ä‰∏™Áã¨Á´ãÊñá‰ª∂ÂèØ‰ª•‰Ωø @file{default.awk} Ë∑üÈöè @command{gawk} ÁâàÊú¨‰∏ÄÂêåÊõ¥Êñ∞ÔºåËÄå‰∏çÈúÄË¶ÅÁ≥ªÁªüÁöÑÁÆ°ÁêÜÂëòÊ∑ªÂä†‰∏Ä‰∏™Êú¨Âú∞ÂáΩÊï∞ÁöÑÊó∂ÂÄôÊÄªÊòØË¶ÅÊõ¥Êñ∞ÂÆÉ„ÄÇ
@end table

Êüê‰∏™Áî®Êà∑
@c Karl Berry, karl@ileaf.com, 10/95
ÊõæÁªèÂª∫ËÆÆ @command{gawk} Ë¶Å‰øÆÊîπÊàêËá™Âä®Âú∞Âú®ÂêØÂä®Êó∂ËØªÂèñËøô‰∫õÊñá‰ª∂„ÄÇ‰ΩÜÊòØ‰øÆÊîπ @command{igawk} Êù•ÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩ‰ºöÊõ¥Âä†ÁÆÄÂçï„ÄÇÂõ†‰∏∫ @command{igawk} ÂèØ‰ª•Â§ÑÁêÜÂµåÂ•óÁöÑ @code{@@include} ÊåáÁ§∫Á¨¶Ôºå@file{default.awk} ÂèØ‰ª•Âè™ÊòØÁÆÄÂçïÂú∞ÂåÖÂê´ @code{@@include} ËØ≠Âè•Êù•ÂºïÂÖ•ÊâÄÈúÄË¶ÅÁöÑÂ∫ìÂáΩÊï∞„ÄÇËØ∑‰Ω†ÂÅöËøô‰∫õ‰øÆÊîπ„ÄÇ

@item
‰øÆÊîπ @file{anagram.awk}ÔºàÊü•Áúã @pxref{Anagram Program}ÔºâÊù•ÈÅøÂÖç‰ΩøÁî®Â§ñÈÉ®ÁöÑ @command{sort} Â∑•ÂÖ∑„ÄÇ

@end enumerate
@c EXCLUDE END

@ifnotinfo
@part @value{PART3} Áî® @command{gawk} Ë∂ÖË∂äÊ†áÂáÜ @command{awk}
@end ifnotinfo

@ifdocbook
Part III focuses on features specific to @command{gawk}.
It contains the following chapters:

@itemize @value{BULLET}
@item
@ref{Advanced Features}

@item
@ref{Internationalization}

@item
@ref{Debugger}

@item
@ref{Arbitrary Precision Arithmetic}

@item
@ref{Dynamic Extensions}
@end itemize
@end ifdocbook

@node Advanced Features
@chapter @command{gawk} ÁöÑÈ´òÁ∫ßÁâπÊÄß
@cindex @command{gawk}, features, advanced
@cindex advanced features, @command{gawk}
@ignore
Contributed by: Peter Langston <pud!psl@bellcore.bellcore.com>

    Found in Steve English's "signature" line:

"Write documentation as if whoever reads it is a violent psychopath
who knows where you live."
@end ignore
@cindex Langston, Peter
@cindex English, Steve
@quotation
@i{
ÂÜôÊñáÊ°£Â∞±Ë¶ÅÂÉèÊääËØªÂÆÉÁöÑ‰∫∫ÂΩìÊàêÁü•ÈÅì‰Ω†‰ΩèÂú®Âì™ÁöÑÁãÇÊö¥ÁöÑÁ≤æÁ•ûÂèòÊÄÅËÄÖ„ÄÇ
}
@author Steve English, as quoted by Peter Langston
@end quotation

Ëøô‰∏Ä@value{CHAPTER}ËÆ®ËÆ∫ @command{gawk} ‰∏≠ÁöÑÈ´òÁ∫ßÁâπÊÄß„ÄÇ‰ªñ‰ª¨Âè™ÊòØ‰∫í‰∏çÁõ∏ÂÖ≥ÁöÑÁ®ãÂ∫èÂ§ßÈ∫ªË¢ã‰∏≠ÁöÑ‰∏ÄÂ∞èÁÇπ„ÄÇÈ¶ñÂÖàÔºåÊàë‰ª¨‰ºöÁúã‰∏Ä‰∏ã‰Ωø @command{gawk} ‰∏çËØÜÂà´ËæìÂÖ•Êï∞ÊçÆÔºåËÄå‰∏ç‰ªÖ‰ªÖÊòØÂú® @command{awk} Á®ãÂ∫è‰∏≠ÁöÑÂçÅËøõÂà∂ÁÇπÁöÑÈÄâÈ°π„ÄÇÁÑ∂ÂêéÔºåÂÜçËÆ®ËÆ∫ @command{gawk} ÊâÄÁâπÊúâÁöÑÂØπÊï∞ÁªÑËøõË°åÊéíÂ∫èÁöÑÁâπÊÄß„ÄÇÊé•‰∏ãÊù•ÊòØÂèåË∑Ø I/O ÈóÆÈ¢òÔºåÂú®Ëøô‰πãÂâçÊúâËøáÁÆÄÂçïÁöÑËÆ®ËÆ∫ÔºåËøôÈáåÂ∞Ü‰∏é TCP/IP ÁΩëÁªú‰∏ÄËµ∑ËøõË°åËØ¶ÁªÜÁöÑËÆ®ËÆ∫„ÄÇÊúÄÂêéÔºåÊàë‰ª¨Áúã‰∏Ä‰∏ã @command{gawk} Â¶Ç‰ΩïÊù•ËøõË°å@dfn{ËØÑÊµã} @command{awk} Á®ãÂ∫èÔºåËøôÊ†∑ÂèØ‰ª•Êù•ÂØπÂÆÉËøõË°åÊÄßËÉΩ‰∏äÁöÑË∞É‰ºò„ÄÇ

@c FULLXREF ON
ÂÖ∂‰ªñÁöÑÈ´òÁ∫ßÁâπÊÄßÂàôÂú®ÂÖ∂‰ªñÁöÑ@value{CHAPTER}‰∏≠ËøõË°åËÆ®ËÆ∫Ôºö

@itemize @value{BULLET}
@item
@ref{Internationalization}ÔºåËÆ®ËÆ∫Â¶Ç‰ΩïÊù•ÂØπ‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èËøõË°åÂõΩÈôÖÂåñÔºåËøôÊ†∑ÂÆÉ‰ª¨ÂèØ‰ª•ËØ¥Â§öÂõΩËØ≠Ë®Ä„ÄÇ

@item
@ref{Debugger}ÔºåÊèèËø∞‰∫Ü @command{gawk} ÁöÑÂÜÖÁΩÆÁöÑÂëΩ‰ª§Ë°åË∞ÉËØïÂô®Êù•ËøõË°å @command{gawk} Á®ãÂ∫èÁöÑË∞ÉËØï„ÄÇ

@item
@ref{Arbitrary Precision Arithmetic}ÔºåÂ±ïÁ§∫‰∫Ü‰Ω†Â¶Ç‰ΩïÊù•‰ΩøÁî® @command{gawk} Êù•ËøõË°å‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÁÆóÊúØËøêÁÆó„ÄÇ

@item
@ref{Dynamic Extensions}ÔºåËÆ®ËÆ∫Âä®ÊÄÅÂú∞Áªô @command{gawk} Ê∑ªÂä†Êñ∞ÁöÑÂÜÖÁΩÆÂáΩÊï∞ÁöÑËÉΩÂäõ„ÄÇ
@end itemize
@c FULLXREF OFF

@menu
* Nondecimal Data::             Allowing nondecimal input data.
* Array Sorting::               Facilities for controlling array traversal and
                                sorting arrays.
* Two-way I/O::                 Two-way communications with another process.
* TCP/IP Networking::           Using @command{gawk} for network programming.
* Profiling::                   Profiling your @command{awk} programs.
* Advanced Features Summary::   Summary of advanced features.
@end menu

@node Nondecimal Data
@section ÂÖÅËÆ∏ÈùûÂçÅËøõÂà∂Êï∞Êï∞ÊçÆËæìÂÖ•
@cindex @option{--non-decimal-data} option
@cindex advanced features, nondecimal input data
@cindex input, data@comma{} nondecimal
@cindex constants, nondecimal

Â¶ÇÊûú‰Ω†Áî® @option{--non-decimal-data} Ëøô‰∏™ÈÄâÈ°πÊù•ËøêË°å @command{gawk}Ôºå‰Ω†ÂèØ‰ª•Âú®‰Ω†ÁöÑËæìÂÖ•Êï∞ÊçÆ‰∏≠‰ΩøÁî®ÈùûÂçÅËøõÂà∂Êï∞Êï∞ÂÄºÔºö

@example
$ @kbd{echo 0123 123 0x123 |}
> @kbd{gawk --non-decimal-data '@{ printf "%d, %d, %d\n", $1, $2, $3 @}'}
@print{} 83, 123, 291
@end example

‰∏∫‰∫Ü‰Ω†Ëøô‰∏™ÁâπÊÄßÂèØ‰ª•Â∑•‰ΩúÔºå‰Ω†ÈúÄË¶ÅÂú®ÂÜôÁ®ãÂ∫èÊó∂ËÆ© @command{gawk} Â∞ÜËøô‰∫õÊï∞ÊçÆÂΩìÊàêÊòØÊï∞ÂÄºÔºö

@example
$ @kbd{echo 0123 123 0x123 | gawk '@{ print $1, $2, $3 @}'}
@print{} 0123 123 0x123
@end example

@noindent
@code{print} ËØ≠Âè•Â∞ÜÂÆÉÁöÑË°®ËææÂºèÂΩìÊàêÊòØÂ≠ó‰∏≤„ÄÇÂ∞ΩÁÆ°ÂüüÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÂèØ‰ª•Ë°®Áé∞Êàê‰∏Ä‰∏™Êï∞ÂÄºÔºå‰ΩÜÂÆÉ‰ª¨‰æùÁÑ∂ÊòØÂ≠ó‰∏≤ÔºåÊâÄ‰ª• @code{print} ‰∏ç‰ºöÂ∞ùËØïÂ∞ÜÂÆÉ‰ª¨‰ª•Êï∞ÂÄºÊù•ÁúãÂæÖ„ÄÇ‰Ω†ÈúÄË¶ÅÂêëÂüüÂä†‰∏ä‰∏Ä‰∏™ 0 Êù•Âº∫Âà∂ÂÆÉË¢´ÂΩìÊàêÊï∞ÂÄº„ÄÇÊØîÂ¶ÇÔºö

@example
$ @kbd{echo 0123 123 0x123 | gawk --non-decimal-data '}
> @kbd{@{ print $1, $2, $3}
>   @kbd{print $1 + 0, $2 + 0, $3 + 0 @}'}
@print{} 0123 123 0x123
@print{} 83 123 291
@end example

Áî±‰∫éÊúâÂçÅËøõÂà∂Êï∞‰πãÂâçÊúâÂâçÂØºÁöÑ 0 ÊòØÂæàÂ∏∏ËßÅÁöÑÔºå‰πüÁî±‰∫é‰ΩøÁî®ËøôÊ†∑ÁöÑÊñπÂºèÂèØËÉΩÂØºËá¥‰ª§‰∫∫ÊÉäËÆ∂ÁöÑÁªìÊûúÔºåÈªòËÆ§ÁöÑÊÉÖÂÜµÊòØÁ¶ÅÁî®ÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥‰ΩøÁî®Ôºå‰Ω†ÂøÖÈ°ªÊòæÂºèÂú∞Êù•ÊåáÂÆöÂÆÉ„ÄÇ

@cindex programming conventions, @code{--non-decimal-data} option
@cindex @option{--non-decimal-data} option, @code{strtonum()} function and
@cindex @code{strtonum()} function (@command{gawk}), @code{--non-decimal-data} option and
@quotation Ê≥®ÊÑè
@emph{‰∏çÊé®Ëçê‰ΩøÁî®Ëøô‰∏™ÈÄâÈ°π„ÄÇ}ÂÆÉ‰ºöÂØºËá¥ÊóßÁ®ãÂ∫èÈùûÂ∏∏Á≥üÁ≥ïÂú∞Á†¥Âùè„ÄÇÁõ∏ÂèçÔºåË¶Å‰ΩøÁî® @code{strtonum()} ÂáΩÊï∞Êù•ËΩ¨Êç¢‰Ω†ÁöÑÊï∞ÊçÆÔºàÊü•Áúã @ref{String Functions}Ôºâ„ÄÇËøô‰πü‰ΩøÂæó‰Ω†ÁöÑÁ®ãÂ∫èÊõ¥ÂÆπÊòìÂÜôÔºå‰πüÊõ¥ÂÆπÊòìËØªÔºåÁªìÊûú‰πü‰∏çÈÇ£‰πà‰ª§‰∫∫ÊÉäËÆ∂„ÄÇ

Ëøô‰∏™ÈÄâÈ°πÂèØËÉΩÂú® @command{gawk} ÁöÑÂêéÁª≠ÁâàÊú¨‰∏≠Ê∂àÂ§±„ÄÇ
@end quotation

@node Array Sorting
@section ÊéßÂà∂Êï∞ÁªÑÊéíÂ∫è‰∏éÈÅçÂéÜ

@command{gawk} ÂèØ‰ª•ËÆ©‰Ω†Âú® @samp{for (@var{indx} in @var{array})} ÁöÑÂæ™ÁéØËø≠‰ª£Êï∞ÁªÑÊó∂ÊéßÂà∂ÂÖ∂È°∫Â∫è„ÄÇ

Âè¶Â§ñÔºåÊúâ‰∏§‰∏™ÂÜÖÁΩÆÁöÑÂáΩÊï∞Ôºå@code{asort()} ‰∏é @code{asorti()} ËÆ©‰Ω†Áî®Âü∫‰∫éÊï∞ÁªÑÁöÑÂÄº‰∏éÁ¥¢ÂºïÊù•ÂØπÊï∞ÁªÑËøõË°åÊéíÂ∫è„ÄÇËøòÊúâ‰∏§‰∏™ÂáΩÊï∞Áî®Êù•Âú®ÊéíÂ∫èËøáÁ®ã‰∏≠ÊéßÂà∂ÂÖÉÁ¥†ÁöÑÈ°∫Â∫èÁöÑÊéíÂ∫èÊñπÊ°à„ÄÇ

@menu
* Controlling Array Traversal:: How to use PROCINFO["sorted_in"].
* Array Sorting Functions::     How to use @code{asort()} and @code{asorti()}.
@end menu

@node Controlling Array Traversal
@subsection ÊéßÂà∂Êï∞ÊçÆÈÅçÂéÜ

Âú®ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂú® @samp{for (@var{indx} in @var{array})} Âæ™ÁéØ‰∏≠Êù•Êâ´ÊèèÊï∞ÁªÑÁöÑÈ°∫Â∫èÊòØÊú™ÂÆö‰πâÁöÑÔºåÂÆÉ‰∏ÄËà¨Âü∫‰∫é @command{awk} ‰∏≠ÂØπ‰∫éÊï∞ÁªÑÁöÑÂÆûÁé∞„ÄÇ

ÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂÅö‰∏∫Á®ãÂ∫èÂëòÁöÑ‰Ω†ÊòØÊÉ≥Êù•‰ª•ÊüêÁßçÁâπÂÆöÁöÑÈ°∫Â∫èÊù•Âæ™ÁéØÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†ÁöÑ„ÄÇ@command{gawk} ÂèØ‰ª•ËÆ©‰Ω†ÂÅöÂà∞Ëøô‰∏™„ÄÇ

@ref{Controlling Scanning} ‰∏≠ÊèèËø∞‰∫Ü‰Ω†ÂèØ‰ª•ËµãÂÄºÁªôÊüê‰∏™ÁâπÂÆöÈ¢ÑÂÆö‰πâÁöÑÂèòÈáè @code{PROCINFO["sorted_in"]} ‰ª•Êù•ÊéßÂà∂ @command{gawk} Âú® @code{for} Âæ™ÁéØÊï∞ÁªÑÊó∂ÁöÑÈ°∫Â∫è„ÄÇ

Âè¶Â§ñÔºå@code{PROCINFO["sorted_in"]} ÁöÑÂÄºÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÂáΩÊï∞Âêç„ÄÇ 
@footnote{ËøôÂ∞±ÊòØ‰∏∫‰ªÄ‰πàÈ¢ÑÂÆö‰πâÁöÑÊéíÂ∫èÈ°∫Â∫èÈÉΩ‰ª• @samp{@@} Â≠óÁ¨¶ÂºÄÂ§¥ÔºåÂÆÉ‰∏çÂèØ‰ª•ÊòØÊ†áËØÜÁ¨¶ÁöÑ‰∏ÄÈÉ®‰ªΩ„ÄÇ}
ËøôËÆ©‰Ω†Áî®Ëá™Â∑±ÂÆö‰πâÁöÑÊñπÊ°àÊù•ÈÅçÂéÜÊï∞ÁªÑ„ÄÇÊï∞ÁªÑÁöÑÂÖÉÁ¥†ÁöÑÊéíÂ∫èÁî±Ëøô‰∏™ÂáΩÊï∞ÁöÑËøîÂõûÂÄºÊù•ÂÜ≥ÂÆö„ÄÇÊØîËæÉÂáΩÊï∞Â∫îËØ•ÂÆö‰πâÊàêËá≥Â∞ëÊúâÂõõ‰∏™ÂèÇÊï∞Ôºö

@example
function comp_func(i1, v1, i2, v2)
@{
    @var{compare elements 1 and 2 in some fashion}
    @var{return < 0; 0; or > 0}
@}
@end example

ËøôÈáåÈù¢ @code{i1} ‰∏é @code{i2} ÊòØÁ¥¢ÂºïÔºåËÄå @code{v1} ‰∏é @code{v2} ÊòØ‰∏§‰∏™Ê≠£Âú®ÊØîËæÉÁöÑÂÖÉÁ¥†ÁöÑÂÄº„ÄÇÂ¶ÇÊûúÊ≠£Âú®Ë¢´ÈÅçÂéÜÁöÑÊï∞ÁªÑÂåÖÂê´‰∫ÜÂ≠êÊï∞ÁªÑÂÖÉÁ¥†Ôºå@code{v1} ‰∏é @code{v2} ‰πã‰∏ÄÊàñËÄÖ‰∏§ËÄÖÈÉΩÂèØËÉΩÊòØÊï∞ÁªÑ„ÄÇÔºàÊü•Áúã @xref{Arrays of Arrays}ÔºåÊù•ÂèñÂæóÂ≠êÊï∞ÁªÑÁöÑÊõ¥Â§ö‰ø°ÊÅØÔºâ‰∏â‰∏≠ÂèØËÉΩÁöÑËøîÂõûÂÄºÂ¶Ç‰∏ãÊâÄËø∞Ôºö

@table @code
@item comp_func(i1, v1, i2, v2) < 0
Âú®Âæ™ÁéØÈÅçÂéÜÊó∂ÔºåÁ¥¢Âºï @code{i1} ‰ºöÂÖà‰∫é @code{i2}„ÄÇ

@item comp_func(i1, v1, i2, v2) == 0
Á¥¢Âºï @code{i1} ‰∏é @code{i2} ÊòØÁõ∏ÂêåÁöÑÔºå‰ΩÜÊòØÂÖ∂Áõ∏ÂØπÈ°∫Â∫èÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇ

@item comp_func(i1, v1, i2, v2) > 0
Á¥¢Âºï @code{i1} ÂêéÂú® @code{i2} ‰πãÂêé„ÄÇ
@end table

Êàë‰ª¨ÁöÑÁ¨¨‰∏Ä‰∏™ÊØîËæÉÂáΩÊï∞ÂèØ‰ª•‰ª•Á¥¢ÂºïÁöÑÊï∞ÂÄºÈ°∫Â∫èÊù•Êâ´ÊèèÊï∞ÁªÑÔºö

@example
function cmp_num_idx(i1, v1, i2, v2)
@{
     # numerical index comparison, ascending order
     return (i1 - i2)
@}
@end example

Êàë‰ª¨ÁöÑÁ¨¨‰∫å‰∏™ÂáΩÊï∞Âü∫‰∫éÂÖÉÁ¥†ÁöÑÂ≠ó‰∏≤ÂÄºÊù•ÈÅçÂéÜÊï∞ÁªÑÔºåËÄå‰∏çÊòØÂü∫‰∫éÁ¥¢ÂºïÔºö

@example
function cmp_str_val(i1, v1, i2, v2)
@{
    # string value comparison, ascending order
    v1 = v1 ""
    v2 = v2 ""
    if (v1 < v2)
        return -1
    return (v1 != v2)
@}
@end example

Á¨¨‰∏â‰∏™ÊØîËæÉÂáΩÊï∞‰ΩøÊâÄÊúâÁöÑÊï∞ÂÄºÔºåÂâçÂêéÊ≤°Á©∫Ê†ºÁöÑÊï∞Â≠óÂ≠ó‰∏≤Ôºå‰ºöÂú®Âæ™ÁéØÊó∂Âú®ÂâçÈù¢Ôºö

@example
function cmp_num_str_val(i1, v1, i2, v2,   n1, n2)
@{
     # numbers before string value comparison, ascending order
     n1 = v1 + 0
     n2 = v2 + 0
     if (n1 == v1)
         return (n2 == v2) ? (n1 - n2) : -1
     else if (n2 == v2)
         return 1
     return (v1 < v2) ? -1 : (v1 != v2)
@}
@end example

ËøôÊòØ‰∏Ä‰∏™ËØ¥Êòé @command{gawk} ‰ΩøÁî®ÂâçÈù¢‰∏çÂêåÂáΩÊï∞Êó∂ÁöÑ‰∏çÂêåË°®Áé∞Êó∂ÁöÑ‰∏ªÁ®ãÂ∫èÔºö

@example
BEGIN @{
    data["one"] = 10
    data["two"] = 20
    data[10] = "one"
    data[100] = 100
    data[20] = "two"

    f[1] = "cmp_num_idx"
    f[2] = "cmp_str_val"
    f[3] = "cmp_num_str_val"
    for (i = 1; i <= 3; i++) @{
        printf("Sort function: %s\n", f[i])
        PROCINFO["sorted_in"] = f[i]
        for (j in data)
            printf("\tdata[%s] = %s\n", j, data[j])
        print ""
    @}
@}
@end example

ËøôÊòØÁ®ãÂ∫èÊâßË°åÊó∂ÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -f compdemo.awk}
@print{} Sort function: cmp_num_idx      @ii{Sort by numeric index}
@print{}     data[two] = 20
@print{}     data[one] = 10              @ii{Both strings are numerically zero}
@print{}     data[10] = one
@print{}     data[20] = two
@print{}     data[100] = 100
@print{}
@print{} Sort function: cmp_str_val      @ii{Sort by element values as strings}
@print{}     data[one] = 10
@print{}     data[100] = 100             @ii{String 100 is less than string 20}
@print{}     data[two] = 20
@print{}     data[10] = one
@print{}     data[20] = two
@print{}
@print{} Sort function: cmp_num_str_val  @ii{Sort all numeric values before all strings}
@print{}     data[one] = 10
@print{}     data[two] = 20
@print{}     data[100] = 100
@print{}     data[10] = one
@print{}     data[20] = two
@end example

ËÄÉËôëÂØπ GNU/Linux Á≥ªÁªüÁöÑÂØÜÁ†ÅÊñá‰ª∂‰∏≠ÁöÑÈ°πÊåâÁôªÂΩïÂêçÊù•ÊéíÂ∫è„ÄÇ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÂØπÁâπÂÆöÂüü‰ΩçÁΩÆÁöÑÊØîËæÉÊù•ËøõË°åËÆ∞ÂΩïÁöÑÊéíÂ∫èÂèØÁî®‰∫éËøô‰∏™ÁõÆÁöÑÔºö

@example
# passwd-sort.awk --- simple program to sort by field position
# field position is specified by the global variable POS

function cmp_field(i1, v1, i2, v2)
@{
    # comparison by value, as string, and ascending order
    return v1[POS] < v2[POS] ? -1 : (v1[POS] != v2[POS])
@}

@{
    for (i = 1; i <= NF; i++)
        a[NR][i] = $i
@}

END @{
    PROCINFO["sorted_in"] = "cmp_field"
    if (POS < 1 || POS > NF)
        POS = 1
    for (i in a) @{
        for (j = 1; j <= NF; j++)
            printf("%s%c", a[i][j], j < NF ? ":" : "")
        print ""
    @}
@}
@end example

ÂØÜÁ†ÅÊñá‰ª∂‰∏≠ÁöÑÊØè‰∏ÄÈ°πÁöÑÁ¨¨‰∏Ä‰∏™ÂüüÊòØÁî®Êà∑ÁöÑÁôªÂΩïÂêçÔºåÂüü‰πãÈó¥ÈÄöËøáÂÜíÂè∑ÂàÜÈöî„ÄÇÊØè‰∏™ËÆ∞ÂΩïÈÉΩÂÆö‰πâ‰∫Ü‰∏Ä‰∏™Â≠êÊï∞ÁªÑÔºåÊØè‰∏™ÂüüÈÉΩÊòØÂ≠êÊï∞ÁªÑ‰∏≠ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÊâßË°åÁ®ãÂ∫è‰ºö‰∫ßÁîüÂ¶Ç‰∏ãËæìÂá∫Ôºö

@example
$ @kbd{gawk -v POS=1 -F: -f sort.awk /etc/passwd}
@print{} adm:x:3:4:adm:/var/adm:/sbin/nologin
@print{} apache:x:48:48:Apache:/var/www:/sbin/nologin
@print{} avahi:x:70:70:Avahi daemon:/:/sbin/nologin
@dots{}
@end example

ÂΩìÁªôÂÆö‰∏Ä‰∏™ÁâπÂÆöÁöÑÊï∞ÁªÑÂÖÉÁ¥†ÂØπÊó∂ÔºåÊØîËæÉÂ∫îËØ•ÊÄªÊòØËøîÂõûÁõ∏ÂêåÁöÑÂÄº„ÄÇÂ¶ÇÊûúËøîÂõû‰∫Ü‰∏ç‰∏ÄËá¥ÁöÑÂÄºÔºåÂàôÈ°∫Â∫èÊòØÊú™ÂÆö‰πâÁöÑ„ÄÇËøô‰∏™Ë°å‰∏∫ÂèØ‰ª•Áî®Êù•ÁªôÁúãËµ∑Êù•ÊúâÂ∫èÁöÑÊï∞ÊçÆÂºïÂÖ•ÈöèÊú∫È°∫Â∫èÔºö

@example
function cmp_randomize(i1, v1, i2, v2)
@{
    # random order (caution: this may never terminate!)
    return (2 - 4 * rand())
@}
@end example

Â¶ÇÊó©ÂâçÊâÄÊèêÂà∞ÁöÑÔºåÂ¶ÇÊûú‰∏§‰∏™ÂÖÉÁ¥†ÊØîËæÉÁõ∏ÂêåÔºåÂàô‰∏§‰∏™ÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÁöÑÈ°∫Â∫èÊòØ‰ªªÊÑèÁöÑ„ÄÇËøô‰∏ÄËà¨ÈÉΩ‰∏çÊòØ‰ªÄ‰πàÈóÆÈ¢òÔºå‰ΩÜÊòØËÆ©‰∏§‰∏™Âú®‰∏ÄËµ∑ÁöÑÂÖÉÁ¥†‰ª•‰ªªÊÑèÁöÑÈ°∫Â∫èÂá∫Áé∞Âç¥ÊòØ‰∏™ÈóÆÈ¢òÔºåÁâπÂà´ÊòØÂ§ßÊØîËæÉ‰∏§ËÄÖÁöÑÂÄºÁöÑÊó∂ÂÄô„ÄÇÂ¶ÇÊûúÂÖ∂‰ªñÁöÑÂÖÉÁ¥†Âä†ÂÖ•ÊàñËÄÖ‰ªéÊï∞ÁªÑ‰∏≠ÁßªÈô§ÔºåÂØπÁõ∏ÂêåÂÖÉÁ¥†Èó¥ÁöÑÈÉ®ÂàÜÊéíÂ∫èÂú®‰∏ãÊ¨°Êï∞ÁªÑÈÅçÂéÜÊó∂‰ºöÊîπÂèò„ÄÇËß£ÂÜ≥Ëøô‰∏™ÁªëÂÆöÂÖÉÁ¥†ÁöÑÈóÆÈ¢òÁöÑÊñπÊ≥ï‰πã‰∏ÄÊòØÔºåÂΩìÊØîËæÉ‰∏§ÂÖÉÁ¥†ÂÄºÁõ∏ÂêåÊó∂ÔºåË¶ÅÂÜçÊØîËæÉÂÆÉ‰ª¨ÁöÑÁ¥¢Âºï„ÄÇËøô‰πàÂÅöÁöÑËØùÔºå‰ºö‰ΩøÂæóÂæ™ÁéØÈÅçÂéÜÊ≤°ÊúâÈÇ£È´òÊïàÔºåÊâÄ‰ª•ÔºåÂè™Âú®ÂøÖË¶ÅÁöÑÊó∂ÂÄôËÄÉËôë‰ΩøÁî®ÂÆÉ„ÄÇ‰∏ãÈù¢ÁöÑÊØîËæÉÂáΩÊï∞‰ºö‰∏ÄÂÆö‰ºöÊúâÁ°ÆÂÆöÁöÑÈ°∫Â∫èÔºåÊòØÂü∫‰∫é‰∏§‰∏™ÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÔºàÂ≠ó‰∏≤ÔºâËÇØÂÆö‰∏çÁõ∏ÂêåËøôÊ†∑ÁöÑ‰∫ãÂÆûÔºö

@example
function cmp_numeric(i1, v1, i2, v2)
@{
    # numerical value (and index) comparison, descending order
    return (v1 != v2) ? (v2 - v1) : (i2 - i1)
@}

function cmp_string(i1, v1, i2, v2)
@{
    # string value (and index) comparison, descending order
    v1 = v1 i1
    v2 = v2 i2
    return (v1 > v2) ? -1 : (v1 != v2)
@}
@end example

@c Avoid using the term ``stable'' when describing the unpredictable behavior
@c if two items compare equal.  Usually, the goal of a "stable algorithm"
@c is to maintain the original order of the items, which is a meaningless
@c concept for a list constructed from a hash.

‰∏Ä‰∏™ÂÆöÂà∂ÁöÑÊØîËæÉÂáΩÊï∞Â∏∏Â∏∏ÂèØ‰ª•ÁÆÄÂçïÂæ™ÁéØÈÅçÂéÜÔºåËÄåËÆæËÆ°ËøôÊ†∑ÁöÑÂáΩÊï∞ÁöÑÈôêÂà∂Âè™ÂèóÈôê‰∫éÂ§©Á©∫ÁöÑÂ§ßÂ∞è„ÄÇ

ÂΩìÂú®ËøõË°åÊéíÂ∫èÊó∂ÔºåÂ¶ÇÊûú‰ΩøÁî®ÁöÑÊòØÂ≠ó‰∏≤ÊØîËæÉÔºåÂÖÉÁ¥†ÂÄº‰πã‰∏ÄÊàñËÄÖ‰∏§ËÄÖÈÉΩ‰∏ç‰ºöÊòØÊï∞ÂÄºÔºåÊàñËÄÖÂÖÉÁ¥†ÁöÑÁ¥¢Âºï‰ºöË¢´ÂΩìÊàêÂ≠ó‰∏≤Êù•Â§ÑÁêÜÔºå@code{IGNORECASE} ÁöÑÂÄºÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÊéßÂà∂ÊØîËæÉÊòØÂê¶Â∞ÜÂØπÂ∫îÁöÑÂ§ßÂ∞èÂÜôÂ≠óÊØçÂΩìÊàê‰∏ÄÊ†∑ÁöÑÂ≠óÁ¨¶Êù•ÁúãÂæÖ„ÄÇ

ËøòË¶ÅËÆ∞‰ΩèÁöÑ‰∏ÄÁÇπÊòØÂú®Â≠êÊï∞ÁªÑÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÖÉÁ¥†ÂÄºÊú¨Ë∫´ÂèØ‰ª•ÊòØÊï∞ÁªÑÔºåÊØîËæÉÂáΩÊï∞ÁöÑÁªìÊûúÂ∫îËØ•‰ΩøÁî® @code{isarray()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{Type Functions}ÔºâÊù•Ê£ÄÊµãÔºåÂπ∂‰ΩøÁî®‰∏∫Â≠êÊï∞ÁªÑÂÆö‰πâÂ•ΩÁöÑÈ°∫Â∫è„ÄÇ

ÊâÄÊúâÂü∫‰∫é @code{PROCINFO["sorted_in"]} ÁöÑÊéíÂ∫èÂú® POSIX Ê®°Âºè‰∏ãÈÉΩË¢´Á¶ÅÁî®ÔºåÂõ†‰∏∫ @code{PROCINFO} Êï∞ÁªÑÂú®Ê≠§ÁßçÊÉÖÂÜµ‰∏ãÂπ∂Ê≤°ÊúâÁâπÊÆäÁöÑÂê´‰πâ„ÄÇ

Âè¶‰∏Ä‰∏™ÊèêÁ§∫Â∞±ÊòØÔºåÂú®ÈÅçÂéÜÊï∞ÁªÑÊó∂ÂØπÊï∞ÁªÑÁ¥¢ÂºïÁöÑÊéíÂ∫èÂ∑≤ÁªèÊúâÊä•ÂëäËØ¥‰ºöÂ¢ûÂä† @command{awk} Á®ãÂ∫èÊâßË°åÊó∂ 15 % Âà∞ 20 % ÁöÑË¥üËç∑„ÄÇÁî±‰∫éËøô‰∏™ÂéüÂõ†ÔºåÊéíÂ∫èÊï∞ÁªÑÁöÑÈÅçÂéÜ‰∏ç‰Ωú‰∏∫ÈªòËÆ§Ë°å‰∏∫„ÄÇ

@c The @command{gawk}
@c maintainers believe that only the people who wish to use a
@c feature should have to pay for it.

@node Array Sorting Functions
@subsection Áî® @command{gawk} ÂØπÊï∞ÁªÑËøõË°åÂÄº‰∏éÈîÆÁöÑÊéíÂ∫è

@cindex arrays, sorting
@cindexgawkfunc{asort}
@cindex @code{asort()} function (@command{gawk}), arrays@comma{} sorting
@cindexgawkfunc{asorti}
@cindex @code{asorti()} function (@command{gawk}), arrays@comma{} sorting
@cindex sort function, arrays, sorting
Âú®Â§ßÂ§öÊï∞ÁöÑ @command{awk} ÂÆûÁé∞‰∏≠ÔºåÂØπÊï∞ÁªÑÊéíÂ∫èÈúÄË¶ÅÂÜô‰∏Ä‰∏™ @code{sort()} ÂáΩÊï∞„ÄÇËøôÂØπ‰∫éÂ≠¶‰π†‰∏çÂêåÁöÑÊéíÂ∫èÁÆóÊ≥ï‰πüÊòØÂæàÊúâÊïôËÇ≤‰ΩúÁî®ÁöÑÔºå‰ΩÜÊòØÈÄöËøáÈÇ£‰∏çÊòØÁ®ãÂ∫èÁöÑÈáçÁÇπ„ÄÇ@command{gawk} Êèê‰æõ‰∫ÜÂÜÖÁΩÆÁöÑ @code{asort()} ‰∏é @code{asorti()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{String Functions}ÔºâÊù•ÂØπÊï∞ÁªÑÊéíÂ∫è„ÄÇÂ¶ÇÔºö

@example
@var{populate the array} data
n = asort(data)
for (i = 1; i <= n; i++)
    @var{do something with} data[i]
@end example

Âú®Ë∞ÉÁî® @code{asort()} ‰πãÂêéÔºåÊï∞ÁªÑÊï∞ÊçÆ @code{data} Â∑≤Áªè‰ªé 1 Âà∞Êüê‰∏™Êï∞ @var{n}ÔºåÂç≥ @code{data} Êï∞ÁªÑÂÖÉÁ¥†‰∏≠ÁöÑÊÄªÊï∞ÔºåËøõË°å‰∫ÜÁ¥¢Âºï„ÄÇÔºàËøô‰∏™ÁªüËÆ°‰Ωú‰∏∫ @code{asort()} ÁöÑËøîÂõûÂÄº„ÄÇÔºâ@code{data[1]} @value{LEQ} @code{data[2]} @value{LEQ} @code{data[3]} ‰æùÊ≠§Á±ªÊé®„ÄÇ
ÈªòËÆ§ÁöÑÊØîËæÉÊòØÂü∫‰∫éÂÖÉÁ¥†ÁöÑÁ±ªÂûãÔºàÊü•Áúã @pxref{Typing and Comparison}Ôºâ„ÄÇÊâÄÊúâÁöÑÊï∞ÂÄºÁ±ªÂûãÂú®Â≠ó‰∏≤Á±ªÂûã‰πãÂâçÔºåÁÑ∂ÂêéÊòØÊâÄÊúâÁöÑÂ≠êÊï∞ÁªÑ„ÄÇ

@cindex side effects, @code{asort()} function
Ë∞ÉÁî® @code{asort()} ÂáΩÊï∞ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅÁöÑÂâØ‰ΩúÁî®ÊòØ@emph{Êï∞ÁªÑÁöÑÂéüÂßãÁöÑÁ¥¢Âºï‰∏çÂèØÊÅ¢Â§çÂú∞‰∏¢Â§±‰∫Ü}„ÄÇËøôÂπ∂‰∏çÊÄªÊòØÊâÄË¶ÅÁöÑÁªìÊûú„ÄÇ@code{asort()} ÂèØ‰ª•ÊéàÂèóÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ôºö

@example
@var{populate the array} source
n = asort(source, dest)
for (i = 1; i <= n; i++)
    @var{do something with} dest[i]
@end example

Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ºöÂ§çÂà∂ @code{source} Êï∞ÁªÑÂà∞ @code{dest} Êï∞ÁªÑ‰∏≠ÔºåÁÑ∂ÂêéÂØπ @code{dest} ËøõË°åÊéíÂ∫èÔºåÂπ∂ÂØºËá¥ÂÖ∂Á¥¢ÂºïÁöÑÁ†¥Âùè„ÄÇ‰ΩÜÊòØÔºå@code{source} Êï∞ÁªÑÂàô‰∏çÂΩ±Âìç„ÄÇ

ÁªèÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÊòØÈúÄË¶ÅÂØπ@emph{Á¥¢Âºï}ÁöÑÂÄºËøõË°åÊéíÂ∫èÔºåËÄå‰∏çÊòØÂØπÂÖÉÁ¥†ÁöÑÂÄºËøõË°åÊéíÂ∫è„ÄÇ‰∏∫‰∫ÜÂÆûÁé∞Ëøô‰∏™ÂäüËÉΩÔºåÂàô‰ΩøÁî® @code{asorti()} ÂáΩÊï∞„ÄÇËøô‰∏™Êé•Âè£‰∏éÂÖ∂Ë°å‰∏∫‰∏é @code{asort()} ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂè™ÊòØ‰ΩøÁî®Á¥¢ÂºïÁöÑÂÄºÊù•ËøõË°åÊéíÂ∫èÔºåÂπ∂‰∏îÊàê‰∏∫ÁªìÊûúÊï∞ÁªÑÁöÑÂÄºÔºö

@example
@{ source[$0] = some_func($0) @}

END @{
    n = asorti(source, dest)
    for (i = 1; i <= n; i++) @{
        @ii{Work with sorted indices directly:}
        @var{do something with} dest[i]
        @dots{}
        @ii{Access original array via sorted indices:}
        @var{do something with} source[dest[i]]
    @}
@}
@end example

Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÈÉΩËøòÂ•Ω„ÄÇÁé∞Âú®ÂºÄÂßãËøõÂÖ•ÊúÄÊúâË∂£ÁöÑÈÉ®ÂàÜ„ÄÇ@code{asort()} ‰∏é @code{asorti()} ÈÉΩÊé•Êî∂Á¨¨‰∏â‰∏™Â≠ó‰∏≤ÂèÇÊï∞Êù•ÊéßÂà∂Êï∞ÁªÑÂÖÉÁ¥†ÁöÑÊØîËæÉ„ÄÇÂΩìÊàë‰ª¨Âú® @ref{String Functions}ÔºåÂºïÂÖ• @code{asort()} ‰∏é @code{asorti()} Êó∂ÔºåÊàë‰ª¨ÂøΩÁï•‰∫ÜÁ¨¨‰∏â‰∏™ÂèÇÊï∞Ôºå‰ΩÜÊòØÁé∞Âú®ÊòØÊó∂ÂÄôÊù•ÊèèËø∞Ëøô‰∏™ÂèÇÊï∞Â¶Ç‰ΩïÊù•ÂΩ±ÂìçËøô‰∏§‰∏™ÂáΩÊï∞„ÄÇ

Âü∫Êú¨‰∏äÔºåÁ¨¨‰∏â‰∏™ÂèÇÊï∞Áî®Êù•ÊåáÂÆöÊï∞ÁªÑÂ¶Ç‰ΩïÊù•ËøõË°åÊéíÂ∫è„ÄÇÊúâ‰∏§‰∏™ÂèØËÉΩ„ÄÇÂ¶Ç @code{PROCINFO["sorted_in"]} ‰∏ÄÊ†∑ÔºåËøô‰∏™ÂèÇÊï∞ÂèØ‰ª•ÊòØ @command{gawk} ÊâÄÊèê‰æõÁöÑÈ¢ÑÂÆö‰πâÂêçÂ≠ó‰∏≠ÁöÑ‰∏Ä‰∏™ÔºàÊü•Áúã @pxref{Controlling Scanning}ÔºâÔºåÊàñËÄÖ‰πüÂèØ‰ª•Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞ÁöÑÂêçÂ≠óÔºàÊü•Áúã @pxref{Controlling Array Traversal}Ôºâ„ÄÇ

Âú®ÂêéÈù¢ÁöÑÊÉÖÂÜµ‰∏ãÔºå@emph{ÊåáÂÆöÁöÑÂáΩÊï∞ÂèØ‰ª•‰ª•‰ªª‰ΩïÈÄâÊã©ÁöÑÊñπÂºèÊù•ÊØîËæÉÂÖÉÁ¥†}ÔºåÂèØ‰ª•Âè™ËÄÉËôëÁ¥¢ÂºïÔºå‰πüÂèØ‰ª•Âè™ËÄÉËôëÂÄºÔºåÊàñËÄÖ‰∏§ËÄÖÈÉΩËÄÉËôë„ÄÇËøôÂ∞±Áõ∏ÂΩìÂº∫Â§ß‰∫Ü„ÄÇ

‰∏ÄÊó¶Êï∞ÁªÑÁªèËøáÊéíÂ∫èÔºå@code{asort()} ‰ºöÂèñÂæóÊúÄÁªàÈ°∫Â∫èÁöÑÂÄºÔºåÂπ∂‰ΩøÁî®‰ªñ‰ª¨Â°´ÂÖ•Âà∞ÁªìÊûúÊï∞ÁªÑ‰∏≠ÔºåËÄå @code{asorti()} ÂèñÊúÄÁªàÈ°∫Â∫èÁöÑ@emph{Á¥¢Âºï}Âπ∂‰ΩøÁî®ÂÆÉ‰ª¨Â°´ÂÖÖÂà∞ÁªìÊûúÊï∞ÁªÑ‰∏≠„ÄÇ

@cindex reference counting, sorting arrays
@quotation ÊèêÁ§∫
Â§çÂà∂Êï∞ÁªÑÁöÑÁ¥¢Âºï‰∏éÂÖÉÁ¥†Âú®ÂÜÖÂ≠ò‰∏≠‰ª£‰ª∑Âπ∂‰∏çÈ´ò„ÄÇÂú®ÂÜÖÈÉ®Ôºå@command{gawk} ‰ºö‰øùÊåÅÊï∞ÊçÆÁöÑ@dfn{ÂèÇËÄÉËÆ°Êï∞}„ÄÇÂ¶ÇÂΩì @code{asort()} Â§çÂà∂Á¨¨‰∏Ä‰∏™ÂÖÉÁ¥†Âà∞Á¨¨‰∫å‰∏™Êó∂ÔºåÂè™‰ºöÊúâ‰∏Ä‰∏™ÂÖÉÁ¥†Êï∞ÊçÆÁöÑÂ§çÊú¨ÔºåÂ∞±ÁÆó‰∏§‰∏™Êï∞ÁªÑ‰ΩøÁî®Ëøô‰∏™ÂÄº„ÄÇ
@end quotation

@c Document It And Call It A Feature. Sigh.
@cindex @command{gawk}, @code{IGNORECASE} variable in
@cindex arrays, sorting, and @code{IGNORECASE} variable
@cindex @code{IGNORECASE} variable, and array sorting functions
Âõ†‰∏∫ @code{IGNORECASE} ÂèØ‰ª•ÂΩ±ÂìçÂ≠ó‰∏≤ÊØîËæÉÔºå@code{IGNORECASE} ÁöÑÂÄº‰πü‰ºöÂΩ±Âìç @code{asort()} ‰∏é @code{asorti()} ÁöÑÊéíÂ∫è„ÄÇ‰πüË¶ÅÊ≥®ÊÑèÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÁöÑÊéíÂ∫èÂàô@emph{‰∏ç‰ºö}ÊúâÂΩ±ÂìçÔºåÊØîËæÉÂè™Âü∫‰∫éÂ≠óÁ¨¶ÁöÑÂÄº„ÄÇ 
@footnote{Âõ†‰∏∫Âü∫‰∫éÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆÁöÑÊØîËæÉÂè™‰ºöÂá∫Áé∞Âú® POSIX ÁöÑÂÖºÂÆπÊ®°Âºè‰∏≠ÔºåÂõ†Ê≠§ËøôÁ°ÆÂÆûÊòØÁúüÁöÑÔºåÂπ∂‰∏îÁî±‰∫é @code{asort()} ‰∏é @code{asorti()} ÊòØ @command{gawk} ÁöÑÊâ©Â±ïÔºåÂú®‰∏äÈù¢ÁöÑËÆæÁΩÆ‰∏≠ÔºåÂÆÉ‰ª¨ÊòØ‰∏çÂèØÁî®ÁöÑ„ÄÇ}

‰∏ãÈù¢ÁöÑÊòØÊää @code{asort()} Áî®‰∫éÊØîËæÉÂáΩÊï∞ÁöÑ‰æãÂ≠ê„ÄÇÊØîËæÉÂáΩÊï∞ @code{case_fold_compare()} ‰∏∫‰∫ÜËÉΩÂøΩÁï•Â§ßÂ∞èÂÜôÊØîËæÉÔºåÊää‰∏§ËÄÖÁöÑÂÄºÈÉΩËΩ¨Êç¢ÊàêÂ∞èÂÜôÂ≠óÊØç„ÄÇ

@example
# case_fold_compare --- compare as strings, ignoring case

function case_fold_compare(i1, v1, i2, v2,    l, r)
@{
    l = tolower(v1)
    r = tolower(v2)

    if (l < r)
        return -1
    else if (l == r)
        return 0
    else
        return 1
@}
@end example

‰∏ãÈù¢ÊòØÂÆÉÁöÑÊµãËØïÁ®ãÂ∫èÔºö

@example
# Test program

BEGIN @{
    Letters = "abcdefghijklmnopqrstuvwxyz" \
              "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
    split(Letters, data, "")

    asort(data, result, "case_fold_compare")

    j = length(result)
    for (i = 1; i <= j; i++) @{
        printf("%s", result[i])
        if (i % (j/2) == 0)
            printf("\n")
        else
            printf(" ")
    @}
@}
@end example

ÂΩìÁ®ãÂ∫èËøêË°åÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÂæóÂà∞‰ª•‰∏ãËæìÂá∫Ôºö

@example
$ @kbd{gawk -f case_fold_compare.awk}
@print{} A a B b c C D d e E F f g G H h i I J j k K l L M m
@print{} n N O o p P Q q r R S s t T u U V v w W X x y Y z Z
@end example

@node Two-way I/O
@section ‰∏éÂÖ∂‰ªñËøõÁ®ãËøõË°åÂèåÂêëÈÄö‰ø°

@c 8/2014. Neither Mike nor BWK saw this as relevant. Commenting it out.
@ignore
@cindex Brennan, Michael
@cindex programmers, attractiveness of
@smallexample
@c Path: cssun.mathcs.emory.edu!gatech!newsxfer3.itd.umich.edu!news-peer.sprintlink.net!news-sea-19.sprintlink.net!news-in-west.sprintlink.net!news.sprintlink.net!Sprint!204.94.52.5!news.whidbey.com!brennan
From: brennan@@whidbey.com (Mike Brennan)
Newsgroups: comp.lang.awk
Subject: Re: Learn the SECRET to Attract Women Easily
Date: 4 Aug 1997 17:34:46 GMT
@c Organization: WhidbeyNet
@c Lines: 12
Message-ID: <5s53rm$eca@@news.whidbey.com>
@c References: <5s20dn$2e1@chronicle.concentric.net>
@c Reply-To: brennan@whidbey.com
@c NNTP-Posting-Host: asn202.whidbey.com
@c X-Newsreader: slrn (0.9.4.1 UNIX)
@c Xref: cssun.mathcs.emory.edu comp.lang.awk:5403

On 3 Aug 1997 13:17:43 GMT, Want More Dates???
<tracy78@@kilgrona.com> wrote:
>Learn the SECRET to Attract Women Easily
>
>The SCENT(tm)  Pheromone Sex Attractant For Men to Attract Women

The scent of awk programmers is a lot more attractive to women than
the scent of perl programmers.
--
Mike Brennan
@c brennan@@whidbey.com
@end smallexample
@end ignore

@cindex advanced features, processes@comma{} communicating with
@cindex processes, two-way communications with
ÊääÊï∞ÊçÆÂèëÂêëÂè¶‰∏Ä‰∏™ÂçïÁã¨ÁöÑÁ®ãÂ∫èÔºåÂ§ÑÁêÜÂêéÂÜçËØªÂèñÁªìÊûúÈÄöÂ∏∏ÈÉΩÈùûÂ∏∏ÊúâÁî®„ÄÇËøôÂèØ‰ª•ÈÄöËøá‰∏¥Êó∂Êñá‰ª∂Êù•ÂÅöÂà∞Ôºö

@example
# Write the data for processing
tempfile = ("mydata." PROCINFO["pid"])
while (@var{not done with data})
    print @var{data} | ("subprogram > " tempfile)
close("subprogram > " tempfile)

# Read the results, remove tempfile when done
while ((getline newdata < tempfile) > 0)
    @var{process} newdata @var{appropriately}
close(tempfile)
system("rm " tempfile)
@end example

@noindent
ËøôÂèØ‰ª•Â∑•‰ΩúÔºå‰ΩÜÊòØÊ≤°ÈÇ£‰πà‰ºòÈõÖ„ÄÇÂú®ÂÖ∂‰ªñ‰∫ãÊÉÖÈó¥ÔºåÂÆÉÈúÄË¶ÅÁ®ãÂ∫èËøêË°å‰∏Ä‰∏™‰∏çËÉΩË¢´ÂÖ∂ÂÖ®Áî®Êà∑ÂÖ±‰∫´ÁöÑÁõÆÂΩï‰∏≠ÔºåÊØîÂ¶Ç @file{/tmp} Â∞±‰∏çÂèØ‰ª•ÔºåÂõ†‰∏∫ÂÖ∂‰ªñÁöÑÁî®Êà∑ÊúâÂèØËÉΩÁ¢∞Â∑ß‰ΩøÁî®Áõ∏ÂêåÊñá‰ª∂ÂêçÁöÑ‰∏¥Êó∂Êñá‰ª∂„ÄÇ
@footnote{Michael Brenna Âª∫ËÆÆ‰ΩøÁî® @command{rand()} Êù•‰∫ßÁîüÂîØ‰∏ÄÁöÑ@value{FN}„ÄÇËøôÊòØ‰∏™ÊúâÊïàÁöÑËßÇÁÇπÔºå‰ΩÜÊòØÔºå‰∏¥Êó∂Êñá‰ª∂ÊØîËµ∑ÂèåË∑ØÁÆ°ÈÅìÊù•ËÆ≤ËøòÊòØÂõ∞Èöæ‰∫õ„ÄÇ} @c 8/2014

@cindex coprocesses
@cindex input/output, two-way
@cindex @code{|} (vertical bar), @code{|&} operator (I/O)
@cindex vertical bar (@code{|}), @code{|&} operator (I/O)
@cindex @command{csh} utility, @code{|&} operator, comparison with
‰ΩÜÊòØÔºå‰ΩøÁî® @command{gawk} ÂèØ‰ª•ÊâìÂºÄ‰∏Ä‰∏™@emph{ÂèåË∑Ø}ÁöÑÁÆ°ÈÅìÂà∞Âè¶‰∏Ä‰∏™ËøõÁ®ã‰∏≠„ÄÇÁ¨¨‰∫å‰∏™ËøõÁ®ãË¢´Áß∞‰∏∫@dfn{Âπ∂Á®ã}ÔºåÂõ†‰∏∫ÂÆÉ‰∏é @command{gawk} ‰∏ÄÈÅìËøêË°å„ÄÇÂèåË∑ØËøûÊé•‰ΩøÁî® @samp{|&} Êìç‰ΩúÁ¨¶Êù•Âª∫Á´ãÔºà‰ªé Korn shellÔºå@command{ksh} ÂÄüÊù•ÁöÑÔºâÔºö 
@footnote{Ëøô‰∏é Bash ‰∏é C Shell ‰∏≠ÁöÑÊìç‰ΩúÁ¨¶ÈùûÂ∏∏‰∏çÂêå„ÄÇ}

@example
do @{
    print @var{data} |& "subprogram"
    "subprogram" |& getline results
@} while (@var{data left to process})
close("subprogram")
@end example

Á¨¨‰∏ÄÊ¨°‰ΩøÁî® @samp{|&} Êìç‰ΩúÁ¨¶ÊâßË°å I/O Êìç‰ΩúÊó∂Ôºå@command{gawk} ‰ºöÂàõÂª∫‰∏Ä‰∏™ÂèåË∑ØÁÆ°Á∫øÂà∞ËøõË°åÂè¶‰∏Ä‰∏™Á®ãÂ∫èÁöÑÂ≠êËøõÁ®ã‰∏≠„ÄÇÁî® @code{print} ÊàñËÄÖ @code{printf} ÂàõÂª∫ÁöÑËæìÂá∫‰ºöË¢´ÂÜôÂà∞Á®ãÂ∫èÁöÑÊ†áÂáÜËæìÂÖ•‰∏≠ÔºåËÄåÁ®ãÂ∫èÁöÑÊ†áÂáÜËæìÂá∫ÂèØ‰ª•Ë¢´ @command{gawk} ÁöÑÁ®ãÂ∫è‰ΩøÁî® @code{getline} Êù•ËØªÂèñ„ÄÇ‰∏éÈÄöËøá @samp{|} ÂàõÂª∫ÁöÑÁ®ãÂ∫è‰∏ÄÊ†∑ÔºåÂ≠êÁ®ãÂ∫èÂèØ‰ª•ÊòØ‰ªª‰ΩïÁ®ãÂ∫èÔºåÊàñËÄÖÁ®ãÂ∫èÁöÑÁÆ°Á∫øÔºåÂèØË¢´ Shell ÂêØÂä®„ÄÇ

Ë¶Å‰∫ÜËß£ÁöÑÂá†‰∏™Ê≥®ÊÑèÁÇπÊòØÔºö

@itemize @value{BULLET}
@item
Â∞±ÁõÆÂâç @command{gawk} ‰∏≠ÁöÑ‰ª£Á†ÅÔºåÂπ∂Á®ãÁöÑÊ†áÂáÜÈîôËØØ‰ºöËæìÂá∫Âà∞Áà∂ËøõÁ®ã @command{gawk} ÁöÑÊ†áÂáÜÈîôËØØËæìÂá∫ÁöÑÂú∞Êñπ„ÄÇ‰∏çÂèØ‰ª•ÂçïÁã¨ËØªÂèñÂ≠êËøõÁ®ãÁöÑÊ†áÂáÜÈîôËØØ„ÄÇ

@cindex deadlocks
@cindex buffering, input/output
@cindex @code{getline} command, deadlock and
@item
I/O ÁºìÂ≠òÂèØËÉΩÊòØ‰∏™ÈóÆÈ¢ò„ÄÇ@command{gawk} ‰ºöËá™Âä®Âú∞Âà∑Âá∫ÊâÄÊúâÁöÑËæìÂá∫Âà∞Âπ∂Á®ãÁÆ°ÈÅì„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÂπ∂Á®ãÊ≤°ÊúâÂà∑Âá∫ÂÆÉÁöÑËæìÂá∫Ôºå@command{gawk} ÂèØËÉΩÂú®ÊâßË°å @code{getline} ‰ª•ËØªÂèñÂπ∂Á®ãÁöÑËæìÂá∫Êó∂ËÄåÊåÇËµ∑„ÄÇËøô‰ºöÂØºËá¥ÊâÄË∞ìÁöÑ@dfn{Ê≠ªÈîÅ}ÈóÆÈ¢òÔºåÂú®ËøôÁßçÊÉÖÂΩ¢‰∏ãÔºåÊØè‰∏™ËøõÁ®ãÈÉΩÂú®Á≠âÂæÖÂØπÊñπÂÅö‰∫õ‰ªÄ‰πà‰∫ãÊÉÖ„ÄÇ
@end itemize

@cindex @code{close()} function, two-way pipes and
ÂèØ‰ª•Âè™ÂÖ≥Èó≠Âà∞Âπ∂Á®ãÁöÑÂèåË∑ØÁÆ°ÈÅìÁöÑ‰∏ÄËæπÔºåÂè™ÈúÄË¶Å‰∏∫ @code{close()} ÂáΩÊï∞ÁöÑÊèê‰æõÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºåÂç≥ @code{"to"} ÊàñËÄÖ @code{"from"}ÔºàÊü•Áúã @pxref{Close Files And Pipes}Ôºâ„ÄÇËøô‰∫õÂ≠ó‰∏≤ÈÄöÁü• @command{gawk} ÂÖ≥Èó≠ÁÆ°ÈÅìÁöÑ‰∏ÄÁ´ØÔºåÂç≥ÂèëÈÄÅÊï∞Âà∞Âπ∂Á®ãÁöÑ‰∏ÄÁ´ØÔºåÊàñËÄÖ‰ªéÂÖ∂ËØªÂèñÁöÑ‰∏ÄÁ´Ø„ÄÇ

@cindex @command{sort} utility, coprocesses and
ÂΩì‰ΩøÁî® @command{sort} Á≥ªÁªüÂ∑•ÂÖ∑‰Ωú‰∏∫Âπ∂Á®ãÁöÑ‰∏ÄÈÉ®ÂàÜÊó∂Ôºå‰∏äÈù¢ÁöÑË°å‰∏∫Â∞§ÂÖ∂ÈáçË¶ÅÔºå@command{sort} ÂøÖÈ°ªÂú®‰∫ßÁîüÊâÄÊúâÁöÑËæìÂá∫‰πãÂâçÂÖàËØªÂèñ@emph{ÊâÄÊúâÁöÑ}ËæìÂÖ•Êï∞ÊçÆ„ÄÇ@command{sort} Á®ãÂ∫èÁõ¥Âà∞ @command{gawk} ÂÖ≥ÈîÆÁÆ°ÈÅìÁöÑÂÜô‰∏ÄÁ´ØÂêéÔºå@command{sort} Êâç‰ºöÊé•Êî∂Âà∞ end-of-file ÁöÑÊåáÁ§∫„ÄÇ

ÂΩì‰Ω†ÂÆåÊàê‰∫ÜÊï∞ÊçÆËæìÂá∫Âà∞ @command{sort} Â∑•ÂÖ∑Ôºå‰Ω†ÂèØ‰ª•ÂÖ≥Èó≠ÁÆ°ÈÅìÁöÑ @code{"to"} Á´ØÔºåÁÑ∂ÂêéÁî® @code{getline} ‰ªéÂ∑≤ÁªèÊéíÂ∫èÁöÑÊï∞ÊçÆ‰∏≠ËØªÂèñÁªìÊûú„ÄÇ‰æãÂ¶ÇÔºö

@example
BEGIN @{
    command = "LC_ALL=C sort"
    n = split("abcdefghijklmnopqrstuvwxyz", a, "")

    for (i = n; i > 0; i--)
        print a[i] |& command
    close(command, "to")

    while ((command |& getline line) > 0)
        print "got", line
    close(command)
@}
@end example

Ëøô‰∏™Á®ãÂ∫èÂ∞ÜÂ≠óÊØçË°®ÁöÑÂ≠óÊØç‰ª•ÈÄÜÂ∫èÊñπÂºèÂÜôÂÖ•Ôºå‰∏ÄÊ¨°‰∏ÄË°åÔºåÂÜôÂà∞ @command{sort} ÁöÑÂèåË∑ØÁÆ°ÈÅì‰∏≠„ÄÇ‰πãÂêéÂÖ≥Èó≠ÁÆ°ÈÅìÁöÑÂÜôÁ´ØÔºåÂõ†Ê≠§ @command{sort} ‰ºöÊé•Êî∂Âà∞ end-of-file ÊåáÁ§∫„ÄÇËøô‰ºöÂØºËá¥ @command{sort} Êù•ÊéíÂ∫èÊï∞ÊçÆÔºåÁÑ∂ÂêéÂ∞ÜÊéíÂ∫èÂêéÁöÑÊï∞ÊçÆÂÜôÂõûÂà∞ @command{gawk} Á®ãÂ∫è„ÄÇÂè™Ë¶ÅÊâÄÊúâÁöÑÊï∞ÊçÆË¢´ËØªÂèñÂÆåÊØïÔºå@command{gawk} ‰ºöÁªìÊùüÂπ∂Á®ãÔºåÁÑ∂ÂêéÈÄÄÂá∫„ÄÇ

Âè¶Â§ñ‰∏Ä‰∏™ÊèêÁ§∫ÊòØÔºåÂú® @command{sort} ÂëΩ‰ª§ÁöÑ @samp{LC_ALL=C} ËµãÂÄºÁî®Êù•‰øùËØÅ‰º†ÁªüÁöÑ UnixÔºàASCIIÔºâÊéíÂ∫è„ÄÇÂú®ËøôÈáåÂπ∂‰∏çÊòØ‰∏•Ê†ºÈúÄË¶ÅÔºå‰ΩÜÊòØÁü•ÈÅìÂ¶Ç‰ΩïÊù•ÂÅö‰πüÊòØÂæàÂ•ΩÁöÑ„ÄÇ

ÂΩìÂÖ≥Èó≠‰∏Ä‰∏™ÂèåË∑ØÁÆ°ÈÅìÁöÑ @code{"from"} Á´ØÁöÑÊó∂ÂÄôË¶ÅÂ∞èÂøÉÔºõÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ @command{gawk} Á≠âÂæÖÂ≠êËøõÁ®ãÈÄÄÂá∫ÔºåËøôÂèØËÉΩ‰ºöÂºïËµ∑‰Ω†ÁöÑÁ®ãÂ∫èÊåÇËµ∑„ÄÇ
ÔºàÂõ†Ê≠§ÔºåËøô‰∏™ÁâπÊÄßÂú®ÂÆûÈôÖ‰∏≠‰∏çÂ¶ÇËÉΩÂÖ≥Èó≠ @code{"to"} Á´ØÈÇ£‰πàÊúâÁî®„ÄÇÔºâ

@quotation Ê≥®ÊÑè
ÂÜô‰∏Ä‰∏™ÂèåË∑ØÁÆ°ÈÅìÁöÑÂ∑≤ÂÖ≥Èó≠ÁöÑ @code{"to"} Á´ØÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇËØª‰∏Ä‰∏™ÂèåË∑ØÁÆ°ÈÅìÂ∑≤ÂÖ≥Èó≠ÁöÑ @code{"from"} Á´Ø‰πüÊòØ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØ„ÄÇ
@end quotation

@cindex @command{gawk}, @code{PROCINFO} array in
@cindex @code{PROCINFO} array, and communications via ptys
Â¶ÇÊûúÁ≥ªÁªüÊîØÊåÅÔºå‰Ω†‰πüÂèØ‰ª•‰ΩøÁî® pseudo-ttys(ptys) Áî®Êù•‰ª£ÊõøÁÆ°ÈÅìÊù•ÂÅöÂèåË∑ØÈÄö‰ø°„ÄÇËøôÊòØÈÄöËøáÂü∫‰∫éÂçïÂëΩ‰ª§Êù•ÂÆåÊàêÁöÑÔºåÂè™Ë¶ÅËÆæÁΩÆ @code{PROCINFO} Êï∞ÁªÑÁöÑÁâπÊÆäÂÖÉÁ¥†ÁöÑÂÄºÊù•ÂÆûÁé∞ÔºàÊü•Áúã @pxref{Auto-set}ÔºâÔºåÂ¶ÇÔºö

@example
command = "sort -nr"           # command, save in convenience variable
PROCINFO[command, "pty"] = 1   # update PROCINFO
print @dots{} |& command           # start two-way pipe
@dots{}
@end example

@noindent
Â¶ÇÊûú‰Ω†ÁöÑÁ≥ªÁªüÊ≤°Êúâ ptysÔºåÊàñËÄÖÁ≥ªÁªü‰∏≠ÊâÄÊúâÁöÑ ptys ÈÉΩÂú®‰ΩøÁî®Ôºå@command{gawk} ‰ºöËá™Âä®Âú∞ËøîÂõû‰ΩøÁî®Â∏∏ËßÑÁöÑÁÆ°ÈÅì„ÄÇ

‰ΩøÁî® ptys ÂèØ‰ª•ÈÅøÂÖçÁºìÂ≠òÊ≠ªÈîÅÁöÑÈóÆÈ¢òÔºåÂè™ÊòØÊçüÂ§±‰∏Ä‰∫õÊÄßËÉΩ„ÄÇ
ËøôÊòØÂõ†‰∏∫ tty driver ÊòØ‰∏ÄË°å‰∏ÄË°åÁºìÂ≠òÊï∞ÊçÆÂíåÂèëÈÄÅÊï∞ÊçÆÁöÑ„ÄÇÂú®Áî® @command{stdbuf}Ôºà@uref{http://www.gnu.org/software/coreutils/coreutils.html,
GNU Coreutils package}ÁöÑ‰∏ÄÈÉ®ÂàÜÔºâÁöÑÁ≥ªÁªü‰∏≠Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî®ÈÇ£‰∏™Á®ãÂ∫èÊù•‰ª£Êõø ptys„ÄÇ

‰πüË¶ÅÊ≥®ÊÑè ptys ‰∏çÊòØÂÆåÂÖ®ÈÄèÊòéÁöÑ„ÄÇÊüê‰∫õ‰∫åËøõÂà∂ÊéßÂà∂‰ª£Á†ÅÔºå‰æãÂ¶ÇÁî® @kbd{Ctrl-d} Ë°®Á§∫ end-of-fileÔºåÊòØÁî± tty driver Ëß£ÈáäÁöÑÔºå‰∏çËÉΩ‰º†Ëæì„ÄÇ

@quotation Ê≥®ÊÑè
ÊúÄÂêéÔºåÂπ∂Á®ãÂØºËá¥‰∫Ü @command{gawk} ÂíåÂπ∂Á®ã‰∏≠ËøêË°åÁöÑÁ®ãÂ∫è‰∏≠Èó¥‰∫ßÁîüÊ≠ªÈîÅÁöÑÂèØËÉΩÊÄß„ÄÇ
Â¶ÇÊûú‰Ω†Âú®ÂæóÂà∞‰ªª‰ΩïËøîÂõûÊï∞ÊçÆ‰πãÂâçÂèëÈÄÅ‚ÄúÂ§™Â§ö‚ÄùÊï∞ÊçÆÁªôÂπ∂Á®ãÔºåËøô‰ºöÂèëÈÄÅÊ≠ªÈîÅÔºõÊØè‰∏™ÂÜôÊï∞ÊçÆÁöÑËøõÁ®ã‰ºöÈòªÂ°ûÔºå
Ê≤°Êúâ‰∏Ä‰∏™ËÉΩËØª‰ªñ‰ª¨Â∑≤ÁªèÂÜôÂÖ•ÁöÑÊï∞ÊçÆ„ÄÇÊ≠ªÈîÅÊ≤°Êúâ‰ªÄ‰πàÂèòÈÄöÂäûÊ≥ïÔºõ‰Ω†ÈúÄË¶ÅÂ∞èÂøÉÂú∞ÁºñÁ®ãÔºåÂπ∂‰∏î‰∫ÜËß£Âπ∂Á®ãÁöÑË°®Áé∞„ÄÇ
@end quotation

@node TCP/IP Networking
@section Âà©Áî® @command{gawk} ËøõË°åÁΩëÁªúÈÄö‰ø°
@cindex advanced features, network programming
@cindex networks, programming
@cindex TCP/IP
@cindex @code{/inet/@dots{}} special files (@command{gawk})
@cindex files, @code{/inet/@dots{}} (@command{gawk})
@cindex @code{/inet4/@dots{}} special files (@command{gawk})
@cindex files, @code{/inet4/@dots{}} (@command{gawk})
@cindex @code{/inet6/@dots{}} special files (@command{gawk})
@cindex files, @code{/inet6/@dots{}} (@command{gawk})
@cindex @code{EMRED}
@ifnotdocbook
@quotation
@code{EMRED}:@*
@ @ @ @ @i{A host is a host from coast to coast,@*
@ @ @ @ and nobody talks to a host that's close,@*
@ @ @ @ unless the host that isn't close@*
@ @ @ @ is busy, hung, or dead.}
@author Mike O'Brien (aka Mr.@: Protocol)
@end quotation
@end ifnotdocbook

@docbook
<blockquote>
<attribution>Mike O'Brien (aka Mr.&nbsp;Protocol)</attribution>
<literallayout class="normal"><literal>EMRED</literal>:
&nbsp;&nbsp;&nbsp;&nbsp;<emphasis>‰∏ªÊú∫‰ªéÊµ∑Â≤∏Âà∞Êµ∑Â≤∏Ôºå</emphasis>
&nbsp;&nbsp;&nbsp;&nbsp;<emphasis>Ê≤°‰∫∫ÂèØ‰∏éÂ∑≤ÁªèÂÖ≥Èó≠ÁöÑ‰∏ªÊú∫ÂñÉÂñÉÁßÅËØ≠Ôºå</emphasis>
&nbsp;&nbsp;&nbsp;&nbsp;<emphasis>ËÄåÊ≤°ÂÖ≥ÁöÑ‰∏ªÊú∫Ë¶Å‰πàÂøôÂæóÊ≠ªÔºå</emphasis>
&nbsp;&nbsp;&nbsp;&nbsp;<emphasis>Ë¶Å‰πàÊåÇËµ∑ÊàñÊ≠ª‰∫°„ÄÇ</emphasis></literallayout>
</blockquote>
@end docbook

Èô§‰∫ÜÂèØ‰ª•Âú®Âêå‰∏Ä‰∏™Á≥ªÁªü‰∏≠ÊâìÂºÄ‰∏Ä‰∏™ÂèåË∑ØÂà∞Âπ∂Á®ãÁöÑÁÆ°Á∫øÔºàÊü•Áúã @pxref{Two-way I/O}ÔºâÔºå‰πüÂèØ‰ª•ÈÄöËøá IP ÁΩëÁªúËøûÊé•Êù•‰∏éÂú®Âè¶‰∏Ä‰∏™Á≥ªÁªü‰∏äÁöÑÂè¶‰∏Ä‰∏™ËøõÁ®ã‰πãÈó¥ËøõË°åÂèåË∑ØËøûÊé•„ÄÇ

‰Ω†ÂèØ‰ª•ÊääËøô‰∏™ÂΩìÊàêÊòØ‰∏Ä‰∏™@emph{ÈùûÂ∏∏Èïø}ÁöÑÂà∞Âπ∂Á®ãÁöÑÂèåË∑ØÁÆ°Á∫ø„ÄÇ@command{gawk} Á°ÆÂÆö‰Ω†‰ΩøÁî® TCP/IP ÁΩëÁªúÁöÑÊñπÂºèÊòØÈÄöËøáËØÜÂà´‰ª• @samp{/inet/}Ôºå@samp{/inet4/}Ôºå ÊàñËÄÖ @samp{/inet6/} ÂºÄÂ§¥ÁöÑÁâπÂà´@value{FN}„ÄÇ

ÁâπÊÆä@value{FN}ÁöÑÂÆåÊï¥ËØ≠Ê≥ï‰∏∫ @file{/@var{net-type}/@var{protocol}/@var{local-port}/@var{remote-host}/@var{remote-port}}„ÄÇËøô‰∫õÁªÑ‰ª∂‰∏∫Ôºö

@table @var
@item net-type
ÊåáÂÆöË¶ÅÂª∫Á´ãÁöÑ‰∫íËÅîÁΩëËøûÊé•ÁöÑÁ±ªÂûã„ÄÇ‰ΩøÁî® @samp{/inet4/} Êù•Âº∫Âà∂‰ΩøÁî® IPv4Ôºå@samp{/inet6/} Êù•Âº∫Âà∂‰∏∫ IPv6„ÄÇÊôÆÈÄöÊñáÊú¨ @samp{/inet/} ÔºàËøáÂéªÊòØÂîØ‰∏ÄÁöÑÈÄâÈ°πÔºâÁî®‰∫éÁ≥ªÁªüÈªòËÆ§ÊñπÂºèÔºåÂ§ßÂ§öÊï∞ÂèØËÉΩÊòØ IPv4„ÄÇ

@item protocol
Âú® IP ‰πã‰∏ä‰ΩøÁî®ÁöÑÂçèËÆÆ„ÄÇÂøÖÈ°ªÊòØ @samp{tcp}Ôºå@samp{udp} ‰πã‰∏ÄÔºåÁõ∏Â∫îÂØπÂ∫î‰∏∫ TCP ÊàñËÄÖ UDP IP ËøûÊé•„ÄÇTCP Áî®‰∫éÂ§ßÂ§öÊï∞Á®ãÂ∫è„ÄÇ

@item local-port
@cindex @code{getaddrinfo()} function (C library)
Êú¨Âú∞ TCP ÊàñËÄÖ UDP Á´ØÂè£„ÄÇÂ¶ÇÊûú‰Ω†ÊÉ≥ËÆ©Á≥ªÁªüÈÄâÊã©Á´ØÂè£ÔºåÂàôÊåáÂÆö @samp{0} ‰∏∫ÂÖ∂Á´ØÂè£Âè∑„ÄÇÂ¶ÇÊûú‰Ω†Âú®ÂÜô TCP ÊàñËÄÖ UDP ÂÆ¢Êà∑Á´ØÂàô‰Ω†Â∫îËØ•Ëøô‰πàÊù•Â§ÑÁêÜ„ÄÇ‰Ω†‰πüÂèØ‰ª•‰ΩøÁî®Áü•ÂêçÁöÑÊúçÂä°ÂêçÔºåÂ¶Ç @samp{smtp} ÊàñËÄÖ @samp{http}ÔºåËøôÊ†∑ @command{gawk} Âú®‰ΩøÁî® C ÁöÑ @code{getaddinfo()} ÂáΩÊï∞Êó∂‰ºöÂ∞ùËØïÁ°ÆÂÆöÈ¢ÑÂÆö‰πâÁöÑÁ´ØÂè£„ÄÇ

@item remote-host
‰Ω†Ë¶ÅËøûÊé•ÁöÑ‰∏ªÊú∫ÁöÑ IP Âú∞ÂùÄÔºåÊàñËÄÖÊòØÂÆåÊï¥ÁöÑ Internet ÂüüÂêç„ÄÇ

@item remote-port
ËøûÊé•ËøúÁ®ã‰∏ªÊú∫ @var{remote-host} ÁöÑ TCP ÊàñËÄÖ UDP Á´ØÂè£„ÄÇÂÜçÊ¨°Âú∞Ôºå‰Ω†Â¶ÇÊûú‰∏çÂÖ≥ÂøÉÁ´ØÂè£ÂèØ‰ª•‰ΩøÁî® @samp{0}ÔºåÊàñËÄÖÁü•ÂêçÁöÑÊúçÂä°Âêç„ÄÇ
@end table

@cindex @command{gawk}, @code{ERRNO} variable in
@cindex @code{ERRNO} variable
@quotation ÊèêÁ§∫
Êó†Ê≥ïÊâìÂºÄÂèåË∑ØÁöÑ socket ‰ºöÂØºËá¥‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØËøîÂõûÂà∞Ë∞ÉÁî®ÁöÑ‰ª£Á†Å„ÄÇ@code{ERRNO} ÁöÑÂÄºÊåáÁ§∫‰∫ÜÈîôËØØ‰ø°ÊÅØÔºàÊü•Áúã @pxref{Auto-set}Ôºâ„ÄÇ
@end quotation

ËÄÉËôë‰∏ãÈù¢ÈùûÂ∏∏ÁÆÄÂçïÁöÑ‰æãÂ≠êÔºö

@example
BEGIN @{
    Service = "/inet/tcp/0/localhost/daytime"
    Service |& getline
    print $0
    close(Service)
@}
@end example

Ëøô‰∏™Á®ãÂ∫è‰ªéÊú¨Âú∞Á≥ªÁªüÁöÑ TCP @code{daytime} ÊúçÂä°Âô®‰∏≠ËØªÂèñÂΩìÂâçÁöÑÊó•ÊúüÂèäÊó∂Èó¥„ÄÇÁÑ∂ÂêéÊâìÂç∞ÁªìÊûúÂêéÂÖ≥Èó≠ËøûÊé•„ÄÇ

Áî±‰∫éËøô‰∏™‰∏ªÈ¢òÊòØÊâ©Â±ïÂÜÖÂÆπÔºåÁî® @command{gawk} ËøõË°å TCP/IP ÁºñÁ®ã‰∏∫Áã¨Á´ãÁöÑÊñáÊ°£„ÄÇ
Because this topic is extensive, the use of @command{gawk} for
TCP/IP programming is documented separately.
@ifinfo
See
@inforef{Top, , General Introduction, gawkinet, @value{GAWKINETTITLE}},
@end ifinfo
@ifnotinfo
Êü•Áúã @uref{http://www.gnu.org/software/gawk/manual/gawkinet/,
@cite{@value{GAWKINETTITLE}}}„ÄÇÂÆÉÊòØ @command{gawk} ÂèëÂ∏ÉÁâàÊú¨ÁöÑ‰∏ÄÈÉ®ÂàÜÔºå
@end ifnotinfo
ÂÖ∂‰∏≠ÊúâÂÆåÊï¥ÁöÑ‰ªãÁªç‰∏éËÆ®ËÆ∫ÔºåÂêåÊó∂ÊúâÊõ¥Â§öÁöÑ‰æãÂ≠ê„ÄÇ

@quotation ÊèêÁ§∫
@command{gawk} Âè™ËÉΩÊâìÂºÄÁõ¥Êé•ÁöÑ sockets„ÄÇÁé∞Âú®Ê≤°ÊúâÂäûÊ≥ïÂéªËé∑Âèñ SSL ÁöÑÊúçÂä°ÔºõËøôÂåÖÊã¨‰ªª‰Ωï URL ‰ª• @samp{https://} ÂºÄÂ§¥ÁöÑÁΩëÁ´ôÊúçÂä°„ÄÇ
@end quotation


@node Profiling
@section ÊµãËØÑ‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è
@cindex @command{awk} programs, profiling
@cindex profiling @command{awk} programs
@cindex @code{awkprof.out} file
@cindex files, @code{awkprof.out}

‰Ω†ÂèØ‰ª•ÁîüÊàê‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÊâßË°åÁöÑË∑üË∏™‰ø°ÊÅØ„ÄÇËøôÂè™Ë¶Å‰º†ÈÄí @option{--profile} ÂèÇÊï∞Âà∞ @command{gawk} Â∞±ÂèØ‰ª•„ÄÇÂΩì @command{gawk} ÂÆåÊàêÂêéÔºåÂÆÉ‰ºöÂàõÂª∫‰∏Ä‰∏™Âêç‰∏∫ @file{awkprof.out} ÁöÑÊµãËØÑÊñá‰ª∂„ÄÇÁî±‰∫éÁ®ãÂ∫èË¢´ÊµãËØÑÔºåËøôÊ†∑ÂÆÉË¶ÅÊØîÊ≠£Â∏∏ÁöÑÊâßË°åÊÖ¢ 45%„ÄÇ

@cindex @option{--profile} option
Â¶Ç‰∏ãÈù¢ÁöÑ‰æãÂ≠êÊâÄÁ§∫Ôºå@option{--profile} ÈÄâÈ°πÂèØ‰ª•ÊåáÂÆö @command{gawk} Â∞ÜÊµãËØÑ‰ø°ÊÅØÂÜôÂÖ•ÁöÑÊñá‰ª∂ÁöÑÂêçÂ≠óÔºö

@example
gawk --profile=myprog.prof -f myprog.awk data1 data2
@end example

@noindent
Âú®ÂâçÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå@command{gawk} Â∞ÜÊµãËØÑÊï∞ÊçÆÊîæÂú® @file{myprog.prof} Êñá‰ª∂ÔºåËÄå‰∏çÊòØ @file{awkprof.out} Êñá‰ª∂„ÄÇ

ËøôÊòØ‰∏Ä‰∏™ÁÆÄÂçïÁöÑ @command{awk} Á®ãÂ∫èÁöÑÊâßË°å‰ø°ÊÅØÔºåÂåÖÂê´ËæìÂÖ•Êï∞ÊçÆÔºå‰ª•ÂèäÁî® @option{--profile} ÊâßË°å @command{gawk} Êó∂ÁöÑÁªìÊûú„ÄÇÈ¶ñÂÖàÔºå‰∏ãÈù¢ÊòØ @command{awk} Á®ãÂ∫èÔºö

@example
BEGIN @{ print "First BEGIN rule" @}

END @{ print "First END rule" @}

/foo/ @{
    print "matched /foo/, gosh"
    for (i = 1; i <= 3; i++)
        sing()
@}

@{
    if (/foo/)
        print "if is true"
    else
        print "else is true"
@}

BEGIN @{ print "Second BEGIN rule" @}

END @{ print "Second END rule" @}

function sing(    dummy)
@{
    print "I gotta be me!"
@}
@end example

Following is the input data:

@example
foo
bar
baz
foo
junk
@end example

‰∏ãÈù¢ÊòØ‰ΩøÁî® @command{gawk} ÊµãËØÑÂô®ÊâßË°åÁ®ãÂ∫è‰∏éÊï∞ÊçÆÊó∂ÁöÑ‰∫ßÁîüÁöÑÊï∞ÊçÆÊñá‰ª∂ @file{awkprof.out}ÔºàËøô‰∏™‰æãÂ≠ê‰πüËØ¥Êòé‰∫Ü @command{awk} Á®ãÂ∫èÂëòÊúâÊó∂ÂæàÊó©Â∞±Ëµ∑Êù•Â∑•‰Ωú‰∫ÜÔºâÔºö

@cindex @code{BEGIN} pattern, and profiling
@cindex @code{END} pattern, and profiling
@example
    # gawk profile, created Mon Sep 29 05:16:21 2014

    # BEGIN rule(s)

    BEGIN @{
 1          print "First BEGIN rule"
    @}

    BEGIN @{
 1          print "Second BEGIN rule"
    @}

    # Rule(s)

 5  /foo/ @{ # 2
 2          print "matched /foo/, gosh"
 6          for (i = 1; i <= 3; i++) @{
 6                  sing()
            @}
    @}

 5  @{
 5          if (/foo/) @{ # 2
 2                  print "if is true"
 3          @} else @{
 3                  print "else is true"
            @}
    @}

    # END rule(s)

    END @{
 1          print "First END rule"
    @}

    END @{
 1          print "Second END rule"
    @}


    # Functions, listed alphabetically

 6  function sing(dummy)
    @{
 6          print "I gotta be me!"
    @}
@end example

Ëøô‰∏™‰æãÂ≠êËØ¥Êòé‰∫ÜÊµãËØÑËæìÂá∫ÁöÑ‰∏Ä‰∫õÂü∫Êú¨ÁâπÊÄß„ÄÇÂÆÉ‰ª¨ÊòØÔºö

@itemize @value{BULLET}
@item
Á®ãÂ∫è‰ª• @code{BEGIN} ËßÑÂàôÔºåÊ®°Âºè-Âä®‰ΩúËßÑÂàôÔºå@code{BEGINFILE} ËßÑÂàôÔºå@code{ENDFILE} ËßÑÂàôÔºå@code{END} ËßÑÂàôËøôÊ†∑ÁöÑÈ°∫Â∫èÊù•ÊâìÂç∞ËæìÂá∫„ÄÇÂπ∂‰ª•Â≠óÊØçÈ°∫Â∫èÂàóË°®„ÄÇÂ§ö‰∏™ @code{BEGIN} ‰∏é @code{END} ËßÑÂàô‰ºöÊúâÂçïÁã¨ÁöÑÊ†áËØÜÔºå@code{BEGINFILE} ‰∏é @code{ENDFILE} ‰πü‰∏ÄÊ†∑„ÄÇ

@cindex patterns, counts, in a profile
@item
Ê®°Âºè-Âä®‰ΩúËßÑÂàôÊúâ‰∏§‰∏™ÁªüËÆ°ÔºåÁ¨¨‰∏Ä‰∏™ÊòØËßÑÂàôÁöÑÂ∑¶ËæπÔºåÊòæÁ§∫ÁöÑÊòØËßÑÂàôÁöÑÊ®°ÂºèË¢´@emph{ÊµãËØï}ÁöÑÊ¨°Êï∞„ÄÇÁ¨¨‰∫å‰∏™ÂàÜÊòØËßÑÂàôÁöÑÂè≥ËæπÂú®ÂºÄËä±Âè∑‰∏≠Âú®Ê≥®ÈáäÈáåÈù¢ÔºåÊòæÁ§∫ÁöÑÊòØËßÑÂàôË¢´@emph{ÊâßË°å}ÁöÑÊ¨°Êï∞„ÄÇ‰∏§‰∏™Êï∞ÂÄºÁöÑÂ∑ÆÂºÇÊòæÁ§∫ÁöÑÊòØËßÑÂàôÊ®°ÂºèË¢´ÊµãËØï‰∏∫ false ÁöÑÊ¨°Êï∞„ÄÇ

@item
Áõ∏‰ººÁöÑÔºåÂØπ‰∫é @code{if}-@code{else} ËØ≠Âè•ÁöÑÁªüËÆ°ÊòæÁ§∫‰∫ÜÊù°‰ª∂Ë¢´ÊµãËØïÁöÑÊ¨°Êï∞„ÄÇÂú®ÂºÄËä±Êã¨Âè∑ÁöÑÂè≥ËæπÁöÑ @code{if} ÁöÑËØ≠Âè•‰ΩìÂ§ÑÁöÑÁªüËÆ°ÊòæÁ§∫ÁöÑÊòØÊù°‰ª∂ÊµãËØï‰∏∫ÁúüÁöÑÊ¨°Êï∞„ÄÇ@code{else} ÁöÑÁªüËÆ°ÊòæÁ§∫ÁöÑÊòØÊµãËØïÂ§±Ë¥•ÁöÑÊ¨°Êï∞„ÄÇ

@cindex loops, count for header, in a profile
@item
ÂØπ‰∫éÂæ™ÁéØÂ§¥ÁöÑÁªüËÆ°ÔºàÂ¶Ç @code{for} ÊàñËÄÖ @code{while}ÔºâÊòæÁ§∫ÁöÑÊòØÂæ™ÁéØÊµãËØïÊâßË°åÁöÑÊ¨°Êï∞„ÄÇÔºàÁî±‰∫éËøô‰∏™ÂéüÂõ†Ôºå‰Ω†‰∏çÂèØÂè™ÁúãÂú®ËßÑÂàô‰∏≠ÁöÑÁ¨¨‰∏ÄÊù°ËØ≠Âè•ÁöÑÁªüËÆ°Êù•Á°ÆÂÆöËßÑÂàôË¢´ÊâßË°åÁöÑÊ¨°Êï∞„ÄÇÂ¶ÇÊûúÁ¨¨‰∏ÄÊù°ËØ≠Âè•ÊòØ‰∏Ä‰∏™Âæ™ÁéØÔºåÂàôÁªüËÆ°‰ºöËØØÂØº‰Ω†„ÄÇÔºâ

@cindex functions, user-defined, counts, in a profile
@cindex user-defined, functions, counts, in a profile
@item
ÂØπ‰∫éÁî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÔºåÂú® @code{function} ÂÖ≥ÈîÆËØçÂêéÈù¢ÁöÑÁªüËÆ°ÊòæÁ§∫ÁöÑÊòØÂáΩÊï∞Ë¢´Ë∞ÉÁî®ÁöÑÊ¨°Êï∞„ÄÇÂú®ÂáΩÊï∞‰ΩìËØ≠Âè•ËØ≠Âè•ÂêéÈù¢ÁöÑÁªüËÆ°ÔºåÂàôÊòØËØ≠Âè•Ë¢´ÊâßË°åÁöÑÊ¨°Êï∞„ÄÇ

@cindex @code{@{@}} (braces)
@cindex braces (@code{@{@}})
@item
ËæìÂá∫Â∏ÉÂ±Ä‰ΩøÁî®ÁöÑÊòØ ‚ÄúK&R‚Äù Â∏¶ TABs ÁöÑÈ£éÊ†º„ÄÇËä±Êã¨Âè∑‰ºöÂà∞Â§Ñ‰ΩøÁî®ÔºåÂ∞±ÁÆóÊòØ @code{if}Ôºå@code{else}ÔºåÊàñËÄÖÂæ™ÁéØ‰ΩìÂè™Êúâ‰∏Ä‰∏™ËØ≠Âè•„ÄÇ

@cindex @code{()} (parentheses), in a profile
@cindex parentheses @code{()}, in a profile
@item
Êã¨Âè∑ÂàôÂè™Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄô‰ΩøÁî®ÔºåÂÆÉÁî±Á®ãÂ∫èÁöÑÁªìÊûÑ ‰ª•ÂèäÂâçÈù¢ËßÑÂàôÊù•ÊèêÁ§∫„ÄÇ‰æãÂ¶ÇÔºå@samp{(3 + 5) * 4} Ë°®Á§∫ 3 Âä† 5ÔºåÁÑ∂Âêé‰πò‰∏ä 4 ÁöÑÁªìÊûú„ÄÇ‰ΩÜÊòØ @samp{3 + 5 * 4} Ê≤°ÊúâÊã¨Âè∑ÔºåÂàôË°®Á§∫ @samp{3 + (5 * 4)}„ÄÇ

@ignore
@item
All string concatenations are parenthesized too.
(This could be made a bit smarter.)
@end ignore

@item
Êã¨Âè∑Âè™Áî®Âú® @code{print} ‰∏é @code{printf} ÂèÇÊï∞Âë®Âõ¥ÔºåÂπ∂‰∏îÂè™ÂΩì @code{print} ‰∏é @code{printf} ÁöÑËØ≠Âè•ÂêéÈù¢Ë∑üÁùÄÈáçÂÆöÂêëÁ¨¶„ÄÇÁõ∏‰ººÁöÑÔºåÂ¶ÇÊûúÈáçÂÆöÂêëÁöÑÁõÆÊ†á‰∏çÊòØÊ†áÈáèÔºåÂàôÂÆÉ‰ºöË¢´Êã¨Ëµ∑Êù•„ÄÇ

@item
@command{gawk} Êèê‰æõ @code{BEGIN} ‰∏é @code{END} ËßÑÂàôÔºå@code{BEGINFILE} ‰∏é @code{ENDFILE} ËßÑÂàôÔºåÊ®°Âºè-Âä®‰ΩúËßÑÂàô‰∏éÂáΩÊï∞ÁöÑÂâçÂØºÊ≥®Èáä„ÄÇ

@end itemize

‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÊµãËØÑÁâàÊú¨ÂèØËÉΩ‰∏ç‰ºöÂÆåÂÖ®ÂÉè‰Ω†ÊâÄÂÜôÁöÑÈÇ£Ê†∑„ÄÇËøôÊòØÂõ†‰∏∫ @command{gawk} Áî®‚ÄúÁÆÄÊ¥ÅÊâìÂç∞‚ÄùÂÖ∂Á®ãÂ∫èÁöÑÂÜÖÈÉ®Ë°®Á§∫Êù•ÁîüÊàêÁöÑÊµãËØÑ„ÄÇËøô‰πàÂÅöÁöÑÂ•ΩÂ§ÑÊòØ @command{gawk} ÂèØ‰ª•‰∫ßÁîüÊ†áÂáÜÁöÑË°®Á§∫„ÄÇ‰∏çÂ•ΩÁöÑÂú∞ÊñπÊòØ‰ºö‰∏¢Â§±Á®ãÂ∫èÁöÑ‰ª£Á†Å„ÄÇÂêåÊó∂ÔºåÂÉèËøôÊ†∑ÁöÑ‰ª£Á†ÅÔºö

@example
/foo/
@end example

@noindent
‰ºöÁîüÊàêÔºö

@example
/foo/   @{
    print $0
@}
@end example

@noindent
ËôΩÁÑ∂Ê≠£Á°ÆÔºå‰ΩÜÂèØËÉΩÂπ∂‰∏çÊòØÊâÄÊúüÊúõÁöÑ„ÄÇ

@cindex profiling @command{awk} programs, dynamically
@cindex @command{gawk} program, dynamic profiling
@cindex dynamic profiling
ÂΩìÁ®ãÂ∫èÊâßË°åÂÆåÊàêÂêé‰ºöÁîüÊàêÊµãËØÑÂ§ñÔºå@command{gawk} ‰πüÂèØ‰ª•Âú®ËøêË°åÁöÑÊó∂ÂÄôÁîüÊàê„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è‰ºöËøõÂÖ•‰∏Ä‰∏™Êó†ÈôêÂæ™ÁéØÔºåËÄå‰Ω†ÂèàÊÉ≥ÁúãÊâßË°å‰∫Ü‰ªÄ‰πàÁöÑÊó∂ÂÄôÔºåËøô‰ºöÈùûÂ∏∏ÊúâÁî®„ÄÇ‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∏™ÁâπÊÄßÔºåËØ∑Âú®ÂêéÂè∞Ê®°ÂºèÊù•ÊâßË°åÂ∏¶ @option{--profile} ÈÄâÈ°πÁöÑ @command{gawk} Ôºö

@example
$ @kbd{gawk --profile -f myprog &}
[1] 13992
@end example

@cindex @command{kill} command@comma{} dynamic profiling
@cindex @code{USR1} signal, for dynamic profiling
@cindex @code{SIGUSR1} signal, for dynamic profiling
@cindex signals, @code{USR1}/@code{SIGUSR1}, for profiling
@noindent
shell ‰ºöÊâìÂç∞‰∏Ä‰∏™‰ªªÂä°Âè∑‰ª•ÂèäËøõÁ®ã ID Âè∑ÔºåÂú®ËøôÈáåÊòØ 13992„ÄÇ‰ΩøÁî® @command{kill} ÂëΩ‰ª§Êù•ÂèëÈÄÅ @code{USR1} ‰ø°Âè∑Âà∞ @command{gawk} Ôºö

@example
$ @kbd{kill -USR1 13992}
@end example

@noindent
Â¶ÇÈÄöÂ∏∏ÊÉÖÂÜµÔºåÊµãËØÑÁöÑÁ®ãÂ∫èÁâàÊú¨Ë¢´ÂÜôÂÖ•Âà∞ @file{awkprof.out} Êñá‰ª∂‰∏≠ÔºåÊàñËÄÖÂÜôÂÖ•Âà∞Âú® @option{--profile} ÈÄâÈ°π‰∏≠ÊåáÂÆöÁöÑÊñá‰ª∂‰∏≠„ÄÇ

‰Ωú‰∏∫Â∏∏ËßÑÁöÑÊµãËØÑÔºåÂ¶ÇÁ®çÊó©ÊòæÁ§∫ÁöÑÔºåÊµãËØÑ‰∏≠ÂåÖÂê´‰ªª‰ΩïÊ¥ªÂä®ÁöÑÂáΩÊï∞ÁöÑË∑üË∏™‰ø°ÊÅØÔºö

@example
# Function Call Stack:

#   3. baz
#   2. bar
#   1. foo
# -- main --
@end example

‰Ω†ÂèØ‰ª•ÂèëÈÄÅÂ§öÊ¨° @code{USR1} ‰ø°Âè∑„ÄÇÊØèÂèë‰∏ÄÊ¨°ÔºåÊµãËØÑ‰∏éÂáΩÊï∞Ë∞ÉÁî®Ë∑ØÂæÑ‰ºöË¢´ÈôÑÂä†Âà∞ÊµãËØÑÊñá‰ª∂‰∏≠„ÄÇ

@cindex @code{HUP} signal, for dynamic profiling
@cindex @code{SIGHUP} signal, for dynamic profiling
@cindex signals, @code{HUP}/@code{SIGHUP}, for profiling
Â¶ÇÊûú‰Ω†‰ΩøÁî®ÁöÑÊòØ @code{HUP} ‰ø°Âè∑ÔºåËÄå‰∏çÊòØ @code{USR1} ‰ø°Âè∑Ôºå@command{gawk} ‰ºö‰∫ßÁîüÊµãËØÑ‰∏éÂáΩÊï∞Ë∞ÉÁî®Ë∑ØÂæÑ‰ø°ÊÅØÂêéÈÄÄÂá∫„ÄÇ

@cindex @code{INT} signal (MS-Windows)
@cindex @code{SIGINT} signal (MS-Windows)
@cindex signals, @code{INT}/@code{SIGINT} (MS-Windows)
@cindex @code{QUIT} signal (MS-Windows)
@cindex @code{SIGQUIT} signal (MS-Windows)
@cindex signals, @code{QUIT}/@code{SIGQUIT} (MS-Windows)
ÂΩì @command{gawk} Âú® MS-Windows Á≥ªÁªü‰∏äËøêË°åÊó∂ÔºåÂÆÉ‰ΩøÁî® @code{INT} ‰∏é @code{QUIT} ‰ø°ÊÅØÊù•‰∫ßÁîüÊµãËØÑÔºåÂú®‰ΩøÁî® @code{INT} ‰ø°Âè∑Êó∂Ôºå@command{gawk} ‰ºöÈÄÄÂá∫„ÄÇËøôÈáåÂõ†‰∏∫Ëøô‰∫õÁ≥ªÁªü‰∏çÊîØÊåÅ @command{kill} ÂëΩ‰ª§ÔºåÊâÄ‰ª•Âè™ËÉΩÈÄöËøáÈîÆÁõò‰∫ßÁîüÁöÑ‰ø°Âè∑Êù•ÂèëÈÄÅÁªôÁ®ãÂ∫è„ÄÇ@code{INT} ‰ø°Âè∑ÈÄöËøá @kbd{Ctrl-c} ÊàñËÄÖ @kbd{Ctrl-BREAK} ÈîÆÊù•‰∫ßÁîüÔºåËÄå @code{QUIT} ‰ø°ÊÅØÂàôÁî± @kbd{Ctrl-\} ÈîÆÊù•‰∫ßÁîü„ÄÇ

ÊúÄÂêéÔºå@command{gawk} ‰πüÊé•Êî∂ÂÖ∂‰ªñÁöÑÈÄâÈ°πÔºå@option{--pretty-print}„ÄÇÂΩìËøô‰πàË∞ÉÁî®Êó∂Ôºå@command{gawk} ‰ºö‚ÄúÁÆÄÊ¥ÅÊâìÂç∞‚ÄùÁ®ãÂ∫èÂà∞ @file{awkprof.out} ‰∏≠Ôºå‰∏çÂ∏¶ÊâßË°åÁªüËÆ°ÁöÑÊñπÂºè„ÄÇ

@quotation ÊèêÁ§∫
@option{--pretty-print} ‰ºöÊâßË°å‰Ω†ÁöÑÁ®ãÂ∫è„ÄÇËøô‰ºöÂú®‰∏ã‰∏Ä‰∏™‰∏ªË¶ÅÁâàÊú¨‰∏≠ÊîπÂèò„ÄÇ
@end quotation

@node Advanced Features Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
@option{--non-decimal-data} ÈÄâÈ°πÂèØ‰ª•‰Ωø @command{gawk} Â∞ÜÂÖ´ËøõÂà∂ÊàñËÄÖÂçÅÂÖ≠ËøõÂà∂ÂºèÁöÑËæìÂÖ•Êï∞ÊçÆÂΩìÊàêÊòØÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂Êï∞ÊçÆÂØπÂæÖ„ÄÇËøô‰∏™ÈÄâÈ°πË¶ÅÂ∞èÂøÉ‰ΩøÁî®ÔºåÊàñËÄÖ‰∏çË¶Å‰ΩøÁî®ÔºåËÄåÊòØË¶Å‰ΩøÁî® @code{strtonum()}„ÄÇ‰πüË¶ÅÊ≥®ÊÑèËøô‰∏™ÈÄâÈ°πÂú®Êú™Êù•ÁöÑ @command{gawk} ÁâàÊú¨ÂèØËÉΩ‰ºöÊ∂àÂ§±„ÄÇ

@item
‰Ω†ÂèØ‰ª•ÂÆåÂÖ®ÊéßÂà∂Âú® @samp{for (@var{indx} in @var{array})} ‰∏≠ËøõË°åÊï∞ÁªÑÈÅçÂéÜÁöÑÊéíÂ∫èÊñπÂºèÔºåËøôÈÄöËøáÂ∞ÜÈ¢ÑÂÆö‰πâÁöÑ @code{PROCINFO["sorted_in"]} ÂèòÈáèËÆæÁΩÆ‰∏∫Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÂêçÔºåËÄåËøô‰∏™ÂáΩÊï∞ÂàôÈÄöËøáÂØπÁ¥¢Âºï‰∏éÂÄºÁöÑÊØîËæÉÊù•ËøõË°åÂÖÉÁ¥†ÁöÑÊØîËæÉ„ÄÇ

@item
Á±ª‰ººÂú∞Ôºå‰Ω†‰πüÂèØÊèê‰æõ‰∏Ä‰∏™Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÊØîËæÉÂáΩÊï∞ÁöÑÂêçÂ≠óÊù•‰Ωú‰∏∫ @code{asort()} ÊàñËÄÖ @code{asorti()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞Êù•ÊéßÂà∂ÂáΩÊï∞Â¶Ç‰ΩïÊù•ÂØπÊï∞ÁªÑËøõË°åÊéíÂ∫è„ÄÇÊàñËÄÖ‰Ω†‰πüÂèØ‰ª•Êèê‰æõ‰∏Ä‰∏™È¢ÑÂÆö‰πâÊéßÂà∂Â≠ó‰∏≤Êù•ËÆæÁΩÆ @code{PROCINFO["sorted_in"]} ÁöÑÂÄº„ÄÇ

@item
‰Ω†ÂèØ‰ª•‰ΩøÁî® @samp{|&} Êìç‰ΩúÁ¨¶Êù•ÂàõÂª∫‰∏Ä‰∏™ÂèåË∑ØÁöÑÂà∞Âπ∂Á®ãÁöÑÁÆ°ÈÅì„ÄÇ‰Ω†ÈÄöËøá @code{getline} Êù•‰ªéÂπ∂Á®ã‰∏≠ËØªÂèñÔºåÂπ∂ÈÄöËøá @code{print} ÊàñËÄÖ @code{printf} Êù•ÂÜôÂÖ•„ÄÇ‰ΩøÁî® @code{close()} Êù•ÂÆåÂÖ®Âú∞ÂÖ≥Èó≠Âπ∂Á®ãÔºåÊàñËÄÖÂèØÈÄâÂú∞ÂÖ≥Èó≠ÂèåË∑ØÈÄöËøá‰∏≠ÁöÑ‰∏ÄÁ´Ø„ÄÇ

@item
ÈÄöËøá‰ΩøÁî®ÁâπÊÆä@value{FN}‰ª•Âèä @samp{|&} Êìç‰ΩúÁ¨¶Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® TCP/IPÔºàÊàñËÄÖ UDP/IPÔºâÊù•‰∏é‰∫íËÅîÁΩë‰∏äÁöÑ‰∏ªÊú∫ËøõË°åËøûÊé•„ÄÇ@command{gawk} ÊîØÊåÅ IPv4Ôºå‰πüÊîØÊåÅIPv6„ÄÇ

@item
‰Ω†ÂèØ‰ª•ÁîüÊàêÁ®ãÂ∫èÁöÑËØ≠Âè•ÊµãËØÑÁªüËÆ°„ÄÇËøô‰∏™ÂèØ‰ª•ËÆ©‰Ω†Êù•Á°ÆÂÆö‰Ω†Á®ãÂ∫èÁöÑÂì™ÈÉ®ÂàÜÂç†Áî®‰∫ÜËæÉÂ§öÁöÑÊó∂Èó¥Ôºå‰ª•ËÆ©‰Ω†Êù•Êñπ‰æøÂú∞ÂØπ‰Ω†ÁöÑÁ®ãÂ∫èËøõË°åË∞É‰ºò„ÄÇÂΩìËøõË°åÊµãËØÑËøõË°åÊó∂Ôºå‰Ω†ÂèØ‰ª•ÂêëÁ®ãÂ∫èÂèëÈÄÅ @code{USR1} ‰ø°Âè∑ÔºåËøôÂèØ‰ª•‰Ωø @command{gawk} ËæìÂá∫ÊµãËØÑ‰ø°ÊÅØ‰ª•ÂèäÂáΩÊï∞Ë∞ÉÁî®Ê†à„ÄÇ

@item
‰Ω†‰πüÂèØ‰ª•Âè™‚ÄúÁÆÄÊ¥ÅÊâìÂç∞‚ÄùÔºàpretty-@code{print}Ôºâ‰Ω†ÁöÑÁ®ãÂ∫è„ÄÇÂΩìÂâçÔºåÂÆÉ‰ºöËøêË°å‰Ω†ÁöÑÁ®ãÂ∫èÔºå‰ΩÜÊòØÂú®ÂêéÈù¢ÁöÑ‰∏ªË¶ÅÂèëË°åÁâàÊú¨‰∏≠‰ºöÊîπÂèò„ÄÇ

@end itemize


@node Internationalization
@chapter @command{gawk} ÁöÑÂõΩÈôÖÂåñ

Âæà‰πÖÂâçÔºåËÆ°ÁÆóÊú∫ÁöÑÂà∂ÈÄ†ËÄÖ‰ª¨ÊâÄÂÜôÁöÑÁ®ãÂ∫èÂè™ËÉΩ‰ΩøÁî®Ëã±ËØ≠„ÄÇÂêéÊù•ÔºåÁ°¨‰ª∂‰∏éËΩØ‰ª∂ÁöÑÁîü‰∫ßÂïÜ‰ΩçÊ≥®ÊÑèÂà∞ÔºåÂ¶ÇÊûú‰ªñ‰ª¨ÁöÑÁ≥ªÁªü‰πüÂèØ‰ª•Âú®ÈùûËã±ËØ≠ÂõΩÂÆ∂ÁöÑËØ≠Ë®Ä‰∏≠Â∑•‰ΩúÔºåÂàôÂÆÉ‰ªñÂ∞±ÂèØ‰ª•ÂçñÊõ¥Â§öÁöÑÁ≥ªÁªü„ÄÇÁªìÊûúÂ∞±ÊòØÔºåÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞ÂåñÁ®ãÂ∫è‰ª•ÂèäËΩØ‰ª∂‰ºöÊàê‰∏∫‰∏Ä‰∏™ÈÄöÁî®ÁöÑÂÆûË∑µ„ÄÇ

@cindex internationalization, localization
@cindex @command{gawk}, internationalization and, See internationalization
@cindex internationalization, localization, @command{gawk} and
ÂæàÂ§öÂπ¥‰ª•Êù•ÔºåÊèê‰æõÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞ÂåñËÉΩÂäõÁöÑÁ®ãÂ∫èÂ§±‰∏öÂú∞ÈôêÂà∂Âú®Áî® C ÊàñËÄÖ C++ ÂÜôÁöÑÁ®ãÂ∫è‰∏≠„ÄÇËøô‰∏Ä@value{CHAPTER}‰ºöÊèèËø∞ @command{gawk} Â∫ïÂ±Ç‰ΩøÁî®ÁöÑÁî®Êù•ËøõË°åÂõΩÈôÖÂåñÁöÑÂ∫ìÔºåÂåÖÂê´ @command{gawk} Â¶Ç‰ΩïÊù•Âú® @command{awk} Á®ãÂ∫è‰ª£Á†ÅÁ∫ß‰∏äÂÆûÁé∞ÂõΩÈôÖÂåñÁâπÊÄß„ÄÇÂú® @command{awk} ‰ª£Á†ÅÁ∫ßÂÆûÁé∞ÂõΩÈôÖÂåñÂèØ‰ª•ÁªôËΩØ‰ª∂ÂºÄÂèëËÄÖÈ¢ùÂ§ñÁöÑÁÅµÊ¥ªÊÄß‚Äî‚ÄîÂÆÉ‰ª¨‰∏çÂÜçË¢´Ëø´‰ΩøÁî® C ÊàñËÄÖ C++ Êù•ÁºñÂÜôË¶ÅÂÆûÁé∞ÂõΩÈôÖÂåñÁöÑËΩØ‰ª∂„ÄÇ

@menu
* I18N and L10N::               Internationalization and Localization.
* Explaining gettext::          How GNU @command{gettext} works.
* Programmer i18n::             Features for the programmer.
* Translator i18n::             Features for the translator.
* I18N Example::                A simple i18n example.
* Gawk I18N::                   @command{gawk} is also internationalized.
* I18N Summary::                Summary of I18N stuff.
@end menu

@node I18N and L10N
@section ÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞Âåñ

@cindex internationalization
@cindex localization, See internationalization@comma{} localization
@cindex localization
@dfn{ÂõΩÈôÖÂåñ}Ë°®Á§∫Âè™ÂÜôÔºàÁºñËæëÔºâ‰∏ÄÊ¨°Á®ãÂ∫èÔºåÂ∞±ÂèØ‰ª•‰∏çÂÜçÈúÄË¶ÅÂØπ‰ª£Á†ÅËøõË°åÂèòÊõ¥Â∞±ÂèØ‰ª•Âú®Â§öÁßçËØ≠Ë®Ä‰∏ã‰ΩøÁî®„ÄÇ@dfn{Êú¨Âú∞Âåñ}ÂàôË°®Á§∫ÁªôÂõΩÈôÖÂåñÁöÑÁ®ãÂ∫èÊèê‰æõÁõ∏Â∫îÁöÑÊï∞ÊçÆÊù•Âú®Êüê‰∏™ÁâπÂÆöÁöÑËØ≠Ë®Ä‰∏≠Â∑•‰Ωú„ÄÇÊúÄÂÖ∏ÂûãÁöÑÊòØÔºåËøô‰∫õÊúØËØ≠ÊåáÁöÑÊòØÂú®ÊâìÂç∞ÈîôËØØ‰ø°ÊÅØÔºåÂú®ËØªÂèñÂèçÈ¶àÊó∂‰ΩøÁî®ÁöÑËØ≠Ë®ÄÁöÑÁâπÊÄßÔºå‰ª•ÂèäÊï∞ÂÄº‰∏éÂÄæÂêëÂÄºÂ¶Ç‰ΩïÊù•ËøõË°åËØªÂèñ‰∏éÊâìÂç∞ÁöÑÊñπÂºè„ÄÇ

@node Explaining gettext
@section GNU ÁöÑ @command{gettext}

@cindex internationalizing a program
@cindex @command{gettext} library
@command{gawk} ‰ΩøÁî® GNU ÁöÑ @command{gettext} Êù•Êèê‰æõÂõΩÈôÖÂåñÁâπÊÄß„ÄÇGNU @command{gettext} Â∑•ÂÖ∑ÂÖ≥Ê≥®‰ø°ÊÅØÔºöÁ®ãÂ∫è‰∏≠ÊâìÂç∞ÁöÑÂ≠ó‰∏≤ÔºåÊó†ËÆ∫ÊòØÈÄöËøá @code{printf} ËøòÊòØÈÄöËøá @code{sprintf()}„ÄÇ 
@footnote{ÂØπ‰∫éÊüê‰∫õÊìç‰ΩúÁ≥ªÁªüÔºå@command{gawk} ÁöÑÁßªÊ§ç‰∏çÊîØÊåÅ GNU @command{gettext}„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûú‰Ω†Âú®Ëøô‰∏™Á≥ªÁªü‰∏ä‰ΩøÁî®ÔºåËøô‰∏™ÁâπÊÄßÂ∞±‰∏çÂèØÁî®„ÄÇÈùûÂ∏∏Êä±Ê≠âÔºÅ}

@cindex portability, @command{gettext} library and
ÂΩì‰ΩøÁî® GNU @command{gettext} Êó∂ÔºåÊØè‰∏™Á®ãÂ∫èÈÉΩÊúâÂÆÉÁöÑ@dfn{ÊñáÊú¨Âüü}„ÄÇËøôÊòØ‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÂêçÂ≠óÔºåÂ¶Ç @samp{kpilot} ÊàñËÄÖ @samp{gawk}ÔºåÁî®Êù•Ê†áËØÜÁ®ãÂ∫è„ÄÇ‰∏Ä‰∏™ÂÆåÊï¥ÁöÑÁ®ãÂ∫èÊúâÂ§ö‰∏™ÁªÑ‰ª∂‚Äî‚ÄîÁî® C ÊàñËÄÖ C++ ÂÜôÁöÑÁ®ãÂ∫èÔºå‰ª•Âèä‰ΩøÁî® @command{sh} ÊàñËÄÖ @command{awk} ÂÜôÁöÑËÑöÊú¨„ÄÇÊâÄÊúâÁöÑËøô‰∫õÁªÑ‰ª∂ÈÉΩ‰ΩøÁî®Áõ∏ÂêåÁöÑÊñáÊú¨Âüü„ÄÇ

‰∏∫‰∫Ü‰ΩøËÆ®ËÆ∫Êõ¥Âä†ÂÖ∑‰ΩìÔºåÂÅáËÆæÊàë‰ª¨ÂÜô‰∏Ä‰∏™Á®ãÂ∫èÂêç‰∏∫ @command{guide}„ÄÇÊåâÈ°∫Â∫èÔºåÂõΩÈôÖÂåñÂåÖÂê´‰∏ãÈù¢ÁöÑÊ≠•È™§Ôºö

@enumerate
@item
Á®ãÂ∫èÂëòÊ£ÄÊü•ÊâÄÊúâÁöÑ @command{guide} ÁªÑ‰ª∂ÁöÑ‰ª£Á†ÅÔºåÂπ∂‰∏îÊ†áÊ≥®Âá∫Ë¶ÅËøõË°åÁøªËØëÁöÑÂ≠ó‰∏≤„ÄÇ‰æãÂ¶Ç @code{"`-F': option required"} ÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑË¶ÅËøõË°åÁøªËØëÁöÑÂÄôÈÄâËÄÖ„ÄÇËÄåÈÄâÈ°πÂêçÁöÑÂ≠ó‰∏≤Ë°®Âàô‰∏çÊòØÔºàÂ¶ÇÔºå@command{gawk} ÁöÑ @option{--profile} ÈÄâÈ°πË¶Å‰øùÁïôÂéüÊ†∑ÔºåËÄå‰∏çÁÆ°ÊòØ‰ªÄ‰πàÊ†∑ÁöÑËØ≠Ë®ÄÔºâ„ÄÇ

@cindex @code{textdomain()} function (C library)
@item
ÈÄöËøáË∞ÉÁî® @code{textdomain()} ÂáΩÊï∞ÔºåÁ®ãÂ∫èÂëòÂêë @command{gettext} Â∫ìÊåáÂÆöÔºà@command{"guide"}ÔºâÁöÑÂ∫îÁî®ÊñáÊú¨Âüü„ÄÇ

@cindex @code{.pot} files
@cindex files, @code{.pot}
@cindex portable object template files
@cindex files, portable object template
@item
‰ªéÊ∫ê‰ª£Á†Å‰∏≠ÊèêÂèñÁöÑÊ∂àÊÅØÊîæÂà∞‰∏Ä‰∏™ÁßªÊ§çÁöÑÂØπË±°Ê®°ÊùøÊñá‰ª∂Ôºà@file{guide.pot}ÔºâÔºåÂú®Ëøô‰∏™Êñá‰ª∂ÈáåÂàóÂá∫‰∫ÜÊâÄÊúâÁöÑÂ≠ó‰∏≤‰ª•ÂèäÂØπÂ∫îÁöÑÁøªËØë‰∏≤„ÄÇÁøªËØëÂºÄÂßãÊòØÁ©∫ÁöÑ„ÄÇÂéüÂßã‰ø°ÊÅØÔºà‰∏ÄËà¨ÊòØËã±ËØ≠Ôºâ‰ºö‰Ωú‰∏∫ÁøªËØëÊü•ÊâæÁöÑÈîÆ„ÄÇ

@cindex @code{.po} files
@cindex files, @code{.po}
@cindex portable object files
@cindex files, portable object
@item
ÂØπ‰∫éÁøªËØëÁöÑÊØè‰∏≠ËØ≠Ë®ÄÔºå@file{guide.pot} ÈÉΩË¢´Â§çÂà∂Âà∞‰∏Ä‰∏™ÂèØÁßªÊ§çÁöÑÂØπË±°Êñá‰ª∂Ôºà@code{.po}ÔºâÂπ∂Âª∫Á´ãËµ∑ÁøªËØëÁÑ∂Âêé‰∏éÁ®ãÂ∫è‰∏ÄËµ∑ÊâìÂåÖ„ÄÇ‰æãÂ¶ÇÔºåÊúâÂèØËÉΩÊúâ @file{fr.po} Áî®Êù•ÂÅö‰∏∫Ê≥ïËØ≠ÁøªËØë„ÄÇ

@cindex @code{.gmo} files
@cindex files, @code{.gmo}
@cindex message object files
@cindex files, message object
@item
ÊØèÁßçËØ≠Ë®ÄÁöÑ @file{.po} Êñá‰ª∂ÈÉΩË¢´ËΩ¨Êç¢‰∏∫‰∫åËøõÂà∂Ê∂àÊÅØÂØπË±°Ôºà@file{.gmo}ÔºâÊñá‰ª∂„ÄÇÊ∂àÊÅØÂØπË±°Êñá‰ª∂ÂåÖÂê´ÂéüÂßãÊ∂àÊÅØ‰∏éÂÆÉ‰ª¨ÁöÑÁøªËØëÁöÑ‰∫åËøõÂà∂Ê†ºÂºèÔºåËøôÊ†∑ÂèØ‰ª•Âú®ËøêË°åÊó∂Âø´ÈÄüÊü•Êâæ„ÄÇ

@item
ÂΩì @command{guide} Ë¢´ÊûÑÂª∫Âπ∂Ë¢´ÂÆâË£ÖÔºå‰∫åËøõÂà∂ÁöÑÁøªËØëÊñá‰ª∂‰πüË¢´ÂÆâË£ÖÂà∞Ê†áÂáÜ‰ΩçÁΩÆ„ÄÇ

@cindex @code{bindtextdomain()} function (C library)
@item
ÂØπ‰∫éÊµãËØï‰∏éÂºÄÂèëÔºåÂèØ‰ª•ÂëäÁü• @command{gettext} ‰ΩøÁî®‰∏çÊòØÊ†áÂáÜÁõÆÂΩï‰∏ãÁöÑ @file{.gmo} Êñá‰ª∂ÔºåËøôÈÄöËøáË∞ÉÁî® @code{bindtextdomain()} ÂáΩÊï∞Êù•ÂÆûÁé∞„ÄÇ

@cindex @code{.gmo} files, specifying directory of
@cindex files, @code{.gmo}, specifying directory of
@cindex message object files, specifying directory of
@cindex files, message object, specifying directory of
@item
Âú®ËøêË°åÊó∂Ôºå@command{guide} ‰ºöÈÄöËøáË∞ÉÁî® @code{gettext()} Êù•Êü•ÊâæÊØè‰∏Ä‰∏™Â≠ó‰∏≤„ÄÇËøîÂõûÁöÑ‰∏≤‰∏∫Â≠ó‰∏≤ÁöÑÁøªËØë‰∏≤ÔºåÂ¶ÇÊûúÊ≤°ÂèØÂæóÁöÑËØùÔºåÂ∞±ÊòØÂéü‰∏≤„ÄÇ

@item
Â¶ÇÊûúÂøÖË¶ÅÔºå‰πüÂèØ‰ª•‰ªéÂè¶‰∏Ä‰∏™‰∏çÂ±û‰∫éËøô‰∏™Á®ãÂ∫èÁöÑ‰∏çÂêåÁöÑÊñáÊú¨Âüü‰∏≠Êù•ËÆøÈóÆÊ∂àÊÅØÔºåËÄå‰∏çÈúÄË¶ÅÂú®Á®ãÂ∫èÁöÑÈªòËÆ§ÊñáÊú¨Âüü‰πãÈó¥Êù•ÂõûÂàáÊç¢„ÄÇ
@end enumerate

@cindex @code{gettext()} function (C library)
Âú® CÔºàÊàñËÄÖC++Ôºâ‰∏≠ÔºåÊ†áÂøóÂä®ÊÄÅÁøªËØëÊü•ÊâæÁöÑÂ≠ó‰∏≤ÊòØÈÄöËøáÂ∞ÜÂ≠ó‰∏≤ÈÄöËøá @code{gettext()} Êù•ÂÆåÊàêÁöÑÔºö

@example
printf("%s", gettext("Don't Panic!\n"));
@end example

Â∑•ÂÖ∑ÂèØ‰ª•‰ªéÊ∫ê‰ª£Á†Å‰∏≠Â∞ÜÊâÄÊúâÁî® @code{gettext()} ÂåÖÂê´ÁöÑÂ≠ó‰∏≤ÊèêÂèñÂá∫Êù•„ÄÇ

@cindex @code{_} (underscore), C macro
@cindex underscore (@code{_}), C macro
GNU @command{gettext} ÁöÑÂºÄÂèëËÄÖÔºåÊÑèËØÜÂà∞‰∏ÄÊ¨°Ê¨°Âú∞ËæìÂÖ• @samp{gettext(@dots{})} Êó¢ÁóõËã¶ÔºåÁúãËµ∑Êù•‰πü‰∏ëÔºåÂõ†Ê≠§‰ΩøÁî®ÂÆè @samp{_}Ôºà‰∏ãÂàíÁ∫øÔºâÊù•‰ΩøÂæó‰∫ãÊÉÖÁÆÄÂåñÔºö

@example
/* In the standard header file: */
#define _(str) gettext(str)

/* In the program text: */
printf("%s", _("Don't Panic!\n"));
@end example

@cindex internationalization, localization, locale categories
@cindex @command{gettext} library, locale categories
@cindex locale categories
@noindent
Ëøô‰∫ßÁîüÁöÑËæìÂÖ•Ë¥üÊãÖÂè™ÊòØÊØè‰∏™Â≠ó‰∏≤‰∏â‰∏™È¢ùÂ§ñÁöÑÂ≠óÁ¨¶ ÔºåËÄå‰∏î‰πüÊõ¥ÂÆπÊòìÈòÖËØª„ÄÇ

ÂØπ‰∫é‰∏çÂêåÊú¨Âú∞ËØ≠Ë®ÄÁöÑ‰ø°ÊÅØÊúâ‰∏çÂêåÁöÑÊú¨Âú∞ËØ≠Ë®Ä@dfn{ÂàÜÁ±ª}„ÄÇ@command{gettext} ÂèØËØÜÂà´ÁöÑÂÆö‰πâÂ•ΩÁöÑÊú¨Âú∞ËØ≠Ë®ÄÂàÜÁ±ªÊúâÔºö

@table @code
@cindex @code{LC_MESSAGES} locale category
@item LC_MESSAGES
ÊñáÊú¨Ê∂àÊÅØ„ÄÇËøôÊòØ @command{gettext} Êìç‰ΩúÁöÑÈªòËÆ§ÂàÜÁ±ªÔºå‰ΩÜÊòØÂ¶ÇÊûúÈúÄË¶ÅÁöÑËØùÔºåÂèØ‰ª•ÊòæÂºèÂú∞ÊåáÂÆö‰∏çÂêåÁöÑÁ±ªÂûã„ÄÇÔºàÂá†‰πéÊ≤°ÊúâÂøÖË¶ÅÊåáÂÆö‰∏çÂêåÁöÑÂàÜÁ±ª„ÄÇÔºâ

@cindex sorting characters in different languages
@cindex @code{LC_COLLATE} locale category
@item LC_COLLATE
ÊñáÊú¨ÂçèÂêå‰ø°ÊÅØÔºàÂ¶ÇÔºå‰∏çÂêåÁöÑÂ≠óÁ¨¶‰∏é/ÊàñËÄÖÂ≠óÁ¨¶ÁªÑÂú®‰∏Ä‰∏™ÁªôÂÆöÁöÑËØ≠Ë®Ä‰∏≠Â¶Ç‰ΩïÊéíÂ∫èÔºâ„ÄÇ

@cindex @code{LC_CTYPE} locale category
@item LC_CTYPE
Â≠óÁ¨¶Á±ªÂûã‰ø°ÊÅØÔºàÂ≠óÊØçË°®ÔºåÊï∞Â≠óÔºåÂ§ßÂ∞èÂÜôÁ≠âÁ≠âÔºâ‰ª•ÂèäÂ≠óÁ¨¶ÁºñÁ†Å„ÄÇ
@ignore
In June 2001 Bruno Haible wrote:
- Description of LC_CTYPE: It determines both
  1. character encoding,
  2. character type information.
  (For example, in both KOI8-R and ISO-8859-5 the character type information
  is the same - cyrillic letters could as 'alpha' - but the encoding is
  different.)
@end ignore
Ëøô‰∏™‰ø°ÊÅØÈÄöËøáÊ≠£ÂàôË°®ËææÂºèÁöÑ POSIX Â≠óÁ¨¶Á±ªÊù•ËÆøÈóÆÔºåÊØîÂ¶Ç @code{/[[:alnum:]]/}ÔºàÊü•Áúã @pxref{Bracket Expressions}Ôºâ„ÄÇ

@cindex monetary information, localization
@cindex currency symbols, localization
@cindex @code{LC_MONETARY} locale category
@item LC_MONETARY
Ë¥ßÂ∏Å‰ø°ÊÅØÔºåÂ¶ÇË¥ßÂ∏ÅÁ¨¶Âè∑‰ª•ÂèäÁ¨¶Âè∑ÊòØÂú®Êï∞ÂÄºÂâçËøòÊòØÂú®Êï∞ÂÄºÂêé„ÄÇ

@cindex @code{LC_NUMERIC} locale category
@item LC_NUMERIC
Êï∞ÂÄº‰ø°ÊÅØ„ÄÇ‰æãÂ¶ÇÁî®‰∫éÂçÅËøõÂà∂Â∞èÊï∞ÁÇπ‰ª•ÂèäÁôæÂàÜ‰ΩçÂàÜÈöîÁ¨¶„ÄÇ 
@footnote{ÁæéÂõΩ‰ΩøÁî®ÊØè‰∏™‰∏â‰∏™ËøõÂà∂Êï∞‰πãÈó¥Êîæ‰∏Ä‰∏™ÈÄóÂè∑Ôºå‰ª•ÂèäÁî®ÂúÜÁÇπÊù•‰Ωú‰∏∫ÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÔºåËÄåÂæàÂ§öÁöÑÊ¨ßÊ¥≤ÂõΩÂÆ∂ÂàôÁõ∏ÂèçÔºö1,234.56 ‰∏é 1.234Ôºå56„ÄÇ}

@cindex time, localization and
@cindex dates, information related to@comma{} localization
@cindex @code{LC_TIME} locale category
@item LC_TIME
Êó∂Èó¥‰∏éÊó•ÊúüÁõ∏ÂÖ≥ÔºåÂ¶Ç 12 ÊàñËÄÖ 24 Â∞èÊó∂Âà∂ÔºåÊúàÂàÜÂú®Êó•Êúü‰∏≠ÊòØÊâìÂç∞Âú®Â§©ÁöÑÂâçÈù¢ËøòÊòØÂêéÈù¢„ÄÇÊú¨Âú∞ÊúàÂàÜÁöÑÁº©ÂÜôÁ≠âÁ≠â„ÄÇ

@cindex @code{LC_ALL} locale category
@item LC_ALL
‰∏äËø∞ÊâÄÊúâÁöÑ„ÄÇÔºàÂú® @command{gettext} ÁöÑÂÜÖÂÆπ‰∏≠‰∏çÊòØÁâπÂà´ÊúâÁî®„ÄÇÔºâ
@end table

@quotation ÊèêÁ§∫
@cindex @env{LANGUAGE} environment variable
Â¶Ç @ref{Locales} ÊâÄËø∞ÔºåÂíåÊú¨Âú∞ËØ≠Ë®ÄÂàÜÁ±ªÂêåÂêçÁöÑÁéØÂ¢ÉÂèòÈáè‰ºöÂΩ±Âìç @command{gawk} ÁöÑË°å‰∏∫ÔºàÂíåÂÖ∂‰ªñÂ∑•ÂÖ∑ÁöÑË°å‰∏∫Ôºâ„ÄÇ

ÈÄöÂ∏∏ÔºåËøô‰∫õÂèòÈáè‰πü‰ºöÂΩ±Âìç @code{gettext} Â∫ìÂ¶Ç‰ΩïÊâæÂà∞ÁøªËØë„ÄÇÁÑ∂ËÄåÔºå@env{LANGUAGE} ÁéØÂ¢ÉÂèòÈáè‰ºö‰Ωø @env{LC_@var{xxx}} ÁéØÂ¢ÉÂèòÈáèÊó†Êïà„ÄÇËÆ∏Â§ö GNU/Linux Á≥ªÁªüÂèØËÉΩÂú®‰Ω†‰∏çÁü•ÈÅìÁöÑÊÉÖÂÜµ‰∏ãÂÆö‰πâËøô‰∏™ÂèòÈáèÔºåÂØºËá¥ @command{gawk} ‰∏çËÉΩÊâæÂà∞Ê≠£Á°ÆÁöÑÁøªËØë„ÄÇÂ¶ÇÊûúËøôÂèëÁîüÂú®‰Ω†Ë∫´‰∏äÔºåÊ£ÄÊü•ÊòØÂê¶ @env{LANGUAGE} Ë¢´ÂÆö‰πâ‰∫Ü„ÄÇÂ¶ÇÊûúÊòØÁöÑËØùÔºåÁî® shell ÁöÑ @command{unset} ÂëΩ‰ª§ÂéªÂà†Èô§ÂÆÉ„ÄÇ
@end quotation

‰∏∫‰∫ÜÊµãËØï @command{gawk} Êú¨Ë∫´ÁöÑÁøªËØëÔºå‰Ω†ÂèØ‰ª•ËÆæÁΩÆ @env{GAWK_LOCALE_DIR} ÁéØÂ¢ÉÂèòÈáè„ÄÇÊü•Áúã @code{bindtextdomain()} ÊñáÊ°£ÁöÑÂáΩÊï∞Ôºå‰πüÂèØ‰ª•Áúã @ref{Other Environment Variables}„ÄÇ

@node Programmer i18n
@section @command{awk} Á®ãÂ∫èÁöÑÂõΩÈôÖÂåñ
@cindex @command{awk} programs, internationalizing

@command{gawk} ‰ΩøÁî®‰∏ãÈù¢ÁöÑÂèòÈáèÊù•Áî®‰∫éÂõΩÈôÖÂåñÔºö

@table @code
@cindex @code{TEXTDOMAIN} variable
@item TEXTDOMAIN
Ëøô‰∏™ÂèòÈáèË°®Á§∫Â∫îÁî®ÁöÑÊñáÊú¨Âüü„ÄÇ‰∏∫‰∫Ü‰∏é GNU @command{gettext} ÁöÑÂÖºÂÆπÊÄß„ÄÇÂÖ∂ÈªòËÆ§ÂÄºÊòØ @code{"messages"}„ÄÇ

@cindex internationalization, localization, marked strings
@cindex strings, for localization
@item _"your message here"
Áî®ÂâçÂØºÁöÑ‰∏ãÂàíÁ∫øÊ†áÂøóÁöÑÂ≠ó‰∏≤Â∏∏ÈáèÊòØÂú®ËøêË°åÊó∂Áî®‰∫éÁøªËØëÁöÑÂÄôÈÄâ‰∏≤„ÄÇÂ≠ó‰∏≤Â∏∏ÈáèÂâçÊ≤°Êúâ‰∏ãÂàíÁ∫øÁöÑ‰∏ç‰ºöË¢´ÁøªËØë„ÄÇ
@end table

@command{gawk} Êèê‰æõ‰∫Ü‰∏ãÈù¢ÁöÑÂáΩÊï∞Áî®Êù•‰ΩúÂõΩÈôÖÂåñÔºö

@table @code
@cindexgawkfunc{dcgettext}
@item @code{dcgettext(@var{string}} [@code{,} @var{domain} [@code{,} @var{category}]]@code{)}
Âú®Êú¨Âú∞ËØ≠Ë®ÄÂàÜÁ±ª @var{category} ‰∏≠ÁöÑ @var{domain} ÊñáÊú¨Âüü‰∏≠ËøîÂõû @var{string} ‰∏≤ÁöÑÁøªËØë„ÄÇÈªòËÆ§ÁöÑ@var{domain} ÁöÑÂÄºÊòØ @code{TEXTDOMAIN} ÂèòÈáèÁöÑÂΩìÂâçÂÄº„ÄÇÈªòËÆ§ÁöÑ @var{category} ÁöÑÂÄºÂøÖÈ°ªÊòØÂ∑≤Áªè @code{"LC_MESSAGES"}„ÄÇ

Â¶ÇÊûú‰Ω†‰∏∫ @var{category} Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂÄºÔºåÂàôÂÆÉÂøÖÈ°ªÊòØÂ∑≤Áü•ÁöÑÊú¨Âú∞ËØ≠Ë®ÄÂàÜÁ±ªÂ≠ó‰∏≤ÂêçÔºåËøô‰∏™Âú®
If you supply a value for @var{category}, it must be a string equal to
one of the known locale categories described in
@ifnotinfo
ÂâçÈù¢ÁöÑ@value{SECTION}ÊèêËøá„ÄÇ
@end ifnotinfo
@ifinfo
@ref{Explaining gettext} ÊúâÊèèËø∞„ÄÇ
@end ifinfo
‰Ω†ÂøÖÈúÄË¶ÅÊèê‰æõÊñáÊú¨Âüü„ÄÇÂ¶ÇÊûú‰Ω†‰ΩøÁî®ÂΩìÂâçÂüüÂàô‰ΩøÁî® @code{TEXTDOMAIN}„ÄÇ

@quotation Ê≥®ÊÑè
@command{awk} ÁâàÊú¨ÁöÑ @code{dcgettext()} ÂáΩÊï∞ÁöÑÂèÇÊï∞ÁöÑÈ°∫Â∫èÊúâÊÑèÂú∞‰∏é C ÁâàÊú¨ÁöÑ‰∏≠ÁöÑÈ°∫Â∫è‰∏ç‰∏ÄËá¥„ÄÇ@command{awk} ÁâàÊú¨ÁöÑÈ°∫Â∫èÁöÑÈÄâÊã©ÊòØ‰∏∫‰∫ÜÁÆÄÂåñ‰ª•ÂèäÂÖÅËÆ∏ÂêàÁêÜÁöÑ @command{awk} È£éÊ†ºÈªòËÆ§ÂèÇÊï∞„ÄÇ
@end quotation

@cindexgawkfunc{dcngettext}
@item @code{dcngettext(@var{string1}, @var{string2}, @var{number}} [@code{,} @var{domain} [@code{,} @var{category}]]@code{)}
ËøîÂõû @var{string1} ‰∏é @var{string2} Âú®Êú¨Âú∞ËØ≠Ë®ÄÂàÜÁ±ª @var{category} ‰∏≠ÔºåÊñáÊú¨Âüü @var{domain} ‰∏≠ÁöÑÁøªËØëÁöÑÊï∞Èáè @var{number} Â§çÊï∞ÂΩ¢Âºè„ÄÇ@var{string1} ÊòØÊ∂àÊÅØÁöÑËã±ËØ≠ÁöÑÂçïÊï∞ÂΩ¢ÂºèÂèò‰ΩìÔºå@var{string2} ÊòØÁõ∏ÂêåÊ∂àÊÅØÁöÑËã±ËØ≠Â§çÊï∞ÂΩ¢Âºè„ÄÇ@var{domain} ÁöÑÈªòËÆ§ÂÄºÊòØ @code{TEXTDOMAIN} ÁöÑÂΩìÂâçÂÄº„ÄÇ@var{category} ÁöÑÈªòËÆ§ÂÄºÊòØ @code{"LC_MESSAGES"}„ÄÇ

ÂØπ‰∫é @code{dcgettext()} ÂáΩÊï∞ÁöÑÂèÇÊï∞ÁöÑÈ°∫Â∫èËØ¥ÊòéÔºå‰πüÈÄÇÂ∫î‰∫éËøô‰∏™ÂáΩÊï∞„ÄÇ

@cindex @code{.gmo} files, specifying directory of
@cindex files, @code{.gmo}, specifying directory of
@cindex message object files, specifying directory of
@cindex files, message object, specifying directory of
@cindexgawkfunc{bindtextdomain}
@item @code{bindtextdomain(@var{directory}} [@code{,} @var{domain} ]@code{)}
ÊîπÂèò @command{gettext} Êü•Êâæ @file{.gmo} Êñá‰ª∂ÁöÑÁõÆÂΩïÔºå‰ª•Èò≤‰∏á‰∏ÄÂÆÉ‰ª¨‰∏çÂú®ÔºåÊàñËÄÖ‰∏çËÉΩÊîæÂú®Ê†áÂáÜ‰ΩçÁΩÆÁöÑÊÉÖÂÜµ‰∏ãÔºàÂ¶ÇÔºåÂú®ÊµãËØïÊúüÈó¥Ôºâ„ÄÇËøîÂõûÊñáÊú¨Âüü @var{domain} ÁªëÂÆöÁöÑÁõÆÂΩï„ÄÇ

ÈªòËÆ§ÁöÑÂüü @var{domain} ÊòØ @code{TEXTDOMAIN} ÁöÑÂÄº„ÄÇÂ¶ÇÊûúÁõÆÂΩïÊòØÁ©∫‰∏≤Ôºà@code{""}ÔºâÔºå@code{bindtextdomain()} ÂàôËøîÂõûÁªôÂÆöÊñá‰ª∂Âüü @var{domain} ÁöÑÂΩìÂâçÁªëÂÆöÁõÆÂΩï„ÄÇ
@end table

‰∏∫‰∫ÜÂú®‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è‰∏≠‰ΩøÁî®ËøôÊ†∑ÁöÑÂ∑•ÂÖ∑ÔºåËØ∑ÊåâÁÖß‰∏ãÈù¢ÁöÑÊ≠•È™§Êù•ÊâßË°åÔºö

@enumerate
@cindex @code{BEGIN} pattern, @code{TEXTDOMAIN} variable and
@cindex @code{TEXTDOMAIN} variable, @code{BEGIN} pattern and
@item
Â∞Ü @code{TEXTDOMAIN} ÂèòÈáèËÆæÁΩÆ‰∏∫Á®ãÂ∫èÁöÑÊñáÊú¨Âüü„ÄÇÊúÄÂ•ΩÊòØÂú® @code{BEGIN} ËßÑÂàô‰∏≠ÂÆåÊàêÔºàÊü•Áúã @pxref{BEGIN/END}ÔºâÔºåÊàñËÄÖÂèØ‰ª•ÈÄöËøáÂëΩ‰ª§Ë°åÈÄâÈ°π @option{-v} Êù•ÂÆåÊàêÔºàÊü•Áúã @ref{Options}ÔºâÔºö

@example
BEGIN @{
    TEXTDOMAIN = "guide"
    @dots{}
@}
@end example

@cindex @code{_} (underscore), translatable string
@cindex underscore (@code{_}), translatable string
@item
Â∞ÜÊâÄÊúâÊúâÂèØÁøªËØëÁöÑÂ≠ó‰∏≤Áî®ÂâçÁΩÆ‰∏ãÂàíÁ∫øÊù•ËøõË°åÊ†áËØÜÔºà@samp{_}Ôºâ„ÄÇÂÆÉ@emph{ÂøÖÈ°ª}‰∏éÂ≠ó‰∏≤ÁöÑÂºÄÂºïÂè∑Áõ∏Ëøû„ÄÇÂ¶ÇÔºö

@example
print _"hello, world"
x = _"you goofed"
printf(_"Number of users is %d\n", nusers)
@end example

@item
Â¶ÇÊûú‰Ω†Âä®ÊÄÅÂú∞ÂàõÂª∫Â≠ó‰∏≤Ôºå‰Ω†‰πüÂèØ‰ª•ÈÄöËøá @code{dcgettext()} ÂÜÖÁΩÆÂáΩÊï∞Êù•ÁøªËØëÂÆÉ‰ª¨Ôºö 
@footnote{ÊÑüË∞¢ Bruno Haible Êèê‰æõËøô‰∏™‰æãÂ≠ê„ÄÇ}

@example
if (groggy)
    message = dcgettext("%d customers disturbing me\n", "adminprog")
else
    message = dcgettext("enjoying %d customers\n", "adminprog")
printf(message, ncustomers)
@end example

Âú®ËøôÈáåÔºåË∞ÉÁî® @code{dcgettext()} Êèê‰æõ‰∫Ü‰∏Ä‰∏™‰∏çÂêåÁöÑÊñáÊú¨ÂüüÔºà@code{"adminprog"}ÔºâÔºåÂú®ËøôÈáåÊù•Êü•ÊâæÊ∂àÊÅØÔºå‰ΩÜÊòØ‰ΩøÁî®ÁöÑÊòØÈªòËÆ§ÁöÑ @code{"LC_MESSAGES"} ÂàÜÁ±ª„ÄÇ

ÂâçÈù¢ÁöÑ‰æãÂ≠êÂè™Âú® @code{ncustomers} Â§ß‰∫é 1 ÁöÑÊÉÖÂÜµ‰∏ã‰ºöÂ∑•‰Ωú„ÄÇËøô‰∏™‰æãÂ≠êÁî® @code{dcngettext()} ÂèØ‰ª•Êõ¥Â•ΩÂú∞ÂÆåÊàêÔºö

@example
if (groggy)
    message = dcngettext("%d customer disturbing me\n",
                         "%d customers disturbing me\n", "adminprog")
else
    message = dcngettext("enjoying %d customer\n",
                         "enjoying %d customers\n", "adminprog")
printf(message, ncustomers)
@end example


@cindex @code{LC_MESSAGES} locale category, @code{bindtextdomain()} function (@command{gawk})
@item
Âú®ÂºÄÂèëËøáÁ®ã‰∏≠Ôºå‰Ω†ÂèØËÉΩÊÉ≥Â∞Ü @file{.gmo} Êñá‰ª∂ÊîæÂú®‰∏Ä‰∏™ÁßÅÊúâÁöÑÁî®‰∫éÊµãËØïÁöÑÁõÆÂΩï„ÄÇËøôÂèØ‰ª•ÈÄöËøá @code{bindtextdomain()} ÂÜÖÁΩÆÂáΩÊï∞Êù•ËÆæÁΩÆÔºö

@example
BEGIN @{
   TEXTDOMAIN = "guide"   # our text domain
   if (Testing) @{
       # where to find our files
       bindtextdomain("testdir")
       # joe is in charge of adminprog
       bindtextdomain("../joe/testdir", "adminprog")
   @}
   @dots{}
@}
@end example

@end enumerate

Êü•Áúã @xref{I18N Example}ÔºåÊù•Ëé∑ÂèñÂ¶Ç‰ΩïÊù•‰∏ÄÊ≠•Ê≠•Âú∞ÂàõÂª∫Âπ∂‰ΩøÁî®Êù•Ëá™ @command{awk} ÁöÑÁøªËØëÂ≠ó‰∏≤ÁöÑ‰æãÂ≠ê„ÄÇ

@node Translator i18n
@section ÁøªËØë @command{awk} Á®ãÂ∫è

@cindex @code{.po} files
@cindex files, @code{.po}
@cindex portable object files
@cindex files, portable object
Âè™Ë¶ÅÁ®ãÂ∫è‰∏≠ÁöÑÂèØÁøªËØëÂ≠ó‰∏≤Â∑≤ÁªèË¢´Ê†áÂøóÔºåÂÆÉ‰ª¨Â∞±ÂèØ‰ª•Ë¢´ÊèêÂèñÁî®Êù•ÂàõÂª∫ÂàùÂßãÁöÑ @file{.pot} Êñá‰ª∂„ÄÇ‰Ωú‰∏∫ÁøªËØëÁöÑ‰∏ÄÈÉ®ÂàÜÔºåÈáçÊéí @code{printf} Ë¶ÅËæìÂá∫ÁöÑÂèÇÊï∞ÈÄöÂ∏∏ÈÉΩÂæàÊúâÂ∏ÆÂä©„ÄÇ

@command{gawk} ÁöÑ @option{--gen-pot} ÂëΩ‰ª§Ë°åÂèÇÊï∞ÊèêÂá∫Ê∂àÊÅØÂπ∂Âú®ÂêéÈù¢ËøõË°åËÆ®ËÆ∫„ÄÇ‰πãÂêéÔºå‰πü‰ºöÊ∂âÂèä @code{printf} Âú®ËøêË°åÊó∂ÈáçÊéí @code{printf} ÂèÇÊï∞ÁöÑËÉΩÂäõ„ÄÇ

@menu
* String Extraction::           Extracting marked strings.
* Printf Ordering::             Rearranging @code{printf} arguments.
* I18N Portability::            @command{awk}-level portability issues.
@end menu

@node String Extraction
@subsection ÊèêÂèñÂ∑≤Ê†áÂøóÂ≠ó‰∏≤
@cindex strings, extracting
@cindex marked strings@comma{} extracting
@cindex @option{--gen-pot} option
@cindex command-line options, string extraction
@cindex string extraction (internationalization)
@cindex marked string extraction (internationalization)
@cindex extraction, of marked strings (internationalization)

@cindex @option{--gen-pot} option
‰∏ÄÊó¶‰Ω†ÁöÑ @command{awk} Á®ãÂ∫èÂèØ‰ª•Â∑•‰ΩúÔºåËÄåÊâÄÊúâÁöÑÂ≠ó‰∏≤ÈÉΩÂ∑≤ÁªèË¢´Ê†áÂøóÔºå‰πüËÆæÁΩÆ‰∫ÜÔºàÂèØËÉΩ‰πüÁªëÂÆö‰∫ÜÔºâÊñáÊú¨ÂüüÔºåÂ∞±ÊòØËØ•ÁîüÊàêÁøªËØëÁöÑÊó∂ÂÄô„ÄÇÈ¶ñÂÖàÔºå‰ΩøÁî® @option{--gen-pot} ÂëΩ‰ª§Ë°åÈÄâÈ°πÊù•ÈÄ†ÊàêÂàùÂßãÁöÑ @file{.pot} Êñá‰ª∂Ôºö

@example
gawk --gen-pot -f guide.awk > guide.pot
@end example

@cindex @code{xgettext} utility
ÂΩì‰ª• @option{--gen-pot} ËøêË°åÊó∂Ôºå@command{gawk} ‰∏ç‰ºöÊâßË°å‰Ω†ÁöÑÁ®ãÂ∫è„ÄÇÁõ∏ÂèçÔºåÂÆÉ‰ºöÊåâÈÄöÂ∏∏ÁöÑÊñπÂºèÂàÜÊûêÂÆÉÔºåÁÑ∂ÂêéÊâìÂç∞ÊâÄÊúâÁöÑÂ∑≤ÁªèÊ†áÂøóÁöÑÂ≠ó‰∏≤Âà∞Ê†áÂáÜËæìÂá∫‰∏äÔºåÂπ∂‰∏îÊòØ‰ª• GNU ÁöÑ @command{gettext} ÁöÑÂèØÁßªÊ§çÂØπË±°Êñá‰ª∂ÁöÑÊ†ºÂºèËæìÂá∫„ÄÇÂêåÊó∂Âú®ËæìÂá∫‰∏≠‰πüÂåÖÂê´Âá∫Áé∞Âú® @code{dcgettext()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏≠ÁöÑÂ≠ó‰∏≤Â∏∏ÈáèÔºåÊàñËÄÖÊòØ @code{dcn@command{gettext}()} ÂáΩÊï∞‰∏≠ÁöÑÁ¨¨‰∏Ä„ÄÅ‰∫å‰∏™ÂèÇÊï∞„ÄÇ
@footnote{‰∏é GNU @command{gettext} ‰∏ÄËµ∑ÂèëÂ∏ÉÁöÑ @command{xgettext} Â∑•ÂÖ∑ÂèØ‰ª•Â§ÑÁêÜ @file{.awk} Êñá‰ª∂„ÄÇ}
‰Ω†Â∫îËØ•‰Ω†‰Ω†ÁöÑ @command{awk} Á®ãÂ∫è‰∏ÄËµ∑ÂèëÂ∏É‰Ω†ÁöÑ @file{.pot} Êñá‰ª∂ÔºåÁøªËØëËÄÖÊúÄÁªà‰πü‰ºö‰ΩøÁî®ÂÆÉÊù•‰∏∫‰Ω†Êèê‰æõÁøªËØëÔºå‰Ω†‰πüÂèØ‰ª•Â∞ÜÂÖ∂ÂèëÂ∏É„ÄÇÊü•Áúã @xref{I18N Example}ÔºåÊù•Ëé∑ÂèñÂÆåÊï¥ÁöÑ‰∏∫ @command{guide} ÂàõÂª∫ÂèäÊµãËØïÁøªËØëÁöÑÊ≠•È™§„ÄÇ

@node Printf Ordering
@subsection ÈáçÊéí @code{printf} ÂèÇÊï∞ 

@cindex @code{printf} statement, positional specifiers
@cindex positional specifiers, @code{printf} statement
Áî®‰∫é @code{printf} ‰∏é @code{sprintf()} ÂáΩÊï∞ÁöÑÊ†ºÂºèÂ≠ó‰∏≤ÔºàÊü•Áúã @pxref{Printf}ÔºâÂØºËá¥‰∫Ü‰∏ÄÁßçÁâπÊÆäÁöÑÁøªËØëÈóÆÈ¢ò„ÄÇËÄÉËôë‰∏ãÈù¢ÁöÑ‰ª£Á†ÅÔºö 
@footnote{Ëøô‰∏™‰æãÂ≠êÊòØ‰ªé GNU @command{gettext} ÊâãÂÜå‰∏äÂÄüÊù•ÁöÑ„ÄÇ}

@example
printf(_"String `%s' has %d characters\n",
          string, length(string)))
@end example

ÂèØËÉΩÂæ∑ËØ≠ÁøªËØëÊàêËøôÊ†∑Ôºö

@example
"%d Zeichen lang ist die Zeichenkette `%s'\n"
@end example

ÈóÆÈ¢òÂ∫îËØ•ÊòØÂæàÊòéÊòæÁöÑÔºöÊ†ºÂºèÁöÑÊåáÂÆö‰∏éÊúÄÂàùÁöÑÊòØ‰∏çÂêåÁöÑÔºÅÂ∞±ÁÆó @code{gettext()} ÂèØ‰ª•Âú®ËøêË°åÊó∂ËøîÂõûÁøªËØëÂêéÁöÑÂ≠ó‰∏≤Ôºå‰ΩÜÊòØÂç¥Ê≤°ÊúâÂäûÊ≥ïÊîπÂèòË∞ÉÁî® @code{printf} ÂèÇÊï∞ÁöÑÈ°∫Â∫è„ÄÇ

‰∏∫‰∫ÜËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºå@code{printf} Ê†ºÂºèÊåáÂÆöÁ¨¶ÂèØ‰ª•ÊúâÂè¶Â§ñ‰∏Ä‰∏™ÂèØÈÄâÁöÑÂÖÉÁ¥†ÔºåÂç≥@dfn{‰ΩçÁΩÆÊåáÂÆöÁ¨¶}„ÄÇ‰æãÂ¶ÇÔºö

@example
"%2$d Zeichen lang ist die Zeichenkette `%1$s'\n"
@end example

Âú®ËøôÈáåÔºå‰ΩçÁΩÆÊåáÂÆöÁ¨¶Áî±‰∏Ä‰∏™Êï¥Êï∞ÊûÑÊàêÔºåÁî®Êù•Ë°®Á§∫Ë¶Å‰ΩøÁî®Âì™‰∏™ÂèÇÊï∞Ôºå‰ª•Âèä‰∏ÄÂπ¥ @samp{$} Á¨¶Âè∑„ÄÇ‰ΩçÁΩÆÊòØÁî± 1 ÂºÄÂßãÁöÑÔºå@emph{‰∏ç}ÂåÖÂê´Ê†ºÂºè‰∏≤Ëá™Â∑±„ÄÇÊâÄ‰ª•ÔºåÂú®‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰∏≠Ôºå@samp{string} ÊòØÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºå@samp{length(string)} ÂàôÊòØÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ôºö

@example
$ @kbd{gawk 'BEGIN @{}
>     @kbd{string = "Don\47t Panic"}
>     @kbd{printf "%2$d characters live in \"%1$s\"\n",}
>                         @kbd{string, length(string)}
> @kbd{@}'}
@print{} 11 characters live in "Don't Panic"
@end example

Â¶ÇÊûúÊèê‰æõ‰∫Ü‰ΩçÁΩÆÊåáÂÆöÁ¨¶ÔºåËøôÂú®Ê†ºÂºèËßÑÂàô‰∏≠Ë¶ÅÁ¨¨‰∏Ä‰∏™Âá∫Áé∞ÔºåÂç≥Âú®Ê†áÂøóÔºåÂüüÂÆΩ‰ª•Âèä/ÊàñËÄÖÁ≤æÂ∫¶‰πãÂâç„ÄÇ

‰ΩçÁΩÆÊåáÂÆöÁ¨¶ÂèØ‰ª•‰∏éÂä®ÊÄÅÂüüÂÆΩ‰ª•ÂèäÁ≤æÂ∫¶‰∏ÄËµ∑‰ΩøÁî®Ôºö

@example
$ @kbd{gawk 'BEGIN @{}
>    @kbd{printf("%*.*s\n", 10, 20, "hello")}
>    @kbd{printf("%3$*2$.*1$s\n", 20, 10, "hello")}
> @kbd{@}'}
@print{}      hello
@print{}      hello
@end example

@quotation ÊèêÁ§∫
ÂΩì‰∏é‰ΩçÁΩÆÊåáÂÆöÁ¨¶‰∏ÄËµ∑‰ΩøÁî® @samp{*} Êó∂Ôºå@samp{*} Ë¶ÅÂÖàÂá∫Áé∞ÔºåÁÑ∂ÂêéÊòØÊï¥Êï∞‰ΩçÁΩÆÔºåÁÑ∂ÂêéÊâçÊòØ @samp{$} Á¨¶„ÄÇËøôÊúâ‰∏ÄÁÇπÂèçÁõ¥Ëßâ„ÄÇ
@end quotation

@cindex @code{printf} statement, positional specifiers, mixing with regular formats
@cindex positional specifiers, @code{printf} statement, mixing with regular formats
@cindex format specifiers, mixing regular with positional specifiers
@command{gawk} ‰∏çÂÖÅËÆ∏‰Ω†Âú®ÂêåÊ†∑ÁöÑÂ≠ó‰∏≤‰∏≠Ê∑∑Áî®Â∏∏ËßÑÁöÑÊ†ºÂºèÊåáÂÆöÁ¨¶‰∏é‰ΩçÁΩÆÊåáÂÆöÁ¨¶Ôºö

@example
$ @kbd{gawk 'BEGIN @{ printf "%d %3$s\n", 1, 2, "hi" @}'}
@error{} gawk: cmd. line:1: fatal: must use `count$' on all formats or none
@end example

@quotation ÊèêÁ§∫
Êúâ‰∏Ä‰∏™ÁóÖÊÄÅÁöÑÂàóÂ≠ê‰∏≠Ôºå@command{gawk} Êó†Ê≥ïËØÜÂà´„ÄÇÂú®ËøôÊ†∑ÁöÑ‰æãÂ≠ê‰∏≠ÔºåËæìÂá∫ÂèØËÉΩ‰∏çÊòØ‰Ω†ÊâÄÊÉ≥Ë¶ÅÁöÑ„ÄÇÊó¢‰Ωø @command{gawk} Ê≤°ÊúâÊ£ÄÊµãÂà∞ÂÆÉ‰ª¨Ôºå Ê∑∑Áî®ÂÆÉ‰ª¨‰æùÁÑ∂ÊòØ‰∏™Âùè‰∏ªÊÑè„ÄÇ
@end quotation

Â∞ΩÁÆ°‰ΩçÁΩÆÊåáÂÆöÁ¨¶ÂèØ‰ª•Áõ¥Êé•Áî®Âú® @command{awk} Á®ãÂ∫è‰∏≠Ôºå‰ΩÜÂÆÉ‰ª¨ÁöÑ‰∏ªË¶ÅÁõÆÁöÑÊòØÁî®Êù•Â∏ÆÂä©‰∫ßÁîüÊ≠£Á°ÆÁöÑÊ†ºÂºè‰∏≤ÁöÑÁøªËØëÔºå‰ªéÂºÄÂßãÁºñÂÜôÁöÑËØ≠Ë®ÄÂà∞ÂÖ∂‰ªñ‰∏çÂêåÁöÑËØ≠Ë®Ä„ÄÇ

@node I18N Portability
@subsection @command{awk} ÁöÑÁßªÊ§çÊÄßÈóÆÈ¢ò

@cindex portability, internationalization and
@cindex internationalization, localization, portability and
@command{gawk} ÁöÑÂõΩÈôÖÂåñÁâπÊÄßÊúâÊÑèÈÄâÊã©ÂØπ @command{awk} ÁöÑÂèØÁßªÊ§çÊÄßÂΩ±ÂìçÊúÄÂèØËÉΩÂ∞èÔºå‰ΩøÂÆÉ‰ª¨ÂèØ‰ª•Áî®‰∫éÂÖ∂‰ªñÁöÑ @command{awk} ÁâàÊú¨„ÄÇËÄÉËôë‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÔºö

@example
BEGIN @{
    TEXTDOMAIN = "guide"
    if (Test_Guide)   # set with -v
        bindtextdomain("/test/guide/messages")
    print _"don't panic!"
@}
@end example

@noindent
Â¶Ç‰∏äÁöÑ‰ª£Á†ÅÔºåÂú®ÂÖ∂‰ªñÁöÑÁâàÊú¨ÁöÑ @command{awk} ‰∏≠Ê≤°ÂäûÊ≥ïÂ∑•‰Ωú„ÄÇ‰ΩÜÊòØÔºåÂÆûÈôÖÂÆÉÂ∑≤ÁªèÂ∑Æ‰∏çÂ§öÂèØÁßªÊ§ç‰∫ÜÔºåÂè™ÈúÄË¶Å‰∏ÄÁÇπÁÇπÊîπÂä®Ôºö

@itemize @value{BULLET}
@cindex @code{TEXTDOMAIN} variable, portability and
@item
ÂØπ @code{TEXTDOMAIN} ÁöÑËµãÂÄºÊ≤°ÊúâÊïàÊûúÔºåÂõ†‰∏∫ @code{TEXTDOMAIN} Âú®ÂÖ∂‰ªñÁöÑ @command{awk} ÂÆûÁé∞‰∏≠Ê≤°ÊúâÁâπÊÆäÂê´‰πâ„ÄÇ

@item
Èùû GNU ÁâàÊú¨ÁöÑ @command{awk} Â∞ÜÂ∑≤ÁªèÊ†áÂøóÁöÑÂèòÈáèÂΩìÊàêÊòØÂèòÈáèÂêç‰∏∫ @code{_} ‰∏éÂÖ∂‰ªñÁöÑÂ≠ó‰∏≤ÁöÑËøûÊé•„ÄÇ 
@footnote{ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÁî®Êù•Â≠òÊîæ‚Äú‰ª§‰∫∫Âõ∞ÊÉëÁöÑ @command{awk}‚ÄùÂÜÖÂÆπÁöÑÁõÆÂΩï„ÄÇ}
ÂÖ∏ÂûãÁöÑÊÉÖÂÜµÔºåÂèòÈáè @code{_} Â∞ÜÁ©∫‰∏≤Ôºà@code{""}ÔºâÂΩìÊàêÂÆÉÁöÑÂÄºÔºåËøôÊ†∑ÊúÄÂàùÁöÑÂ∏∏ÈáèÂ≠ó‰∏≤‰∏çÂèò„ÄÇ

@item
ÈÄöËøáÂÆö‰πâ‚ÄúÂìë‚ÄùÂáΩÊï∞Êù•‰ª£Êõø @code{dcgettext()}„ÄÅ@code{dcngettext()} ‰∏é @code{bindtextdomain()}ÔºåËøôÊ†∑ @command{awk} Á®ãÂ∫èÂèØ‰ª•ËøêË°åËµ∑Êù•Ôºå‰ΩÜÊòØÂè™ËæìÂá∫ÊâÄÊúâÁöÑÂàùÂßãËØ≠Ë®ÄÁöÑÊ∂àÊÅØ„ÄÇ

@cindex @code{bindtextdomain()} function (@command{gawk}), portability and
@cindex @code{dcgettext()} function (@command{gawk}), portability and
@cindex @code{dcngettext()} function (@command{gawk}), portability and
@example
@c file eg/lib/libintl.awk
function bindtextdomain(dir, domain)
@{
    return dir
@}

function dcgettext(string, domain, category)
@{
    return string
@}

function dcngettext(string1, string2, number, domain, category)
@{
    return (number == 1 ? string1 : string2)
@}
@c endfile
@end example

@item
Âú® @code{printf} ‰∏é @code{sprintf()} ‰∏≠ÁöÑ‰ΩçÁΩÆÊåáÂÆöÁ¨¶ÊòØ@emph{‰∏çÂèØ}ÁßªÊ§çÁöÑ„ÄÇ‰∏∫‰∫ÜÂú® C Â±ÇÊ¨°‰∏äÊîØÊåÅ @code{gettext()}ÔºåÂæàÂ§öÁöÑÁ≥ªÁªüÁöÑ C ÁâàÊú¨ÁöÑ @code{sprintf} ‰πüÊîØÊåÅ‰ΩçÁΩÆÊåáÂÆöÁ¨¶„ÄÇ‰ΩÜÊòØÂè™Ë¶ÅÊèê‰æõ‰∫ÜË∂≥Â§üÁöÑÂèÇÊï∞ÁöÑË∞ÉÁî®Êó∂Êâç‰ºöÊúâÁî®„ÄÇÂæàÂ§öÁöÑ @command{awk} ÁâàÊú¨Â∞Ü @code{printf} ÁöÑÊ†ºÂºè‰∏éÂèÇÊï∞‰∏çÂèòÂú∞‰º†ÈÄíÁªô‰∏ãÂ±ÇÁöÑ C ÁâàÊú¨ÁöÑ @code{sprintf()}Ôºå‰ΩÜÊòØ‰∏ÄÊ¨°Âè™‰º†ÈÄí‰∏Ä‰∏™Ê†ºÂºè‰∏éÂèÇÊï∞„ÄÇÂ§ßÂÆ∂ÂèØ‰ª•ÁåúÊµãËØïÂ¶ÇÊûú‰ΩøÁî®‰∫Ü‰ΩçÁΩÆÊåáÂÆöÁ¨¶ÁöÑÊó∂ÂÄô‰ºöÂèëÁîü‰ªÄ‰πà„ÄÇ
‰ΩÜÊòØÔºåÁî±‰∫é‰ΩçÁΩÆÊåáÂÆöÁ¨¶‰∏ªË¶ÅÊòØÁî®Êù•ÂÅö@emph{ÁøªËØë}Ê†ºÂºèÁöÑÂ≠ó‰∏≤ÔºåËÄå‰∏îÂõ†‰∏∫Èùû GNU ÁöÑ @command{awk} ‰∏ç‰ºöËøîÂõûÁøªËØëÂêéÁöÑÂ≠ó‰∏≠ÔºåÊâÄ‰ª•ËøôÂú®ÂÆûË∑µ‰∏≠‰∏ç‰ºöÊàê‰∏∫‰∏Ä‰∏™ÈóÆÈ¢ò„ÄÇ
@end itemize

@node I18N Example
@section ÁÆÄÂçïÁöÑÂõΩÈôÖÂåñ‰æãÂ≠ê

Áé∞Âú®ÔºåËÆ©Êàë‰ª¨ÁúãÁúãÂ¶Ç‰Ωï‰∏ÄÊ≠•Ê≠•Âú∞ËøõË°åÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞Âåñ‰∏Ä‰∏™‰æãÂ≠ê @command{awk} Á®ãÂ∫èÔºå‰ΩøÁî® @file{guide.awk} ‰Ωú‰∏∫Êàë‰ª¨ÁöÑÊ∫ê‰ª£Á†ÅÔºö

@example
@c file eg/prog/guide.awk
BEGIN @{
    TEXTDOMAIN = "guide"
    bindtextdomain(".")  # for testing
    print _"Don't Panic"
    print _"The Answer Is", 42
    print "Pardon me, Zaphod who?"
@}
@c endfile
@end example

@noindent
ÊâßË°å @samp{gawk --gen-pot} Êù•ÂàõÂª∫ @file{.pot} Êñá‰ª∂Ôºö

@example
$ @kbd{gawk --gen-pot -f guide.awk > guide.pot}
@end example

@noindent
ËøôÈáå‰ºö‰∫ßÁîüÔºö

@example
@c file eg/data/guide.po
#: guide.awk:4
msgid "Don't Panic"
msgstr ""

#: guide.awk:5
msgid "The Answer Is"
msgstr ""

@c endfile
@end example

ËøôÊòØÊúÄÂàùÁöÑÂèØÁßªÊ§çÂØπË±°Ê®°ÂùóÊñá‰ª∂Ôºå‰ºöË¢´‰øùÂ≠òÂπ∂Âú®ÊØè‰∏™ÂÆÉË¶ÅËøõË°åÁøªËØëÁöÑËØ≠Ë®Ä‰∏≠ËøõË°åÈáçÁî®„ÄÇ@code{msgid} ÊòØÊúÄÂàùÁöÑÂ≠ó‰∏≤ÔºåËÄå @code{msgstr} ÊòØÁøªËØë„ÄÇ

@quotation ÊèêÁ§∫
Â≠ó‰∏≤Ê≤°ÊúâÁî®‰∏ãÂàíÁ∫øËøõË°åÊ†áÂøóÁöÑÔºå‰∏ç‰ºöÂá∫Áé∞Âú® @file{guide.pot} Êñá‰ª∂‰∏≠„ÄÇ
@end quotation

‰∏ã‰∏ÄÊ≠•ÔºåÂàôË¶ÅËøõË°åÊ∂àÊÅØÁöÑÁøªËØë„ÄÇËøôÈáåÁöÑÁøªËØëÊòØ‰∏Ä‰∏™ÂÅáÊÉ≥ÁöÑËã±ËØ≠ÊñπË®ÄÔºåÁß∞‰∏∫ ‚ÄúMellow‚ÄùÔºö 
@footnote{‰πüËÆ∏ÔºåÊàë‰ª¨Áß∞‰πã‰∏∫ ‚ÄúHippy‚ÄùÂèØËÉΩ‰ºöÊõ¥Â•Ω„ÄÇ}

@example
@group
$ @kbd{cp guide.pot guide-mellow.po}
@var{Add translations to} guide-mellow.po @dots{}
@end group
@end example

@noindent
‰∏ãÈù¢ÊòØÁøªËØëÔºö

@example
@c file eg/data/guide-mellow.po
#: guide.awk:4
msgid "Don't Panic"
msgstr "Hey man, relax!"

#: guide.awk:5
msgid "The Answer Is"
msgstr "Like, the scoop is"

@c endfile
@end example

@cindex Linux
@cindex GNU/Linux
‰∏ã‰∏ÄÊ≠•ÊòØÂàõÂª∫‰∏Ä‰∏™ÁõÆÂΩïÊù•Â≠òÂÇ®‰∫åËøõÂà∂Ê∂àÊÅØÂØπË±°Êñá‰ª∂ÔºåÁÑ∂ÂêéÂàõÂª∫ @file{guide.mo} Êñá‰ª∂„ÄÇÊàë‰ª¨ÂÅáË£ÖÊàë‰ª¨ÁöÑÊñá‰ª∂ÂáÜÂ§áÂú® @code{en_US.UTF-8} ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‰ΩøÁî®ÔºåÂõ†‰∏∫Êàë‰ª¨ÂøÖÈ°ª‰ΩøÁî®‰∏Ä‰∏™ C ÁöÑ@command{gettext} ‰æãÁ®ãÁü•ÈÅìÁöÑËØ≠Ë®ÄËÆæÁΩÆ„ÄÇËøôÈáåÊòæÁ§∫ÁöÑÁõÆÂΩïÂ∏ÉÂ±ÄË°®Á§∫ÁöÑÊòØ GNU/Linux Á≥ªÁªü‰∏äÁöÑ GNU @command{gettext}„ÄÇÂÖ∂‰ªñÁâàÊú¨ÁöÑ @command{gettext} ÂèØ‰ª•‰ΩøÁî®‰∏çÂêåÁöÑÂ∏ÉÂ±ÄÔºö

@example
$ @kbd{mkdir en_US.UTF-8 en_US.UTF-8/LC_MESSAGES}
@end example

@cindex @code{.po} files, converting to @code{.mo}
@cindex files, @code{.po}, converting to @code{.mo}
@cindex @code{.mo} files, converting from @code{.po}
@cindex files, @code{.mo}, converting from @code{.po}
@cindex portable object files, converting to message object files
@cindex files, portable object, converting to message object files
@cindex message object files, converting from portable object files
@cindex files, message object, converting from portable object files
@cindex @command{msgfmt} utility
@command{msgfmt} Â∑•ÂÖ∑Â∞Ü‰∫∫ÂèØËØªÁöÑ @file{.mo} Êñá‰ª∂ËΩ¨Êç¢ÊàêÊú∫Âô®ÂèØËØªÁöÑ @file{.mo} Êñá‰ª∂„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå@command{msgfmt} ÂàõÂª∫‰∏Ä‰∏™Âè´ÂÅö @file{messages} Êñá‰ª∂„ÄÇËøô‰∏™Êñá‰ª∂ÂøÖÈ°ªË¢´ÈáçÊñ∞ÂëΩÂêçÔºåÂπ∂Ë¢´ÊîæÂú®ÂêàÈÄÇÁöÑ‰ΩçÁΩÆÔºà‰ΩøÁî® @option{-o} ÈÄâÈ°πÔºâÔºåÂõ†Ê≠§ @command{gawk} ÂèØ‰ª•ÊâæÂà∞ÂÆÉÔºö

@example
$ @kbd{msgfmt guide-mellow.po -o en_US.UTF-8/LC_MESSAGES/guide.mo}
@end example

ÊúÄÂêéÔºåÊàë‰ª¨ËøêË°åÁ®ãÂ∫èÊù•ÊµãËØïÔºö

@example
$ @kbd{gawk -f guide.awk}
@print{} Hey man, relax!
@print{} Like, the scoop is 42
@print{} Pardon me, Zaphod who?
@end example

Â¶ÇÊûú @code{dcgettext()}Ôºå@code{dcngettext()} ‰∏é @code{bindtextdomain()} ÔºàÊü•Áúã @pxref{I18N Portability}ÔºâËøô‰∏â‰∏™ÂáΩÊï∞Âú®Êñá‰ª∂ @file{libintl.awk} Êñá‰ª∂‰∏≠ÔºåÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•ËøôÊ†∑ÁöÑËøêË°å @file{guide.awk}Ôºö

@example
$ @kbd{gawk --posix -f guide.awk -f libintl.awk}
@print{} Don't Panic
@print{} The Answer Is 42
@print{} Pardon me, Zaphod who?
@end example

@node Gawk I18N
@section @command{gawk} ÂèØ‰ª•ËØ¥‰Ω†ÁöÑËØ≠Ë®Ä

@command{gawk} Êú¨Ë∫´Â∑≤Áªè‰ΩøÁî® GNU @command{gettext} ÂåÖÊù•ÂÅö‰∫ÜÂõΩÈôÖÂåñ„ÄÇÔºàGNU @command{gettext} Âú® 
@ifinfo
@inforef{Top, , GNU @command{gettext} utilities, gettext, GNU @command{gettext} utilities}
@end ifinfo
@ifnotinfo
@uref{http://www.gnu.org/software/gettext/manual/,
@cite{GNU @command{gettext} Â∑•ÂÖ∑}}
@end ifnotinfo
ÈáåÊúâÂÆåÊï¥ÁöÑÊèèËø∞Ôºâ
Âú®ÂÜôËøô‰∏™ÁöÑÊó∂ÂÄôÔºåGNU @command{gettext} ÁöÑÊúÄÊñ∞ÁâàÊú¨ÊòØ @uref{ftp://ftp.gnu.org/gnu/gettext/gettext-0.19.4.tar.gz,
@value{PVERSION} 0.19.4}„ÄÇ

Â¶ÇÊûú @command{gawk} ÁöÑÊ∂àÊÅØÁøªËØëÂ≠òÂú®Ôºå@command{gawk} ‰∫ßÁîüÁöÑ‰ø°ÊÅØÔºåË≠¶ÂëäÔºåÂëΩ‰ª§ÈîôËØØ‰ºö‰ΩøÁî®Êú¨Âú∞ËØ≠Ë®Ä„ÄÇ

@node I18N Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
ÂõΩÈôÖÂåñË°®Á§∫ÂÜôÁöÑÁ®ãÂ∫èÂèØ‰ª•‰ΩøÁî®Â§öÁßçËØ≠Ë®ÄËÄå‰∏çÈúÄË¶ÅÂØπÊ∫ê‰ª£Á†ÅËøõË°åÊîπÂèò„ÄÇÊú¨Âú∞ÂåñÂàôË°®Á§∫ÁªôÂ∑≤ÁªèÂõΩÈôÖÂåñÁöÑËØ≠Ë®ÄÊèê‰æõÂøÖË¶ÅÁöÑÊï∞ÊçÆÊù•‰ΩøÂÖ∂‰ªñÁâπÂÆöÁöÑËØ≠Ë®Ä‰∏≠Â∑•‰Ωú„ÄÇ

@item
@command{gawk} ‰ΩøÁî® GNU @command{gettext} Êù•ËÆ©‰Ω†ÂØπ @command{awk} Á®ãÂ∫èËøõË°åÂõΩÈôÖÂåñ‰∏éÊú¨Âú∞Âåñ„ÄÇ‰∏Ä‰∏™Á®ãÂ∫èÁöÑÊñáÊú¨ÂüüÊ†áËØÜ‰∫ÜÁî®‰∫éÁªÑÂêàÊ∂àÊÅØ‰∏éÂÖ∂‰ªñÊï∞ÊçÆÁöÑÁ®ãÂ∫è„ÄÇ

@item
‰Ω†Â∞ÜÁ®ãÂ∫è‰∏≠ÁöÑÂ≠ó‰∏≤Áî®‰∏ãÂàíÁ∫øÊù•ËøõË°åÊ†áËØÜ‰ª•Áî®‰∫éÁøªËØë„ÄÇ‰∏ÄÊó¶ÂÆåÊàê‰∫ÜËøô‰∏™ÔºåÂ≠ó‰∏≤‰ºöË¢´ÊèêÂèñÂà∞‰∏Ä‰∏™ @file{.pot} Êñá‰ª∂‰∏≠„ÄÇËøô‰∏™Êñá‰ª∂‰∏∫ÊØèÁßçËØ≠Ë®ÄÁöÑÂ§çÂà∂‰∏Ä‰∏™ @file{.po} Êñá‰ª∂ÔºåÁÑ∂Âêé @file{.po} Êñá‰ª∂‰ºöÁºñËØëÊàê @file{.gmo} Êñá‰ª∂Êù•Âú®ËøêË°åÊó∂‰ΩøÁî®„ÄÇ

@item
‰Ω†ÂèØ‰ª•Âú® @code{sprintf} ‰∏é @code{printf} ‰∏≠‰ΩøÁî®‰ΩçÁΩÆÊåáÂÆöÁ¨¶Ôºå‰ΩøÂèØ‰ª•Âú®Ê†ºÂºèÂåñ‰∏≤‰∏éËæìÂá∫‰∏≠ËæìÂá∫‰∏≠ÈáçÊñ∞ÂØπÂèÇÊï∞ÂÄºËøõË°åÊéíÂ∫è„ÄÇËøôÂØπ‰∫éÊéßÂà∂Â≠ó‰∏≤ÁöÑÁøªËØëÂæàÊúâÁî®„ÄÇ

@item
ÂõΩÈôÖÂåñÁâπÂà´Ë¢´ËÆæËÆ°ÊàêÂú®Ê†áÂáÜÁöÑ @command{awk} ‰∏≠‰πüÂèØ‰ª•ÂæàÂ•ΩÂ§ÑÁêÜ„ÄÇ

@item
@command{gawk} Êú¨Ë∫´Â∑≤ÁªèÂõΩÈôÖÂåñÔºåÂπ∂ÂèëÂ∏É‰∫ÜÂ§öÁßçËØ≠Ë®ÄÊ∂àÊÅØ„ÄÇ

@end itemize


@node Debugger
@chapter Ë∞ÉËØï @command{awk} Á®ãÂ∫è
@cindex debugging @command{awk} programs

@c The original text for this chapter was contributed by Efraim Yawitz.
@c FIXME: Add more indexing.

Â¶ÇÊûúÁ®ãÂ∫èÂú®Á¨¨‰∏ÄÊ¨°ËøêÂä®Â∞±Ë°®Áé∞ÂÆåÁæéÈÇ£Â∞±Â•Ω‰∫ÜÔºå‰ΩÜÊòØÂú®Áé∞ÂÆûÁîüÊ¥ª‰∏≠ÔºåËøôÂØπ‰∫é‰ªªÊÑèÂ§çÊùÇÂ∫¶ÁöÑÁ®ãÂ∫èÊù•ËØ¥ÈÉΩÂæàÂ∞ëËßÅ„ÄÇÊâÄ‰ª•ÔºåÂ§ßÂ§öÊï∞ÁöÑÁ®ãÂ∫èËØ≠Ë®ÄÈÉΩÊúâÁõ∏Â∫îÁöÑÂ∑•ÂÖ∑Áî®Êù•ËøõË°å‚ÄúË∞ÉËØï‚ÄùÁ®ãÂ∫èÔºåËÄå @command{awk} ‰πü‰∏ç‰æãÂ§ñ„ÄÇ

@command{gawk} ÁöÑË∞ÉËØïÂô®ÊúâÊÑèÂú∞ÂèÇÁÖß @uref{http://www.gnu.org/software/gdb/, GNU Ë∞ÉËØïÂô®ÔºàGDBÔºâ} ÁöÑÂëΩ‰ª§Ë°åË∞ÉËØïÂô®„ÄÇÂ¶ÇÊûú‰Ω†ÁÜüÊÇâ GDBÔºåÂ≠¶‰π†Â¶Ç‰ΩïÊù•‰ΩøÁî® @command{gawk} Ë∞ÉËØï‰Ω†ÁöÑÁ®ãÂ∫èÂ∞±ÂæàÁÆÄÂçï„ÄÇ

@menu
* Debugging::                   Introduction to @command{gawk} debugger.
* Sample Debugging Session::    Sample debugging session.
* List of Debugger Commands::   Main debugger commands.
* Readline Support::            Readline support.
* Limitations::                 Limitations and future plans.
* Debugging Summary::           Debugging summary.
@end menu

@node Debugging
@section @command{gawk} Ë∞ÉËØïÂô®‰ªãÁªç

Êú¨@value{SECTION}‰∏ÄËà¨ÊÄßÂú∞‰ªãÁªç‰∏Ä‰∏ãË∞ÉËØïÂô®‰ª•ÂèäÂºÄÂßãËÆ®ËÆ∫ @command{gawk} ÁöÑË∞ÉËØï„ÄÇ

@menu
* Debugging Concepts::          Debugging in General.
* Debugging Terms::             Additional Debugging Concepts.
* Awk Debugging::               Awk Debugging.
@end menu

@node Debugging Concepts
@subsection ÈÄöÁî®ÁöÑË∞ÉËØïÊäÄÊúØ

ÔºàÂ¶ÇÊûú‰Ω†‰ΩøÁî®ËøáÂÖ∂‰ªñËØ≠Ë®ÄÁöÑË∞ÉËØïÂô®Ôºå‰Ω†ÂèØ‰ª•Ë∑≥ËøáÂà∞ @ref{Awk Debugging}„ÄÇÔºâ

ÂΩìÁÑ∂ÔºåË∞ÉËØïÁ®ãÂ∫èÊ≤°ÂäûÊ≥ïÂ∏Æ‰Ω†ÁßªÈô§ BugÔºåÂõ†Ê≠§ÂÆÉÂπ∂‰∏çÁü•ÈÅì‰Ω†ÊàñËÄÖ‰Ω†ÁöÑÁî®Êà∑Â¶Ç‰ΩïÂ∞ÜÂÖ∂ÂΩìÊàêÊòØ‰∏™ BugÔºåËøòÊòØ‰∏Ä‰∏™ÁâπÊÄß„ÄÇÔºàÊúâÊó∂ÂÄôÔºå‰∫∫Á±ªËá™Â∑±ÂØπ‰∫éËøô‰∏™ÈóÆÈ¢ò‰πüÊå£Êâé‰∫ÜÂæà‰πÖ„ÄÇÔºâÂú®Ëøô‰∏™ÊÉÖÂÜµ‰∏ãÔºå‰Ω†‰ªéËøôÊ†∑ÁöÑÂ∑•ÂÖ∑ÊÉ≥ÂæóÂà∞‰ªÄ‰πàÂë¢ÔºüÁ≠îÊ°à‰æùËµñ‰∫éÊ≠£Âú®Ë¢´Ë∞ÉËØïÁöÑËØ≠Ë®ÄÔºå‰ΩÜÊòØ‰∏ÄËà¨Êù•ËØ¥Ôºå‰Ω†Ëá≥Â∞ëÂèØ‰ª•ÂæóÂ¶Ç‰∏ãÁöÑÁªìÊûúÔºö

@itemize @value{BULLET}
@item
ÊúâËÉΩÂäõÊü•ÁúãÁ®ãÂ∫èÊåá‰ª§‰∏ÄÊù°Êù°Âú∞ÊâßË°åÔºåËøôÊ†∑‰Ω†ËøôÊ†∑ÁöÑÁ®ãÂ∫èÂëòÂ∞±ÊúâÊú∫‰ºöËÄÉËôëÂú®ÁßíÁ∫ßÔºåÂàÜÈíüÁ∫ßÔºåÊàñËÄÖÂ∞èÊó∂Á∫ßÁöÑÊó∂Èó¥‰∏äÂèëÁîü‰∫Ü‰ªÄ‰πàÔºåËÄå‰∏çÊòØÁ∫≥ÁßíÁ∫ßÁöÑÊó∂Èó¥‰∏ä„ÄÇÂú®Ëøô‰∏™Êó∂Èó¥‰∏ä‰ª£Á†ÅÊÄª‰ºöÊòØÊâßË°åÁöÑ„ÄÇ

@item
ÊúâÊú∫‰ºö‰∏ç‰ªÖÊòØË¢´Âä®Âú∞ÂèëÁé∞‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÊìç‰ΩúÔºåËÄå‰∏îËÉΩÂ§üÊéßÂà∂ÂÆÉÔºåÂπ∂‰∏îÂ∞ùËØï‰∏çÂêåÁöÑÊâßË°åË∑ØÂæÑÔºåËÄå‰∏çÈúÄË¶ÅÊîπÂä®‰Ω†ÁöÑÊ∫ê‰ª£Á†Å„ÄÇ

@item
ÊúâÊú∫‰ºöÂú®‰ªª‰ΩïÁöÑÊâßË°åÊó∂Èó¥ÁÇπÁúãÂà∞Êï∞ÊçÆÁöÑÂÄºÔºåÂπ∂‰∏îÂú®ÊâßË°åÊó∂ÂÄôÊîπÂèòÂÆÉÁöÑÂÄºÔºå‰ª•ÊµãËØïÂêéÁª≠ÂÖ∂Â¶Ç‰ΩïÊù•ÂΩ±ÂìçÁ®ãÂ∫è„ÄÇÔºàËøô‰∏ÄËà¨ÈÉΩÂåÖÊã¨Êü•ÁúãÂÜÖÈÉ®Êï∞ÊçÆÁªìÊûÑÁöÑËÉΩÂäõÔºåÂåÖÂê´‰Ω†Âú®‰ª£Á†Å‰∏≠ÂÆö‰πâÁöÑÂèòÈáè„ÄÇÔºâ

@item
ÊúâËÉΩÂäõÂèñÂæóÁ®ãÂ∫èÁä∂ÊÄÅÁöÑÈ¢ùÂ§ñ ‰ø°ÊÅØÔºåÁîöËá≥ÊòØÂÜÖÈÉ®ÁªìÊûÑ„ÄÇ
@end itemize

ÊâÄÊúâËøôÊ†∑ÁöÑÂ∑•‰ΩúÈÉΩÊèê‰æõÂ§ßÈáèÁöÑÂ∏ÆÂä©Êù•‰ΩøÁî®‰Ω†Ëá™Â∑±ÁöÑÊäÄËÉΩÊù•ÁêÜËß£‰Ω†ÁöÑÁ®ãÂ∫èÁöÑÁõÆÊ†áÔºå‰ª•Ê≠§Êù•ÂèëÁé∞Âì™ÈáåÂá∫‰∫ÜÈîôÔºàÊàñËÄÖÔºåÈÄöËøáËøôÊ†∑ÂèØ‰ª•Êõ¥Â•ΩÂú∞ÁêÜËß£‰Ω†ÊàñËÄÖÂà´‰∫∫ÂÜôÁöÑÂäüËÉΩÁ®ãÂ∫èÔºâ„ÄÇ

@node Debugging Terms
@subsection Ë∞ÉËØïÊ¶ÇÂøµ

Âú®Ê∑±ÂÖ•ÁªÜËäÇ‰πãÂâçÔºåÊàë‰ª¨ÈúÄË¶Å‰ªãÁªçÂÖ≥‰∫éË∞ÉËØïÂô®ÁöÑÂá†‰∏™ÈáçË¶ÅÊ¶ÇÂøµ„ÄÇ‰∏ãÈù¢ÁöÑÂàóË°®ÂÆö‰πâ‰∫ÜÊú¨@value{CHAPTER}‰∏≠ÂêéÈù¢‰ΩøÁî®Âà∞ÊúØËØ≠Ôºö

@table @dfn
@cindex stack frame
@item Stack frame
Á®ãÂ∫è‰∏ÄËà¨Âú®ÂÆÉ‰ª¨ÁöÑÊâßË°åËøáÁ®ã‰∏≠Ë∞ÉÁî®ÂáΩÊï∞„ÄÇ‰∏Ä‰∏™ÂáΩÊï∞Ë∞ÉÁî®Âè¶‰∏Ä‰∏™ÂáΩÊï∞ÔºåÊàñËÄÖÂáΩÊï∞Ë∞ÉËØïËá™Â∑±ÔºàÈÄíÂΩíÔºâ„ÄÇ‰Ω†ÂèØ‰ª•Êü•ÁúãÂáΩÊï∞Ë∞ÉÁî®ÁöÑÈìæÔºà‰∏ªÁ®ãÂ∫èË∞ÉÁî® AÔºåËÄå A Ë∞ÉÁî® BÔºåB ÂÜçËØïÁî® CÔºâÔºå‰Ωú‰∏∫ÊâßË°åÂáΩÊï∞Ê†àÔºöÂΩìÂâçËøêË°åÁöÑÂáΩÊï∞Âú®Ê†àÁöÑÊúÄÈ°∂Á´ØÔºåÂΩìÂÆÉÂÆåÊàêÊó∂ÔºàËøîÂõûÔºâÔºå‰∏ã‰∏Ä‰∏™ÂàôÊàê‰ºöÊ¥ªÂä®ÂáΩÊï∞„ÄÇËøôÊ†∑ÁöÑ‰∏Ä‰∏™Ê†àÊúØËØ≠‰∏äÂè´ÂÅö@dfn{Ë∞ÉÁî®Ê†à}„ÄÇ

Âú®Ë∞ÉÁî®Ê†à‰∏äÁöÑÊØè‰∏Ä‰∏™ÂáΩÊï∞ÔºåÁ≥ªÁªüÈÉΩ‰ºö‰øùÁïô‰∏Ä‰∏™Êï∞ÊçÆÂå∫Êù•ÂåÖÂê´ÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÊú¨Âú∞ÂèòÈáè‰ª•ÂèäËøîÂõûÂÄºÔºå‰ª•ÂèäÂÖ∂‰ªñÁöÑ‚ÄúÁôªËÆ∞‚Äù‰ø°ÊÅØÔºå‰ª•Áî®Êù•ÁÆ°ÁêÜË∞ÉÁî®Ê†à„ÄÇËøô‰∏™Êï∞ÊçÆÂå∫Ë¢´Áß∞‰∏∫@dfn{Ê†àÂ∏ß}„ÄÇ

@command{gawk} ‰πü‰ΩøÁî®ËøôÊ†∑ÁöÑÊ®°ÂûãÔºåÂèØ‰ª•ËÆ©‰Ω†ËÆøÈóÆÂà∞Ë∞ÉÁî®Ê†à‰ª•ÂèäÊØè‰∏™Ê†àÂ∏ß„ÄÇ‰Ω†ÂèØ‰ª•ÁúãÂà∞Ë∞ÉÁî®Ê†àÔºå‰ª•Âèä‰ªéÊ†à‰∏≠ÁöÑÂì™‰∏™ÂáΩÊï∞Ë∞ÉÁî®„ÄÇÁî®Êù•ÊâìÂç∞Ë∞ÉÁî®Ê†àÁöÑÂëΩ‰ª§ÊâìÂç∞ÊØè‰∏™Ê†àÂ∏ñÁöÑ‰ø°ÊÅØÔºàÂêéÈù¢ÊúâËØ¶ÁªÜÂÜÖÂÆπÔºâ„ÄÇ

@item Breakpoint
@cindex breakpoint
Âú®Ë∞ÉËØïÊúüÈó¥Ôºå‰Ω†Â∏∏Â∏∏Â∏åÊúõÁ®ãÂ∫èÊâßË°åÂà∞‰∏Ä‰∏™ÁâπÂÆöÁöÑÁÇπÔºåÁÑ∂ÂêéÁªßÁª≠‰ªéÈÇ£Èáå‰∏ÄÊ¨°ÊâßË°å‰∏ÄÊù°ËØ≠Âè•„ÄÇË¶ÅËøô‰πàÂÅöÁöÑÊñπÂºèÊòØÂú®Á®ãÂ∫è‰∏≠ËÆæÁΩÆ‰∏Ä‰∏™@dfn{Êñ≠ÁÇπ}„ÄÇ‰∏Ä‰∏™Êñ≠ÁÇπÊòØÁ®ãÂ∫èÊâßË°åÊó∂‰ºöÊöÇÂÅúÔºàÂÅúÊ≠¢ÔºâÁöÑ‰ΩçÁΩÆÔºåÂõ†Ê≠§‰Ω†ÂèØ‰ª•ÂèñÂæóÁ®ãÂ∫èÊâßË°åÊéßÂà∂ÊùÉ„ÄÇ‰Ω†ÂèØ‰ª•Ê∑ªÂä†ÊàñËÄÖÁßªÈô§Â§ö‰∏™Êñ≠ÁÇπ„ÄÇ

@item Watchpoint
@cindex watchpoint
‰∏Ä‰∏™Êü•ÁúãÁÇπ‰∏éÊñ≠ÁÇπÁ±ªÂûã„ÄÇ‰∏çÂêåÁöÑÊòØÊñ≠ÁÇπÊòØÈù¢Âêë‰ª£Á†ÅÁöÑÔºåÂΩì‰ª£Á†ÅÊâßË°åÂà∞ËææÂêéÔºå‰ºöÂÅúÊ≠¢ÊâßË°å„ÄÇ‰∏Ä‰∏™Êü•ÁúãÁÇπÔºåÂàôÊåáÂÆöÁöÑÁ®ãÂ∫èÂΩìÊüê‰∏™@emph{ÂÄº}ÊîπÂèòÊó∂‰ºöÂÅúÊ≠¢„ÄÇËøô‰ºöÁõ∏ÂΩìÊúâÁî®ÔºåÂõ†‰∏∫ÊúâÊó∂ÂèòÈáèÊé•Êî∂‰∫Ü‰∏Ä‰∏™ÈîôËØØÁöÑÂÄºÔºåËÄåÂè™Êü•Áúã‰ª£Á†ÅÂæàÈöæË∑üË∏™„ÄÇÈÄöËøá‰ΩøÁî®Êü•ÁúãÁÇπÔºå‰Ω†ÂèØ‰ª•Âú®ÂèòÈáèË¢´ËµãÂÄºÊó∂ËÄåÂÅú‰∏ãÊù•ÔºåËøôÊ†∑ÈÄöÂ∏∏ÂèØ‰ª•ÂæàÂø´Âú∞Êü•ÊâæÂà∞ÈîôËØØÁöÑ‰ª£Á†Å„ÄÇ
@end table

@node Awk Debugging
@subsection @command{awk} Ë∞ÉËØï

Ë∞ÉËØï @command{awk} Á®ãÂ∫èÊúâ‰∏Ä‰∫õÊñπÈù¢‰∏éË∞ÉËØïÂÖ∂‰ªñËØ≠Ë®ÄÂÜôÊàêÁöÑÁ®ãÂ∫èÊúâ‰∏Ä‰∫õ‰∏çÂêå„ÄÇ

È¶ñÂÖàÔºå@command{awk} Á®ãÂ∫èÈÄöÂ∏∏ÊòØ‰ªé‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Êñá‰ª∂‰∏≠‰∏ÄË°åË°åÂú∞ËØªÂèñÊï∞ÊçÆÔºåÁÑ∂Âêé‰ΩøÁî®ÁâπÂÆöÁöÑËßÑÂàôÊìç‰ΩúËøô‰∫õË°åÔºåËøôÊ†∑ÔºåÊ†πÊçÆËøô‰∫õËßÑÂàôÊù•Êü•ÁúãÁ®ãÂ∫èÁöÑÁ®ãÂ∫èÁöÑÊâßË°åÊòØÈùûÂ∏∏ÊúâÁî®ÁöÑ„ÄÇÊ≠£Â¶ÇÊàë‰ª¨ËßÅÂà∞ÁöÑÔºåÊØè‰∏Ä‰∏™ @command{awk} ËßÑÂàôÈÉΩÂÉè‰∏Ä‰∏™ÂáΩÊï∞‰∏ÄÊ†∑ÔºåÂÆÉ‰ª¨ÊúâËá™Â∑±ÁâπÂÆöÁöÑÊåá‰ª§Âùó„ÄÇ

Âè¶Â§ñÔºåÁî±‰∫é @command{awk} ËÆæËÆ°‰∏äÊòØ‰∏Ä‰∏™ÂæàÁÆÄÁªÉÁöÑËØ≠Ë®ÄÔºåËøôÊ†∑ÂæàÂÆπÊòìÁúãËµ∞ÁúºÔºåËÄå‰∏çÁü•ÈÅìÊØè‰∏Ä‰∏™Ë°åÁöÑ @command{awk} Á®ãÂ∫è‰ª£Á†ÅÈáåÈù¢Âà∞Â∫ïÂèëÁîü‰∫Ü‰ªÄ‰πà„ÄÇ‰ΩøÁî®Êõ¥È´òÂ±ÇÁöÑ @command{awk} ÂëΩ‰ª§ÔºåË∞ÉËØïÂô®‰ΩøÂæóÊàë‰ª¨ÊúâÊú∫‰ºöÊù•Êü•ÁúãÂçï‰∏™ÁöÑÂéüÂßãÂëΩ‰ª§„ÄÇ

@node Sample Debugging Session
@section @command{gawk} Ë∞ÉËØï‰æãÂ≠ê
@cindex sample debugging session

‰∏∫‰∫ÜËß£Èáä @command{gawk} Ë∞ÉÁî®ÁöÑ‰ΩøÁî®ÔºåËÆ©Êàë‰ª¨Êù•Áúã‰∏Ä‰∏™‰æãÂ≠êÁöÑË∞ÉËØïËøáÁ®ã„ÄÇÊàë‰ª¨Âà©Áî®Êó©ÂâçÊèêÂà∞ÁöÑ POSIX uniq ÂëΩ‰ª§ÁöÑ @command{awk} ÂÆûÁé∞ÔºàÊü•Áúã @pxref{Uniq Program}ÔºâÊù•‰Ωú‰∏∫Êàë‰ª¨ÁöÑ‰æãÂ≠ê„ÄÇ

@menu
* Debugger Invocation::         How to Start the Debugger.
* Finding The Bug::             Finding the Bug.
@end menu

@node Debugger Invocation
@subsection Â¶Ç‰ΩïÂºÄÂêØË∞ÉËØïÂô®
@cindex starting the debugger
@cindex debugger, how to start

ÂºÄÂßãË∞ÉËØïÂô®Âá†‰πéÂ∞±Ë∑üÊ≠£Â∏∏ËøêË°å @command{gawk} ‰∏ÄÊ†∑ÔºåÂè™ÊòØ‰Ω†ÈúÄË¶Å‰º†ÈÄí‰∏Ä‰∏™È¢ùÂ§ñÁöÑÈÄâÈ°π @option{--debug}ÔºåÊàñËÄÖÂÖ∂ÂØπÂ∫îÁöÑÁü≠ÈÄâÈ°π @option{-D}„ÄÇÂåÖÂê´Á®ãÂ∫èÁöÑÊñá‰ª∂ÔºåÊàñËÄÖ‰ªª‰ΩïÂèóÊîØÊåÅÁöÑÂú®ÂëΩ‰ª§Ë°å‰∏äÁöÑ‰ª£Á†ÅÔºåÈÉΩ‰Ωú‰∏∫‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ @option{-f} ÈÄâÈ°πÁöÑÂèÇÊï∞„ÄÇÔºà@command{gawk} Ê≤°Êúâ‰∏∫ÂëΩ‰ª§Ë°åÁ®ãÂ∫èËÆæËÆ°Ë∞ÉËØïÔºåÂè™ÊîØÊåÅÂåÖÂê´Âú®Êñá‰ª∂ÁöÑÁ®ãÂ∫èÔºâÂú®Êàë‰ª¨ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÊàë‰ª¨ËøôÊ†∑Êù•Ë∞ÉÁî®Ë∞ÉËØïÂô®Ôºö

@example
$ @kbd{gawk -D -f getopt.awk -f join.awk -f uniq.awk -1 inputfile}
@end example

@noindent
@file{getopt.awk} ‰∏é @file{uniq.awk} ‰∏§‰∏™Á®ãÂ∫èÈÉΩÂú® @env{$AWKPATH} ÁõÆÂΩï‰∏≠„ÄÇ
ÔºàGDB ÊàñËÄÖÁ±ª‰ººË∞ÉËØïÂô®ÊúâÁªèÈ™åÁöÑÁî®Êà∑ÈÉΩÂ∫îËØ•Ê≥®ÊÑèÂà∞‰∫ÜËøô‰∏™ËØ≠Ê≥ï‰∏é‰Ω†‰πãÂâçÊâÄ‰ΩøÁî®ÁöÑËØ≠Ê≥ïÊúâ‰∏Ä‰∫õËΩªÂæÆÁöÑÂ∑ÆÂºÇ„ÄÇÂú® @command{gawk} Ë∞ÉËØïÂô®ÈáåÔºå‰Ω†Â∞ÜÂú®ÂëΩ‰ª§Ë°å‰∏ä‰º†ÈÄíÁªôËøêË°åÁ®ãÂ∫èÁöÑÂèÇÊï∞Áªô‰∫ÜË∞ÉËØïÂô®ÔºåËÄå‰∏çÊòØ‰Ωú‰∏∫Âú®Ë∞ÉËØïÊåáÁ§∫Á¨¶‰∏ã @code{run} ÂëΩ‰ª§ÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ@option{-1} ÊòØ @file{uniq.awk} ÁöÑÈÄâÈ°π„ÄÇ

‰∏çÂÉè @command{gawk} ÈÄöÂ∏∏ÊâÄÂÅöÁöÑÈÇ£Ê†∑ÔºåÁ´ãÂç≥ÂØπËæìÂÖ•Êñá‰ª∂ @file{inputfile} ÊâßË°åÁ®ãÂ∫èÔºåË∞ÉËØïÂô®‰ªÖ‰ªÖËΩΩÂÖ•ÊâÄÊúâÁöÑÁ®ãÂ∫èÊ∫ê‰ª£Á†ÅÔºåÂú®ÂÜÖÈÉ®ÁºñËØëÂÆÉ‰ª¨ÔºåÁÑ∂ÂêéÁªôÂá∫ÊèêÁ§∫Á¨¶Ôºö

@example
gawk>
@end example

@noindent
‰ªéËøôÈáåÔºå‰Ω†‰ª¨ÂèØ‰ª•ÂèëÈÄÅÂëΩ‰ª§Âà∞Ë∞ÉËØïÂô®„ÄÇÂú®Ëøô‰∏ÄÁÇπ‰∏äÔºåËøòÊ≤°Êúâ‰ª£Á†ÅË¢´ÊâßË°å„ÄÇ

@node Finding The Bug
@subsection Êü•Êâæ Bug

ÂÅáÂÖÖÊàë‰ª¨Âú®‰ΩøÁî®Ôºà‰∏Ä‰∏™ÊúâÈîôËØØÁöÑÁâàÊú¨Ôºâ@file{uniq.awk} ‰∏≠ÁöÑ ‚ÄúÂüüË∑®Ë∂ä‚ÄùÊ®°ÂºèÊó∂ÊúâÈóÆÈ¢òÔºåÁúãËµ∑Êù•ÔºåÂΩìË¶ÅË∑≥ËøáÁ¨¨‰∏Ä‰∏™ÂüüÊó∂ÔºåÂÆÉÊ≤°ÊúâÊçïËé∑Âà∞Êú¨Êù•Áõ∏ÂêåÁöÑË°åÔºåÂ¶ÇÔºö

@example
awk is a wonderful program!
gawk is a wonderful program!
@end example

ËøôÊúâÂèØËÉΩ‰ºöÂèëÁîüÔºåÂ¶ÇÊûúÊàë‰ª¨Â∞ÜÂú®ËÆ∞ÂΩï‰∏≠ÁöÑÂüüÊÉ≥ÊàêÊòØ‰∏Ä‰∏™‰ª• 0 ÂºÄÂßãÔºàC È£éÊ†ºÔºâÁºñÂè∑ÁöÑÔºåÊâÄ‰ª•Êú¨Êù•Â∫îËØ•ÂÜôÊàê‰∏ãÈù¢ÁöÑË°åÔºö

@example
clast = join(alast, fcount+1, n)
cline = join(aline, fcount+1, m)
@end example

@noindent
Êàë‰ª¨ÂÜôÊàê‰∫ÜÔºö

@example
clast = join(alast, fcount, n)
cline = join(aline, fcount, m)
@end example

Êàë‰ª¨Á¨¨‰∏Ä‰ª∂Ë¶ÅÂÅöÁöÑ‰∫ãÂ∏∏Â∏∏ÊòØË¶ÅÊ£ÄÊü•Âá∫ËøôÊ†∑ÁöÑÈóÆÈ¢òÊòØÂú®Á®ãÂ∫è‰∏≠ËÆæÁΩÆ‰∏Ä‰∏™Êñ≠ÁÇπÔºåËøôÊ†∑Êàë‰ª¨ÂèØ‰ª•Êü•ÁúãÂÆÉ‰ª¨Â¶Ç‰ΩïÂ∑•‰ΩúÔºåÂπ∂ÊçïËé∑Âà∞ÂèëÁîüÁöÑÈîôËØØ„ÄÇÂú® @file{uniq.awk} ‰∏≠ÂêàÁêÜÁöÑÊñ≠ÁÇπÊòØÂú®ÂáΩÊï∞ @code{are_equal()} ÁöÑÂºÄÂßãÂ§ÑÔºåÂú®Ëøô‰∏™ÂáΩÊï∞‰∏≠Ôºå‰ºöÂ∞ÜÂΩìÂâçË°å‰∏éÂâç‰∏Ä‰∏™Ë°åËøõË°åÊØîËæÉ„ÄÇË¶ÅËÆæÁΩÆÊñ≠ÁÇπÔºå‰ΩøÁî® @code{b}ÔºàbreakpointÔºâÂëΩ‰ª§Ôºö

@example
gawk> @kbd{b are_equal}
@print{} Breakpoint 1 set at file `awklib/eg/prog/uniq.awk', line 63
@end example

Ë∞ÉËØïÂô®ÂëäËØâÊàë‰ª¨Êñ≠ÁÇπÊâÄÂú®ÁöÑÊñá‰ª∂‰ª•ÂèäË°åÂè∑„ÄÇÁé∞Âú®ÔºåÊàë‰ª¨ËæìÂÖ• @samp{r} ÊàñËÄÖ @samp{run}ÔºåÁÑ∂ÂêéÁ®ãÂ∫è‰ºöÊâßË°åÔºåÁõ¥Âà∞ÂÖ∂Á¨¨‰∏ÄÊ¨°ÂëΩ‰ª§Êñ≠ÁÇπÔºö

@example
gawk> @kbd{r}
@print{} Starting program:
@print{} Stopping in Rule ...
@print{} Breakpoint 1, are_equal(n, m, clast, cline, alast, aline)
         at `awklib/eg/prog/uniq.awk':63
@print{} 63          if (fcount == 0 && charcount == 0)
gawk>
@end example

Áé∞Âú®ÔºåÊàë‰ª¨ÂèØ‰ª•Êü•ÁúãÁ®ãÂ∫è‰∏≠Âì™ÈáåÂá∫‰∫ÜÈóÆÈ¢ò„ÄÇÈ¶ñÂÖàÔºåËÆ©Êàë‰ª¨Áúã‰∏Ä‰∏ãÊàë‰ª¨ÊòØÊÄé‰πàÊù•Âà∞Áé∞Âú®ÁöÑ‰ΩçÁΩÆ„ÄÇÂú®ÊèêÁ§∫Á¨¶‰∏ãÔºåÊàë‰ª¨ËæìÂÖ• @samp{bt}Ôºà‚Äúbacktrace‚ÄùÁöÑÁº©ÂÜôÔºâÔºåÂàôË∞ÉËØïÂô®‰ºöËøîÂõûÂΩìÂâçÊ†àÂ∏ßÁöÑÂàóË°®Ôºö

@example
gawk> @kbd{bt}
@print{} #0  are_equal(n, m, clast, cline, alast, aline)
         at `awklib/eg/prog/uniq.awk':68
@print{} #1  in main() at `awklib/eg/prog/uniq.awk':88
@end example

ËøôÂëäËØâÊàë‰ª¨ @code{are_equal()} ÊòØÂú®‰∏ªÁ®ãÂ∫è @file{uniq.awk} Á¨¨ 88 Ë°åË∞ÉÁî®ÁöÑ„ÄÇÔºàËøôÊ≤°‰ªÄ‰πàÂ§ßÊÉäÂ∞èÊÄ™ÁöÑÔºåÂõ†Ê≠§ËøôÊòØÂú®Á®ãÂ∫è‰∏≠ÂîØ‰∏ÄË∞ÉÁî® @code{are_equal()} ÁöÑÂú∞ÊñπÔºå‰ΩÜÊòØÂú®Êõ¥Â§çÊùÇÁöÑÁ®ãÂ∫è‰∏≠Ôºå‰∫ÜËß£Ë∞ÅË∞ÉÁî®‰∫ÜÂáΩÊï∞Ôºå‰ª•ÂèäÁõ∏Â∫îÁöÑÂèÇÊï∞ÊòØÊü•ÊâæÂà∞Á®ãÂ∫èÈóÆÈ¢òÁöÑÂÖ≥ÈîÆ„ÄÇÔºâ

Áé∞Âú®ÔºåÊàë‰ª¨Â∑≤ÁªèÂú® @code{are_equal()} ‰∏≠‰∫ÜÔºåÊàë‰ª¨ÂºÄÂßãÊù•Êü•ÁúãÊüê‰∫õÂèòÈáèÁöÑÂÄº„ÄÇÂÅáËÆæÊàë‰ª¨ËæìÂÖ• @samp{p n}Ôºàp ÊòØ ‚Äúprint‚ÄùÁöÑÁº©ÂÜôÔºâ„ÄÇÊàë‰ª¨ÊúüÊúõÁúãÂà∞ @code{are_equal()} ÂèÇÊï∞ @code{n} ÁöÑÂÄº„ÄÇÂÆûÈôÖÊòØÔºåË∞ÉËØïÂô®ËøîÂõûÔºö

@example
gawk> @kbd{p n}
@print{} n = untyped variable
@end example

@noindent
Âú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå@code{n} ÊòØ‰∏Ä‰∏™Êú™ÂàùÂßãÂåñÁöÑÊú¨Âú∞ÂèòÈáèÔºåÂõ†‰∏∫ÂáΩÊï∞Ë∞ÉÁî®Êó∂Ê≤°ÊúâÊèê‰æõÁªòÁîªÂÆÉÂèÇÊï∞ÔºàÊü•Áúã @pxref{Function Calls}Ôºâ„ÄÇ

Ë¶ÅÊòæÁ§∫ÁöÑÊõ¥ÊúâÁî®ÁöÑÂèòÈáèÂ∫îËØ•ÊòØÂΩìÂâçËÆ∞ÂΩïÔºö

@example
gawk> @kbd{p $0}
@print{} $0 = "gawk is a wonderful program!"
@end example

@noindent
Âú®‰∏ÄÂºÄÂßãÔºåËøô‰∏™ÂèØËÉΩ‰ºöÊúâ‰∏ÄÁÇπÁñëÊÉëÔºåÂõ†‰∏∫ËøôÊòØÊàë‰ª¨ÁöÑÊµãËØïËæìÂÖ•ÁöÑÁ¨¨‰∫åË°åÔºåÊàë‰ª¨Êù•ÁúãÁúã @code{NR}Ôºö

@example
gawk> @kbd{p NR}
@print{} NR = 2
@end example

@noindent
Âõ†Ê≠§ÔºåÊàë‰ª¨ÁúãÂà∞ @code{are_equal()} Âè™‰ºö‰ªéÊñá‰ª∂ÁöÑÁ¨¨‰∫å‰∏™ËÆ∞ÂΩïÂºÄÂßãË∞ÉÁî®„ÄÇÂΩìÁÑ∂ÔºåËøôÊòØÂõ†‰∏∫Êàë‰ª¨ÂåÖÂê´‰∫ÜËøôÊ†∑ÁöÑ‰∏Ä‰∏™ËßÑÂàô @samp{@code{NR} == 1} Ôºö

@example
NR == 1 @{
    last = $0
    next
@}
@end example

Â•Ω‰∫ÜÔºåËÆ©Êàë‰ª¨Êü•ÁúãÂΩìÂâçÊ≠£Âú®ÊâßË°åÁöÑËßÑÂàôÔºö

@example
gawk> @kbd{p last}
@print{} last = "awk is a wonderful program!"
@end example

ÁõÆÂâçÊàë‰ª¨ÊâÄÂÅöÁöÑ‰∏ÄÂàáÈÉΩÂè™ÊòØËØ¥ÊòéÁ®ãÂ∫èÊ≠£Â¶ÇËÆ°ÂàíÁöÑÈÇ£Ê†∑ÊâßË°åÔºåÁõ¥Ëá≥ @code{are_equal()} ‰∏∫Ê≠¢ÔºåÂåÖÂê´ÂáΩÊï∞Ë∞ÉÁî®ÔºåÂõ†Ê≠§ÈóÆÈ¢ò‰∏ÄÂÆöÂá∫Âú®ÂáΩÊï∞ÂÜÖÈÉ®„ÄÇ‰∏∫‰∫ÜËøõ‰∏ÄÊ≠•Ë∞ÉÊü•ÔºåÊàë‰ª¨ÂøÖÈ°ª‚Äú‰∏ÄÊ≠•Ê≠•‚ÄùÂú∞ÊâßË°å @code{are_equal()} ÁöÑ‰ª£Á†ÅË°å„ÄÇÊàë‰ª¨Êï≤ÂÖ• @samp{n}ÔºàË°®Á§∫‚Äúnext‚ÄùÔºâÔºö

@example
gawk> @kbd{n}
@print{} 66          if (fcount > 0) @{
@end example

ËøôÂëäËØâÊàë‰ª¨Ôºå@command{gawk} Áé∞Âú®Â∑≤ÁªèÂáÜÂ§áÊâßË°åÁ¨¨ 66 Ë°åÔºåÁ°ÆÂÆöËøôÊòØÂê¶ÈúÄË¶ÅÁªôË°åÁâπÊÆäÁöÑ‚ÄúÂüüË∑®Ë∂ä‚ÄùÂ§ÑÁêÜÔºåÊ≠£Â¶ÇÂëΩ‰ª§Ë°åÈÄâÈ°π @option{-1} ÊâÄÁ§∫ÁöÑÈÇ£Ê†∑„ÄÇÔºàËØ∑Ê≥®ÊÑèÔºåÊàë‰ª¨ÊòØ‰ªéÊàë‰ª¨‰πãÂâçÊâÄÂú®ÁöÑ‰ΩçÁΩÆÔºåÁ¨¨ 63 Ë°åÔºåË∑≥Âà∞ÁõÆÂâçÊâÄÂú®ÁöÑ‰ΩçÁΩÆÔºåÂõ†‰∏∫Âú® 63 Ë°åÁöÑÊù°‰ª∂ÊòØ @samp{if (fcount == 0 && charcount == 0)}ÔºåËÄåÂÖ∂ÂÄº‰∏∫ false„ÄÇÔºâ

ÁªßÁª≠ÊâßË°å‰∏ÄÊ≠•ÔºåÊàë‰ª¨Áé∞Âú®Âà∞‰∫ÜÂ∞ÜÂΩìÂâç‰∏éÊúÄÂêéËÆ∞ÂΩïËøõË°åÂàÜÂâ≤ÁöÑÂú∞ÊñπÔºö

@example
gawk> @kbd{n}
@print{} 67              n = split(last, alast)
gawk> @kbd{n}
@print{} 68              m = split($0, aline)
@end example

Âú®Ëøô‰∏ÄÁÇπ‰∏äÔºåÊàë‰ª¨ÂæàÂ•ΩÂ•áÂú∞ÂéªÊü•ÁúãËÆ∞ÂΩïË¢´ÂàÜÂâ≤Êàê‰∫Ü‰ªÄ‰πàÔºåÊàë‰ª¨ËØïÁùÄÂéªÊü•ÁúãÔºö

@example
gawk> @kbd{p n m alast aline}
@print{} n = 5
@print{} m = untyped variable
@print{} alast = array, 5 elements
@print{} aline = untyped variable
@end example

@noindent
Ôºà@code{p} ÂëΩ‰ª§ÂèØ‰ª•ÊúâÂ§ö‰∫é‰∏Ä‰∏™ÂèÇÊï∞Ôºå‰∏é @command{awk} ÁöÑ @code{printf} ËØ≠Âè•Á±ª‰ºº„ÄÇÔºâ

‰ΩÜÊòØÔºåËøôÈáåÊúâ‰∏ÄÁÇπÂ§±Êúõ„ÄÇÊàë‰ª¨ÊâæÂà∞ÁöÑÊòØÂú®ÈáåÈù¢Êúâ 5 ‰∏™ÂÖÉÁ¥†ÁöÑ @code{alast}Ôºå@code{m} ‰∏é @code{aline} Ê≤°ÊúâÂÄºÔºåÂõ†‰∏∫Êàë‰ª¨Âú®Ë°å 68Ôºå‰ΩÜÊòØËøòÊ≤°ÊúâÊâßË°å„ÄÇËøô‰∏™‰ø°ÊÅØÂ∑≤ÁªèÂ§üÁî®‰∫ÜÔºàÊàë‰ª¨Áé∞Âú®Áü•ÈÅìÊ≤°ÊúâÂçïËØçË¢´Êó†ÊÑèÈó¥‰∏¢Êéâ‰∫ÜÔºâÔºå‰ΩÜÊòØÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Áü•ÈÅìÊï∞ÁªÑÈáåÊúâ‰ªÄ‰πàÊÄé‰πàÂäûÔºü

Á¨¨‰∏Ä‰∏™ÈÄâÊã©ÊòØ‰ΩøÁî®‰∏ãÊ†áÔºö

@example
gawk> @kbd{p alast[0]}
@print{} "0" not in array `alast'
@end example

@noindent
Oops!

@example
gawk> @kbd{p alast[1]}
@print{} alast["1"] = "awk"
@end example

Â¶ÇÊûúÊúâ 100 ‰∏™ÊàêÂëòÁöÑÊï∞ÁªÑÔºåËøôÂ∞±Â§™ÊÖ¢‰∫ÜÔºåÊâÄ‰ª•Ôºå@command{gawk} Êèê‰æõ‰∫Ü‰∏Ä‰∏™Âø´Êç∑ÊñπÂºèÔºàÂØπ‰∫éÂÖ∂‰ªñËØ≠Ë®ÄÁöÑÊóßÊÉÖÊÄÄÂ∞±‰∏çÊèê‰∫ÜÔºâÔºö

@example
gawk> @kbd{p @@alast}
@print{} alast["1"] = "awk"
@print{} alast["2"] = "is"
@print{} alast["3"] = "a"
@print{} alast["4"] = "wonderful"
@print{} alast["5"] = "program!"
@end example

ÁõÆÂâçÁúãËµ∑Êù•Ôºå‰∏ÄÂàá OKÔºåËÆ©Êàë‰ª¨ÂÜçÊâßË°å‰∏Ä‰∏§Ê≠•Ôºö

@example
gawk> @kbd{n}
@print{} 69              clast = join(alast, fcount, n)
gawk> @kbd{n}
@print{} 70              cline = join(aline, fcount, m)
@end example

Â•Ω‰∫ÜÔºåÊàë‰ª¨Â∑≤ÁªèÂà∞Ëææ‰∫ÜÈîôËØØÁöÑÂú∞ÊñπÔºàÊä±Ê≠âÁ†¥Âùè‰∫ÜÊÇ¨ÂøµÔºâ„ÄÇÂú®Êàë‰ª¨ÁöÑÂ§ßËÑë‰∏≠ÊòØ‰ªéÁ¨¨‰∫å‰∏™ÂüüÂºÄÂßãÊù•ÁîüÊàê‰∏Ä‰∏™ÂÅáËÆ∞ÂΩïÊù•ËøõË°åÊØîËæÉ„ÄÇËÄåÂ¶ÇÊûúÁ¨¨‰∏Ä‰∏™ËÆ∞ÂΩïÁºñÂè∑‰∏∫ 0ÔºåËøôÂ∞±‰ºöÂ∑•‰Ωú„ÄÇËÆ©Êàë‰ª¨ÁúãÁúãÊàë‰ª¨ÂæóÂà∞‰ªÄ‰πàÔºö

@example
gawk> @kbd{p cline clast}
@print{} cline = "gawk is a wonderful program!"
@print{} clast = "awk is a wonderful program!"
@end example

ÂòøÔºåÁúãËµ∑Êù•ÊòØ‰∏çÊòØÂæàÁÜüÊÇâÔºÅ‰ªñ‰ª¨Â∞±ÊòØÂéüÊù•ÁöÑÂÄºÔºåÊ≤°ÊúâÊîπÂèò„ÄÇÊÄùËÄÉÁâáÂàªÔºà‰∫∫ÁöÑÂ§ßËÑë‰æùÁÑ∂ÊòØÊúÄÂ•ΩÁöÑË∞ÉËØïÂ∑•ÂÖ∑ÔºâÔºåÊàë‰ª¨Áü•ÈÅìÊàë‰ª¨Â∞ëÂä†‰∫Ü 1ÔºÅ

Êàë‰ª¨ÈÄÄÂá∫Ë∞ÉËØïÂô®Ôºö

@example
gawk> @kbd{q}
@print{} The program is running. Exit anyway (y/n)? @kbd{y}
@end example

@noindent
ÁÑ∂ÂêéËøõÂÖ•ÁºñËæëÂô®ÁºñËæëÔºö

@example
clast = join(alast, fcount+1, n)
cline = join(aline, fcount+1, m)
@end example

@noindent
ÁÑ∂ÂêéÈóÆÈ¢òËß£ÂÜ≥ÔºÅ

@node List of Debugger Commands
@section ‰∏ªË¶ÅÁöÑË∞ÉËØïÂô®ÂëΩ‰ª§

@command{gawk} Ë∞ÉËØïÂô®ÂëΩ‰ª§ÂèØ‰ª•Ë¢´ÂàÜ‰∏∫‰∏ãÈù¢ÁöÑÂá†Á±ªÔºö

@itemize @value{BULLET}

@item
Êñ≠ÁÇπÊéßÂà∂

@item
ÊâßË°åÊéßÂà∂

@item
Êü•Áúã‰∏éÊõ¥ÊîπÊï∞ÊçÆ

@item
‰ΩøÁî®Ê†à

@item
Ëé∑Âèñ‰ø°ÊÅØ

@item
ÂÖ∂‰ªñ
@end itemize

ÊØè‰∏™‰∏™Á±ªÂûãÈÉΩÂú®‰∏ãÈù¢ÁöÑËäÇ‰∏≠ËøõË°åËÆ®ËÆ∫„ÄÇÂú®‰∏ãÈù¢ÁöÑÊèèËø∞‰∏≠ÔºåÂëΩ‰ª§ÔºåÂèØËÉΩË¢´Áº©ÂÜôÊòæÁ§∫Âú®Á¨¨‰∫å‰∏™ÊèèËø∞Ë°å„ÄÇË∞ÉËØïÂô®ÂëΩ‰ª§ÂêçÂ¶ÇÊûúÊ≤°Êúâ‰∫å‰πâÔºåÂàô‰πüÂèØ‰ª•Ë¢´‰∏¢ÂºÉÂêéÈù¢‰∏ÄÈÉ®ÂàÜ„ÄÇË∞ÉËØïÂô®ÊúâÂÜÖÁΩÆÁöÑËá™Âä®ÈáçÂ§çÂâç‰∏Ä‰∏™ÂëΩ‰ª§ÁöÑËÉΩÂäõÔºåÂè™ÈúÄË¶ÅËæìÂÖ•ÂõûËΩ¶ÈîÆ @kbd{Enter}„ÄÇËøôÂèØÁî®‰∫éÂëΩ‰ª§ÂàóË°®Ôºå@code{next}Ôºå@code{nexti}Ôºå@code{step}Ôºå@code{stepi}Ôºå‰ª•Âèä @code{continue} Á≠â‰∏çÂ∏¶ÂèÇÊï∞ÁöÑÂëΩ‰ª§„ÄÇ

@menu
* Breakpoint Control::          Control of Breakpoints.
* Debugger Execution Control::  Control of Execution.
* Viewing And Changing Data::   Viewing and Changing Data.
* Execution Stack::             Dealing with the Stack.
* Debugger Info::               Obtaining Information about the Program and
                                the Debugger State.
* Miscellaneous Debugger Commands:: Miscellaneous Commands.
@end menu

@node Breakpoint Control
@subsection ÊéßÂà∂Êñ≠ÁÇπ

Â¶ÇÊó©ÂâçÁúãËßÅÔºå‰Ω†Ë¶ÅÂºÄÂêØ‰∏Ä‰∏™Ë∞ÉËØïËøáÁ®ãÊó∂ÔºåË¶ÅËÄÉËôëÁöÑÁ¨¨‰∏Ä‰ª∂‰∫ãÊÉÖÊòØËÆæÁΩÆÂ•ΩÊñ≠ÁÇπÔºåÂõ†‰∏∫Á®ãÂ∫è‰ºöÂÉèÊ≤°ÊúâË∞ÉËØïÂô®‰∏ÄÊ†∑ËøêË°å‰∏ãÂéª„ÄÇÁî®‰∫éÊéßÂà∂Êñ≠ÁÇπÁöÑÂëΩ‰ª§ÊúâÔºö

@table @asis
@cindex debugger commands, @code{b} (@code{break})
@cindex debugger commands, @code{break}
@cindex @code{break} debugger command
@cindex @code{b} debugger command (alias for @code{break})
@cindex set breakpoint
@cindex breakpoint, setting
@item @code{break} [[@var{filename}@code{:}]@var{n} | @var{function}] [@code{"@var{expression}"}]
@itemx @code{b} [[@var{filename}@code{:}]@var{n} | @var{function}] [@code{"@var{expression}"}]
Â¶ÇÊûú‰∏çÂ∏¶‰ªª‰ΩïÂèÇÊï∞ÔºåÂàôÂú®ÊâÄÈÄâÊã©ÁöÑÊ†à‰∏≠ÁöÑ‰∏ã‰∏Ä‰∏™Ë¶ÅÊâßË°åÁöÑÊåá‰ª§Â§ÑËÆæÁΩÆ‰∏Ä‰∏™Êñ≠ÁÇπ„ÄÇÂèÇÊï∞ÂèØ‰ª•ÊòØÂ¶Ç‰∏ãÊ†ºÂºèÔºö

@c @asis for docbook
@c nested table
@table @asis
@item @var{n}
Âú®ÂΩìÂâçÁöÑÊ∫êÊñá‰ª∂‰∏≠ÁöÑ @var{n} Ë°åËÆæÁΩÆ‰∏Ä‰∏™Êñ≠ÁÇπ„ÄÇ

@item @var{filename}@code{:}@var{n}
Âú®Ê∫êÊñá‰ª∂ @var{filename} ÁöÑ @var{n} Ë°åËÆæÁΩÆ‰∏Ä‰∏™Êñ≠ÁÇπ„ÄÇ

@item @var{function}
Âú®ÂáΩÊï∞ @var{function}ÔºàÁ¨¨‰∏ÄÊù°Êåá‰ª§ÔºâÂÖ•Âè£Â§ÑËÆæÁΩÆ‰∏Ä‰∏™Êñ≠ÁÇπ„ÄÇ
@end table

ÊØè‰∏Ä‰∏™Êñ≠ÁÇπË¢´ËµãÁªô‰∫Ü‰∏Ä‰∏™Êï∞ÂÄºÔºåÂèØ‰ª•Áî® @code{delete} ÂëΩ‰ª§Êù•‰ªéÊñ≠ÁÇπÂàóË°®‰∏≠Âà†Èô§„ÄÇ

ÂØπ‰∫éÊñ≠ÁÇπÔºå‰Ω†ËøòÂèØ‰ª•Êèê‰æõ‰∏Ä‰∏™Êù°‰ª∂„ÄÇËøôÊòØ‰∏Ä‰∏™ @command{awk} ÁöÑË°®ËææÂºèÔºàÂåÖÂú®ÂèåÂºïÂè∑‰∏≠ÔºâÔºåËøôÊ†∑Ë∞ÉËØïÂô®ÂΩìÂà∞Âà∞Êñ≠ÁÇπÊó∂ÂèØ‰ª•ÂØπÂÖ∂Ê±ÇÂÄº„ÄÇÂ¶ÇÊûúÊù°‰ª∂‰∏∫ trueÔºåÂàôË∞ÉËØïÂô®ÂÅúÊ≠¢ÊâßË°åÔºåÁÑ∂ÂêéÊèêÁ§∫Á≠âÂæÖÂëΩ‰ª§ËæìÂÖ•„ÄÇÂê¶ÂàôÔºåÂÆÉ‰ºöÁªßÁª≠ÊâßË°åÁ®ãÂ∫è„ÄÇ

@cindex debugger commands, @code{clear}
@cindex @code{clear} debugger command
@cindex delete breakpoint at location
@cindex breakpoint at location, how to delete
@item @code{clear} [[@var{filename}@code{:}]@var{n} | @var{function}]
Â¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞ÔºåÂàôÂú®ÂΩìÂâçÁöÑÊ†à‰∏≠Âà†Èô§‰∏ã‰∏ÄÊù°Ë¶ÅÊâßË°åÂëΩ‰ª§ÁöÑÊâÄÊúâÊñ≠ÁÇπ„ÄÇÂ¶ÇÊûúÁ®ãÂ∫èÂú®Êñ≠ÁÇπ‰∏äÂÅúÊ≠¢‰∫ÜÔºåËøô‰ºöÂà†Èô§ÈÇ£‰∏™Êñ≠ÁÇπÔºåËøôÊ†∑Á®ãÂ∫èÂú®ÈÇ£‰∏™‰ΩçÁΩÆ‰∏ç‰ºöÂÜçÂÅú‰∏ãÊù•„ÄÇÂèÇÊï∞ÂèØ‰ª•Êúâ‰∏ãÈù¢ÁöÑÂΩ¢ÂºèÔºö

@c nested table
@table @asis
@item @var{n}
Âú®ÂΩìÂâçÊ∫êÊñá‰ª∂‰∏≠Âà†Èô§Âú® @var{n} Ë°å‰∏äËÆæÁΩÆÁöÑÊñ≠ÁÇπ„ÄÇ

@item @var{filename}@code{:}@var{n}
Âà†Èô§Ê∫êÊñá‰ª∂ @var{filename} Ë°å @var{n} ‰∏≠ÁöÑÊñ≠ÁÇπ„ÄÇ

@item @var{function}
Âà†Èô§Ê∫êÂáΩÊï∞ @var{function} ÁöÑÊñ≠ÁÇπ„ÄÇ
@end table

@cindex debugger commands, @code{condition}
@cindex @code{condition} debugger command
@cindex breakpoint condition
@item @code{condition} @var{n} @code{"@var{expression}"}
ÁªôÂ∑≤ÁªèÂ≠òÂú®ÁöÑÊñ≠ÁÇπÊàñËÄÖÊü•ÁúãÁÇπ @var{n} Âä†‰∏Ä‰∏™È¢ùÂ§ñÁöÑÊù°‰ª∂„ÄÇÊù°‰ª∂ÊòØ‰∏Ä‰∏™ @command{awk} Ë°®ËææÂºèÔºå@emph{Áî®ÂèåÂºïÂè∑Êã¨Ëµ∑Êù•Ôºå}ÂΩìÊñ≠ÁÇπÊàñËÄÖÊü•ÁúãÁÇπÂà∞ËææÊó∂Ôºå‰ºöÂØπÂÖ∂ËøõË°åÊ±ÇÂÄº„ÄÇÂ¶ÇÊûúÊù°‰ª∂‰∏∫ trueÔºåÂàôË∞ÉËØïÂô®‰ºöÂÅúÊ≠¢ÊâßË°åÁÑ∂ÂêéÊèêÁ§∫ÂëΩ‰ª§ËæìÂÖ•„ÄÇÂê¶ÂàôÔºåË∞ÉËØïÂô®‰ºöÁªßÁª≠ÊâßË°åÁ®ãÂ∫è„ÄÇÂ¶ÇÊûúÊù°‰ª∂Ë°®ËææÂºèÊ≤°ÊúâË¢´ÊåáÂÆöÔºåÂàôÂ∑≤ÁªèÂ≠òÂú®ÁöÑÊù°‰ª∂‰ºöË¢´Âà†Èô§ÔºàÂç≥ÔºåÊñ≠ÁÇπÊàñËÄÖÊü•ÁúãÁÇπ‰ºöË¢´ËÆæÁΩÆÊàêÊó†Êù°‰ª∂ÁöÑÔºâ„ÄÇ

@cindex debugger commands, @code{d} (@code{delete})
@cindex debugger commands, @code{delete}
@cindex @code{delete} debugger command
@cindex @code{d} debugger command (alias for @code{delete})
@cindex delete breakpoint by number
@cindex breakpoint, delete by number
@item @code{delete} [@var{n1 n2} @dots{}] [@var{n}--@var{m}]
@itemx @code{d} [@var{n1 n2} @dots{}] [@var{n}--@var{m}]
Âà†Èô§ÊåáÂÆöÁöÑÊñ≠ÁÇπÔºåÊàñËÄÖÊñ≠ÁÇπËåÉÂõ¥„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÊåáÂÆöÂèÇÊï∞ÔºåÂàôÂà†Èô§ÊâÄÊúâÁöÑÊñ≠ÁÇπ„ÄÇ

@cindex debugger commands, @code{disable}
@cindex @code{disable} debugger command
@cindex disable breakpoint
@cindex breakpoint, how to disable or enable
@item @code{disable} [@var{n1 n2} @dots{} | @var{n}--@var{m}]
Á¶ÅÁî®ÊåáÂÆöÁöÑÊñ≠ÁÇπÊàñËÄÖÊñ≠ÁÇπËåÉÂõ¥„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂ∏¶ÂèÇÊï∞ÔºåÂàôÁ¶ÅÁî®ÊâÄÊúâÁöÑÊñ≠ÁÇπ„ÄÇ

@cindex debugger commands, @code{e} (@code{enable})
@cindex debugger commands, @code{enable}
@cindex @code{enable} debugger command
@cindex @code{e} debugger command (alias for @code{enable})
@cindex enable breakpoint
@item @code{enable} [@code{del} | @code{once}] [@var{n1 n2} @dots{}] [@var{n}--@var{m}]
@itemx @code{e} [@code{del} | @code{once}] [@var{n1 n2} @dots{}] [@var{n}--@var{m}]
ÂêØÁî®ÊåáÂÆöÁöÑÊñ≠ÁÇπÊàñËÄÖËåÉÂõ¥ÂÜÖÁöÑÊñ≠ÁÇπ„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞ÔºåÂàôÂêØÁî®ÊâÄÊúâÁöÑÊñ≠ÁÇπ„ÄÇ‰Ω†‰πüÂèØ‰ª•ÈÄâÊã©ÊÄßÂú∞ÂÆö‰πâÂ¶Ç‰ΩïÊù•ÊÅ¢Â§çÊñ≠ÁÇπÔºö

@c nested table
@table @code
@item del
‰∏¥Êó∂ÂêØÁî®Êñ≠ÁÇπÔºåÁÑ∂ÂêéÁ®ãÂ∫èÂú®Ê≠§ÂÅúÊ≠¢Êó∂Âà†Èô§ÊØè‰∏™Êñ≠ÁÇπ„ÄÇ

@item once
‰∏¥Êó∂ÂêØÁî®Êñ≠ÁÇπÔºåÁÑ∂ÂêéÁ®ãÂ∫èÂú®Ê≠§ÂÅúÊ≠¢Êó∂Á¶ÅÁî®ÊØè‰∏™Êñ≠ÁÇπ„ÄÇ
@end table

@cindex debugger commands, @code{ignore}
@cindex @code{ignore} debugger command
@cindex ignore breakpoint
@item @code{ignore} @var{n} @var{count}
ÂøΩÁï•Êñ≠ÁÇπ @var{n} ÂêéÈù¢ÂëΩ‰∏≠ÁöÑ @var{count} Ê¨°„ÄÇ

@cindex debugger commands, @code{t} (@code{tbreak})
@cindex debugger commands, @code{tbreak}
@cindex @code{tbreak} debugger command
@cindex @code{t} debugger command (alias for @code{tbreak})
@cindex temporary breakpoint
@item @code{tbreak} [[@var{filename}@code{:}]@var{n} | @var{function}]
@itemx @code{t} [[@var{filename}@code{:}]@var{n} | @var{function}]
ËÆæÁΩÆ‰∏¥Êó∂Êñ≠ÁÇπÔºàÂè™ÂêØÁî®‰∏ÄÊ¨°Ôºâ„ÄÇÂèÇÊï∞‰∏é @code{break} ‰∏ÄÊ†∑„ÄÇ
@end table

@node Debugger Execution Control
@subsection ÊéßÂà∂ÊâßË°å

Áé∞Âú®Ôºå‰Ω†ÁöÑÊñ≠ÁÇπÂ∑≤ÁªèÂáÜÂ§áÂ•Ω‰∫ÜÔºå‰Ω†ÂèØ‰ª•ÂºÄÂßãËøêË°åÁ®ãÂ∫èÔºåÁÑ∂ÂêéËßÇÂØüÂÆÉÁöÑË°å‰∏∫„ÄÇÊúâÂ§ö‰∏™ÂëΩ‰ª§Áî®Êù•ÊéßÂà∂Á®ãÂ∫èÁöÑÊâßË°åÔºå‰πãÂâçÊàë‰ª¨Â∑≤ÁªèÁúãËøáÔºö

@table @asis
@cindex debugger commands, @code{commands}
@cindex @code{commands} debugger command
@cindex debugger commands, @code{silent}
@cindex @code{silent} debugger command
@cindex debugger commands, @code{end}
@cindex @code{end} debugger command
@cindex breakpoint commands
@cindex commands to execute at breakpoint
@item @code{commands} [@var{n}]
@itemx @code{silent}
@itemx @dots{}
@itemx @code{end}
ËÆæÁΩÆ‰∏Ä‰∏™ÂëΩ‰ª§ÂàóË°®ÔºåÂΩìÂú®Êñ≠ÁÇπÊàñËÄÖÊü•ÁúãÁÇπÂ§ÑÂÅúÊ≠¢Êó∂‰ºöË¢´ÊâßË°å„ÄÇ@var{n} ÊòØÊñ≠ÁÇπÊàñËÄÖÊü•ÁúãÁÇπÁºñÂè∑„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÁºñÂè∑ÔºåÂàô‰ºö‰ΩøÁî®ÊúÄÂêé‰∏Ä‰∏™„ÄÇÂêéÈù¢ÁöÑÂëΩ‰ª§Ôºå‰ªé‰∏ã‰∏ÄË°åÂºÄÂßãÔºåÁÑ∂ÂêéÂú® @code{end} ÂëΩ‰ª§Â§ÑÁªìÊùü„ÄÇÂ¶ÇÊûúÂëΩ‰ª§ @code{silent} Âú®ÂàóË°®‰∏≠ÔºåÂàôÈÄöÂ∏∏ÁöÑÂú®Êñ≠ÁÇπÂÅúÊ≠¢Â§ÑÁöÑÊ∂àÊÅØ‰ª•ÂèäÊ∫ê‰ª£Á†ÅÂ∞±‰ºöË¢´ÊâìÂç∞„ÄÇÂú®ÂàóË°®‰∏≠ÁöÑÊâÄÊúâÂëΩ‰ª§Â¶ÇÊûúÁªßÁª≠ÊâßË°å‰ª£Á†ÅÔºàÂ¶Ç @code{continue}Ôºâ‰ºöÁªìÊùüÂàóË°®Ôºà‰∏Ä‰∏™ÈöêÂºèÁöÑ @code{end}ÔºâÔºåÂêéÈù¢ÁöÑÂëΩ‰ª§‰ºöË¢´ÂøΩÁï•Êéâ„ÄÇÂ¶ÇÔºö

@example
gawk> @kbd{commands}
> @kbd{silent}
> @kbd{printf "A silent breakpoint; i = %d\n", i}
> @kbd{info locals}
> @kbd{set i = 10}
> @kbd{continue}
> @kbd{end}
gawk>
@end example

@cindex debugger commands, @code{c} (@code{continue})
@cindex debugger commands, @code{continue}
@cindex continue program, in debugger
@item @code{continue} [@var{count}]
@itemx @code{c} [@var{count}]
ÁªßÁª≠ÊâßË°åÁ®ãÂ∫è„ÄÇÂ¶ÇÊûú‰ªéÊñ≠ÁÇπÂ§ÑÁªßÁª≠ÔºåËÄåÊåáÂÆö‰∫Ü @var{count}ÔºåÂàôÂøΩÁï•ÊâÄÂú®Â§ÑÁöÑÊñ≠ÁÇπÂêéÈù¢ÁöÑ @var{count} Ê¨°ÂëΩ‰∏≠„ÄÇÁõ¥Âà∞ÊâÄÈÄâÊã©ÁöÑÂ∏ßÁªìÊùü„ÄÇÂπ∂ÊâìÂç∞ËøîÂõûÂÄº„ÄÇ

@cindex debugger commands, @code{finish}
@cindex @code{finish} debugger command
@item @code{finish}
ÊâßË°å‰ª£Á†ÅÁõ¥Âà∞ÊâÄÈÄâÊã©ÁöÑÂ∏ßËøîÂõûÔºåÂπ∂ÊâìÂç∞ËøîÂõûÂÄº„ÄÇ

@cindex debugger commands, @code{n} (@code{next})
@cindex debugger commands, @code{next}
@cindex @code{next} debugger command
@cindex @code{n} debugger command (alias for @code{next})
@cindex single-step execution, in the debugger
@item @code{next} [@var{count}]
@itemx @code{n} [@var{count}]
ÁªßÁª≠ÊâßË°å‰∏ã‰∏ÄË°åÊ∫ê‰ª£Á†ÅÔºåÂáΩÊï∞Ë∞ÉÁî®‰∏ÄÊ¨°ÂàíËøá„ÄÇÂèÇÊï∞ @var{count} ÊéßÂà∂ÈáçÂ§çÂ§öÂ∞ëÊ¨°Ôºå‰∏é @code{step} ‰∏ÄÊ†∑„ÄÇ

@cindex debugger commands, @code{ni} (@code{nexti})
@cindex debugger commands, @code{nexti}
@cindex @code{nexti} debugger command
@cindex @code{ni} debugger command (alias for @code{nexti})
@item @code{nexti} [@var{count}]
@itemx @code{ni} [@var{count}]
ÊâßË°å 1 ‰∏™ÊàñËÄÖ @var{count} ‰∏™Êåá‰ª§ÔºåÂπ∂Ë∂äËøáÂáΩÊï∞Ë∞ÉÁî®„ÄÇ

@cindex debugger commands, @code{return}
@cindex @code{return} debugger command
@item @code{return} [@var{value}]
ÂèñÊ∂àÂáΩÊï∞Ë∞ÉÁî®„ÄÇÂ¶ÇÊûú @var{value}Ôºà‰∏Ä‰∏™Â≠ó‰∏≤ÊàñËÄÖÊï∞ÂÄºÔºâË¢´ÊåáÂÆö‰∫ÜÔºåÂàôÂÆÉ‰ºö‰Ωú‰∏∫ÂáΩÊï∞ÁöÑËøîÂõûÂÄº„ÄÇÂ¶ÇÊûúÊòØÂú®‰∏çÊòØÊúÄÂÜÖÂ±ÇÔºàÂΩìÂâçÁöÑÊâßË°åÂáΩÊï∞ÔºåÂç≥Â∏ß 0 ÔºâÁöÑÂ∏ß‰∏≠‰ΩøÁî®Ôºå‰ºöÂèñÊ∂àÊâÄÊúâÊúÄÂÜÖÂ±ÇÁöÑÂ∏ßÔºåÂåÖÊã¨ÊâÄÂú®ÁöÑÂ∏ßÔºåËØ•Â∏ßÁöÑË∞ÉÁî®ËÄÖ‰ºöÊàê‰∏∫ÊúÄÂÜÖÂ±ÇÂ∏ß„ÄÇ

@cindex debugger commands, @code{r} (@code{run})
@cindex debugger commands, @code{run}
@cindex @code{run} debugger command
@cindex @code{r} debugger command (alias for @code{run})
@item @code{run}
@itemx @code{r}
ÂºÄÂßã/ÈáçÊñ∞ÂºÄÂßãÁ®ãÂ∫èÁöÑÊâßË°å„ÄÇÂΩìÈáçÊñ∞ÂºÄÂßãÊó∂ÔºåË∞ÉËØïÂô®‰ºö‰øùÁïôÂΩìÂâçÁöÑÊñ≠ÁÇπÔºåÊü•ÁúãÁÇπ‰ª•ÂèäÂëΩ‰ª§ÂéÜÂè≤ÔºåËá™Âä®ÊòæÁ§∫ÂèòÈáèÔºå‰ª•ÂèäË∞ÉËØïÂô®ÈÄâÈ°π„ÄÇ

@cindex debugger commands, @code{s} (@code{step})
@cindex debugger commands, @code{step}
@cindex @code{step} debugger command
@cindex @code{s} debugger command (alias for @code{step})
@item @code{step} [@var{count}]
@itemx @code{s} [@var{count}]
ÁªßÁª≠ÊâßË°åÁõ¥Âà∞ÊéßÂà∂ÊµÅÂà∞Âà∞ÂΩìÂâçÂ∏ßÁöÑÊ∫ê‰ª£Á†ÅË°åÁöÑ‰∏çÂêå‰ΩçÁΩÆÔºåÂπ∂ËøõÂÖ•ËØ•Ë°åË∞ÉÁî®ÁöÑÂáΩÊï∞‰∏≠„ÄÇÂ¶ÇÊûúÂèÇÊï∞ @var{count} Ë¢´ÊåáÂÆö‰∫ÜÔºåÂàôË°®Á§∫Âú®ÂÅúÊ≠¢ÂâçÂçïÁã¨ÊâßË°åÂ§öÂ∞ëÊ¨°ÔºåÈô§ÈùûÂÆÉÈÅáÂà∞‰∫ÜÊñ≠ÁÇπÊàñËÄÖÊü•ÁúãÁÇπ„ÄÇ

@cindex debugger commands, @code{si} (@code{stepi})
@cindex debugger commands, @code{stepi}
@cindex @code{stepi} debugger command
@cindex @code{si} debugger command (alias for @code{stepi})
@item @code{stepi} [@var{count}]
@itemx @code{si} [@var{count}]
ÊâßË°å 1 ‰∏™ÔºàÊàñËÄÖ @var{count}Ôºâ‰∏™Êåá‰ª§ÔºåÂπ∂ËøõÂÖ•ÂáΩÊï∞Ë∞ÉÁî®‰∏≠„ÄÇÔºà‰∏∫‰∫ÜËØ¥Êòé‚ÄúÊåá‰ª§‚ÄùÁöÑÂê´‰πâÔºåÊü•ÁúãÂú® @ref{Miscellaneous Debugger Commands} ‰∏≠ @code{dump} ‰∏ãÁöÑËæìÂá∫„ÄÇÔºâ

@cindex debugger commands, @code{u} (@code{until})
@cindex debugger commands, @code{until}
@cindex @code{until} debugger command
@cindex @code{u} debugger command (alias for @code{until})
@item @code{until} [[@var{filename}@code{:}]@var{n} | @var{function}]
@itemx @code{u} [[@var{filename}@code{:}]@var{n} | @var{function}]
Â¶ÇÊûúÊ≤°Êúâ‰ªª‰ΩïÂèÇÊï∞ÔºåÊâßË°åÂà∞ÂΩìÂâçÂ∏ßÂΩìÂâçË°åÁöÑ‰∏ã‰∏ÄË°å„ÄÇÂ¶ÇÊûúÊúâÂèÇÊï∞ÔºåÂàôÊåÅÁª≠ÊâßË°åÂà∞ÊåáÂÆöÁöÑ‰ΩçÁΩÆÔºåÊàñËÄÖÁõ¥Âà∞ÂΩìÂâçÂ∏ßËøîÂõû„ÄÇ
@end table

@node Viewing And Changing Data
@subsection Êü•Áúã‰∏éÊõ¥ÊîπÊï∞ÊçÆ

@command{gawk} ‰∏≠Áî®‰∫éÊü•ÁúãÂèäÊõ¥ÊîπÂèòÈáèÁöÑÂëΩ‰ª§ÊúâÔºö

@table @asis
@cindex debugger commands, @code{display}
@cindex @code{display} debugger command
@item @code{display} [@var{var} | @code{$}@var{n}]
Â∞ÜÂèòÈáè @var{var} ÊàñËÄÖÂüü @code{$@var{n}} Ê∑ªÂä†Âà∞ÊòæÁ§∫ÂàóË°®‰∏≠„ÄÇÂèòÈáèÁöÑÂÄºÊàñËÄÖÂüüÁöÑÂÄºÂú®Á®ãÂ∫èÊØèÊ¨°ÂÅúÊ≠¢ÈÉΩ‰ºöË¢´ÊòæÁ§∫„ÄÇÊØè‰∏™Âä†ÂÖ•Âà∞ÂàóË°®‰∏≠ÁöÑÂàóË°®ÈÉΩÈÄöËøá‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑÊï∞Â≠óÊù•Âå∫Âà´Ôºö

@example
gawk> @kbd{display x}
@print{} 10: x = 1
@end example

@noindent
ËøôÊòæÁ§∫‰∫ÜË¢´ËµãÂÄºÁöÑÈ°πÔºåÂèòÈáèÂêç‰ª•ÂèäÂÖ∂ÂèäÂΩìÂâçÁöÑÂÄº„ÄÇÂ¶ÇÊûúÊòæÁ§∫ÂèòÈáèÊåáÂêë‰∫ÜÂáΩÊï∞ÁöÑÂèÇÊï∞ÔºåÂÆÉ‰ºöÂú®ÊâßË°åÂà∞Ê≤°ÊúâËøô‰∏™ÂèòÈáèÂêçÁöÑ‰∏ä‰∏ãÊñáÊó∂ÈªòÈªòÂú∞Â∞ÜÂÆÉ‰ªéÊòæÁ§∫ÂàóË°®‰∏≠Âà†Èô§„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞Ôºå@code{display} ‰ºöÊòæÁ§∫ÂàóË°®‰∏≠ÁöÑÈ°πÁöÑÂΩìÂâçÂÄº„ÄÇ

@cindex debugger commands, @code{eval}
@cindex @code{eval} debugger command
@cindex evaluate expressions, in debugger
@item @code{eval "@var{awk statements}"}
ÂØπ @var{awk statements} Âú®ÊâßË°åÁ®ãÂ∫è‰∏≠ÁöÑ‰∏ä‰∏ãÊñá‰∏≠ËøõË°åÊ±ÇÂÄº„ÄÇ‰Ω†ÂèØ‰ª•ÂÅö‰ªª‰ΩïÁöÑ @command{awk} Á®ãÂ∫èÂèØ‰ª•ÂÅöÁöÑ‰∫ãÊÉÖÔºöËµãÂÄºÁªòÁîªÂèòÈáèÔºåË∞ÉÁî®ÂáΩÊï∞Á≠âÁ≠â„ÄÇ

@item @code{eval} @var{param}, @dots{}
@itemx @var{awk statements}
@itemx @code{end}
@code{eval} Ëøô‰∏™ÂΩ¢ÂºèÁöÑÊ±ÇÂÄºÁ±ª‰ººÔºå‰ΩÜÊòØÂèØ‰ª•ËÆ©‰Ω†ÂÆö‰πâÂ≠òÂú® @var{awk statements} ‰∏ä‰∏ãÊñá‰∏≠‚ÄúÊú¨Âú∞ÂèòÈáè‚ÄùÔºåËÄå‰∏çÊòØ‰ΩøÁî®Áî±Á®ãÂ∫èÂÆö‰πâÁöÑÂèòÈáèÊàñËÄÖÂáΩÊï∞ÂèÇÊï∞„ÄÇ

@cindex debugger commands, @code{p} (@code{print})
@cindex debugger commands, @code{print}
@cindex @code{print} debugger command
@cindex @code{p} debugger command (alias for @code{print})
@cindex print variables, in debugger
@item @code{print} @var{var1}[@code{,} @var{var2} @dots{}]
@itemx @code{p} @var{var1}[@code{,} @var{var2} @dots{}]
ÊâìÂç∞ @command{gawk} ÂèòÈáèÊàñËÄÖÂüüÁöÑÂÄº„ÄÇÂüüÂøÖÈ°ªÊòØÈÄöËøáÂ∏∏ÈáèÊù•ÂèÇËÄÉÔºö

@example
gawk> @kbd{print $3}
@end example

@noindent
ËøôÊâìÂç∞ËæìÂÖ•ËÆ∞ÂΩï‰∏≠ÁöÑÁ¨¨‰∏â‰∏™ÂüüÔºàÂ¶ÇÊûúÊåáÂÆöÁöÑÂüü‰∏çÂ≠òÂú®ÔºåÂÆÉ‰ºöÊâìÂç∞ @samp{Null field}Ôºâ„ÄÇÂèòÈáèÂèØ‰ª•ÊòØÊï∞ÁªÑÂÖÉÁ¥†Ôºå‰∏ãÊ†áÊòØÂ∏∏ÈáèÂ≠ó‰∏≤„ÄÇ‰∏∫‰∫ÜÊâìÂç∞Êï∞ÁªÑÂÜÖÂÆπÔºåÂú®ÂêçÂ≠óÁöÑÂâçÈù¢Âä†‰∏Ä‰∏™ @samp{@@} Á¨¶Âè∑Ôºö

@example
gawk> @kbd{print @@a}
@end example

@noindent
Ëøô‰ºöÊâìÂç∞Á¥¢Âºï‰ª•ÂèäÊâÄÊúâÂú®Êï∞ÁªÑ @code{a} ‰∏≠Áõ∏Â∫îÂÖÉÁ¥†ÁöÑÂÄº„ÄÇ

@cindex debugger commands, @code{printf}
@cindex @code{printf} debugger command
@item @code{printf} @var{format} [@code{,} @var{arg} @dots{}]
ÊâìÂç∞Ê†ºÂºèÂºèÁöÑÊñáÊú¨„ÄÇÊ†ºÂºè @var{format} ÂåÖÂê´ËΩ¨‰πâÂ∫èÂàóÔºåÂ¶Ç @samp{\n}ÔºàÊü•Áúã @pxref{Escape Sequences}Ôºâ„ÄÇÂ¶ÇÊûú‰∏çÊåáÂÆöÔºå‰∏ç‰ºöÊâìÂç∞Êç¢Ë°åÁ¨¶„ÄÇ

@cindex debugger commands, @code{set}
@cindex @code{set} debugger command
@cindex assign values to variables, in debugger
@item @code{set} @var{var}@code{=}@var{value}
Â∞Ü‰∏Ä‰∏™Â∏∏ÈáèÔºàÊï∞ÂÄºÊàñËÄÖÂ≠ó‰∏≤ÔºâÂÄºËµãÂÄºÁªòÁîª‰∏Ä‰∏™ @command{awk} ÂèòÈáèÊàñËÄÖÂüü„ÄÇÂ≠ó‰∏≤ÂÄºÂøÖÈ°ªÁî®ÂèåÂºïÂè∑ÂåÖËµ∑Êù•Ôºà@code{"}@dots{}@code{"}Ôºâ„ÄÇ

‰Ω†‰πüÂèØ‰ª•ËÆæÁΩÆ @command{awk} ÁöÑÁâπÊÆäÂèòÈáèÔºåÂÉè @code{FS}Ôºå@code{NF}Ôºå@code{NR} Á≠âÁ≠â„ÄÇ

@cindex debugger commands, @code{w} (@code{watch})
@cindex debugger commands, @code{watch}
@cindex @code{watch} debugger command
@cindex @code{w} debugger command (alias for @code{watch})
@cindex set watchpoint
@item @code{watch} @var{var} | @code{$}@var{n} [@code{"@var{expression}"}]
@itemx @code{w} @var{var} | @code{$}@var{n} [@code{"@var{expression}"}]
Â∞ÜÂèòÈáè @var{var} ÊàñËÄÖÂüü @code{$@var{n}} Âä†Âà∞Êü•ÁúãÂàóË°®‰∏≠„ÄÇË∞ÉËØïÂô®‰ºöÂú®ÂèòÈáèÊàñËÄÖÂüüÁöÑÂÄºË¢´ÊîπÂèòÊó∂ÂÅú‰∏ãÊù•„ÄÇÊØè‰∏™‰∏Ä‰∏™Êü•ÁúãÂàóË°®È°πÈÉΩËµã‰∫à‰∫Ü‰∏Ä‰∏™Êï∞ÂÄºÔºåËøôÊ†∑ÂèØ‰ª•Áî®‰∏≠ @code{unwatch} ÂëΩ‰ª§‰∏≠Êù•ÂÆÉ‰ªéÊü•ÁúãÂàóË°®‰∏≠Âà†Èô§„ÄÇ

‰Ω†ÂèØ‰ª•ÁªòÁîªÊü•ÁúãÁÇπÈôÑÂä†‰∏Ä‰∏™Êù°‰ª∂„ÄÇËøôÊòØ‰∏Ä‰∏™ @command{awk} Ë°®ËææÂºèÔºàÂåÖÂú®ÂèåÂºïÂè∑‰∏≠ÔºâÔºåËøôÊ†∑ÂΩìÊü•ÁúãÁÇπË¢´ÂëΩ‰∏≠Êó∂ÔºåË∞ÉËØïÂô®‰ºöÂØπÂÖ∂ËøõË°åÊ±ÇÂÄº„ÄÇÂ¶ÇÊûúÊù°‰ª∂‰∏∫ trueÔºåÂàôË∞ÉËØïÂô®‰ºöÂÅúÊ≠¢ÊâßË°åÔºåÁÑ∂ÂêéÊèêÁ§∫ÂëΩ‰ª§ËæìÂÖ•„ÄÇÂê¶ÂàôÔºå@command{gawk} ‰ºöÁªßÁª≠ÊâßË°åÂëΩ‰ª§„ÄÇ

@cindex debugger commands, @code{undisplay}
@cindex @code{undisplay} debugger command
@cindex stop automatic display, in debugger
@item @code{undisplay} [@var{n}]
Âà†Èô§ÁºñÂè∑‰∏∫ @var{n} ÁöÑËá™Âä®ÊòæÁ§∫ÂàóË°®È°πÔºàÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõÂèÇÊï∞ÔºåÂàôÂà†Èô§ÊâÄÊúâÁöÑÈ°πÔºâ„ÄÇ

@cindex debugger commands, @code{unwatch}
@cindex @code{unwatch} debugger command
@cindex delete watchpoint
@item @code{unwatch} [@var{n}]
Âà†Èô§ÁºñÂè∑‰∏∫ @var{n} ÁöÑÊü•ÁúãÂàóË°®‰∏≠ÁöÑÈ°πÔºàÂ¶ÇÊûúÊ≤°ÊúâÊèê‰æõÂèÇÊï∞ÔºåÂàôÂà†Èô§ÊâÄÊúâÁöÑÈ°πÔºâ„ÄÇ

@end table

@node Execution Stack
@subsection Á®ãÂ∫èÊ†à

Êó†ËÆ∫‰ΩïÊó∂‰Ω†ËøêË°å‰∏Ä‰∏™ÂåÖÂê´‰ªªÊÑèÂáΩÊï∞Ë∞ÉÁî®ÁöÑÁ®ãÂ∫èÔºå@command{gawk} ÈÉΩ‰ºö‰øùÊåÅ‰∏Ä‰∏™ÊâÄÊúâÂáΩÊï∞Ë∞ÉÁî®ÁöÑÊ†àÔºå‰∏ÄÁõ¥Âêë‰∏äÂà∞Ê≠£Âú®ÊâßË°åÁöÑÁ®ãÂ∫èÂ§Ñ„ÄÇ‰Ω†ÂèØ‰ª•Êü•Áúã‰Ω†‰Ω†Â¶Ç‰ΩïÂà∞ËææÁõÆÂâçÊâÄÂú®Âà∞‰ΩçÁΩÆÔºå‰πüÂèØ‰ª•ÊåâÁÖßÊ†àÁöÑË∑ØÂæÑÊù•ÁßªÂä®‰ª•Êù•Êü•ÁúãÂú®‰Ω†ÊâÄÂú®ÁöÑË¢´Ë∞ÉÁî®ÁöÑÂáΩÊï∞‰∏≠‰∫ã‰ª∂ÁöÑÁä∂ÊÄÅ„ÄÇ‰∏ãÈù¢ÁöÑÂëΩ‰ª§Êù•ÂÆûÁé∞ËøôÊ†∑ÁöÑÂäüËÉΩÔºö

@table @asis
@cindex debugger commands, @code{bt} (@code{backtrace})
@cindex debugger commands, @code{backtrace}
@cindex debugger commands, @code{where} (@code{backtrace})
@cindex @code{backtrace} debugger command
@cindex @code{bt} debugger command (alias for @code{backtrace})
@cindex @code{where} debugger command
@cindex @code{where} debugger command (alias for @code{backtrace})
@cindex call stack, display in debugger
@cindex traceback, display in debugger
@item @code{backtrace} [@var{count}]
@itemx @code{bt} [@var{count}]
@itemx @code{where} [@var{count}]
ÊâìÂç∞ÊâÄÊúâÂáΩÊï∞Ë∞ÉÁî®ÔºàÊ†àÂ∏ßÔºâÁöÑË∑ØÂæÑÔºåÊàñËÄÖÂú® @var{count} > 0 Êó∂ÊúÄÂÜÖÂ±Ç @var{count} ‰∏™Ê†àÂ∏ß„ÄÇÂ¶ÇÊûú @var{count} < 0ÔºåÂàôÊâìÂç∞ÊúÄÂ§ñÂ±ÇÁöÑ @var{count} ‰∏™Ê†àÂ∏ß„ÄÇË∑ØÂæÑÊòæÁ§∫ÊØè‰∏Ä‰∏™ÂáΩÊï∞ÁöÑÂêçÂ≠ó‰ª•ÂèäÂèÇÊï∞ÔºåËøòÊúâ@value{FN}‰∏éË°åÂè∑„ÄÇ@code{backtrace} Âà´Âêç @code{where} Áî®‰∫éÂêëÈïøÊúü‰ΩøÁî® GDB ÁöÑÁî®Êà∑Êèê‰æõÊ†àË∑ØÂæÑÔºå‰ªñ‰ª¨ÂèØËÉΩ‰ºö‰ΩøÁî®Ëøô‰∏™ÂëΩ‰ª§„ÄÇ

@cindex debugger commands, @code{down}
@cindex @code{down} debugger command
@item @code{down} [@var{count}]
Âêë‰∏ãÊúÄÂÜÖÂ±ÇÁöÑÂ∏ßÁßªÂä® @var{count}ÔºàÈªòËÆ§‰∏∫ 1Ôºâ‰∏™Â∏ß„ÄÇÁÑ∂ÂêéÈÄâÊã©Âπ∂ÊâìÂç∞Ëøô‰∏™Â∏ß„ÄÇ

@cindex debugger commands, @code{f} (@code{frame})
@cindex debugger commands, @code{frame}
@cindex @code{frame} debugger command
@cindex @code{f} debugger command (alias for @code{frame})
@item @code{frame} [@var{n}]
@itemx @code{f} [@var{n}]
ÈÄâÊã©Âπ∂ÊâìÂç∞Ê†àÂ∏ß @var{n}„ÄÇÂ∏ß 0 ÊòØÂΩìÂâçÊ≠£Âú®Ë¢´ÊâßË°åÁöÑÔºåÊàñËÄÖ@dfn{ÊúÄÂÜÖÂ±Ç}Â∏ßÔºàÂáΩÊï∞Ë∞ÉÁî®ÔºâÔºåÂ∏ß 1 ÊòØË∞ÉÁî®ÊúÄÂÜÖÂ±ÇÁöÑÂ∏ß„ÄÇÊúÄÈ´òÂ±ÇÁöÑÂ∏ßÊòØ‰∏ªÁ®ãÂ∫è„ÄÇË¢´ÊâìÂç∞ÁöÑ‰ø°ÊÅØÂåÖÊã¨Â∏ßÂè∑ÔºåÂáΩÊï∞‰ª•ÂèäÂèÇÊï∞ÂêçÔºåÊ∫êÊñá‰ª∂‰∏éË°åÂè∑„ÄÇ

@cindex debugger commands, @code{up}
@cindex @code{up} debugger command
@item @code{up} [@var{count}]
Âêë‰∏äÊúÄÂ§ñÂ±ÇÁßªÂä® @var{count}ÔºàÈªòËÆ§‰∏∫ 1ÔºâÂ∏ß„ÄÇÁÑ∂ÂêéÈÄâÊã©Âπ∂ÊâìÂç∞Áõ∏Â∫îÁöÑÂ∏ß„ÄÇ
@end table

@node Debugger Info
@subsection Ëé∑ÂèñÁ®ãÂ∫è‰∏éË∞ÉËØïÂô®Áä∂ÊÄÅ‰ø°ÊÅØ

Èô§‰∫ÜÊü•ÁúãÂèòÈáèÁöÑÂÄºÂ§ñÔºå‰πüÂ∏∏Â∏∏ÈúÄË¶ÅÊù•Ëé∑ÂèñÂÖ∂‰ªñÂÖ≥‰∫éÁ®ãÂ∫èÁä∂ÊÄÅÁöÑ‰ø°ÊÅØÔºå‰ª•ÂèäË∞ÉËØïÁéØÂ¢ÉÊú¨Ë∫´ÁöÑ‰ø°ÊÅØ„ÄÇ@command{gawk} Ë∞ÉËØïÂô®Êúâ‰∏Ä‰∏™ÂëΩ‰ª§Êù•Êèê‰æõËøôÊ†∑ÁöÑ‰ø°ÊÅØÔºåÈùûÂ∏∏ÊÅ∞ÂΩìÂú∞Âè´ÂÅö @code{info}„ÄÇ@code{info} ‰∏éÂ§ö‰∏™ÂèÇÊï∞‰∏≠ÁöÑ‰∏Ä‰∏™‰ΩøÁî®ÔºåÂèØ‰ª•ÂëäËØâ‰Ω†ÊÉ≥Ë¶ÅÁöÑÂáÜÂ§áÁöÑ‰ø°ÊÅØÔºö

@table @asis
@cindex debugger commands, @code{i} (@code{info})
@cindex debugger commands, @code{info}
@cindex @code{info} debugger command
@cindex @code{i} debugger command (alias for @code{info})
@item @code{info} @var{what}
@itemx @code{i} @var{what}
@var{what} Â∫îËØ•ÊòØ‰∏ãÂú®ÂÖ∂‰∏≠‰πã‰∏ÄÁöÑÂÄºÔºö

@c nested table
@table @code
@item args
@cindex show function arguments, in debugger
ÂàóÂá∫ÊâÄÈÄâÊã©ÁöÑÂ∏ßÁöÑÂèÇÊï∞„ÄÇ

@item break
@cindex show breakpoints
ÂàóÂá∫ÂΩìÂâçÁöÑÊâÄÊúâÊñ≠ÁÇπ„ÄÇ

@item display
@cindex automatic displays, in debugger
ÂàóÂá∫Ëá™Âä®ÊòæÁ§∫ÁöÑÊâÄÊúâÈ°π„ÄÇ

@item frame
@cindex describe call stack frame, in debugger
Ë¢´ÈÄâÊã©ÁöÑÂ∏ßÁöÑÊèèËø∞„ÄÇ

@item functions
@cindex list function definitions, in debugger
ÂàóÂá∫ÊâÄÊúâÁöÑÂáΩÊï∞ÂÆö‰πâÔºåÂåÖÊã¨Ê∫ê@value{FN}‰ª•ÂèäË°åÂè∑„ÄÇ

@item locals
@cindex show local variables, in debugger
ÂàóÂá∫Ë¢´ÈÄâÊã©Â∏ßÁöÑÊú¨Âú∞ÂèòÈáèÂàóË°®„ÄÇ

@item source
@cindex show name of current source file, in debugger
ÊâìÂç∞ÂΩìÂâçÊ∫êÊñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇÊØèÊ¨°Á®ãÂ∫èÂÅúÊ≠¢Êó∂ÔºåÂΩìÂâçÁöÑÊ∫êÊñá‰ª∂ÊòØÂåÖÂê´ÂΩìÂâçÊåá‰ª§ÁöÑÊñá‰ª∂„ÄÇÂΩìË∞ÉÁî®Á¨¨‰∏ÄÊ¨°ÂºÄÂßãÊó∂ÔºåÂΩìÂâçÁöÑÊ∫êÊñá‰ª∂ÊòØÈÄöËøá @option{-f} ÊåáÂÆöÁöÑÊñá‰ª∂„ÄÇ@samp{list @var{filename}:@var{lineno}} ÂëΩ‰ª§ÂèØ‰ª•Âú®‰ªª‰ΩïÊó∂ÂÄôÁî®Êù•ÊîπÂèòÂΩìÂâçÊ∫êÊñá‰ª∂„ÄÇ

@item sources
@cindex show all source files, in debugger
ÂàóÂá∫ÊâÄÊúâÁöÑÁ®ãÂ∫èÊ∫ê„ÄÇ

@item variables
@cindex list all global variables, in debugger
ÂàóÂá∫ÊâÄÊúâÁöÑÂÖ®Â±ÄÂèòÈáè„ÄÇ

@item watch
@cindex show watchpoints
ÂàóÂá∫ÊâÄÊúâÁöÑÂú®Êü•ÁúãÂàóË°®‰∏≠ÁöÑÈ°π„ÄÇ
@end table
@end table

ÂÖ∂‰ªñÁöÑÂëΩ‰ª§ÂèØ‰ª•ËÆ©‰Ω†ÊéßÂà∂Ë∞ÉËØïÂô®Ôºå‰ΩøÂÖ∂Êúâ‰øùÂ≠òË∞ÉËØïÂô®ÁöÑÁä∂ÊÄÅ‰ª•Âèä‰ªéÊñá‰ª∂‰∏≠ËøêË°åË∞ÉËØïÂô®ÁöÑËÉΩÂäõÔºå

@table @asis
@cindex debugger commands, @code{o} (@code{option})
@cindex debugger commands, @code{option}
@cindex @code{option} debugger command
@cindex @code{o} debugger command (alias for @code{option})
@cindex display debugger options
@cindex debugger options
@item @code{option} [@var{name}[@code{=}@var{value}]]
@itemx @code{o} [@var{name}[@code{=}@var{value}]]
Â¶ÇÊûúÊ≤°ÊúâÂèÇÊï∞ÔºåÊòæÁ§∫ÊâÄÊúâÂèØÁî®ÁöÑË∞ÉËØïÂô®ÈÄâÈ°π‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÂΩìÂâçÂÄº„ÄÇ@samp{option @var{name}} ÊòæÁ§∫ÊåáÂÆöÂêçÂ≠óÈÄâÈ°πÁöÑÂΩìÂâçÂÄº„ÄÇ@samp{option @var{name}=@var{value}} Â∞Ü‰∏Ä‰∏™Êñ∞ÂÄºËµãÁªôÊåáÂÆöÁöÑÈÄâÈ°π„ÄÇÂèØÁî®ÁöÑÈÄâÈ°πÊúâÔºö

@c nested table
@c asis for docbook
@table @asis
@item @code{history_size}
@cindex debugger history size
ËÆæÁΩÆ‰øùÂ≠òÂú®ÂéÜÂè≤Êñá‰ª∂ @file{./.gawk_history} Êñá‰ª∂‰∏≠ÁöÑÊúÄÂ§ßË°åÊï∞„ÄÇÈªòËÆ§ÂÄºÊòØ 100„ÄÇ

@item @code{listsize}
@cindex debugger default list amount
ÊåáÂÆöÂàóË°® @code{list} ÊâìÂç∞ÁöÑË°åÊï∞„ÄÇÈªòËÆ§ÊòØ 15„ÄÇ

@item @code{outfile}
@cindex redirect @command{gawk} output, in debugger
Â∞Ü @command{gawk} ÁöÑËæìÂá∫ÂèëÈÄÅÂà∞Êñá‰ª∂ÔºåË∞ÉËØïÂô®ËæìÂá∫‰æùÁÑ∂ÂèëÈÄÅÂà∞Ê†áÂáÜËæìÂá∫‰∏ä„ÄÇÁ©∫‰∏≤Ôºà@code{""}Ôºâ‰ºöÈáçÊñ∞Â∞ÜËÆæÁΩÆËæìÂá∫Âà∞Ê†áÂáÜËæìÂá∫‰∏ä„ÄÇ

@item @code{prompt}
@cindex debugger prompt
ÊîπÂèòË∞ÉËØïÂô®ÁöÑÊèêÁ§∫„ÄÇÈªòËÆ§ÊòØ @samp{@w{gawk> }}„ÄÇ

@item @code{save_history} [@code{on} | @code{off}]
@cindex debugger history file
‰øùÂ≠òÂëΩ‰ª§ÂéÜÂè≤Âà∞Êñá‰ª∂ @file{./.gawk_history}„ÄÇÈªòËÆ§ÊòØ @code{on}„ÄÇ

@item @code{save_options} [@code{on} | @code{off}]
@cindex save debugger options
Âú®ÈÄÄÂá∫Êó∂Ôºå‰øùÂ≠òÂΩìÂâçÁöÑÈÄâÈ°πÂà∞Êñá‰ª∂ @file{./.gawkrc}„ÄÇÈªòËÆ§ÊòØ @code{on}„ÄÇÈÄâÈ°π‰ºöÂú®ÂêØÂä®‰∏ã‰∏Ä‰∏™‰ºöËØùËøáÁ®ãÊó∂ËØªÂèñÂõûÊù•„ÄÇ

@item @code{trace} [@code{on} | @code{off}]
@cindex instruction tracing, in debugger
ÊâìÂºÄÊàñËÄÖÂÖ≥Èó≠ÂëΩ‰ª§Ë∑üË∏™„ÄÇÈªòËÆ§ÊòØ @code{off}„ÄÇ
@end table

@item @code{save} @var{filename}
Â∞ÜÊù•Ëá™‰∫éÂΩìÂâç‰ºöËØùÁöÑÂëΩ‰ª§‰øùÂ≠òÂà∞ÊâÄÁªôÁöÑ@value{FN}‰∏≠ÔºåÊâÄ‰ª•‰ªñ‰ª¨ÂèØ‰ª•‰ΩøÁî® @command{source} ÂëΩ‰ª§ËøõË°åÈáçÊîæ„ÄÇ

@item @code{source} @var{filename}
@cindex debugger, read commands from a file
‰ªéÊñá‰ª∂‰∏≠ÊâßË°åÂëΩ‰ª§Ôºå‰ªª‰ΩïÂëΩ‰ª§ÁöÑÈîôËØØ‰∏ç‰ºöÂØºËá¥ÂêéÁª≠ÂëΩ‰ª§ÁöÑÁªìÊùü„ÄÇÊ≥®ÈáäÔºà‰ª• @samp{#} ÂºÄÂ§¥ÁöÑË°åÔºâÂèØ‰ª•Â≠òÂú®ÂëΩ‰ª§Êñá‰ª∂‰∏≠„ÄÇÁ©∫Ë°å‰ºöË¢´ÂøΩÁï•ÔºåÂÆÉ‰ª¨@emph{‰∏ç‰ºö}ÈáçÂ§çÊúÄÂêéÁöÑÂëΩ‰ª§„ÄÇÂú®Êñá‰ª∂‰∏≠Ôºå‰Ω†‰∏çÂèØ‰ª•ÊúâÂ§ö‰∫é‰∏Ä‰∏™ÁöÑ @code{run} ÂëΩ‰ª§Êù•ÈáçÊñ∞ÂêØÂä®Á®ãÂ∫è„ÄÇÂêåÊó∂ÔºåÂëΩ‰ª§ÂàóË°®ÂèØ‰ª•ÂåÖÂê´ÂÖ∂‰ªñÁöÑÊ∫ê @code{source} ÁöÑÂëΩ‰ª§Ôºå‰ΩÜÊòØÔºå@command{gawk} Ë∞ÉËØïÂô®‰∏ç‰ºöÂØπÂêå‰∏Ä‰∏™Êñá‰ª∂ÊâßË°åÂ§öÊ¨° sourceÔºå‰ª•ÈÅøÂÖçÊó†ÈôêÈÄíÂΩí„ÄÇ

‰∏∫‰∫Ü‰ΩøÁî®ÊàñËÄÖ‰ª£Êõø @code{source} ÂëΩ‰ª§Ôºå‰Ω†ÂèØ‰ª•‰ΩøÁî® @option{-D @var{file}} ÊàñËÄÖ @option{--debug=@var{file}} ÂëΩ‰ª§Ë°åÂèÇÊï∞‰ªé‰∏Ä‰∏™Êñá‰ª∂‰∏≠Êù•Èùû‰∫§‰∫íÂºèÂú∞ÊâßË°åÂëΩ‰ª§ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ
@end table

@node Miscellaneous Debugger Commands
@subsection ÂÖ∂‰ªñÂëΩ‰ª§

Êúâ‰∏Ä‰∫õÂëΩ‰ª§‰∏çÂ§™Â•ΩÂΩíÂÖ•Âà∞‰πãÂâçÁöÑÈÇ£Âá†ÁßçÂàÜÁ±ªÔºå‰ªñ‰ª¨ÊòØÔºö

@table @asis
@cindex debugger commands, @code{dump}
@cindex @code{dump} debugger command
@item @code{dump} [@var{filename}]
Dump Á®ãÂ∫èÁöÑÂ≠óËäÇÁ†ÅÂà∞Ê†áÂáÜËæìÂá∫‰∏≠ÔºåÊàñËÄÖÂêçÂ≠ó‰∏∫ @var{filename} ÁöÑÊñá‰ª∂‰∏≠„ÄÇËøô‰ºöÊâìÂç∞Êåá‰ª§ÁöÑÂÜÖÈÉ®Ë°®Á§∫Ôºå@command{gawk} ÈÄöËøáÊâßË°åËøô‰∫õÊåá‰ª§Êù•ÂÆûÁé∞Á®ãÂ∫è‰∏≠ÁöÑÂëΩ‰ª§„ÄÇËøô‰ºöÈùûÂ∏∏ÊúâÂêØÂèëÊÄßÔºåÂ¶Ç‰∏ãÈù¢ÁöÑ Davide Brini ÁöÑÂê´‰∫∫Êó†Ê≥ïÊçâÊë∏ÁöÑ‰ª£Á†ÅÁöÑÈÉ®ÂàÜ dump ÂÜÖÂÆπÔºàÊü•Áúã @pxref{Signature Program}ÔºâÔºö

@c FIXME: This will need updating if num-handler branch is ever merged in.
@smallexample
gawk> @kbd{dump}
@print{}        # BEGIN
@print{}
@print{} [  1:0xfcd340] Op_rule           : [in_rule = BEGIN] [source_file = brini.awk]
@print{} [  1:0xfcc240] Op_push_i         : "~" [MALLOC|STRING|STRCUR]
@print{} [  1:0xfcc2a0] Op_push_i         : "~" [MALLOC|STRING|STRCUR]
@print{} [  1:0xfcc280] Op_match          :
@print{} [  1:0xfcc1e0] Op_store_var      : O
@print{} [  1:0xfcc2e0] Op_push_i         : "==" [MALLOC|STRING|STRCUR]
@print{} [  1:0xfcc340] Op_push_i         : "==" [MALLOC|STRING|STRCUR]
@print{} [  1:0xfcc320] Op_equal          :
@print{} [  1:0xfcc200] Op_store_var      : o
@print{} [  1:0xfcc380] Op_push           : o
@print{} [  1:0xfcc360] Op_plus_i         : 0 [MALLOC|NUMCUR|NUMBER]
@print{} [  1:0xfcc220] Op_push_lhs       : o [do_reference = true]
@print{} [  1:0xfcc300] Op_assign_plus    :
@print{} [   :0xfcc2c0] Op_pop            :
@print{} [  1:0xfcc400] Op_push           : O
@print{} [  1:0xfcc420] Op_push_i         : "" [MALLOC|STRING|STRCUR]
@print{} [   :0xfcc4a0] Op_no_op          :
@print{} [  1:0xfcc480] Op_push           : O
@print{} [   :0xfcc4c0] Op_concat         : [expr_count = 3] [concat_flag = 0]
@print{} [  1:0xfcc3c0] Op_store_var      : x
@print{} [  1:0xfcc440] Op_push_lhs       : X [do_reference = true]
@print{} [  1:0xfcc3a0] Op_postincrement  :
@print{} [  1:0xfcc4e0] Op_push           : x
@print{} [  1:0xfcc540] Op_push           : o
@print{} [  1:0xfcc500] Op_plus           :
@print{} [  1:0xfcc580] Op_push           : o
@print{} [  1:0xfcc560] Op_plus           :
@print{} [  1:0xfcc460] Op_leq            :
@print{} [   :0xfcc5c0] Op_jmp_false      : [target_jmp = 0xfcc5e0]
@print{} [  1:0xfcc600] Op_push_i         : "%c" [MALLOC|STRING|STRCUR]
@print{} [   :0xfcc660] Op_no_op          :
@print{} [  1:0xfcc520] Op_assign_concat  : c
@print{} [   :0xfcc620] Op_jmp            : [target_jmp = 0xfcc440]
@print{}
@dots{}
@print{}
@print{} [     2:0xfcc5a0] Op_K_printf         : [expr_count = 17] [redir_type = ""]
@print{} [      :0xfcc140] Op_no_op            :
@print{} [      :0xfcc1c0] Op_atexit           :
@print{} [      :0xfcc640] Op_stop             :
@print{} [      :0xfcc180] Op_no_op            :
@print{} [      :0xfcd150] Op_after_beginfile  :
@print{} [      :0xfcc160] Op_no_op            :
@print{} [      :0xfcc1a0] Op_after_endfile    :
gawk>
@end smallexample

@cindex @code{exit} debugger command
@cindex exit the debugger
@item @code{exit}
ÈÄÄÂá∫Ë∞ÉËØïÂô®„ÄÇÊü•Áúã‰πãÂêéÂàóÂá∫ÁöÑ @samp{quit}„ÄÇ

@cindex debugger commands, @code{h} (@code{help})
@cindex debugger commands, @code{help}
@cindex @code{help} debugger command
@cindex @code{h} debugger command (alias for @code{help})
@item @code{help}
@itemx @code{h}
ÊâìÂç∞ÊâÄÊúâÁöÑ @command{gawk} Ë∞ÉËØïÂô®ÂëΩ‰ª§ÂàóË°®Ôºå‰ª•ÂèäÂÆÉÂÖ®ÁöÑÁÆÄÁü≠‰ΩøÁî®ËØ¥Êòé„ÄÇ@samp{help @var{command}} ÊâìÂç∞ÂëΩ‰ª§ @var{command} ÁöÑ‰ø°ÊÅØ„ÄÇ

@cindex debugger commands, @code{l} (@code{list})
@cindex debugger commands, @code{list}
@cindex @code{list} debugger command
@cindex @code{l} debugger command (alias for @code{list})
@item @code{list} [@code{-} | @code{+} | @var{n} | @var{filename}@code{:}@var{n} | @var{n}--@var{m} | @var{function}]
@itemx @code{l} [@code{-} | @code{+} | @var{n} | @var{filename}@code{:}@var{n} | @var{n}--@var{m} | @var{function}]
ÊâìÂç∞‰ªéÂΩìÊ∫ê‰ª£Á†ÅÊàñËÄÖÂêç‰∏∫ @var{filename} Êñá‰ª∂ÁöÑÊåáÂÆöË°åÊï∞ÔºàÈªòËÆ§‰∏∫ 15Ôºâ„ÄÇ‰∏ãÈù¢ÊòØ @code{list} ÁöÑÂèØËÉΩÁöÑÂèÇÊï∞Ôºö

@c nested table
@table @asis
@item @code{-} (Minus)
ÊâìÂç∞ÊúÄÂêéÊâìÂç∞ÂâçÁöÑË°å„ÄÇ

@item @code{+}
ÊâìÂç∞ÊúÄÂêéÊâìÂç∞Ë°åÁöÑÂêéÈù¢ÁöÑË°å„ÄÇ@code{list} Â¶ÇÊûú‰∏çÂ∏¶ÂèÇÊï∞Âàô‰∏éËøô‰∏™ÊâßË°åÁªìÊûúÁõ∏Âêå„ÄÇ

@item @var{n}
ÊâìÂç∞Ë°åÂè∑ @var{n} ‰∏∫‰∏≠ÂøÉÂë®Âõ¥ÁöÑË°å„ÄÇ

@item  @var{n}--@var{m}
ÊâìÂç∞‰ªé @var{n} Âà∞ @var{m} ÁöÑË°å„ÄÇ

@item @var{filename}@code{:}@var{n}
ÊâìÂç∞Âú®Ê∫êÊñá‰ª∂ @var{filename} Ë°å @var{n} ‰∏∫‰∏≠ÂøÉÁöÑË°å„ÄÇËøô‰∏™ÂëΩ‰ª§‰ºöÊîπÂèòÂΩìÂâçÁöÑÊ∫êÊñá‰ª∂„ÄÇ

@item @var{function}
ÊâìÂç∞ÂáΩÊï∞ @var{function} ÂºÄÂßãË°å‰∏∫‰∏≠ÂøÉÁöÑË°å„ÄÇËøô‰∏™ÂëΩ‰ª§ÊúâÂèØËÉΩÊîπÂèòÂΩìÂâçÁöÑÊ∫êÊñá‰ª∂„ÄÇ
@end table

@cindex debugger commands, @code{q} (@code{quit})
@cindex debugger commands, @code{quit}
@cindex @code{quit} debugger command
@cindex @code{q} debugger command (alias for @code{quit})
@cindex exit the debugger
@item @code{quit}
@itemx @code{q}
ÈÄÄÂá∫Ë∞ÉËØïÂô®„ÄÇË∞ÉËØïÁ®ãÂ∫èÈùûÂ∏∏ÊúâÊÑèÊÄùÔºå‰ΩÜÊòØÂú®ÁîüÊ¥ª‰∏≠ÊúâÊó∂‰Ω†ËøòÊúâÂÖ∂‰ªñÁöÑË¥£‰ªªË¶ÅÂ∞ΩÔºåËÄåÊúâÊó∂Êàë‰ª¨ÊâæÂà∞‰∫Ü BugÔºåÂàô‰ºöÂÜçÊâæ‰∏ã‰∏Ä‰∏™„ÄÇÂ¶ÇÊàë‰ª¨Êó©ÂâçÁúãÂà∞ÁöÑÔºåÂ¶ÇÊûú‰Ω†Ê≠£Âú®ÊâßË°å‰∏Ä‰∏™Á®ãÂ∫èÔºåË∞ÉËØïÂô®‰ºöÂú®‰Ω†ËæìÂÖ• @samp{q} ÊàñËÄÖ @samp{quit} Êó∂Áªô‰Ω†Ë≠¶ÂëäÔºå‰ª•Á°Æ‰ø°‰Ω†ÁúüÁöÑÊÉ≥ÈÄÄÂá∫„ÄÇ

@cindex debugger commands, @code{trace}
@cindex @code{trace} debugger command
@item @code{trace} [@code{on} | @code{off}]
ÊâìÂºÄÊàñËÄÖÂÖ≥Èó≠ËøûÁª≠ÊâìÂç∞Â∞ÜË¶ÅÊâßË°åÁöÑÊåá‰ª§Ôºå‰ª•ÂèäËøô‰∫õÊåá‰ª§ÊâÄÂÆûÁé∞ÁöÑ @command{awk} ‰ª£Á†Å„ÄÇÈªòËÆ§ÊòØ @code{off}„ÄÇ

Âú®ËøôÊ≠§Êåá‰ª§‰∏≠ÁöÑÂ§ßÂ§öÊï∞‚Äúopcodes‚ÄùÈÉΩÁõ∏ÂΩìÂú∞ËÉΩÂ§üËá™ÊàëËØ¥ÊòéÔºå‰ΩøÁî® @code{stepi} ‰∏é @code{nexti} ÁöÑÊó∂ÂÄôÔºå@code{trace} ÊâìÂºÄÁöÑÊó∂ÂÄô‰ºö‰ΩøÂæóÂÆÉ‰ª¨ÂèòÊàêÁÜüÊÇâÁöÑÊúãÂèã„ÄÇÔºàËØëÊ≥®ÔºöÂ∞±ÊòØ‰ºöÂú®Êé•‰∏ãÊù•ÁöÑÊòæÁ§∫‰∏≠‰ºöÊòæÁ§∫ÂæàÂ§öÂ≠óËäÇÁ†ÅÔºåÁúã‰πÖ‰∫ÜÔºåÂ∞±Êàê‰∏∫ÁÜüÊÇâÁöÑÊúãÂèã‰∫Ü„ÄÇËøôÊòØ‰ΩúËÄÖÁöÑÂπΩÈªò„ÄÇÔºâ

@end table

@node Readline Support
@section ÊîØÊåÅ
@cindex command completion, in debugger
@cindex history expansion, in debugger

Â¶ÇÊûú @command{gawk} ‰ΩøÁî® @uref{http://cnswww.cns.cwru.edu/php/chet/readline/readline.html,
GNU Readline Â∫ì} Êù•ÁºñËØëÁöÑÔºåÂàô‰Ω†ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™Â∫ìÁöÑÂëΩ‰ª§ÂÆåÊàê‰∏éÂéÜÂè≤Êâ©Â±ïÁâπÊÄßËøô‰∏™‰ºòÁÇπ„ÄÇ‰∏ãÈù¢ÁöÑÂÆåÊàêÁ±ªÂûãÂèØ‰ª•‰ΩøÁî®Ôºö

@table @asis
@item Command completion
ÂëΩ‰ª§ÂêçÂ≠ó„ÄÇ

@item Source @value{FN} completion
Ê∫ê@value{FN}„ÄÇÁõ∏ÂÖ≥ÁöÑÂëΩ‰ª§ÊòØ @code{break}Ôºå@code{clear}Ôºå@code{list}Ôºå@code{tbreak} ‰∏é @code{until}„ÄÇ

@item Argument completion
ÂëΩ‰ª§ÁöÑÈùûÊï∞ÂÄºÂèÇÊï∞„ÄÇÁõ∏ÂÖ≥ÁöÑÂëΩ‰ª§ÊòØ @code{enable} ‰∏é @code{info}„ÄÇ

@item Variable name completion
ÂÖ®Â±ÄÂèòÈáèÂè•‰ª•ÂèäÊ≠£Âú®ÊâßË°åÁ®ãÂ∫èÁöÑÂΩìÂâç‰∏ä‰∏ãÊñáÁöÑÂáΩÊï∞ÂèÇÊï∞„ÄÇÁõ∏ÂÖ≥ÁöÑÂëΩ‰ª§ÊòØ @code{display}Ôºå@code{print}Ôºå@code{set} ‰∏é @code{watch}„ÄÇ

@end table

@node Limitations
@section ÈôêÂà∂

Êàë‰ª¨Â∏åÊúõ‰Ω†ÂèëÁé∞ @command{gawk} ÁöÑË∞ÉËØïÂô®ÂæàÊúâÁî®Âπ∂‰∏î‰∫´Âèó‰ΩøÁî®ÂÆÉÔºå‰ΩÜÊòØÂØπ‰∫é‰ªª‰ΩïÁöÑÁ®ãÂ∫èÔºåÁâπÂà´ÊòØÂú®ÂèëÂ∏ÉÁöÑÊó©ÊúüÔºå‰æùÁÑ∂ËøòÊúâÊúâ‰∏Ä‰∫õÈôêÂà∂ÁöÑ„ÄÇË¶ÅÊ≥®ÊÑè‰ª•‰∏ãÂá†ÁÇπÔºö

@itemize @value{BULLET}
@item
Âú®Ëøô‰∏™Êó∂ÂÄôÔºåË∞ÉËØïÂô®‰∏ç‰ºöÂú®‰Ω†ËæìÂÖ•‰∏Ä‰∫õÂÆÉ‰∏çÂñúÊ¨¢ÁöÑ‰∏úË•ø‰πãÂêéÔºå‰∏ç‰ºöÁªô‰Ω†ÈîôËØØÁªôÂá∫ËØ¶ÁªÜÁöÑËß£Èáä„ÄÇÁõ∏ÂèçÔºåÂÆÉÂè™ÊòØÂèçÈ¶àËØ¥ @samp{syntax error}„ÄÇÂΩì‰Ω†Á°ÆÂÆûÊâæÂà∞‰∫Ü‰Ω†ÁöÑÈîôËØØÊâÄÂú®ÔºåÊâÄ‰ª•‰Ω†Á°ÆÂÆûÊÑüËßâËá™Â∑±‰ºöÊòØ‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÂ§ßÁâõ„ÄÇ

@item
@c NOTE: no comma after the ref{} on purpose, due to following
@c parenthetical remark.
Â¶ÇÊûú‰Ω†‰∏ÄÁõ¥ dump Âá∫ @ref{Miscellaneous Debugger Commands} ‰∏≠ÁöÑ opcodesÔºàÊàñËÄÖÊòØ‰Ω†Â∑≤ÁªèÁÜüÊÇâ‰∫Ü @command{gawk} ÁöÑÂÜÖÈÉ®ÁªÜËäÇÔºâÔºå‰Ω†‰ºöÊÑèËØÜÂà∞ @command{gawk} ÁöÑÂæàÂ§öÁöÑÂÜÖÈÉ®Êï∞ÊçÆÊìç‰ΩúÔºå‰∏éÂÖ∂‰ªñÁöÑÁøªËØëÂô®‰∏ÄÊ†∑ÊòØÂú®Ê†à‰∏≠ÂÆåÊàêÁöÑ„ÄÇ@code{Op_push}Ôºå@code{Op_pop} ‰ª•ÂèäÂÉè‚Äúbread and butter‚ÄùÂç† @command{gawk} ‰ª£Á†Å‰∏≠ÁöÑÂ§ßÂ§öÊï∞„ÄÇ

‰∏çÂπ∏ÁöÑÊòØÔºåÂà∞Áé∞Âú®‰∏∫Ê≠¢Ôºå@command{gawk} Ë∞ÉËØïÂô®‰∏çÂÖÅËÆ∏‰Ω†Ê£ÄÊü•Ê†àÁöÑÂÜÖÂÆπ„ÄÇ‰πüÂ∞±ÊòØÔºåË°®ËææÂºèÁöÑ‰∏≠Èó¥ÁªìÊûúÊòØÂú®Ê†à‰∏≠ËøõË°åÊ±ÇÂÄºÁöÑÔºå‰ΩÜÊòØÂç¥‰∏çÂèØ‰ª•ÊâìÂç∞„ÄÇËÄå‰∏îÔºåÂè™ÊúâÂú®Á®ãÂ∫èÁöÑÁ®ãÂ∫è‰∏≠ÂÆö‰πâÁöÑÂèòÈáèÊâçÂèØ‰ª•ÊâìÂç∞„ÄÇÂΩìÁÑ∂ÔºåË¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂ∞±ÊòØÂú®Ë∞ÉËØïÈò∂ÊÆµ‰ΩøÁî®Êõ¥Âä†ÊòæÂºèÁöÑÂèòÈáèÔºåÁÑ∂ÂêéÂÜçËΩ¨ÂõûÂà∞Êõ¥Âä†ÈöêËÆ≥Ôºå‰πüËÆ∏ÊòØÊõ¥Âä†‰ºòÂåñÁöÑ‰ª£Á†Å„ÄÇ

@item
Ê≤°ÊúâÂäûÊ≥ïÊü•ÁúãÁºñËØëÁöÑÊ≠£ÂàôË°®ËææÂºèÁöÑÂÜÖÈÉ®ËøáÁ®ã‰ª•Êü•ÁúãÂÆÉÊòØÂê¶Ê≠£Á°Æ„ÄÇ‰Ωú‰∏∫ @command{awk} Á®ãÂ∫èÂëòÔºå‰Ω†Âè™Â∏åÊúõÁêÜËß£ @code{/[^[:alnum:][:blank:]]/} ÁöÑÊÑè‰πâÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ

@item
@command{gawk} Ë∞ÉËØïÂô®ËÆæËÆ°ÊòØÁî®Âú®ÈÄöËøáÂëΩ‰ª§Ë°åËøêË°åÁöÑÁ®ãÂ∫è‰∏äÁöÑÔºà‰ª•ÂèäÂÖ∂ÊâÄÊúâÁöÑÂèÇÊï∞ÔºâÔºåÂ¶Ç @ref{Debugger Invocation} ‰∏≠ÊâÄÊèèËø∞ÁöÑ„ÄÇÊ≤°ÊúâÂäûÊ≥ïÔºàÁõÆÂâçÔºâÊù•ÈôÑÂä†ÊàñËÄÖ‚ÄúÊèíÂÖ•‚ÄùÂà∞‰∏Ä‰∏™ËøêË°å‰∏≠ÁöÑÁ®ãÂ∫è„ÄÇËøôÂØπ‰∏ªË¶ÅÊòØÁî®‰∫éÁü≠Á®ãÂ∫è‰∏îÂø´ÈÄüÊâßË°åÁöÑËØ≠Ë®Ä‰∏äÁúãËµ∑Êù•ÊòØÂêàÁêÜÁöÑ„ÄÇ

@item
@command{gawk} Ë∞ÉËØïÂô®Âè™Êé•Êî∂ÈÄöËøá @option{-f} ÈÄâÈ°πÊèê‰æõÁöÑÊ∫ê‰ª£Á†Å„ÄÇ
@end itemize

@ignore
Look forward to a future release when these and other missing features may
be added, and of course feel free to try to add them yourself!
@end ignore

@node Debugging Summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Á®ãÂ∫èÂæàÂ∞ëÁ¨¨‰∏ÄÊ¨°Â∞±ÂèØ‰ª•Ê≠£Á°ÆÂ∑•‰Ωú„ÄÇÊü•Áúã Bug ÁöÑËøáÁ®ãÁß∞‰∏∫Ë∞ÉËØïÔºåÂ∏Æ‰Ω†ÊâæÂà∞ Bug ÁöÑÁ®ãÂ∫èÁß∞‰∏∫Ë∞ÉËØïÂô®„ÄÇ @command{gawk} ÊúâÂÜÖÁΩÆÁöÑË∞ÉËØïÂô®ÔºåÂπ∂‰∏î‰∏é GNU Ë∞ÉËØïÂô® GDB Â∑•‰ΩúËµ∑Êù•ÂæàÁ±ª‰ºº„ÄÇ

@item
Ë∞ÉËØïÂô®ÂèØ‰ª•ËÆ©‰Ω†‰∏ÄÊ¨°‰∏Ä‰∏™ËØ≠Âè•ÊâßË°åÁ®ãÂ∫èÔºå‰ª•Ê£ÄÊü•‰∏éÊîπÂèòÂèòÈáè‰∏éÊï∞ÁªÑÁöÑÂÄºÔºå‰ª•ÂèäËÆ∏Â§öÂÖ∂‰ªñÁöÑ‰∫ãÊÉÖÊù•ËÆ©‰Ω†ÁêÜËß£‰Ω†ÁöÑÁ®ãÂ∫èÂÆûÈôÖÊâÄÂÅöÁöÑÔºàÁõ∏ÂØπ‰∫éÂÆÉÂ∫îËØ•ÊâÄÂÅöÁöÑÔºâ„ÄÇ

@item
‰∏éÂÖ∂‰ªñÁöÑË∞ÉËØïÂô®Á±ª‰ººÔºå@command{gawk} Ë∞ÉËØïÂô®‰πüÊòØÊåâÁÖßÊ†àÂ∏ßÁöÑÊñπÂºèÂ∑•‰ΩúÁöÑÔºåÂπ∂‰∏îÂèØ‰ª•‰Ω†ËÆ©ËÆæÁΩÆÊñ≠ÁÇπÔºàÂú®‰ª£Á†Å‰∏≠ÂÅúÊ≠¢ÁöÑÁÇπÔºâ‰∏éÊü•ÁúãÁÇπÔºàÂΩìÂÄºË¢´ÊîπÂèòÊó∂ÂÅúÊ≠¢Ôºâ„ÄÇ

@item
Ë∞ÉËØïÂô®ÂëΩ‰ª§Áõ∏ÂΩìÂÆåÂ§áÔºåÊèê‰æõ‰∫ÜÊñ≠ÁÇπÔºåÊâßË°åÔºåÊü•ÁúãÔºåÊîπÂèòÊï∞ÊçÆÁ≠âÊéßÂà∂ÂëΩ‰ª§ÔºåËøòÊúâÂ§ÑÁêÜÊ†àÔºåËé∑Âèñ‰ø°ÊÅØ‰ª•ÂèäÂÖ∂‰ªñ‰ªªÂä°ÁöÑÂëΩ‰ª§„ÄÇ

@item
Â¶ÇÊûú GNU Readline Â∫ìÂú® @command{gawk} ÁºñËØëÊó∂ÊòØÂèØÁî®ÁöÑÔºåÂÆÉÂèØ‰ª•Ë¢´Ë∞ÉËØïÂô®Áî®‰∫éÂëΩ‰ª§Ë°åÂéÜÂè≤‰∏éÁºñËæë„ÄÇ

@end itemize

@node Arbitrary Precision Arithmetic
@chapter ÁÆóÊúØËøêÁÆó‰∏é @command{gawk} ‰∏≠ÁöÑ‰ªªÊÑèÁ≤æÂ∫¶ÁÆóÊúØËøêÁÆó
@cindex arbitrary precision
@cindex multiple precision
@cindex infinite precision
@cindex floating-point, numbers@comma{} arbitrary precision

Êú¨@value{CHAPTER}‰ªãÁªç‰∏Ä‰∫õ‰∏éËÆ°ÁÆóÂ¶Ç‰ΩïËøõË°åÁÆóÊúØËøêË°åÁõ∏ÂÖ≥ÁöÑÂü∫Êú¨Ê¶ÇÂøµÔºåÂπ∂ÂÆö‰πâ‰∏Ä‰∫õÈáçË¶ÅÁöÑÊúØËØ≠„ÄÇÁÑ∂ÂêéÁªßÁª≠ÊèèËø∞ÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆóÔºå@command{awk} Ê≠£ÊòØÁî®ÂÖ∂Êù•ÂÅöÂÖ∂ÊâÄÊúâÁöÑËÆ°ÁÆó„ÄÇÂêéÈù¢Ëøò‰ºöÊúâ‰ªªÊÑèÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÁÆóÊúØËøêË°åÁöÑËÆ®ËÆ∫ÔºåËøôÊòØ‰∏™Âè™Âú® @command{gawk} ‰∏≠ÂèØÁî®ÁöÑÁâπÊÄß„ÄÇÂêéÁª≠‰ºöÂÜçËÆ®ËÆ∫‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï¥Êï∞ÔºåÂèäÂØπËÆ®ËÆ∫ÁöÑÊüê‰∫õÁÇπÂÅö‰∏Ä‰∫õÂ∞èÁªìÔºåÂú®Ëøô‰∫õÁÇπ‰∏ä @command{gawk} ‰∏é POSIX Ê†áÂáÜ‰∏çÂ§™‰∏ÄËá¥„ÄÇ

@quotation ÊèêÁ§∫
@command{gawk} ÁöÑÂæàÂ§öÁöÑÁî®Êà∑ÈÉΩÂèØ‰ª•ÂÆåÂÖ®Âú∞Ë∑≥ËøáÊú¨Á´†„ÄÇ‰ΩÜÊòØÂ¶ÇÊûú‰Ω†ÊÉ≥Áî® @command{gawk} ÂÅö‰∏Ä‰∫õÁßëÂ≠¶ËÆ°ÁÆóÔºåËøôÁ´†Â∞±ÈùûÂ∏∏ÂêàÈÄÇ„ÄÇ
@end quotation

@menu
* Computer Arithmetic::           A quick intro to computer math.
* Math Definitions::              Defining terms used.
* MPFR features::                 The MPFR features in @command{gawk}.
* FP Math Caution::               Things to know.
* Arbitrary Precision Integers::  Arbitrary Precision Integer Arithmetic with
                                  @command{gawk}.
* POSIX Floating Point Problems:: Standards Versus Existing Practice.
* Floating point summary::        Summary of floating point discussion.
@end menu

@node Computer Arithmetic
@section ËÆ°ÁÆóÊú∫ÁÆóÊúØËÆ°ÁÆóËØ¥Êòé

Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÊàë‰ª¨Â∑≤ÁªèÂ§ÑÁêÜËøáÊï∞Â≠óÊàñËÄÖÂ≠ó‰∏≤„ÄÇ‰ΩÜÊòØÔºåÊúÄÁªàËÆ°ÁÆóÊú∫ÈÉΩÊòØ‰ª•@dfn{‰∫åËøõÂà∂Êï∞Â≠ó}ÔºåÊàñËÄÖËØ¥@dfn{‰∫åËøõÂà∂‰Ωç}Ë°®Á§∫‰∏ÄÂàá„ÄÇÂçÅËøõÂà∂Êï∞ÂèØ‰ª•Áî® 10 ‰∏™ÂÄºÊù•Ë°®Á§∫Ôºö 0 Âà∞ 9„ÄÇ‰∫åËøõÂà∂Êï∞ÂèØ‰ª•Áî®‰∏§‰∏™ÂÄºÊù•Ë°®Á§∫Ôºå0 ‰∏é 1„ÄÇÈÄöËøá‰ΩøÁî®‰∫åËøõÂà∂Êï∞ÔºåËÆ°ÁÆóÔºà‰ª•ÂèäËÆ°ÁÆóËΩØ‰ª∂ÔºâÂèØ‰ª•Ë°®Á§∫Âπ∂Êìç‰ΩúÊï∞ÂÄº‰∏éÂ≠óÁ¨¶Êï∞ÊçÆ„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÊõ¥Â§öÁöÑ‰ΩçÂèØ‰ª•Áî®Êù•Ë°®Á§∫ÁâπÂÆöÁöÑ‰∫ãÔºå‰ª•ÂèäÂèØ‰ª•Ë°®Á§∫ÁöÑÊõ¥Â§ßÁöÑËåÉÂõ¥ÁöÑÂèØËÉΩÊï∞ÂÄº„ÄÇ

Áé∞‰ª£ËÆ°ÁÆóÊú∫ÊîØÊåÅËá≥Â∞ë‰∏§ÁßçÔºåÈÄöÂ∏∏ÊòØÊõ¥Â§öÁöÑÊñπÂºèÊù•ËøõË°åÁÆóÊúØËÆ°ÁÆó„ÄÇÊØèÁßçÁÆóÊúØËÆ°ÁÆóÈÉΩÂèØ‰ª•‰ΩøÁî®‰∏çÂêåÁöÑË°®Á§∫Ôºà‰ΩçÁöÑÁªÑÁªáÊñπÂºèÔºâÊù•‰ª£Ë°®Êï∞ÂÄº„ÄÇÊàë‰ª¨ÊÑüÂÖ¥Ë∂£ÁöÑÁÆóÊúØÁ±ªÂûãÂ¶Ç‰∏ãÔºö

@table @asis
@item ÂçÅËøõÂà∂ÁÆóÊúØËøêÁÆó
Ê≠§Á±ªÂûãÁöÑÁÆóÊúØËøêË°å‰Ω†Â∑≤ÁªèÂú®ÂàùÁ∫ßÂ≠¶Ê†°‰∏≠Â∞±Â∑≤ÁªèÂ≠¶Ëøá‰∫ÜÔºåÂÆÉ‰ª¨‰ΩøÁî®Á¨î‰∏éÁ∫∏ÔºàÊàñËÄÖÊòØËÆ°ÁÆóÂô®ÔºâÊù•ËøêÁÆó„ÄÇÁêÜËÆ∫‰∏äÔºåÂú®ÂçÅËøõÂà∂Â∞èÊï∞ÁÇπÁöÑ‰∏ÄËæπÊàñËÄÖ‰∏§ËæπÈÉΩÂèØ‰ª•Áî®‰ªªÊÑèÊï∞ÂÄº‰ΩçÔºåËÄåÁªìÊûúÊÄªÊòØÁ≤æÁ°ÆÁöÑ„ÄÇ

‰∏Ä‰∫õÁé∞‰ª£ÁöÑÁ≥ªÁªüÂèØ‰ª•Áî®Á°¨‰ª∂ÊâßË°åÂçÅËøõÂà∂ÁÆóÊúØËøêÁÆóÔºå‰ΩÜÊòØÈÄöÂ∏∏ÈúÄË¶ÅÁâπÊÆäÁöÑËΩØ‰ª∂Â∫ìÊù•ËÆøÈóÆËøô‰∫õÊåá‰ª§„ÄÇ‰πüÊúâÂ∫ìÁî®ÂÆåÂÖ®Áî®ËΩØ‰ª∂Êù•ÊâßË°åÂçÅËøõÂà∂ÁÆóÊúØËøêÁÆó„ÄÇ

Â∞ΩÁÆ°Êúâ‰∏Ä‰∫õÁî®Êà∑Â∏åÊúõ @command{gawk} ÂèØ‰ª•ÊâßË°åÂçÅËøõÂà∂ËøêÁÆóÔºå 
@footnote{Êàë‰ª¨‰∏çÁü•ÈÅì‰ªñ‰ª¨‰∏∫‰ªÄ‰πàÂ∏åÊúõÊúâËøô‰∏™ËÉΩÂäõÔºå‰ªéÊòØÁ°ÆÂÆûÊòØÊúâËøôÁßçÊúüÊúõ„ÄÇ}
‰ΩÜÊòØ @command{gawk} ‰∏çÊîØÊåÅËøôÊ†∑ÁöÑËÉΩÂäõ„ÄÇ

@item Êï¥Êï∞ÁÆóÊ≥ïËøêÁÆó
Âú®Â≠¶Ê†°ÈáåÔºåÊï¥Êï∞ÂÄºË¢´Êåá‰∏∫‚ÄúÂÖ®ÈÉ®‚ÄùÊòØÊï∞ÂÄº‚Äî‚Äî‰πüÂ∞±ÊòØÔºåÊï∞ÂÄº‰∏≠Ê≤°ÊúâÂ∞èÊï∞ÈÉ®ÂàÜÔºåÂ¶Ç 1Ôºå42 ÊàñËÄÖ @minus{}17„ÄÇÊï¥Êï∞ÁöÑÂ•ΩÂ§ÑÊòØÂÆÉ‰ª¨ÂÆåÂÖ®‰ª£Ë°®ÂÄº„ÄÇÁº∫ÁÇπÂ∞±ÊòØÂÆÉ‰ª¨ÁöÑËåÉÂõ¥ÊòØÊúâÈôêÁöÑ„ÄÇ

@cindex unsigned integers
@cindex integers, unsigned
Âú®ËÆ°ÁÆóÊú∫‰∏≠ÔºåÊï¥Êï∞ÂÄº‰ºöÂàÜÊàê‰∏§Á±ªÔºö@dfn{ÊúâÁ¨¶Âè∑}‰∏é@dfn{Êó†Á¨¶Âè∑}ÁöÑ„ÄÇÊúâÁ¨¶Âè∑ÁöÑÂÄºÂèØ‰ª•‰∏∫Ê≠£‰πüÂèØ‰ª•‰∏∫Ë¥üÔºåËÄåÊó†Á¨¶Âè∑Êï∞ÂÄºÊÄªÊòØÂ§ß‰∫éÁ≠â‰∫é 0„ÄÇ

Âú®ËÆ°ÁÆóÊú∫Á≥ªÁªü‰∏≠ÔºåÊï¥Êï∞ÁÆóÊúØËøêÁÆóÊòØÁ≤æÁ°ÆÁöÑÔºå‰ΩÜÊòØÂÄºÁöÑÂèØËÉΩËåÉÂõ¥ÊòØÊúâÈôêÁöÑ„ÄÇÊï¥Êï∞ÁÆóÊúØËøêÁÆó‰∏ÄËà¨Ë¶ÅÊØîÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆóË¶ÅÂø´„ÄÇ

@item ÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆó
ÊµÆÁÇπÊï∞ÂÄºÁöÑË°®Á§∫ÔºåÊàë‰ª¨Âú®Â≠¶Ê†°‰∏≠Âè´ÂÅö‚ÄúÂÆû‚ÄùÊï∞ÔºàÂç≥Ëøô‰∫õÂÄºÊúâÂ∞èÊï∞ÈÉ®ÂàÜÔºåÂ¶Ç 3.1415927 Ôºâ„ÄÇÊµÆÁÇπÊï∞ÂÄºÁöÑ‰ºòÁÇπÊòØÂÆÉÂèØ‰ª•Ë°®Á§∫ÊØîÊï¥Êï∞ÊâÄËÉΩË°®Á§∫ÁöÑÊï∞ÂÄºÂ§ßÂæóÂ§öÁöÑËåÉÂõ¥„ÄÇÁº∫Èô∑Â∞±ÊòØËøôÊ≠§Êï∞ÂÄºÊó†Ê≥ïÁ≤æÁ°ÆË°®Á§∫„ÄÇ

Áé∞‰ª£Á≥ªÁªüÊîØÊåÅÁ°¨‰ª∂ÂÆûÁé∞ÁöÑÊµÆÁÇπËøêÁÆóÔºå‰ΩÜÊòØÂÄºÊòØÊúâÈôêÁöÑ„ÄÇ‰πüÊúâËΩØ‰ª∂Â∫ìÂèØ‰ª•‰ΩøÁî®‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÊï∞ËÆ°ÁÆó„ÄÇ

POSIX @command{awk} ‰ΩøÁî®@dfn{ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÂÄº}ÔºåËøôÊØî@dfn{ÂçïÁ≤æÂ∫¶ÊµÆÁÇπÊï∞}ÂèØ‰ª•‰øùÂ≠òÊõ¥Â§ßËåÉÂõ¥ÁöÑÊï∞ÂÄº„ÄÇ@command{gawk} ÊúâÂ∑•ÂÖ∑Áî®Êù•ÊâßË°å‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆóÔºåÊàë‰ª¨ÂêéÈù¢‰ºöËøõË°åËØ¶ÁªÜÂú∞ÊèèËø∞„ÄÇ
@end table

ËÆ°ÁÆóÊú∫Â§ÑÁêÜÊï¥Êï∞‰∏éÊµÆÁÇπÊï∞Ë°®Á§∫ÁöÑ‰∏çÂêåËåÉÂõ¥ÁöÑÊï∞ÂÄº„ÄÇÊï¥Êï∞ÂÄºÈÄöÂ∏∏Ë¶Å‰πàÊòØ 32 ‰ΩçÁöÑÔºåÊàñËÄÖÊòØ 64 ‰ΩçÁöÑÂÄº„ÄÇÂçïÁ≤æÂ∫¶ÊµÆÁÇπÊï∞Âç†Áî® 32 ‰ΩçÔºåËÄåÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞Âç†Áî® 64 ‰ΩçÊï∞„ÄÇÊµÆÁÇπÂÄºÊÄªÊòØÊúâÁ¨¶Âè∑ÁöÑ„ÄÇÂèØËÉΩÁöÑÂÄºËåÉÂõ¥Â¶Ç @ref{table-numeric-ranges} ÊâÄÁ§∫Ôºö

@float Table,table-numeric-ranges
@caption{‰∏çÂêåÁöÑÊï∞ÂÄºË°®Á§∫ÁöÑÂÄºËåÉÂõ¥}
@multitable @columnfractions .34 .33 .33
@headitem Êï∞ÂÄºË°®Á§∫ @tab ÊúÄÂ∞èÂÄº @tab ÊúÄÂ§ßÂÄº
@item 32-bit ÊúâÁ¨¶Âè∑Êï¥Êï∞ @tab @minus{}2,147,483,648 @tab 2,147,483,647
@item 32-bit Êó†Á¨¶Âè∑Êï¥Êï∞ @tab 0 @tab 4,294,967,295
@item 64-bit ÊúâÁ¨¶Âè∑Êï¥Êï∞ @tab @minus{}9,223,372,036,854,775,808 @tab 9,223,372,036,854,775,807
@item 64-bit Êó†Á¨¶Âè∑Êï¥Êï∞ @tab 0 @tab 18,446,744,073,709,551,615
@iftex
@item ÂçïÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÔºàÂ§ßÁ∫¶ÂÄºÔºâ @tab @math{1.175494^{-38}} @tab @math{3.402823^{38}}
@item ÂèåÊï∞Â∫¶ÊµÆÁÇπÊï∞ÔºàÂ§ßÁ∫¶ÂÄºÔºâ @tab @math{2.225074^{-308}} @tab @math{1.797693^{308}}
@end iftex
@ifinfo
@item ÂçïÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÔºàÂ§ßÁ∫¶ÂÄºÔºâ @tab 1.175494e-38 @tab 3.402823e38
@item ÂèåÊï∞Â∫¶ÊµÆÁÇπÊï∞ÔºàÂ§ßÁ∫¶ÂÄºÔºâ @tab 2.225074e-308 @tab 1.797693e308
@end ifinfo
@ifnottex
@ifnotinfo
@item ÂçïÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÔºàÂ§ßÁ∫¶ÂÄºÔºâ @tab 1.175494@sup{-38} @tab 3.402823@sup{38}
@item ÂèåÊï∞Â∫¶ÊµÆÁÇπÊï∞ÔºàÂ§ßÁ∫¶ÂÄºÔºâ @tab 2.225074@sup{-308} @tab 1.797693@sup{308}
@end ifnotinfo
@end ifnottex
@end multitable
@end float

@node Math Definitions
@section Ë¶Å‰∫ÜËß£ÁöÑÂÖ∂‰ªñÁü•ËØÜ

Ëøô‰∏Ä@value{CHAPTER}ÁöÑÂâ©‰∏ãÈÉ®ÂàÜ‰ΩøÁî®Â§ßÈáèÊï∞ÂÄºÊúØËØ≠„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∫õÈùûÊ≠£ÂºèÂÆö‰πâÔºåËøôÊ†∑ÂèØ‰ª•ÈÄöËøáËøô‰∫õÊùêÊñô‰∫ÜËß£ÔºåÊúâÂä©‰∫é‰Ω†ÁöÑÂ∑•‰Ωú„ÄÇ

@table @dfn
@item Á≤æÁ°ÆÂ∫¶
ÊµÆÁÇπÊï∞ËÆ°ÁÆóÁöÑÁ≤æÁ°ÆÂ∫¶ÊòØÊåáÂÖ∂‰∏éÁúüÂÆûÂÄºÔºàÁ∫∏Á¨îÊù•Ë°®Á§∫ÁöÑÔºâÁöÑÊé•ËøëÁ®ãÂ∫è„ÄÇ

@item ÈîôËØØ
ËÆ°ÁÆóÊâÄ‰ª•‚ÄúÂ∫îËØ•ÊòØ‚ÄùÁöÑÁªìÊûú‰∏éÂÆûÈôÖÁöÑÁªìÊûú‰πãÈó¥ÁöÑÂ∑ÆÂºÇ„ÄÇÂ∫îËØ•ÊòØÂ∞ΩÁÆ°ÊúÄÂ∞èÂåñËøôÊ†∑ÁöÑÈîôËØØ„ÄÇ

@item ÂπÇ
ÂÄºÁöÑÊï∞ÈáèÁ∫ßÔºåÂú®ÊµÆÁÇπÊï∞ÂÄºÁöÑ‰∏Ä‰∫õÊï∞ÂÄº‰ΩçÊòØÁî®Êù•Â≠òÂÇ®ÂπÇÁöÑ„ÄÇ

@item InfÔºàÊó†Á©∑Ôºâ
‰ª£Ë°®Êó†Á©∑ÁöÑÁâπÊÆäÂÄº„ÄÇ‰∏éÂÖ∂‰ªñÁöÑÊï∞ÊàñËÄÖÊó†Á©∑Êï∞‰πãÈó¥ÁöÑÊìç‰Ωú‰∫ßÁîüÊó†Á©∑„ÄÇ

@item ÈùûÊï∞ÂÄº
‚Äú‰∏çÊòØ‰∏Ä‰∏™Êï∞Â≠ó„ÄÇ‚Äù
@footnote{ÊÑüË∞¢ Michael Brennan Êèê‰æõ‰∫ÜËøô‰∏™ÊèèËø∞ÔºàÊàë‰ª¨ÊîπÂÜô‰∫ÜÂéüÊèèËø∞ÔºâÂíåËøô‰∫õ‰æãÂ≠ê„ÄÇ}
Â∞ùËØïËÆ°ÁÆóÊó∂ÔºåÊó†Ê≥ïÂæóÂà∞ÂÆûÊï∞ÁªìÊûúÁöÑ‰∏Ä‰∏™ÁâπÊÆäÂÄº„ÄÇÂú®ËøôÊ†∑ÁöÑÊÉÖÂÜµ‰∏ãÔºåÁ®ãÂ∫èË¶Å‰πà‰ºöÊî∂Âà∞‰∏Ä‰∏™ÊµÆÁÇπÊï∞ÂºÇÂ∏∏ÔºåÊàñËÄÖÂèñÂæó‰∏Ä‰∏™ @code{NaN} ÁöÑÁªìÊûú„ÄÇIEEE 754 Ê†áÂáÜÂª∫ËÆÆÁ≥ªÁªüÂ∫îËØ•ËøîÂõû @code{NaN}„ÄÇÊúâ‰∏Ä‰∫õ‰æãÂ≠êÂ¶Ç‰∏ãÔºö

@table @code
@item sqrt(-1)
ËøôÂè™ÊúâÂú®Â§çÊï∞ÁöÑËåÉÂõ¥ÂÜÖÊâçÊòØÊúâÊÑè‰πâÁöÑÔºå‰ΩÜÊòØÂú®ÂÆûÊï∞ËåÉÂõ¥ÂÜÖÔºåÁªìÊûúÂàôÊòØ @code{NaN}„ÄÇ

@item log(-8)
@minus{}8 ‰∏çÂú® @code{log()} ÁöÑÂüüÂÜÖÔºåÊâÄ‰ª•ÁªìÊûú‰∏∫ @code{NaN}„ÄÇ
@end table

@item Ê≠£ËßÑÂåñ
Á≥ªÊï∞ÂèäÂÖ∂ÂÆûÈôÖÂ≠òÂÇ®ÊñπÂºèÔºàÂêéÈù¢‰ºöÊúâËØ¥ÊòéÔºâ„ÄÇÂÄº‰ºöË¢´Ë∞ÉÊï¥‰ΩøÂæóÁ¨¨‰∏Ä‰Ωç‰∏∫ 1ÔºåÂõ†Ê≠§ÂºÄÂßãÁöÑ‰∏Ä‰ΩçÊòØÂÅáÊÉ≥Â≠òÂú®ÔºåÂÆûÈôÖÂπ∂Ê≤°ÊúâÂ≠òÂÇ®Ëµ∑Êù•„ÄÇËøôÂèØ‰ª•Êèê‰æõÂ§ö‰∏Ä‰ΩçÁöÑÁ≤æÂ∫¶„ÄÇ

@item Á≤æÂ∫¶
Áî®‰∫éË°®Á§∫ÊµÆÁÇπÊï∞ÂÄºÁöÑ‰ΩçÊï∞„ÄÇ‰ΩçÊï∞Ë∂äÂ§öÔºåÂàôÂèØ‰ª•Ë°®Á§∫Êõ¥Â§öÁöÑÊï∞ÂÄº„ÄÇ‰∫åËøõÂà∂‰∏éÂçÅËøõÂà∂Êï∞Â∫¶ÈÉΩÊòØÂ§ßÊ¶ÇÁöÑÔºåÂèØÊ†πÊçÆÂ¶Ç‰∏ãÁöÑÂÖ¨ÂºèÔºö

@display
@iftex
@math{prec = 3.322 @cdot dps}
@end iftex
@ifnottex
@ifnotdocbook
@var{prec} = 3.322 * @var{dps}
@end ifnotdocbook
@end ifnottex
@docbook
<emphasis>prec</emphasis> = 3.322 &sdot; <emphasis>dps</emphasis>
@end docbook
@end display

@noindent
Âú®ËøôÈáåÔºå@emph{prec} Ë°®Á§∫‰∫åËøõÂà∂Êï∞Â∫¶Ôºà‰ª•‰ΩçÊù•Ë°°ÈáèÔºâÔºå@emph{dps}ÔºàÂçÅËøõÂà∂‰ΩçÁöÑÁº©ÂÜôÔºâÊòØÂçÅËøõÂà∂‰Ωç„ÄÇ

@item ËàçÂÖ•ËàçÂá∫Ê®°Âºè
Â¶ÇÊûúÈúÄË¶ÅÔºåÊï∞ÂÄºÊòØÂ¶Ç‰ΩïÊù•ËøõË°åËàçÂÖ•ËàçÂá∫ÁöÑ„ÄÇÂêéÈù¢‰ºöÊèê‰æõÊõ¥Â§öÁöÑÁªÜËäÇ„ÄÇ

@item Á≥ªÊï∞
ÊµÆÁÇπÊï∞Áî±Á≥ªÊï∞‰∏é 10 ÁöÑÂπÇÊåáÊï∞Áõ∏‰πòÁªÑÊàê„ÄÇÊØîÂ¶ÇÔºåÂú® @code{1.2345e67}ÔºåÂàôÁ≥ªÊï∞‰∏∫ @code{1.2345}„ÄÇ

@item Stability
@uref{http://en.wikipedia.org/wiki/Numerical_stability,
ÂÖ≥‰∫éÁ®≥ÂÆöÊÄßÁöÑÁª¥Âü∫ÁôæÁßëÊñáÊ°£} ‰∏≠ËØ¥‚Äú‰∏Ä‰∏™ËÆ°ÁÆóÂèØËØÅÂú∞‰∏ç‰ºöÊâ©Â§ßËøë‰ººÈîôËØØÁß∞‰∏∫Âú®Êï∞ÂÄº‰∏äÊòØÁ®≥ÂÆöÁöÑ„ÄÇ‚Äù 
@end table

Êü•Áúã @uref{http://en.wikipedia.org/wiki/Accuracy_and_precision,
Áª¥Âü∫ÁôæÁßëÂÖ≥‰∫éÁ≤æÁ°ÆÊÄß‰∏éÁ≤æÂ∫¶ÁöÑÊñáÁ´†} Êù•Ëé∑ÂèñÁ±ª‰ººÊúØËØ≠ÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ

Âú®Áé∞‰ª£ÁöÑÁ≥ªÁªü‰∏äÔºåÊµÆÁÇπÊï∞Á°¨‰ª∂‰ΩøÁî® IEEE 754 Ê†áÂáÜÂÆö‰πâÁöÑË°®Á§∫‰ª•ÂèäÊìç‰Ωú„ÄÇIEEE 754 ÁöÑÁ±ªÂûãÁöÑ‰∏â‰∏™Ê†áÂáÜÊòØ 32 ‰ΩçÂçïÁ≤æÂ∫¶Ôºå64 ‰ΩçÂèåÁ≤æÂ∫¶‰ª•Âèä 128 ‰ΩçÂõõÁ≤æÂ∫¶„ÄÇËøô‰∏™Ê†áÂáÜ‰πüÊåáÂÆö‰∫ÜÊâ©Â±ïÁ≤æÂ∫¶ÁöÑÊ†ºÂºè‰ª•ÂÖÅËÆ∏Êõ¥Â§ßÁ≤æÂ∫¶‰ª•ÂèäÊõ¥Â§ßÁöÑÊåáÊï∞ËåÉÂõ¥„ÄÇÔºà@command{awk} Âè™‰ΩøÁî® 64 ‰ΩçÂèåÁ≤æÂ∫¶Ê†ºÂºè„ÄÇÔºâ

@ref{table-ieee-formats} ÂàóÂá∫‰∫ÜÂü∫Êú¨ÁöÑ IEEE 754 ‰∫åËøõÂà∂Ê†ºÂºèÁöÑÁ≤æÂ∫¶‰ª•ÂèäÊåáÊï∞ÂüüÂÄº„ÄÇ

@float Table,table-ieee-formats
@caption{Âü∫Êú¨ÁöÑ IEEE Ê†ºÂºèÁöÑÂÄº}
@multitable @columnfractions .20 .20 .20 .20 .20
@headitem ÂêçÂ≠ó @tab ÈÉ®‰ΩçÊï∞ @tab Á≤æÂ∫¶ @tab ÊúÄÂ∞èÊåáÊï∞ @tab ÊúÄÂ§ßÊåáÊï∞
@item ÂçïÁ≤æÂ∫¶ @tab 32 @tab 24 @tab @minus{}126 @tab +127
@item ÂèåÁ≤æÂ∫¶ @tab 64 @tab 53 @tab @minus{}1022 @tab +1023
@item ÂõõÁ≤æÂ∫¶ @tab 128 @tab 113 @tab @minus{}16382 @tab +16383
@end multitable
@end float

@quotation ÊèêÁ§∫
Á≤æÂ∫¶Êï∞ÂÄºÂåÖÂê´‰∫ÜÈöêÂê´ÁöÑÊúÄÂºÄÂßãÁöÑ‰∏Ä‰ΩçÔºåÂõ†Ê≠§ÊØîÊâÄÁªôÁöÑÁ≥ªÊï∞Ë¶ÅÂ§ö‰∏Ä‰Ωç„ÄÇ
@end quotation

@node MPFR features
@section @command{gawk} ÁöÑ‰ªªÊÑèÁ≤æÂ∫¶ËÆ°ÁÆó

ÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ΩøÁî®Áî±ÂÖ∂ÊâÄËøêË°åÁöÑÁ≥ªÁªüÁöÑÁ°¨‰ª∂Êù•Êèê‰æõÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÂÄº„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûúÂÆÉÁºñËØëÁöÑÊó∂ÂÄôÊ≤°ÊúâÊåáÂÆöÔºåÂπ∂‰∏î @option{-M} ÂëΩ‰ª§Ë°åÈÄâÈ°πË¢´Êèê‰æõ‰∫ÜÔºå@command{gawk} Âàô‰ΩøÁî® @uref{http://www.mpfr.org,
GNU MPFR} ‰ª•Âèä @uref{http://gmplib.org, GNU MP}ÔºàGMPÔºâÂ∫ìÊù•ÊâßË°å‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï∞ÂÄºÁÆóÊúØËøêÁÆó„ÄÇ‰Ω†ÂèØ‰ª•ËøôÊ†∑Êù•Êü•ÁúãÊòØÂê¶ÊîØÊåÅ MPFRÔºö

@example
$ @kbd{gawk --version}
@print{} GNU Awk 4.1.2, API: 1.1 (GNU MPFR 3.1.0-p3, GNU MP 5.0.2)
@print{} Copyright (C) 1989, 1991-2015 Free Software Foundation.
@dots{}
@end example

@noindent
Ôºà‰Ω†ÂèØËÉΩÁúãÂà∞‰∏éËøôÈáåÊòæÁ§∫ÁöÑ‰∏çÂêåÁöÑÁâàÊú¨Êï∞„ÄÇ‰πüÊ≤°ÊúâÈóÆÈ¢òÔºåÈáçË¶ÅÁöÑÊòØÁúã GNU MPFR ‰∏é GNU MP ÊòØÂê¶ÊòæÁ§∫Âú®ËæìÂá∫‰∏≠„ÄÇÔºâ

Âè¶Â§ñÔºåÂú® @code{PROCINFO} Êï∞ÁªÑ‰∏≠ÁöÑ‰∏Ä‰∫õÂÖÉÁ¥†ÂèØ‰ª•Êù•Êèê‰æõ MPFR ‰∏é GMP Â∫ì‰∏Ä‰∫õ‰ø°ÊÅØÔºàÊü•Áúã @pxref{Auto-set}Ôºâ„ÄÇ

MPFR Â∫ìÊèê‰æõ‰∫ÜÂú®Á≤æÂ∫¶‰∏éËàçÂÖ•ËàçÂá∫Ê®°ÂºèÁöÑÁ≤æÁ°ÆÊéßÂà∂ÔºåÂπ∂ÁªôÂá∫Ê≠£Á°ÆÁöÑËàçÂÖ•ËàçÂá∫ÔºåÂèØÈáçÁé∞ÁöÑÔºåÂπ≥Âè∞Êó†ÂÖ≥ÁöÑÁªìÊûú„ÄÇ‰ΩøÁî® @option{-M} ÂëΩ‰ª§Ë°åÂèÇÊï∞ÔºåÊâÄÊúâÁöÑÊµÆÁÇπÁÆóÊúØÊìç‰ΩúÁ¨¶‰ª•ÂèäÊï∞ÂÄºÂáΩÊï∞ÈÉΩÂèØ‰ª•‰∫ßÁîü‰ªªÊÑèÊÉ≥Ë¶ÅÁöÑÁî± MPFR ÊâÄÊèê‰æõÁöÑÁ≤æÂ∫¶„ÄÇ

Êúâ‰∏§‰∏™È¢ÑÂÆö‰πâÁöÑÂèòÈáèÔºå@code{PREC} ‰∏é @code{ROUNDMODE} Êèê‰æõ‰∫ÜÂ∑•‰ΩúÁ≤æÂ∫¶‰∏éËàçÂÖ•ËàçÂá∫Ê®°ÂºèÁöÑÊéßÂà∂„ÄÇÁ≤æÂ∫¶‰∏éËàçÂÖ•ËàçÂá∫Ê®°ÂºèÁöÑËÆæÁΩÆÂØπ‰∫é‰πãÂêéÁöÑÊìç‰ΩúÊòØÂÖ®Â±ÄÁöÑ„ÄÇÊü•Áúã @xref{Setting precision}Ôºå‰ª•Âèä @ref{Setting the rounding mode}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

@node FP Math Caution
@section  ÊµÆÁÇπÁÆóÊ≥ïÔºö‰π∞ËÄÖËá™ÊÖéÔºÅ

@quotation
@i{Êï∞Â≠¶ËØæÂ§™Èöæ‰∫Ü„ÄÇ}
@author Teen Talk Barbie, July 1992
@end quotation

Ëøô‰∏Ä@value{SECTION}Êèê‰æõ‰∫Ü‰∏Ä‰∏™Êõ¥È´òÂ±Ç‰∏äËßÜÂõæÔºåÊù•ÂÆ°ËßÜÂú®ÊâßË°åÈùûÂ∏∏Â§öÁöÑÊµÆÁÇπÊï∞ËÆ°ÁÆóÊó∂ÊâÄ‰∫ßÁîüÈóÆÈ¢ò„ÄÇ 
@footnote{Êúâ‰∏Ä‰∏™ÈùûÂ∏∏Â•ΩÁöÑ @uref{http://www.validlab.com/goldberg/paper.pdf,
ÂÖ≥‰∫éÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆóÁöÑËÆ∫Êñá}ÔºåÁî± David Goldberg ÊâÄÂÜôÔºå‚ÄúWhat Every Computer Scientist Should Know About Floating-Point Arithmetic‚ÄùÔºå
@cite{ACM Computing Surveys} @strong{23}, 1 (1991-03): 5-48. Â¶ÇÊûú‰Ω†ÂØπ‰∫éÁªÜËäÇÈùûÂ∏∏ÊÑüÂÖ¥Ë∂£ÔºåËøô‰∏™ÂÄºÂæó‰∏ÄËØªÔºå‰ΩÜÊòØÁ°ÆÂÆûÈúÄË¶Å‰∏ÄÂÆöÁöÑËÆ°ÁÆóÊú∫ÁßëÂ≠¶ËÉåÊôØ„ÄÇ}
Ëøô‰∫õËÆ®ËÆ∫ÂêåÊ†∑‰πüÈÄÇÁî®‰∫éÁ°¨‰ª∂‰∏é‰ªªÊÑèÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆó„ÄÇ

@quotation Ê≥®ÊÑè
ËøôÈáåÁöÑÂÜÖÂÆπÊúâÊÑèÂú∞ÂÜôÂæóÈùûÂ∏∏Ê¶ÇÊã¨„ÄÇÂ¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÅö‰∏Ä‰∫õ‰∏•Ê†ºÁöÑËÆ°ÁÆóÁÆóÊúØËøêË°åÔºå‰Ω†È¶ñÂÖàË¶ÅËøõË°å‰∏Ä‰∫õÁ†îÁ©∂ÔºåËÄå‰∏ç‰ªÖ‰ªÖ‰æùËµñÊàë‰ª¨ÊâÄÂëäËØâ‰Ω†ÁöÑ„ÄÇ
@end quotation

@menu
* Inexactness of computations:: Floating point math is not exact.
* Getting Accuracy::            Getting more accuracy takes some work.
* Try To Round::                Add digits and round.
* Setting precision::           How to set the precision.
* Setting the rounding mode::   How to set the rounding mode.
@end menu

@node Inexactness of computations
@subsection ÊµÆÁÇπËÆ°ÁÆóÊòØ‰∏çÁ≤æÁ°ÆÁöÑ

‰∫åËøõÂà∂ÊµÆÁÇπÊï∞Ë°®Á§∫‰ª•ÂèäÁÆóÊúØËøêË°åÊòØ‰∏çÁ≤æÁ°ÆÁöÑ„ÄÇÂÉè 0.1 ËøôÊ†∑ÁÆÄÂçïÁöÑÂÄºÊ≤°‰∏çËÉΩÁ≤æÁ°ÆÂú∞Áî±‰∫åËøõÂà∂ÁöÑÊµÆÁÇπÊï∞Êù•Ë°®Á§∫ÔºåÊµÆÁÇπÊï∞ÊúâÊúâÈôêÁöÑÁ≤æÂ∫¶Êï∞Ë°®Á§∫Âú®ËÆ°ÁÆóÁ≠âÁ∫ß‰∏äÔºåÊàñËÄÖ‰∏≠Èó¥ÁöÑÂ≠òÂÇ®Á≤æÂ∫¶ÁöÑ‰∏ÄÁÇπÁÇπÊîπÂèòÈÉΩ‰ºö‰ª•ÊîπÂèòÁªìÊûú„ÄÇÂú®‰ªªÊÑèÁ≤æÂ∫¶ÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆóÊó∂Ôºå‰∏∫‰∫Ü‰ΩøÈóÆÈ¢òÊõ¥Á≥üÁ≥ïÔºå ‰Ω†ÂèØ‰ª•Âú®ÂºÄÂßãËÆ°ÁÆó‰πãÂâçËÆæÁΩÆÁ≤æÂ∫¶Ôºå‰ΩÜÊòØ‰Ω†Ê≤°ÊúâÂäûÊ≥ï‰øùËØÅÂú®ÊúÄÁªàÁªìÊûú‰∏äÁöÑÂçÅËøõÂà∂ÁöÑÊúÄÈ´òÊúâÊïà‰ΩçÁöÑÊï∞ÂÄº„ÄÇ

@menu
* Inexact representation::      Numbers are not exactly represented.
* Comparing FP Values::         How to compare floating point values.
* Errors accumulate::           Errors get bigger as they go.
@end menu

@node Inexact representation
@subsubsection ÂæàÂ§öÁöÑÊï∞‰∏çËÉΩÂÆåÂÖ®Ë°®Á§∫

ÊâÄ‰ª•ÔºåÂú®ÂºÄÂßãÂÜô‰ªª‰Ωï‰ª£Á†Å‰πãÈó¥Ôºå‰Ω†Ë¶ÅËÄÉËôë‰∏Ä‰∏ã‰Ω†Âà∞Â∫ïÊÉ≥Ë¶ÅÁöÑÊòØ‰ªÄ‰πàÔºå‰ª•ÂèäÂà∞Â∫ï‰ºöÂèëÁîü‰ªÄ‰πà„ÄÇËÄÉËôë‰∏ãÈù¢ÁöÑ‰∏§‰∏™‰æãÂ≠ê‰∏≠ÁöÑ‰∏§‰∏™Êï∞Ôºö

@example
x = 0.875             # 1/2 + 1/4 + 1/8
y = 0.425
@end example

‰∏çÂÉèÊï∞Â≠ó @code{y}ÔºåÂú® @code{x} ‰∏≠Â≠òÂÇ®ÁöÑÊï∞Â≠óÂèØ‰ª•Á≤æÁ°ÆÂú∞Áî®‰∫åËøõÂà∂Êù•Ë°®Á§∫ÔºåÂõ†‰∏∫ÂÆÉÂèØ‰ª•ÂÜôÊàêÊúâÈôê‰∏™ÂàÜÊï∞ÁöÑÂíåÔºåËÄåÂÆÉ‰ªñÁöÑÂàÜÊØçÈÉΩÊòØ 2 ÁöÑÂπÇÊ¨°Êñπ„ÄÇÂΩì @command{gawk} ‰ªéÁ®ãÂ∫èÊ∫ê‰ª£Á†Å‰∏≠ËØªÂèñÊµÆÁÇπÊï∞Êó∂ÔºåÂÆÉ‰ºöËá™Âä®Âú∞ÂØπ‰∫éÂ≠óËøõË°åËàçÂÖ•ËàçÂá∫ÔºåËÄå‰∏çÁÆ°‰Ω†ÁöÑÊú∫Âô®ÊîØÊåÅÁöÑÊòØ‰ªÄ‰πàÊ†∑ÁöÑÁ≤æÂ∫¶„ÄÇÂ¶ÇÊûú‰Ω†Â∞ùËØï‰Ω†Áî®ËæìÂá∫Ê†ºÂºè‰∏≤ @code{"%.17g"} ÊâìÂç∞Êüê‰∏™ÂèòÈáèÁöÑÂÜÖÂÆπÊó∂ÔºåÂÆÉ‰∏ç‰ºö‰∫ßÁîü‰∏é‰Ω†ÊâÄËµãÁªôÂÆÉÁöÑ‰∏ÄÊ†∑ÁöÑÂÄºÔºö

@example
$ @kbd{gawk 'BEGIN @{ x = 0.875; y = 0.425}
> @kbd{              printf("%0.17g, %0.17g\n", x, y) @}'}
@print{} 0.875, 0.42499999999999999
@end example

ÈÄöÂ∏∏ÁöÑÈîôËØØÊòØÂæàÂ∞èÁöÑÔºå‰Ω†ÂèØËÉΩÈÉΩÊ≥®ÊÑè‰∏çÂà∞„ÄÇÂ¶ÇÊûú‰Ω†Á°ÆÂÆûÈúÄË¶ÅÔºå‰Ω†ÂèØ‰ª•ÊåáÂÆöËæìÂá∫‰∏≠ÊâÄÈúÄË¶ÅÁöÑÁ≤æÂ∫¶„ÄÇ
ÈÄöÂ∏∏ÂÉè @code{"%.15g"} ‰∏ÄÊ†∑ÁöÑÊ†ºÂºè„ÄÇÂú®‰∏ä‰∏Ä‰∏™‰æãÂ≠ê‰∏≠ÔºåËøô‰ºö‰∫ßÁîü‰∏éËæìÂÖ•‰∏ÄÊ†∑ÁöÑÂÄº„ÄÇ

@node Comparing FP Values
@subsubsection ÂÄºÊØîËæÉÊó∂Ë¶ÅÂ∞èÂøÉ

Áî±‰∫éÂ∫ïÂ±ÇÁöÑË°®Á§∫‰∏éÂÆûÈôÖÁöÑÂÄºÊúâ‰∏Ä‰∫õÂÅèÁ¶ªÔºåÊâÄ‰ª•ÊØîËæÉÊµÆÁÇπÊï∞Êù•Êü•Áúã‰∏§ËÄÖÊòØÂê¶ÂÆåÂÖ®Áõ∏Á≠âÊòØ‰∏Ä‰∏™‰∏çÂ•ΩÁöÑ‰∏ªÊÑè„ÄÇ‰∏ãÈù¢ÊòØ‰∏Ä‰∏™‰æãÂ≠êÔºåÂÆÉ‰∏ç‰ºöÂ¶Ç‰Ω†ÊâÄÈ¢ÑÊúüÁöÑÈÇ£Ê†∑ÊâßË°åÔºö

@example
$ @kbd{gawk 'BEGIN @{ print (0.1 + 12.2 == 12.3) @}'}
@print{} 0
@end example

ÊØîËæÉÊµÆÁÇπÊï∞ÁöÑÂÄº‰ª•Êü•ÁúãÂÆÉ‰ª¨ÊòØÂê¶ÊòØÂú®‰∏Ä‰∏™ÂæàÂ∞èÁöÑËåÉÂõ¥ÂÜÖÁöÑÂ∑ÆÂºÇÊâçÊòØÊ≠£Á°ÆÊÉ≥Ê≥ïÔºàÁß∞‰∏∫ @dfn{deltaÔºàÂ∑ÆÂºÇÔºâ} ÊàñËÄÖ@dfn{ÂÆπÂøçÂ∫¶}Ôºâ„ÄÇ‰Ω†ÈúÄË¶ÅÁ°ÆÂÆöÂ∑ÆÂºÇÊòØÂ§öÂ∞èÂØπ‰Ω†Êù•ËØ¥ÊòØÈáçË¶ÅÁöÑ„ÄÇËøôÊ†∑ÁöÑÂ§ÑÁêÜ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö

@example
delta = 0.00001                 # for example
difference = abs(a) - abs(b)    # subtract the two values
if (difference < delta)
    # all ok
else
    # not ok
@end example

@noindent
ÔºàÊàë‰ª¨ÂÅáËÆæ‰Ω†Êúâ‰∏Ä‰∏™ÁÆÄÂçïÁöÑÁªùÂØπÂÄºÂáΩÊï∞ÔºåÂêçÂ≠ó‰∏∫ @code{abs()}ÔºåÂÆö‰πâÂú®‰Ω†ÁöÑÁ®ãÂ∫èÁöÑ‰ª£Á†ÅÁöÑÊüêÂ§Ñ„ÄÇÔºâ

@node Errors accumulate
@subsubsection ÈîôËØØÁ¥ØÁßØ

Âú®Âçï‰∏™ÊµÆÁÇπÊï∞ËÆ°ÁÆó‰∏≠ÊçüÂ§±ÁöÑÁ≤æÂ∫¶ÔºåÈÄöÂ∏∏‰∏çÈúÄË¶ÅÊãÖÂøÉ„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†ËÆ°ÁÆóÁöÑÂÄºÊòØ‰∏ÄÁ≥ªÂàóÁöÑÊµÆÁÇπÊï∞Êìç‰ΩúÁöÑÁªìÊûúÔºåÂàôÈîôËØØÂèØ‰ª•Á¥ØÁßØÂπ∂‰∏îÂèØ‰ª•ÊûÅÂ§ßÂú∞ÂΩ±ÂìçËÆ°ÁÆóÊú¨Ë∫´„ÄÇ‰∏ãÈù¢Â∞ùËØïÁî®ÂÆÉ‰∏ÄÁ≥ªÂàóÁöÑË°®Á§∫Êù•ËÆ°ÁÆó @value{PI} ÁöÑÂÄºÔºö

@example
BEGIN @{
    x = 1.0 / sqrt(3.0)
    n = 6
    for (i = 1; i < 30; i++) @{
        n = n * 2.0
        x = (sqrt(x * x + 1) - 1) / x
        printf("%.15f\n", n * x)
    @}
@}
@end example

ÂΩìÊâßË°åÁöÑÊó∂ÂÄôÔºåÈîôËØØ‰ºö‰º†ÈÄíÂà∞ÂêéÈù¢ÁöÑËÆ°ÁÆó‰∏≠ÔºåÂØºËá¥Âú®ËøõË°åÈô§ 0 Êìç‰ΩúÊó∂ÔºåÂæ™ÁéØËøáÊó©Âú∞ÁªìÊùüÔºö

@example
$ @kbd{gawk -f pi.awk}
@print{} 3.215390309173475
@print{} 3.159659942097510
@print{} 3.146086215131467
@print{} 3.142714599645573
@dots{}
@print{} 3.224515243534819
@print{} 2.791117213058638
@print{} 0.000000000000000
@error{} gawk: pi.awk:6: fatal: division by zero attempted
@end example

‰∏ãÈù¢ÊòØÂè¶Â§ñ‰∏Ä‰∏™‰æãÂ≠êÔºåËØ¥ÊòéÂÜÖÈÉ®Ë°®Á§∫ÁöÑ‰∏çÁ≤æÁ°ÆÂØºËá¥‰∏Ä‰∏™ÈùûÊúüÊúõÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk 'BEGIN @{}
>   @kbd{for (d = 1.1; d <= 1.5; d += 0.1)    # loop five times (?)}
>       @kbd{i++}
>   @kbd{print i}
> @kbd{@}'}
@print{} 4
@end example

@node Getting Accuracy
@subsection Ëé∑Âèñ‰Ω†ÈúÄË¶ÅÁöÑÁ≤æÂ∫¶

‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÁÆóÊúØËøêÁÆóÂèØ‰ª•ÂæóÂà∞Á≤æÁ°ÆÁöÑÁªìÊûú‰πàÔºüËøô‰∏™Ê≤°ÊúâÂæàÂ•ΩÁöÑÁ≠îÊ°à„ÄÇ‰ª£Êï∞ÁöÑÊ†áÂáÜËßÑÂàôÂ∏∏Â∏∏Êó†Ê≥ïÁî®Âú®ÊµÆÁÇπÊï∞ÁöÑÁÆóÊúØËøêÁÆó‰∏≠„ÄÇÂú®Ëøô‰∫õ‰∫ãÊÉÖ‰∏≠ÔºåÂàÜÈÖç‰∏éÂÖ≥ËÅîËßÑÂàôÈÉΩÊó†Ê≥ïÂÆåÊï¥Âú∞Â∫îÁî®ÔºåÊìç‰ΩúÁöÑÁ≠âÁ∫ßÂØπ‰∫é‰Ω†ÁöÑËÆ°ÁÆóÈùûÂ∏∏ÈáçË¶Å„ÄÇËàçÂÖ•ËàçÂá∫ÈîôËØØÔºåÁ¥ØÁßØÁ≤æÂ∫¶ÊçüÂ§±Ôºå‰ª•ÂèäÂÜÖÈÉ®ËøêË°åÁªèÂ∏∏ÈÉΩÊòØÈ∫ªÁÉ¶‰∫ã„ÄÇ

ÂΩì @command{gawk} ‰ΩøÁî®Êú∫Âô®ÁöÑÂèåÁ≤æÂ∫¶Êù•ÊµãËØïË°®ËææÂºè @samp{0.1 + 12.2} ‰∏é @samp{12.3} ÁöÑÁõ∏Á≠âÊÄßÊó∂ÔºåÂæóÂà∞ÁöÑÁªìÊûúÊòØ‰∏çÁõ∏Á≠â„ÄÇÔºàÊü•Áúã @xref{Comparing FP Values}.„ÄÇÔºâ‰Ω†ÂèØ‰ª•ÈÄöËøáÊèê‰æõÁ≤æÂ∫¶Êù•ÂæóÂà∞‰Ω†ÊÉ≥Ë¶ÅÁöÑÁªìÊûúÔºåÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠ÂàôÊòØË¶ÅÊèêÂà∞ 56 ‰ΩçÔºö

@example
$ @kbd{gawk -M -v PREC=56 'BEGIN @{ print (0.1 + 12.2 == 12.3) @}'}
@print{} 1
@end example

Â¶ÇÊûúÊ∑ªÂä†Â§ö‰∏Ä‰∏™‰Ωç‰∏çÈîôÔºåÈÇ£‰πàÊ∑ªÂä†Â§ö‰∏Ä‰ΩçÊòØ‰∏çÊòØÊõ¥Â•ΩÔºü‰∏ãÈù¢ÊòØÂΩì‰Ω†‰ΩøÁî®Êõ¥Â§ßÁöÑ @code{PREC} Êó∂ÊâÄ‰∫ßÁîüÁöÑÁªìÊûúÔºö

@example
$ @kbd{gawk -M -v PREC=201 'BEGIN @{ print (0.1 + 12.2 == 12.3) @}'}
@print{} 0
@end example

ËøôÊó¢‰∏çÊòØ @command{gawk} ÁöÑ bug ‰πü‰∏çÊòØ MPFR Â∫ìÁöÑ bug„ÄÇÂ§ßÂÆ∂ÂæàÂÆπÊòìÂøòËÆ∞ÊúâÈôêÁöÑ‰ΩçÊï∞Áî®Êù•Â≠òÂÇ®‰∏Ä‰∏™ÂÄºÔºåÈÄöÂ∏∏ÈÉΩÂú®ËøõË°å‰∫ÜÁõ∏Â∫îÁöÑËàçÂÖ•ËàçÂá∫ÂêéÈÉΩÊòØ‰∏Ä‰∏™Áõ∏‰ººÂÄº„ÄÇÂØπ‰∫éÊµãËØïÁõ∏Á≠âÊÄßÔºåÂè™ÊúâÂú®ÊâÄ‰∏§‰∏™Êìç‰ΩúÊï∞‰∏≠@emph{ÊâÄÊúâ}Á≠âÈÉΩÁõ∏ÂêåÊó∂Êâç‰ºöÊàêÂäü„ÄÇÂõ†‰∏∫Âú®‰ª•ÁâπÂÆöÁöÑÁ≤æÂ∫¶‰∏éÊúâÊïàÁöÑËàçÂÖ•ËàçÂá∫Ê®°ÂºèËøõË°åÊµÆÁÇπÊï∞ËøêË°åÂêéËøôÂπ∂‰∏ç‰∏ÄÂÆöË¶ÅÂøÖÈ°ªÁöÑÔºåÁõ¥Êé•ËøõË°åÁõ∏Á≠âÊÄßÁöÑÊØîËæÉÊòØ‰∏ç‰ºöÊàêÂäüÁöÑ„ÄÇÁõ∏ÂèçÔºåÊØîËæÉ‰∏§‰∏™Êï∞‰ª•Êü•ÁúãÂÆÉ‰ª¨ÊòØÂê¶Áõ∏‰∫í‰πãÈó¥ÊòØÂú®ÊâÄÂ∏åÊúõÁöÑÂ∑ÆÂºÇÂå∫Èó¥ÂÜÖÊâçÊòØÊ≠£Ëß£„ÄÇ

Âú®Â∫îÁî®‰∏≠Ôºå15 ÊàñËÄÖÊõ¥Â∞ëÁöÑÂçÅËøõÂà∂‰ΩçÂ∞±Â§ü‰∫Ü„ÄÇÁ°¨‰ª∂ÁöÑÂèåÁ≤æÂ∫¶ÁÆóÊúØËøêÁÆóÊòØÂêàÈÄÇÁöÑÔºåÂπ∂‰∏î‰πüÂæàÂø´ÈÄü„ÄÇ‰ΩÜÊòØ‰Ω†Ë¶ÅËÆ∞‰ΩèÔºåÊØè‰∏Ä‰∏™ÊµÆÁÇπÊï∞Êìç‰ΩúÈÉΩ‰ºöÂØºËá¥‰∏Ä‰∏™Êñ∞ÁöÑËàçÂÖ•ËàçÂá∫ÈîôËØØÔºåËøõËÄåÂØºËá¥ÊÇ≤ÂâßÊÄßÁöÑÁªìÊûúÔºåËøôÊ≠£Â¶ÇÊó©ÂÖàÁöÑÂ∞ùËØïËÆ°ÁÆó @value{PI} ÁöÑÂÄºÊâÄËØ¥ÊòéÁöÑ‰∏ÄÊ†∑„ÄÇÂú®Ëøô‰∏™ÊÉÖÂÜµÈáåÔºåÈ¢ùÂ§ñÁöÑÁ≤æÂ∫¶ÂèØ‰ª•ÊûÅÂ§ßÂú∞Êèê‰æõËÆ°ÁÆóÁöÑÁ®≥ÂÆöÊÄß‰∏éÁ≤æÁ°ÆÂ∫¶„ÄÇ

Âè¶Â§ñÔºå‰Ω†ÈúÄË¶Å‰∫ÜËß£ÔºåÂú®ÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆó‰∏≠ÔºåÈáçÂ§çÂä†Âπ∂‰∏ç‰∏ÄÂÆöÁ≠â‰∫é‰πò„ÄÇËøô‰∏™‰æãÂ≠êÂú® @ref{Errors accumulate}Ôºö

@example
$ @kbd{gawk 'BEGIN @{}
>   @kbd{for (d = 1.1; d <= 1.5; d += 0.1)    # loop five times (?)}
>       @kbd{i++}
>   @kbd{print i}
> @kbd{@}'}
@print{} 4
@end example

@noindent
ÈÄöËøáÈÄâÊã©‰ªªÊÑèÂ§ßÊï∞ÂÄºÁöÑ @code{PREC}Ôºå‰Ω†ÂèØËÉΩ‰ºöÔºå‰πüÂèØËÉΩ‰∏ç‰ºöÊàêÂäüÂú∞ÂèñÂæóÊ≠£Á°ÆÁöÑÁªìÊûú„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁ´ãÂç≥ÈáçÁªÑÈóÆÈ¢òÈÄöÂ∏∏ÊâçÊòØÊ≠£Á°ÆÁöÑÊñπÊ≥ï„ÄÇ

@node Try To Round
@subsection Â¢ûÂä†Âá†‰ΩçÁ≤æÂ∫¶ÁÑ∂ÂêéÂÜçËàçÂÖ•ËΩ¨Âá∫

Èô§‰∫Ü‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÊï∞ÁÆóÊúØËøêÁÆóÔºå‰Ω†ÊâÄÈúÄË¶ÅÁöÑÂ∏∏Â∏∏ÊòØË∞ÉÊï¥‰Ω†ÁöÑÈÄªËæëÔºåÊàñËÄÖÊòØËÆ°ÁÆóÁöÑ‰∏çÂêåÁ≠âÁ∫ß„ÄÇÊó©ÂÖàÁöÑ‰æãÂ≠ê‰∏≠Ôºå@value{PI} ËÆ°ÁÆóÁöÑÁ®≥ÂÆöÊÄß‰∏éÁ≤æÂ∫¶ÂèØ‰ª•ÈÄöËøá‰∏ãÈù¢ÁöÑ‰ª£Êï∞ÂèòÂΩ¢ÂèØ‰ª•ÂæóÂà∞ÊèêÈ´òÔºö

@example
(sqrt(x * x + 1) - 1) / x @equiv{} x / (sqrt(x * x + 1) + 1)
@end example

@noindent
ÈÄöËøáËøôÊ†∑ÁöÑÂèòÂåñÔºåÂú® 30 ‰∏™Ëø≠‰ª£ÂêéÔºåÁ®ãÂ∫èÊ±áÈõÜÂà∞ @value{PI} ÁöÑÁªìÊûú‰∏∫Ôºö

@example
$ @kbd{gawk -f pi2.awk}
@print{} 3.215390309173473
@print{} 3.159659942097501
@print{} 3.146086215131436
@print{} 3.142714599645370
@print{} 3.141873049979825
@dots{}
@print{} 3.141592653589797
@print{} 3.141592653589797
@end example

@node Setting precision
@subsection ËÆæÁΩÆÁ≤æÂ∫¶

@command{gawk} ‰ΩøÁî®ÂÖ®Â±ÄÊÄßÁöÑÂ∑•‰ΩúÁ≤æÂ∫¶ ÔºåÂÆÉ‰∏ç‰ºö‰∏∫Âçï‰∏™ÁöÑÊï∞ÂÄºË∑üË∏™Á≤æÂ∫¶‰∏éÁ≤æÁ°ÆÂ∫¶„ÄÇÊâßË°åÁÆóÊúØËøêÁÆóÊàñËÄÖË∞ÉÁî®ÂÜÖÁΩÆÂáΩÊï∞Êù•ÂØπÁªìÊûúËøõË°åËàçÂÖ•ËàçÂá∫ÈÉΩ‰ª•ÂΩìÁöÑÁ≤æÂ∫¶‰∏∫ÂáÜ„ÄÇÈªòËÆ§ÁöÑÂ∑•‰ΩúÁ≤æÂ∫¶ÊòØ 53 ‰ΩçÔºå‰Ω†ÂèØ‰ª•ÈÄöËøá‰øÆÊîπÂèòÈáè @code{PREC} Êù•ÊîπÂèò„ÄÇ‰Ω†‰πüÂèØ‰ª•ËÆæÁΩÆ‰∏∫È¢ÑÂÆö‰πâÁöÑÂ§ßÂ∞èÂÜôÊúâÂÖ≥ÁöÑÂÄº‰∏≤ÔºåÂ¶Ç @ref{table-predefined-precision-strings} ÊâÄÂàóÔºåËøô‰∫õÁî®Êù•ÂØπ IEEE 754 ‰∫åËøõÂà∂Ê†áÂáÜËøõË°åÊ®°Êãü„ÄÇ

@float Table,table-predefined-precision-strings
@caption{@code{PREC} ÁöÑÈ¢ÑÂÆö‰πâÁ≤æÂ∫¶‰∏≤}
@multitable {@code{"double"}} {12345678901234567890123456789012345}
@headitem @code{PREC} @tab IEEE 754 ‰∫åËøõÂà∂Ê†ºÂºè
@item @code{"half"} @tab 16 ‰ΩçÂçäÁ≤æÂ∫¶
@item @code{"single"} @tab Âü∫Êú¨ÁöÑ 32 ‰ΩçÂçïÁ≤æÂ∫¶
@item @code{"double"} @tab Âü∫Êú¨ÁöÑ 64 ‰ΩçÂèåÁ≤æÂ∫¶
@item @code{"quad"} @tab Âü∫Êú¨ÁöÑ 128 ‰ΩçÂõõÁ≤æÂ∫¶
@item @code{"oct"} @tab 256 ‰ΩçÂÖ´Á≤æÂ∫¶
@end multitable
@end float

‰∏ãÈù¢ÁöÑ‰æãÂ≠êËØ¥Êòé‰∫ÜÊîπÂèòÁÆóÊúØÊìç‰ΩúÁ¨¶ÁöÑÁ≤æÂ∫¶ÁöÑÊïàÊûúÔºö

@example
$ @kbd{gawk -M -v PREC=100 'BEGIN @{ x = 1.0e-400; print x + 0}
>   @kbd{PREC = "double"; print x + 0 @}'}
@print{} 1e-400
@print{} 0
@end example

@quotation Ê≥®ÊÑè
Ë¶ÅÂ∞èÂøÉÊµÆÁÇπÊï∞Â∏∏ÈáèÔºÅÂΩì‰ªéÁ®ãÂ∫èÊ∫ê‰ª£Á†Å‰∏≠ËØªÂèñÊµÆÁÇπÊï∞Â∏∏ÈáèÊó∂Ôºå@command{gawk} ‰ºö‰ΩøÁî®ÈªòËÆ§ÁöÑÁ≤æÂ∫¶ÔºàÂç≥ C @code{double}ÔºâÔºåÈô§ÈùûÈÄöËøáÂëΩ‰ª§Ë°åËµãÂÄºÊù•ÊîπÂèò @code{PREC} ÁöÑÂÄºÔºåÂ∞ÜÂÖ∂ÂÜÖÈÉ®Â≠ò‰∏∫ MPFR Êï∞ÂÄº„ÄÇÂú®Á®ãÂ∫èÊ∫ê‰ª£Á†ÅÈÄöËøá‰ΩøÁî® @code{PREC} Êù•ÊîπÂèòÁ≤æÂ∫¶@emph{‰∏ç‰ºö}ÂΩ±ÂìçÂ∏∏ÈáèÁöÑÁ≤æÂ∫¶„ÄÇ

Â¶ÇÊûúÈúÄË¶ÅÂú®ÊØîÈªòËÆ§ÁöÑÁ≤æÂ∫¶ËøòË¶ÅÈ´òÁöÑÁ≤æÂ∫¶‰∏äË°®Á§∫‰∏Ä‰∏™ÊµÆÁÇπÊï∞Ôºå‰ΩÜÂèà‰∏çËÉΩ‰ΩøÁî®ÂëΩ‰ª§Ë°åÂØπ @code{PREC} ËøõË°åËµãÂÄºÔºå‰Ω†Ë¶Å‰πàÂ∞ÜÂ∏∏Êï∞ÊåáÂÆö‰ºöÂ≠ó‰∏≤ÔºåË¶Å‰πàÂè™Ë¶ÅÂèØËÉΩÔºå‰ΩøÂÖ∂Êàê‰∏∫ÊúâÁêÜÊï∞Ôºå ‰∏ãÈù¢ÁöÑ‰æãÂ≠êËØ¥Êòé‰∫Ü‰∏çÂêåÁöÑÊñπÂºè‰∏ãÊâìÂç∞ÊµÆÁÇπÊï∞Â∏∏ÈáèÊó∂ÁöÑ‰∏çÂêåÔºö

@example
$ @kbd{gawk -M 'BEGIN @{ PREC = 113; printf("%0.25f\n", 0.1) @}'}
@print{} 0.1000000000000000055511151
$ @kbd{gawk -M -v PREC=113 'BEGIN @{ printf("%0.25f\n", 0.1) @}'}
@print{} 0.1000000000000000000000000
$ @kbd{gawk -M 'BEGIN @{ PREC = 113; printf("%0.25f\n", "0.1") @}'}
@print{} 0.1000000000000000000000000
$ @kbd{gawk -M 'BEGIN @{ PREC = 113; printf("%0.25f\n", 1/10) @}'}
@print{} 0.1000000000000000000000000
@end example
@end quotation

@node Setting the rounding mode
@subsection ËÆæÁΩÆËàçÂÖ•ËΩ¨Âá∫Ê®°Âºè

@code{ROUNDMODE} ÂèòÈáèÊèê‰æõ‰∫ÜÂú®Á®ãÂ∫èÂ±ÇÊéßÂà∂ËàçÂÖ•ËàçÂá∫Ê®°ÂºèÁöÑÊñπÊ≥ï„ÄÇ@code{ROUNDMODE} ‰∏é IEEE ÁöÑËàçÂÖ•ËàçÂá∫ÁöÑÊØîËæÉÊòæÁ§∫Âú® @ref{table-gawk-rounding-modes} ‰∏≠„ÄÇ

@float Table,table-gawk-rounding-modes
@caption{@command{gawk} ÁöÑËàçÂÖ•ËàçÂá∫Ê®°Âºè}
@multitable @columnfractions .45 .30 .25
@headitem ËàçÂÖ•ËàçÂá∫Ê®°Âºè @tab IEEE Âêç @tab @code{ROUNDMODE}
@item ÂêëÂÅ∂Êï∞ËàçÂÖ•ËàçÂá∫Âà∞ÊúÄËøë @tab @code{roundTiesToEven} @tab @code{"N"} or @code{"n"}
@item ÂêëÊ≠£Êó†Á©∑ËàçÂÖ•ËàçÂá∫ @tab @code{roundTowardPositive} @tab @code{"U"} or @code{"u"}
@item ÂêëË¥üÊó†Á©∑ËàçÂÖ•ËàçÂá∫ @tab @code{roundTowardNegative} @tab @code{"D"} or @code{"d"}
@item ÂêëÈõ∂ËàçÂÖ•ËàçÂá∫ @tab @code{roundTowardZero} @tab @code{"Z"} or @code{"z"}
@item ËÉåË∫´Èõ∂ËàçÂÖ•ËàçÂá∫Âà∞ÊúÄËøë @tab @code{roundTiesToAway} @tab @code{"A"} or @code{"a"}
@end multitable
@end float

@code{ROUNDMODE} ÁöÑÈªòËÆ§ÂÄº‰∏∫ @code{"N"}ÔºåËøôÈÄâÊã©ÁöÑÊòØ IEEE 754 ÁöÑËàçÂÖ•ËàçÂá∫Ê®°Âºè‰∏∫ roundTiesToEven„ÄÇÂú® @ref{table-gawk-rounding-modes} ‰∏≠ÔºåÂÄº @code{"A"} ÈÄâÊã©ÁöÑÊòØ @code{roundTiesToAway}„ÄÇËøôÂè™ÊúâÈ°∫‰Ω†ÁöÑ MPFR Â∫ìÊîØÊåÅÊó∂ÊâçÂèØÁî®ÔºåÂê¶ÂàôËÆæÁΩÆ @code{ROUNDMODE} ‰∏∫ @code{"A"} ÊòØÊ≤°ÊúâÊïàÊûúÁöÑ„ÄÇ

ÈªòËÆ§ÁöÑÊ®°Âºè @code{roundTiesToEven} ÊòØ‰ΩøÁî®ÂæóÊúÄÂ§öÁöÑÔºå‰ΩÜÊòØÊúÄ‰∏çÁõ¥ËßÇ„ÄÇËøô‰∏™ÊñπÊ≥ïÂØπÂ§ßÂ§öÊï∞ÁöÑÂÄºÁöÑÂ§ÑÁêÜÈÉΩÊòØÂæàÊòéÊòæÁöÑÔºåÂ∞±ÊòØÂ∞ÜÂÆÉ‰ª¨Âêë‰∏äÊàñËÄÖÂêë‰∏ãÂà∞ÊúÄËøëÁöÑÊï∞„ÄÇ‰æãÂ¶ÇÔºåÂ∞Ü 1.132 ËàçÂÖ•ËàçÂá∫‰∏∫‰∏§‰ΩçÊï∞Ôºå‰ºö‰∫ßÁîü 1.13ÔºåËÄåÂØπ 1.157 ËàçÂÖ•ËàçÂá∫‰∫ßÁîü 1.16„ÄÇ

‰ΩÜÊòØÔºåÂÖ∂ÂÄºÂàöÂ•ΩÊòØ‰∏ÄÂçäÁöÑÊó∂ÂÄôÔºåÂØπÂÖ∂ËøõË°åËàçÂÖ•ËàçÂá∫Êó∂Ôºå‰∫ãÊÉÖÂ§ÑÁêÜÊñπÂºèÂ∞±‰∏ç‰ºöÂÉè‰Ω†Âú®Â≠¶Ê†°Êó∂ÊâÄÂ≠¶ÁöÑ‰∏ÄÊ†∑Â∑•‰Ωú„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊï∞Â≠óË¢´ËàçÂÖ•ËàçÂá∫Âà∞ÊúÄËøëÁöÑÂÅ∂Êï∞‰Ωç„ÄÇÊâÄ‰ª•ÔºåÂØπ 0.125 ËàçÂÖ•ËàçÂá∫‰∏∫‰∏§‰ΩçÊï∞ÔºåÂàô‰ºö‰∫ßÁîü 0.12Ôºå‰ΩÜÊòØÂØπÊï∞ÂÄº 0.6875 ËàçÂÖ•ËàçÂá∫Âà∞‰∏â‰ΩçÂàô‰ºöÂêë‰∏äËàçÂÖ•‰∏∫ 0.688„ÄÇ‰Ω†ÂèØËÉΩÂú®‰ΩøÁî® @code{printf} Êù•Ê†ºÂºèÂåñÊµÆÁÇπÊï∞Êó∂Â∑≤ÁªèÈÅáÂà∞ËøáËøôÊ†∑ÁöÑËàçÂÖ•ËàçÂá∫Ê®°Âºè„ÄÇ‰æãÂ¶ÇÔºö

@example
BEGIN @{
    x = -4.5
    for (i = 1; i < 10; i++) @{
        x += 1.0
        printf("%4.1f => %2.0f\n", x, x)
    @}
@}
@end example

@noindent
Âú®‰ΩúËÄÖÁöÑÁ≥ªÁªü‰∏äÔºå‰ºö‰∫ßÁîü‰∏ãÈù¢ÁöÑËæìÂá∫Ôºö 
@footnote{Â¶ÇÊûúÂú®‰Ω†ÁöÑÁ≥ªÁªü‰∏äÁöÑ C Â∫ì‰∏çÊîØÊåÅ‰ΩøÁî® IEEE 754 ÁöÑÂÅ∂Êï∞ËàçÂÖ•ËàçÂá∫ËßÑÂàôÊù•‰∏∫ @code{printf} ËàçÂÖ•ËàçÂá∫ÂçäÊï∞ÁöÑÊÉÖÂÜµÔºåÊúâÂèØËÉΩËæìÂá∫ÂÆåÂÖ®‰∏çÂêå„ÄÇ}

@example
-3.5 => -4
-2.5 => -2
-1.5 => -2
-0.5 => 0
 0.5 => 0
 1.5 => 2
 2.5 => 2
 3.5 => 4
 4.5 => 4
@end example

@code{roundTiesToEven} ËÉåÂêéÁöÑÁêÜËÆ∫ÊòØÔºåÂØπÁ°ÆÂÆöÁöÑÂçäÂÄºËàçÂÖ•ËàçÂá∫ÊàñÂ§öÊàñÂ∞ëÂêë‰∏äÊàñËÄÖÂêë‰∏ãÊòØÂùáÁ≠âÂú∞ÂàÜÂ∏ÉÁöÑ„ÄÇËøôÊ†∑ÂèØ‰ª•‰ΩøÂæóËàçÂÖ•ËæìÂá∫ÂØºËá¥ÁöÑÊçüÂ§±ÂèØ‰ª•Ëá™Â∑±Ë°•ÂÅø„ÄÇËøôÂØπ‰∫é IEEE 754 ÁöÑËÆ°ÁÆóÂáΩÊï∞‰∏éÊìç‰ΩúÁ¨¶ÊòØÈªòËÆ§ÁöÑËàçÂÖ•ËàçÂá∫Ê®°Âºè„ÄÇ

ÂÖ∂‰ªñÁöÑËàçÂÖ•ËàçÂá∫Ê®°ÂºèÂæàÂ∞ë‰ΩøÁî®„ÄÇÂêëÊ≠£Êó†Á©∑ËàçÂÖ•ËàçÂá∫Ôºà@code{roundTowardPositive}Ôºâ‰ª•ÂèäÂêëË¥üÊó†Á©∑ËàçÂÖ•ËàçÂá∫Ôºà@code{roundTowardNegative}ÔºâÂ∏∏Â∏∏Áî®‰∫éÂÆûÁé∞Èó¥ÈöîÁÆóÊúØÔºåÂú®ËøôÊ†∑ÁöÑËÆ°ÁÆó‰∏≠Ôºå‰Ω†Ë∞ÉÊï¥ËàçÂÖ•ËàçÂá∫Ê®°ÂºèÊù•ËÆ°ÁÆóËæìÂá∫ËåÉÂõ¥ÁöÑ‰∏ä‰∏ãËæπÊ≤ø„ÄÇ@code{roundTowardZero} Ê®°ÂºèÂèØÁî®‰∫éÂ∞ÜÊµÆÁÇπÊï∞ËΩ¨Êç¢‰∫ÜÊï¥Êï∞„ÄÇ@code{roundTiesToAway} Ëøô‰∏™ËàçÂÖ•ËæìÂá∫Ê®°ÂºèÂ∞ÜÁªìÊûúËàçÂÖ•ËàçÂá∫Âà∞ÊúÄËøëÁöÑÊï∞ÔºåÂ¶ÇÊûúÂá∫Áé∞ÁöÑÁªëÂÆöÁöÑÊÉÖÂÜµÔºåÂàôÈÄâÊã©‰∏Ä‰∏™ËæÉÂ§ßÂπÖÂ∫¶ÁöÑÂÄº„ÄÇ

Êúâ‰∏Ä‰∫õÊï∞ÂÄºÂàÜÊûêÂ∏à‰ºöÂëäËØâ‰Ω†Ôºå‰Ω†ÁöÑËàçÂÖ•ËàçÂá∫È£éÊ†ºÁöÑÈÄâÊã©‰ºöÊûÅÂ§ßÂú∞ÂΩ±ÂìçÊúÄÂêéÁöÑËæìÂá∫ÔºåÂπ∂‰∏îÂª∫ËÆÆ‰Ω†Áõ¥Âà∞ÊúÄÂêéËæìÂá∫Êó∂ÊâçÁ°ÆÂÆöËàçÂÖ•ËàçÂá∫Ê®°Âºè„ÄÇÁõ∏ÂèçÂú∞Ôºå‰Ω†Â∏∏Â∏∏ÂèØ‰ª•ÈÅøÂÖçËàçÂÖ•ËàçÂá∫ÈîôËØØÔºåÈúÄË¶ÅÁöÑÂè™ÊòØÂú®‰∏ÄÂºÄÂßãÂ∞ÜÂàùÂßãÁ≤æÂ∫¶ËÆæÁΩÆÊØîÊúÄÁªàÊâÄÈúÄË¶ÅÁöÑÂ§ßÂæóÂ§öÁöÑÁ≤æÂ∫¶ÔºåËøôÊ†∑Á¥ØÁßØÁöÑËàçÂÖ•ËàçÂá∫ÈîôËØØ‰∏ç‰ºöÂΩ±ÂìçÁªìÊûú„ÄÇÂ¶ÇÊûú‰Ω†ÊÄÄÁñë‰Ω†ËÆ°ÁÆóÁöÑÁªìÊûúÂØπ‰∫éËàçÂÖ•ËàçÂá∫ÈîôËØØÊòØÂæàÊïèÊÑüÁöÑÔºåÈúÄË¶Å‰Ω†ÊîπÂèòËàçÂÖ•ËàçÂá∫Ê®°ÂºèÊù•ÁúãÁé∞ËæìÂá∫‰∏≠ÊòéÊòæÁöÑÂ∑ÆÂºÇÊù•ËøõË°åÁ°ÆËÆ§„ÄÇ

@node Arbitrary Precision Integers
@section @command{gawk} ‰∏≠ÁöÑ‰ªªÊÑèÁ≤æÂ∫¶Êï¥Êï∞ËÆ°ÁÆó
@cindex integers, arbitrary precision
@cindex arbitrary precision integers

ÂΩìÊåáÂÆö‰∫Ü @option{-M} ÈÄâÈ°πÔºå@command{gawk} ‰ºö‰ΩøÁî® GMP ‰ªªÊÑèÁ≤æÂ∫¶Êï¥Êï∞ÁöÑÊâßË°åÊâÄÊúâÁöÑÊï¥Êï∞ÁÆóÊúØ„ÄÇÂú®Ê∫ê‰ª£Á†Å‰∏≠ÊàñËÄÖ@value{DF}‰∏≠‰ªªÊÑèÁöÑÁúãËµ∑Êù•ÂÉèÊï¥Êï∞ÂÄºÈÉΩÂ≠òÊàê‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï¥Êï∞„ÄÇÊï¥Êï∞ÁöÑÂ§ßÂ∞èÂè™ÂèóÈôê‰∫éÂèØÁî®ÁöÑÂÜÖÂ≠ò„ÄÇ‰æãÂ¶ÇÔºå‰∏ãÈù¢‰ºöËÆ°ÁÆó
@iftex
@math{5^{4^{3^{2}}}}
@end iftex
@ifinfo
5^4^3^2
@end ifinfo
@ifnottex
@ifnotinfo
5@sup{4@sup{3@sup{2}}}
@end ifnotinfo
@end ifnottex
ÔºåËøô‰∏™ÁªìÊûúÂ∑≤ÁªèË∂ÖËøá‰∫Ü‰∏ÄËà¨ÁöÑÂèåÁ≤æÂ∫¶ÊµÆÁÇπÂÄºÁöÑÈôêÂà∂Ôºö

@example
$ @kbd{gawk -M 'BEGIN @{}
>   @kbd{x = 5^4^3^2}
>   @kbd{print "number of digits =", length(x)}
>   @kbd{print substr(x, 1, 20), "...", substr(x, length(x) - 19, 20)}
> @kbd{@}'}
@print{} number of digits = 183231
@print{} 62060698786608744707 ... 92256259918212890625
@end example

Â¶ÇÊûú‰Ω†‰ΩøÁî®‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÂÄºÊù•ËÆ°ÁÆóÁõ∏ÂêåÁöÑÂÄºÔºå‰∏∫‰∫ÜÊ≠£Á°ÆÁöÑËæìÂá∫ÊâÄÈúÄË¶ÅÁöÑÁ≤æÂ∫¶Ôºà‰ΩøÁî®ÂÖ¨Âºè 
If instead you were to compute the same value using arbitrary-precision
floating-point values, the precision needed for correct output (using
the formula
@iftex
@math{prec = 3.322 @cdot dps}Ôºâ
Âàô‰ºöÊòØ @math{3.322 @cdot 183231}Ôºå
@end iftex
@ifnottex
@ifnotdocbook
@samp{prec = 3.322 * dps}Ôºâ
Âàô‰ºöÊòØ 3.322 x 183231Ôºå
@end ifnotdocbook
@end ifnottex
@docbook
<emphasis>prec</emphasis> = 3.322 &sdot; <emphasis>dps</emphasis>Ôºâ
Âàô‰ºöÊòØ
<emphasis>prec</emphasis> = 3.322 &sdot; 183231Ôºå
@end docbook
ÊàñËÄÖËØ¥ÊòØ 608693„ÄÇ

Êù•Ëá™‰∫é‰∏Ä‰∏™Êï¥Êï∞‰∏é‰∏Ä‰∏™ÊµÆÁÇπÊï∞ÂÄºÁöÑÁÆóÊúØÊìç‰ΩúÁöÑÁªìÊûúÔºåÊòØ‰∏Ä‰∏™‰∏éÂΩìÂâçÂ∑•‰ΩúÊï∞Â∫¶Áõ∏ÂêåÁöÑ‰∏Ä‰∏™ÊµÆÁÇπÊï∞„ÄÇ‰∏ãÈù¢ÁöÑÁ®ãÂ∫èÁî®Ëø≠‰ª£Êù•ËÆ°ÁÆó Sylvester Â∫èÂàó
@footnote{Weisstein, Eric W.
@cite{Sylvester's Sequence}ÔºåÊù•Ëá™‰∫é MathWorld‚Äî‚Äî‰∏Ä‰∏™Wolfram WEB ËµÑÊ∫ê @w{(@url{http://mathworld.wolfram.com/SylvestersSequence.html})}„ÄÇ}
ÁöÑÁ¨¨ÂÖ´‰∏™È°πÔºö

@example
$ @kbd{gawk -M 'BEGIN @{}
>   @kbd{s = 2.0}
>   @kbd{for (i = 1; i <= 7; i++)}
>       @kbd{s = s * (s - 1) + 1}
>   @kbd{print s}
> @kbd{@}'}
@print{} 113423713055421845118910464
@end example

ËæìÂá∫‰∏çÂêå‰∫éÂÆûÈôÖÁöÑÊï∞ÂÄºÔºåÂç≥ 113Ôºå423Ôºå713Ôºå055Ôºå421Ôºå844Ôºå361Ôºå000Ôºå443ÔºåËøôÈáåÂõ†‰∏∫ÈªòËÆ§ÁöÑÁ≤æÂ∫¶‰∏∫ 53 ‰ΩçÔºå‰∏çË∂≥‰ª•Á≤æÁ°ÆÂú∞Ë°®Á§∫Ê∏ÖÁÇπÁªìÊûú„ÄÇ‰Ω†Ë¶Å‰πàÊèê‰æõÈ´òÁ≤æÔºàÂú®Ëøô‰∏™‰æãÂ≠ê‰∏≠Ôºå100 ‰ΩçÊòØÂ§ü‰∫ÜÁöÑÔºâÔºåÊàñËÄÖÂ∞ÜÊµÆÁÇπÊï∞Â∏∏Êï∞ @samp{2.0} ÊõøÊç¢‰∏∫‰∏Ä‰∏™Êï¥Êï∞Ôºå‰ª•ÂÖ®ÈÉ®‰ΩøÁî®Êï¥Êï∞ÁÆóÊúØËøêË°åÊù•ËÆ°ÁÆóÊ≠£Á°ÆÊúâÁöÑËæìÂá∫„ÄÇ

ÊúâÊó∂ÂÄôÔºå@command{gawk} ÂøÖÈ°ªÈöêÂºèÂú∞Â∞Ü‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï¥Êï∞ËΩ¨Êç¢‰∏∫‰ªªÊÑèÁ≤íÂ∫¶ÁöÑÊµÆÁÇπÊï∞„ÄÇËøô‰∏ªË¶ÅÊòØÂõ†‰∏∫ÔºåÂΩì‰∏Ä‰∏™Êìç‰ΩúÊàñËÄÖÂáΩÊï∞ÈúÄË¶ÅÊó∂ÔºåMPFR Â∫ìÂπ∂‰∏çÊÄªÊòØÊèê‰æõÁõ∏ÂÖ≥ÁöÑÊé•Âè£Êù•Â§ÑÁêÜ‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï¥Êï∞ÔºåÊàñËÄÖÊ∑∑ÂêàÊ®°ÂºèÁöÑÊï∞Â≠ó„ÄÇÂú®ËøôÊ†∑ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÁ≤æÂ∫¶‰ºöË¢´ËÆæÁΩÆÊàêË¶ÅÁ≤æÂ∫¶ËΩ¨Êç¢Êó∂ÁöÑÊúÄÂ∞èÁöÑÂÄºÔºåËÄåÂ∑•‰ΩúÁ≤æÂ∫¶Âàô‰∏çÁî®‰∫éËøô‰∏™ÁõÆÁöÑ„ÄÇÂ¶ÇÊûúËøô‰∏çÊòØ‰Ω†ÊÉ≥Ë¶ÅÁöÑÔºå‰Ω†ÂèØ‰ª•Áî®‰∏™Â∞èËØ°ËÆ°Âπ∂Â∞ÜÊï¥Êï∞ÂÖàËΩ¨Êç¢‰∏∫ÊµÆÁÇπÊï∞ÔºåÂ¶ÇÔºö

@example
gawk -M 'BEGIN @{ n = 13; print (n + 0.0) % 2.0 @}'
@end example

‰Ω†ÂèØ‰ª•ÈÄöËøáÊåáÂÆöÊï∞ÂÄº‰∏∫ÊµÆÁÇπÊï∞Êù•ÈÅøÂÖçËøôÊ†∑ÁöÑÈóÆÈ¢òÔºö

@example
gawk -M 'BEGIN @{ n = 13.0; print n % 2.0 @}'
@end example

Ê≥®ÊÑèÔºåÂØπ‰∫éËøô‰∏™ÁâπÊÆäÁöÑ‰æãÂ≠êÔºåÊúÄÂ•ΩÊòØ‰ΩøÁî®‰∏ãÈù¢ÁöÑÊñπÂºèÔºö

@example
gawk -M 'BEGIN @{ n = 13; print n % 2 @}'
@end example

@node POSIX Floating Point Problems
@section Ê†áÂáÜ‰∏éÊó¢Â≠òÂÆûË∑µ

ÂéÜÂè≤‰∏äÔºå@command{awk} ‰ºöÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÔºåÂ∞ÜÊâÄÊúâÁöÑÁúãËµ∑‰∏öÊòØÈùûÊï∞ÂÄºÁöÑÂ≠ó‰∏≤ËΩ¨Êç¢‰∏∫Êï∞ÂÄº 0„ÄÇËÄå‰∏îÔºåËØ≠Ë®ÄÁöÑÊúÄÂºÄÂßãÁöÑÂÆö‰πâ‰∏éÊúÄÂàùÁöÑ POSIX Ê†áÂáÜËßÑÂÆöÔºå@command{awk} Âè™ÁêÜËß£ÂçÅËøõÂà∂ÔºàÂü∫Êï∞‰∏∫ 10ÔºâÔºåËÄå‰∏çÊòØÂÖ´ËøõÂà∂Ôºà‰ª• 8 ‰∏∫Âü∫Êï∞Ôºâ‰ª•ÂèäÂçÅÂÖ≠ËøõÂà∂Êï∞Ôºà‰ª• 16 ‰∏∫Âü∫Êï∞Ôºâ„ÄÇ

2001 ÁöÑËØ≠Ë®ÄÁöÑÂèòÂåñ‰∏é 2004 Âπ¥ÁöÑ POSIX Ê†áÂáÜÈÉΩÂèØ‰ª•Ëß£Èáä‰∏∫Ôºå@command{awk} ‰ºöÂèØÊîØÊåÅÈ¢ùÂ§ñÁöÑÁâπÊÄßÔºåËøô‰∫õÁâπÊÄßÊòØÔºö

@itemize @value{BULLET}
@item
‰ª•ÂçÅÂÖ≠ËøõÂà∂ÂΩ¢ÊàêÊåáÂÆöÁöÑÊµÆÁÇπÊï∞ÁöÑËß£ÊûêÔºàÂ¶ÇÔºå@code{0xDEADBEEF}Ôºâ„ÄÇÔºàÊèêÁ§∫ÔºöÊòØÊï∞ÊçÆÂÄºÔºåËÄå@emph{‰∏çÊòØ}Ê∫ê‰ª£Á†ÅÂ∏∏Èáè„ÄÇÔºâ

@item
ÊîØÊåÅ IEEE 754 ÁâπÊÆäÁöÑÊµÆÁÇπÊï∞ÂÄº‚Äúnot a number‚ÄùÔºàNaNÔºâÔºåÊ≠£Êó†Á©∑Ôºà‚Äúinf‚ÄùÔºâ‰∏éË¥üÊó†Á©∑Ôºà‚Äú@minus{}inf‚ÄùÔºâ„ÄÇÁâπÂà´ÊòØÔºåËøô‰∫õÂÄºÁöÑÊ†ºÂºèÁî± ISO 1999 ÁöÑ C Ê†áÂáÜÊåáÂÆöÔºåÂÆÉ‰ª¨‰∏çÂå∫Âà´Â§ßÂ∞èÂÜôÔºåÂèØÂÖÅËÆ∏‰æùËµñ‰∫éÂÆûÁé∞ÁöÑÂú® @samp{nan} ÂêéÁöÑÈ¢ùÂ§ñÂ≠óÁ¨¶Ôºå‰πüÂÖÅËÆ∏ @samp{inf} ÊàñËÄÖ @samp{infinity}„ÄÇ
@end itemize

Á¨¨‰∏Ä‰∏™ÈóÆÈ¢òÊòØËøô‰∏§‰∏™Áõ∏ÊØî‰∫éÂéÜÂè≤ÂÆûË∑µÈÉΩÊúâÊòéÁ°ÆÁöÑÊîπÂèòÔºö

@itemize @value{BULLET}
@item
@command{gawk} ÁöÑÁª¥Êä§ËÄÖÊÑüËßâÔºåÊîØÊåÅÂçÅÂÖ≠ËøõÂà∂ÁöÑÊµÆÁÇπÊï∞ÔºåÁõ∏ÂΩìÁöÑ‰∏ëÔºå‰ªéÊù•Ê≤°ÊúâË¢´ÊúÄÂàùÁöÑÂÆûÁé∞ËÄÖÊé•Âèó‰∏∫ËØ≠Ë®ÄÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

@item
ÂÆåÂÖ®ÂÖÅËÆ∏Â≠óÊØç‰∏≤Êúâ‰∏Ä‰∏™ÊúâÊïàÁöÑÊï∞ÂÄº‰πü‰∏éÂéÜÂè≤ÂÆûË∑µÊúâÁùÄ‰∏•ÈáçÁöÑÂàÜÁ¶ª„ÄÇ
@end itemize

Á¨¨‰∫å‰∏™ÈóÆÈ¢òÊòØ @command{gawk} ÁöÑÁª¥Êä§ËÄÖËßâÂæóÔºåÂØπ‰∫éÊ†áÂáÜÁöÑËøôÁßçËß£ÈáäÔºåÈúÄË¶ÅÂ§ßÈáèÁöÑ‚ÄúËØ≠Ë®ÄÁ´ãÊ≥ï‚ÄùÊù•ËææÂà∞Á¨¨‰∏Ä‰∏™ÁõÆÊ†áÔºåËøôÁîöËá≥‰πü‰∏çË¢´Ê†áÂáÜÁöÑÂºÄÂèëËÄÖÈ¢ÑÊñôÂà∞„ÄÇ‰πüÂ∞±ÊòØËØ¥Ôºå‚ÄúÊàë‰ª¨ÁúãÂà∞‰∫Ü‰Ω†ÊÄé‰πàÊù•ÁöÑÔºå‰ΩÜÊòØÊàë‰ª¨‰∏çËÆ§‰∏∫ÈÇ£Â∞±ÊòØ‰Ω†ÊÉ≥Ë¶ÅÂéªÁöÑÂú∞Êñπ„ÄÇ‚Äù

Áî±‰∫éÂèëÁé∞‰∫ÜËøôÊ†∑ÁöÑÈóÆÈ¢òÔºå‰Ωú‰∏∫Êèê‰æõ‰∏Ä‰∏™‰∏éÊó©ÊúüÊ†áÂáÜÁâàÊú¨ÂÖºÂÆπÁöÑÂ∞ùËØïÔºåÂú® 2008 Âπ¥ÁöÑ POSIX Ê†áÂáÜÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ÊòæÂºèÁöÑËØùÊù•ÂÖÅËÆ∏Ôºå‰ΩÜÊòØ‰∏çÊòØÂøÖÈ°ªÔºå@command{awk} ÊîØÊåÅÂçÅÂÖ≠ËøõÂà∂ÁöÑÊµÆÁÇπÊï∞ÂÄº‰ª•ÂèäÈíàÂØπ ‚Äúnot a number‚Äù‰∏ãÊó†Á©∑ÁöÑÁâπÊÆäÂÄº„ÄÇ

Â∞ΩÁÆ° @command{gawk} ÁöÑÁª¥Êä§ËÄÖ‰ªçÁÑ∂ËßâÂæóÊèê‰æõËøôÊ†∑ÁöÑÁâπÊÄßÊòØ‰∏çË¢´Âª∫ËÆÆÁöÑÔºå‰ΩÜÊòØÔºåÂú®ÊîØÊåÅ IEEE ÊµÆÁÇπÊï∞ÁöÑÁ≥ªÁªü‰∏äÔºåÊèê‰æõ@emph{Êüê‰∫õ}ÈÄîÂæÑÊù•ÊîØÊåÅ NaN ‰∏éÊó†Á©∑ÂÄºÂç¥ÊòØÂêàÁêÜÁöÑ„ÄÇ@command{gawk} ÁöÑËß£ÂÜ≥ÊñπÊ°àÂ¶Ç‰∏ãÔºö

@itemize @value{BULLET}
@item
Â¶ÇÊûúÊúâ @option{--posix} ÂëΩ‰ª§Ë°åÈÄâÈ°πÔºåÂàô @command{gawk} ‰ºöÊùæÊâã‰∏çÁÆ°„ÄÇÂ≠ó‰∏≤ÂÄº‰ºöË¢´Áõ¥Êé•‰º†ÈÄíÁªòÁîªÁ≥ªÁªüÁöÑÂ∫ìÂáΩÊï∞ @code{strtod()} ÂáΩÊï∞ÔºåÂ¶ÇÊûúÊàêÂäüÂú∞ËøîÂõû‰∫ÜÊï∞ÂÄºÂÄºÔºåÈÇ£‰πàÂÆÉÂ∞±‰ºöË¢´ÂΩìÂÅöÊï∞ÂÄº‰ΩøÁî®„ÄÇ 
@footnote{Ëá™‰ΩúËá™Âèó„ÄÇ}
Ê†πÊçÆÂÆö‰πâÔºåÁªìÊûúÂú®‰∏çÂêåÁöÑÁ≥ªÁªü‰∏äÊòØ‰∏çÂèØÁßªÊ§çÁöÑ„ÄÇËÄå‰∏î‰πüÊúâ‰∏Ä‰∫õÂ∞èÁöÑ‰ª§‰∫∫ÊÉäÂ•áÁöÑË°å‰∏∫Ôºö

@example
$ @kbd{echo nanny | gawk --posix '@{ print $1 + 0 @}'}
@print{} nan
$ @kbd{echo 0xDeadBeef | gawk --posix '@{ print $1 + 0 @}'}
@print{} 3735928559
@end example

@item
Â¶ÇÊûúÊ≤°Êúâ @option{--posix} ÈÄâÈ°πÔºå@command{gawk} ‰ºöÂ∞ÜÂêéÈù¢ÁöÑÂ≠ó‰∏≤ÂÄº @samp{+inf}Ôºå@samp{-inf}Ôºå@samp{+nan} ‰∏é @samp{-nan} ‰ΩúÁâπÂà´ÁöÑËß£ÈáäÔºåÂπ∂‰∫ßÁîüÁõ∏Â∫îÁöÑÁâπÊÆäÁöÑÊï∞ÂÄº„ÄÇÂâçÂØºÁöÑÁ¨¶Âè∑‰ºöË¢´ÂΩìÊàêÂèëÈÄÅÁªòÁîª @command{gawk} Ôºà‰ª•ÂèäÁî®Êà∑ÔºâÁöÑ‰ø°Âè∑ËØ¥ÔºåËøôÁ°ÆÂÆûÊòØ‰∏™Êï∞ÂÄº„ÄÇÂçÅÂÖ≠ËøõÂà∂ÊµÆÁÇπÊï∞ÊòØ‰∏çÂèóÊîØÊåÅÁöÑÔºàÈô§Èùû‰Ω†‰πü‰ΩøÁî®‰∫Ü @option{--non-decimal-data} ÈÄâÈ°πÔºå‰ΩÜÊàë‰ª¨@emph{‰∏ç}Âª∫ËÆÆÔºâ„ÄÇ‰æãÂ¶ÇÔºö

@example
$ @kbd{echo nanny | gawk '@{ print $1 + 0 @}'}
@print{} 0
$ @kbd{echo +nan | gawk '@{ print $1 + 0 @}'}
@print{} nan
$ @kbd{echo 0xDeadBeef | gawk '@{ print $1 + 0 @}'}
@print{} 0
@end example

@command{gawk} ÂØπËøôÂõõ‰∏™ÂÄº‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô„ÄÇÂõ†Ê≠§ @samp{+nan} ‰∏é @samp{+NaN} ÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇ
@end itemize

@node Floating point summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
Â§ßÂ§öÊï∞ÁöÑËÆ°ÁÆóÊú∫ÁÆóÊúØËøêÁÆóÊòØÈÄöËøáÊï¥Êï∞ÊàñËÄÖÊµÆÁÇπÊï∞Êù•ÂÆåÊàêÁöÑ„ÄÇÊ†áÂáÜÁöÑ @command{awk} ‰ΩøÁî®ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞Êï∞ÂÄº„ÄÇ

@item
Âú® 1990 Âπ¥‰ª£Êó©ÊúüÔºåBarbie ‰∏çÊ≠£Á°ÆÂú∞ËØ¥ËøáÔºå‚ÄúÊï∞Â≠¶ÁúüÈöæÔºÅ‚ÄùËôΩÁÑ∂Êï∞Â≠¶‰∏çÈöæÔºå‰ΩÜÊòØÊµÆÁÇπÊï∞ËøêÁÆóÂπ∂‰∏çÂÉè‚ÄúÁ∫∏Á¨î‚ÄùÊï∞Â≠¶‰∏ÄÊ†∑ÔºåËÄåÂøÖÈ°ª‰ªîÁªÜÂ§ÑÁêÜÔºö

@c nested list
@itemize @value{MINUS}
@item
Âπ∂‰∏çÊòØÊâÄÊúâÁöÑÊï∞ÈÉΩÂèØ‰ª•Ë¢´Á≤æÁ°ÆË°®Á§∫„ÄÇ

@item
ÂÄºÁöÑÊØîËæÉÂ∫îËØ•‰ΩøÁî®Â∑ÆÂà´ÔºåËÄå‰∏çÊòØÁõ¥Êé•‰ΩøÁî® @samp{==} ‰∏é @samp{!=}„ÄÇ

@item
ÈîôËØØ‰ºöÁ¥ØÁßØ„ÄÇ

@item
Êìç‰ΩúÂπ∂‰∏çÊÄªÊòØÂÖ≥ËÅî‰∏éÂàÜÂ∏ÉÁöÑ„ÄÇ
@end itemize

@item
Êèê‰æõÁ≤æÂ∫¶ÊúâÁî®Ôºå‰ΩÜÂπ∂‰∏çÊÄªÊòØÊàêËÉΩËçØ„ÄÇ

@item
ÊèêÂçáÁ≤æÂ∫¶ÁÑ∂ÂêéËàçÂÖ•ËàçÂá∫Âà∞‰∏Ä‰∏™ÈúÄË¶ÅÁöÑÊï∞ÂÄº‰Ωç‰ª•‰∫ßÁîüÂêàÁêÜÁöÑÁªìÊûú„ÄÇ

@item
‰ΩøÁî® @option{-M}ÔºàÊàñËÄÖ @option{--bignum}ÔºâÊù•‰ΩøÁî® MPFR ÁÆóÊúØ„ÄÇ‰ΩøÁî® @code{PREC} Êù•ËÆæÁΩÆÁ≤æÂ∫¶‰ΩçÔºå‰ª•ÂèäËÆæÁΩÆ @code{ROUNDMODE} Êù•ËÆæÁΩÆ IEEE 754 ÁöÑËàçÂÖ•ËàçÂá∫Ê®°Âºè„ÄÇ

@item
ÈÄöËøá @option{-M}Ôºå@command{gawk} ‰ºö‰ΩøÁî® GMP Â∫ìÊâßË°å‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÊï¥Êï∞ÁÆóÊúØËøêÁÆó„ÄÇËøôÊØî MPFR ÊâßË°åÁõ∏ÂêåÁöÑËÆ°ÁÆó‰ºöÊõ¥Âø´ÔºåÂú®Á©∫Èó¥‰∏äÊõ¥È´òÊïà„ÄÇ

@item
@command{gawk} Âú®Â§ÑÁêÜÊµÆÁÇπÊï∞‰∏äÊúâÂá†‰∏™ÊñπÈù¢‰∏é POSIX Ê†áÂáÜ‰∏çÂêå„ÄÇÊúâÂøÖË¶ÅÊ≥®ÊÑè„ÄÇ

@item
ÊÄª‰Ωì‰∏äÁúãÔºåÊ≤°ÊúâÂøÖË¶ÅËøáÂ∫¶Âú∞ÊÄÄÁñëÊµÆÁÇπÊï∞ËøêÁÆóÁöÑÁªìÊûú„ÄÇË¶ÅËÆ∞‰ΩèÁöÑÊïôËÆ≠ÊòØÊµÆÁÇπÊï∞ËøêÁÆóË¶ÅÊØîÁ∫∏Á¨î‰∏äËøõË°åËøêÁÆóË¶ÅÊõ¥Â§çÊùÇ„ÄÇ‰∏∫‰∫ÜÂÖÖÂàÜÂà©Áî®ÊµÆÁÇπÊï∞ËøêÁÆóÁöÑ‰ºòÂäøÔºå‰Ω†ÈúÄË¶ÅÁü•ÈÅìÂÆÉÁöÑÈôêÂà∂Êù•‰ΩøÁî®ÂÆÉ‰ª¨Êù•Â∑•‰Ωú„ÄÇÂØπ‰∫éÂ§ßÂ§öÊï∞ÁöÑÊµÆÁÇπÁÆóÊúØËøêÁÆóÔºåÂ¶ÇÊûú‰Ω†ÁÆÄÂçïÂú∞ËàçÂÖ•ËàçÂá∫Êù•ÊòæÁ§∫‰Ω†ÁöÑÁªìÊûúÂà∞Ê≠£Á°ÆÁöÑÂçÅËøõÂà∂ÊúâÊïà‰ΩçÔºå‰Ω†ÈÉΩÂèØ‰ª•ÂæóÂà∞ÊÉ≥Ë¶ÅÁöÑÁªìÊûú„ÄÇ

@item
‰Ωú‰∏∫‰∏ÄËà¨Âª∫ËÆÆÔºåÈÅøÂÖç‰ª•ÈöêÂºèÁöÑÊØîÂÆûÈôÖÊõ¥È´òÁ≤æÂ∫¶Êù•Ë°®Á§∫‰∏Ä‰∏™Êï∞ÊçÆ„ÄÇ

@end itemize

@node Dynamic Extensions
@chapter ÁºñÂÜô @command{gawk} Êâ©Â±ï
@cindex dynamically loaded extensions

‰ΩøÁî®Âä®ÊÄÅË£ÖËΩΩÁöÑÂ∫ìÔºåÂèØ‰ª•Áî® C ÊàñËÄÖ C++ ‰∏∫ @command{gawk} ÁºñÂÜôÊñ∞ÁöÑÂäüËÉΩ„ÄÇËøôÊ†∑ÁöÑÂ∑•ÂÖ∑Âú®ÊîØÊåÅ C ÁöÑ @code{dlopen()} ‰∏é @code{dlsym()} ÂáΩÊï∞ÁöÑÁ≥ªÁªü‰∏äÊòØÂèØÁî®ÁöÑ„ÄÇÊú¨@value{CHAPTER}‰ºöÊèèËø∞Â¶Ç‰ΩïÁî® C ‰∏é C++ ÁöÑ‰ª£Á†ÅÊù•ÂàõÂª∫Êâ©Â±ï„ÄÇ

Â¶ÇÊûú‰Ω†‰∏ç‰∫ÜËß£ C ÁºñÁ®ãÔºå‰Ω†ÂèØ‰ª•Ë∑≥ËøáËøô‰∏Ä@value{CHAPTER}Ôºå‰Ω†ÂèØ‰ª•Êü•ÁúãÈöè @command{gawk} ‰∏ÄËµ∑ÂèëÂ∏ÉÁöÑÊâ©Â±ïÊñá‰ª∂ÔºàÊü•Áúã @pxref{Extension Samples}ÔºâÔºå‰πüÂèØ‰∫ÜËß£ @code{gawkextlib} È°πÁõÆÁöÑ‰ø°ÊÅØÔºàÊü•Áúã @pxref{gawkextlib}Ôºâ„ÄÇ‰æãÂ≠êÊâ©Â±ï‰ºö‰∏é @command{gawk} ‰∏ÄËµ∑ËøõË°åÊûÑÂª∫Âπ∂ÂÆâË£Ö„ÄÇ

@quotation ÊèêÁ§∫
ÂΩì‰ΩøÁî® @option{--sandbox} ÈÄâÈ°πÊó∂ÔºåÊâ©Â±ï‰ºöË¢´Á¶ÅÁî®ÔºàÊü•Áúã @ref{Options}Ôºâ„ÄÇ
@end quotation

@menu
* Extension Intro::             What is an extension.
* Plugin License::              A note about licensing.
* Extension Mechanism Outline:: An outline of how it works.
* Extension API Description::   A full description of the API.
* Finding Extensions::          How @command{gawk} finds compiled extensions.
* Extension Example::           Example C code for an extension.
* Extension Samples::           The sample extensions that ship with
                                @command{gawk}.
* gawkextlib::                  The @code{gawkextlib} project.
* Extension summary::           Extension summary.
* Extension Exercises::         Exercises.
@end menu

@node Extension Intro
@section ‰ªãÁªç

@cindex plug-in
@dfn{Êâ©Â±ï}ÔºàÊúâÊó∂‰πüÁß∞‰∏∫@dfn{Êèí‰ª∂}ÔºâÊòØ‰∏ÄÂùóÂ§ñÈÉ®ÁºñËØëÁöÑ‰ª£Á†ÅÔºå@command{gawk} ÂèØ‰ª•Âú®ËøêË°åÊó∂Ë£ÖËΩΩÊù•Êèê‰æõÈ¢ùÂ§ñÁöÑÂäüËÉΩÔºåÂÆÉ‰ª¨Âª∫Á´ãÂú®Êú¨@value{DOCUMENT}‰∏≠ÊâÄÊèèËø∞ÁöÑÂÜÖÂª∫ËÉΩÂäõ‰πã‰∏ä„ÄÇ

Êâ©Â±ïÈùûÂ∏∏ÊúâÁî®ÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÂèØ‰ª•ËÆ©‰Ω†ÔºàËøôÊØ´Êó†ÁñëÈóÆÔºâÊù•Êâ©Â±ï @command{gawk} ÁöÑÂäüËÉΩ„ÄÇ‰æãÂ¶ÇÔºåÂÆÉ‰ª¨ÂèØ‰ª•Êèê‰æõËÆøÈóÆÁ≥ªÁªüË∞ÉÁî®ÁöÑËÉΩÂäõÔºàÊØîÂ¶Ç @code{chdir()} Êù•Êõ¥ÊîπÁõÆÂΩïÔºâ‰ª•ÂèäÂÖ∂‰ªñÁöÑÂèØÁî®ÁöÑ C Â∫ì‰æãÁ®ã„ÄÇÂ¶ÇÂ§ßÂ§öÊï∞ÁöÑËΩØ‰ª∂‚ÄúÂ§©Á©∫ÊâçÊòØÈôêÂà∂‚ÄùÔºåÂ¶ÇÊûú‰Ω†ÊÉ≥Âà∞Êüê‰∫õ‰∫ãÊÉÖÔºå‰Ω†ÂèØ‰ª•ÈÄöËøá C ÊàñËÄÖ C++ ‰ª£Á†ÅÊù•ÂÆûÁé∞Ôºå‰Ω†Â∞±ÂèØ‰ª•ÂÜô‰∏Ä‰∏™Êâ©Â±ïÊù•ÂÆûÁé∞‰ªñ„ÄÇ

Êâ©Â±ïÈÄöËøá C ÊàñËÄÖ C++ ÂÜôÊàêÔºåÂπ∂Âà©Áî®‰∏∫Ê≠§ÁõÆÁöÑËÄåÂêë @command{gawk} ÂºÄÂèëËÄÖÊèê‰æõÁöÑ@dfn{Â∫îÁî®Á®ãÂ∫èÊé•Âè£}ÔºàAPIÔºâÊù•ÂÆûÁé∞„ÄÇÊú¨@value{CHAPTER}‰∏≠ÁöÑÂÖ∂‰ªñÈÉ®ÂàÜËß£Èáä API Â∑•ÂÖ∑‰ª•ÂèäÂ¶Ç‰ΩïÊù•‰ΩøÁî®ÂÆÉ‰ª¨ÔºåÂπ∂Êèê‰æõ‰∫Ü‰∏Ä‰∏™Â∞èÁöÑÊâ©Â±ï‰æãÂ≠ê„ÄÇÂè¶Â§ñÔºå‰æãÂ≠êÊâ©Â±ïÁ®ãÂ∫è‰πüÂåÖÂê´Âú®‰∫Ü @command{gawk} ÁöÑÂèëÂ∏ÉÁâàÊú¨‰∏≠ÔºåÂπ∂ÂØπ @code{gawkextlib} ËøõË°åÊèèËø∞„ÄÇ
@ifclear FOR_PRINT
Êü•Áúã @xref{Extension Design}ÔºåÊù•Ëé∑ÂèñÊâ©Â±ïÊú∫Âà∂ÁöÑÁõÆÊ†á‰∏éËÆæËÆ°ÁöÑÊõ¥Â§öËÆ®ËÆ∫„ÄÇ
@end ifclear
@ifset FOR_PRINT
Êü•Áúã @uref{http://www.gnu.org/software/gawk/manual/html_node/Extension-Design.html}ÔºåÊù•Ëé∑ÂèñÊâ©Â±ïÊú∫Âà∂ÁöÑÁõÆÊ†á‰∏éËÆæËÆ°ÁöÑÊõ¥Â§öËÆ®ËÆ∫„ÄÇ
@end ifset

@node Plugin License
@section Êâ©Â±ïËÆ∏ÂèØ

ÊØè‰∏™Âä®ÊÄÅÁöÑÊâ©Â±ïÂøÖÈ°ªÂú®‰∏é GNU GPLÔºàÊü•Áúã @pxref{Copying}ÔºâÂÖºÂÆπÁöÑËÆ∏ÂèØ‰∏ãÂèëÂ∏É„ÄÇ

‰∏∫‰∫ÜËÆ©Êâ©Â±ïÂëäÁü• @command{gawk} ÂÆÉÊòØÊúâÈÄÇÂΩìÁöÑËÆ∏ÂèØÁöÑÔºåÊâ©Â±ïÂøÖÈ°ªÂÆö‰πâ‰∏Ä‰∏™ÂÖ®Â±ÄÁ¨¶Âè∑ @code{plugin_is_GPL_compatible}„ÄÇÂ¶ÇÊûúËøô‰∏™Á¨¶Âè∑‰∏çÂ≠òÂú®ÔºåÂú®Êâ©Â±ïË¢´Ë£ÖËΩΩÊó∂Ôºå@command{gawk} ‰ºöÂèëÈÄÅ‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØÔºåÂπ∂ÈÄÄÂá∫„ÄÇ

Á¨¶Âè∑ÁöÑÂ£∞ÊòéÁ±ªÂûã‰∏∫ @code{int}„ÄÇÂÆÉÊ≤°ÊúâÂøÖË¶Å‰∏ÄÂÆöË¶ÅÂú®Êüê‰∏™ÊÆµ‰∏≠„ÄÇ‰ª£Á†Å‰ªÖ‰ªÖÊòØÊñ≠Ë®ÄÁ¨¶Âè∑Âú®ÂÖ®Â±ÄËåÉÂõ¥ÂÜÖÂ≠òÂú®Âç≥ÂèØ„ÄÇÂÉè‰∏ãÈù¢ËøôÊ†∑Â∞±Ë∂≥Â§ü‰∫ÜÔºö

@example
int plugin_is_GPL_compatible;
@end example

@node Extension Mechanism Outline
@section Âú®È´òÂ±ÇÁ∫ß‰∏≠ÊòØÂÆÉÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ

@command{gawk} ‰∏é Êâ©Â±ï‰πãÈó¥ÁöÑÈÄö‰ø°ÊòØÂèåÂêëÁöÑ„ÄÇÈ¶ñÂÖàÔºåÂΩìÊâ©Â±ïË¢´Ë£ÖËΩΩÔºå@command{gawk} ‰ºöÂêëÂÆÉ‰º†ÈÄí‰∏Ä‰∏™ÁªìÊûÑ‰Ωì @code{struct} ÁöÑÊåáÈíàÔºåÁªìÊûÑ‰Ωì‰∏≠ÈÉΩÊòØÂáΩÊï∞ÊåáÈíà„ÄÇ
@ifnotdocbook
Â¶Ç @ref{figure-load-extension} ÊâÄÁ§∫Ôºö
@end ifnotdocbook
@ifdocbook
Â¶Ç @inlineraw{docbook, <xref linkend="figure-load-extension"/>} ÊâÄÁ§∫Ôºö
@end ifdocbook

@ifnotdocbook
@float Figure,figure-load-extension
@caption{Ë£ÖËΩΩÊâ©Â±ï}
@center @image{api-figure1, , , Loading the extension}
@end float
@end ifnotdocbook

@docbook
<figure id="figure-load-extension" float="0">
<title>Ë£ÖËΩΩÊâ©Â±ï</title>
<mediaobject>
<imageobject role="web"><imagedata fileref="api-figure1.png" format="PNG"/></imageobject>
</mediaobject>
</figure>
@end docbook

Êâ©Â±ïÈÄöËøáËøô‰∫õÊåáÈíàÂáΩÊï∞Êù•Ë∞ÉÁî® @command{gawk} ‰∏≠ÁöÑÂáΩÊï∞ÔºåÂπ∂‰∏îÊòØÂú®ËøêË°åÊó∂Ë∞ÉÁî®ÔºåËÄåÊó†È°ªÔºàÂú®ËøûÊé•Êó∂ÔºâËÆøÈóÆ @command{gawk} ÁöÑÁ¨¶Âè∑„ÄÇËøô‰∫õÂáΩÊï∞ÊåáÈíà‰∏≠ÁöÑ‰∏Ä‰∏™ÊòØÁî®Êù•‚ÄúÊ≥®ÂÜå‚ÄùÊñ∞ÂäüËÉΩÁöÑÂáΩÊï∞„ÄÇ
@ifnotdocbook
Â¶Ç @ref{figure-register-new-function} ÊâÄÁ§∫Ôºö
@end ifnotdocbook
@ifdocbook
Â¶Ç @inlineraw{docbook, <xref linkend="figure-register-new-function"/>} ÊâÄÁ§∫Ôºö
@end ifdocbook

@ifnotdocbook
@float Figure,figure-register-new-function
@caption{Ê≥®ÂÜåÊñ∞ÂáΩÊï∞}
@center @image{api-figure2, , , Registering a new Function}
@end float
@end ifnotdocbook

@docbook
<figure id="figure-register-new-function" float="0">
<title>Ê≥®ÂÜåÊñ∞ÂáΩÊï∞</title>
<mediaobject>
<imageobject role="web"><imagedata fileref="api-figure2.png" format="PNG"/></imageobject>
</mediaobject>
</figure>
@end docbook

Âú®Âè¶‰∏Ä‰∏™ÊñπÂêëÔºåÊâ©Â±ïÊ≥®ÂÜåÂÆÉÁöÑÊñ∞ÂáΩÊï∞ÊòØÂêë @command{gawk} ‰º†ÈÄíÂáΩÊï∞ÁöÑÊåáÈíàÔºåËøô‰∏™ÂáΩÊï∞Êèê‰æõ‰∫ÜÊñ∞ÁöÑÁâπÊÄßÔºàÊØîÂ¶Ç @code{do_chdir()}Ôºâ„ÄÇ@command{gawk} Â∞ÜËøô‰∏™ÂáΩÊï∞ÊåáÈíà‰∏é‰∏Ä‰∏™ÂêçÂ≠óÂÖ≥ËÅîÔºåÁÑ∂Âêé‰ΩøÁî®ÂÆö‰πâÂ•ΩÁöÑË∞ÉÁî®ËßÑËåÉÊù•Ë∞ÉÁî®ÂÆÉ„ÄÇ
@ifnotdocbook
Â¶ÇÂú® @ref{figure-call-new-function} ÊâÄÁ§∫Ôºö
@end ifnotdocbook
@ifdocbook
Â¶ÇÂú® @inlineraw{docbook, <xref linkend="figure-call-new-function"/>} ÊâÄÁ§∫Ôºö
@end ifdocbook

@ifnotdocbook
@float Figure,figure-call-new-function
@caption{Ë∞ÉÁî®Êñ∞ÂáΩÊï∞}
@center @image{api-figure3, , , Calling the new function}
@end float
@end ifnotdocbook

@docbook
<figure id="figure-call-new-function" float="0">
<title>Ë∞ÉÁî®Êñ∞ÂáΩÊï∞</title>
<mediaobject>
<imageobject role="web"><imagedata fileref="api-figure3.png" format="PNG"/></imageobject>
</mediaobject>
</figure>
@end docbook

Êé•‰∏ãÊù• @code{do_@var{xxx}()} ÂáΩÊï∞‰ΩøÁî® API ÁªìÊûÑ‰Ωì @code{struct} ‰∏≠ÁöÑÂáΩÊï∞ÊåáÈíàÊù•ÂÆûÁé∞ÂÆÉÁöÑÂäüËÉΩÔºåÂ¶ÇÊõ¥Êñ∞ÂèòÈáèÊàñËÄÖÊï∞ÁªÑÔºåÊâìÂç∞‰ø°ÊÅØÔºåËÆæÁΩÆ @code{ERRNO} Á≠âÁ≠â„ÄÇ

Êñπ‰æøÁöÑÂÆèÂèØ‰ª•‰ΩøÁî®ÈÄöËøáÂáΩÊï∞ÊåáÈíàË∞ÉÁî®ÁúãËµ∑Êù•ÂÉèÂ∏∏ËßÑÁöÑÂáΩÊï∞Ë∞ÉÁî®‰∏ÄÊ†∑ÔºåËøôÊ†∑Êâ©Â±ï‰ª£Á†ÅÈùûÂ∏∏Â•ΩËØªÔºå‰πüÂæàÂ•ΩÁêÜËß£„ÄÇ

Â∞ΩÁÆ°ËøôÂê¨Ëµ∑Êù•Êúâ‰∏Ä‰∫õÂ§çÊùÇÔºåËÄåÁªìÊûúÊòØÊâ©Â±ïÁöÑ‰ª£Á†ÅÁºñÂÜô‰∏éÈòÖËØªÈÉΩÈùûÂ∏∏Áõ¥Êé•„ÄÇ‰Ω†ÂèØ‰ª•Êü•ÁúãÊ†∑‰æãÊâ©Â±ï @file{filefuncs.c}ÔºàÊü•Áúã @pxref{Extension
Example}Ôºâ‰ª•Âèä @file{testext.c} ‰ª£Á†ÅÊù•ÊµãËØï APIs„ÄÇ

‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÊùÇÈ°πÔºö

@itemize @value{BULLET}
@item
API Êèê‰æõ‰∫ÜËÆøÈóÆ @command{gawk} ÁöÑ @code{do_@var{xxx}} ÂÄºÁöÑÊñπÂºèÔºå‰ª•Ê≠§Êù•ÂèçÂ∫îÂëΩ‰ª§Ë°åÂèÇÊï∞ÔºåÂ¶Ç @code{do_lint}Ôºå@code{do_profiling} Á≠âÁ≠âÔºàÊü•Áúã @pxref{Extension API Variables}Ôºâ„ÄÇËÄå‰∏ãÈù¢Êèê‰æõÁõ∏ÂÖ≥‰ø°ÊÅØÔºöÊâ©Â±ï‰∏çÂèØ‰ª•ÊîπÂèòÂÆÉ‰ª¨Âú® @command{gawk} ‰∏≠ÁöÑÂÄº„ÄÇÂè¶Â§ñÔºåÂ∞ùËØïÁªòÁªôÂÆÉ‰ª¨ËµãÂÄº‰ºö‰∫ßÁîü‰∏Ä‰∏™ÁºñËØëÊó∂ÈîôËØØ„ÄÇ

@item
API ‰πüÊèê‰æõ‰∫Ü‰∏ªÊ¨°ÁâàÊú¨Âè∑ÔºåËøôÊ†∑Êâ©Â±ïÂèØ‰ª•Êù•Ê£ÄÊü•Ë£ÖËΩΩÊâ©Â±ïÁöÑ @command{gawk} ÁöÑÁâàÊú¨ÊòØÂê¶ÊîØÊåÅÂÖ∂Ë¢´ÁºñËØëÊó∂ÁöÑÊâÄÈúÄË¶ÅÁöÑÂäüËÉΩ„ÄÇÔºàÁâàÊú¨‰∏çÂåπÈÖç‚Äú‰∏çÂ∫îËØ•‚ÄùÂèëÁîüÔºå‰ΩÜÊòØÊàë‰ª¨ÊâÄÊúâ‰∫∫ÈÉΩÁü•ÈÅì@emph{‰∫ãÊÉÖ}ÊÄé‰πàÂèëÁîüÁöÑ„ÄÇÔºâÊü•Áúã @xref{Extension Versioning}ÔºåÊù•Ëé∑ÂèñÁõ∏ÂÖ≥ÁªÜËäÇ„ÄÇ
@end itemize

@node Extension API Description
@section API ÊèèËø∞
@cindex extension API

C ÊàñËÄÖ C++ ÊâÄÂÜôÁöÑÊâ©Â±ïÂøÖÈ°ªÂåÖÂê´Â§¥Êñá‰ª∂ @file{gawkapi.h}ÔºåÂú®Ëøô‰∏™Êñá‰ª∂‰∏≠Â£∞ÊòéÂáΩÊï∞ÔºåÂπ∂‰∏îÂÆö‰πâ‰∫Ü‰∏é @command{gawk} ËøõË°åÈÄö‰ø°ÁöÑÊï∞ÁªÑÁ±ªÂûã„ÄÇËøôÔºàÁõ∏ÂΩìÂ§ßÁöÑÔºâ@value{SECTION}ÔºåËØ¶ÁªÜÂú∞ÊèèËø∞‰∫ÜËøô‰∫õ API„ÄÇ

@menu
* Extension API Functions Introduction:: Introduction to the API functions.
* General Data Types::                   The data types.
* Memory Allocation Functions::          Functions for allocating memory.
* Constructor Functions::                Functions for creating values.
* Registration Functions::               Functions to register things with
                                         @command{gawk}.
* Printing Messages::                    Functions for printing messages.
* Updating @code{ERRNO}::                Functions for updating @code{ERRNO}.
* Requesting Values::                    How to get a value.
* Accessing Parameters::                 Functions for accessing parameters.
* Symbol Table Access::                  Functions for accessing global
                                         variables.
* Array Manipulation::                   Functions for working with arrays.
* Extension API Variables::              Variables provided by the API.
* Extension API Boilerplate::            Boilerplate code for using the API.
@end menu

@node Extension API Functions Introduction
@subsection ‰ªãÁªç

ËÆøÈóÆ @command{gawk} ÁöÑÂ∑•ÂÖ∑ÊòØÈÄöËøáË∞ÉÁî®‰º†ÈÄíÂà∞‰Ω†ÁöÑÊâ©Â±ïÁöÑÂáΩÊï∞ÊåáÈíàÊù•ÂÆåÊàêÁöÑ„ÄÇ

API ÂáΩÊï∞ÊåáÈíàÊèê‰æõ‰∫Ü‰∏ãÈù¢Á±ªÂûãÁöÑÊìç‰ΩúÔºö

@itemize @value{BULLET}
@item
ÂàÜÈÖçÔºåÈáçÊñ∞ÂàÜÈÖç‰ª•ÂèäÈáäÊîæÂÜÖÂ≠ò„ÄÇ

@item
Ê≥®ÂÜåÂáΩÊï∞ÔºåÊúâÂ¶Ç‰∏ãÔºö

@c nested list
@itemize @value{MINUS}
@item
Êâ©Â±ïÂáΩÊï∞
@item
ÈÄÄÂá∫ÂõûË∞ÉÂáΩÊï∞
@item
ÁâàÊú¨Â≠ó‰∏≤
@item
ËæìÂÖ•ÂàÜÊûêÂô®
@item
ËæìÂá∫ÂåÖË£ÖÂô®
@item
ÂèåË∑ØÂ§ÑÁêÜÂô®
@end itemize

ÊâÄÊúâÁöÑËøô‰∫õÈÉΩ‰ºöÂú®Êú¨@value{CHAPTER}‰∏≠ÁöÑÂâ©‰ΩôÈÉ®ËøõË°åËØ¶ÁªÜÁöÑËÆ®ËÆ∫„ÄÇ

@item
ÊâìÂç∞Ëá¥ÂëΩÈîôËØØÔºåÂëäË≠¶‰ª•Âèä‚Äúlint‚ÄùË≠¶Âëä‰ø°ÊÅØ„ÄÇ

@item
Êõ¥Êñ∞ @code{ERRNO}ÔºåÊàñËÄÖÈáçÁΩÆÂÆÉ„ÄÇ

@item
ËÆøÈóÆÂèÇÊï∞ÔºåÂåÖÊã¨Â∞ÜÊú™ÂÆö‰πâÁöÑÂèÇÊï∞ËΩ¨Êç¢‰∏∫Êï∞ÁªÑ„ÄÇ

@item
Á¨¶Âè∑Ë°®ËÆøÈóÆÔºöËøîÂõûÂÖ®Â±ÄÂèòÈáèÔºåÂêàÂª∫ÊàñËÄÖÊõ¥ÊîπÂÖ®Â±ÄÂèòÈáè„ÄÇ

@item
ÂàõÂª∫ÔºåÈáäÊîæÁºìÂ≠òÂÄºÔºåËøôÊèê‰æõ‰∫Ü‰∏ÄÁßçÈ´òÊïàËÆøÈóÆÂ§ö‰∏™ÂèòÈáèÁöÑÊñπÂºèÔºåÂèØËÉΩÊûÅÂ§ßÂú∞Êèê‰æõÊÄßËÉΩ„ÄÇ

@item
Êï∞ÁªÑÊìç‰ΩúÔºö

@itemize @value{MINUS}
@item
Ê£ÄÁ¥¢ÔºåÊ∑ªÂä†ÔºåÂà†Èô§‰ª•Âèä‰øÆÊîπÂÖÉÁ¥†„ÄÇ

@item
Ëé∑ÂèñÊï∞ÁªÑ‰∏≠ÁöÑÂÖÉÁ¥†‰∏™Êï∞„ÄÇ

@item
ÂàõÂª∫Êñ∞Êï∞ÁªÑ„ÄÇ

@item
Ê∏ÖÈô§Êï∞ÁªÑ„ÄÇ

@item
ÊâÅÂπ≥ÂåñÊï∞ÁªÑÔºå‰ΩøÁî®‰ª•‰ΩøÁî®ÁÆÄÂçïÁöÑ C È£éÊ†ºÁöÑÂæ™ÁéØÊù•Ëø≠‰ª£ÊâÄÊúâÁöÑÁ¥¢Âºï‰ª•ÂèäÂÖÉÁ¥†„ÄÇ
@end itemize
@end itemize

‰ΩøÁî® API ÁöÑ‰∏Ä‰∫õÁÇπÔºö

@itemize @value{BULLET}
@item
‰∏ãÈù¢ÁöÑÁ±ªÂûãÔºåÂÆèÔºå‰ª•Âèä/ÊàñËÄÖÂáΩÊï∞ÂèØ‰ª•Âú® @file{gawkapi.h} Êñá‰ª∂ÂèÇËÄÉ„ÄÇ‰∏∫‰∫ÜÊ≠£Á°Æ‰ΩøÁî®Ôºå‰Ω†ÂøÖÈ°ªÂú®ÂåÖÂê´ @file{gawkapi.h} @emph{Ââç}ÂåÖÂê´Áõ∏Â∫îÁöÑÊ†áÂáÜÂ§¥Êñá‰ª∂„ÄÇ

@c FIXME: Make this is a float at some point.
@multitable {@code{memset()}, @code{memcpy()}} {@code{<sys/types.h>}}
@headitem C entity @tab Header file
@item @code{EOF} @tab @code{<stdio.h>}
@item Values for @code{errno} @tab @code{<errno.h>}
@item @code{FILE} @tab @code{<stdio.h>}
@item @code{NULL} @tab @code{<stddef.h>}
@item @code{memcpy()} @tab @code{<string.h>}
@item @code{memset()} @tab @code{<string.h>}
@item @code{size_t} @tab @code{<sys/types.h>}
@item @code{struct stat} @tab @code{<sys/stat.h>}
@end multitable

Áî±‰∫éËÄÉËôëÂà∞ÂèØÁßªÊ§çÊÄßÔºåÁâπÂà´ÊòØÈÇ£‰∫õÊ≤°ÊúâÂÆåÂÖ®‰∏éÊ†áÂáÜÂÖºÂÆπÁöÑÁ≥ªÁªüÔºå‰Ω†ÈúÄË¶Å‰ª•Ê≠£Á°ÆÁöÑÊñπÂºèÂåÖÂê´Ê≠£Á°ÆÁöÑÊñá‰ª∂„ÄÇ‰∏∫‰∫Ü‰øùËØÅ @file{gawkapi.h} ÁöÑÁÆÄÂçïÊ∏ÖÊ•öÔºåËøô‰∏™Ë¶ÅÊ±ÇÊòØÂæàÂøÖË¶ÅÁöÑÔºåËøôÊ†∑‰∏ç‰ºöÊàê‰∏∫ÂèØÁßªÊ§çÊÄßÁöÑÂ§ßÊùÇÁÉ©ÔºåËÄåËøô‰ºöÂú®ÈÉ®ÂàÜÁöÑ @command{gawk} Ê∫ê‰ª£Á†Å‰∏≠ÁúãÂà∞„ÄÇ

@item
@file{gawkapi.h} Êñá‰ª∂ÂèØ‰ª•Ë¢´ÂåÖÂê´Â§öÊ¨°ÔºåËÄå‰∏ç‰ºö‰∫ßÁîü‰∏çÂ•ΩÁöÑÁªìÊûú„ÄÇÂè™ÊòØËøô‰πàÂÅöÊòØ‰∏™Âæà‰∏çÂ•ΩÁöÑÁºñÁ®ãÂÆûË∑µ„ÄÇ

@item
Â∞ΩÁÆ° API Âè™‰ΩøÁî® ISO C 90 ÁöÑÁâπÊÄßÔºå‰ΩÜÊòØÊúâ‰∏Ä‰∏™‰æãÂ§ñÔºåÂç≥‚ÄúÊûÑÈÄ†‚ÄùÂáΩÊï∞‰ΩøÁî® @code{inline} ÂÖ≥ÈîÆËØç„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑÁºñËØëÂô®‰∏çÊîØÊåÅËøô‰∏™ÂÖ≥ÈîÆËØçÔºå‰Ω†Ë¶Å‰πàÂú®ÂëΩ‰ª§Ë°å‰∏≠Âä†ÂÖ• @samp{-Dinline=''}ÔºåÊàñËÄÖ‰ΩøÁî® GNU ÁöÑ Autotools Âπ∂Âú®‰Ω†ÁöÑÊâ©Â±ï‰∏≠ÂåÖÂê´‰∏Ä‰∏™ @file{config.h} Êñá‰ª∂„ÄÇ

@item
ÊâÄÊúâÁöÑÂú® @command{gawk} Â°´ÂÖÖÁöÑÊåáÈíàÊåáÂêëÁöÑÂÜÖÂ≠òÔºåÈÉΩÁî± @command{gawk} ÁÆ°ÁêÜÔºåÂ∫îËØ•Ë¢´‰Ω†ÁöÑÊâ©Â±ïÁúãÊàêÊòØÂè™ËØªÁöÑ„ÄÇ‰ªéÊâ©Â±ï‰∏≠‰º†ÈÄíÂà∞ @command{gawk} ‰∏≠ÁöÑ@emph{ÊâÄÊúâ}Â≠ó‰∏≤ÂÜÖÂ≠òÔºå@emph{ÂøÖÈ°ª}‰ΩøÁî® @code{gawk_malloc()}Ôºå@code{gawk_calloc()} ÊàñËÄÖ @code{gawk_realloc()} Ë∞ÉÁî®Ëé∑ÂèñÔºåÂπ∂‰ªéÈÇ£‰ª•ÂêéÔºåÁî± @command{gawk} ËøõË°åÁÆ°ÁêÜ„ÄÇ

@item
API ÂÆö‰πâ‰∫ÜÂá†‰∏™ÁÆÄÂçïÁöÑÁªìÊûÑ‰Ωì @code{struct} Áî®Êù•ÂΩ±Â∞Ñ @command{awk} ÁúãÂà∞ÁöÑÂÄº„ÄÇÂÄºÂèØ‰ª•ÊòØ @code{double} Á±ªÂûãÔºåÊàñËÄÖÂ≠ó‰∏≤ÔºåÊàñËÄÖÊòØÊï∞ÁªÑÔºàÂ¶ÇÂ§öÁª¥Êï∞ÁªÑÔºåÊàñËÄÖÂàõÂª∫Êñ∞Êï∞ÁªÑÊó∂Ôºâ„ÄÇÂ≠ó‰∏≤ÂÄºÈÄöËøáÊåáÈíà‰∏éÈïøÂ∫¶Êù•ÁÆ°ÁêÜÔºåÂõ†Ê≠§ÂÜÖÂµåÁöÑ @sc{nul} Â≠óÁ¨¶‰πüÂèØ‰ª•‰ΩøÁî®„ÄÇ

@quotation ÊèêÁ§∫
‰ªéÁõÆÁöÑ‰∏äËÆ≤ÔºåÂ≠ó‰∏≤‰ΩøÁî®ÂΩìÂâçÁöÑÂ§öÂ≠óËäÇÁºñÁ†ÅÊù•Áª¥Êä§ÔºàÂ¶Ç @env{LC_@var{xxx}} ÁéØÂ¢ÉÂèòÈáèÂÆö‰πâÁöÑÔºâËÄå‰∏çÊòØ‰ΩøÁî®ÂÆΩÂ≠óÁ¨¶„ÄÇËøô‰∏™‰∏é @command{gawk} ÂÜÖÈÉ®Â≠òÂÇ®Â≠ó‰∏≤ÊòØÂåπÈÖçÁöÑÔºåÂ≠óÁ¨¶‰πüÂèØËÉΩÊòØËøô‰πà‰ªéÊñá‰ª∂ËØªÂèñÊàñËÄÖËæìÂá∫Âà∞Êñá‰ª∂ÁöÑ„ÄÇ
@end quotation

@item
ÂΩìÊî∂Âà∞‰∏Ä‰∏™ÂÄºÔºàÂ¶ÇÂèÇÊï∞ÊàñËÄÖÂÖ®Â±ÄÂèòÈáèÔºåÊàñËÄÖÊï∞ÁªÑÂÖÉÁ¥†ÔºâÔºåÊâ©Â±ïÈúÄË¶ÅËØ∑Á§∫‰∏Ä‰∏™ÁâπÂÆöÁöÑÁ±ªÂûãÔºàÊï∞ÂÄºÔºåÂ≠ó‰∏≤ÔºåÊ†áÈáèÔºåÂÄºÁöÑCookieÔºåÊï∞ÁªÑÔºåÊàñËÄÖ‚ÄúÊú™ÂÆö‰πâ‚ÄùÔºâ„ÄÇÂΩìËØ∑Ê±Ç‰∏∫‚ÄúÊú™ÂÆö‰πâ‚ÄùÊó∂ÔºåËøîÂõûÁöÑÂÄºÊòØ‰ºöÊúâÁúüÊ≠£ÁöÑÂ∫ïÂ±ÇÁ±ªÂûãÁöÑ„ÄÇ

‰ΩÜÊòØÔºåÂ¶ÇÊûúËØ∑Ê±ÇÁöÑÁ±ªÂûã‰∏éÂÆûÈôÖÁöÑÁ±ªÂûã‰∏çÂåπÈÖçÔºåËØªÂèñÂáΩÊï∞‰ºöËøîÂõû‚Äúfalse‚ÄùÔºåÂπ∂Âú® type Á±ªÂûãÈáåÂ°´‰∏äÂÄºÂÆûÈôÖÁöÑÁ±ªÂûãÔºåËøôÊ†∑Êâ©Â±ïÂèØ‰ª•ÊâìÂç∞ÈîôËØØÁöÑ‰ø°ÊÅØÔºàÊØîÂ¶Ç ‚Äúscalar passed where array expected‚ÄùÔºàÈúÄË¶ÅÊï∞ÁªÑÊó∂‰º†ÈÄíÁöÑÊòØÊ†áÈáèÁ±ªÂûãÔºâÔºâ„ÄÇ

@c This is documented in the header file and needs some expanding upon.
@c The table there should be presented here
@end itemize

‰Ω†ÂèØ‰ª•‰ΩøÁî®ÂáΩÊï∞ÊåáÈíàÊù•Ë∞ÉÁî® API ÂáΩÊï∞Ôºå‰ΩÜÊòØÊé•Âè£Ê≤°ÊúâËøô‰πàÁÆÄÂçï„ÄÇ‰∏∫‰∫Ü‰ΩøÊâ©Â±ï‰ª£Á†ÅÁúãËµ∑Êù•ÂÉèÂ∏∏ËßÑÁöÑ‰ª£Á†ÅÔºå@file{gawkapi.h} Â§¥Êñá‰ª∂‰∏≠ÂÆö‰πâ‰∫ÜÂá†‰∏™ÂÆèÔºå‰Ω†ÂèØ‰ª•Âú®‰Ω†ÁöÑ‰ª£Á†Å‰∏≠‰ΩøÁî®„ÄÇËøô‰∏Ä@value{SECTION}‰ºöÂú®‰Ω†‰ΩøÁî®ÂáΩÊï∞Êó∂Êù•ÂëàÁé∞Ëøô‰∫õÂÆè„ÄÇ

@node General Data Types
@subsection ÈÄöÁî®ÁõÆÁöÑÁöÑÊï∞ÊçÆÁ±ªÂûã

@cindex Robbins, Arnold
@cindex Ramey, Chet
@quotation
@i{
ÊàëÊòØÁúüÁöÑÂñúÊ¨¢/ËÆ®Âéå‰∏éËÅîÂêà‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ
}
@author Arnold Robbins
@end quotation

@quotation
@i{
ËøôÊòØÂú®ÂÖ≥‰∫éËÅîÂêàÁöÑ‰∫ãÊÉÖÔºöÁºñËØëÂô®‰ºöÂØπ‰∫ãËøõË°åÂë®ÂØÜÂÆâÊéíÔºåËøôÊ†∑ÂèØ‰ª•ÂçèË∞ÉÂØπÂÆÉÁöÑÁà±‰∏éÊÅ®„ÄÇ
}
@author Chet Ramey
@end quotation

Êâ©Â±ïÁöÑ API ÂÆö‰πâ‰∫ÜÂæàÂ§öÁÆÄÂçïÁöÑÁ±ªÂûã‰ª•ÂèäÁªìÊûÑÊù•Áî®‰∫éÈÄöÁî®ÁõÆÁöÑ„ÄÇÂè¶Â§ñÔºåÂæàÂ§öÁâπÊúâÁöÑÊï∞ÊçÆÁªìÊûÑ‰ºöÂú®ÂêéÈù¢ÁöÑ@value{SECTION}‰∏≠ËøõË°å‰ªãÁªçÔºåÂåÖÂê´‰ΩøÁî®‰ªñ‰ª¨ÁöÑÂáΩÊï∞„ÄÇ

ÈÄöÁî®ÁõÆÁöÑÁ±ªÂûãÂíåÁªìÊûÑÂ¶Ç‰∏ãÔºö

@table @code
@item typedef void *awk_ext_id_t;
Ëøô‰∏™Á±ªÂûãÁöÑÂÄºÊòØÂú®Êâ©Â±ïË¢´ËΩΩÂÖ•ÁöÑÊó∂ÂÄô‰ªé @command{gawk} ‰∏≠ËøîÂõûÁöÑ„ÄÇËøô‰∏™ÂÄºÂøÖÈ°ªË¢´‰Ωú‰∏∫ÊØè‰∏™ API ÁöÑÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Âõû‰º†Áªô @command{gawk}„ÄÇ

@item #define awk_const @dots{}
Ëøô‰∏™ÂÆè‰ºöÂú®ÁºñËØëÊâ©Â±ïÊó∂Â±ïÂºÄÊàê‰∏∫ @samp{const}Ôºå‰ΩÜÂú®ÁºñËØë @command{gawk} Êú¨Ë∫´Êó∂ÔºåÂàô‰∏∫Á©∫„ÄÇËøô‰ΩøÂæó API Êï∞ÁªÑÁªìÊûÑ‰∏≠ÁöÑÁâπÂÆöÂüü‰ªéÊâ©Â±ï‰∏≠ÊòØ‰∏çÂèØÂÜôÁöÑÔºåËÄåÂÖÅËÆ∏ @command{gawk} Âú®ÈúÄË¶ÅÁöÑÊó∂ÂÄô‰ΩøÁî®ÂÆÉ‰ª¨„ÄÇ

@item typedef enum awk_bool @{
@itemx @ @ @ @ awk_false = 0,
@itemx @ @ @ @ awk_true
@itemx @} awk_bool_t;
ÁÆÄÂçïÁöÑÂ∏ÉÂ∞îÁ±ªÂûã„ÄÇ

@item typedef struct awk_string @{
@itemx @ @ @ @ char *str;@ @ @ @ @ @ /* data */
@itemx @ @ @ @ size_t len;@ @ @ @ @ /* length thereof, in chars */
@itemx @} awk_string_t;
ËøôË°®Á§∫‰∏Ä‰∏™ÂèØÂèòÁöÑÂ≠ó‰∏≤„ÄÇÂ¶ÇÊûúÊúâÂÄºÁöÑËØùÔºå@command{gawk} ÊåÅÊúâÊåáÂêëÂÆÉÁöÑÂÜÖÂ≠ò„ÄÇÂê¶ÂàôÔºåÂÆÉ‰ºöËá™Â∑±ÊåÅÊúâÂÖ∂ÊåáÂêëÁöÑÂÜÖÂ≠ò„ÄÇ@emph{Ëøô‰∫õÂÜÖÂ≠òÂøÖÈ°ªÊù•Ëá™‰∫é @code{gawk_malloc()}Ôºå@code{gawk_calloc()}ÔºåÊàñËÄÖ @code{gawk_realloc()} ÂáΩÊï∞„ÄÇ}

Â¶ÇÊó©ÂâçÊâÄÊèêÔºåÂ≠ó‰∏≤‰ΩøÁî®ÂΩìÂâçÁöÑÂ§öÂ≠óËäÇÁºñÁ†ÅÊù•‰øùÂ≠ò„ÄÇ

@item typedef enum @{
@itemx @ @ @ @ AWK_UNDEFINED,
@itemx @ @ @ @ AWK_NUMBER,
@itemx @ @ @ @ AWK_STRING,
@itemx @ @ @ @ AWK_ARRAY,
@itemx @ @ @ @ AWK_SCALAR,@ @ @ @ @ @ @ @ @ /* opaque access to a variable */
@itemx @ @ @ @ AWK_VALUE_COOKIE@ @ @ @ /* for updating a previously created value */
@itemx @} awk_valtype_t;
Ëøô‰∏™ @code{enum} ÊåáÁ§∫‰∫ÜÊï∞ÊçÆÁöÑÁ±ªÂûã„ÄÇÂÆÉ‰ºöÂú®ÂêéÈù¢ÁöÑÁªìÊûÑ‰Ωì @code{struct} ‰∏≠‰ΩøÁî®„ÄÇ

@item typedef struct awk_value @{
@itemx @ @ @ @ awk_valtype_t   val_type;
@itemx @ @ @ @ union @{
@itemx @ @ @ @ @ @ @ @ awk_string_t@ @ @ @ @ @ @ s;
@itemx @ @ @ @ @ @ @ @ double@ @ @ @ @ @ @ @ @ @ @ @ @ d;
@itemx @ @ @ @ @ @ @ @ awk_array_t@ @ @ @ @ @ @ @ a;
@itemx @ @ @ @ @ @ @ @ awk_scalar_t@ @ @ @ @ @ @ scl;
@itemx @ @ @ @ @ @ @ @ awk_value_cookie_t@ vc;
@itemx @ @ @ @ @} u;
@itemx @} awk_value_t;
‰∏Ä‰∏™‚Äú@command{awk} ÂÄº‚Äù„ÄÇ@code{val_type} ÊàêÂëòÊåáÁ§∫‰∫ÜËÅîÂêà‰Ωì @code{union} Â≠òÊúâÁöÑÂÄºÁöÑÁ±ªÂûãÔºåÊØè‰∏™ÊàêÂëòÈÉΩÊòØÁâπÂÆöÁöÑÁ±ªÂûã„ÄÇ

@item #define str_value@ @ @ @ @ @ u.s
@itemx #define num_value@ @ @ @ @ @ u.d
@itemx #define array_cookie@ @ @ u.a
@itemx #define scalar_cookie@ @ u.scl
@itemx #define value_cookie@ @ @ u.vc
‰ΩøÁî®Ëøô‰∫õÂÆèÊù•ËÆøÈóÆ @code{awk_value_t} ÁöÑÂüü‰ºö‰ΩøÁî®‰ª£Á†ÅÊõ¥ÈòÖËØª„ÄÇ

@item typedef void *awk_scalar_t;
Ê†áÈáèÂèØ‰ª•Ë¢´Ë°®Á§∫Êàê‰∏Ä‰∏™ÈÄèÊòéÁ±ªÂûã„ÄÇËøô‰∫õÂÄº‰ªé @command{gawk} ‰∏≠Ëé∑ÂèñÔºåÁÑ∂ÂêéÂÜçÂõû‰º†Áªô @command{gawk}„ÄÇËøôÂú®Êú¨ÂàóË°®‰∏ãÈù¢ÁöÑ‰ºö‰ª•ÊúâÊõ¥‰∏ÄËà¨ÁöÑËÆ®ËÆ∫„ÄÇÊõ¥Â§öÁöÑÁªÜËäÇËØ∑ÂèÇËÄÉ @ref{Symbol table by cookie}„ÄÇ

@item typedef void *awk_value_cookie_t;
‰∏Ä‰∏™‚ÄúÂÄº cookie‚ÄùË°®Á§∫‰∏Ä‰∏™ÁºìÂ≠òÂÄºÁöÑÈÄèÊòéÁ±ªÂûã„ÄÇËøô‰ºö‰∏ãÂàóË°®ÁöÑÂêéÈù¢ËøõË°åÊõ¥‰∏ÄËà¨ÁöÑËÆ®ËÆ∫ÔºåËÄåÊõ¥Â§öÁöÑÁªÜËäÇËØ∑ÂèÇËÄÉ @ref{Cached values}„ÄÇ

@end table

Âú® @command{awk} ‰∏≠ÁöÑÊ†áÈáèË¶Å‰πàÊòØÊï∞ÂÄºÔºåË¶Å‰πàÊòØÂ≠ó‰∏≤„ÄÇ@code{awk_value_t} ÁªìÊûÑ‰ª£Ë°®‰∏Ä‰∏™ÂÄº„ÄÇ@code{val_type} ÊàêÂëòÊåáÁ§∫ËÅîÂêà‰Ωì @code{union} ‰∏≠ÁöÑÂÖ∑‰ΩìÂÄºÁöÑÁ±ªÂûã„ÄÇ

Ë°®Á§∫‰∏Ä‰∏™Êï∞ÂÄºÂæàÁÆÄÂçï‚Äî‚ÄîAPI ‰ΩøÁî® C @code{double}„ÄÇÂ≠ó‰∏≤ÂàôÈúÄË¶Å‰∏ÄÁÇπÂ∑•‰Ωú„ÄÇÂõ†Ê≠§ @command{gawk} ÂÖÅËÆ∏ÂÜÖÂµåÁöÑ @sc{nul} Â≠óËäÇÂú®Â≠ó‰∏≤‰∏≠„ÄÇ‰∏Ä‰∏™Â≠ó‰∏≤ÂøÖÈ°ª‰ΩøÁî®ÂåÖÂê´ÊåáÈíà‰∏éÈïøÂ∫¶‰∏ÄÂØπÂÄºÊù•Ë°®Á§∫„ÄÇËøô‰∏™Á±ªÂûãÊòØ @code{awk_string_t} Á±ªÂûã„ÄÇ

Ê†áËØÜÁ¨¶ÔºàÂ¶ÇÂÖ®Â±ÄÂèòÈáèÁöÑÂêçÂ≠óÔºâÂèØ‰ª•‰∏éÊ†áÈ¢òÂÄºÊàñËÄÖ‰∏éÊï∞ÁªÑËøõË°åÂÖ≥ËÅî„ÄÇÂè¶Â§ñÔºå@command{gawk} Êèê‰æõ‰∫ÜÁúüÊ≠£ÁöÑÊï∞ÁªÑ‰πãÊï∞Á±ªÂûãÔºåËøôÊ†∑ÊåáÂÆöÁöÑÊï∞ÁªÑÂÖÉÁ¥†‰πüÂèØ‰ª•ÊòØ‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇÂØπ‰∫éÊï∞ÁªÑÁöÑËÆ®ËÆ∫ÔºåËØ¶ÁªÜÂÜÖÂÆπË¶ÅÂà∞ @ref{Array Manipulation}„ÄÇ

Êó©ÂâçÊâÄÂàóÁöÑÂÆè‰ΩøÂæóÊõ¥ÂÆπÊòì‰ΩøÁî®ËÅîÂêà‰Ωì @code{union} ‰∏≠ÁöÑÂÖÉÁ¥†ÔºåÂ∞±Â•ΩÂÉèÂÆÉÂ∞±ÊòØÁªìÊûÑ‰Ωì @code{struct} ‰∏≠ÁöÑÂüü‰∏ÄÊ†∑ÔºåËøôÂú® C ‰∏≠ÊòØ‰∏Ä‰∏™ÈÄöÁî®ÁöÑÁºñÁ®ãÊäÄÂ∑ß„ÄÇËøô‰∫õ‰ª£Á†Å‰πüÊõ¥ÂÆπÊòìÁºñÂÜô‰∏éÈòÖËØªÔºå‰ΩÜÊòØ@emph{‰Ω†}ÊúâË¥£‰ªªÁ°Æ‰øù @code{val_type} ÊàêÂëòÊ≠£Á°ÆÂú∞ÂèçÊò†‰∫Ü @code{awk_value_t} ÁªìÊûÑ‰∏≠ÁöÑÂÄºÁöÑÁ±ªÂûã„ÄÇ

‰ªéÊ¶ÇÂøµ‰∏äÊù•ËØ¥ÔºåËÅîÂêà‰Ωì @code{union} ‰∏≠ÁöÑÂ§¥‰∏â‰∏™ÊàêÂëòÔºànumberÔºåstring ‰∏é arrayÔºâÊòØ‰∏é @command{awk} ‰∏ÄËµ∑‰ΩøÁî®Êó∂ÊâÄÊúâÈúÄË¶ÅÁöÑÁ±ªÂûã„ÄÇ‰ΩÜÊòØÔºåÂõ†‰∏∫ API Êèê‰æõÁöÑÁî®Êù•ËÆøÈóÆ‰∏éÊõ¥ÊîπÂÖ®Â±ÄÊ†áÈáèÂÄºÁöÑ‰æãÁ®ãÂè™ÂèØ‰ª•‰ΩøÁî®ÂèòÈáèÂêçÔºåÂõ†Ê≠§‰ºöÊúâÊÄßËÉΩÊçüËÄóÔºö@command{gawk} ÂøÖÈ°ªÂú®ËÆøÈóÆÊàñËÄÖÊõ¥ÊîπÊó∂ÊâæÂà∞Ëøô‰∏™ÂèòÈáè„ÄÇËøô‰ºöÊàê‰∏∫‰∏Ä‰∏™ÁúüÊ≠£ÁöÑÈóÆÈ¢òÔºåËÄå‰∏ç‰ªÖÊòØÁêÜËÆ∫‰∏äÁöÑ„ÄÇ

ÊâÄ‰ª•ÔºåÂ¶ÇÊûú‰Ω†Áü•ÈÅì‰Ω†ÁöÑÊâ©Â±ï‰ºöËä±Áõ∏ÂΩìÈïøÁöÑÊó∂ÂÄôÊù•ËØªÂèñ/ÊàñËÄÖÊîπÂèò‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Ê†áÈáèÁöÑÂÄº„ÄÇ‰Ω†Â∞±ÂèØ‰ª•‰∏∫ÈÇ£‰∏™ÂèòÈáèËé∑Âèñ‰∏Ä‰∏™@dfn{Ê†áÈáè cookie}ÂØπË±°Ôºå
@footnote{Êü•Áúã @uref{http://catb.org/jargon/html/C/cookie.html, the ``cookie'' entry in the Jargon file} Êù•Êü•Áúã @dfn{cookie} ÁöÑÂÆö‰πâÔºå‰ª•Âèä @uref{http://catb.org/jargon/html/M/magic-cookie.html,
the ``magic cookie'' entry in the Jargon file} Êù•Êü•ÁúãÂÖ∂‰∏≠ÁöÑ‰æãÂ≠ê„ÄÇ
@ifclear FOR_PRINT
See also the entry for ``Cookie'' in the @ref{Glossary}.
‰πüÂèØÁúã @ref{Glossary} ‰∏≠ÁöÑ‚ÄúCookie‚ÄùËØçÊù°„ÄÇ
@end ifclear
}
ÁÑ∂Âêé‰ΩøÁî®Ëøô‰∏™ cookie Êù•Ëé∑ÂèñÂèòÈáèÁöÑÂÄºÔºåÊàñËÄÖÊîπÂèòÂèòÈáèÁöÑÂÄº„ÄÇ@code{awk_scalar_t} Á±ªÂûãÊåÅÊúâ‰∏Ä‰∏™Ê†áÈáè cookieÔºåËÄå @code{scalar_cookie} ÂÆèÊèê‰æõ‰∫ÜËÆøÈóÆÂú® @code{awk_scalar_t} ÁªìÊûÑ‰∏≠ÈÇ£‰∏™Á±ªÂûãÂÄºÁöÑÊñπÂºè„ÄÇÂÅáËÆæÊúâ‰∏Ä‰∏™Ê†áÈáè cookieÔºå@command{gawk} ÂèØ‰ª•Áõ¥Êé•ËøîÂõûÊàñËÄÖ‰øÆÊîπÂÖ∂ÂÄºÔºåËÄå‰∏çÈúÄË¶ÅÈ¶ñÂÖàÊü•ÊâæÂÆÉ„ÄÇ

@code{awk_value_cookie_t} Á±ªÂûã‰∏é @code{value_cookie} ÂÆèÁ±ª‰ºº„ÄÇÂ¶ÇÊûú‰Ω†Áü•ÈÅì‰Ω†Â∏åÊúõ‰ΩøÁî®Áõ∏ÂêåÁöÑÊï∞ÂÄºÁ±ªÂûã‰∏éÂ≠ó‰∏≤Á±ªÂûãÁöÑ@emph{ÂÄº}Êù•Áî®‰∫é‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÂèòÈáèÔºå‰Ω†ÂèØ‰ª•‰∏ÄÊ¨°ÂàõÂª∫ÂÄºÔºåÁÑ∂Âêé‰∏∫ÂÆÉ‰øùÁïô@dfn{ÂÄº cookie}ÔºåÁÑ∂ÂêéÂú®Â∏åÊúõÂú®ËÆæÁΩÆÂèòÈáèÁöÑ‰ªª‰ΩïÊó∂ÂÄôÔºåÂ∞ÜËøô‰∏™ cookie ‰º†ÈÄíËøáÂéª‰∫ß„ÄÇËøô‰∏™ÂèØ‰ª•Âú®ËøêË°åÁöÑ @command{gawk} ‰∏≠ËäÇÁ∫¶Â≠òÂÇ®ÔºåÂπ∂‰∏îÂéãÁº©ÂàõÂª∫ÂÄºÁöÑÊó∂Èó¥„ÄÇ

@node Memory Allocation Functions
@subsection ÂÜÖÂ≠òÂàÜÈÖçÂáΩÊï∞‰∏éÁõ∏Â∫îÁöÑÁÆÄÂåñÂÆè
@cindex allocating memory for extensions
@cindex extensions, allocating memory

API Êèê‰æõ‰∫ÜÂæàÂ§öÁöÑÂÜÖÂ≠òÂàÜÈÖçÂáΩÊï∞Áî®Êù•ËøõË°å@dfn{ÂÜÖÂ≠òÂàÜÈÖç}ÔºåÂπ∂ÂèØÂ∞ÜÂÜÖÂ≠ò‰º†ÈÄíÁªòÁîª @command{gawk}Ôºå‰ª•Âèä‰∏Ä‰∫õÁî®‰∫éÊñπ‰æøÁõÆÁöÑÁöÑÂÆè„ÄÇËøô‰∏™@value{SUBSECTION}
Â∞èËäÇÂ∞ÜÂÆÉ‰ª¨ÁöÑÂáΩÊï∞ÂéüÂûãÂëàÁé∞ÔºåÊâ©Â±ïÂèØ‰ª•ÈÄöËøáËøôÁßçÊñπÂºèÊù•‰ΩøÁî®ÂÆÉ‰ª¨Ôºö

@table @code
@item void *gawk_malloc(size_t size);
Ë∞ÉÁî®Ê≠£Á°ÆÁöÑ @code{malloc()} ÁâàÊú¨Êù•ÂàÜÈÖçÂ≠òÂÇ®ÔºåÂπ∂ÂèØ‰ª•‰º†ÈÄíÁªô @command{gawk}„ÄÇ

@item void *gawk_calloc(size_t nmemb, size_t size);
Ë∞ÉÁî®Ê≠£Á°ÆÁöÑ @code{calloc()} ÁâàÊú¨Êù•ÂàÜÈÖçÂÜÖÂ≠òÔºåÂπ∂ÂèØ‰ª•‰º†ÈÄíÁªô @command{gawk}„ÄÇ

@item void *gawk_realloc(void *ptr, size_t size);
Ë∞ÉÁî®Ê≠£Á°ÆÁöÑ @code{realloc()} ÁâàÊú¨Êù•ÂàÜÈÖçÂÜÖÂ≠òÔºåÂπ∂ÂèØ‰ª•‰º†ÈÄíÁªô @command{gawk}„ÄÇ

@item void gawk_free(void *ptr);
Ë∞ÉÁî®Ê≠£Á°ÆÁöÑ @code{free()} ÁâàÊú¨Êù•ÈáäÊîæÁî± @code{gawk_malloc()}Ôºå@code{gawk_calloc()}ÔºåÊàñËÄÖ @code{gawk_realloc()} ÂàÜÈÖçÁöÑÂÜÖÂ≠ò„ÄÇ
@end table

API Ë¶ÅÊèê‰æõËøô‰∫õÂáΩÊï∞ÔºåÊòØÂõ†‰∏∫Ë¶ÅÁºñËØëÁöÑÊâ©Â±ïÊúâÂèØËÉΩËøûÊé•ÁöÑÊòØ‰∏çÂêåÁâàÊú¨ÁöÑ C Â∫ìÔºåËÄå‰∏çÊòØ @command{gawk} ÊâßË°å‰ΩìÊâÄ‰ΩøÁî®ÁöÑ C Â∫ì„ÄÇ
@footnote{ËøôÂú® MS-Windows Á≥ªÁªü‰∏≠Êõ¥Â∏∏ËßÅÔºå‰∏çËøá‰πüÂèØËÉΩÂèëÁîüÂú® Unix Á±ª‰ººÁöÑÁ≥ªÁªü‰∏≠„ÄÇ}
Â¶ÇÊûú @command{gawk} ‰ΩøÁî®ÁöÑÊòØÂÆÉËá™Â∑±ÁâàÊú¨ @code{free()} Êù•ÈáäÊîæ‰∏çÁõ∏ÂêåÁöÑÁâàÊú¨ @code{malloc()} ÁâàÊú¨ÂàÜÈÖçÁöÑÂÜÖÂ≠òÊó∂ÔºåÂ∞±ÂèØËÉΩÂØºËá¥Êú™È¢ÑÊúüÁöÑË°å‰∏∫„ÄÇ

Êúâ‰∏§‰∏™Êñπ‰æøÁöÑÂÆèÂèØ‰ª•Áî®Êù•‰ΩøÁî® @code{gawk_malloc()} ‰∏é @code{gawk_realloc()} Êù•ËøõË°åÂÜÖÂ≠òÂàÜÈÖç„ÄÇÂ¶ÇÊûúÂàÜÈÖçÂ§±Ë¥•Ôºå‰ºöÂØºËá¥ @command{gawk} ‰ºö‰ª•Ëá¥ÂëΩÈîôËØØÈÄÄÂá∫„ÄÇ‰ΩøÁî®ÂÆÉ‰ª¨Â∞±ÂÉè‰ΩøÁî®‰∏Ä‰∏™‰∏ç‰ºöËøîÂõûÂÄºÁöÑËøáÁ®ã‰∏ÄÊ†∑„ÄÇ

@table @code
@item #define emalloc(pointer, type, size, message) @dots{}
Ëøô‰∏™ÂÆèÁöÑÂèÇÊï∞Â¶Ç‰∏ãÔºö

@c nested table
@table @code
@item pointer
ÂèòÈáèÊåáÂêëË¢´ÂàÜÈÖçÁöÑÂÜÖÂ≠ò„ÄÇ

@item type
ÂèòÈáèÁöÑÁ±ªÂûã„ÄÇËøô‰∏™Áî®Êù•ÂàõÂª∫‰∏Ä‰∏™Ë∞ÉÁî® @code{gawk_malloc()} ÁöÑËΩ¨Êç¢„ÄÇ

@item size
Ë¶ÅÂàÜÈÖçÁöÑÂ≠óËäÇÊÄªÂ§ßÂ∞è„ÄÇ

@item message
Âú®ÈîôËØØ‰ø°ÊÅØÂâçÈôÑÂä†ÁöÑÊ∂àÊÅØ„ÄÇÂÖ∏ÂûãÁöÑÊòØ‰ΩøÁî®Ëøô‰∏™ÂÆèÁöÑÂáΩÊï∞Âêç„ÄÇ
@end table

@noindent
‰æãÂ¶ÇÔºå‰Ω†ÂèØ‰ª•ÂÉèËøôÊ†∑Êù•ÂàÜÈÖç‰∏Ä‰∏™Â≠ó‰∏≤ÂÄºÔºö

@example
awk_value_t result;
char *message;
const char greet[] = "Don't Panic!";

emalloc(message, char *, sizeof(greet), "myfunc");
strcpy(message, greet);
make_malloced_string(message, strlen(message), & result);
@end example

@item #define erealloc(pointer, type, size, message) @dots{}
Ëøô‰∏™‰∏é @code{emalloc()} Á±ª‰ººÔºå‰ΩÜÊòØË∞ÉÁî®ÁöÑÊòØ @code{gawk_realloc()} ËÄå‰∏çÊòØ @code{gawk_malloc()}„ÄÇÂèÇÊï∞‰∏é @code{emalloc()} ÂÆè‰∏ÄÊ†∑„ÄÇ
@end table

@node Constructor Functions
@subsection ÊûÑÈÄ†ÂáΩÊï∞

API Êèê‰æõ‰∫ÜÂ§ö‰∏™@dfn{ÊûÑÈÄ†ÂáΩÊï∞}Êù•ÂàõÂª∫Â≠ó‰∏≤ÊàñËÄÖÊï∞ÂÄºÔºå‰ª•ÂèäÂ§ö‰∏™Áõ∏Â∫îÁöÑÂÆè„ÄÇËøô‰∏™@value{SUBSECTION}ÂëàÁé∞ÊâÄÊúâÂáΩÊï∞ÁöÑÂéüÂûãÔºåÊâ©Â±ï‰ª£Á†ÅÂèØ‰ª•‰ΩøÁî®Ëøô‰∫õÂéüÂûãÊù•Ë∞ÉÁî®ÂÆÉ‰ª¨Ôºö

@table @code
@item static inline awk_value_t *
@itemx make_const_string(const char *string, size_t length, awk_value_t *result);
Ëøô‰∏™ÂáΩÊï∞Âú®ÈÄöËøá @code{result} ÊåáÂêëÁöÑ @code{awk_value_t} ÂèòÈáè‰∏≠ÂàõÂª∫‰∏Ä‰∏™Â≠ó‰∏≤ÂÄº„ÄÇÂáΩÊï∞ÈúÄË¶ÅË¶ÅÁöÑ @code{string} ÊòØ‰∏Ä‰∏™ C Â≠ó‰∏≤Â∏∏ÈáèÔºàÊàñËÄÖÂÖ∂‰ªñÁöÑÂ≠ó‰∏≤Êï∞ÊçÆÔºâÔºåÂπ∂Ëá™Âä®ÂàõÂª∫‰∏Ä‰∏™Âú® @code{result} ‰∏≠ÁöÑÊï∞ÊçÆ@emph{Â§çÊú¨}„ÄÇÁÑ∂ÂêéËøîÂõû @code{result}„ÄÇ

@item static inline awk_value_t *
@itemx make_malloced_string(const char *string, size_t length, awk_value_t *result);
Ëøô‰∏™ÂáΩÊï∞Âú®Áî± @code{result} ÊåáÂêëÁöÑ @code{awk_value_t} ÂèòÈáè‰∏≠ÂàõÂª∫‰∏Ä‰∏™Â≠ó‰∏≤Á±ªÂûã„ÄÇÂáΩÊï∞ÈúÄË¶ÅÁöÑ @code{string} ÊòØ‰∏Ä‰∏™ @samp{char *}ÔºåÊåáÂêëÁöÑ‰πãÂâçÂ∑≤Áªè‰ªé @code{gawk_malloc()}Ôºå@code{gawk_calloc()} ÊàñËÄÖ @code{gawk_realloc()} ‰∏≠Ëé∑ÂèñÁöÑÊï∞ÊçÆ„ÄÇËøôÈáåÁöÑÊÉ≥Ê≥ïÊòØÊï∞ÂÄº‰ºöÁõ¥Êé•‰º†ÈÄíÁªô @command{gawk}ÔºåÂ∞ÜÂØπÂÖ∂Ë¥üË¥£„ÄÇÂáΩÊï∞ËøîÂõû @code{result}„ÄÇ

@item static inline awk_value_t *
@itemx make_null_string(awk_value_t *result);
Ëøô‰∏™ÁâπÂà´ÂáΩÊï∞ÔºåÂú®‰∏Ä‰∏™Áî± @code{result} ÊåáÂêëÁöÑ @code{awk_value_t} ÂèòÈáèÁî±‰∏≠ÂàõÂª∫‰∏Ä‰∏™Á©∫‰∏≤„ÄÇÂáΩÊï∞ËøîÂõû @code{result}„ÄÇ

@item static inline awk_value_t *
@itemx make_number(double num, awk_value_t *result);
Ëøô‰∏™ÂáΩÊï∞ÁÆÄÂçïÂú∞Âú®Áî± @code{result} ÊåáÂêëÁöÑ @code{awk_value_t} ÂèòÈáè‰∏≠ÂàõÂª∫‰∏Ä‰∏™Êï∞ÂÄº„ÄÇ
@end table

@node Registration Functions
@subsection Ê≥®ÂÜåÂáΩÊï∞
@cindex register extension
@cindex extension registration

Êú¨@value{SECTION}ÊèèËø∞Áî®‰∫éÊ≥®ÂÜåÈÉ®ÂàÜÊâ©Â±ïÂà∞ @command{gawk} ‰∏≠ÁöÑ API ÂáΩÊï∞„ÄÇ

@menu
* Extension Functions::         Registering extension functions.
* Exit Callback Functions::     Registering an exit callback.
* Extension Version String::    Registering a version string.
* Input Parsers::               Registering an input parser.
* Output Wrappers::             Registering an output wrapper.
* Two-way processors::          Registering a two-way processor.
@end menu

@node Extension Functions
@subsubsection Ê≥®ÂÜåÊâ©Â±ïÂáΩÊï∞

Êâ©Â±ïÂáΩÊï∞ÊòØÈÄöËøá‰∏ãÈù¢ÁöÑËÆ∞ÂΩï‰∏ãËøõË°åÊèèËø∞ÁöÑÔºö

@example
typedef struct awk_ext_func @{
@ @ @ @ const char *name;
@ @ @ @ awk_value_t *(*function)(int num_actual_args, awk_value_t *result);
@ @ @ @ size_t num_expected_args;
@} awk_ext_func_t;
@end example

ÂüüÁöÑÂê´‰πâÂ¶Ç‰∏ãÔºö

@table @code
@item const char *name;
Êñ∞ÂáΩÊï∞ÁöÑÂêçÂ≠ó„ÄÇ@command{awk} Â±ÇÁöÑ‰ª£Á†ÅÈÄöËøáËøô‰∏™ÂêçÂ≠óÊù•Ë∞ÉÁî®ÂáΩÊï∞„ÄÇËøôÊòØ‰∏Ä‰∏™Â∏∏ËßÑÁöÑ C Â≠ó‰∏≤„ÄÇ

ÂáΩÊï∞ÂêçÂøÖÈ°ªÁ¨¶Âêà @command{awk} Ê†áËØÜÁ¨¶ÁöÑËßÑÂàô„ÄÇ‰πüÂ∞±ÊòØÔºåÂÆÉ‰ª¨ÂøÖÈ°ªÊòØ‰ª•Ëã±ÊñáÂ≠óÊØçÊàñËÄÖ‰∏ãÂàíÁ∫øÂºÄÂßãÔºåÂêéÈù¢ÂèØ‰ª•Ë∑ü‰ªª‰ΩïÁöÑÂ≠óÊØçÔºåÊï∞Â≠ó‰∏é‰∏ãÂàíÁ∫ø„ÄÇÂáΩÊï∞ÂêçÁöÑÂ≠óÊØçÁöÑÂ§ßÂ∞èÂÜôÊòØÊúâÂÖ≥ÁöÑ„ÄÇ

@item awk_value_t *(*function)(int num_actual_args, awk_value_t *result);
ËøôÊòØ‰∏Ä‰∏™ÊåáÂêëÊèê‰æõ‰∫ÜÊâ©Â±ïÂäüËÉΩÁöÑ C ÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇÂáΩÊï∞ÂøÖÈ°ªÂú® @code{*result} ‰∏≠Â°´ÂÖ•Êï∞Â≠óÊàñËÄÖÂ≠ó‰∏≤„ÄÇ@command{gawk} ‰ºöÊé•ÁÆ°‰ªªÊÑèÂ≠ó‰∏≤ÂÜÖÂ≠òÁöÑÊâÄÊúâÊùÉ„ÄÇÂ¶ÇÊó©ÂÖàÊâÄÊèêÔºåÂ≠ó‰∏≤ÂÜÖÂ≠ò@emph{ÂøÖÈ°ª}Êù•Ëá™‰∫é @code{gawk_malloc()}Ôºå@code{gawk_calloc()} Êàñ @code{gawk_realloc()} Á≠âÂáΩÊï∞‰πã‰∏Ä„ÄÇ

@code{num_actual_args} ÂèÇÊï∞ÂëäÁü• C ÂáΩÊï∞Ôºå‰ºöÊúâÂ§öÂ∞ë‰∏™ÂÆûÈôÖÁöÑÂáΩÊï∞‰ªéË∞ÉÁî®ÁöÑ @command{awk} ‰ª£Á†Å‰∏≠‰º†ÂÖ•„ÄÇ

ÂáΩÊï∞ÂøÖÈ°ªËøîÂõû @code{result} ÁöÑÂÄº„ÄÇËøô‰∏ªË¶ÅÊòØ‰∏∫‰∫Ü @command{gawk} ‰∏≠Ë∞ÉÁî®‰ª£Á†Å‰ΩøÁî®‰∏äÁöÑÊñπ‰æø„ÄÇ

@item size_t num_expected_args;
Ëøô‰∏™ÊòØÂáΩÊï∞Â∏åÊúõÊé•ÂèóÂèÇÊï∞ÁöÑ‰∏™Êï∞„ÄÇÊØè‰∏Ä‰∏™Êâ©Â±ïÂáΩÊï∞ÈÉΩÂèØ‰ª•ÂÜ≥ÂÆöÂ¶ÇÊûúÂèÇÊï∞‰∏çÊòØÂÆÉÊâÄÂ∏åÊúõÁöÑ‰∏™Êï∞Êó∂ÊâÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇÂØπ‰∫éÁúüÊ≠£ÁöÑ @command{awk} ÂáΩÊï∞ÔºåÂøΩÁï•È¢ùÂ§ñÁöÑÂèÇÊï∞‰πüÊòØÂèØ‰ª•ÁöÑ„ÄÇ
@end table

‰∏ÄÊó¶‰Ω†Êúâ‰∫Ü‰∏Ä‰∏™Ë°®Á§∫‰Ω†ÁöÑÊâ©Â±ïÁöÑÂáΩÊï∞Ôºå‰Ω†Â∞±ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑ API ÂáΩÊï∞Êù•Ê≥®ÂÜåÔºö

@table @code
@item awk_bool_t add_ext_func(const char *namespace, const awk_ext_func_t *func);
Ëøô‰∏™ÂáΩÊï∞Âú®ÊàêÂäüÊó∂ËøîÂõû‰∏∫ trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇ@code{namespace} ÂèÇÊï∞ÂΩìÂâçÊ≤°Êúâ‰ΩøÁî®Ôºå‰Ω†ÂèØ‰ª•‰º†ÈÄí‰∏Ä‰∏™Á©∫‰∏≤Ôºà@code{""}ÔºâËøáÂéª„ÄÇ@code{func} ÊåáÈíàÊòØ‰ª£Ë°®‰Ω†ÁöÑÂáΩÊï∞ÁöÑÁªìÊûÑ‰Ωì @code{struct} ÊåáÈíàÔºåÂÖ∂ÁªìÊûÑÂ¶Ç‰∏äÊâÄËø∞„ÄÇ
@end table

@node Exit Callback Functions
@subsubsection Ê≥®ÂÜåÈÄÄÂá∫ÂáΩÊï∞

‰∏Ä‰∏™@dfn{ÈÄÄÂá∫ÂõûË∞É}ÂáΩÊï∞ÊòØÂú® @command{gawk} ÈÄÄÂá∫Êó∂Ë¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇËøôÊ†∑ÁöÑÂáΩÊï∞‰ºöÂú®‰Ω†ÁöÑÊâ©Â±ï‰∏≠Êúâ‰∏Ä‰∫õÊ∏ÖÁêÜÂ∑•‰ΩúË¶ÅÂÅöÊó∂ÈùûÂ∏∏ÊúâÁî®ÔºàÂ¶ÇÂÖ≥Èó≠Êï∞ÊçÆÂ∫ìËøûÊé•‰ª•ÂèäÈáäÊîæÂÖ∂‰ªñËµÑÊ∫êÔºâ„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÂáΩÊï∞Êù•Ê≥®ÂÜåËøôÊ†∑ÁöÑ‰∏Ä‰∏™ÂáΩÊï∞Âà∞ @command{gawk} ‰∏≠Ôºö

@table @code
@item void awk_atexit(void (*funcp)(void *data, int exit_status),
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ void *arg0);
ÂèÇÊï∞ÁöÑÂê´‰πâ‰∏∫Ôºö

@c nested table
@table @code
@item funcp
‰∏Ä‰∏™Âú® @command{gawk} ÈÄÄÂá∫‰πãÂâçË¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇ@code{data} ÂèÇÊï∞Â∞±ÊòØ @code{arg0} ÁöÑÂàùÂßãÂÄº„ÄÇ@code{exit_status} ÂèÇÊï∞ÊòØ @command{gawk} ÊÉ≥‰º†ÈÄíÁªô @code{exit()} Á≥ªÁªüË∞ÉÁî®ÁöÑÁä∂ÊÄÅÂÄº„ÄÇ

@item arg0
‰∏Ä‰∏™ÁßÅÊúâÊï∞ÊçÆÁöÑÊåáÈíàÔºå@command{gawk} ‰ºö‰øùÂ≠òÂÆÉÔºåÂπ∂Âú®Ë∞ÉÁî® @code{funcp} ÊåáÂêëÁöÑÂáΩÊï∞Êó∂‰º†ÈÄíÁªôÂÆÉ„ÄÇ 
@end table
@end table

ÈÄÄÂá∫ÂõûË∞ÉÂáΩÊï∞‰ºöÂÖàËøõÂÖàÂá∫ÔºàLIFOÔºâÁöÑÈ°∫Â∫èË∞ÉÁî®Ôºå‰πüÂ∞±ÊòØ‰ª•ÂÆÉ‰ª¨Ê≥®ÂÜåÂà∞ @command{gawk} ‰∏≠ÁöÑÈ°∫Â∫èÁõ∏ÂèçÁöÑÈ°∫Â∫èÊù•Ë∞ÉÁî®„ÄÇ

@node Extension Version String
@subsubsection Ê≥®ÂÜåÊâ©Â±ïÁâàÊú¨Â≠ó‰∏≤

‰Ω†ÂèØ‰ª•Ê≥®ÊÑè‰∏Ä‰∏™ÁâàÊú¨Â≠ó‰∏≤Êù•Ë°®Á§∫‰Ω†ÁöÑÊâ©Â±ïÂú® @command{gawk} ‰∏≠ÁöÑÁâàÊú¨‰∏éÂêçÂ≠óÔºåÂ¶Ç‰∏ãÔºö

@table @code
@item void register_ext_version(const char *version);
Â∞ÜÁî± @code{version} ÊåáÂêëÁöÑÁâàÊú¨Ê≥®ÂÜåÂà∞ @command{gawk} ‰∏≠„ÄÇË¶ÅÊ≥®ÊÑè @command{gawk} @emph{‰∏ç‰ºö}Êã∑Ë¥ù version Â≠ó‰∏≤ÔºåÂõ†Ê≠§ÂÆÉ‰∏çÂèØ‰ª•Ë¢´ÊîπÂèò„ÄÇ
@end table

@command{gawk} ÂΩì‰ª• @option{--version} ÈÄâÈ°πË∞ÉÁî®Êó∂Ôºå‰ºöÊâìÂç∞ÊâÄÊúâÁöÑÂ∑≤ÁªèÊ≥®ÂÜå‰∫ÜÊâ©Â±ïÁöÑÁâàÊú¨Â≠ó‰∏≤„ÄÇ

@node Input Parsers
@subsubsection ÂÆöÂà∂ËæìÂÖ•ÂàÜÊûêÂô®
@cindex customized input parser

ÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ªéËæìÂÖ•‰∏≠ËØªÂèñÊñáÊú¨„ÄÇÂÆÉ‰ΩøÁî® @code{RS} ÁöÑÂÄºÊù•Êü•ÁúãËÆ∞ÂΩïÁöÑÁªìÊùüÔºåÂπ∂‰∏î‰ΩøÁî® @code{FS}ÔºàÊàñËÄÖ @code{FIELDWIDTHS} ÊàñËÄÖ @code{FPAT}ÔºâÊù•Â∞ÜÂÖ∂ÂàÜÂâ≤ÊàêÂüüÔºàÊü•Áúã @pxref{Reading Files}Ôºâ„ÄÇÂè¶Â§ñÔºå@command{gawk} Ëøò‰ºöËÆæÁΩÆ @code{RT} ÁöÑÂÄºÔºàÊü•Áúã @pxref{Built-in Variables}Ôºâ„ÄÇ

Â¶ÇÊûú‰Ω†ÊÉ≥Ôºå‰Ω†ÂèØ‰ª•Êèê‰æõËá™Â∑±ÁöÑÂÆöÂà∂ÁöÑËæìÂÖ•ÂàÜÊûêÂô®„ÄÇ‰∏Ä‰∏™ËæìÂÖ•ÂàÜÊûêÂô®ÁöÑÂ∑•‰ΩúÂ∞±ÊòØÁªô @command{gawk} ÁöÑËÆ∞ÂΩïÂ§ÑÁêÜ‰ª£Á†ÅËøîÂõû‰∏ÄÊù°ËÆ∞ÂΩïÔºå‰ª•ÂèäÁî®‰∫é @code{RT} ÁöÑÊï∞ÊçÆÁöÑÂÄº‰∏éÈïøÂ∫¶ÁöÑÊåáÁ§∫Á¨¶ÔºåÂ¶ÇÊûúÊúâÁöÑËØù„ÄÇ

‰∏∫‰∫ÜÊèê‰æõËæìÂÖ•ÂàÜÊûêÂô®Ôºå‰Ω†ÂøÖÈ°ªÈ¶ñÂÖàÊèê‰æõ‰∏§‰∏™ÂáΩÊï∞ÔºàÂú®ËøôÈáå @var{XXX} ÊòØ‰Ω†ÁöÑÊâ©Â±ïÁöÑÂâçÁºÄÔºâÔºö

@table @code
@item awk_bool_t @var{XXX}_can_take_file(const awk_input_buf_t *iobuf);
Ëøô‰∏™ÂáΩÊï∞Ê£ÄÊü•Âú® @code{iobuf} ‰∏≠ÁöÑ‰ø°ÊÅØÔºàÊàë‰ª¨ÂêéÈù¢‰ºöËÆ®ËÆ∫Ôºâ„ÄÇÂü∫‰∫éÈáåÈù¢ÁöÑ‰ø°ÊÅØÔºåÂèØ‰ª•Á°ÆÂÆöËæìÂÖ•ÂàÜÊûêÂô®ÊòØÂê¶Áî®‰∫éËøô‰∏™Êñá‰ª∂„ÄÇÂ¶ÇÊûúÂèØ‰ª•ÔºåÂàôËøîÂõû true„ÄÇÂê¶ÂàôËøîÂõû false„ÄÇËøô‰∏™ÂáΩÊï∞‰∏çÂ∫îËØ•ÊîπÂèò @command{gawk} ‰∏≠ÁöÑ‰ªª‰ΩïÁä∂ÊÄÅÔºàÊØîÂ¶ÇÂèòÈáèÁöÑÂÄºÁ≠âÔºâ„ÄÇ

@item awk_bool_t @var{XXX}_take_control_of(awk_input_buf_t *iobuf);
ÂΩì @command{gawk} ÂÜ≥ÂÆö‰ªéËæìÂÖ•ÂàÜÊûêÂô®‰∏≠Êé•ÊâãÊñá‰ª∂ÁöÑÊéßÂà∂ÊùÉÁöÑÊó∂ÂÄôÔºåÂÆÉ‰ºöË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞„ÄÇËøô‰∏™ÂáΩÊï∞Êé•ÁùÄÂøÖÈ°ªÂ∞ÜÁâπÂÆöÁöÑÂüüÂ°´ÂÖÖÂà∞ @code{awk_input_buf_t} ÁªìÊûÑ‰∏≠ÔºåÂπ∂‰øùËØÅÁâπÂÆöÁöÑÊù°‰ª∂‰∏∫ true„ÄÇÂáΩÊï∞Â∫îÂΩìËøîÂõû true„ÄÇÂ¶ÇÊûúÂá∫Áé∞‰∫ÜÊüêÁßçÈîôËØØÔºåÂáΩÊï∞‰∏çÂèØ‰ª•ÂÜçÂ°´ÂÖÖ‰ªª‰ΩïÂüüÔºåÂπ∂‰∏îËøîÂõû falseÔºå‰πãÂêéÔºå@command{gawk} ‰∏ç‰ºö‰ΩøÁî®Ëøô‰∏™ËæìÂÖ•ÂàÜÊûêÂô®„ÄÇÁªÜËäÇÂ∞ÜÂú®ÂêéÈù¢ÂëàÁé∞„ÄÇ
@end table

‰Ω†ÁöÑÊâ©Â±ïÂ∫îËØ•Ë¶ÅÂ∞ÜËøô‰∫õÂáΩÊï∞ÂåÖÂà∞ @code{awk_input_parser_t} ‰∏≠ÔºåËøô‰∏™ÁªìÊûÑÂ¶Ç‰∏ãÔºö

@example
typedef struct awk_input_parser @{
    const char *name;   /* name of parser */
    awk_bool_t (*can_take_file)(const awk_input_buf_t *iobuf);
    awk_bool_t (*take_control_of)(awk_input_buf_t *iobuf);
    awk_const struct awk_input_parser *awk_const next;   /* for gawk */
@} awk_input_parser_t;
@end example

Ëøô‰∫õÂüü‰∏∫Ôºö

@table @code
@item const char *name;
ËæìÂÖ•ÂàÜÊûêÂô®ÁöÑÂêçÂ≠ó„ÄÇËøôÊòØ‰∏Ä‰∏™Â∏∏ËßÑÁöÑ C Â≠ó‰∏≤„ÄÇ

@item awk_bool_t (*can_take_file)(const awk_input_buf_t *iobuf);
ÊåáÂêë @code{@var{XXX}_can_take_file()} ÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇ

@item awk_bool_t (*take_control_of)(awk_input_buf_t *iobuf);
@code{@var{XXX}_take_control_of()} ÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇ

@item awk_const struct input_parser *awk_const next;
Ëøô‰∏™Áî± @command{gawk} Êù•‰ΩøÁî®ÔºåÂõ†Ê≠§ÂÆÉË¢´Ê†áÂøó‰∏∫ @code{awk_const}ÔºåËøôÊ†∑Êâ©Â±ïÂ∞±‰∏çËÉΩÂ§ü‰øÆÊîπÂÆÉ„ÄÇ
@end table

ÂÆûÁé∞Ê≠•È™§Ôºö

@enumerate
@item
ÂàõÂª∫‰∏Ä‰∏™ÈùôÊÄÅÁöÑ @code{awk_input_parser_t} ÂèòÈáèÔºåÂπ∂‰∏îÊ≠£Á°ÆÂú∞ÂàùÂßãÂåñÂÆÉ„ÄÇ

@item
ÂΩì‰Ω†ÁöÑÊâ©Â±ïË¢´ËΩΩÂÖ•Êó∂Ôºå‰ΩøÁî® @code{register_input_parser()} API ÂáΩÊï∞Ê≥®ÂÜå‰Ω†ÁöÑËæìÂÖ•ÂàÜÊûêÂô®Âà∞ @command{gawk} ‰∏≠ÔºàÊé•‰∏ãÊù•ÊèèËø∞Ôºâ„ÄÇ
@end enumerate

@code{awk_input_buf_t} ÁªìÊûÑÂ¶Ç‰∏ãÔºö

@example
typedef struct awk_input @{
    const char *name;       /* filename */
    int fd;                 /* file descriptor */
#define INVALID_HANDLE (-1)
    void *opaque;           /* private data for input parsers */
    int (*get_record)(char **out, struct awk_input *iobuf,
                      int *errcode, char **rt_start, size_t *rt_len);
    ssize_t (*read_func)();
    void (*close_func)(struct awk_input *iobuf);
    struct stat sbuf;       /* stat buf */
@} awk_input_buf_t;
@end example

Ëøô‰∫õÂüüÂèØ‰ª•ÂàÜÊàê‰∏§Á±ªÔºö‰∏ÄÁ±ªÊòØ @code{@var{XXX}_can_take_file()} ÂáΩÊï∞‰ΩøÁî®ÔºàÊúÄËµ∑Á†ÅÊòØÔºâÔºå‰ª•ÂèäË¢´ @code{@var{XXX}_take_control_of()} ‰ΩøÁî®ÔºåÂÆÉ‰ª¨‰ΩøÁî®ÁöÑÁ¨¨‰∏ÄÁªÑÂüüÂ¶Ç‰∏ãÔºö

@table @code
@item const char *name;
Êñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇ

@item int fd;
Êñá‰ª∂ÁöÑÊèèËø∞Á¨¶„ÄÇÂ¶ÇÊûú @command{gawk} ËÉΩÊâìÂºÄÊñá‰ª∂Ôºå@code{fd} Âàô@emph{‰∏ç‰ºö}Á≠â‰∫é @code{INVALID_HANDLE}ÔºåÂê¶ÂàôÁ≠â‰∫é„ÄÇ

@item struct stat sbuf;
Â¶ÇÊûúÊñá‰ª∂ÊèèËø∞Á¨¶ÊòØÊúâÊïàÁöÑÔºå@command{gawk} ‰ºöÂ∞ÜËøô‰∏™ÁªìÊûÑÈÄöËøá @code{fstat()} Á≥ªÁªüË∞ÉÁî®Êù•ËøõË°åÂ°´ÂÖÖ„ÄÇ
@end table

@code{@var{XXX}_can_take_file()} ÂáΩÊï∞Â∫îËØ•Ê£ÄÊü•Ëøô‰∫õÂüüÔºåÂπ∂ÂÜ≥ÂÆöËæìÂÖ•ÂàÜÊûêÂô®ÊòØÂê¶ÂèØÁî®‰∫éËøô‰∏™Êñá‰ª∂„ÄÇÂÜ≥ÂÆö‰æùËµñ‰∫é @command{gawk} ÁöÑÁä∂ÊÄÅÔºàÈÄöËøáÊâ©Â±ï‰ª•ÂèäÁî± @command{awk} ‰ª£Á†Å‰πãÂâçËÆæÁΩÆÁöÑÂèòÈáèÁöÑÂÄºÔºâÔºåÊñá‰ª∂ÁöÑÂêçÂ≠óÔºåÊñá‰ª∂ÁöÑÊèèËø∞Á¨¶ÊòØÂê¶ÊúâÊïàÔºåÂú® @code{struct stat} ‰∏≠ÁöÑ‰ø°ÊÅØÔºå‰ª•ÂèäÊâÄÊúâËøô‰∫õÂõ†Á¥†ÁöÑÁªÑÂêà„ÄÇ

Âè™Ë¶Å @code{@var{XXX}_can_take_file()} ÂáΩÊï∞ËøîÂõû trueÔºå@command{gawk} Â∞±ÂÜ≥ÂÆö‰ΩøÁî®‰Ω†ÁöÑËæìÂÖ•ÂàÜÊûêÂô®ÔºåÁÑ∂ÂêéË∞ÉÁî® @code{@var{XXX}_take_control_of()}„ÄÇ
Ëøô‰∏™ÂáΩÊï∞‰ºöÂ°´ÂÖÖÂú® @code{awk_input_buf_t} ÁªìÊûÑ‰∏≠ÁöÑ @code{get_recordfield} ÊàñËÄÖ @code{read_func} Âüü„ÄÇÂêåÊó∂‰πüË¶Å‰øùËØÅ @code{fd} @emph{‰∏ç‰ºö}Ë¢´ËÆæÁΩÆ‰∏∫ @code{INVALID_HANDLE}„ÄÇ‰∏ãÈù¢ÁöÑÂàóË°®ÊèèËø∞‰∫ÜÂèØËÉΩ‰ºöË¢´ @code{@var{XXX}_take_control_of()} ÂáΩÊï∞‰ΩøÁî®ÁöÑÂüüÔºö

@table @code
@item void *opaque;
ËøôË¢´Áî®Êù•Â≠òÂÇ®‰ªª‰ΩïÁöÑËæìÂÖ•ÂàÜÊûêÂô®ÈíàÂØπËøô‰∏™Êñá‰ª∂ÊâÄÈúÄË¶ÅÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ„ÄÇÂÆÉÂØπ @command{gawk} ÊòØ‚ÄúÈÄèÊòé‚ÄùÁöÑ„ÄÇËæìÂÖ•ÂàÜÊûêÂô®Âπ∂‰∏ç‰∏ÄÂÆöË¶Å‰ΩøÁî®Ëøô‰∏™ÊåáÈíà„ÄÇ

@item int@ (*get_record)(char@ **out,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ struct@ awk_input *iobuf,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ int *errcode,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ char **rt_start,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ size_t *rt_len);
Ëøô‰∏™ÂáΩÊï∞ÊåáÈíàÊåáÂêë‰∏Ä‰∏™ÂàõÂª∫ËæìÂÖ•ËÆ∞ÂΩïÁöÑÂáΩÊï∞„ÄÇÊâÄËø∞ÁöÑÂáΩÊï∞‰πüÊòØËæìÂÖ•ÂàÜÊûêÂô®ÁöÑÊ†∏ÂøÉ„ÄÇÂÆÉÁöÑË°å‰∏∫Áî±Êú¨ÂàóË°®‰∏ãÈù¢ÁöÑÊñáÊú¨ËØ¥Êòé„ÄÇ

@item ssize_t (*read_func)();
Ëøô‰∏™ÂáΩÊï∞ÊåáÈíàÂ∫îËØ•ÊåáÂêë‰∏éÊ†áÂáÜÁöÑ POSIX ÂáΩÊï∞ @code{read()} Á≥ªÁªüË∞ÉÁî®Ë°å‰∏∫Áõ∏ÂêåÁöÑÂáΩÊï∞„ÄÇÂÆÉÊòØ @code{get_record} ÂáΩÊï∞ÊåáÈíàÁöÑÊõø‰ª£„ÄÇÂÆÉÁöÑË°å‰∏∫‰πüÂú®Êú¨ÂàóË°®ÂêéÈù¢ÁöÑÊñáÊú¨‰∏≠ÊèèËø∞„ÄÇ

@item void (*close_func)(struct awk_input *iobuf);
Ëøô‰∏™ÂáΩÊï∞ÊåáÈíàÊåáÂêë‰∏Ä‰∏™‚Äútear down‚ÄùÔºàÁªìÊùüÔºâÁöÑÂáΩÊï∞„ÄÇÂÆÉÂ∫îËØ•ÈáäÊîæÊâÄÊúâÁî± @code{@var{XXX}_take_control_of()} ÂàÜÈÖçÁöÑËµÑÊ∫ê„ÄÇÂÆÉ‰πüÂèØ‰ª•ÂÖ≥Èó≠Êñá‰ª∂„ÄÇÂ¶ÇÊûúÂÆÉËøô‰πàÂÅö‰∫ÜÔºåÂÆÉÂ∫îÂ∞Ü @code{fd} ÂüüËÆæÁΩÆÊàê @code{INVALID_HANDLE}„ÄÇ

Â¶ÇÊûú @code{fd} Âú®Ëøô‰∏™ÂáΩÊï∞Ë∞ÉÁî®ÂêéËøò‰∏çÊòØ @code{INVALID_HANDLE}Ôºå@command{gawk} ‰ºöË∞ÉÁî®Â∏∏ËßÑÁöÑ @code{close()} Á≥ªÁªüË∞ÉÁî®„ÄÇ

ÊòØÂê¶Êúâ‚Äúteardown‚ÄùÂáΩÊï∞ÊòØÂèØÈÄâÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†ÁöÑËæìÂÖ•ÂàÜÊûêÂô®‰∏çÈúÄË¶ÅÂÆÉÔºåÂ∞±‰∏çË¶ÅËÆæÁΩÆËøô‰∏™Âüü„ÄÇËøôÊ†∑Ôºå@command{gawk} ‰ºöÂú®Êñá‰ª∂ÊèèËø∞‰∏äË∞ÉÁî®Â∏∏ËßÑÁöÑ @code{close()} Á≥ªÁªüË∞ÉÁî®ÔºåÂõ†Ê≠§Ëøô‰∏™ÂüüÈúÄË¶ÅÊòØÊúâÊïàÁöÑ„ÄÇ
@end table

@code{@var{XXX}_get_record()} ÂáΩÊï∞ÊâßË°åÂàõÂª∫ËÆ∞ÂΩïÁöÑÂ∑•‰Ωú„ÄÇÂèÇÊï∞Â¶Ç‰∏ãÔºö

@table @code
@item char **out
Ëøô‰∏™ÊòØ‰∏Ä‰∏™ÊåáÂêë @code{char *} ÂèòÈáèÁöÑÊåáÈíàÔºåËøô‰∏™ÊåáÈíàÊåáÂêëËÆ∞ÂΩï„ÄÇ@command{gawk} ‰ºöÂ§çÂà∂Ëá™Â∑±ÁöÑÊï∞ÊçÆÔºåÊâÄ‰ª•Êâ©Â±ïÈúÄË¶ÅËá™Â∑±ÁÆ°ÁêÜËøô‰∏™Â≠òÂÇ®„ÄÇ

@item struct awk_input *iobuf
Ëøô‰∏™ÊòØÁî®‰∫éÊñá‰ª∂ÁöÑ @code{awk_input_buf_t}ÔºåÈáåÈù¢ÁöÑÂüüÂ∫îÂΩìÁî®‰∫éËØªÂèñÊï∞ÊçÆÔºà@code{fd}Ôºâ‰ª•ÂèäÂ¶ÇÊûúÊúâÁöÑËØùÔºåÁÆ°ÁêÜÁßÅÊúâÁä∂ÊÄÅÔºà@code{opaque}Ôºâ„ÄÇ

@item int *errcode
Â¶ÇÊûúÂá∫Áé∞‰∫ÜÈîôËØØ„ÄÇ@code{*errcode} Â∫îËØ•Ë¢´ËÆæÁΩÆÊàê @code{<errno.h>} Êñá‰ª∂‰∏≠ÁöÑÁõ∏Â∫î‰ª£Á†Å„ÄÇ

@item char **rt_start
@itemx size_t *rt_len
Â¶ÇÊûú‚Äúrecord terminator‚ÄùÊúâÊÑè‰πâÁöÑËØùÔºåÂàô @code{*rt_start} Â∫îËØ•Ë¢´ËÆæÁΩÆÊàêÊåáÂêëÁî®‰∫é @code{RT} ÁöÑÊï∞ÊçÆ„ÄÇËÄå @code{*rt_len} Â∫îËØ•Ë¢´ËÆæÁΩÆÊàêÊï∞ÊçÆÁöÑÈïøÂ∫¶„ÄÇÂê¶ÂàôÔºå@code{*rt_len} Â∫îËØ•Ë¢´ËÆæÁΩÆ‰∏∫ 0„ÄÇ@command{gawk} ‰ºöÁîüÊàêËá™Â∑±ÁöÑÊï∞ÊçÆÂ§çÊú¨ÔºåÊâÄ‰ª•Êâ©Â±ïÈúÄË¶ÅËá™Â∑±ÁÆ°ÁêÜÂÆÉ‰ª¨ÁöÑÂ≠òÂÇ®„ÄÇ
@end table

ËøîÂõûÂÄºÊòØÁî± @code{*out} ÊåáÂêëÁöÑÁºìÂ≠òÁöÑÈïøÂ∫¶ÔºåÊàñËÄÖÂú®Êñá‰ª∂ÁªìÊùüÊó∂ËøîÂõû @code{EOF}Ôºå‰ª•ÂèäÈîôËØØÊó∂ËøîÂõûÈîôËØØ„ÄÇ

ÂøÖÈ°ª‰øùËØÅ @code{errcode} ÊòØ‰∏Ä‰∏™ÊúâÊïàÁöÑÊåáÈíàÔºåÂõ†Ê≠§Â∞±Ê≤°ÊúâÂøÖË¶ÅÂéªÊµãËØïÂÆÉÊòØÂê¶‰∏∫ @code{NULL} ÂÄº„ÄÇ@command{gawk} ËÆæÁΩÆ @code{*errcode} ‰∏∫ 0ÔºåÊâÄ‰ª•Â¶ÇÊûúÊ≤°ÊúâÈîôËØØÁöÑÊó∂ÂÄôÔºå‰πüÊ≤°ÊúâÂøÖË¶ÅËÆæÁΩÆÂÆÉ„ÄÇ

Â¶ÇÊûúÂá∫Áé∞ÁöÑÈîôËØØÔºåÂáΩÊï∞ËøîÂõû @code{EOF}ÔºåÂπ∂‰∏îËÆæÁΩÆ @code{*errcode} ‰∏∫‰∏Ä‰∏™Â§ß‰∫é 0 ÁöÑÂÄº„ÄÇÂú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûú @code{*errcode} ‰∏çÁ≠â‰∫é 0Ôºå@command{gawk} ‰ºöÊ†πÊçÆ @code{*errcode} ÁöÑÂÄºËá™Âä®Êõ¥Êñ∞ @code{ERRNO} ÂèòÈáè„ÄÇÔºà‰∏ÄËà¨ËØ¥Êù•ÔºåËÆæÁΩÆ @samp{*errcode = errno} Â∞±ÂèØ‰ª•‰∫Ü„ÄÇÔºâ

‰Ωú‰∏∫Êõø‰ª£ÔºåÊèê‰æõ‰∏Ä‰∏™ËøîÂõûËæìÂÖ•ËÆ∞ÂΩïÁöÑÂáΩÊï∞Ôºå‰Ω†Êèê‰æõ‰∏Ä‰∏™ÁÆÄÂçïÂú∞ËØªÂèñÂ≠óËäÇÁöÑÂáΩÊï∞Ôºå@command{gawk} ‰ºöÂ∞ÜÂÆÉ‰ªñÂàÜÊûêÂπ∂ÁªÑÂêàÊàêËÆ∞ÂΩï„ÄÇÂ¶ÇÊûú‰Ω†Ëøô‰πàÂÅöÔºåÊï∞ÊçÆÂ∫îËØ•‰ª•ÂΩìÂâçÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆÁöÑÂ§öÂ≠óËäÇÁºñÁ†ÅËøîÂõû„ÄÇËøôÊ†∑ÁöÑÂáΩÊï∞ÁöÑË°å‰∏∫Â∫îËØ•‰∏é @code{read()} Á≥ªÁªüË∞ÉÁî®ÁöÑ‰∏ÄËá¥Ôºå‰Ω†Â∞Ü @code{awk_input_buf_t} ÁªìÊûÑ‰∏≠ÁöÑ @code{read_func} ÊåáÈíàÂ°´‰∏∫Ëøô‰∏™ÂáΩÊï∞ÊåáÈíà„ÄÇ

ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ºöËÆæÁΩÆ @code{read_func} ÊåáÂêë @code{read()} Á≥ªÁªüË∞ÉÁî®ÁöÑÊåáÈíà„ÄÇÊâÄ‰ª•‰Ω†ÁöÑÊâ©Â±ï‰∏çÈúÄË¶ÅÊòæÂºèÂú∞Ëøô‰πàÂéªÂÅö„ÄÇ

@quotation ÊèêÁ§∫
‰Ω†ÂøÖÈ°ªÈÄâÊã©‰∏Ä‰∏™ÊàñËÄÖÂè¶Â§ñ‰∏Ä‰∏™ÊñπÊ≥ïÔºöË¶Å‰πàÊòØ‰∏Ä‰∏™ËøîÂõûËÆ∞ÂΩïÁöÑÂáΩÊï∞ÔºåÊàñËÄÖ‰∏Ä‰∏™ËøîÂõûÂéüÂßãÊï∞ÊçÆÁöÑÂáΩÊï∞„ÄÇÁâπÂà´ÊòØÔºåÂ¶ÇÊûú‰Ω†Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞Êù•Ëé∑Âèñ‰∏Ä‰∏™ËÆ∞ÂΩïÔºå@command{gawk} ‰ºöË∞ÉÁî®ÂÆÉÔºåËÄåÁªù‰∏ç‰ºöË∞ÉÁî®ÂéüÁîüÁöÑ read ÂáΩÊï∞„ÄÇ
@end quotation

@command{gawk} ÂèëÂ∏É‰∫Ü‰∏Ä‰∏™ËÉΩËØªÂèñÁõÆÂΩïÁöÑ‰æãÂ≠êÊâ©Â±ïÔºåËøîÂõûÊüê‰∏™ÁõÆÂΩï‰∏ãÁöÑÊØè‰∏Ä‰∏™ËÆ∞ÂΩïÔºàÊü•Áúã @pxref{Extension
Sample Readdir}Ôºâ„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™‰ª£Á†ÅÊù•‰Ωú‰∏∫ÊåáÂØºÊù•ÂÜô‰Ω†Ëá™Â∑±ÁöÑËæìÂÖ•ÂàÜÊûêÂô®„ÄÇ

ÂΩìÂÜô‰∏Ä‰∏™ËæìÂÖ•ÂàÜÊûêÂô®Êó∂Ôºå‰Ω†Â∫îËØ•Ë¶ÅËÄÉËôëÔºàÂπ∂‰∏îÁî®Êñá‰ª∂ËÆ∞ÂΩï‰∏ãÊù•ÔºâÂÆÉÂ¶Ç‰ΩïÊù•‰∏é @command{awk} ‰ª£Á†ÅËøõË°å‰∫§‰∫í„ÄÇ‰Ω†ÂèØËÉΩÊÉ≥ÂÆÉÊÄªÊòØË¢´Ë∞ÉÁî®ÔºåÂπ∂‰∏îËÉΩÂ§üÊ≠£Á°ÆÂ§ÑÁêÜÔºàÂ¶Ç @code{readdir} Êâ©Â±ï‰ª£Á†Å‰∏ÄÊ†∑Ôºâ„ÄÇÂèàÊàñËÄÖ‰Ω†ÊÉ≥ÂÆÉÊ†πÊçÆ @command{awk} ÂèòÈáèÁöÑÂÄºÊù•Á°ÆÂÆöÊòØÂê¶Ë¢´Ë∞ÉÁî®ÔºåÂ¶ÇÊù•Ëá™ @code{gawkextlib} È°πÁõÆÔºàÊü•Áúã @pxref{gawkextlib}Ôºâ‰∏≠ÁöÑ XML Êâ©Â±ï‰∏ÄÊ†∑„ÄÇÂú®ÂêéÈù¢ÁöÑ‰æãÂ≠ê‰∏≠ÔºåÂú® @code{BEGINFILE} ÊÆµ‰∏≠ÁöÑ‰ª£Á†ÅÂèØ‰ª•Êü•Áúã @code{FILENAME} ‰∏é @code{ERRNO} ÁöÑÂÄºÊù•ÂÜ≥ÂÆöÊòØÂê¶ÊøÄÊ¥ªËæìÂÖ•ÂàÜÊûêÂô®ÔºàÊü•Áúã @pxref{BEGINFILE/ENDFILE}Ôºâ„ÄÇ

‰Ω†ÈÄöËøá‰∏ãÈù¢ÁöÑÂáΩÊï∞Êù•Ê≥®ÂÜåËæìÂÖ•ÂàÜÊûêÂô®Ôºö

@table @code
@item void register_input_parser(awk_input_parser_t *input_parser);
Ê≥®ÂÜåÈÄöËøá @code{input_parser} ÊåáÂêëÁöÑËæìÂÖ•ÂàÜÊûêÂô®Âà∞ @command{gawk} ‰∏≠„ÄÇ
@end table

@node Output Wrappers
@subsubsection ÂÆöÂà∂ËæìÂá∫ÂåÖË£ÖÂô®
@cindex customized output wrapper

@cindex output wrapper
@dfn{ËæìÂá∫ÂåÖË£ÖÂô®}ÊòØËæìÂÖ•ÂàÜÊûêÂô®ÁöÑÂè¶‰∏ÄÈù¢„ÄÇÂÆÉÂèØ‰ª•‰ΩøÂæóÊâ©Â±ïËÉΩÂ§üÊéåÊè°ÈÄöËøá @samp{>} ÊàñËÄÖ @samp{>>} ÈáçÂÆöÂêëI/OÊìç‰ΩúÁ¨¶ÊâìÂºÄÊñá‰ª∂ÔºàÊü•Áúã @pxref{Redirection}Ôºâ„ÄÇ

ËæìÂá∫ÂåÖË£ÖÂô®ÁöÑÁªìÊûÑ‰∏éËæìÂÖ•ÂàÜÊûêÂô®ÁöÑÁªìÊûÑÈùûÂ∏∏Áõ∏‰ººÔºö

@example
typedef struct awk_output_wrapper @{
    const char *name;   /* name of the wrapper */
    awk_bool_t (*can_take_file)(const awk_output_buf_t *outbuf);
    awk_bool_t (*take_control_of)(awk_output_buf_t *outbuf);
    awk_const struct awk_output_wrapper *awk_const next;  /* for gawk */
@} awk_output_wrapper_t;
@end example

ÊàêÂëòÂ¶Ç‰∏ãÔºö

@table @code
@item const char *name;
ËøôÈáåËæìÂá∫ÂåÖË£ÖÂô®ÁöÑÂêçÂ≠ó„ÄÇ

@item awk_bool_t (*can_take_file)(const awk_output_buf_t *outbuf);
Ëøô‰∏™ÊåáÂêë‰∏Ä‰∏™ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞Ê£ÄÊµãÁî± @code{outbuf} ÊåáÂêë @code{awk_output_buf_t} ÁªìÊûÑÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúËæìÂá∫ÂåÖË£ÖÂô®ÊÉ≥ÊéåÊéßËæìÂá∫Êñá‰ª∂ÔºåÂàôÂ∫îËØ•ËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇÂÆÉ‰∏çÂ∫îËØ•ÊîπÂèò‰ªª‰Ωï @command{gawk} ÁöÑÁä∂ÊÄÅÔºàÊØîÂ¶ÇÂèòÈáèÁ≠âÔºâ„ÄÇ

@item awk_bool_t (*take_control_of)(awk_output_buf_t *outbuf);
Áî±Ëøô‰∏™ÂüüÊâÄÊåáÂêëÁöÑÂáΩÊï∞Âú® @command{gawk} ÂÜ≥ÂÆö‰ΩøËæìÂá∫ÂåÖË£ÖÂô®ÊéßÂà∂Êñá‰ª∂ÁöÑÊó∂ÂÄôË∞ÉÁî®„ÄÇÂÆÉÂ∫îËØ•Â∞Ü @code{awk_output_buf_t} ÁªìÊûÑ‰∏≠ÁöÑÊàêÂëòÈÄÇÂ∫îÂú∞Â°´ÂÖÖÔºåÂ¶ÇÊûúÊàêÂäüÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇÁõ∏ÂÖ≥ÁöÑËØ¥ÊòéÂú®‰∏ãÈù¢ÊèèËø∞„ÄÇ

@item awk_const struct output_wrapper *awk_const next;
Ëøô‰∏™Áî± @command{gawk} ‰ΩøÁî®ÔºåÂõ†Ê≠§ÂÆÉË¢´Ê†áÂøó‰∏∫ @code{awk_const}ÔºåËøôÊ†∑Êâ©Â±ïÂ∞±‰∏çËÉΩÂ§ü‰øÆÊîπÂÆÉ„ÄÇ
@end table

@code{awk_output_buf_t} ÁöÑÁªìÊûÑÂ¶Ç‰∏ãÔºö

@example
typedef struct awk_output_buf @{
    const char *name;   /* name of output file */
    const char *mode;   /* mode argument to fopen */
    FILE *fp;           /* stdio file pointer */
    awk_bool_t redirected;  /* true if a wrapper is active */
    void *opaque;       /* for use by output wrapper */
    size_t (*gawk_fwrite)(const void *buf, size_t size, size_t count,
                FILE *fp, void *opaque);
    int (*gawk_fflush)(FILE *fp, void *opaque);
    int (*gawk_ferror)(FILE *fp, void *opaque);
    int (*gawk_fclose)(FILE *fp, void *opaque);
@} awk_output_buf_t;
@end example

ËøôÈáå‰πü‰∏ÄÊ†∑Ôºå‰Ω†ÁöÑÊñΩÂ±ïË¶ÅÂÆö‰πâ @code{@var{XXX}_can_take_file()} ‰∏é @code{@var{XXX}_take_control_of()} Ëøô‰∫õÂáΩÊï∞ÔºåÁî®‰ª•Ê£ÄÊµãÂπ∂Êõ¥Êñ∞ @code{awk_output_buf_t} ‰∏≠ÁöÑÊàêÂëò„ÄÇÊï∞ÊçÆÊàêÂëòÁöÑËØ¥ÊòéÂ¶Ç‰∏ãÔºö

@table @code
@item const char *name;
ËæìÂá∫Êñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇ

@item const char *mode;
Ê®°ÂºèÂ≠ó‰∏≤ÔºàÊ≠£Â¶Ç @code{fopen()} Á¨¨‰∫å‰∏™ÂèÇÊï∞‰∏ÄÊ†∑‰ΩøÁî®ÔºâÔºåÈÄöËøá‰ΩøÁî®Ëøô‰∫õÊ®°ÂºèÊù•ÊâìÂºÄÊñá‰ª∂„ÄÇ

@item FILE *fp;
Êù•Ëá™Áî± @code{<stdio.h>} ÁöÑ @code{FILE} ÊåáÈíà„ÄÇ@command{gawk} ‰ºöÂú®Êü•ÊâæËæìÂá∫ÂåÖË£ÖÂô®ÂâçËØïÁùÄÊâìÂºÄÊñá‰ª∂„ÄÇ

@item awk_bool_t redirected;
Ëøô‰∏™ÂüüÂøÖÈ°ªË¢´ @code{@var{XXX}_take_control_of()} ËÆæÁΩÆ‰∏∫ true„ÄÇ

@item void *opaque;
Ëøô‰∏™ÊåáÈíàÂØπ‰∫é @command{gawk} ÊòØÈÄèÊòéÁöÑ„ÄÇÊâ©Â±ïÂèØ‰ª•‰ΩøÁî®ÂÆÉÊù•Â≠òÂÇ®‰∏éÊñá‰ª∂ÊúâÂÖ≥ÁöÑÁßÅÊúâÊï∞ÊçÆÁöÑÊåáÈíà„ÄÇ

@item size_t (*gawk_fwrite)(const void *buf, size_t size, size_t count,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ FILE *fp, void *opaque);
@itemx int (*gawk_fflush)(FILE *fp, void *opaque);
@itemx int (*gawk_ferror)(FILE *fp, void *opaque);
@itemx int (*gawk_fclose)(FILE *fp, void *opaque);
Ëøô‰∫õÊåáÈíàÂ∫îËØ•Ë¢´ËÆæÁΩÆ‰∏∫ÊåáÂêë‰∏é @code{<stdio.h>} ‰∏≠Áõ∏Â∫îÂáΩÊï∞ÊâßË°åÁõ∏ÂêåÊìç‰ΩúÁöÑÂáΩÊï∞„ÄÇ@command{gawk} ‰ΩøÁî®Ëøô‰∫õÂáΩÊï∞Êù•Â§ÑÁêÜÊâÄÊúâËæìÂá∫„ÄÇ@command{gawk} ‰ºöÂ∞ÜËøô‰∫õÊåáÈíàÂàùÂßãÂåñÊåáÂêëÂÜÖÈÉ®ÁöÑ‚ÄúËøáË∑Ø‚ÄùÂáΩÊï∞ÔºåËøô‰∫õÂáΩÊï∞‰∏≠ÊòØË∞ÉÁî®Â∏∏ËßÑÁöÑ @code{<stdio.h>} ÂáΩÊï∞ÔºåÊâÄ‰ª•Êâ©Â±ïË¶ÅÊ†πÊçÆÊâÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖÂÆö‰πâÂêàÈÄÇÂáΩÊï∞„ÄÇ
@end table

@code{@var{XXX}_can_take_file()} ÂáΩÊï∞ÂèØ‰ª•Ê†πÊçÆ @code{name}Ôºå@code{mode} Âüü‰ª•ÂèäÂÖ∂‰ªñÁöÑÁä∂ÊÄÅÔºàÂ¶Ç @command{awk} ÂèòÈáèÁöÑÂÄºÔºâÊù•ÂÅöÂá∫Áõ∏Â∫îÁöÑÂÜ≥ÂÆö„ÄÇ

ÂΩì @command{gawk} Ë∞ÉÁî® @code{@var{XXX}_take_control_of()} ÂáΩÊï∞Êó∂ÔºåËøô‰∏™ÂáΩÊï∞Â∫îËØ•ÂØπÂÖ∂‰ªñÁöÑÂüüËøõË°åÈÄÇÂΩìÁöÑÂ°´ÂÖÖÔºå‰∏çÂåÖÊã¨ @code{fp}Ôºå@code{fp} ÂèÇÊï∞Âè™ÊòØ‰ºöËøõË°åÂ∏∏ËßÑ‰ΩøÁî®„ÄÇ

‰Ω†ÈÄöËøá‰∏ãÈù¢ÁöÑÂáΩÊï∞Êù•Ê≥®ÂÜå‰Ω†ÁöÑËæìÂá∫ÂåÖË£ÖÂô®Ôºö

@table @code
@item void register_output_wrapper(awk_output_wrapper_t *output_wrapper);
Â∞ÜÁî± @code{output_wrapper} ÊåáÂêëÁöÑËæìÂá∫ÂåÖË£ÖÂô®Ê≥®ÂÜåÂà∞ @command{gawk} ‰∏≠„ÄÇ
@end table

@node Two-way processors
@subsubsection ÂÆöÂà∂ÂèåË∑ØÂ§ÑÁêÜÂô®
@cindex customized two-way processor

‰∏Ä‰∏™@dfn{ÂèåË∑ØÂô®}Â∞ÜËæìÂÖ•ÂàÜÊûêÂô®‰∏éËæìÂá∫ÂåÖË£ÖÂô®Êù•Â§ÑÁêÜÁî± @samp{|&} ÊâìÂºÄÁöÑÂèåË∑Ø I/OÔºàÊü•Áúã @pxref{Redirection}Ôºâ„ÄÇÂÆÉÁöÑ‰ΩøÁî®‰∏é‰πãÂâçÊèèËø∞ËøáÁöÑ @code{awk_input_parser_t} ‰∏é @code{awk_output_buf_t} Áõ∏Âêå„ÄÇ

‰∏§Ë∑ØÂ§ÑÁêÜÂô®Áî±‰∏ãÈù¢ÁöÑÁªìÊûÑË°®Á§∫Ôºö

@example
typedef struct awk_two_way_processor @{
    const char *name;   /* name of the two-way processor */
    awk_bool_t (*can_take_two_way)(const char *name);
    awk_bool_t (*take_control_of)(const char *name,
                                  awk_input_buf_t *inbuf,
                                  awk_output_buf_t *outbuf);
    awk_const struct awk_two_way_processor *awk_const next;  /* for gawk */
@} awk_two_way_processor_t;
@end example

ÂüüÂ¶Ç‰∏ãÔºö

@table @code
@item const char *name;
ÂèåË∑ØÂ§ÑÁêÜÂô®ÁöÑÂêçÂ≠ó„ÄÇ

@item awk_bool_t (*can_take_two_way)(const char *name);
Â¶ÇÊûúÁî±Ëøô‰∏™ÂüüÊåáÂêëÁöÑÂáΩÊï∞ÊÉ≥ÊéßÂà∂@value{FN}ÁöÑÂèåË∑Ø I/OÔºåÂÆÉÂ∫îËØ•ËøîÂõû true„ÄÇÂÆÉ‰∏çÂ∫îËØ•ÊîπÂèò @command{gawk} ‰∏≠ÁöÑ‰ªª‰ΩïÁä∂ÊÄÅÔºàÊØîÂ¶ÇÂèòÈáèÂÄºÔºâ„ÄÇ

@item awk_bool_t (*take_control_of)(const char *name,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_input_buf_t *inbuf,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_output_buf_t *outbuf);
Áî±Ëøô‰∏™ÂüüÊåáÂêëÁöÑÂáΩÊï∞Â∫îËØ•ÈÄÇÂΩìÂú∞Â°´ÂÖÖÁî± @code{inbuf} ‰∏é @code{outbuf} ÊâÄÊåáÂêë‰∏≠ÁöÑ @code{awk_input_buf_t} ‰∏é @code{awk_output_buf_t} ÁöÑÁªìÊûÑ„ÄÇËøô‰∏§‰∏™ÁªìÊûÑ‰πãÂâçÊâÄÊèèËø∞„ÄÇ

@item awk_const struct two_way_processor *awk_const next;
Ëøô‰∏™Áî± @command{gawk} Êù•‰ΩøÁî®ÔºåÊâÄ‰ª•ÂÆÉË¢´Ê†áÂøóÊàê @code{awk_const}ÔºåËøôÊ†∑Êâ©Â±ïÂ∞±‰∏çÂèØ‰ª•‰øÆÊîπÂÆÉ„ÄÇ
@end table

ÂØπ‰∫éËæìÂÖ•Â§ÑÁêÜÂô®‰∏éËæìÂá∫Â§ÑÁêÜÂô®Âô®Ôºå‰Ω†ÈúÄË¶ÅÊèê‰æõ‚Äúyes I can take this‚ÄùÔºàÊòØÁöÑÔºåÊàëÂèØ‰ª•Â§ÑÁêÜËøô‰∏™Ôºâ ‰∏é‚Äútake over for this‚ÄùÔºàÊàëÂ∑≤ÁªèÊéßÂà∂Ëøô‰∏™ÔºâÁ±ªÁöÑÂáΩÊï∞ÔºåÂç≥ @code{@var{XXX}_can_take_two_way()} ‰∏é @code{@var{XXX}_take_control_of()}„ÄÇ

‰Ω†‰ΩøÁî®‰∏ãÈù¢ÁöÑÂáΩÊï∞Êù•Ê≥®ÂÜå‰Ω†ÁöÑÂèåË∑ØÂ§ÑÁêÜÂô®Ôºö

@table @code
@item void register_two_way_processor(awk_two_way_processor_t *two_way_processor);
Â∞ÜÁî± @code{two_way_processor} ÊåáÂêëÁöÑÂèåË∑ØÂ§ÑÁêÜÂô®Ê≥®ÂÜåÂà∞ @command{gawk} ‰∏≠„ÄÇ
@end table

@node Printing Messages
@subsection ÊâìÂç∞‰ø°ÊÅØ
@cindex printing messages from extensions
@cindex messages from extensions

‰Ω†ÂèØ‰ª•Âú®‰Ω†ÁöÑÊâ©Â±ï‰∏≠ÊâìÂç∞Â¶ÇÊú¨ËäÇ‰∏≠ÊâÄÊèèËø∞ÁöÑ‰∏çÂêåÁöÑÂêÑÁ±ªÁöÑÂëäË≠¶‰ø°ÊÅØ„ÄÇË¶ÅÊ≥®ÊÑèÂØπ‰∫éËøô‰∫õÂáΩÊï∞Ôºå‰Ω†ÂøÖÈ°ªÊèê‰æõ‰∏Ä‰∏™Êâ©Â±ï IDÔºåËøô‰∏™Êâ©Â±ï ID ÊòØÂú®Êâ©Â±ïË¢´ËΩΩÂÖ•Êó∂Áî± @command{gawk} Êèê‰æõÔºö
@footnote{Áî±‰∫é API Âè™‰ΩøÁî® ISO C 90 ÁöÑÁâπÊÄßÔºåÂõ†Ê≠§‰∏çËÉΩ‰ΩøÁî® ISO C 99 ÁöÑÂèØËÉΩÂèÇÊï∞ÂÆèÁâπÊÄßÊù•ÈöêËóèÂèÇÊï∞„ÄÇÂ§öÂ∞ëÊúâÁÇπÈÅóÊÜæ„ÄÇ}

@table @code
@item void fatal(awk_ext_id_t id, const char *format, ...);
ÊâìÂç∞‰∏Ä‰∏™Ê∂àÊÅØÔºåÂπ∂‰Ωø @command{gawk} Á´ãÂç≥ÈÄÄÂá∫„ÄÇ

@item void warning(awk_ext_id_t id, const char *format, ...);
ÊâìÂç∞ÂëäË≠¶‰ø°ÊÅØ„ÄÇ

@item void lintwarn(awk_ext_id_t id, const char *format, ...);
ÊâìÂç∞‰∏Ä‰∏™‚Äúlint ÂëäË≠¶‚Äù„ÄÇÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåËøô‰∏éÊâìÂç∞‰∏Ä‰∏™ÂëäË≠¶‰ø°ÊÅØ‰∏ÄÊ†∑Ôºå‰ΩÜÊòØÂ¶ÇÊûú @command{gawk} ‰ΩøÁî®‰∫Ü @samp{--lint=fatal} ÈÄâÈ°πÔºåÂàô lint ÂëäË≠¶‰ºöÊàê‰∏∫Ëá¥ÂëΩÈîôËØØÊ∂àÊÅØ„ÄÇ
@end table

ÊâÄÊúâÁöÑËøô‰∫õÂáΩÊï∞ÂÉè C ÁöÑ @code{printf()} ÂÆ∂Â∫≠ÁöÑÂáΩÊï∞‰∏ÄÊ†∑ÔºåÂú®Ëøô‰∫õÂáΩÊï∞‰∏≠Ôºå@code{format} ÂèÇÊï∞ÊòØ‰∏Ä‰∏™Â≠ó‰∏≤Ôºå‰∏≤‰∏≠‰∏∫Â≠óÈù¢Â≠óÁ¨¶‰ª•ÂèäÊ†ºÂºè‰ª£Á†Å„ÄÇ

@node Updating @code{ERRNO}
@subsection Êõ¥Êñ∞ @code{ERRNO}

‰∏ãÈù¢ÁöÑÂáΩÊï∞ÂèØ‰ª•ËÆ©‰Ω†Êõ¥Êñ∞ @code{ERRNO} ÂèòÈáèÔºö

@table @code
@item void update_ERRNO_int(int errno_val);
Â∞Ü @code{ERRNO} ËÆæÁΩÆ‰∏∫‰∏é @code{errno_val} ÂØπÂ∫îÁöÑÈîôËØØÂ≠ó‰∏≤„ÄÇÂÄºÂ∫îËØ•ÂÆö‰πâÂú® @code{<errno.h>} ‰∏≠„ÄÇ@command{gawk} ‰ºö‰ΩøÁî® C ÁöÑ @code{strerror()} ÂáΩÊï∞Â∞ÜÂÆÉËΩ¨Êç¢‰∏∫ÔºàÂ¶ÇÊûúÂèØ‰ª•ËΩ¨Êç¢ÔºâÂ≠ó‰∏≤„ÄÇ

@item void update_ERRNO_string(const char *string);
Áõ¥Êé•‰ΩøÁî® @code{ERRNO} ÁöÑÂ≠óÁ¨¶‰∏≤ÂÄºÊù•ËÆæÁΩÆ @code{ERRNO}„ÄÇ@command{gawk} ‰ºöÂØπËøô‰∏™ÂÄºÂ§çÂà∂‰∏Ä‰∏™Â§çÊú¨„ÄÇ

@item void unset_ERRNO(void);
ÈáçÁΩÆ @code{ERRNO}„ÄÇ
@end table

@node Requesting Values
@subsection ËØ∑Ê±ÇÂÄº

ÊâÄÊúâÁöÑËøô‰∫õÂáΩÊï∞ÈÉΩ‰ª•Áõ∏ÂêåÁöÑÊñπÂºè‰ªé @command{gawk} ‰∏≠ËøîÂõûÂÄº„ÄÇ‰Ω†ÂèØ‰ª•‰º†ÈÄí‰∏Ä‰∏™ @code{awk_valtype_t} ÁöÑÂÄºÊù•ÊåáÁ§∫‰Ω†Â∏åÊúõ‰ªÄ‰πàÁöÑÊ†∑ÂÄº„ÄÇÂ¶ÇÊûúÂÆûÈôÖÁöÑÂÄº‰∏é‰Ω†ÁöÑËØ∑Ê±ÇÁöÑÂåπÈÖçÔºåÂáΩÊï∞ËøîÂõû‰∏∫ true„ÄÇÂπ∂‰∏îÂú® @code{awk_value_t} ‰∏≠Â°´‰∏äÁªìÊûú„ÄÇÂê¶ÂàôÂáΩÊï∞ËøîÂõû false„ÄÇËÄå @code{val_type} ÊàêÂëò‰ºöÊåáÁ§∫ÂÆûÈôÖÁöÑÂÄºÁ±ªÂûã„ÄÇ‰Ω†ÁÑ∂ÂêéÂèØ‰ª•ÊâìÂç∞‰∏Ä‰∏™ÈîôËØØ‰ø°ÊÅØÊàñËÄÖÈáçÊñ∞ÂèëËµ∑ÈíàÂØπÂÆûÈôÖÂÄºÁ±ªÂûãÁöÑËØ∑Ê±Ç„ÄÇËøôÁªìË°å‰∏∫Âú® @ref{table-value-types-returned} ËøõË°å‰∫ÜÂΩíÁ∫≥Ôºö

@float Table,table-value-types-returned
@caption{ËøîÂõûÁöÑ API ÂÄºÁ±ªÂûã}
@docbook
<informaltable>
<tgroup cols="6">
  <colspec colwidth="16.6*"/>
  <colspec colwidth="16.6*"/>
  <colspec colwidth="19.8*" colname="c3"/>
  <colspec colwidth="15*" colname="c4"/>
  <colspec colwidth="15*" colname="c5"/>
  <colspec colwidth="16.6*" colname="c6"/>
  <spanspec spanname="hspan" namest="c3" nameend="c6" align="center"/>
  <thead>
    <row><entry></entry><entry spanname="hspan"><para>Type of Actual Value</para></entry></row>
    <row>
      <entry></entry>
      <entry></entry>
      <entry><para>String</para></entry>
      <entry><para>Number</para></entry>
      <entry><para>Array</para></entry>
      <entry><para>Undefined</para></entry>
    </row>
  </thead>
  <tbody>
    <row>
      <entry></entry>
      <entry><para><emphasis role="bold">String</emphasis></para></entry>
      <entry><para>String</para></entry>
      <entry><para>String</para></entry>
      <entry><para>False</para></entry>
      <entry><para>False</para></entry>
    </row>
    <row>
      <entry></entry>
      <entry><para><emphasis role="bold">Number</emphasis></para></entry>
      <entry><para>Number if can be converted, else false</para></entry>
      <entry><para>Number</para></entry>
      <entry><para>False</para></entry>
      <entry><para>False</para></entry>
    </row>
    <row>
      <entry><para><emphasis role="bold">Type</emphasis></para></entry>
      <entry><para><emphasis role="bold">Array</emphasis></para></entry>
      <entry><para>False</para></entry>
      <entry><para>False</para></entry>
      <entry><para>Array</para></entry>
      <entry><para>False</para></entry>
    </row>
    <row>
      <entry><para><emphasis role="bold">Requested</emphasis></para></entry>
      <entry><para><emphasis role="bold">Scalar</emphasis></para></entry>
      <entry><para>Scalar</para></entry>
      <entry><para>Scalar</para></entry>
      <entry><para>False</para></entry>
      <entry><para>False</para></entry>
    </row>
    <row>
      <entry></entry>
      <entry><para><emphasis role="bold">Undefined</emphasis></para></entry>
      <entry><para>String</para></entry>
      <entry><para>Number</para></entry>
      <entry><para>Array</para></entry>
      <entry><para>Undefined</para></entry>
    </row>
    <row>
      <entry></entry>
      <entry><para><emphasis role="bold">Value cookie</emphasis></para></entry>
      <entry><para>False</para></entry>
      <entry><para>False</para></entry>
      <entry><para>False</para>
      </entry><entry><para>False</para></entry>
    </row>
  </tbody>
</tgroup>
</informaltable>
@end docbook

@ifnotplaintext
@ifnotdocbook
@multitable @columnfractions .50 .50
@headitem @tab Type of Actual Value
@end multitable
@c 10/2014: Thanks to Karl Berry for this bit to reduce the space:
@tex
\vglue-1.1\baselineskip
@end tex
@multitable @columnfractions .166 .166 .198 .15 .15 .166
@headitem @tab @tab String @tab Number @tab Array @tab Undefined
@item @tab @b{String} @tab String @tab String @tab False @tab False
@item @tab @b{Number} @tab Number if can be converted, else false @tab Number @tab False @tab False
@item @b{Type} @tab @b{Array} @tab False @tab False @tab Array @tab False
@item @b{Requested} @tab @b{Scalar} @tab Scalar @tab Scalar @tab False @tab False
@item @tab @b{Undefined} @tab String @tab Number @tab Array @tab Undefined
@item @tab @b{Value cookie} @tab False @tab False @tab False @tab False
@end multitable
@end ifnotdocbook
@end ifnotplaintext
@ifplaintext
@example
                        +-------------------------------------------------+
                        |                Type of Actual Value:            |
                        +------------+------------+-----------+-----------+
                        |   String   |   Number   | Array     | Undefined |
+-----------+-----------+------------+------------+-----------+-----------+
|           | String    |   String   |   String   | False     | False     |
|           |-----------+------------+------------+-----------+-----------+
|           | Number    | Number if  |   Number   | False     | False     |
|           |           | can be     |            |           |           |
|           |           | converted, |            |           |           |
|           |           | else false |            |           |           |
|           |-----------+------------+------------+-----------+-----------+
|   Type    | Array     |   False    |   False    | Array     | False     |
| Requested |-----------+------------+------------+-----------+-----------+
|           | Scalar    |   Scalar   |   Scalar   | False     | False     |
|           |-----------+------------+------------+-----------+-----------+
|           | Undefined |  String    |   Number   | Array     | Undefined |
|           |-----------+------------+------------+-----------+-----------+
|           | Value     |   False    |   False    | False     | False     |
|           | cookie    |            |            |           |           |
+-----------+-----------+------------+------------+-----------+-----------+
@end example
@end ifplaintext
@end float

@node Accessing Parameters
@subsection ËÆøÈóÆ‰∏éÊõ¥Êñ∞ÂèÇÊï∞

Êúâ‰∏§‰∏™ÂáΩÊï∞ÂèØ‰ª•ËÆ©‰Ω†ËÆøÈóÆ‰º†ÈÄíÁªô‰Ω†ÁöÑÊâ©Â±ïÂáΩÊï∞ÁöÑÂèÇÊï∞„ÄÇÂÆÉ‰ª¨ÊòØÔºö

@table @code
@item awk_bool_t get_argument(size_t count,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_valtype_t wanted,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_value_t *result);
Áî®Á¨¨ @code{count} ‰∏™ÂèÇÊï∞Êù•Â°´ÂÖÖÁî± @code{result} ÊåáÂêëÁöÑ @code{awk_value_t} ÁªìÊûÑ„ÄÇÂ¶ÇÊûúÂÆûÈôÖÁöÑÁ±ªÂûã‰∏é @code{wanted} ÊòØÂåπÈÖçÁöÑÔºåÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇÂú®ÂêéÈù¢ÁöÑÊÉÖÂÜµ‰∏ãÔºå@code{result@w{->}val_type} ÊåáÁ§∫‰∫ÜÂÆûÈôÖÁöÑÁ±ªÂûãÔºàÊü•Áúã @pxref{table-value-types-returned}Ôºâ„ÄÇËÆ°Êï∞ÊòØ‰ªé 0 ÂºÄÂßãÁöÑ‚Äî‚ÄîÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÁºñÂè∑‰∏∫ 0ÔºåÁ¨¨‰∫å‰∏™‰∏∫ 1ÔºåÁ≠âÁ≠â„ÄÇ@code{wanted} ÊåáÁ§∫‰∫ÜÊâÄÊúüÊúõÁöÑÂÄºÁ±ªÂûã„ÄÇ

@item awk_bool_t set_argument(size_t count, awk_array_t array);
Â∞ÜÊú™ÂÆö‰πâÁöÑÂèÇÊï∞ËΩ¨Êç¢‰∏∫‰∏Ä‰∏™Êï∞ÁªÑÔºåËøôÊèê‰æõ‰∫ÜÈÄöËøáÊï∞ÁªÑÂºïÁî®Êù•Ë∞ÉÁî®ÁöÑÊñπÂºè„ÄÇÂ¶ÇÊûú @code{count} Â§™Â§ßÔºåÊàñËÄÖÂ¶ÇÊûúÂèÇÊï∞Á±ªÂûãÊòØÊú™ÂÆö‰πâÁöÑÔºåÂàôËøîÂõû false„ÄÇÊü•Áúã @xref{Array Manipulation}ÔºåÊù•Êü•ÁúãÂàõÂª∫Êï∞ÁªÑÁöÑÊõ¥Â§ö‰ø°ÊÅØ„ÄÇ
@end table

@node Symbol Table Access
@subsection Á¨¶Âè∑Ë°®ËÆøÈóÆ
@cindex accessing global variables from extensions

Êúâ‰∏§‰∏™ÈõÜÂêàÁöÑ‰æãÁ®ãÊèê‰æõ‰∫ÜËÆøÈóÆÂÖ®Â±ÄÂèòÈáèÁöÑËÉΩÂäõÔºå‰ª•Âèä‰∏Ä‰∏™ÈõÜÂêàÁöÑ‰æãÁ®ãÂèØ‰ª•ËÆ©‰Ω†ÂàõÂª∫Âπ∂ÈáäÊîæÁºìÂ≠òÂÄº„ÄÇ

@menu
* Symbol table by name::        Accessing variables by name.
* Symbol table by cookie::      Accessing variables by ``cookie''.
* Cached values::               Creating and using cached values.
@end menu

@node Symbol table by name
@subsubsection ÈÄöËøáÂêçÂ≠óËÆøÈóÆ‰∏éÊõ¥Êñ∞ÂèòÈáè

‰∏ãÈù¢ÁöÑ‰æãÁ®ãÊèê‰æõ‰∫ÜÈÄöËøáÂêçÂ≠óÊù•ËÆøÈóÆ„ÄÅÊõ¥Êñ∞ÂÖ®Â±ÄÁöÑ @command{awk} Â±ÇÂèòÈáèÁöÑËÉΩÂäõ„ÄÇ‰ª•ÁºñËØëÂô®ÁöÑÊúØËØ≠Êù•ÁúãÔºå‰∏çÂêåÂêÑÁ±ªÁöÑÊ†áËØÜÁ¨¶ÈÉΩÁß∞‰∏∫@dfn{Á¨¶Âè∑}ÔºåËøôÊòØ‰æãÁ®ã‰∏≠ÁöÑ‚Äúsym‚ÄùÂêçÂ≠óÁöÑÊù•Áî±„ÄÇÂ≠òÂÇ®Á¨¶Âè∑‰ø°ÊÅØÁöÑÊï∞ÁªÑÁªìÊûÑÁß∞‰∏∫@dfn{Á¨¶Âè∑Ë°®}„ÄÇËøô‰∫õÂáΩÊï∞Â¶Ç‰∏ãÔºö

@table @code
@item awk_bool_t sym_lookup(const char *name,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_valtype_t wanted,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_value_t *result);
Áî®Áî±Â≠ó‰∏≤ @code{name} ÂëΩ‰ª§ÁöÑÂèòÈáèÁöÑÂÄºÊù•Â°´ÂÖÖÁî± @code{result} ÊåáÂêëÂê¨ @code{awk_value_t} ÁöÑÁªìÊûÑÔºåÂêçÂ≠ó‰∏∫ C Â≠ó‰∏≤„ÄÇ@code{wanted} ÊåáÁ§∫‰∫ÜÊúüÊúõÁöÑÂÄºÁöÑÁ±ªÂûã„ÄÇÂ¶ÇÊûúÂÆûÈôÖÁöÑÁ±ªÂûã‰∏éÂÖ∂ÂåπÈÖçÔºåÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇÂú®ÂêéÈù¢ÁöÑÊÉÖÂÜµ‰∏ãÔºå@code{result->val_type} ÊåáÁ§∫‰∫ÜÂÆûÈôÖÁöÑÁ±ªÂûãÔºàÊü•Áúã @pxref{table-value-types-returned}Ôºâ„ÄÇ

@item awk_bool_t sym_update(const char *name, awk_value_t *value);
Êõ¥Êñ∞Áî±Â≠ó‰∏≤ @code{name} ÂëΩÂêçÁöÑÂèòÈáèÔºåËøô‰∏™ÂêçÂ≠ó‰∏∫ C Â≠ó‰∏≤„ÄÇÂ¶ÇÊûúÂèòÈáè‰∏çÂ≠òÂú® @command{gawk} ÁöÑÁ¨¶Âè∑Ë°®‰∏≠ÔºåÂàô‰ºöÊñ∞Â¢ûÂÆÉ„ÄÇÂ¶ÇÊûú‰∏ÄÂàá OKÔºåÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇ

ÊîπÂèòÂ∑≤ÁªèÂ≠òÂú®ÁöÑÂèòÈáèÁöÑÁ±ªÂûãÔºà‰ªéÊ†áÈáèÂà∞Êï∞ÁªÑÔºåÊàñËÄÖÁõ∏ÂèçÔºâÊòØ@emph{‰∏ç}ÂÖÅËÆ∏ÁöÑÔºåËøô‰∏™‰æãÁ®ã‰πü‰∏çËÉΩÁî®‰∫éÊï∞ÁªÑÁöÑÊõ¥Êñ∞„ÄÇËøô‰∏™‰æãÁ®ã‰∏çÂèØ‰ª•Áî®‰∫éÊõ¥Êñ∞‰ªª‰ΩïÁöÑÈ¢ÑÂÆö‰πâÂèòÈáèÁöÑÂÄºÔºàÂ¶Ç @code{ARGC} ÊàñËÄÖ @code{NF}Ôºâ„ÄÇ
@end table

Êâ©Â±ïÂèØ‰ª•Êü•Êâæ @command{gawk} ÁöÑÁâπÂÆöÂèòÈáè„ÄÇ‰ΩÜÊòØÔºå@code{PROCINFO} Êï∞ÁªÑÊòØ‰∏™‰æãÂ§ñÔºåÊâ©Â±ï‰∏çÂèØ‰ª•ÊîπÂèòËøô‰∫õÂèòÈáèÁöÑÂÄº„ÄÇ

@quotation Ê≥®ÊÑè
ÊúâÂèØËÉΩÊü•Êâæ @code{PROCINFO} Â§±Ë¥•„ÄÇÂ¶ÇÊûú @command{awk} Á®ãÂ∫èÂú®ËøêË°åÊó∂Ê≤°Êúâ‰ΩøÁî® @code{PROCINFO} Êó∂‰ºöÂºïËµ∑Â§±Ë¥•ÔºåÂú®Ëøô‰∏™ÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰∏ç‰ºöÂàõÂª∫Ëøô‰∏™Êï∞ÁªÑÂπ∂‰º†Êí≠ÂÆÉ„ÄÇ
@end quotation

@node Symbol table by cookie
@subsubsection ÈÄöËøá Cookie ËÆøÈóÆ‰∏éÊõ¥Êñ∞ÂèòÈáè

@dfn{Ê†áÈáè cookie} ÊòØ‰∏Ä‰∏™ÈÄèÊòéÁöÑÂè•ÊüÑÔºåÂèØ‰ª•Áî®Êù•ËÆøÈóÆÂÖ®Â±ÄÂèòÈáè‰ª•ÂèäÊï∞ÁªÑ„ÄÇÂÆÉÊòØ‰∏ÄÁßç‰ºòÂåñÊâãÊÆµÔºå‰ª•ÂÖçÂú®‰ΩøÁî®ÂèòÈáèÊó∂ÂéªÂú® @command{gawk} ÁöÑÁ¨¶Âè∑Ë°®‰∏≠ÂéªÊü•ÊâæÂèòÈáèÔºåËøô‰∏™Êó©ÂâçÂú® @ref{General Data Types}ÔºåÂ∑≤ÁªèËÆ®ËÆ∫Ëøá„ÄÇ

‰∏ãÈù¢ÁöÑÂáΩÊï∞Áî®Êù•ËøáÂ§ÑÁêÜÊ†áÈáè cookiesÔºö

@table @code
@item awk_bool_t sym_lookup_scalar(awk_scalar_t cookie,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_valtype_t wanted,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_value_t *result);
ËøîÂõûÊ†áÈáè cookie ÁöÑÂΩìÂâçÂÄºÔºå‰∏ÄÊó¶‰Ω†ÈÄöËøá @code{sym_lookup()} Ëé∑Âèñ‰∫Ü‰∏Ä‰∏™Ê†áÈáèÁöÑ cookie ÂêéÔºå‰Ω†Â∞±ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™ÂáΩÊï∞Êù•È´òÊïàÂú∞Ëé∑ÂèñÂÆÉÁöÑÂÄº„ÄÇÂ¶ÇÊûúÂÄºÊ≤°ÊúâÂèñÂà∞ÔºåÂàôËøîÂõû false„ÄÇ

@item awk_bool_t sym_update_scalar(awk_scalar_t cookie, awk_value_t *value);
Êõ¥Êñ∞‰∏éÊ†áÈáè cookie ÂÖ≥ËÅîÁöÑÂÄº„ÄÇÂ¶ÇÊûúÊñ∞ÂÄºÂç≥‰∏çÊòØ @code{AWK_STRING}Ôºå‰πü‰∏çÊòØ @code{AWK_NUMBER}ÔºåÂàôËøîÂõû false„ÄÇÂú®ËøôÈáå‰πüÊòØ‰∏ÄÊ†∑ÔºåÈ¢ÑÂÆöÁöÑ‰πâÁöÑÂèòÈáè‰∏çËÉΩË¢´Êõ¥Êñ∞ÁöÑ„ÄÇ
@end table

‰∏ÄÂºÄÂßãËøôÂ¶Ç‰ΩïÊù•‰ΩøÁî®Ê†áÈáè Cookie Âπ∂‰∏çÊòØÂæàÊòéÊòæÔºå‰πü‰∏çÁü•ÈÅìÂÆÉ‰ª¨ÁöÑ @i{raison d'@^etre} Âà∞Â∫ïÊòØ‰ªÄ‰πà„ÄÇÁêÜËÆ∫‰∏äÔºå@code{sym_lookup()} ‰ª•Âèä @code{sym_update()} ‰æãÁ®ãÂ∞±ÊòØ‰Ω†Êù•Â§ÑÁêÜÂèòÈáèÊó∂ÊâÄË¶ÅÁöÑÊâÄÊúâ‰æãÁ®ã„ÄÇ‰æãÂ¶ÇÔºå‰Ω†Êúâ‰ª£Á†ÅË¶ÅÊü•ÊâæÂèòÈáèÁöÑÂÄºÔºåÂØπÊù°‰ª∂ËøõË°åÊ±ÇÂÄºÔºåÁÑ∂ÂêéÂ∞±ÂèØ‰ª•ÈÄöËøáÊ±ÇÂÄºÁöÑÁªìÊûúÂèòÊõ¥ÂèòÈáèÁöÑÂÄºÔºåÂ¶ÇÔºö

@example
/*  do_magic --- do something really great */

static awk_value_t *
do_magic(int nargs, awk_value_t *result)
@{
    awk_value_t value;

    if (   sym_lookup("MAGIC_VAR", AWK_NUMBER, & value)
        && some_condition(value.num_value)) @{
            value.num_value += 42;
            sym_update("MAGIC_VAR", & value);
    @}

    return make_number(0.0, result);
@}
@end example

@noindent
Ëøô‰∏™‰ª£Á†ÅÁúãËµ∑Êù•ÔºàÂÆûÈôÖÔºâÂæàÁÆÄÂçïËÄåÁõ¥Êé•Ôºå‰ΩÜÊòØÈóÆÈ¢òÊòØ‰ªÄ‰πàÂë¢Ôºü

ËÄÉËôë‰∏Ä‰∏ãÔºåÂ¶ÇÊûú @command{awk} Â±ÇÁöÑ‰ª£Á†ÅÈÄöËøáË∞ÉÁî® @code{magic()} ÂáΩÊï∞ÔºàÈÄöËøá C ÁöÑ @code{do_magic()} Êù•ÂÆûÁé∞ÔºâÊù•‰∏é‰Ω†ÁöÑÊâ©Â±ïËøõË°åÂÖ≥ËÅîÔºå‰∏ÄÊ¨°‰∏ÄÊù°ËÆ∞ÂΩïÊù•Â§ÑÁêÜÊï∞‰ª•Áôæ‰∏áËÆ°ÁöÑËÆ∞ÂΩï„ÄÇÂèòÈáè @code{MAGIC_VAR} ‰ºöÂú®ÊØè‰∏™ÂáΩÊï∞ÁöÑË∞ÉÁî®‰∏≠ÈÉΩÂú®Á¨¶Âè∑Ë°®‰∏≠ËøõË°åÊü•ÊâæÔºÅ

Á¨¶Âè∑Ë°®ÁöÑÊü•ÊâæÁúüÁöÑÊòØ‰∏™Á∫ØÁöÑË¥üÊãÖÔºåÂ¶ÇÊûúÂæóÂà∞‰∏Ä‰∏™Ë°®Á§∫Ëøô‰∏™ÂèòÈáèÁöÑ cookie Ë¶ÅÊõ¥È´òÊïàÔºåÂπ∂‰ΩøÁî®ÂÆÉÂú®ÂøÖË¶ÅÁöÑÊó∂ÂÄôËé∑Âèñ‰∏éÊõ¥Êñ∞ÂÆÉÁöÑÂÄº„ÄÇ 
@footnote{Áõ∏‰ø°Êàë‰ª¨ÔºåÂ∑ÆÂºÇÊòØÂèØÊµãÈáèÂπ∂‰∏îÁúüÂÆûÁöÑ„ÄÇ}

ÊâÄ‰ª•Ôºå‰ΩøÁî® cookie ÁöÑÊñπÂºèÂ¶Ç‰∏ã„ÄÇÈ¶ñÂÖàÔºåÂ∞Ü‰Ω†ÁöÑÂèòÈáèÈÄöËøá @code{sym_update()} Êù•ÂÆâË£ÖÂà∞ @command{gawk} ÁöÑÁ¨¶Âè∑Ë°®‰∏≠ÔºåÁÑ∂ÂêéÈÄöËøá @code{sym_lookup()} Ëé∑Âèñ‰∏Ä‰∏™ËØ•ÂèòÈáèÁöÑ CookieÔºö

@example
static awk_scalar_t magic_var_cookie;    /* cookie for MAGIC_VAR */

static void
my_extension_init()
@{
    awk_value_t value;

    /* install initial value */
    sym_update("MAGIC_VAR", make_number(42.0, & value));

    /* get the cookie */
    sym_lookup("MAGIC_VAR", AWK_SCALAR, & value);

    /* save the cookie */
    magic_var_cookie = value.scalar_cookie;
    @dots{}
@}
@end example

‰∏ã‰∏ÄÊ≠•Ôºå‰ΩøÁî®Ëøô@value{SECTION}‰∏≠ÁöÑÂáΩÊï∞Êù•Âπ∂ÈÄöËøá Cookie Êù•ËøîÂõû‰∏éÊõ¥Êñ∞ÂèòÈáèÁöÑÂÄº„ÄÇÊâÄ‰ª•Ôºå@code{do_magic()} Áé∞Âú®ÂèòÊàêÂ¶Ç‰∏ãÔºö

@example
/*  do_magic --- do something really great */

static awk_value_t *
do_magic(int nargs, awk_value_t *result)
@{
    awk_value_t value;

    if (   sym_lookup_scalar(magic_var_cookie, AWK_NUMBER, & value)
        && some_condition(value.num_value)) @{
            value.num_value += 42;
            sym_update_scalar(magic_var_cookie, & value);
    @}
    @dots{}

    return make_number(0.0, result);
@}
@end example

@quotation ÊèêÁ§∫
ÂâçÈù¢ÁöÑ‰ª£Á†ÅÁúÅÁï•‰∫ÜÈîôËØØÊ£ÄÊü•Ôºå‰∏∫‰∫ÜÊòØË°®Áé∞‰∏ªÈ¢ò„ÄÇ‰Ω†ÁöÑÊâ©Â±ï‰ª£Á†ÅÂ∫îËØ•Ë¶ÅÊõ¥Âä†ÂÅ•Â£ÆÔºåÂπ∂‰∏î‰ªîÁªÜÂú∞Ê£ÄÊü•‰ªé API ÂáΩÊï∞‰∏≠ËøîÂõûÁöÑÂÄº„ÄÇ
@end quotation

@node Cached values
@subsubsection ÂàõÂª∫Âπ∂‰ΩøÁî®ÁºìÂ≠òÂÄº

Êú¨@value{SECTION}‰∏≠ÁöÑÂÖ®Á®ãÂèØ‰ª•ËÆ©‰Ω†ÂàõÂª∫‰∏éÈáäÊîæÁºìÂ≠òÂÄº„ÄÇÂÉèÊ†áÈáè cookie ‰∏ÄÊ†∑ÔºåÁêÜËÆ∫‰∏äËÆ≤ÔºåÁºìÂ≠òÂÄºÊòØ‰∏çÈúÄË¶ÅÁöÑ„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® @ref{Constructor Functions} ‰∏≠ÁöÑÂáΩÊï∞ÂàõÂª∫Êï∞ÂÄº‰∏éÂ≠ó‰∏≤„ÄÇ‰Ω†ÁÑ∂ÂêéÂèØ‰ª•Â∞ÜËøô‰∫õÂÄºËµãÁªô‰ΩøÁî® @code{sym_update()} ÊàñËÄÖ @code{sym_update_scalar()} ÁöÑÂèòÈáè„ÄÇ

‰ΩÜÊòØÔºåÂ¶ÇÊûú‰Ω†ËÆ∞Âæó@emph{ÊâÄÊúâ}ÁöÑÂ≠ó‰∏≤ÂÄºÁöÑÂ≠òÂÇ®@emph{ÂøÖÈ°ª}Êù•Ëá™‰∫é @code{gawk_malloc()}Ôºå@code{gawk_calloc()} ÊàñËÄÖ @code{gawk_realloc()} Ëøô‰∫õÂáΩÊï∞Ëøô‰∏ÄÁÇπÔºå‰Ω†Â∞±ËÉΩÂ§üÁêÜËß£ÁºìÂ≠òÂÄºÁöÑÂá∫ÂèëÁÇπ„ÄÇÂ¶ÇÊûú‰Ω†Êúâ 20 ‰∏™ÂèòÈáèÔºåÂÆÉ‰ª¨ÈÉΩÊúâÁõ∏ÂêåÁöÑÂÄºÔºå‰Ω†ÂøÖÈ°ªÂàõÂª∫ 20 ‰∏™Áõ∏ÂêåÁöÑÂ≠ó‰∏≤Â§çÊú¨„ÄÇ @footnote{Êï∞ÂÄºÂÄºÈóÆÈ¢òÂ∞±Â∞ëÂæóÂ§öÔºåÂõ†‰∏∫Âè™ÈúÄË¶ÅÂ≠òÂÇ®‰∏Ä‰∏™ C ÁöÑ @code{double} Á±ªÂûã„ÄÇ}

ÂΩìÁÑ∂ÔºåÂ¶ÇÊûúÂèØËÉΩÔºå‰∏ÄÊó¶ÂàõÂª∫‰∏Ä‰∏™ÂÄºÔºåÂ∞±ÂèØ‰ª•ÂëäËØâ @command{gawk} ÂèØ‰ª•‰∏∫Â§ö‰∏™ÂèòÈáèÈáçÁî®Ëøô‰∏™ÂÄº„ÄÇËøôÊ≠£ÊòØÊú¨@value{SECTION}‰∏≠ÁöÑ‰æãÁ®ãÊâÄË¶ÅÂÅöÁöÑ‰∫ãÊÉÖ„ÄÇÂáΩÊï∞Â¶Ç‰∏ãÔºö

@table @code
@item awk_bool_t create_value(awk_value_t *value, awk_value_cookie_t *result);
ÂàõÂª∫‰∏Ä‰∏™ÁºìÂ≠òÁöÑÂ≠ó‰∏≤ÊàñËÄÖÊï∞ÂÄºÔºåÁî®‰∫éÂêéÈù¢ÁöÑÈ´òÊïàËµãÂÄº„ÄÇ‰ªÖÊîØÊåÅ @code{AWK_NUMBER} ‰∏é @code{AWK_STRING} Á±ªÂûãÁöÑÂÄº„ÄÇÂÖ∂‰ªñÁöÑÁ±ªÂûã‰ºöË¢´ÊãíÁªù„ÄÇ@code{AWK_UNDEFINED} Á±ªÂûã‰πüÂèØ‰ª•‰ΩøÁî®Ôºå‰ΩÜÊòØËøô‰πàÂÅö‰ºöÂØºËá¥ËæÉÂ∑ÆÁöÑÊÄßËÉΩ„ÄÇ

@item awk_bool_t release_value(awk_value_cookie_t vc);
ÈáäÊîæ‰∏é‰∏Ä‰∏™ÈÄöËøá @code{create_value()} Ëé∑ÂèñÁöÑÂÄº cookie ÂÖ≥ËÅîÁöÑÂÜÖÂ≠ò„ÄÇ
@end table

‰ΩøÁî®ÂÄº cookie ÁöÑÊñπÂºè‰∏é‰ΩøÁî®Ê†áÈáè cookie ÁöÑÊñπÂºèÊòØ‰∏ÄÊ†∑ÁöÑ„ÄÇÂú®Êâ©Â±ïÂàùÂßãÂåñ‰æãÁ®ã‰∏≠Ôºå‰Ω†ËøôÊ†∑Êù•ÂàõÂª∫ÂÄº cookieÔºö

@example
static awk_value_cookie_t answer_cookie;  /* static value cookie */

static void
my_extension_init()
@{
    awk_value_t value;
    char *long_string;
    size_t long_string_len;

    /* code from earlier */
    @dots{}
    /* @dots{} fill in long_string and long_string_len @dots{} */
    make_malloced_string(long_string, long_string_len, & value);
    create_value(& value, & answer_cookie);    /* create cookie */
    @dots{}
@}
@end example

ÂÄº‰∏ÄÊó¶ÂàõÂª∫Ôºå‰Ω†Â∞±ÂèØ‰ª•Áî®ÂÆÉ‰Ωú‰∏∫‰ªªÊÑèÂèòÈáèÁöÑÂÄºÔºö

@example
static awk_value_t *
do_magic(int nargs, awk_value_t *result)
@{
    awk_value_t new_value;

    @dots{}    /* as earlier */

    value.val_type = AWK_VALUE_COOKIE;
    value.value_cookie = answer_cookie;
    sym_update("VAR1", & value);
    sym_update("VAR2", & value);
    @dots{}
    sym_update("VAR100", & value);
    @dots{}
@}
@end example

@noindent
ÈÄöËøáËøôÊ†∑ÁöÑÂÄº cookies ÂèØ‰ª•ËäÇÁ∫¶Â§ßÈáèÁöÑÂ≠òÂÇ®Ôºå‰ªé @code{VAR1} Âà∞ @code{VAR100} ÈÉΩÂÖ±‰∫´‰∏ÄÊ†∑ÁöÑÂÄº„ÄÇ

‰Ω†ÂèØËÉΩ‰ºöÂ•áÊÄ™Ôºå‚ÄúËøôÊ†∑ÁöÑÂÖ±‰∫´‰∏ç‰ºöÊúâÈóÆÈ¢ò‰πàÔºüÂ¶ÇÊûú @command{awk} ‰ª£Á†ÅÁªô @code{VAR1} Ëµã‰∫Ü‰∏Ä‰∏™Êñ∞ÂÄºÔºåÊòØ‰∏çÊòØÊâÄÊúâÁöÑÂÖ∂‰ªñÂèòÈáèÈÉΩ‰ºöÊîπÂèòÔºü‚Äù

ËøôÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÈóÆÈ¢ò„ÄÇÁ≠îÊ°àÊòØ‰∏ç‰ºöÔºåËøô‰∏ç‰ºöÊòØ‰∏™ÈóÆÈ¢ò„ÄÇÂú®ÂÜÖÈÉ®Ôºå@command{gawk} ‰ΩøÁî®@dfn{ÂèÇËÄÉËÆ°Êï∞ÁöÑÂ≠ó‰∏≤}„ÄÇËøôÂ∞±ÊòØËØ¥ÔºåËÆ∏Â§öÁöÑÂèòÈáèÈÉΩÂèØ‰ª•‰ΩøÁî®ÂÖ±‰∫´ÁöÑÂ≠ó‰∏≤ÂÄºÔºå@command{gawk} ‰ºöË∑üË∏™ÂÆÉÁöÑ‰ΩøÁî®„ÄÇÂΩìÂèòÈáèÂÄºÊîπÂèòÊó∂Ôºå@command{gawk} ‰ªÖÊòØÁÆÄÂçïÂú∞ÈÄíÂáèÊóßÂÄºÁöÑÂèÇËÄÉËÆ°Êï∞ÔºåÁÑ∂ÂêéÊõ¥Êñ∞ÂèòÈáèËÆ©ÂÖ∂‰ΩøÁî®Êñ∞ÁöÑÂÄº„ÄÇ

ÊúÄÂêéÔºå‰Ωú‰∏∫Ê∏ÖÈô§Êìç‰ΩúÁöÑ‰∏ÄÈÉ®ÂàÜÔºàÊü•Áúã @pxref{Exit Callback Functions}ÔºâÔºå‰Ω†Â∫îËØ•ÈÄöËøá @code{release_value()} Êù•ÈáäÊîæ‰Ω†ÂàõÂª∫ÁöÑÁºìÂ≠òÂÄº„ÄÇ

@node Array Manipulation
@subsection Êï∞ÁªÑÊìç‰Ωú
@cindex array manipulation in extensions

Âú® @command{awk} ‰∏≠ÔºåÊúÄÈáçË¶ÅÁöÑÊï∞ÊçÆÁªìÊûÑ@footnote{Â•ΩÂêßÔºå‰πüÊòØÂîØ‰∏ÄÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ}
‰∏éÊï∞ÁªÑÔºàÊü•Áúã @pxref{Arrays}ÔºâÁõ∏ÂÖ≥„ÄÇÊâ©Â±ïÈúÄË¶ÅÊúâËÉΩÂäõÊìç‰Ωú @command{awk} ‰∏≠ÁöÑÊï∞ÁªÑ„ÄÇAPI ‰∏≠Êèê‰æõ‰∫ÜÂæàÂ§öÁöÑÊï∞ÊçÆÁªìÊûÑÊù•Â§ÑÁêÜÊï∞ÁªÑÔºå‰πüÊèê‰æõ‰∫ÜÂ§ÑÁêÜÂçï‰∏™ÂÖÉÁ¥†ÁöÑÂáΩÊï∞Ôºå‰ª•ÂèäÂ§ÑÁêÜÊï¥‰∏™Êï∞ÁªÑÁöÑÂáΩÊï∞„ÄÇËøôÂåÖÂê´‰∫ÜÊâÅÂπ≥ÂåñÊï∞ÁªÑÁöÑËÉΩÂäõÔºåËøôÊ†∑Â∞±ÂæàÂÆπÊòì‰ΩøÁî® C ‰ª£Á†ÅÊù•ÈÅçÂéÜÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÊï∞ÁªÑÊï∞ÊçÆÁªìÊûÑÂæàÂ•ΩÂú∞‰∏éÂÄºÁöÑÊï∞ÊçÆÁªìÊûÑËøõË°å‰∫ÜÊï¥ÂêàÔºå‰ΩøÂæóÂæàÂÆπÊòìÊù•ÂàõÂª∫ÁúüÊ≠£ÁöÑÂ§öÁª¥Êï∞ÁªÑÔºàÊü•Áúã @pxref{General Data Types}Ôºâ„ÄÇ

@menu
* Array Data Types::            Data types for working with arrays.
* Array Functions::             Functions for working with arrays.
* Flattening Arrays::           How to flatten arrays.
* Creating Arrays::             How to create and populate arrays.
@end menu

@node Array Data Types
@subsubsection Êï∞ÁªÑÊï∞ÊçÆÁ±ªÂûã

‰∏éÊï∞ÁªÑÁõ∏ÂÖ≥ÁöÑÊï∞ÊçÆÁ±ªÂûãÊúâÔºö

@table @code
@item typedef void *awk_array_t;
Â¶ÇÊûú‰Ω†ËØ∑Ê±Ç‰∏Ä‰∏™Êï∞ÁªÑÂèòÈáèÁöÑÂÄºÔºå‰Ω†ÂèØ‰ª•ÂèñÂæó‰∏Ä‰∏™ @code{awk_array_t} ÁöÑÂÄº„ÄÇËøô‰∏™ÂÄº
@footnote{ÂÆÉ‰πüÊòØ‰∏Ä‰∏™‚Äúcookie‚ÄùÔºå‰ΩÜÊòØ @command{gawk} ÂºÄÂèëÂæó‰∏çÊÉ≥ËøáÂ§öÂú∞‰ΩøÁî®Ëøô‰∏™ÊúØËØ≠„ÄÇ}
ÂØπ‰∫éÊâ©Â±ïÊù•ËØ¥ÊòØÈÄèÊòéÁöÑ„ÄÇ
ËøôÂîØ‰∏ÄÂú∞Ê†áËØÜÊï∞ÁªÑÔºå‰ΩÜÊòØÂè™ÂèØ‰ª•Â∞ÜÂÖ∂‰º†ÈÄíÁªô API ÂáΩÊï∞Êù•‰ΩøÁî®ÔºåÊàñËÄÖ‰ªé API ÂáΩÊï∞‰∏≠ËøîÂõû„ÄÇËøô‰∏™ÊñπÂºè‰∏é @code{<stdio.h>} ‰∏≠ÂáΩÊï∞‰ΩøÁî® @samp{FILE *} ÂÄºÁ±ª‰ºº„ÄÇ

@item typedef struct awk_element @{
@itemx @ @ @ @ /* convenience linked list pointer, not used by gawk */
@itemx @ @ @ @ struct awk_element *next;
@itemx @ @ @ @ enum @{
@itemx @ @ @ @ @ @ @ @ AWK_ELEMENT_DEFAULT = 0,@ @ /* set by gawk */
@itemx @ @ @ @ @ @ @ @ AWK_ELEMENT_DELETE = 1@ @ @ @ /* set by extension */
@itemx @ @ @ @ @} flags;
@itemx @ @ @ @ awk_value_t    index;
@itemx @ @ @ @ awk_value_t    value;
@itemx @} awk_element_t;
@code{awk_element_t} ÊòØ‰∏Ä‰∏™Âπ≥ÁöÑÊï∞ÁªÑÂÖÉÁ¥†„ÄÇ@command{awk} ‰ºöÂú® @code{awk_flat_array_t} Á±ªÂûã‰∏≠ÁîüÊàê‰∏Ä‰∏™Ê≠§Á±ªÂûãÁöÑÊï∞ÁªÑÔºàÊü•Áúã‰∏ã‰∏ÄÈ°πÁöÑËØ¥ÊòéÔºâ„ÄÇÂçï‰∏™ÁöÑÂÖÉÁ¥†ÂèØ‰ª•Ë¢´Ê†áÂøóÊàêÂà†Èô§„ÄÇÊñ∞ÁöÑÂÖÉÁ¥†ÂøÖÈ°ª‰∏Ä‰∏™‰∏™Âú∞Ê∑ªÂä†Ôºå‰∏ÄÊ¨°‰∏Ä‰∏™„ÄÇ‰∏∫‰∫ÜÂÆåÊàêËøô‰∏™Ê∑ªÂä†ÔºåË¶Å‰ΩøÁî®Âè¶Â§ñÁöÑ API„ÄÇÊï∞ÊçÆÁªìÊûÑ‰∏≠ÁöÑÂüü‰∏∫Ôºö

@c nested table
@table @code
@item struct awk_element *next;
ËøôÊòØ‰∏∫‰∫ÜÊñπ‰æøÊâ©Â±ïÁöÑÁºñÂÜôËÄÖÁöÑ‰∏Ä‰∏™ÊåáÈíà„ÄÇÂÆÉÂÖÅËÆ∏Êâ©Â±ïÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂÖÉÁ¥†ÁöÑÈìæË°®ÔºåËøôÊ†∑ÂèØ‰ª•Âú®ÈÅçÂéÜÂàóË°®Êó∂Êù•Âä†ÂÖ•Âà∞Êï∞ÁªÑ‰∏≠„ÄÇ

@item enum @{ @dots{} @} flags;
Âú®Êâ©Â±ï‰∏é @command{gawk} ‰πãÈó¥‰º†ÈÄí‰ø°ÊÅØÁöÑÊ†áÂøóÂÄº„ÄÇÂΩìÂâçÂè™Êúâ‰∏Ä‰∏™ @code{AWK_ELEMENT_DELETE}ÔºåÂ¶ÇÊûúËÆæÁΩÆËøô‰∏™Ê†áÂøóÔºå‰ºö‰ΩøÂæó @command{gawk} ÈáäÊîæÊâÅÂπ≥ÁöÑÊï∞ÁªÑÊó∂Ôºå‰ªéÂéüÂßãÁöÑÊï∞ÁªÑ‰∏≠Âà†Èô§Ëøô‰∏™ÂÖÉÁ¥†„ÄÇ

@item index
@itemx value
ÂÖÉÁ¥†ÁöÑÁ¥¢Âºï‰∏éÂÄº„ÄÇ@emph{ÊâÄÊúâ}Ë¢´ @code{index} ‰∏é @code{value} ÊåáÂêëÁöÑÂÜÖÂ≠òÈÉΩÂ±û‰∫é @command{gawk}„ÄÇ
@end table

@item typedef struct awk_flat_array @{
@itemx @ @ @ @ awk_const void *awk_const opaque1;@ @ @ @ /* for use by gawk */
@itemx @ @ @ @ awk_const void *awk_const opaque2;@ @ @ @ /* for use by gawk */
@itemx @ @ @ @ awk_const size_t count;@ @ @ @ @ /* how many elements */
@itemx @ @ @ @ awk_element_t elements[1];@ @ /* will be extended */
@itemx @} awk_flat_array_t;
ËøôÊòØ‰∏Ä‰∏™Âπ≥Èù¢Êï∞ÁªÑ„ÄÇÂΩìÊâ©Â±ï‰ªé @command{gawk} ‰∏≠ÂèñÂæóÂÖ∂‰∏≠‰πã‰∏ÄÊó∂ÔºåÂÖÉÁ¥†Êï∞ÁªÑ @code{elements} ÁöÑÂÆûÈôÖÂ§ßÂ∞èÂ∞±ÊòØ @code{count}„ÄÇ@code{opaque1} ‰∏é @code{opaque2} ÊåáÈíàÁî± @command{gawk} ‰ΩøÁî®ÔºåÊâÄ‰ª•ÔºåÂÆÉ‰ª¨Ë¢´Ê†áÂøóÊàê @code{awk_const}ÔºåËøôÊ†∑Êâ©Â±ïÂ∞±‰∏çÂèØ‰ª•‰øÆÊîπÂÆÉ‰ª¨„ÄÇ
@end table

@node Array Functions
@subsubsection Êï∞ÁªÑÂáΩÊï∞

‰∏ãÈù¢ÁöÑÂáΩÊï∞‰∏éÂçï‰∏™ÁöÑÂÖÉÁ¥†Áõ∏ÂÖ≥Ôºö

@table @code
@item awk_bool_t get_element_count(awk_array_t a_cookie, size_t *count);
‰∏∫Áî± @code{a_cookie} Ë°®Á§∫ÁöÑÊï∞ÁªÑÔºåÊîæÂÖ•ÂÖ∂ÂåÖÂê´ÁöÑ @code{*count} ‰∏™ÂÖÉÁ¥†„ÄÇÂ≠êÊï∞ÁªÑÁî±‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂÖÉÁ¥†Ë°®Á§∫„ÄÇÂ¶ÇÊûúÊúâÈîôËØØÊó∂ÔºåËøîÂõû false„ÄÇ

@item awk_bool_t get_array_element(awk_array_t a_cookie,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ const awk_value_t *const index,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_valtype_t wanted,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_value_t *result);
‰ªé @code{a_cookie} Ë°®Á§∫ÁöÑÊï∞ÁªÑ‰∏≠ÔºåËøîÂõûÂÖÉÁ¥†‰∏ãÊ†á @code{index} ÁöÑÂÄºÂà∞ @code{*result} ‰∏≠„ÄÇ@code{wanted} ÊåáÂÆö‰∫Ü‰Ω†Â∏åÊúõËøîÂõûÁöÑÂÄºÁ±ªÂûã„ÄÇÂ¶ÇÊûú @code{wanted} ‰∏ç‰∏éÂÆûÈôÖÁöÑÁ±ªÂûãÂåπÈÖçÔºåÊàñËÄÖ @code{index} Ê≤°ÊúâÂú®Êï∞ÁªÑ‰∏≠ÔºåÂàôËøîÂõû false„ÄÇÔºàÊü•Áúã @pxref{table-value-types-returned}Ôºâ

@code{index} ÁöÑÂÄºÂèØ‰ª•ÊòØÊï∞ÂÄºÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ‰ºöÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫Â≠ó‰∏≤„ÄÇ‰∏ç‰ΩøÁî®Êï¥Êï∞ÂÄº‰πüÊòØÂèØ‰ª•ÁöÑÔºå‰ΩÜÊòØÈúÄË¶Å‰Ω†‰∫ÜËß£ËøôÊ†∑ÁöÑÂÄºÂ¶Ç‰ΩïËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÔºàÊü•Áúã @pxref{Conversion}ÔºâÔºåÊâÄ‰ª•Ôºå‰ΩøÁî®Êï¥Êï∞ÂÄºÊòØÊúÄÂÆâÂÖ®ÁöÑ„ÄÇ

‰∏é‰ªéÊâ©Â±ï‰∏≠‰º†ÈÄíÂà∞ @command{gawk} ‰∏≠ÁöÑ@emph{ÊâÄÊúâ}ÁöÑÂ≠ó‰∏≤‰∏ÄÊ†∑Ôºå@code{index} ÁöÑÂ≠ó‰∏≤ÂÄºÂøÖÈ°ªÊù•Ëá™‰∫é @code{gawk_malloc()}Ôºå@code{gawk_calloc()} ÊàñËÄÖ @code{gawk_realloc()}ÔºåÂπ∂Áî± @command{gawk} Êù•ÈáäÊîæÂÜÖÂ≠ò„ÄÇ

@item awk_bool_t set_array_element(awk_array_t a_cookie,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ const@ awk_value_t *const index,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ const@ awk_value_t *const value);
Âú®Áî± @code{a_cookie} Ë°®Á§∫ÁöÑÊï∞ÁªÑ‰∏≠ÔºåÂàõÂª∫ÊàñËÄÖ‰øÆÊîπ‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåËøô‰∏™ÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÁî± @code{index} ÁªôÂá∫„ÄÇ@code{ARGV} ‰∏é @code{ENVIRON} Êï∞ÁªÑ‰∏çÂèØ‰ª•Ë¢´ÊîπÂèòÔºå‰ΩÜÊòØ @code{PROCINFO} Êï∞ÁªÑÂàôÂèØ‰ª•„ÄÇ

@item awk_bool_t set_array_element_by_elem(awk_array_t a_cookie,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_element_t element);
‰∏é @code{set_array_element()} Áõ∏‰ººÔºå‰ΩÜÊòØÊòØ‰ªéÂÖÉÁ¥† @code{element} ‰∏≠ÂèñÂæóÁ¥¢Âºï @code{index} ‰∏éÂÄº @code{value}„ÄÇËøôÊòØ‰∏Ä‰∏™‰æøÂà©ÂÆè„ÄÇ

@item awk_bool_t del_array_element(awk_array_t a_cookie,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ const awk_value_t* const index);
Âà†Èô§Áî± @code{a_cookie} Ë°®Á§∫ÁöÑÊï∞ÁªÑ‰∏≠ÊåáÂÆöÁ¥¢ÂºïÁöÑÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúÂÖÉÁ¥†Ë¢´Âà†Èô§ÔºåÂàôËøîÂõû true„ÄÇÂê¶ÂàôÔºåÂ¶ÇÊûúÂÖÉÁ¥†‰∏çÂ≠òÂú®Êï∞ÁªÑ‰∏≠ÔºåÂàôËøîÂõû false„ÄÇ
@end table

‰∏ãÈù¢ÁöÑÂáΩÊï∞‰∏éÊï¥‰∏™Êï∞ÁªÑÊúâÂÖ≥Ôºö

@table @code
@item awk_array_t create_array(void);
ÂàõÂª∫‰∏Ä‰∏™ÂèØ‰ª•Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ„ÄÇÊü•Áúã @xref{Creating Arrays}Ôºå‰∏≠ÂØπ‰∫éÂàõÂª∫Êï∞ÁªÑÂπ∂Ê∑ªÂä†ÂÖÉÁ¥†ÁöÑËÆ®ËÆ∫„ÄÇ

@item awk_bool_t clear_array(awk_array_t a_cookie);
Ê∏ÖÈô§Áî± @code{a_cookie} Ë°®Á§∫ÁöÑÊï∞ÁªÑ„ÄÇÂ¶ÇÊûúÊúâÈóÆÈ¢òËøîÂõû falseÔºåÂê¶ÂàôËøîÂõû true„ÄÇÊï∞ÁªÑËøòÊòØÊï∞ÁªÑÔºå‰ΩÜÊòØË∞ÉÁî®Ëøô‰∏™ÂáΩÊï∞ÂêéÔºåÂÆÉÂ∞±Ê≤°ÊúâÂÖÉÁ¥†‰∫Ü„ÄÇËøô‰∏™‰∏é @code{delete} ËØ≠Âè•Á≠âÂêåÔºàÊü•Áúã @pxref{Delete}Ôºâ„ÄÇ

@item awk_bool_t flatten_array(awk_array_t a_cookie, awk_flat_array_t **data);
‰∏∫Áî± @code{a_cookie} Ë°®Á§∫ÁöÑÊï∞ÁªÑÔºåÂàõÂª∫‰∏Ä‰∏™ @code{awk_flat_array_t} ÁöÑÁªìÊûÑÂπ∂ËøõË°åÂ°´ÂÖÖ„ÄÇÂ∞ÜÈÄöËøá @code{data} ‰º†ÈÄíÁöÑÊåáÈíàÁöÑÂÄºËÆæÁΩÆ‰∏∫Ëøô‰∏™ÁªìÊûÑÁöÑÂú∞ÂùÄ„ÄÇÂ¶ÇÊûúÊàêÂäüÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇ
@ifset FOR_PRINT
‰∏ã‰∏Ä‰∏™@value{SECTION}
@end ifset
@ifclear FOR_PRINT
Êü•Áúã @xref{Flattening Arrays}Ôºå
@end ifclear
ËÆ®ËÆ∫Â¶Ç‰ΩïÊù•ÊâÅÂπ≥ÂåñÊï∞ÁªÑÂπ∂Â§ÑÁêÜÂÆÉ„ÄÇ

@item awk_bool_t release_flattened_array(awk_array_t a_cookie,
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ awk_flat_array_t *data);
ÂΩìÂÆåÊàê‰∫ÜÊï∞ÁªÑÁöÑÊâÅÂπ≥ÂåñÔºåÈáäÊîæ‰ΩøÁî®Ëøô‰∏™ÂáΩÊï∞ÁöÑÂ≠òÂÇ®„ÄÇ‰Ω†ÂøÖÈ°ªÂ∞ÜÊúÄÂàùÁöÑÊï∞ÁªÑ cookie ‰∏éÂàõÂª∫ÁöÑ @code{awk_flat_array_t} Êï∞ÁªÑÁªìÊûÑÁöÑÂú∞ÂùÄÈÉΩ‰º†ÈÄíËøõÂéª„ÄÇÂ¶ÇÊûúÊàêÂäüËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇ
@end table

@node Flattening Arrays
@subsubsection ÈÅçÂéÜÊï∞ÁªÑÁöÑÊâÄÊúâÂÖÉÁ¥†

@dfn{ÊâÅÂπ≥Âåñ}Êï∞ÁªÑÂ∞±ÊòØÂàõÂª∫‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÊù•Ë°®Á§∫Êï¥‰∏™Êï∞ÁªÑÔºåÂÖ∂È£éÊ†º‰ΩøÂæóÂæàÂÆπÊòì‰ΩøÁî® C ‰ª£Á†ÅÊù•ÈÅçÂéÜÊï¥‰∏™Êï∞ÁªÑ„ÄÇÂú® @file{extension/testext.c} ‰∏≠ÁöÑ‰∏Ä‰∫õ‰ª£Á†ÅÂ∞±ÊòØÊù•ÂÅöËøô‰∫õ‰∫ãÊÉÖÔºå‰πüÊòØ‰∏Ä‰∏™ÂæàÂ•ΩÁöÑ‰æãÂ≠êÊù•ËØ¥ÊòéÂ¶Ç‰ΩïÊù•‰ΩøÁî® API„ÄÇ

Êàë‰ª¨‰∏ÄÊ≠•Ê≠•Âú∞Êù•ËøáËøôÈáåÈù¢ÁöÑ‰ª£Á†Å„ÄÇÈ¶ñÂÖà @command{gawk} ËÑöÊú¨Êù•È©±Âä®ÊµãËØïÊâ©Â±ïÔºö

@example
@@load "testext"
BEGIN @{
    n = split("blacky rusty sophie raincloud lucky", pets)
    printf("pets has %d elements\n", length(pets))
    ret = dump_array_and_delete("pets", "3")
    printf("dump_array_and_delete(pets) returned %d\n", ret)
    if ("3" in pets)
        printf("dump_array_and_delete() did NOT remove index \"3\"!\n")
    else
        printf("dump_array_and_delete() did remove index \"3\"!\n")
    print ""
@}
@end example

@noindent
Ëøô‰∏™‰ª£Á†Å‰ΩøÁî® @code{split()} ÂáΩÊï∞ÂàõÂª∫‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÔºàÊü•Áúã @ref{String Functions}ÔºâÁÑ∂ÂêéË∞ÉÁî® @code{dump_array_and_delete()}„ÄÇËøô‰∏™ÂáΩÊï∞Áî®‰∫éÊü•ÊâæÊï∞ÁªÑÔºåÂÖ∂Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÊòØÊï∞ÁªÑÂêçÔºåËÄåÂà†Èô§ÁöÑÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÈÄöËøáÁ¨¨‰∫å‰∏™ÂèÇÊï∞Êù•‰º†ÈÄí„ÄÇ@command{awk} ‰ª£Á†ÅÁÑ∂ÂêéÊâìÂç∞ËøîÂõûÁöÑÂÄºÂπ∂Ê£ÄÊü•ÂÖÉÁ¥†ÊòØÂê¶ÁúüÁöÑË¢´Âà†Èô§‰∫Ü„ÄÇ‰∏ãÈù¢ÊòØ @code{dump_array_and_delete()} ÂáΩÊï∞ÁöÑC ‰ª£Á†ÅÂÆûÁé∞„ÄÇ‰∏∫‰∫ÜË°®Áé∞‰∏äÁöÑÂéüÂõ†ÂÅö‰∫Ü‰∏Ä‰∫õ‰øÆÊîπ„ÄÇ

Á¨¨‰∏ÄÈÉ®ÂàÜÊòØÂ£∞ÊòéÂèòÈáèÔºåËÆæÁΩÆÈªòËÆ§ÁöÑËøîÂõûÂÄºÂà∞ @code{result} ‰∏≠ÔºåÂπ∂Ê£ÄÊü•ÂáΩÊï∞ÁöÑË∞ÉÁî®ÊòØÈÄöËøáÊ≠£Á°ÆÁöÑÂèÇÊï∞‰∏™Êù•Ë∞ÉÁî®ÁöÑÔºö

@example
static awk_value_t *
dump_array_and_delete(int nargs, awk_value_t *result)
@{
    awk_value_t value, value2, value3;
    awk_flat_array_t *flat_array;
    size_t count;
    char *name;
    int i;

    assert(result != NULL);
    make_number(0.0, result);

    if (nargs != 2) @{
        printf("dump_array_and_delete: nargs not right "
               "(%d should be 2)\n", nargs);
        goto out;
    @}
@end example

ÂáΩÊï∞ÁÑ∂Âêé‰∏ÄÊ≠•Ê≠•Âú∞ÊâßË°åÔºåÂ¶Ç‰∏ã„ÄÇÈ¶ñÂÖàËøîÂõûÊï∞ÁªÑÁöÑÂêçÂ≠óÔºåÂÖ∂‰Ωú‰∏∫ÂáΩÊï∞ÁöÑÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞Âàù‰º†ÈÄí„ÄÇÁÑ∂ÂêéÊòØÊï∞ÁªÑÊú¨Ë∫´„ÄÇÂ¶ÇÊûúÊúâ‰∏Ä‰∏™Êìç‰ΩúÂ§±Ë¥•ÔºåÂàôÊâìÂç∞ÈîôËØØ‰ø°ÊÅØÂπ∂ËøîÂõûÔºö

@example
    /* get argument named array as flat array and print it */
    if (get_argument(0, AWK_STRING, & value)) @{
        name = value.str_value.str;
        if (sym_lookup(name, AWK_ARRAY, & value2))
            printf("dump_array_and_delete: sym_lookup of %s passed\n",
                   name);
        else @{
            printf("dump_array_and_delete: sym_lookup of %s failed\n",
                   name);
            goto out;
        @}
    @} else @{
        printf("dump_array_and_delete: get_argument(0) failed\n");
        goto out;
    @}
@end example

‰∏∫‰∫ÜÊµãËØïÂπ∂Á°Æ‰øù C ‰ª£Á†ÅÁúã‰ª£ÁöÑÂÖÉÁ¥†‰∏™Êï∞‰∏é @command{awk} ‰ª£Á†ÅÁúãÂà∞ÁöÑÂÖÉÁ¥†‰∏™Êï∞ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÁ¨¨‰∫åÊ≠•ÊòØÊù•Ëé∑ÂèñÊï∞ÁªÑÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÁÑ∂ÂêéÊâìÂç∞ÂÆÉÔºö

@example
    if (! get_element_count(value2.array_cookie, & count)) @{
        printf("dump_array_and_delete: get_element_count failed\n");
        goto out;
    @}

    printf("dump_array_and_delete: incoming size is %lu\n",
           (unsigned long) count);
@end example

Á¨¨‰∏âÊ≠•ÊòØÊâßË°åÂÆûÈôÖÁöÑÊï∞ÁªÑÊâÅÂπ≥ÂåñÔºåÁÑ∂ÂêéÂÜçÊ¨°Ê£ÄÊü• @code{awk_flat_array_t} ‰∏≠ÁöÑÊï∞ÈáèÊòØ‰∏éÂàöÊâçËøîÂõûÁöÑÊï∞ÈáèÊòØ‰∏ÄÊ†∑ÁöÑÔºö

@example
    if (! flatten_array(value2.array_cookie, & flat_array)) @{
        printf("dump_array_and_delete: could not flatten array\n");
        goto out;
    @}

    if (flat_array->count != count) @{
        printf("dump_array_and_delete: flat_array->count (%lu)"
               " != count (%lu)\n",
                (unsigned long) flat_array->count,
                (unsigned long) count);
        goto out;
    @}
@end example

Á¨¨ÂõõÊ≠•ÊòØËøîÂõûË¶ÅË¢´Âà†Èô§ÁöÑÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÔºåËøô‰∏™Á¥¢ÂºïÊòØÈÄöËøáÁ¨¨‰∫å‰∏™ÂèÇÊï∞Êù•‰º†ÈÄíÁöÑ„ÄÇË¶ÅËÆ∞‰Ωè‰º†ÈÄíÂà∞ @code{get_argument()} ÂáΩÊï∞‰∏≠ÁöÑÂèÇÊï∞ÁºñÂè∑ÊòØ‰ªé 0 ÂºÄÂßãÁöÑÔºåÂõ†Ê≠§Á¨¨‰∫å‰∏™ÂèÇÊï∞Ë¢´ÁºñÂè∑‰∏∫ 1 Ôºö

@example
    if (! get_argument(1, AWK_STRING, & value3)) @{
        printf("dump_array_and_delete: get_argument(1) failed\n");
        goto out;
    @}
@end example

Á¨¨‰∫îÊ≠•ÊòØÊâßË°å‚ÄúÁúüÊ≠£ÁöÑ‚ÄùÊìç‰Ωú„ÄÇÂáΩÊï∞Âæ™ÁéØÊï∞ÁªÑ‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÊâìÂç∞ÂÖ∂Á¥¢Âºï‰∏éÂÖ∂ÂÖÉÁ¥†ÂÄº„ÄÇÂè¶Â§ñÔºåÂΩìÊâæÂà∞Ë¶ÅÂà†Èô§ÂÖÉÁ¥†ÁöÑÁ¥¢ÂºïÊó∂ÔºåÂáΩÊï∞ËÆæÁΩÆ @code{AWK_ELEMENT_DELETE} ‰ΩçÂà∞ÂÖÉÁ¥†ÁöÑ @code{flags} Âüü‰∏≠„ÄÇÂΩìÊï∞ÁªÑË¢´ÈáäÊîæÊó∂Ôºå@command{gawk} ‰ºöÈÅçÂéÜÊâÅÂπ≥ÂåñÂêéÁöÑÊï∞ÁªÑÔºåÁÑ∂ÂêéÂà†Èô§ÈÇ£‰∫õË¢´ËÆæÁΩÆ‰∫ÜËØ•‰ΩçÁöÑÂÖÉÁ¥†Ôºö

@example
    for (i = 0; i < flat_array->count; i++) @{
        printf("\t%s[\"%.*s\"] = %s\n",
            name,
            (int) flat_array->elements[i].index.str_value.len,
            flat_array->elements[i].index.str_value.str,
            valrep2str(& flat_array->elements[i].value));

        if (strcmp(value3.str_value.str,
                   flat_array->elements[i].index.str_value.str) == 0) @{
            flat_array->elements[i].flags |= AWK_ELEMENT_DELETE;
            printf("dump_array_and_delete: marking element \"%s\" "
                   "for deletion\n",
                flat_array->elements[i].index.str_value.str);
        @}
    @}
@end example

Á¨¨ÂÖ≠Ê≠•ÊòØÈáäÊîæÊâÅÂπ≥ÂåñÂêéÁöÑÊï∞ÁªÑ„ÄÇËøô‰ºöÂëäËØâ @command{gawk} Êâ©Â±ïÂ∑≤Áªè‰∏çÂÜç‰ΩøÁî®Êï∞ÁªÑÔºåÂÆÉÂèØ‰ª•Âà†Èô§ÊâÄÊúâÂ∑≤ÁªèË¢´Ê†áÂøóÁöÑÂÖÉÁ¥†„ÄÇ@command{gawk} ‰πü‰ºöÈáäÊîæË¢´ÂàÜÈÖçÁöÑÂ≠òÂÇ®ÔºåÂõ†Ê≠§ÔºåÂú®Ë∞ÉÁî® @code{release_flattened_array()} ÂáΩÊï∞ÂêéÔºå‰Ω†‰∏çË¶ÅÂÜç‰ΩøÁî®ÈáåÈù¢ÁöÑÊåáÈíàÔºàÂú®Ëøô‰∏™‰ª£Á†Å‰∏≠‰∏∫ @code{flat_array}ÔºâÔºö

@example
    if (! release_flattened_array(value2.array_cookie, flat_array)) @{
        printf("dump_array_and_delete: could not release flattened array\n");
        goto out;
    @}
@end example

ÊúÄÂêéÔºåÁî±‰∫é‰∏ÄÂàá‰∫ãÊÉÖÈÉΩÊâßË°åËâØÂ•ΩÔºåÂáΩÊï∞Â∞ÜËøîÂõûÂÄºËÆæÁΩÆ‰∏∫ÊàêÂäüÔºåÁÑ∂ÂêéËøîÂõûÔºö

@example
    make_number(1.0, result);
out:
    return result;
@}
@end example

ËøôÈáåÊòØËøêË°åÊµãËØïÈÉ®ÂàÜÁöÑËæìÂá∫Ôºö

@example
pets has 5 elements
dump_array_and_delete: sym_lookup of pets passed
dump_array_and_delete: incoming size is 5
        pets["1"] = "blacky"
        pets["2"] = "rusty"
        pets["3"] = "sophie"
dump_array_and_delete: marking element "3" for deletion
        pets["4"] = "raincloud"
        pets["5"] = "lucky"
dump_array_and_delete(pets) returned 1
dump_array_and_delete() did remove index "3"!
@end example

@node Creating Arrays
@subsubsection Â¶Ç‰ΩïÁîüÊàê‰∏éÂèëÂ∏ÉÊï∞ÁªÑ

Èô§‰∫ÜÈÄöËøá @command{awk} ‰ª£Á†ÅÊù•Â§ÑÁêÜÊï∞ÁªÑÂ§ñÔºå‰Ω†‰πüÂèØ‰ª•ÂàõÂª∫Êï∞ÁªÑÁÑ∂ÂêéÂèëÂ∏ÉÂÆÉ‰ª¨ÔºåÁÑ∂Âêé @command{awk} ‰ª£Á†Å‰πüÂèØ‰ª•ËÆøÈóÆÂπ∂Â§ÑÁêÜÂÆÉ‰ª¨„ÄÇ

‰ªéÊâ©Â±ï‰∏≠ÂàõÂª∫Êï∞ÁªÑÊúâ‰∏§‰∏™ÈáçÁÇπÔºö

@itemize @value{BULLET}
@item
‰Ω†ÂøÖÈ°ªÂ∞ÜÊñ∞ÁöÑÊï∞ÁªÑÂàõÂª∫ÂêéÁ´ãÂç≥ÂÆâË£ÖÂà∞ @command{gawk} ÁöÑÁ¨¶Âè∑Ë°®‰∏≠„ÄÇËøô‰πàÂÅö‰∫ÜÂêéÔºåÂ∞±ÂèØ‰ª•ÂèëÂ∏É‰Ω†ÁöÑÊï∞ÁªÑ„ÄÇ

@ignore
Strictly speaking, this is required only
for arrays that will have subarrays as elements; however it is
a good idea to always do this.  This restriction may be relaxed
in a subsequent revision of the API.
@end ignore

Áõ∏‰ººÁöÑÔºåÂ¶ÇÊûúÂ∞ÜÊüê‰∏™Êï∞ÁªÑÂÆâË£ÖÊàêÂ∑≤ÁªèÂ≠òÂú®ÁöÑÊï∞ÁªÑÁöÑÂ≠êÊï∞ÁªÑÔºå‰Ω†ÂøÖÈ°ªÂú®ÂêëÂÆÉÊ∑ªÂä†‰ªª‰ΩïÂÖÉÁ¥†‰πãÂâçÂ∞ÜÂÖ∂Âä†Âà∞Áà∂Êï∞ÁªÑ‰∏≠„ÄÇ

Âõ†Ê≠§ÔºåÂàõÂª∫Êï∞ÁªÑÁöÑÊ≠£Á°ÆÊñπÂºèÊòØ‚ÄúËá™‰∏äËÄå‰∏ã‚Äù„ÄÇÂàõÂª∫‰∏Ä‰∏™Êï∞ÁªÑÔºåÁÑ∂ÂêéÁ´ãÂç≥‰ΩøÁî® @code{sym_update()} Â∞ÜÂõûÊ∑ªÂä†Âà∞Á¨¶Âè∑Ë°®‰∏≠ÔºåÊàñËÄÖ‰ΩøÁî® @code{set_array_element()} Â∞ÜÂÖ∂Ê∑ªÂä†‰∏∫‰∏Ä‰∏™Â∑≤ÁªèÂ≠òÂú®ÁöÑÊï∞ÁªÑÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÊàë‰ª¨ÂêéÈù¢‰ºöÊúâ‰æãÂ≠êËØ¥Êòé„ÄÇ

@item
Áî±‰∫é @command{gawk} ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÔºåÂú®‰ΩøÁî®‰∫Ü @code{sym_update()} ÂÆâË£Ö‰∫Ü‰∏Ä‰∏™Êï∞ÁªÑÂà∞ @command{gawk} ‰∏≠ÂêéÔºåÂú®‰ΩøÁî®ÂÆÉÂÅö‰ªª‰Ωï‰∫ãÊÉÖ‰πãÂâçÔºå‰Ω†ÂøÖÈ°ª‰ΩøÁî®‰º†Áªô @code{sym_update()} Êé•Âè£‰∏≠ÁöÑÂÄºÊù•Ëé∑Âèñ‰∏Ä‰∏™Êï∞ÁªÑÁöÑ cookieÔºö

@example
awk_value_t val;
awk_array_t new_array;

new_array = create_array();
val.val_type = AWK_ARRAY;
val.array_cookie = new_array;

/* install array in the symbol table */
sym_update("array", & val);

new_array = val.array_cookie;    /* YOU MUST DO THIS */
@end example

Â¶ÇÊûúÂÆâË£ÖÁöÑÊòØ‰∏Ä‰∏™Â≠êÊï∞ÁªÑÔºå‰Ω†ÂøÖÈ°ªÂú®Ë∞ÉÁî® @code{set_element()} ‰πãÂêé‰ΩøÁî®Êï∞ÁªÑÁöÑÂÄºËøîÂõû‰∏Ä‰∏™Êï∞ÁªÑ cookie„ÄÇ
@end itemize

‰∏ãÈù¢ÁöÑ C ‰ª£Á†ÅÊòØ‰∏Ä‰∏™ÁÆÄÂçïÊµãËØïÊâ©Â±ïÔºåÁî®‰∏§‰∏™Â∏∏ËßÑÁöÑÂÖÉÁ¥†Êù•ÂàõÂª∫‰∏Ä‰∏™Êï∞ÁªÑÔºåÂπ∂Â∏¶Êúâ‰∏Ä‰∏™Â≠êÊï∞ÁªÑ„ÄÇÂºÄÂßãÁöÑ @code{#include} ÊåáÁ§∫Á¨¶‰ª•ÂèäÊ†∑ÊùøÂºèÁöÑÂèòÈáèÂ£∞ÊòéÔºàÊü•Áúã @pxref{Extension API Boilerplate}Ôºâ‰∏∫‰∫ÜÁÆÄÂåñËÄåÁúÅÁï•‰∫Ü„ÄÇÁ¨¨‰∏ÄÊ≠•ÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÁªÑÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂ÂÆâË£ÖÂà∞Á¨¶Âè∑Ë°®‰∏≠Ôºö

@example
@ignore
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <stdio.h>
#include <assert.h>
#include <errno.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include <sys/types.h>
#include <sys/stat.h>

#include "gawkapi.h"

static const gawk_api_t *api;   /* for convenience macros to work */
static awk_ext_id_t *ext_id;
static const char *ext_version = "testarray extension: version 1.0";

int plugin_is_GPL_compatible;

@end ignore
/* create_new_array --- create a named array */

static void
create_new_array()
@{
    awk_array_t a_cookie;
    awk_array_t subarray;
    awk_value_t index, value;

    a_cookie = create_array();
    value.val_type = AWK_ARRAY;
    value.array_cookie = a_cookie;

    if (! sym_update("new_array", & value))
        printf("create_new_array: sym_update(\"new_array\") failed!\n");
    a_cookie = value.array_cookie;
@end example

@noindent
Ê≥®ÊÑè @code{a_cookies} ÊòØÂ¶Ç‰Ωï‰ΩøÁî® @code{value} ÁªìÊûÑ‰Ωì‰∏≠ÁöÑ @code{array_cookie} ÁöÑÂüüÊù•ËøõË°åÈáçÁΩÆÁöÑ„ÄÇ

Á¨¨‰∫åÊ≠•ÊòØÂÆâË£Ö‰∏Ä‰∏™Â∏∏ËßÑÁöÑÂà∞ @code{new_array} ‰∏≠Ôºö

@example
    (void) make_const_string("hello", 5, & index);
    (void) make_const_string("world", 5, & value);
    if (! set_array_element(a_cookie, & index, & value)) @{
        printf("fill_in_array: set_array_element failed\n");
        return;
    @}

    (void) make_const_string("answer", 6, & index);
    (void) make_number(42.0, & value);
    if (! set_array_element(a_cookie, & index, & value)) @{
        printf("fill_in_array: set_array_element failed\n");
        return;
    @}
@end example

Á¨¨‰∏âÊ≠•ÊòØÂàõÂª∫‰∫Ü‰∏ÄÂ≠êÊï∞ÁªÑÔºåÁÑ∂ÂêéÂÆâË£ÖÂÆÉÔºö

@example
    (void) make_const_string("subarray", 8, & index);
    subarray = create_array();
    value.val_type = AWK_ARRAY;
    value.array_cookie = subarray;
    if (! set_array_element(a_cookie, & index, & value)) @{
        printf("fill_in_array: set_array_element failed\n");
        return;
    @}
    subarray = value.array_cookie;
@end example

ÊúÄÂêé‰∏ÄÊ≠•ÊòØÂèëÂ∏ÉÂ≠êÊï∞ÁªÑ‰ª•ÂèäÂÆÉÁöÑÂÖÉÁ¥†Ôºö

@example
    (void) make_const_string("foo", 3, & index);
    (void) make_const_string("bar", 3, & value);
    if (! set_array_element(subarray, & index, & value)) @{
        printf("fill_in_array: set_array_element failed\n");
        return;
    @}
@}
@ignore
static awk_ext_func_t func_table[] = @{
    @{ NULL, NULL, 0 @}
@};

/* init_testarray --- additional initialization function */

static awk_bool_t init_testarray(void)
@{
    create_new_array();

    return awk_true;
@}

static awk_bool_t (*init_func)(void) = init_testarray;

dl_load_func(func_table, testarray, "")
@end ignore
@end example

Ëøô‰∏™‰∏Ä‰∏™Ë£ÖËΩΩÊâ©Â±ïÁöÑËÑöÊú¨ÔºåÁÑ∂Âêé dump Êï∞ÁªÑÔºö

@example
@@load "subarray"

function dumparray(name, array,     i)
@{
    for (i in array)
        if (isarray(array[i]))
            dumparray(name "[\"" i "\"]", array[i])
        else
            printf("%s[\"%s\"] = %s\n", name, i, array[i])
@}

BEGIN @{
    dumparray("new_array", new_array);
@}
@end example

‰∏ãÈù¢ÊòØËøêË°åËÑöÊú¨ÁöÑÁªìÊûúÔºö

@example
$ @kbd{AWKLIBPATH=$PWD ./gawk -f subarray.awk}
@print{} new_array["subarray"]["foo"] = bar
@print{} new_array["hello"] = world
@print{} new_array["answer"] = 42
@end example

@noindent
ÔºàÊü•Áúã @xref{Finding Extensions}ÔºåÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑÂÖ≥‰∫éÂèòÈáè @env{AWKLIBPATH} ÁöÑ‰ø°ÊÅØÔºâ„ÄÇ

@node Extension API Variables
@subsection API ÂèòÈáè

API Êèê‰æõ‰∫Ü‰∏§ÁßçÁ±ªÂûãÁöÑÂèòÈáè„ÄÇÁ¨¨‰∏ÄÁßçÊèê‰æõ API ÁâàÊú¨‰ø°ÊÅØÔºàÂåÖÊã¨Êâ©Â±ïÊòØÂ¶Ç‰ΩïËøõË°åÁºñËØë‰ª•Âèä @command{gawk} Â¶Ç‰ΩïËøõË°åÁºñËØëÁöÑÔºâ„ÄÇÁ¨¨‰∫åÁßçÊòØÊèê‰æõ @command{gawk} Â¶Ç‰ΩïË¢´Ë∞ÉÁî®ÁöÑ‰ø°ÊÅØ„ÄÇ

@menu
* Extension Versioning::        API Version information.
* Extension API Informational Variables:: Variables providing information about
                                @command{gawk}'s invocation.
@end menu

@node Extension Versioning
@subsubsection API Version Constants and Variables
@cindex API version
@cindex extension API version

API Êèê‰æõ‰∫Ü‚Äú‰∏ª‚Äù‰∏é‚ÄúÊ¨°‚ÄùÁâàÊú¨ÂÄº„ÄÇAPI ÁâàÊú¨ÂèØ‰ª•Âú®ÁºñËØëÊó∂ÂàªËé∑Âæó„ÄÇÂÆÉÂú® C ËØ≠Ë®ÄÈ¢ÑÂ§ÑÁêÜ‰∏≠ÂÆö‰πâ‰ª•ÊîØÊåÅÊù°‰ª∂ÁºñËØëÔºå‰ª•Âèä‰Ωú‰∏∫Êûö‰∏æÂûãÂ∏∏ÈáèÁî®‰∫é debugÔºö

@float Table,gawk-api-version
@caption{gawk API ÁâàÊú¨Âè∑Â∏∏Èáè}
@multitable @columnfractions .33 .33 .33
@headitem API ÁâàÊú¨ @tab C ËØ≠Ë®ÄÈ¢ÑÂ§ÑÁêÜÂô®‰∏≠ÁöÑÂÆö‰πâ @tab Êûö‰∏æÂûãÂ∏∏Èáè
@item Major @tab gawk_api_major_version @tab GAWK_API_MAJOR_VERSION
@item Minor @tab gawk_api_minor_version @tab GAWK_API_MINOR_VERSION
@end multitable
@end float

Ê¨°ÁâàÊú¨Âè∑‰ºöÂú®Âêë API Ê∑ªÂä†Êñ∞ÂáΩÊï∞ÁöÑÊó∂ÂÄôËøõË°åÈÄíÂ¢û„ÄÇËøô‰∫õÊñ∞ÂáΩÊï∞ÊÄªÊòØÊ∑ªÂä†Âú® API ÁªìÊûÑ‰Ωì @code{struct} ÁöÑÂ∞æÈÉ®„ÄÇ

Â¶ÇÊûúÊï∞ÁªÑÁ±ªÂûãÊîπÂèò‰∫ÜÂ§ßÂ∞èÔºåÊàñËÄÖÊàêÂëòÈ°∫Â∫èÊúâÂèòÂåñÔºåÊàñËÄÖÁé∞ÊúâÁöÑÂáΩÊï∞ÊîπÂèò‰∫ÜÁ≠æÂêçÔºå‰ºöÂØπ‰∏ªÁâàÊú¨Âè∑ÈÄíÂ¢ûÔºàÊ¨°ÁâàÊú¨Âè∑ÂàôÈáçËÆæ‰∏∫ 0Ôºâ„ÄÇ

ÊúâÂèØËÉΩÊâ©Â±ïÊòØ‰ª•Êüê‰∏™ÁâàÊú¨ÁöÑ API ËøõË°åÁºñËØëÁöÑÔºåËÄåË¢´Âè¶‰∏Ä‰∏™ÁâàÊú¨ÁöÑ @command{gawk} ÁâàÊú¨ËøõË°åË£ÖËΩΩ„ÄÇÁî±‰∫éËøô‰∏™ÂéüÂõ†ÔºåÊâßË°å @command{gawk} API ÁöÑ‰∏ªÊ¨°ÁâàÊú¨Âè∑‰ºöÂåÖÂê´Âú® API ÁªìÊûÑ‰Ωì @code{struct} ‰∏≠ÔºåÂπ∂‰∏îÊòØÂè™ËØªÁöÑÔºö

@table @code
@item api->major_version
ÊâßË°å @command{gawk} ÁöÑ‰∏ªÁâàÊú¨Âè∑„ÄÇ

@item api->minor_version
ÊâßË°å @command{gawk} ÁöÑÊ¨°ÁâàÊú¨Âè∑„ÄÇ
@end table

Êâ©Â±ïÂèØ‰ª•ÂÜ≥ÂÆö API ÊòØÂê¶ÊòØÂÖºÂÆπÁöÑ„ÄÇÂÖ∏ÂûãÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÉè‰∏ãÈù¢ËøôÊ†∑ÁöÑÊ£ÄÊü•Â∞±ÂèØ‰ª•‰∫ÜÔºö

@example
if (api->major_version != GAWK_API_MAJOR_VERSION
    || api->minor_version < GAWK_API_MINOR_VERSION) @{
        fprintf(stderr, "foo_extension: version mismatch with gawk!\n");
        fprintf(stderr, "\tmy version (%d, %d), gawk version (%d, %d)\n",
                GAWK_API_MAJOR_VERSION, GAWK_API_MINOR_VERSION,
                api->major_version, api->minor_version);
        exit(1);
@}
@end example

ËøôÊ†∑ÁöÑ‰ª£Á†ÅË¢´ÂåÖÂê´Âú®Ê®°Êùø @code{dl_load_func()} ÂÆè‰∏≠ÔºåÂπ∂Áî± @file{gawkapi.h} Êñá‰ª∂‰∏≠ÔºàÂú® @ref{Extension API Boilerplate} ‰∏≠ËøõË°åËÆ®ËÆ∫Ôºâ„ÄÇ

@node Extension API Informational Variables
@subsubsection ‰ø°ÊÅØÂèòÈáè
@cindex API informational variables
@cindex extension API informational variables

API Êèê‰æõ‰∫ÜÂ§ö‰∏™ÂèòÈáèÁöÑËÆøÈóÆÔºåËøô‰∫õÂèòÈáèÊèèËø∞‰∫Ü @command{gawk} Ë¢´Ë∞ÉÁî®Êó∂ÔºåÁõ∏Â∫îÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÊòØÂê¶ÂêØÁî®„ÄÇËøô‰∫õÂèòÈáèÊòØÔºö

@table @code
@item do_debug
Ëøô‰∏™ÂèòÈáèÂΩì‰ΩøÁî®‰∫Ü @option{--debug} ÈÄâÈ°πÊù•Ë∞ÉÁî® @command{gawk} Êó∂‰ºö‰∏∫ true„ÄÇ

@item do_lint
Ëøô‰∏™ÂèòÈáèÂΩì‰ΩøÁî®‰∫Ü @option{--lint} ÈÄâÈ°πÊù•Ë∞ÉÁî® @command{gawk} Êó∂‰ºö‰∏∫ true„ÄÇ

@item do_mpfr
Ëøô‰∏™ÂèòÈáèÂΩì‰ΩøÁî®‰∫Ü @option{--bignum} ÈÄâÈ°πÊù•Ë∞ÉÁî® @command{gawk} Êó∂‰ºö‰∏∫ true„ÄÇ

@item do_profile
Ëøô‰∏™ÂèòÈáèÂΩì‰ΩøÁî®‰∫Ü @option{--profile} ÈÄâÈ°πÊù•Ë∞ÉÁî® @command{gawk} Êó∂‰ºö‰∏∫ true„ÄÇ

@item do_sandbox
Ëøô‰∏™ÂèòÈáèÂΩì‰ΩøÁî®‰∫Ü @option{--sandbox} ÈÄâÈ°πÊù•Ë∞ÉÁî® @command{gawk} Êó∂‰ºö‰∏∫ true„ÄÇ

@item do_traditional
Ëøô‰∏™ÂèòÈáèÂΩì‰ΩøÁî®‰∫Ü @option{--traditional} ÈÄâÈ°πÊù•Ë∞ÉÁî® @command{gawk} Êó∂‰ºö‰∏∫ true„ÄÇ
@end table

@code{do_lint} ÁöÑÂÄºÂ¶ÇÊûú @command{awk} ‰ª£Á†Å‰øÆÊîπ‰∫Ü @code{LINT} È¢ÑÂÆö‰πâÂèòÈáèÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÂèØËÉΩ‰ºöÊîπÂèò„ÄÇÂÖ∂‰ªñÁöÑÂú®ÊâßË°åËøáÁ®ã‰∏≠ÈÉΩ‰∏ç‰ºöÊîπÂèò„ÄÇ

@node Extension API Boilerplate
@subsection Ê†∑Êùø‰ª£Á†Å

Â¶Ç‰πãÂâçÊâÄÊèêÔºàÊü•Áúã @pxref{Extension Mechanism Outline}ÔºâÔºåÂáΩÊï∞ÂÆö‰πâÁöÑÂëàÁé∞ÂÆûÈôÖ‰∏äÊòØ‰∏Ä‰∏™ÂÆè„ÄÇ‰∏∫‰∫Ü‰ΩøÁî®Ëøô‰∫õÂÆèÔºå‰Ω†ÁöÑÊâ©Â±ïÂøÖÈ°ª‰ΩøÁî®‰∏ãÈù¢ÁöÑÈ¢ÑÂÆö‰πâÁöÑÂêçÂ≠óÔºåÊèê‰æõÂ∞ëÈáèÁöÑÊ†∑Êùø‰ª£Á†ÅÔºàÂèòÈáè‰ª•ÂèäÂáΩÊï∞ÔºâÊîæÂú®‰Ω†ÁöÑÊ∫ê‰ª£Á†ÅÁöÑÂ§¥ÈÉ®„ÄÇÊâÄÈúÄË¶ÅÁöÑÊ†∑Êùø‰ª£Á†Å‰πüÊèê‰æõÂú® @file{gawkapi.h} Â§¥Êñá‰ª∂ÁöÑÊ≥®Èáä‰∏≠Ôºö

@example
/* Boilerplate code: */
int plugin_is_GPL_compatible;

static gawk_api_t *const api;
static awk_ext_id_t ext_id;
static const char *ext_version = NULL; /* or @dots{} = "some string" */

static awk_ext_func_t func_table[] = @{
    @{ "name", do_name, 1 @},
    /* @dots{} */
@};

/* EITHER: */

static awk_bool_t (*init_func)(void) = NULL;

/* OR: */

static awk_bool_t
init_my_extension(void)
@{
    @dots{}
@}

static awk_bool_t (*init_func)(void) = init_my_extension;

dl_load_func(func_table, some_name, "name_space_in_quotes")
@end example

Ëøô‰∫õÂèòÈáè‰∏éÂáΩÊï∞Â¶Ç‰∏ãÔºö

@table @code
@item int plugin_is_GPL_compatible;
Ëøô‰∏™Áî®Êù•Â£∞ÊòéÊâ©Â±ïÊòØ‰∏é GNU GPL ÂÖºÂÆπÁöÑ
This asserts that the extension is compatible with
@ifclear FOR_PRINT
ÔºàÊü•Áúã @pxref{Copying}Ôºâ„ÄÇ
@end ifclear
Â¶ÇÊûú‰Ω†ÁöÑÊâ©Â±ïÊ≤°ÊúâËøô‰∏™ÂèòÈáèÔºå@command{gawk} ‰∏ç‰ºöË£ÖËΩΩÂÆÉÔºàÊü•Áúã @pxref{Plugin License}Ôºâ„ÄÇ

@item static gawk_api_t *const api;
Ëøô‰∏™ÂÖ®Â±ÄÁöÑ @code{static} ÂèòÈáèÂ∫îËØ•Ë¢´ËÆæÂÆöÊåáÂêë @code{gawk_api_t} ÊåáÈíàÔºå@command{gawk} ‰ºöÂú® @code{dl_load()} ÂáΩÊï∞‰∏≠‰º†ÈÄíËøáÊù•„ÄÇËøô‰∏™ÂèòÈáèË¢´ÊâÄÊúâÁöÑÂÆè‰ΩøÁî®„ÄÇ

@item static awk_ext_id_t ext_id;
Ëøô‰∏™ÂÖ®Â±ÄÈùôÊÄÅÂèòÈáèÂ∫îËØ•ËÆæÁΩÆ‰∏∫ @code{awk_ext_id_t} ÁöÑÂÄºÔºåËøô‰∏™ÂÄº‰ºöÈÄöËøá‰Ω†Ëá™Â∑±ÁöÑ @code{dl_load()} ÂáΩÊï∞‰º†ÈÄíÁªòÁîª‰Ω†„ÄÇËøô‰∏™ÂèòÈáèË¢´ÊâÄÊúâÁöÑÂÆè‰ΩøÁî®„ÄÇ

@item static const char *ext_version = NULL; /* or @dots{} = "some string" */
Ëøô‰∏™ÂÖ®Â±Ä @code{static} ÂèòÈáèË¶Å‰πàË¢´ËÆæÁΩÆ‰∏∫ @code{NULL}ÔºåÊàñËÄÖÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÁöÑÊåáÈíàÔºåËøô‰∏™Â≠ó‰∏≤ÁªòÁîª‰∫Ü‰∫ÜÊâ©Â±ïÁöÑÂêçÂ≠ó‰∏éÁâàÊú¨„ÄÇ

@item static awk_ext_func_t func_table[] = @{ @dots{} @};
Ëøô‰∏™‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ @code{awk_ext_func_t} ÁªìÊûÑÁöÑÊï∞ÁªÑÔºåÂ¶Ç‰πãÊâÄÊèèËø∞ÁöÑÔºàÊü•Áúã @pxref{Extension Functions}Ôºâ„ÄÇÂÆÉ‰πãÂêéÂèØ‰ª•ÈÄöËøáÂæ™ÁéØÊù•Â§öÊ¨°Ë∞ÉÁî® @code{add_ext_func()}„ÄÇ

@c Use @var{OR} for docbook
@item static awk_bool_t (*init_func)(void) = NULL;
@itemx @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @ @var{OR}
@itemx static awk_bool_t init_my_extension(void) @{ @dots{} @}
@itemx static awk_bool_t (*init_func)(void) = init_my_extension;
Â¶ÇÊûú‰Ω†ÈúÄË¶ÅÂÅö‰∏Ä‰∫õÂàùÂßãÂåñÁöÑÂ∑•‰ΩúÔºå‰Ω†Â∫îËØ•ÂÆö‰πâËøôÊ†∑ÁöÑÂáΩÊï∞ÔºàÂàõÂª∫ÂèòÈáèÔºåÊâìÂºÄÊñá‰ª∂Á≠âÔºâÁÑ∂ÂêéÂÆö‰πâ @code{init_func} ÊåáÈíàÊåáÂêë‰Ω†ÁöÑÂáΩÊï∞„ÄÇÂáΩÊï∞Â∫îËØ•Âú®Â§±Ë¥•Êó∂ËøîÂõû @code{awk_false} ÔºåÊàñËÄÖÊàêÂäüÊó∂ËøîÂõû @code{awk_true}„ÄÇ

Â¶ÇÊûú‰Ω†‰∏çÈúÄË¶ÅÂàùÂßãÂåñÔºåÂÆö‰πâËøô‰∏™ÊåáÈíàÔºåÂπ∂Â∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫ @code{NULL}„ÄÇ

@item dl_load_func(func_table, some_name, "name_space_in_quotes")
Ëøô‰∏™ÂÆè‰ºöÊâ©Â±ï‰∏∫ @code{dl_load()} ÂáΩÊï∞ÔºåËØ•ÂáΩÊï∞ÊâßË°åÊâÄÊúâÂøÖË¶ÅÁöÑÂàùÂßãÂåñ„ÄÇ
@end table

ÊâÄÊúâÂèòÈáè‰∏éÊï∞ÁªÑÁöÑÁõÆÁöÑÊòØ‰Ωø @code{dl_load()} ÂáΩÊï∞ÔºàÊù•Ëá™‰∫é @code{dl_load_func()} ÂÆè‰∏≠ÔºâÂ§ÑÁêÜÊâÄÊúâÁöÑÊ†áÂáÜÂ∑•‰Ωú„ÄÇÂÆÉÊâßË°å‰∏ãÈù¢ÁöÑÂ∑•‰ΩúÔºö

@enumerate 1
@item
Ê£ÄÊü• API ÁâàÊú¨„ÄÇÂ¶ÇÊûúÊâ©Â±ïÁöÑ‰∏ªÁâàÊú¨‰∏é @command{gawk} ÁöÑ‰∏ªÁâàÊú¨‰∏çÂåπÈÖçÔºåÊàñËÄÖÊâ©Â±ïÁöÑÊ¨°ÁâàÊú¨Â§ß‰∫é @command{gawk} ÁöÑÊ¨°ÁâàÊú¨Âè∑ÔºåÂÆÉ‰ºöÊâìÂç∞ÈîôËØØ‰ø°ÊÅØÂêéÈÄÄÂá∫„ÄÇ

@item
Ë£ÖÂÖ•ÂÆö‰πâÂú® @code{func_table} ‰∏≠ÁöÑÂáΩÊï∞„ÄÇÂ¶ÇÊûúÂÆÉ‰ª¨‰∏≠ÁöÑ‰ªª‰Ωï‰∏Ä‰∏™Â§±Ë¥•ÔºåÂÆÉ‰ºöÊâìÂç∞Ë≠¶Âëä‰ø°ÊÅØÔºå‰ΩÜÊòØÁªßÁª≠ÊâßË°å„ÄÇ

@item
Â¶ÇÊûú @code{init_func} ÊåáÈíà‰∏ç‰∏∫ @code{NULL}ÔºåÂàôË∞ÉÁî®ÂÆÉÊåáÂêëÁöÑÂáΩÊï∞„ÄÇÂ¶ÇÊûúÂÆÉËøîÂõû @code{awk_false}ÔºåÊâìÂç∞‰∏Ä‰∏™Ë≠¶Âëä‰ø°ÊÅØ„ÄÇ

@item
Â¶ÇÊûú @code{ext_version} ‰∏ç‰∏∫ @code{NULL}ÔºåÊ≥®ÂÜåÁâàÊú¨Â≠ó‰∏≤Âà∞ @command{gawk} ‰∏≠„ÄÇ
@end enumerate

@node Finding Extensions
@section @command{gawk} Â¶Ç‰ΩïÊâæÂà∞Êâ©Â±ï
@cindex extension search path
@cindex finding extensions

ÁºñËØëÂ•ΩÁöÑÊâ©Â±ïÂøÖÈ°ªÂÆâË£ÖÂú® @command{gawk} ÂèØ‰ª•ÊâæÂà∞ÂÆÉ‰ª¨ÁöÑË∑ØÂæÑ‰∏ã„ÄÇÂ¶ÇÊûú @command{gawk} Ë¢´ÈÖçÁΩÆÂπ∂‰ª•ÈªòËÆ§ÁöÑÊñπÂºèËøõË°åÊûÑÂª∫ÔºåÊù•ÊêúÁ¥¢Êâ©Â±ïÁöÑÁõÆÂΩï‰∏∫ @file{/usr/local/lib/gawk}„ÄÇ
‰Ω†‰πüÂèØ‰ª•ÊåáÂÆö‰∏Ä‰∏™ÁõÆÂΩïÂàóË°®Êù•ÊêúÁ¥¢ÁºñËØëÂ•ΩÁöÑÊâ©Â±ï„ÄÇÊü•Áúã @xref{AWKLIBPATH Variable}ÔºåÊù•Ëé∑ÂèñÂÖ∂‰ªñ‰ø°ÊÅØ„ÄÇ

@node Extension Example
@section ‰æãÂ≠êÔºö‰∏Ä‰∫õÊñá‰ª∂ÂáΩÊï∞
@cindex extension example

@quotation
@i{
‰Ω†ÂèØ‰ª•Âà∞Ëææ‰ªª‰Ωï‰Ω†ÊÉ≥ÂéªÁöÑÂú∞Êñπ„ÄÇ
}
@author Buckaroo Banzai
@end quotation

@c It's enough to show chdir and stat, no need for fts

Êúâ‰∏§‰∏™ÈùûÂ∏∏ÊúâÁî®ÁöÑÂáΩÊï∞‰∏çÂú® @command{awk} ‰∏≠Ôºå‰ªñ‰ª¨ÊòØ @code{chdir()}ÔºàËøôÊ†∑ @command{awk} Á®ãÂ∫èÂèØ‰ª•ÊîπÂèòÂÆÉÁöÑÁõÆÂΩïÔºâ‰∏é @code{stat()}ÔºàËøôÊ†∑ @command{awk} Á®ãÂ∫èÂèØ‰ª•Êî∂ÈõÜÊñá‰ª∂ÁöÑ‰ø°ÊÅØÔºâ„ÄÇ‰∏∫‰∫ÜÁî®ÂÆûÈôÖÁöÑ‰æãÂ≠êËØ¥Êòé APIÔºåËøô‰∏Ä@value{SECTION}‰ºöÂ∞ÜÂÖ∂ÂÆûÁé∞‰∏∫ @command{gawk} ÁöÑÊâ©Â±ï„ÄÇ

@menu
* Internal File Description::   What the new functions will do.
* Internal File Ops::           The code for internal file operations.
* Using Internal File Ops::     How to use an external extension.
@end menu

@node Internal File Description
@subsection  ‰ΩøÁî® @code{chdir()} ‰∏é @code{stat()}

Ëøô‰∏Ä@value{SECTION}Â±ïÁ§∫Â¶Ç‰ΩïÊù•Âú® @command{awk} Â±Ç‰∏äÂ¶Ç‰ΩïÊù•‰ΩøÁî®Êñ∞ÂáΩÊï∞ÔºåÂè™Ë¶Å‰ªñ‰ª¨Â∑≤ÁªèÊï¥ÂêàÂà∞‰∫Ü @command{gawk} ‰∏≠ÁöÑËß£ÈáäÂô®‰∏≠„ÄÇ‰ΩøÁî® @code{chdir()} ÈùûÂ∏∏Áõ¥Êé•„ÄÇÂÆÉÂè™Êúâ‰∏Ä‰∏™ÂèÇÊï∞ÔºåÂç≥Ë¶ÅÊõ¥ÊîπÁöÑÊñ∞ÁõÆÂΩïÔºö

@example
@@load "filefuncs"
@dots{}
newdir = "/home/arnold/funstuff"
ret = chdir(newdir)
if (ret < 0) @{
    printf("could not change to %s: %s\n", newdir, ERRNO) > "/dev/stderr"
    exit 1
@}
@dots{}
@end example

Â¶ÇÊûú @code{chdir()} Â§±Ë¥•‰∫Ü‰ºöËøîÂõû‰∏Ä‰∏™Ë¥üÂÄºÔºå@code{ERRNO}ÔºàÊü•Áúã @pxref{Built-in Variables}Ôºâ ÁöÑÂÄº‰ºöË¢´ËÆæÁΩÆ‰∏∫ÊåáÁ§∫ÈîôËØØÁöÑÂ≠ó‰∏≤„ÄÇ

‰ΩøÁî® @code{stat()} Â∞±Êúâ‰∏ÄÁÇπÂ§çÊùÇ„ÄÇC ÁöÑ @code{stat()} ÂáΩÊï∞‰ºöÂ°´ÂÖÖ‰∏Ä‰∏™ÊúâÂ§ßÈáè‰ø°ÊÅØÁöÑÁªìÊûÑ„ÄÇÂú® @command{awk} ‰∏≠ÂØπÂÖ∂ËøõË°åÂª∫Ê®°ÁöÑÊ≠£Á°ÆÊñπÊ≥ïÊòØ‰ΩøÁî®ÂÖ≥ËÅîÊï∞ÁªÑÊù•Ë°®Á§∫ÂØπÂ∫îÁöÑ‰ø°ÊÅØÔºö

@c broke printf for page breaking
@example
file = "/home/arnold/.profile"
ret = stat(file, fdata)
if (ret < 0) @{
    printf("could not stat %s: %s\n",
             file, ERRNO) > "/dev/stderr"
    exit 1
@}
printf("size of %s is %d bytes\n", file, fdata["size"])
@end example

@code{stat()} ÂáΩÊï∞ÊÄª‰ºöÊ∏ÖÈô§Êï∞ÊçÆÊï∞ÁªÑÔºåÂ∞±ÁÆó @code{stat()} Â§±Ë¥•ÊÉÖÂÜµ‰∏ã‰πüÂ¶ÇÊ≠§„ÄÇÂÆÉ‰ºö‰ª•Â°´ÂÖÖ‰∏ãÈù¢ÁöÑÂÖÉÁ¥†Ôºö

@table @code
@item "name"
Ë¶ÅËøõË°å @code{stat()} Êìç‰ΩúÁöÑÊñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇ

@item "dev"
@itemx "ino"
Êñá‰ª∂ÁöÑËÆæÂ§á‰∏é inode Âè∑„ÄÇ

@item "mode"
Êñá‰ª∂ÁöÑËÆøÈóÆÊùÉÈôêÔºå‰∏∫Êï∞ÂÄº„ÄÇËøôÂåÖÂê´Êñá‰ª∂ÁöÑÁ±ªÂûã‰ª•ÂèäÊùÉÈôê„ÄÇ

@item "nlink"
Á°¨ËøûÊé•ÁöÑ‰∏™Êï∞„ÄÇ

@item "uid"
@itemx "gid"
Êñá‰ª∂ÊâÄÊúâËÄÖÁöÑÁî®Êà∑ ID ‰∏éÁªÑ ID„ÄÇ

@item "size"
Êñá‰ª∂ÁöÑÂ≠óËäÇÂ§ßÂ∞è„ÄÇ

@item "blocks"
Êñá‰ª∂ÂÆûÈôÖÂç†ÊúâÂùóÁöÑ‰∏™Êï∞„ÄÇÂ¶ÇÊûúÊñá‰ª∂ÊúâÊ¥ûÔºåÂàôËøô‰∏™Êï∞ÁªÑ‰∏ç‰ºöÊòØÂÖ∂Â§ßÂ∞èÁöÑÂáΩÊï∞„ÄÇ

@item "atime"
@itemx "mtime"
@itemx "ctime"
Êñá‰ª∂ÁöÑÊúÄÂêéËÆøÈóÆÔºå‰øÆÊîπÂèä inode Êõ¥Êñ∞Êó∂Èó¥„ÄÇÂÆÉ‰ª¨ÈÉΩÊòØÊï∞ÂÄºÁöÑÊó∂Èó¥Êà≥ÔºåÈÄÇÂêàÁî®‰∫é @code{strftime()}ÔºàÊü•Áúã @ref{Time Functions}Ôºâ„ÄÇ

@item "pmode"
Êñá‰ª∂ÁöÑ‚Äúprintable mode"„ÄÇËøô‰∏™ÊòØ‰∏Ä‰∏™Êñá‰ª∂Á±ªÂûã‰∏éÊùÉÈôêÁöÑÂ≠ó‰∏≤Ë°®Á§∫ÔºåÂ¶Ç @samp{ls -l} ËæìÂá∫„ÄÇÂ¶ÇÔºå@code{"drwxr-xr-x"}„ÄÇ

@item "type"
Êñá‰ª∂Á±ªÂûãÁöÑÂèØÊâìÂç∞Â≠ó‰∏≤ÔºåÂÄºÂèØËÉΩÊòØ‰∏ãÈù¢‰πã‰∏ÄÔºö

@table @code
@item "blockdev"
@itemx "chardev"
Êñá‰ª∂ÊòØ‰∏Ä‰∏™ÂùóÊàñËÄÖÂ≠óÁ¨¶ËÆæÂ§áÔºà‚ÄúÁâπÊÆäÊñá‰ª∂‚ÄùÔºâ„ÄÇ

@ignore
@item "door"
The file is a Solaris ``door'' (special file used for
interprocess communications).
@end ignore

@item "directory"
Êñá‰ª∂ÊòØÁõÆÂΩï„ÄÇ

@item "fifo"
Êñá‰ª∂ÊòØ‰∏Ä‰∏™ÂëΩÂêçÁÆ°ÈÅìÔºà‰πüÁß∞‰∏∫ FIFOÔºâ„ÄÇ

@item "file"
Êñá‰ª∂ÊòØ‰∏Ä‰∏™Â∏∏ËßÑÊñá‰ª∂„ÄÇ

@item "socket"
Êñá‰ª∂ÊòØÊñá‰ª∂Á≥ªÁªü‰∏≠ÁöÑ‰∏Ä‰∏™ @code{AF_UNIX}Ôºà‚ÄúUnix domain‚ÄùÔºâsocket„ÄÇ

@item "symlink"
Êñá‰ª∂ÊòØ‰∏Ä‰∏™Á¨¶Âè∑ËøûÊé•„ÄÇ
@end table

@c 5/2013: Thanks to Corinna Vinschen for this information.
@item "devbsize"
Êñá‰ª∂ÁöÑÈÄöËøá @code{"blocks"} ËøõË°åÁ¥¢ÂºïÁöÑÂü∫Êú¨ÂùóÂ§ßÂ∞è„ÄÇÂ§ßÂ§öÊï∞Á≥ªÁªü‰∏≠ÔºåËøô‰∏™‰ø°ÊÅØÊòØ‰ªé @code{<sys/param.h>} Êñá‰ª∂‰∏≠ÁöÑ @code{DEV_BSIZE} ÊàñËÄÖÊòØ BSD Á≥ªÁªü‰∏≠ @code{<sys/stat.h>} Êñá‰ª∂‰∏≠ÁöÑ @code{S_BLKSIZE} ÁªßÊâø‰∏ãÊù•ÁöÑ„ÄÇÂØπ‰∫éÂÖ∂‰ªñÁöÑÁ≥ªÁªüÔºå@dfn{È¢ÑÂÖà}ÁöÑÁü•ËØÜ‰∏∫ÂÖ∂Êèê‰æõÂÄº„ÄÇÂΩìÊ≤°Ê≥ïÁ°ÆÂÆöÂÄºÁöÑÊó∂ÂÄôÔºåÈªòËÆ§‰∏∫ 512„ÄÇ
@end table

ËøòÂèØËÉΩÊúâÂá†‰∏™È¢ùÂ§ñÁöÑÂÖÉÁ¥†ÔºåÂÖ∂‰æùËµñ‰∫éÊìç‰ΩúÁ≥ªÁªü‰ª•ÂèäÊñá‰ª∂ÁöÑÁ±ªÂûã„ÄÇ‰Ω†ÂèØ‰ª•Âú® @command{awk} Á®ãÂ∫è‰∏≠‰ΩøÁî® @code{in} Êìç‰ΩúÁ¨¶Êù•ÂØπÂÆÉ‰ª¨ËøõË°åÊµãËØïÔºàÊü•Áúã @ref{Reference to Elements}ÔºâÔºö

@table @code
@item "blksize"
Áî®‰∫éÊñá‰ª∂ I/O ‰ºòÂÖàÂùóÂ§ßÂ∞è„ÄÇËøô‰∏™ÂüüÂú®ÊâÄÊúâÁ±ª POSIXÁ≥ªÁªü‰∏≠ÁöÑ C @code{stat} ÁªìÊûÑ‰∏≠‰∏çÂ≠òÂú®„ÄÇ

@item "linkval"
Â¶ÇÊûúÊñá‰ª∂ÊòØ‰∏Ä‰∏™ËøûÊé•ÔºåËøô‰∏™ÂÖÉÁ¥†Â∞±ÊòØËøûÊé•Êñá‰ª∂ÊâÄÊåáÂêëÁöÑÊñá‰ª∂ÂêçÔºàÂç≥ËøûÊé•ÁöÑÂÄºÔºâ„ÄÇ

@item "rdev"
@itemx "major"
@itemx "minor"
Â¶ÇÊûúÊñá‰ª∂ÊòØ‰∏Ä‰∏™ÂùóËÆæÂ§áÊàñËÄÖÊòØ‰∏Ä‰∏™Â≠óÁ¨¶ËÆæÂ§áÊñá‰ª∂ÔºåÂàôËøô‰∏™ÂÄº‰ª£Ë°®‰∫ÜËÆæÂ§áÂè∑ÁöÑÊï∞ÂÄºÔºå‰ª•ÂèäËÆæÂ§áÂè∑‰∏≠ÁöÑ‰∏ªÊ¨°ËÆæÂ§áÂè∑„ÄÇ
@end table

@node Internal File Ops
@subsection  @code{chdir()} ‰∏é @code{stat()} ÁöÑC ‰ª£Á†Å

‰∏ãÈù¢ÊòØËøô‰∫õÊâ©Â±ïÁöÑ C ‰ª£Á†Å„ÄÇ 
@footnote{‰∏∫‰∫ÜË°®Áé∞ÔºåËøô‰∏™ÁâàÊú¨Êúâ‰∏Ä‰∫õÂ∞èÊîπÂä®„ÄÇÂà∞ @command{gawk} ÂèëÂ∏ÉÁâà @file{extension/filefuncs.c} ‰∏≠Êü•ÁúãÂÆåÊï¥ÁöÑÁâàÊú¨„ÄÇ}

Ëøô‰∏™Êñá‰ª∂‰∏≠ÂåÖÂê´ÂæàÂ§öÁöÑÊ†áÂáÜÂ§¥Êñá‰ª∂ÔºåÁÑ∂ÂêéÂÜçÂåÖÂê´ @file{gawkapi.h} Â§¥Êñá‰ª∂ÔºåËøô‰∏™Êñá‰ª∂Êñá‰ª∂‰∏≠ÂåÖ‰∫Ü API ÁöÑÂÆö‰πâ„ÄÇÂêéÂÜçÊòØË∑üÁùÄ‰∏Ä‰∫õÂøÖË¶ÅÂèòÈáèÂ£∞ÊòéÔºå‰ª•‰ΩøÁî® API ‰∏≠ÁöÑÂÆè‰∏éÊ®°Êùø‰ª£Á†ÅÔºàÊü•Áúã @pxref{Extension API Boilerplate}ÔºâÔºö

@example
#ifdef HAVE_CONFIG_H
#include <config.h>
#endif

#include <stdio.h>
#include <assert.h>
#include <errno.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include <sys/types.h>
#include <sys/stat.h>

#include "gawkapi.h"

#include "gettext.h"
#define _(msgid)  gettext(msgid)
#define N_(msgid) msgid

#include "gawkfts.h"
#include "stack.h"

static const gawk_api_t *api;    /* for convenience macros to work */
static awk_ext_id_t *ext_id;
static awk_bool_t init_filefuncs(void);
static awk_bool_t (*init_func)(void) = init_filefuncs;
static const char *ext_version = "filefuncs extension: version 1.0";

int plugin_is_GPL_compatible;
@end example

@cindex programming conventions, @command{gawk} extensions
‰π†ÊÉØ‰∏äÔºåÂØπ‰∫é @command{awk} ÂáΩÊï∞ @code{foo()}ÔºåÂÆûÁé∞ÂÆÉÁöÑÂáΩÊï∞Áß∞‰∏∫ @code{do_foo()}„ÄÇËøô‰∫õÂáΩÊï∞Â∫îËØ•Êúâ‰∏§‰∏™ÂèÇÊï∞„ÄÇÁ¨¨‰∏Ä‰∏™ÊòØ @code{int}ÔºåÈÄöÂ∏∏Áß∞‰∏∫ @code{nargs}ÔºåË°®Á§∫ÁöÑÊòØÂáΩÊï∞‰∏≠ÂÆûÈôÖÂèÇÊï∞ÁöÑ‰∏™Êï∞„ÄÇÁ¨¨‰∫å‰∏™ÊòØ @code{awk_value_t} ÁªìÊûÑÁöÑÊåáÈíàÔºå‰∏ÄËà¨ÂëΩÂêç‰∏∫ @code{result}Ôºö

@example
/*  do_chdir --- provide dynamically loaded chdir() function for gawk */

static awk_value_t *
do_chdir(int nargs, awk_value_t *result)
@{
    awk_value_t newdir;
    int ret = -1;

    assert(result != NULL);

    if (do_lint && nargs != 1)
        lintwarn(ext_id,
                 _("chdir: called with incorrect number of arguments, "
                   "expecting 1"));
@end example

@code{newdir} ÂèòÈáèË°®Á§∫Ë¶ÅÊîπÂèòÁöÑÊñ∞ÁõÆÂΩïÔºåËøô‰∏™ÊòØÈÄöËøá @code{get_argument()} Êù•Ëé∑ÂèñÁöÑ„ÄÇÊ≥®ÊÑèÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞ÁöÑÁºñÂè∑‰∏∫ 0„ÄÇ

Â¶ÇÊûúÂèÇÊï∞Ë¢´ÊàêÂäüËøîÂõûÔºåÂàôÂáΩÊï∞Ë∞ÉÁî® @code{chdir()} Á≥ªÁªüË∞ÉÁî®„ÄÇÂ¶ÇÊûú @code{chdir()} Â§±Ë¥•ÔºåÂàô @code{ERRNO} ÁöÑÂÄº‰ºöË¢´Êõ¥ÊîπÔºö

@example
    if (get_argument(0, AWK_STRING, & newdir)) @{
        ret = chdir(newdir.str_value.str);
        if (ret < 0)
            update_ERRNO_int(errno);
    @}
@end example

ÊúÄÂêéÔºåÂáΩÊï∞ËøîÂõûË¶ÅËøîÂõûÁöÑÂÄºÂà∞ @command{awk} Â±ÇÔºö

@example
    return make_number(ret, result);
@}
@end example

@code{stat()} Êâ©Â±ïÊ∂âÂèäÁöÑ‰∏úË•øÊõ¥Â§ö‰∏Ä‰∫õ„ÄÇÈ¶ñÂÖàÊòØ‰∏Ä‰∏™Â∞ÜÊï∞ÂÄºÊ®°ÂºèËΩ¨Êç¢‰∏∫ÂèØÊâìÂç∞Ë°®Á§∫ÁöÑÂáΩÊï∞ÔºàÊØîÂ¶Ç @code{0644} ËΩ¨Êç¢‰∏∫ @samp{-rw-r--r--}Ôºâ„ÄÇÁÆÄÂçïËµ∑ËßÅÔºåËøôÈáåÁúÅÁï•‰∫ÜÔºö

@example
/* format_mode --- turn a stat mode field into something readable */

static char *
format_mode(unsigned long fmode)
@{
    @dots{}
@}
@end example

‰∏ã‰∏Ä‰∏™ÂáΩÊï∞Áî®Êù•ËØªÂèñËΩØÈìæÊé•Ôºå‰πü‰∏∫‰∫ÜÁÆÄÂåñÔºåÂú®ËøôÈáåÁúÅÁï•‰∫ÜÔºö

@example
/* read_symlink --- read a symbolic link into an allocated buffer.
   @dots{} */

static char *
read_symlink(const char *fname, size_t bufsize, ssize_t *linksize)
@{
    @dots{}
@}
@end example

Êúâ‰∏§‰∏™ËæÖÂä©ÂáΩÊï∞‰ºöÁÆÄÂåñÂ∞ÜÂÄºËæìÂÖ•Âà∞Êï∞ÁªÑÁöÑËøáÁ®ãÔºåËøô‰∏™Êï∞ÁªÑÂ∞ÜÂåÖÂê´ @code{stat()} ÁöÑÁªìÊûúÔºö

@example
/* array_set --- set an array element */

static void
array_set(awk_array_t array, const char *sub, awk_value_t *value)
@{
    awk_value_t index;

    set_array_element(array,
                      make_const_string(sub, strlen(sub), & index),
                      value);

@}

/* array_set_numeric --- set an array element with a number */

static void
array_set_numeric(awk_array_t array, const char *sub, double num)
@{
    awk_value_t tmp;

    array_set(array, sub, make_number(num, & tmp));
@}
@end example

‰∏ãÈù¢ÁöÑÂáΩÊï∞Â§ÑÁêÜÂ§ßÈÉ®‰ªΩÁöÑÂ∑•‰ΩúÔºåÂç≥Â∞Ü‰ªé‰∏Ä‰∏™ÊúâÊïàÁöÑ @code{struct stat} ‰∏≠ÂèñÂÄºÔºåÁÑ∂ÂêéÂ∞ÜËøô‰∫õÂÄºÂ°´ÂÖÖÂà∞ @code{awk_array_t} Á±ªÂûãÁöÑÁªìÊûúÊï∞ÁªÑ‰∏≠„ÄÇËøô‰∏™Â∑•‰ΩúÁî±‰∏Ä‰∏™ÂçïÁã¨ÁöÑÂáΩÊï∞Êù•ÂÆåÊàêÔºå‰∏∫ @command{gawk} Êèê‰æõ @code{stat()} ÂáΩÊï∞ÊîØÊåÅÔºå‰πüÊîØÊåÅ @code{fts()} Êâ©Â±ï„ÄÇ Ëøô‰∏™Êâ©Â±ï‰πüÂåÖÂê´Âú®Âêå‰∏Ä‰∏™Êñá‰ª∂‰∏≠Ôºå‰ΩÜÊòØÂÆÉÁöÑ‰ª£Á†ÅÊ≤°ÊúâÂú®ËøôÊó∂ÊòæÁ§∫ÔºàÊü•Áúã @pxref{Extension Sample File Functions}Ôºâ„ÄÇ

Ëøô‰∏™ÂáΩÊï∞ÁöÑÁ¨¨‰∏ÄÈÉ®ÂàÜÊòØÂèòÈáèÂ£∞ÊòéÔºåÂåÖÂê´Â∞ÜÊñá‰ª∂Á±ªÂûãÂΩ±Â∞ÑÂà∞Â≠ó‰∏≤ÁöÑË°®Ôºö

@example
/* fill_stat_array --- do the work to fill an array with stat info */

static int
fill_stat_array(const char *name, awk_array_t array, struct stat *sbuf)
@{
    char *pmode;    /* printable mode */
    const char *type = "unknown";
    awk_value_t tmp;
    static struct ftype_map @{
        unsigned int mask;
        const char *type;
    @} ftype_map[] = @{
        @{ S_IFREG, "file" @},
        @{ S_IFBLK, "blockdev" @},
        @{ S_IFCHR, "chardev" @},
        @{ S_IFDIR, "directory" @},
#ifdef S_IFSOCK
        @{ S_IFSOCK, "socket" @},
#endif
#ifdef S_IFIFO
        @{ S_IFIFO, "fifo" @},
#endif
#ifdef S_IFLNK
        @{ S_IFLNK, "symlink" @},
#endif
#ifdef S_IFDOOR /* Solaris weirdness */
        @{ S_IFDOOR, "door" @},
#endif /* S_IFDOOR */
    @};
    int j, k;
@end example

ÁÑ∂ÂêéÁõÆÊ†áÊï∞ÁªÑ‰πüË¢´Â£∞Êòé‰∫ÜÔºåÂêéÈù¢ÁöÑ‰ª£Á†ÅÊ†πÊçÆ @code{struct stat} ‰∏≠ÁöÑÂÄºÊù•Â°´ÂÖÖ‰∏çÂêåÁöÑÂÖÉÁ¥†Ôºö

@example
    /* empty out the array */
    clear_array(array);

    /* fill in the array */
    array_set(array, "name", make_const_string(name, strlen(name),
                                               & tmp));
    array_set_numeric(array, "dev", sbuf->st_dev);
    array_set_numeric(array, "ino", sbuf->st_ino);
    array_set_numeric(array, "mode", sbuf->st_mode);
    array_set_numeric(array, "nlink", sbuf->st_nlink);
    array_set_numeric(array, "uid", sbuf->st_uid);
    array_set_numeric(array, "gid", sbuf->st_gid);
    array_set_numeric(array, "size", sbuf->st_size);
    array_set_numeric(array, "blocks", sbuf->st_blocks);
    array_set_numeric(array, "atime", sbuf->st_atime);
    array_set_numeric(array, "mtime", sbuf->st_mtime);
    array_set_numeric(array, "ctime", sbuf->st_ctime);

    /* for block and character devices, add rdev,
       major and minor numbers */
    if (S_ISBLK(sbuf->st_mode) || S_ISCHR(sbuf->st_mode)) @{
        array_set_numeric(array, "rdev", sbuf->st_rdev);
        array_set_numeric(array, "major", major(sbuf->st_rdev));
        array_set_numeric(array, "minor", minor(sbuf->st_rdev));
    @}
@end example

@noindent
ÂáΩÊï∞ÁöÑÂêéÈù¢ÁöÑÈÉ®ÂàÜÁî®‰∫éÂêëÁõÆÊ†áÊï∞ÁªÑ‰∏≠ÈÄâÊã©ÊÄßÂú∞Ê∑ªÂä†‰∏Ä‰∫õÂÖÉÁ¥†ÔºåËøô‰∏™Ë¶Å‰æùËµñ‰∫éÊñá‰ª∂ÁöÑÁâπÂÆöÊàêÂëò‰ª•Âèä/ÊàñËÄÖÊñá‰ª∂Á±ªÂûã„ÄÇÂ¶ÇÊûúÊàêÂäüÔºåÂàôËøîÂõû 0 Ôºö

@example
#ifdef HAVE_STRUCT_STAT_ST_BLKSIZE
    array_set_numeric(array, "blksize", sbuf->st_blksize);
#endif /* HAVE_STRUCT_STAT_ST_BLKSIZE */

    pmode = format_mode(sbuf->st_mode);
    array_set(array, "pmode", make_const_string(pmode, strlen(pmode),
                                                & tmp));

    /* for symbolic links, add a linkval field */
    if (S_ISLNK(sbuf->st_mode)) @{
        char *buf;
        ssize_t linksize;

        if ((buf = read_symlink(name, sbuf->st_size,
                    & linksize)) != NULL)
            array_set(array, "linkval",
                      make_malloced_string(buf, linksize, & tmp));
        else
            warning(ext_id, _("stat: unable to read symbolic link `%s'"),
                    name);
    @}

    /* add a type field */
    type = "unknown";   /* shouldn't happen */
    for (j = 0, k = sizeof(ftype_map)/sizeof(ftype_map[0]); j < k; j++) @{
        if ((sbuf->st_mode & S_IFMT) == ftype_map[j].mask) @{
            type = ftype_map[j].type;
            break;
        @}
    @}

    array_set(array, "type", make_const_string(type, strlen(type), & tmp));

    return 0;
@}
@end example

@code{stat()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞‰πãÂâçÊ≤°ÊúâËÆ®ËÆ∫Âà∞„ÄÇËøô‰∏™ÂèÇÊï∞ÊòØÂèØÈÄâÁöÑ„ÄÇÂ¶ÇÊûúÂ≠òÂú®ÔºåÂàô‰ºöÂØºËá¥ @code{do_stat()} ‰ΩøÁî® @code{stat()} Ë∞ÉÁî®ËÄå‰∏çÊòØ @code{lstat()} Á≥ªÁªüË∞ÉÁî®„ÄÇËøôÊòØÈÄöËøáËøô‰∏™ÂáΩÊï∞ÊåáÈíàÊù•ÂÆåÊàêÁöÑÔºö@code{statfunc}„ÄÇ@code{statfunc} ‰ºöË¢´ÂàùÂßãÂåñ‰∏∫ @code{lstat()}ÔºàËÄå‰∏çÊòØ @code{stat()}ÔºâÔºå‰ª•Ê≠§Êù•Ëé∑ÂèñÊñá‰ª∂‰ø°ÊÅØÔºå‰ª•Èò≤Ê≠¢Êñá‰ª∂ÊòØ‰∏Ä‰∏™ËΩØÈìæÊé•„ÄÇ
‰ΩÜÊòØÔºåÂ¶ÇÊûúÂåÖÂê´‰∫ÜÁ¨¨‰∏â‰∏™ÂèÇÊï∞Ôºå@code{statfunc} ‰∏∫ËÆæÁΩÆ‰∏∫ @code{stat()} ÂáΩÊï∞ÁöÑÊåáÈíà„ÄÇ

‰∏ãÈù¢ÊòØ @code{do_stat()} ÂáΩÊï∞ÔºåÂÆÉÁöÑÂºÄÂßã‰πüÊòØ‰∏Ä‰∫õÂèòÈáèÂ£∞Êòé‰ª•ÂèäÂèÇÊï∞Ê£ÄÊü•Ôºö

@ignore
Changed message for page breaking. Used to be:
    "stat: called with incorrect number of arguments (%d), should be 2",
@end ignore
@example
/* do_stat --- provide a stat() function for gawk */

static awk_value_t *
do_stat(int nargs, awk_value_t *result)
@{
    awk_value_t file_param, array_param;
    char *name;
    awk_array_t array;
    int ret;
    struct stat sbuf;
    /* default is lstat() */
    int (*statfunc)(const char *path, struct stat *sbuf) = lstat;

    assert(result != NULL);

    if (nargs != 2 && nargs != 3) @{
        if (do_lint)
            lintwarn(ext_id,
               _("stat: called with wrong number of arguments"));
        return make_number(-1, result);
    @}
@end example

ÂêéÈù¢Êé•ÁùÄÁöÑÊòØÂÆûÈôÖÁöÑÂ∑•‰Ωú„ÄÇÂáΩÊï∞ÂÖàÂèñÂæóÂèÇÊï∞ÔºåÊé•‰∏ãÊù•ÔºåÂÆÉ‰ºöÂèñÂæóÊñá‰ª∂ÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúË∞ÉÁî®ÁöÑÂáΩÊï∞Ôºà@code{lstat()} ÊàñËÄÖ @code{stat()}ÔºâËøîÂõû‰∏Ä‰∏™ÈîôËØØÔºåÂàô‰ª£Á†ÅËÆæÁΩÆ @code{ERRNO} ÁöÑÂÄºÁÑ∂ÂêéËøîÂõûÔºö

@example
    /* file is first arg, array to hold results is second */
    if (   ! get_argument(0, AWK_STRING, & file_param)
        || ! get_argument(1, AWK_ARRAY, & array_param)) @{
        warning(ext_id, _("stat: bad parameters"));
        return make_number(-1, result);
    @}

    if (nargs == 3) @{
        statfunc = stat;
    @}

    name = file_param.str_value.str;
    array = array_param.array_cookie;

    /* always empty out the array */
    clear_array(array);

    /* stat the file; if error, set ERRNO and return */
    ret = statfunc(name, & sbuf);
    if (ret < 0) @{
        update_ERRNO_int(errno);
        return make_number(ret, result);
    @}
@end example

ÂÖ∂‰ªñÁöÑÂÜóÈïøÁöÑÂ∑•‰ΩúÁî± @code{fill_stat_array()} Êù•ÂÆåÊàêÔºåËøô‰∏™Â∑≤ÁªèÂú®ÂâçÈù¢Âá∫Áé∞Ëøá„ÄÇÂΩìÂÆåÊàêÊó∂ÔºåÂáΩÊï∞ËøîÂõû‰ªé @code{fill_stat_array()} ÂáΩÊï∞‰∏≠ËøîÂõûÁöÑÂÄºÔºö

@example
    ret = fill_stat_array(name, array, & sbuf);

    return make_number(ret, result);
@}
@end example

ÊúÄÂêéÔºåÊúâÂøÖÈ°ªÊèê‰æõ‰∏Ä‰∫õ‚ÄúËÉ∂Ê∞¥‚ÄùÊù•Â∞ÜÊñ∞ÁöÑÂáΩÊï∞Ë£ÖÂÖ• @command{gawk}„ÄÇ

@code{filefuncs} Êâ©Â±ï‰πüÊèê‰æõ‰∫Ü‰∏Ä‰∏™ @code{fts()} ÂáΩÊï∞ÔºåËøô‰∏™ÂáΩÊï∞Âú®ËøôÈáåËøõË°å‰∫ÜÁúÅÁï•ÔºàÊü•Áúã @pxref{Extension Sample File Functions}Ôºâ„ÄÇÁî±‰∫éËøô‰∏™ÂéüÂõ†ÔºåÊúâ‰∏Ä‰∏™ÂàùÂßãÂåñÂáΩÊï∞Ôºö

@example
/* init_filefuncs --- initialization routine */

static awk_bool_t
init_filefuncs(void)
@{
    @dots{}
@}
@end example

Âà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÂ∞±Â∑Æ‰∏çÂ§öÂÆåÊàê‰∫Ü„ÄÇÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™ @code{awk_ext_func_t} ÁªìÊûÑÁöÑÊï∞ÁªÑÁî®Êù•Ë£ÖËΩΩÊØè‰∏™‰∏Ä‰∏™ÂáΩÊï∞Âà∞ @command{gawk} ‰∏≠Ôºö

@example
static awk_ext_func_t func_table[] = @{
    @{ "chdir", do_chdir, 1 @},
    @{ "stat",  do_stat, 2 @},
#ifndef __MINGW32__
    @{ "fts",   do_fts, 3 @},
#endif
@};
@end example

ÊØè‰∏™ÊåáÈíàÈÉΩÂøÖÈ°ªÊúâ‰∏Ä‰∏™‰æãÁ®ãÂêç‰∏∫ @code{dl_load()} Êù•ËΩΩÂÖ•ÊâÄÊúâË¶ÅË¢´ËΩΩÂÖ•ÁöÑ‰∏úË•ø„ÄÇÊúÄÁÆÄÂçïÁöÑÊñπÊ≥ïÊòØ‰ΩøÁî® @file{gawkapi.h} ‰∏≠ÁöÑ @code{dl_load_func()} ÂÆèÔºö

@example
/* define the dl_load() function using the boilerplate macro */

dl_load_func(func_table, filefuncs, "")
@end example

‰ª•‰∏äÂç≥ÊòØÊâÄÊúâ‰ª£Á†ÅÔºÅ 

@node Using Internal File Ops
@subsection Êï¥ÂêàÊâ©Â±ï

@cindex @command{gawk}, interpreter@comma{} adding code to
Áé∞Âú®‰ª£Á†ÅÂ∑≤ÁªèÂÜôÂú®Ôºå‰ΩÜÊòØÈúÄË¶ÅËÉΩÂ§üÂú® @command{gawk} Ëß£ÈáäÂô®ËøêË°åÁöÑÊó∂ÂÄôÔºåÂ∞ÜÂÖ∂ËΩΩÂÖ•„ÄÇÈ¶ñÂÖàÔºå‰ª£Á†ÅÊòØÈúÄË¶ÅÁºñËØëÁöÑ„ÄÇÂÅáÂÖÖÂáΩÊï∞Âú®‰∏Ä‰∏™Âêç‰∏∫ @file{filefuncs.c} ÁöÑÊñá‰ª∂‰∏≠ÔºåËÄå @var{idir} ÊòØ @file{gawkapi.h} Â§¥Êñá‰ª∂ÊâÄÂú®ÁöÑ‰ΩçÁΩÆ„ÄÇ‰∏ãÈù¢ÁöÑÊ≠•È™§ Áî®Êù•ÂàõÂª∫‰∏Ä‰∏™ GNU/Linux ÂÖ±‰∫´Â∫ìÔºö
@footnote{Âú®ÂÆûË∑µ‰∏≠Ôºå‰Ω†ÂèØËÉΩÊÉ≥‰ΩøÁî® GNU AutotoolsÔºàAutomakeÔºåAutoconfÔºåLibtoolÔºå‰ª•Âèä @command{gettext}ÔºâÊù•ÈÖçÁΩÆÂèäÊûÑÂª∫‰Ω†ÁöÑÂ∫ì„ÄÇÂ¶Ç‰ΩïÊù•ÂÅöË∂ÖÂá∫‰∫ÜÊú¨@value{DOCUMENT}ÁöÑËåÉÂõ¥„ÄÇÊü•Áúã @xref{gawkextlib}ÔºåÊù•Ëé∑ÂèñËøô‰∫õÂ∑•ÂÖ∑ÁöÑÂú∞ÂùÄ„ÄÇ}

@example
$ @kbd{gcc -fPIC -shared -DHAVE_CONFIG_H -c -O -g -I@var{idir} filefuncs.c}
$ @kbd{gcc -o filefuncs.so -shared filefuncs.o}
@end example

Â∫ì‰∏ÄÊó¶ÁîüÊàêÔºåÂ∞±ÂèØ‰ª•ÈÄöËøá @code{@@load} ÂÖ≥ÈîÆÂ≠óÊù•ËøõË°åËΩΩÂÖ•Ôºö

@example
# file testff.awk
@@load "filefuncs"

BEGIN @{
    "pwd" | getline curdir  # save current directory
    close("pwd")

    chdir("/tmp")
    system("pwd")   # test it
    chdir(curdir)   # go back

    print "Info for testff.awk"
    ret = stat("testff.awk", data)
    print "ret =", ret
    for (i in data)
        printf "data[\"%s\"] = %s\n", i, data[i]
    print "testff.awk modified:",
        strftime("%m %d %Y %H:%M:%S", data["mtime"])

    print "\nInfo for JUNK"
    ret = stat("JUNK", data)
    print "ret =", ret
    for (i in data)
        printf "data[\"%s\"] = %s\n", i, data[i]
    print "JUNK modified:", strftime("%m %d %Y %H:%M:%S", data["mtime"])
@}
@end example

@env{AWKLIBPATH} ÁéØÂ¢ÉÂèòÈáèÁî®Êù•ÂëäÁü• @command{gawk} Âà∞Âì™ÈáåÂéªÊü•ÁúãÊâ©Â±ïÔºàÊü•Áúã @pxref{Finding Extensions}Ôºâ„ÄÇÊàë‰ª¨Â∞ÜÂÖ∂ËÆæÁΩÆ‰∏∫ÂΩìÂâçÁõÆÂΩïÂπ∂ÊâßË°åÁ®ãÂ∫èÔºö

@example
$ @kbd{AWKLIBPATH=$PWD gawk -f testff.awk}
@print{} /tmp
@print{} Info for testff.awk
@print{} ret = 0
@print{} data["blksize"] = 4096
@print{} data["devbsize"] = 512
@print{} data["mtime"] = 1412004710
@print{} data["mode"] = 33204
@print{} data["type"] = file
@print{} data["dev"] = 2053
@print{} data["gid"] = 1000
@print{} data["ino"] = 10358899
@print{} data["ctime"] = 1412004710
@print{} data["blocks"] = 8
@print{} data["nlink"] = 1
@print{} data["name"] = testff.awk
@print{} data["atime"] = 1412004716
@print{} data["pmode"] = -rw-rw-r--
@print{} data["size"] = 666
@print{} data["uid"] = 1000
@print{} testff.awk modified: 09 29 2014 18:31:50
@print{}
@print{} Info for JUNK
@print{} ret = -1
@print{} JUNK modified: 01 01 1970 02:00:00
@end example

@node Extension Samples
@section @command{gawk} ÂèëË°åÁâàÊú¨‰∏≠ÁöÑ‰æãÂ≠êÊâ©Â±ï
@cindex extensions distributed with @command{gawk}

Ëøô‰∏Ä@value{SECTION}Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑ‰æãÂ≠êÊâ©Â±ïÁöÑÊ¶ÇÂÜµÔºå‰æãÂ≠ê‰∏é @command{gawk} ÁâàÊú¨‰∏ÄËµ∑ÂèëÂ∏É„ÄÇÂÆÉ‰ª¨‰∏≠ÁöÑ‰∏Ä‰∫õÂ∞±ÊòØÁî®‰∫éÁîü‰∫ßÁõÆÁöÑÁöÑÔºàÂ¶Ç @code{filefuncs}Ôºå@code{readdir}Ôºå‰ª•Âèä @code{inplace} Êâ©Â±ïÔºâ„ÄÇÂÖ∂‰ªñÁöÑ‰∏ªË¶ÅÊòØ‰∏Ä‰∫õ‰æãÂ≠ê‰ª£Á†ÅÔºå‰ª•Á§∫ËåÉÂ¶Ç‰ΩïÊù•‰ΩøÁî®Êâ©Â±ï API„ÄÇ

@menu
* Extension Sample File Functions::   The file functions sample.
* Extension Sample Fnmatch::          An interface to @code{fnmatch()}.
* Extension Sample Fork::             An interface to @code{fork()} and other
                                      process functions.
* Extension Sample Inplace::          Enabling in-place file editing.
* Extension Sample Ord::              Character to value to character
                                      conversions.
* Extension Sample Readdir::          An interface to @code{readdir()}.
* Extension Sample Revout::           Reversing output sample output wrapper.
* Extension Sample Rev2way::          Reversing data sample two-way processor.
* Extension Sample Read write array:: Serializing an array to a file.
* Extension Sample Readfile::         Reading an entire file into a string.
* Extension Sample Time::             An interface to @code{gettimeofday()}
                                      and @code{sleep()}.
* Extension Sample API Tests::        Tests for the API.
@end menu

@node Extension Sample File Functions
@subsection ‰∏éÊñá‰ª∂Áõ∏ÂÖ≥ÁöÑÂáΩÊï∞

@code{filefuncs} Êâ©Â±ïÊèê‰æõ‰∫Ü‰∏çÂêåÁöÑÂáΩÊï∞ÔºåÂÖ∂‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö

@table @asis
@item @code{@@load "filefuncs"}
Â¶Ç‰ΩïÊù•Ë£ÖËΩΩÊâ©Â±ï„ÄÇ

@cindex @code{chdir()} extension function
@item @code{result = chdir("/some/directory")}
@code{chdir()} ÂáΩÊï∞Áõ¥Êé•ÊòØ @code{chdir()} Á≥ªÁªüË∞ÉÁî®ÁöÑÈí©Â≠êÂáΩÊï∞ÔºåÁî®Êù•Êõ¥ÊîπÂΩìÂâçÁõÆÂΩï„ÄÇÂ¶ÇÊûúÊàêÂäüÂàôËøîÂõû 0ÔºåÂ¶ÇÊûúÈîôËØØÂàôËøîÂõûË¥üÂÄº„ÄÇÂú®ÂêéÈù¢ÁöÑÊÉÖÂÜµËøò‰ºöÊõ¥Êñ∞ @code{ERRNO} ÁöÑÂÄº„ÄÇ

@cindex @code{stat()} extension function
@item @code{result = stat("/some/path", statdata} [@code{, follow}]@code{)}
@code{stat()} ÂáΩÊï∞Êèê‰æõ‰∫Ü @code{stat()} Á≥ªÁªüË∞ÉÁî®ÁöÑÈí©Â≠ê„ÄÇÂ¶ÇÊûúÊàêÂäüÔºåÂàôËøîÂõû 0ÔºåÂ¶ÇÊûúÂ§±Ë¥•ÂàôËøîÂõûË¥üÂÄº„ÄÇÂêéÂêéËøò‰ºöÊõ¥Êñ∞ @code{ERRNO}„ÄÇ

ÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÆÉ‰ΩøÁî®ÁöÑÊòØ @code{lstat()} ÁöÑÁ≥ªÁªüË∞ÉÁî®„ÄÇ‰ΩÜÊòØÔºåÂ¶ÇÊûú‰º†ÈÄí‰∫ÜÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÔºåÂàô‰ºö‰ΩøÁî® @code{stat()}„ÄÇ

ÊâÄÊúâÁöÑÊÉÖÂÜµ‰∏ãÔºåÂÆÉÈÉΩ‰ºöÊ∏ÖÈô§ @code{statdata} Êï∞ÁªÑ„ÄÇÂΩìË∞ÉÁî®ÊàêÂäüÊó∂Ôºå@code{stat()} ‰ºöÂú® @code{statdata} Êï∞ÁªÑ‰∏≠Â°´ÂÖÖ‰ªéÊñá‰ª∂Á≥ªÁªü‰∏≠ËøîÂõûÁöÑÂÄº„ÄÇÂ¶Ç‰∏ãÔºö

@multitable @columnfractions .15 .50 .20
@headitem ‰∏ãÊ†á @tab Stat ‰∏≠ÁöÑÂüü @code{struct stat} @tab Êñá‰ª∂Á±ªÂûã
@item @code{"name"} @tab The @value{FN} @tab All
@item @code{"dev"} @tab @code{st_dev} @tab All
@item @code{"ino"} @tab @code{st_ino} @tab All
@item @code{"mode"} @tab @code{st_mode} @tab All
@item @code{"nlink"} @tab @code{st_nlink} @tab All
@item @code{"uid"} @tab @code{st_uid} @tab All
@item @code{"gid"} @tab @code{st_gid} @tab All
@item @code{"size"} @tab @code{st_size} @tab All
@item @code{"atime"} @tab @code{st_atime} @tab All
@item @code{"mtime"} @tab @code{st_mtime} @tab All
@item @code{"ctime"} @tab @code{st_ctime} @tab All
@item @code{"rdev"} @tab @code{st_rdev} @tab Device files
@item @code{"major"} @tab @code{st_major} @tab Device files
@item @code{"minor"} @tab @code{st_minor} @tab Device files
@item @code{"blksize"} @tab @code{st_blksize} @tab All
@item @code{"pmode"} @tab ‰∫∫ÂèØËØªÁöÑÊ®°ÂºèÂÄºÂ≠ó‰∏≤ÔºåÂ¶Ç ls ÊâìÂç∞ÁöÑÊÉÖÂÜµÔºàÂ¶Ç @code{"-rwxr-xr-x"}Ôºâ @tab All
@item @code{"linkval"} @tab ËΩØÈìæÊé•ÁöÑÂÄº„ÄÇ @tab Symbolic links
@item @code{"type"} @tab Êñá‰ª∂Á±ªÂûãÂ≠ó‰∏≤Ë°®Á§∫‚Äî‚Äî
@code{"file"},
@code{"blockdev"},
@code{"chardev"},
@code{"directory"},
@code{"socket"},
@code{"fifo"},
@code{"symlink"},
@code{"door"},
ÊàñËÄÖ
@code{"unknown"}
ÂÖ∂‰∏≠‰πã‰∏Ä
ÔºàÂπ∂‰∏çÊòØÊâÄÊúâÁöÑÁ≥ªÁªüÈÉΩÊîØÊåÅËøô‰∫õÁ±ªÂûãÔºâ @tab All
@end multitable

@cindex @code{fts()} extension function
@item @code{flags = or(FTS_PHYSICAL, ...)}
@itemx @code{result = fts(pathlist, flags, filedata)}
ÈÅçÂéÜÁî± @code{pathlist} Êèê‰æõÁöÑÊñá‰ª∂Ê†ëÔºåÂπ∂Â°´ÂÖÖ @code{filedata} Êï∞ÁªÑÔºåÂ¶ÇÂêéÊâÄËø∞„ÄÇ@code{flags} ÊòØÂá†‰∏™È¢ÑÂÆö‰πâÂÄºÁöÑÊàñÔºå‰πüÂ¶ÇÂêéÊâÄËø∞„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÈîôËØØÔºåÂàôËøîÂõû 0ÔºåÈîôËØØÂàôËøîÂõû @minus{}1„ÄÇ
@end table

@code{fts()} ÂáΩÊï∞Êèê‰æõ‰∫Ü @code{C} Â∫ì‰∏≠ÁöÑ @code{fts()} ‰æãÁ®ãÁöÑÈí©Â≠êÔºåÁî®Êù•ÁõÆÂΩïÁªìÊûÑËøõË°åÈÅçÂéÜ„ÄÇÂÆÉ‰∏ç‰ºöÂú®ÊµÅ‰∏≠‰∏ÄÊ¨°ËøîÂõû‰∏Ä‰∏™Êñá‰ª∂ÁöÑÊï∞ÊçÆÔºåËÄåÊòØÂ∞ÜÂÖ∂‰ø°ÊÅØÂ°´ÂÖÖÂà∞‰∏Ä‰∏™Â§öÁª¥Êï∞ÁªÑ‰∏≠„ÄÇËøô‰∏™Êï∞ÁªÑ‰∏≠ÂåÖÊã¨Âú®ÈÅçÂéÜÁõÆÂΩïÁªìÊûÑÊó∂ÈÅáÂà∞ÁöÑÊØè‰∏™Êñá‰ª∂‰∏éÁõÆÂΩïÁöÑÁöÑÊï∞ÊçÆ„ÄÇ

ÂèÇÊï∞Â¶Ç‰∏ãÔºö

@table @code
@item pathlist
@value{FN}Êï∞ÁªÑ„ÄÇ‰ΩøÁî®ÁöÑÊòØÂÖÉÁ¥†ÁöÑÂÄºÔºåËÄå‰∏ç‰ΩøÁî®ÂÄºÁ¥¢Âºï„ÄÇ

@item flags
Ëøô‰∫õÊòØ‰∏ãÈù¢È¢ÑÂÆöÁöÑ‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™Â∏∏ÈáèÁöÑÊåâ‰ΩçÊàñ„ÄÇ@code{FTS_LOGICAL} ‰∏≠ @code{FTS_PHYSICAL} ÂøÖÈ°ªË¶ÅÊèê‰æõ‰∏Ä‰∏™ÔºåÂê¶Âàô @code{fts()} ‰ºöËøîÂõû‰∏Ä‰∏™ÈîôËØØÔºåÂπ∂ËÆæÁΩÆ @code{ERRNO}„ÄÇËøô‰∫õÊ†áÂøó‰∏∫Ôºö

@c nested table
@table @code
@item FTS_LOGICAL
ÊâßË°åÁöÑÊòØ‚ÄúÈÄªËæë‚Äù‰∏äÁöÑÊñá‰ª∂ÈÅçÂéÜÔºåÂú®Ëøô‰∏™ÊÉÖÂÜµ‰∏ãÈíàÂØπÈìæÊé•Êñá‰ª∂ËøîÂõûÁöÑ‰ø°ÊÅØÊòØË¢´ÊåáÂêëÊñá‰ª∂ÁöÑ‰ø°ÊÅØÔºåËÄå‰∏çÊòØÈìæÊé•Êñá‰ª∂Êú¨Ë∫´„ÄÇËøô‰∏™Ê†áÂøó‰∏é @code{FTS_PHYSICAL} ÊòØ‰∫íÊñ•ÁöÑ„ÄÇ

@item FTS_PHYSICAL
ÊâßË°å‰∏Ä‰∏™‚ÄúÁâ©ÁêÜ‚ÄùÁöÑÈÅçÂéÜÔºåÂÖ∂‰∏≠ÂØπ‰∫éËΩØËøûÊé•Êñá‰ª∂ÁöÑ‰ø°ÊÅØÊòØËΩØÈìæÊé•Êñá‰ª∂Êú¨Ë∫´ÁöÑ‰ø°ÊÅØ„ÄÇËøô‰∏™Ê†áÂøó‰∏é @code{FTS_LOGICAL} ÊòØ‰∫íÊñ•ÁöÑ„ÄÇ

@item FTS_NOCHDIR
‰Ωú‰∏∫ÊÄßËÉΩ‰∏äÁöÑ‰ºòÂåñÔºå@code{C} Â∫ì‰∏≠ÁöÑ @code{fts()} ‰æãÁ®ã‰ºöÊîπÂèòÂú®ÁõÆÂΩïÁªìÊûÑ‰∏≠ÈÅçÂéÜÊñá‰ª∂Êó∂ÁöÑÁõÆÂΩïÔºåËøô‰∏™Ê†áÂøó‰ºöÁ¶ÅÁî®Ëøô‰∏™‰ºòÂåñ„ÄÇ

@item FTS_COMFOLLOW
Áõ¥Êé•Ë∑üË∑üÈöè @code{pathlist} ‰∏≠ÂëΩÂêçÁöÑËΩØËøûÊé•Ôºå‰∏çÁÆ°ÊòØÂê¶ËÆæÁΩÆ‰∫Ü @code{FTS_LOGICAL} Ê†áÂøó„ÄÇ

@item FTS_SEEDOT
ÈªòËÆ§ÁöÑÊÉÖÂÜµ‰∏ãÔºå@code{C} Â∫ì‰∏≠ÁöÑ @code{fts()} ‰æãÁ®ã‰∏ç‰ºöËøîÂõû @file{.}ÔºàdotÔºâ‰ª•Âèä @file{..}Ôºàdot-dotÔºâÁõÆÂΩïÈ°π„ÄÇËøô‰∏™ÈÄâÈ°π‰ºö‰ΩøÂæó dot-dot È°π‰ºöË¢´ÂåÖÂê´ËøõÊù•„ÄÇÔºàÊâ©Â±ïÊÄªÊòØ‰ºöÂåÖÂê´ dot ÁöÑÈ°πÔºåÂêéÈù¢‰ºöÊúâÊõ¥Â§öÁöÑËØ¥Êòé„ÄÇÔºâ

@item FTS_XDEV
Âú®ÈÅçÂéÜËøáÁ®ã‰∏≠Ôºå‰∏çË∑®Ë∂ä‰∏çÂêåÁöÑÁöÑÊåÇËΩΩÁöÑÊñá‰ª∂Á≥ªÁªü„ÄÇ
@end table

@item filedata
@code{filedata} Êï∞ÁªÑÂ≠òÂÇ®ÁªìÊûú„ÄÇ@code{fts()} È¶ñÂÖà‰ºöÂ∞ÜÂÖ∂Ê∏ÖÈô§„ÄÇÁÑ∂Âêé‰ºöÂú® @code{filedata} ‰∏≠‰∏∫‰ºöÂú® @code{pathlist} ‰∏≠ÁöÑÊØè‰∏™ÂÖÉÁ¥†ÂàõÂª∫‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÁ¥¢ÂºïÂç≥ÊòØ @code{pathlist} ‰∏≠ÊâÄÁªôÁöÑÁõÆÂΩïÊàñËÄÖÊñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇËøô‰∏™Á¥¢Âºï‰∏ãÁöÑÂÖÉÁ¥†Êú¨Ë∫´ÊòØ‰∏Ä‰∏™Êï∞ÁªÑ„ÄÇÂ≠òÂú®‰∏§ÁßçÊÉÖÂÜµÔºö

@c nested table
@table @emph
@item Ë∑ØÂæÑÊòØ‰∏Ä‰∏™Êñá‰ª∂
Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊï∞ÁªÑÂåÖÂê´‰∏§‰∏™ÊàñËÄÖ‰∏â‰∏™ÂÖÉÁ¥†Ôºö

@c doubly nested table
@table @code
@item "path"
Ëøô‰∏™Êñá‰ª∂ÁöÑÂÖ®Ë∑ØÂæÑÔºåÂú® @code{pathlist} Êï∞ÁªÑ‰∏≠ÊòØ‰ªé‚ÄúÊ†π‚ÄùÂºÄÂßã„ÄÇ

@item "stat"
Ëøô‰∏™ÂÖÉÁ¥†Ëá™Â∑±ÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂåÖÂê´‰∏éÊó©ÂâçËÆ®ËÆ∫ÁöÑ @code{stat()} ÂáΩÊï∞Âú®Ëá™Â∑±ÁöÑ @code{statdata} ÂèÇÊï∞‰∏≠Â°´ÂÖÖÁöÑ‰∏ÄÊ†∑ÁöÑ‰ø°ÊÅØ„ÄÇÂ¶ÇÊûúÈíàÂØπÊñá‰ª∂ÁöÑÁ≥ªÁªüË∞ÉÁî® @code{stat()} ÂáΩÊï∞Â§±Ë¥•ÔºåÂàôÂèØËÉΩ‰∏çÂ≠òÂú®Ëøô‰∏™ÂÖÉÁ¥†„ÄÇ

@item "error"
Â¶ÇÊûúÂèë‰ªÄ‰πà‰∫ÜÊüêÁßçÈîôËØØÔºåÊï∞ÁªÑ‰πüÂåÖÂê´‰∏Ä‰∏™Âêç‰∏∫ ‚Äú@code{error}‚ÄùÁöÑÂÖÉÁ¥†ÔºåËøô‰∏™ÂÖÉÁ¥†ÊòØÊèèËø∞ÈîôËØØÁöÑÂ≠ó‰∏≤„ÄÇ
@end table

@item Ë∑ØÂæÑÊòØ‰∏Ä‰∏™ÁõÆÂΩï
Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÊï∞ÁªÑ‰∏∫ÊØè‰∏™ÁõÆÂΩïÁîüÊàê‰∏Ä‰∏™ÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúÁõ∏Â∫îÁöÑÈ°πÊòØÊñá‰ª∂ÔºåÂàôÂÖÉÁ¥†‰∏éÂàöÊâçÊèèËø∞ÁöÑÊñá‰ª∂Á±ªÂûãÁöÑÈ°π‰∏ÄÊ†∑„ÄÇÂ¶ÇÊûúÈ°πÊòØÁõÆÂΩïÔºåÂàôÂÖÉÁ¥†ÊòØ‰∏Ä‰∏™ÔºàÈÄíÂΩíÂú∞ÔºâÊèèËø∞Â≠êÁõÆÂΩïÁöÑÂÖÉÁ¥†„ÄÇÂ¶ÇÊûú @code{FTS_SEEDOT} Âú®Ê†áÂøó‰∏≠ËøõË°å‰∫ÜËÆæÁΩÆÔºåÂàô‰πü‰ºöÊàêÂú®ÂêçÂ≠ó‰∏∫ @code{".."} ÁöÑÂÖÉÁ¥†„ÄÇËøô‰∏™ÂÖÉÁ¥†‰πü‰ºöÊòØ‰∏Ä‰∏™Êï∞ÁªÑÔºåÂåÖÂê´‰∫Ü‰ªé @code{stat()} Ë∞ÉÁî®‰∏≠Êèê‰æõÁöÑ‰ø°ÊÅØ„ÄÇ

Âè¶Â§ñÔºå‰πüÊúâ‰∏Ä‰∏™ÂÖÉÁ¥†ÔºåÂÖ∂Á¥¢Âºï‰∏∫ @code{"."}„ÄÇËøô‰∏™ÂÖÉÁ¥†ÊòØ‰∏Ä‰∏™ÂåÖÂê´‰∏∫Êñá‰ª∂Êèê‰æõÁöÑ‰∏§‰∏™ÊàñËÄÖ‰∏â‰∏™ÂÖÉÁ¥†ÁöÑÊï∞ÁªÑ„ÄÇÂÆÉ‰ª¨ÊòØÔºå@code{"path"}Ôºå@code{"stat"}Ôºå@code{"error"}„ÄÇ
@end table
@end table

Â¶ÇÊûúÊ≤°ÊúâÂá∫ÈîôÔºå@code{fts()} ÂáΩÊï∞ËøîÂõû 0ÔºåÂê¶ÂàôËøîÂõû @minus{}1„ÄÇ

@quotation ÊèêÁ§∫
@code{fts()} Êâ©Â±ïÂπ∂‰∏çÊòØ @code{C} Â∫ì‰∏≠ÁöÑÂáΩÊï∞ @code{fts()} ÂÆåÂÖ®ÁöÑÊ®°ÊãüÔºåÈÄâÊã©Êèê‰æõÂü∫‰∫éÂÖ≥ËÅîÊï∞ÁªÑÁöÑÊé•Âè£ÔºåÊòØÂú®‰∫éÂú® @command{awk} ‰∏≠‰ΩøÁî®Ëµ∑Êù•Êõ¥Êñπ‰æø„ÄÇËøôÈáåÁº∫Â∞ëÊØîËæÉÂáΩÊï∞ÔºåÂõ†‰∏∫ @command{gawk} Â∑≤ÁªèÊèê‰æõ‰∫ÜÈùûÂ∏∏Âº∫Â§ßÁöÑÊï∞ÁªÑÊéíÂ∫èÂäüËÉΩ„ÄÇÂ∞ΩÁÆ°ÂÉè @code{fts_read()} ËøôÊ†∑ÁöÑÊé•Âè£Êú¨Êù•Â∫îËØ•Êèê‰æõÔºå‰ΩÜÊòØÊØîËµ∑ÂàõÂª∫‰∏Ä‰∏™Â§öÁª¥Êï∞ÁªÑÊù•Ë°®Á§∫Êñá‰ª∂ÁöÑÁõÆÂΩïÁªìÊûÑ‰ª•ÂèäÂÖ∂‰ø°ÊÅØÊù•ÔºåÂÆÉÊ≤°ÊúâËøô‰πàËá™ÁÑ∂„ÄÇ
@end quotation

Êü•Áúã @command{gawk} ÂèëÈù¢ÁâàÊú¨‰∏≠ÁöÑ @file{test/fts.awk} Êñá‰ª∂Êù•Ëé∑Âèñ‰ΩøÁî® @code{fts()} Êâ©Â±ïÂáΩÊï∞ÁöÑ‰æãÂ≠ê„ÄÇ

@node Extension Sample Fnmatch
@subsection ÈíàÂØπ @code{fnmatch()}„ÄÄÁöÑÊé•Âè£

Ëøô‰∏™Êâ©Â±ïÊèê‰æõ‰∫Ü @code{C} Â∫ìÊé•Âè£ @code{fnmatch()} ÂáΩÊï∞Ôºå‰ΩøÁî®ÊñπÊ≥ï‰∏∫Ôºö

@table @code
@item @@load "fnmatch"
Â¶Ç‰ΩïÊù•Ë£ÖËΩΩËøô‰∏™Êâ©Â±ï„ÄÇ

@cindex @code{fnmatch()} extension function
@item result = fnmatch(pattern, string, flags)
ÊàêÂäüÊó∂ÔºåËøîÂõûÂÄº‰∏∫ 0ÔºåÂ¶ÇÊûúÂ≠ó‰∏≤‰∏çÂåπÈÖçËøô‰∏™Ê®°ÂºèÂàôËøîÂõû @code{FNM_NOMATCH}ÔºåÂ¶ÇÊûúÂá∫ÈîôÔºåÂàôËøîÂõû‰∏çÂêåÁöÑÈùûÈõ∂ÂÄº„ÄÇ
@end table

ÂÖ≥‰∫é @code{fnmatch()} ÂáΩÊï∞ÁöÑ‰∏Ä‰∫õÂÖ∂‰ªñ‰ø°ÊÅØÔºå@code{fnmatch} Êâ©Â±ïÂàôÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™Â∏∏Êï∞Ôºà@code{FNM_NOMATCH}ÔºâÔºå‰ª•Âèä‰∏Ä‰∏™Âêç‰∏∫ @code{FNM} ÁöÑÊï∞ÁªÑÊ†áÂøóÂÄº„ÄÇ

@code{fnmatch()} ÁöÑÂèÇÊï∞ÊúâÔºö

@table @code
@item pattern
Ë¶ÅÂåπÈÖçÁöÑ@value{FN}ÁöÑÈÄöÈÖçÁ¨¶„ÄÇ

@item string
@value{FN}‰∏≤„ÄÇ

@item flag
Ë¶Å‰πà 0ÔºåË¶Å‰πàÊòØ @code{FNM} Êï∞ÁªÑ‰∏≠Â§ö‰∏™ÂÄºÁöÑÁõ∏Êàñ„ÄÇ
@end table

Ê†áÂøóÂ¶Ç‰∏ãÔºö

@multitable @columnfractions .25 .75
@headitem Êï∞ÁªÑÂÖÉÁ¥† @tab @code{fnmatch()} ÊâÄÂÆö‰πâÁöÑÂØπÂ∫îÊ†áÂøó
@item @code{FNM["CASEFOLD"]} @tab @code{FNM_CASEFOLD}
@item @code{FNM["FILE_NAME"]} @tab @code{FNM_FILE_NAME}
@item @code{FNM["LEADING_DIR"]} @tab @code{FNM_LEADING_DIR}
@item @code{FNM["NOESCAPE"]} @tab @code{FNM_NOESCAPE}
@item @code{FNM["PATHNAME"]} @tab @code{FNM_PATHNAME}
@item @code{FNM["PERIOD"]} @tab @code{FNM_PERIOD}
@end multitable

‰æãÂ≠êÂ¶Ç‰∏ãÔºö

@example
@@load "fnmatch"
@dots{}
flags = or(FNM["PERIOD"], FNM["NOESCAPE"])
if (fnmatch("*.a", "foo.c", flags) == FNM_NOMATCH)
    print "no match"
@end example

@node Extension Sample Fork
@subsection ÈíàÂØπ @code{fork()}Ôºå@code{wait()}Ôºå‰∏é @code{waitpid()} ÁöÑÊé•Âè£

@code{fork} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏â‰∏™ÂáΩÊï∞ÔºåÂ¶Ç‰∏ãÔºö

@table @code
@item @@load "fork"
Â¶Ç‰ΩïÊù•Ë£ÖÂÖ•Êâ©Â±ï„ÄÇ

@cindex @code{fork()} extension function
@item pid = fork()
Ëøô‰∏™ÂáΩÊï∞ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑËøõÁ®ã„ÄÇËøîÂõûÂÄºÂú®Â≠êËøõÁ®ã‰∏≠ËøîÂõû‰∏∫ 0ÔºåÂú®Áà∂ËøõÁ®ã‰∏≠ËøîÂõûÁöÑÊòØÂ≠êËøõÁ®ãÁöÑËøõÁ®ã @code{ID}ÔºåÊàñËÄÖÂá∫ÈîôÁöÑÊÉÖÂÜµ‰∏ã‰∏∫ @minus{}1„ÄÇÂú®ÂêéÈù¢ÁöÑÊÉÖÂÜµÔºå@code{ERRNO} Áî®Êù•ÊåáÁ§∫Âá∫ÈîôÁöÑÂéüÂõ†„ÄÇÂú®Â≠êËøõÁ®ã‰∏≠Ôºå@code{PROCINFO["pid"]} ‰ª•Âèä @code{PROCINFO["ppid"]} ‰ºöË¢´Êõ¥Êñ∞Áî®‰ª•ÂèçÊò†Ê≠£Á°ÆÁöÑÂÄº„ÄÇ

@cindex @code{waitpid()} extension function
@item ret = waitpid(pid)
Ëøô‰∏™ÂáΩÊï∞ÂèñÊï∞ÂÄºÂèÇÊï∞ÔºåÂç≥Ë¶ÅÁ≠âÂæÖÁöÑËøõÁ®ãÁöÑ @code{ID}„ÄÇËøîÂõûÂÄºÊòØ @code{waitpid()} Á≥ªÁªüË∞ÉÁî®ÁöÑÂÄº„ÄÇ

@cindex @code{wait()} extension function
@item ret = wait()
Ëøô‰∏™ÂáΩÊï∞Á≠âÂæÖÁ¨¨‰∏Ä‰∏™Â≠êËøõÁ®ãÊ≠ª‰∫°„ÄÇËøîÂõûÂÄºÊòØ @code{wait()} Á≥ªÁªüË∞ÉÁî®ÁöÑËøîÂõûÂÄº„ÄÇ
@end table

Ê≤°ÊúâÁõ∏Â∫îÁöÑ @code{exec()} ÂáΩÊï∞„ÄÇ

‰∏ãÈù¢ÊòØ‰æãÂ≠êÔºö

@example
@@load "fork"
@dots{}
if ((pid = fork()) == 0)
    print "hello from the child"
else
    print "hello from the parent"
@end example

@node Extension Sample Inplace
@subsection ÂêØÁî®Êñá‰ª∂Â∞±Âú∞ÁºñËæë

@cindex @code{inplace} extension
@code{inplace} Êâ©Â±ïÊ®°Êãü GNU @command{sed} ÁöÑ @option{-i} ÈÄâÈ°πÔºåËøô‰∏™ÈÄâÈ°πË°®Á§∫ÂØπÊØè‰∏™ËæìÂÖ•Êñá‰ª∂ËøõË°å‚ÄúÂ∞±Âú∞‚ÄùÁºñËæë„ÄÇÂÆÉ‰ΩøÁî®ÊâìÂåÖÊñá‰ª∂ @file{inplace.awk}ÔºåÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜË¶ÅË∞ÉÁî®ÁöÑÊâ©Â±ïÁöÑÈÄÇÂΩìÊñá‰ª∂Ôºö

@example
@c file eg/lib/inplace.awk
@group
# inplace --- load and invoke the inplace extension.

@@load "inplace"

# Please set INPLACE_SUFFIX to make a backup copy.  For example, you may
# want to set INPLACE_SUFFIX to .bak on the command line or in a BEGIN rule.

# By default, each filename on the command line will be edited inplace.
# But you can selectively disable this by adding an inplace=0 argument
# prior to files that you do not want to process this way.  You can then
# reenable it later on the commandline by putting inplace=1 before files
# that you wish to be subject to inplace editing.

# N.B. We call inplace_end() in the BEGINFILE and END rules so that any
# actions in an ENDFILE rule will be redirected as expected.

BEGIN @{
    inplace = 1		# enabled by default
@}

BEGINFILE @{
    if (_inplace_filename != "")
        inplace_end(_inplace_filename, INPLACE_SUFFIX)
    if (inplace)
        inplace_begin(_inplace_filename = FILENAME, INPLACE_SUFFIX)
    else
        _inplace_filename = ""
@}

END @{
    if (_inplace_filename != "")
        inplace_end(_inplace_filename, INPLACE_SUFFIX)
@}
@end group
@c endfile
@end example

ÂØπ‰∫éË¶ÅÂ§ÑÁêÜÁöÑÊØè‰∏Ä‰∏™Â∏∏ËßÑÊñá‰ª∂ÔºåÊâ©Â±ïÈáçÂÆöÂêëËæìÂá∫Âà∞‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂‰∏≠ÔºåÂÖ∂‰∏éÂéüÂßãÁöÑÊñá‰ª∂ÂÖ∑ÊúâÁõ∏ÂêåÊâÄÊúâÊùÉ‰ª•ÂèäËÆøÈóÆÊùÉÈôê„ÄÇÂú®Â§ÑÁêÜ‰∫ÜÁõ∏Â∫îÁöÑÊñá‰ª∂ÂêéÔºåÊâ©Â±ï‰ºöÊÅ¢Â§çÊ†áÂáÜËæìÂá∫Âà∞ÂéüÊù•ÁöÑÁõÆÊ†á„ÄÇÂ¶ÇÊûú @code{INPLACE_SUFFIX} ‰∏ç‰∏∫Á©∫‰∏≤ÔºåÂàôÂàùÂßãÊñá‰ª∂Â∞ÜÂêéÁºÄËÅîÂêàÂàõÂª∫‰∏Ä‰∏™Â§á‰ªΩÊñá‰ª∂„ÄÇÊúÄÂêéÔºå‰∏¥Êó∂Êñá‰ª∂Ë¢´ÈáçÊñ∞ÂëΩÂêç‰∏∫ÂàùÂßãÊñá‰ª∂„ÄÇ

Ê≥®ÊÑèÔºåÂú®‰ΩøÁî®Ëøô‰∏™ÁâπÊÄßÁöÑÊó∂ÂÄôÔºåÂèØ‰ª•ÈÄöËøáÂú®ÂëΩ‰ª§Ë°å‰∏≠Êää @samp{inplace=0} ÊîæÂú®‰∏çÈúÄË¶ÅËøôÊ†∑Â§ÑÁêÜÁöÑÊñá‰ª∂ÂàóË°®‰πãÂâçÔºåÊù•ÊéßÂà∂Ëøô‰∏™ÁâπÊÄß„ÄÇ‰Ω†ÂèØ‰ª•ÈÄöËøáÂú®ÈúÄË¶ÅËøô‰πàÂ§ÑÁêÜÁöÑÊñá‰ª∂ÂàóË°®ÂâçÂä†‰∏ä @samp{inplace=1} ÂèÇÊï∞Êù•ÈáçÊñ∞ÂêØÁî®Ëøô‰∏™ÁâπÊÄß„ÄÇ

@code{_inplace_filename} ÂèòÈáèÁî®Êù•Ë∑üË∏™ÂΩìÂâçÁöÑÊñá‰ª∂ÂêçÔºåËøôÊ†∑‰∏çÁî®Âú®Â§ÑÁêÜÁ¨¨‰∏Ä‰∏™Êñá‰ª∂Êó∂Ë∞ÉÁî® @code{inplace_end()}„ÄÇ

Â¶ÇÊûúÂá∫Áé∞ÁöÑÈîôËØØÔºåÊâ©Â±ï‰ºöÁîüÊàê‰∏Ä‰∏™Ëá¥ÂëΩÈîôËØØÔºå‰ª•Á´ãÂç≥ÁªìÊùüÂ§ÑÁêÜÔºå‰∏ç‰ºöÂØπÂéüÂßãÊñá‰ª∂ÈÄ†ÊàêÁ†¥Âùè„ÄÇ

ËøôÊòØ‰∏Ä‰∫õÁÆÄÂçïÁöÑ‰æãÂ≠êÔºö

@example
$ @kbd{gawk -i inplace '@{ gsub(/foo/, "bar") @}; @{ print @}' file1 file2 file3}
@end example

‰∏∫‰∫Ü‰øùÂ≠òÂéüÊñá‰ª∂ÁöÑ‰∏Ä‰∏™Â§á‰ªΩÂ§çÊú¨ÔºåÂèØ‰ª•Ëøô‰πàÊâßË°åÔºö

@example
$ @kbd{gawk -i inplace -v INPLACE_SUFFIX=.bak '@{ gsub(/foo/, "bar") @}}
> @kbd{@{ print @}' file1 file2 file3}
@end example

ËØ∑Ê≥®ÊÑèÔºåÂ∞ΩÁÆ°Ëøô‰∏™Êâ©Â±ïËØïÂõæ‰øùÂ≠òÂéüÂßãÊñá‰ª∂ÁöÑÊâÄÊúâÊùÉÂíåËÆ∏ÂèØÔºå‰ΩÜÊòØÂÆÉ‰∏ç‰ºöËØïÂõæÊã∑Ë¥ùÂéüÂßãÊñá‰ª∂ÁöÑ ACL„ÄÇ

Â¶ÇÊûúÁ®ãÂ∫èËøáÊó©Âú∞ÁªàÊ≠¢‰∫ÜÔºåÊØîÂ¶ÇÂèØËÉΩÊî∂Âà∞‰∫ÜÊú™Â§ÑÁêÜÁöÑ‰ø°Âè∑ÔºåÂèØËÉΩ‰ºöÁïô‰∏ã‰∏Ä‰∏™‰∏¥Êó∂Êñá‰ª∂„ÄÇ

@node Extension Sample Ord
@subsection  Â≠óÁ¨¶‰∏éÊï∞ÂÄºÔºö@code{ord()} ‰∏é @code{chr()}

@code{ordchr} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏§‰∏™ÂáΩÊï∞ÔºåÂêçÂ≠ó‰∏∫ @code{ord()} ‰∏é @code{chr()}ÔºåÂ¶Ç‰∏ãÔºö

@table @code
@item @@load "ordchr"
ËøôÈáåÁî®Êù•ËøõË°åÊâ©Â±ïË£ÖËΩΩ„ÄÇ

@cindex @code{ord()} extension function
@item number = ord(string)
ËøîÂõû @code{string} ‰∏≠Á¨¨‰∏Ä‰∏™Â≠óÁ¨¶ÁöÑÊï∞ÂÄºÂÄº„ÄÇ

@cindex @code{chr()} extension function
@item char = chr(number)
ËøîÂõûÁ¨¨‰∏Ä‰∏™Â≠óÊØçÊòØÁî±Êï∞ÂÄºÔºà@code{number}ÔºâË°®Á§∫ÁöÑÂ≠ó‰∏≤„ÄÇ
@end table

Ëøô‰∫õÂáΩÊï∞Áî± Pascal ËØ≠Ë®ÄÁöÑÂêåÂêçÂáΩÊï∞ÂÄüÁî®ËÄåÊù•„ÄÇ‰∏ãÈù¢ÊòØ‰æãÂ≠êÔºö

@example
@@load "ordchr"
@dots{}
printf("The numeric value of 'A' is %d\n", ord("A"))
printf("The string value of 65 is %s\n", chr(65))
@end example

@node Extension Sample Readdir
@subsection  ËØªÂèñÁõÆÂΩï

@code{readdir} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ÁõÆÂΩïÁöÑËæìÂÖ•ÂàÜÊûêÂô®ÔºåÂÖ∂‰ΩøÁî®Â¶Ç‰∏ãÔºö

@cindex @code{readdir} extension
@example
@@load "readdir"
@end example

ÂΩì‰ΩøÁî®Ëøô‰∏™Êâ©Â±ïÊó∂ÔºåÂÆÉ‰∏ç‰ºöË∑≥ËøáÂú®ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÁõÆÂΩïÔºàÊàñËÄÖ‰πü‰∏ç‰ºöÂú® @code{getline} ‰∏≠Ë∑≥ËøáÔºâÔºåÁõ∏ÂèçÂÆÉ‰ª¨‰ºöË¢´ËØªÂèñÔºåÊØè‰∏Ä‰∏™È°π‰Ωú‰∏∫‰∏Ä‰∏™ËÆ∞ÂΩï„ÄÇ

ËÆ∞ÂΩïÂåÖÂê´‰∏âÂüü„ÄÇÂ§¥‰∏§‰∏™ÂüüÊòØ @code{inode} Âè∑‰∏é@value{FN}ÔºåÁî±ÊñúÊù†Ôºà/ÔºâËøõË°åÂàÜÈöî„ÄÇÂú®ÁõÆÂΩïÈ°π‰∏≠ÂåÖÂê´Êñá‰ª∂Á±ªÂûãÁöÑÁ≥ªÁªü‰∏≠ÔºåËÆ∞ÂΩï‰ºöÊúâÁ¨¨‰∏â‰∏™ÂüüÔºàËøô‰∏™Âüü‰πüÁî±ÊñúÊù†Ôºà/ÔºâËøõË°åÂàÜÈöîÔºåËøôÊòØ‰∏Ä‰∏™Áî±Âçï‰∏™Â≠óÊØçË°®Á§∫ÁöÑÊñá‰ª∂ÁöÑÁ±ªÂûã„ÄÇËøô‰∫õÂ≠óÊØç‰ª•ÂèäÊñá‰ª∂ÁöÑÁõ∏Â∫îÁöÑÁ±ªÂûãÔºåÂú® @ref{table-readdir-file-types} ‰∏≠„ÄÇ

@float Table,table-readdir-file-types
@caption{Áî± @code{readdir} Êâ©Â±ïËøîÂõûÁöÑÊñá‰ª∂Á±ªÂûã}
@multitable @columnfractions .1 .9
@headitem Â≠óÊØç @tab Êñá‰ª∂Á±ªÂûã
@item @code{b} @tab ÂùóËÆæÂ§á
@item @code{c} @tab Â≠óÁ¨¶ËÆæÂ§á
@item @code{d} @tab ÁõÆÂΩï
@item @code{f} @tab Â∏∏ËßÑÊñá‰ª∂
@item @code{l} @tab Á¨¶Âè∑ËøûÊé•
@item @code{p} @tab ÂëΩ‰ª§ÁÆ°ÈÅìÔºàFIFOÔºâ
@item @code{s} @tab @code{Socket}
@item @code{u} @tab ÂÖ∂‰ªñÔºàÊú™Áü•Ôºâ
@end multitable
@end float

Âú®Ê≤°ÊúâÊñá‰ª∂Á≥ªÁªüÁöÑÁ≥ªÁªü‰∏≠ÔºåÁ¨¨‰∏â‰∏™ÂüüÊÄªÊòØ @samp{u}„ÄÇ

@quotation ÊèêÁ§∫
Âú® GNU/Linux Á≥ªÁªü‰∏≠ÔºåÊúâ‰∏Ä‰∫õÊñá‰ª∂Á≥ªÁªü‰∏çÊîØÊåÅ @code{d_type} È°πÔºàÊü•Áúã @code{readdir}(3) ÊâãÂÜåÈ°µÔºâÔºåÂõ†Ê≠§Êñá‰ª∂Á±ªÂûã‰πüÊÄªÊòØ @samp{u}„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® @code{filefuncs} Êâ©Â±ïÊù•Ë∞ÉÁî® @code{stat()} Êù•ÂèñÂæóÊ≠£Á°ÆÁöÑÁ±ªÂûã‰ø°ÊÅØ„ÄÇ
@end quotation

‰∏ãÈù¢ÊòØ‰æãÂ≠êÔºö

@example
@@load "readdir"
@dots{}
BEGIN @{ FS = "/" @}
@{ print "@value{FN} is", $2 @}
@end example

@node Extension Sample Revout
@subsection ÂÄíËΩ¨ËæìÂá∫

@code{revoutput} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑËæìÂá∫ÂåÖË£ÖÂô®ÔºåÂåÖÂê´Âô®‰ºöÂ∞ÜÊØè‰∏™ËæìÂá∫Ë°åÁöÑÂ≠óÁ¨¶ËøõË°åÂÄíËΩ¨„ÄÇËøô‰∏™Êâ©Â±ïÁöÑ‰∏ªË¶ÅÁõÆÁöÑÊòØÊù•ÊºîÁ§∫Â¶Ç‰ΩïÂÜô‰∏Ä‰∏™ËæìÂá∫ÂåÖË£ÖÂô®ÔºåÂ∞ΩÁÆ°ÂÆÉÂèØËÉΩÊúâÁÇπÊó†ÂéòÂ§¥„ÄÇ‰∏ãÈù¢ÊòØ‰æãÂ≠êÔºö

@cindex @code{revoutput} extension
@example
@@load "revoutput"

BEGIN @{
    REVOUT = 1
    print "don't panic" > "/dev/stdout"
@}
@end example

Ëøô‰∏™‰æãÂ≠ê‰∏≠ÁöÑËæìÂá∫‰∏∫ @samp{cinap t'nod}„ÄÇ

@node Extension Sample Rev2way
@subsection ÂèåË∑Ø I/O ‰æãÂ≠ê 

@code{revtwoway} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ÁÆÄÂçïÁöÑÂèåË∑ØÂ§ÑÁêÜÂô®ÔºåÁî®Êù•Â∞ÜÂàù @command{awk} Á®ãÂ∫èËØªÂèñÂõûÊù•ÁöÑÊØè‰∏ÄË°åÁöÑÂ≠óÊØçËøõË°åÂÄíËΩ¨„ÄÇÂÆÉÁöÑÁõÆÂΩïÊòØÊºîÁ§∫Â¶Ç‰ΩïÊù•ÂÜô‰∏Ä‰∏™ÂèåË∑ØÂ§ÑÁêÜ‰∏≤ÔºåËøô‰πüËÆ∏‰πüÂæàÊó†ÂéòÂ§¥„ÄÇ‰∏ãÈù¢ÁöÑ‰æãÂ≠êÁ§∫ËåÉÂ¶Ç‰ΩïÊù•‰ΩøÁî®Ôºö

@cindex @code{revtwoway} extension
@example
@@load "revtwoway"

BEGIN @{
    cmd = "/magic/mirror"
    print "don't panic" |& cmd
    cmd |& getline result
    print result
    close(cmd)
@}
@end example

Ëøô‰∏™Á®ãÂ∫èÁöÑËæìÂá∫
@ifnotinfo
‰πüÊòØÔºö
@end ifnotinfo
@ifinfo
ÊòØÔºö
@end ifinfo
@samp{cinap t'nod}„ÄÇ

@node Extension Sample Read write array
@subsection ËæìÂá∫‰∏éÊÅ¢Â§çÊï∞ÁªÑ

@code{rwarray} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏§‰∏™ÂáΩÊï∞ÔºåÂêçÂ≠ó‰∏∫ @code{writea()} ‰∏é @code{reada()}ÔºåÂ¶Ç‰∏ãÔºö

@table @code
@item @@load "rwarray"
Â¶Ç‰ΩïÊù•Ë£ÖËΩΩÊâ©Â±ï„ÄÇ

@cindex @code{writea()} extension function
@item ret = writea(file, array)
Ëøô‰∏™ÂáΩÊï∞Êúâ‰∏Ä‰∏™Â≠ó‰∏≤ÂèÇÊï∞ÔºåËøô‰∏™ÂèÇÊï∞ÊòØË¶Å dump Êï∞ÁªÑÂà∞Êñá‰ª∂ÁöÑÂêçÂ≠óÔºåËÄåÊï∞ÁªÑÂàô‰∏∫Á¨¨‰∫å‰∏™ÂèÇÊï∞„ÄÇ@code{writea()} ÂèØ‰ª•Â§ÑÁêÜÊï∞ÁªÑ‰πãÊï∞ÁªÑ„ÄÇÂ¶ÇÊûúÊàêÂäüÂàôËøîÂõû 1ÔºåÂê¶ÂàôËøîÂõû 0„ÄÇ

@cindex @code{reada()} extension function
@item ret = reada(file, array)
@code{reada()} ÊòØ @code{writea()} ÁöÑÁõ∏ÂèçÁöÑÁâàÊú¨ÔºåÂÆÉ‰ªéÁî±Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÂëΩ‰ª§ÁöÑÊñá‰ª∂‰∏≠ËØªÂèñÔºåÂπ∂Â∞ÜÂÖ∂Â°´ÂÖÖÂà∞‰Ωú‰∏∫Á¨¨‰∫å‰∏™ÂèÇÊï∞ÁöÑÊï∞ÁªÑ„ÄÇÂÆÉÈ¶ñÂÖà‰ºöÂ∞ÜÊï∞ÁªÑÊ∏ÖÁ©∫„ÄÇÂú®ËøôÈáå‰πüÊòØÊàêÂäüÊó∂ËøîÂõû 1ÔºåÂê¶ÂàôËøîÂõû 0„ÄÇ
@end table

Áî± @code{reada()} ÂàõÂª∫ÁöÑÊï∞ÁªÑ‰∏é @code{writea()} ÊâÄÂÜôÁöÑÊï∞ÁªÑÂú®Êï∞ÊçÆÁõ∏ÂêåÁöÑÊÉÖÂÜµ‰∏ãÊòØÁõ∏ÂêåÁöÑ„ÄÇ‰ΩÜÊòØÔºåÁî±‰∫éÂÆûÁé∞ÁöÑÈóÆÈ¢òÔºåÈáçÂª∫ÁöÑÊï∞ÁªÑÁöÑÈÅçÂéÜÈ°∫Â∫èÊúâÂèØËÉΩ‰∏çÂêå‰∫éÊúÄÂºÄÂßãÁöÑÊï∞ÁªÑ„ÄÇÂú® @command{awk} ‰∏≠Êï∞ÁªÑÁöÑÈÅçÂéÜÈ°∫Â∫èÈªòËÆ§ÊòØÊú™ÂÆö‰πâÁöÑÔºåËøôÂú®ÊäÄÊúØ‰∏äÊù•ËÆ≤Âπ∂‰∏çÊòØ‰ªÄ‰πàÈóÆÈ¢ò„ÄÇÂ¶ÇÊûú‰Ω†Ë¶Å‰øùËØÅ‰∏Ä‰∏™ÁâπÂÆöÁöÑÈÅçÂéÜÈ°∫Â∫èÔºå‰ΩøÁî® @command{gawk} ‰∏≠ÁöÑÊï∞ÁªÑÊéíÂ∫èÁâπÂÆöÊù•Â§ÑÁêÜÔºàÊü•Áúã @pxref{Array Sorting}Ôºâ„ÄÇ

Êñá‰ª∂‰∏≠ÂåÖÂê´ÁöÑÊòØ‰∫åËøõÂà∂Êï∞ÊçÆ„ÄÇÊâÄÊúâÁöÑÊï¥Êï∞ÂÄºÈÉΩ‰ª•ÁΩëÁªúÂ≠óËäÇÂ∫èÂÜôÂÖ•ÁöÑ„ÄÇ‰ΩÜÊòØÔºåÂèåÁ≤æÂ∫¶ÁöÑÊµÆÁÇπÊï∞ÊòØ‰ΩøÁî®ÁöÑÊú¨Âú∞ËøõÂà∂Êï∞ÊçÆ„ÄÇÊâÄ‰ª•ÔºåÂè™ÂåÖÂê´Â≠ó‰∏≤Êï∞ÊçÆÁöÑÊï∞ÁªÑÁêÜËÆ∫‰∏äÂú®Á≥ªÁªü‰∏äÊòØ‰ª•Â≠óËäÇÂ∫èÁöÑÊñπÂºèËøõË°åËæìÂá∫ÁöÑÔºå‰ΩÜÊòØÂú®Âè¶‰∏Ä‰∏™Á≥ªÁªü‰∏äÂèØËÉΩÊòØ‰∏ç‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØ‰πüÊ≤°ÊúâËØïËøá„ÄÇ

‰∏ãÈù¢ÊòØ‰æãÂ≠êÔºö

@example
@@load "rwarray"
@dots{}
ret = writea("arraydump.bin", array)
@dots{}
ret = reada("arraydump.bin", array)
@end example

@node Extension Sample Readfile
@subsection ËØªÂèñÊï¥‰∏™Êñá‰ª∂

@code{readfile} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ÂáΩÊï∞ÔºåÂêçÂ≠ó‰∏∫ @code{readfile()}Ôºå‰ª•Âèä‰∏Ä‰∏™ËæìÂÖ•ÂàÜÊûêÂô®Ôºö

@table @code
@item @@load "readfile"
Â¶Ç‰ΩïÊù•‰ΩøÁî®Êâ©Â±ï„ÄÇ

@cindex @code{readfile()} extension function
@item result = readfile("/some/path")
ÂèÇÊï∞ÊòØË¶ÅËØªÂèñÁöÑÊñá‰ª∂ÁöÑÂêçÂ≠ó„ÄÇËøîÂõûÂÄºÊòØ‰∏Ä‰∏™Â≠ó‰∏≤ÔºåÂÖ∂‰∏≠ÂåÖÂê´ÊâÄËØ∑Ê±ÇÊñá‰ª∂ÁöÑÊâÄÊúâÂÜÖÂÆπ„ÄÇÂ¶ÇÊûúÈîôËØØÔºåÂáΩÊï∞ËøîÂõûÁ©∫‰∏≤ÔºåÂπ∂ËÆæÁΩÆ @code{ERRNO} ÁöÑÂÄº„ÄÇ

@item BEGIN @{ PROCINFO["readfile"] = 1 @}
Âè¶Â§ñÔºåÊâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™ËæìÂÖ•ÂàÜÊûêÂô®ÔºåÂ¶ÇÊûú @code{PROCINFO["readfile"]} Â≠òÂú®Êó∂Âàô‰ºöË¢´ÊøÄÊ¥ª„ÄÇÂΩìË¢´ÊøÄÊ¥ªÊó∂ÔºåÊØè‰∏™Êñá‰ª∂ÈÉΩ‰ª•Êï¥‰∏™ÁöÑÂÜÖÂÆπËøîÂõû‰∏∫ @code{$0}Ôºå@code{RT} Ë¢´ËÆæÁΩÆ‰∏∫Á©∫‰∏≤„ÄÇ
@end table

‰∏ãÈù¢ÁöÑ‰æãÂ≠êÔºö

@example
@@load "readfile"
@dots{}
contents = readfile("/path/to/file");
if (contents == "" && ERRNO != "") @{
    print("problem reading file", ERRNO) > "/dev/stderr"
    ...
@}
@end example

@node Extension Sample Time
@subsection Êâ©Â±ïÁöÑÊó∂Èó¥ÂáΩÊï∞

@code{time} Êâ©Â±ïÊ∑ªÂä†‰∫Ü‰∏§‰∏™ÂáΩÊï∞ÔºåÂêçÂ≠ó‰∏∫ @code{gettimeofday()} ‰ª•Âèä @code{sleep}ÔºåÂ¶Ç‰∏ãÔºö

@table @code
@item @@load "time"
Â¶Ç‰ΩïÊù•‰ΩøÁî®Êâ©Â±ï„ÄÇ

@cindex @code{gettimeofday()} extension function
@item the_time = gettimeofday()
ËøîÂõû‰ªé 1970-01-01 UTC ‰ª•Êù•ÁöÑÊ∂àÈÄùÁöÑÁßíÊï∞ÔºåÁ±ªÂûã‰∏∫ÊµÆÁÇπÊï∞„ÄÇÂ¶ÇÊûúÊó∂Èó¥Âú®Âπ≥Âè∞‰∏ä‰∏çÂèØÂæóÔºåÂàôËøîÂõû @minus{}1 Âπ∂ËÆæÁΩÆ @code{ERRNO}„ÄÇËøîÂõûÁöÑÊó∂Èó¥Â∫îËØ•ÊúâÊ¨°ÁßíÁöÑÁ≤æÂ∫¶Ôºå‰ΩÜÊòØÂÆûÈôÖÁöÑÁ≤æÂ∫¶Âú®‰∏çÂêåÁöÑÂπ≥Âè∞‰∏äÊòØ‰∏çÂêåÁöÑ„ÄÇÂ¶ÇÊûúÊ†áÂáÜÁöÑ  C @code{gettimeofday()} Á≥ªÁªüË∞ÉÁî®Âú®Âπ≥Âè∞‰∏äÊòØÂèØÁî®ÁöÑÔºåÂàôÂÆÉÂè™ÊòØÁÆÄÂçïÂú∞ËøîÂõûËøô‰∏™ÂáΩÊï∞ÁöÑÂÄº„ÄÇÂê¶ÂàôÔºåÂ¶ÇÊûúÂú® MS-Windows Âπ≥Âè∞‰∏äÔºåÂÆÉËøîÂõû @code{GetSystemTimeAsFileTime()} ÂáΩÊï∞ËøîÂõûÁöÑÂÄº„ÄÇ

@cindex @code{sleep()} extension function
@item result = sleep(@var{seconds})
Â∞ùËØï‰ºëÁú† @var{seconds} Áßí„ÄÇÂ¶ÇÊûú @var{{seconds} ‰∏∫Ë¥üÊï∞ÔºåÊàñËÄÖÂ∞ùËØï‰ºëÁú†Â§±Ë¥•ÔºåÂàôËøîÂõû @minus{}1 Âπ∂‰∏îËÆæÁΩÆ @code{ERRNO}„ÄÇÂê¶ÂàôÂú®‰ºëÁú†‰∫ÜÊåáÂÆöÁöÑÊó∂Èó¥ÂêéËøîÂõû 0„ÄÇÊ≥®ÊÑèÔºå@var{seconds} ÂèØ‰ª•ÊòØ‰∏Ä‰∏™ÊµÆÁÇπÊï∞ÔºàÈùûÊï¥Êï∞Ôºâ„ÄÇÂÆûÁé∞ÁªÜËäÇÊòØÔºö‰æùËµñ‰∫éÂπ≥Âè∞ÁöÑÂèØËé∑ÂæóÊÄßÔºåËøô‰∏™ÂáΩÊï∞‰ºöÂ∞ùËØï‰ΩøÁî® @code{nanosleep()} ÊàñËÄÖ @code{select} Êù•ÂÆûÁé∞Âª∂Ëøü„ÄÇ
@end table

@node Extension Sample API Tests
@subsection @code{API} ÊµãËØï
@cindex @code{testext} extension

@code{testext} Êâ©Â±ïÊâßË°åÊâ©Â±ï @code{API} ‰∏≠Ê≤°ÊúâÂú®Ë¢´ÂÖ∂‰ªñ‰æãÂ≠êÊµãËØïÂà∞ÁöÑÈÉ®ÂàÜ„ÄÇ@file{extension/testext.c} Êñá‰ª∂ÂåÖÂê´Êâ©Â±ïÁöÑ @code{C} ‰ª£Á†Å‰ª•Âèä @command{awk} ÊµãËØï‰ª£Á†ÅÔºåËøô‰∫õ‰ª£Á†ÅÊ≥®ÈáäÂú®ÊâßË°åÊµãËØïÁöÑ C Ê≥®Èáä‰∏≠„ÄÇÊµãËØïÊ°ÜÊû∂ÊèêÂèñ @command{awk} ‰ª£Á†ÅÊù•ÊâßË°åÊµãËØï„ÄÇÊü•ÁúãÊ∫ê‰ª£Á†ÅÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

@node gawkextlib
@section @code{gawkextlib} È°πÁõÆ
@cindex @code{gawkextlib}
@cindex extensions, where to find

@cindex @code{gawkextlib} project
@uref{http://sourceforge.net/projects/gawkextlib/, @code{gawkextlib}} È°πÁõÆÊèê‰æõ‰∫ÜÂæàÂ§öÁöÑ @command{gawk} Êâ©Â±ïÔºåÂåÖÂê´Áî®‰∫éÂ§ÑÁêÜ XML Êñá‰ª∂ÁöÑÊâ©Â±ïÔºåËøôÊòØÁî±ÊúÄÂºÄÂßãÁöÑ @command{xgawk}ÔºàXML @command{gawk}ÔºâÈ°πÁõÆÊºîÂåñËøáÊù•ÁöÑ„ÄÇ

Âú®ÂÜôÊú¨‰π¶ÁöÑÊó∂ÂÄôÔºå‰∏ÄÂÖ±Êúâ‰∏É‰∏™Êâ©Â±ïÔºö

@itemize @value{BULLET}
@item
@code{errno} Êâ©Â±ï

@item
GD graphics Â∫ìÊâ©Â±ï

@item
PDF Êâ©Â±ï

@item
PostgreSQL Êâ©Â±ï

@item
MPFR Â∫ìÊâ©Â±ï
ÔºàËøôÊèê‰æõ‰∫ÜËÆøÈóÆÂæàÂ§öÁöÑ MPFR ÂáΩÊï∞ÔºåËøô‰∫õÂáΩÊï∞Âú® @command{gawk} ÁöÑÊú¨Âú∞ MPFR ÊòØ‰∏çË¢´ÊîØÊåÅÁöÑÔºâ

@item
Redis Êâ©Â±ï

@item
XML ÂàÜÊûêÂô®Êâ©Â±ïÔºåËøô‰∏™Êâ©Â±ï‰ΩøÁî® @uref{http://expat.sourceforge.net, Expat} XML ÂàÜÊûêÂ∫ì
@end itemize

@cindex @command{git} utility
‰Ω†ÂèØ‰ª•Êü•Áúã @code{gawkextlib} È°πÁõÆÁöÑ‰ª£Á†ÅÔºåËøô‰∫õ‰ª£Á†ÅÂèØ‰ª•ÈÄöËøá @uref{http://git-scm.com, Git} ÂàÜÂ∏ÉÂºèÊ∫ê‰ª£Á†ÅÊâ©Â±ïÁ≥ªÁªüËé∑Âèñ„ÄÇÁõ∏Â∫îÁöÑÂëΩ‰ª§‰∏∫Ôºö

@example
git clone git://git.code.sf.net/p/gawkextlib/code gawkextlib-code
@end example

@cindex Expat XML parser library
‰∏∫‰∫ÜÊûÑÂª∫ XML Êâ©Â±ï Ôºå‰Ω†ÈúÄË¶ÅÂú®‰Ω†ÁöÑÁ≥ªÁªüÂ∑≤ÁªèÂÆâË£ÖÂ•Ω‰∫Ü @uref{http://expat.sourceforge.net, Expat} XML ÂàÜÊûêÂ∫ì„ÄÇ

Âè¶Â§ñÔºå‰Ω†ÂøÖÈ°ªËøòË¶ÅÊúâ GNU Autotools ÂÆâË£ÖÂú®Á≥ªÁªü‰∏äÔºà@uref{http://www.gnu.org/software/autoconfÔºåAutoconf}Ôºå@uref{http://www.gnu.org/software/automakeÔºåAutomake}Ôºå@uref{http://www.gnu.org/software/libtoolÔºåLibtool}ÔºåÂíå @uref{http://www.gnu.org/software/gettextÔºåGNU @command{gettext}}Ôºâ„ÄÇ

‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊûÑÂª∫‰∏éÊµãËØï @code{gawkextlib} ÁöÑËøáÁ®ãÂ¶Ç‰∏ã„ÄÇÈ¶ñÂÖàÊòØÊûÑÂª∫‰∏éÂÆâË£Ö  @command{gawk}Ôºö

@example
cd .../path/to/gawk/code
./configure --prefix=/tmp/newgawk     @ii{Install in /tmp/newgawk for now}
make && make check                    @ii{Build and check that all is OK}
make install                          @ii{Install gawk}
@end example

Êé•‰∏ãÊù•ÔºåÂà∞ @url{http://sourceforge.net/projects/gawkextlib/files} ‰∏≠‰∏ãËΩΩ @code{gawkextlib} ‰ª•Âèä‰ªªÊÑèÁöÑ‰Ω†ÊÉ≥Ë¶ÅÊûÑÂª∫ÁöÑÊâ©Â±ï„ÄÇÁ´ôÁÇπ‰∏≠ÁöÑ @file{README} Êñá‰ª∂ËØ¥Êòé‰∫ÜÂ¶Ç‰ΩïÊù•ÊûÑÂª∫‰ª£Á†Å„ÄÇÂ¶ÇÊûú‰Ω†Â∞Ü @command{gawk} ÂÆâË£ÖÂú®‰∏Ä‰∏™ÈùûÊ†áÂáÜÁöÑ‰ΩçÁΩÆÔºå‰Ω†ËøòË¶ÅÊåáÂÆö @code{./configure --with-gawk=@var{/path/to/gawk}} Êù•ÊåáÂÆöÂÆÉ„ÄÇ‰Ω†ÂèØËÉΩÈúÄË¶Å‰ΩøÁî® @command{sudo} Â∑•ÂÖ∑Êù•ÂÆâË£Ö @command{gawk} ‰∏é @code{gawkextlib}ÔºåËøôËßÜ‰Ω†ÊâÄÂú®ÁöÑÁ≥ªÁªüÁöÑÂ∑•‰ΩúÊñπÂºè„ÄÇ

Â¶ÇÊûú‰Ω†ÂÜô‰∫Ü‰∏Ä‰∏™Êâ©Â±ïÔºåËÄåÂ∏åÊúõ‰∏éÂÖ∂‰ªñÁöÑ @command{gawk} Áî®Êà∑‰∏ÄËµ∑ÂàÜÁ¶ªÔºåÂèØ‰ª•ËÄÉËôëÈÄöËøá @code{gawkextlib} È°πÁõÆÊù•ËøõË°åÂàÜÂèë„ÄÇÊü•ÁúãËøô‰∏™È°πÁõÆÁöÑÁΩëÁ´ôÊù•Ëé∑ÂèñÊõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

@node Extension summary
@section ÊÄªÁªì

@itemize @value{BULLET}
@item
‰Ω†ÂèØ‰ª•‰∏∫ @command{gawk} Áî® C ÊàñËÄÖ C++ ÔºåÂπ∂Âà©Áî®Áî± @command{gawk} ÂºÄÂèëËÄÖÊâÄÂÆö‰πâÁöÑÂ∫îÁî®Á®ãÂ∫èÊé•Âè£ÔºàAPIÔºâÊù•ÂÜôÊâ©Â±ïÔºàÊúâÊó∂‰πüÂè´Êèí‰ª∂Ôºâ„ÄÇ

@item
Êâ©Â±ïÂøÖÈ°ªÊúâ‰∏Ä‰∏™‰∏é GNU ÈÄöÁî®ËÆ∏ÂèØËØÅÂçèËÆÆÔºàGPLÔºâÂÖºÂÆπÁöÑËÆ∏ÂèØËØÅÔºåËÄåÂÆÉ‰ª¨ÂøÖÈ°ªÈÄöËøáÂ£∞Êòé‰∏Ä‰∏™Âêç‰∏∫ @code{plugin_is_GPL_compatible} ÁöÑÂèòÈáèÊù•ËøõË°åÊñ≠Ë®Ä„ÄÇ

@item
Âú® @command{gawk} ‰∏éÊâ©Â±ï‰πãÈó¥ÁöÑÈÄö‰ø°ÊòØÂèåÂêëÁöÑÔºå@command{gawk} Â∞Ü‰∏Ä‰∏™ÁªìÊûÑ @code{struct} ‰º†ÈÄíÁªôÊâ©Â±ïÔºåËøô‰∏™ÁªìÊûÑ‰∏≠ÂåÖÂê´‰∫ÜÂêÑÁßçÊï∞ÁªÑÊàêÂëò‰ª•ÂèäÂáΩÊï∞ÊåáÈíà„ÄÇËÄåÊâ©Â±ïÂèØ‰ª•ÈÄöËøá @command{gawk} Êèê‰æõÁöÑÂáΩÊï∞Êù•Ë∞ÉÁî® @command{gawk} ‰ª•ÂÆûÁé∞ÁâπÂÆöÁöÑ‰ªªÂä°„ÄÇ

@item
Ëøô‰∫õÂ∑•‰ΩúÂÖ∂‰∏≠‰πã‰∏ÄÊòØ‚ÄúÊ≥®ÂÜå‚ÄùÂêçÂ≠ó‰∏éÊñ∞ÁöÑ @command{awk} Â±ÇÂäüËÉΩÂÆûÁé∞Âà∞ @command{gawk} ‰∏≠ÔºåËøô‰∫õÂÆûÁé∞ÂêçÂ≠ó‰∏∫ @code{do_@var{XXXX}()}ÔºåËÄåËøô‰∏™ÂáΩÊï∞ÂÆûÁé∞ÁöÑÊòØ @command{awk} Â±ÇÁöÑÂáΩÊï∞ @code{@var{XXXX}()}„ÄÇ

@item
API ÂÆö‰πâÂú®Â§¥Êñá‰ª∂ @file{gawkapi.h} ‰∏≠„ÄÇ‰Ω†ÁöÑÊ∫ê‰ª£Á†Å‰∏≠ÔºåÂøÖÈ°ªÂú®ÂåÖÂê´Ëøô‰∏™Â§¥Êñá‰ª∂@emph{‰πãÂâç}ÂåÖÂê´ÂæàÂ§öÁöÑÊ†áÂáÜÂ§¥Êñá‰ª∂„ÄÇ

@item
@code{API} ÂáΩÊï∞ÊåáÈíàÂèØÊèê‰æõ‰∏ãÈù¢ÁöÑÊìç‰ΩúÔºö

@itemize @value{BULLET}
@item
ÂàÜÈÖçÔºåÈáçÊñ∞ÂàÜÊûê‰ª•ÂèäÈáäÊîæÂÜÖÂ≠ò

@item
Ê≥®ÂÜåÂáΩÊï∞Ôºà‰Ω†ÂèØ‰ª•Ê≥®ÂÜåÊâ©Â±ïÂáΩÊï∞ÔºåÈÄÄÂá∫ÂõûË∞ÉÂáΩÊï∞ÔºåÁâàÊú¨Â≠ó‰∏≤ÔºåËæìÂÖ•ÂàÜÊûêÂô®ÔºåËæìÂá∫ÂåÖË£ÖÂô®‰ª•ÂèäÂèåË∑ØÂ§ÑÁêÜÂô®Ôºâ

@item
ÊâìÂç∞Ëá¥ÂëΩÈîôËØØÔºåÂëäË≠¶‰ª•Âèä‚Äúlint‚ÄùË≠¶Âëä‰ø°ÊÅØ

@item
Êõ¥Êñ∞ @code{ERRNO} ÊàñËÄÖÈáçÁΩÆÂÆÉ

@item
ËÆøÈóÆÂèÇÊï∞ÔºåÂÖ∂‰∏≠ÂåÖÊã¨Â∞Ü‰∏Ä‰∏™Êú™ÂÆö‰πâÁöÑÂèÇÊï∞ËΩ¨Êç¢‰∏∫Êï∞ÁªÑ

@item
Á¨¶Âè∑Ë°®ËÆøÈóÆÔºàËøîÂõûÂÖ®Â±ÄÂèòÈáèÔºåÂàõÂª∫ÊàñËÄÖÊõ¥ÊîπÂèòÈáèÔºâ

@item
ÂàõÂª∫Âπ∂ÁøªËØëÁºìÂ≠òÂÄºÔºåËøô‰ºöÁªô‰ΩøÁî®Â§ö‰∏™ÂèòÈáèÂÄºÊèê‰æõ‰∏ÄÁßçÈ´òÊïàÁöÑÊñπÊ≥ïÔºå‰∏îËé∑ÂèñÂ∑®Â§ßÁöÑÊÄßËÉΩÂõûÊä•

@item
Êìç‰ΩúÊï∞ÁªÑÔºàËøîÂõûÔºåÊ∑ªÂä†ÔºåÂà†Èô§ÊàñËÄÖ‰øÆÊîπÂÖÉÁ¥†ÔºåËé∑ÂèñÊï∞ÁªÑÂÖÉÁ¥†‰∏™Êï∞ÔºåÂàõÂª∫Êñ∞Êï∞ÁªÑÔºåÊ∏ÖÈô§Êï∞ÁªÑÔºåÊâÅÂπ≥ÂåñÊï∞ÁªÑÊù•‰ΩøÁî®ÁÆÄÂçïÁöÑ C È£éÊ†ºÁöÑÂæ™ÁéØÊù•ËÆøÈóÆÂÖ∂ÊâÄÊúâÁöÑÁ¥¢Âºï‰∏éÂÖÉÁ¥†„ÄÇ

@end itemize

@item
API ÂÆö‰πâ‰∫ÜÂæàÂ§öÁöÑÊ†áÂáÜÊï∞ÁªÑÁ±ªÂûãÁî®Êù•Ë°®Á§∫ @command{awk} ÁöÑÂÄºÔºåÊï∞ÁªÑÂÖÉÁ¥†‰ª•ÂèäÊï∞ÁªÑ„ÄÇ

@item
API Êèê‰æõ‰∫ÜÊñπ‰æøÁöÑÂáΩÊï∞Áî®Êù•ÊûÑÂª∫ÂÄº„ÄÇ‰πüÊèê‰æõ‰∫ÜÂÜÖÂ≠òÁÆ°ÁêÜÂáΩÊï∞Êù•‰øùËØÅ @command{gawk} ÂàÜÈÖçÁöÑÂÜÖÂ≠ò‰∏éÁî±Êâ©Â±ïÂàÜÈÖçÁöÑÂÜÖÂ≠òÁöÑÂÖºÂÆπÊÄß„ÄÇ

@item
@emph{ÊâÄÊúâÁöÑ}‰ªé @command{gawk} ‰º†ÈÄíÁªôÊâ©Â±ïÁöÑÂÜÖÂ≠òÂøÖÈ°ªË¢´Êâ©Â±ïÂΩìÊàêÊòØÂè™ËØªÁöÑ„ÄÇ

@item
@emph{ÊâÄÊúâÁöÑ}Áî±Êâ©Â±ï‰º†ÈÄíÁªô @command{gawk} ÁöÑÂÜÖÂ≠òÂøÖÈ°ªÈÄöËøá @code{API} ÁöÑÂÜÖÂ≠òÂàÜÈÖçÂáΩÊï∞Êù•ÂàÜÈÖç„ÄÇ@command{gawk} ‰ºöÁÆ°ÁêÜËøô‰∫õÂÜÖÂ≠òÂπ∂Âú®ÂêàÈÄÇÁöÑÊó∂Èó¥ÈáäÊîæÂÆÉ„ÄÇ

@item
API Êèê‰æõ‰∫Ü @command{gawk} ËøêË°åÊó∂ÁöÑÁâàÊú¨‰ø°ÊÅØÔºåËøôÊ†∑Êâ©Â±ïÂèØ‰ª•Á°ÆÂÆöÂÖ∂ÊòØÂê¶‰∏éËΩΩÂÖ•Êâ©Â±ïÁöÑ @command{gawk} ÂÖºÂÆπ„ÄÇ

@item
ÊúÄÂÆπÊòìÁöÑÂºÄÂêØ‰∏Ä‰∏™Êñ∞Êâ©Â±ïÁöÑÊñπÂºèÊòØÂ§çÊùÇËøô‰∏Ä@value{CHAPTER}‰∏≠ÁöÑÊ†∑Êùø‰ª£Á†Å„ÄÇ@file{gawkapi.h} ‰∏≠ÁöÑÂÆèÂèØ‰ª•ÁÆÄÂåñËøô‰∏™Â∑•‰Ωú„ÄÇ

@item
@command{gawk} ÂèëÂ∏ÉÁâàÂåÖÂê´‰∫ÜÂæàÂ§öÂ∞èÁöÑÔºåÂæàÊúâÁî®ÁöÑ‰æãÂ≠êÊâ©Â±ï„ÄÇ@code{gawkextllib} È°πÁõÆÂåÖÂê´‰∫ÜÂá†‰∏™Êõ¥Â§ßÁöÑÊâ©Â±ï„ÄÇÂ¶ÇÊûú‰Ω†Â∏åÊúõÂÜô‰∏Ä‰∏™Êâ©Â±ïÂπ∂Â∞ÜÂÖ∂ÂàÜ‰∫´Áªô @command{gawk} ÁöÑÁî®Êà∑Á§æÂå∫Ôºå@code{gawkextlib} ÂèØ‰ª•Áî®‰∫éËøôÊ†∑ÁöÑÁõÆÁöÑ„ÄÇ

@end itemize

@c EXCLUDE START
@node Extension Exercises
@section ÁªÉ‰π†

@enumerate
@item
Ê∑ªÂä†‰∏Ä‰∏™ÂáΩÊï∞Êù•ÂÆûÁé∞Á≥ªÁªüË∞ÉÁî®ÔºåÂ¶Ç @code{chown()}Ôºå@code{chmod()}Ôºå‰ª•Âèä @code{umask()} Êù•ÊâßË°åÊñá‰ª∂Êìç‰Ωú„ÄÇËøô‰∫õÂáΩÊï∞Ê∑ªÂä†Âà∞ @ref{Internal File Ops} ‰∏≠ÁöÑÊâ©Â±ï‰∏≠„ÄÇ

@c Idea from comp.lang.awk, February 2015
@item
ÂÜô‰∏Ä‰∏™ËæìÂÖ•ÂàÜÊûêÂô®ÔºåÂú®ËæìÂÖ•ÊòØÊù•Ëá™‰∫é‚ÄúÁªàÁ´Ø‚ÄùËÆæÂ§áÊó∂ÂàôÊâìÂç∞‰∏Ä‰∏™ÊèêÁ§∫„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî® @code{isatty()} ÂáΩÊï∞‰ª•Ëé∑ÂèñËæìÂÖ•Êñá‰ª∂ÊòØÂê¶ÊòØ‰∏Ä‰∏™ÁªàÁ´Ø„ÄÇÔºàÊèêÁ§∫ÔºöËøô‰∏™ÂáΩÊï∞Ë∞ÉÁî®Ëµ∑Êù•ÈÄöÂ∏∏ÂæàÊÖ¢ÔºåÊúÄÂ•ΩÂè™Ë∞ÉÁî®‰∏ÄÊ¨°„ÄÇÔºâÊèêÁ§∫ÁöÑÂÜÖÂÆπÂ∫îËØ•‰∏Ä‰∏™ÂèØË¢´ @command{awk} Â±Ç‰ª£Á†ÅËÆæÁΩÆÁöÑÂèòÈáè„ÄÇ‰Ω†ÂèØ‰ª•Â∞ÜÊèêÁ§∫ÂÜôÂà∞Ê†áÂáÜÈîôËØØ‰∏≠„ÄÇ‰ΩÜÊòØ‰∏∫‰∫ÜÊúÄÂ•ΩÁöÑÁªìÊûúÔºåÊòØÊâìÂºÄ‰∏Ä‰∏™Âú® @file{/dev/tty} ‰∏≠ÁöÑ‰∏Ä‰∏™Êñá‰ª∂ÊèèËø∞Á¨¶ÔºàÊàñËÄÖÊñá‰ª∂ÊåáÈíàÔºâÂπ∂Âú®ÂÖ∂‰∏äÊâìÂç∞ÊèêÁ§∫ÔºåÂõ†‰∏∫ÊúâÂèØËÉΩÊ†áÂáÜÈîôËØØÂèØËÉΩ‰ºöË¢´ÈáçÂÆöÂêë„ÄÇ

‰∏∫‰ªÄ‰πàÊ†áÂáÜÈîôËØØÊØîÊ†áÂáÜËæìÂá∫ÊòØÁî®Êù•ËæìÂá∫ÊèêÁ§∫ÁöÑÊõ¥Â•ΩÈÄâÊã©Ôºü‰Ω†Ë¶ÅÊõøÊç¢Êàê‰ªÄ‰πàÊ†∑ÁöÑËØªÂèñÊú∫Âà∂ÔºåÊòØ‰∏ÄÊ¨°‰∏ÄÊù°ËÆ∞ÂΩïËøòÊòØ‰∏ÄÊ¨°ËØªÂèñÂ§ö‰∏™ÂéüÂßãÂ≠óËäÇÔºü

@item
ÔºàÈöæÔºâÂ¶Ç‰Ω†‰ΩïÂú® @command{gawk} ‰∏≠Êù•Êèê‰æõ‰∏Ä‰∏™ÂêçÂ≠óÁ©∫Èó¥Ôºà@code{namespace}ÔºâÔºåËøôÊ†∑‰∏çÂêåÊâ©Â±ï‰∏≠ÁöÑÂáΩÊï∞ÂêçÂ≠ó‰∏ç‰ºöÁõ∏‰∫íÂÜ≤Á™ÅÔºüÂ¶ÇÊûú‰Ω†ÊÉ≥Âá∫‰∫Ü‰∏Ä‰∏™Â•ΩÊñπÊ°àÔºåËØ∑‰∏é @command{gawk} ÁöÑÁª¥Êä§ËÄÖËÅîÁ≥ªÂπ∂ÂëäÁü•Ëøô‰∏™ÊñπÊ°à„ÄÇ

@item
ÂÜô‰∏Ä‰∏™ÂåÖË£ÖËÑöÊú¨Êù•Êèê‰æõ‰∏Ä‰∏™‰∏é @samp{sed -i} Áõ∏‰ººÁöÑÊé•Âè£Ôºå‰ª•ÂÆûÁé∞Âú® @ref{Extension Sample Inplace} ‰∏≠ÁöÑ‚Äúinplace‚ÄùÊâ©Â±ï„ÄÇ

@end enumerate
@c EXCLUDE END

@ifnotinfo
@part @value{PART4} ÈôÑÂΩï
@end ifnotinfo

@ifdocbook

@ifclear FOR_PRINT
Part IV contains the appendices (including the two licenses that cover
the @command{gawk} source code and this @value{DOCUMENT}, respectively)
and the Glossary:
@end ifclear

@ifset FOR_PRINT
Part IV contains three appendices, the last of which is the license that
covers the @command{gawk} source code:
@end ifset

@itemize @value{BULLET}
@item
@ref{Language History}

@item
@ref{Installation}

@ifclear FOR_PRINT
@item
@ref{Notes}

@item
@ref{Basic Concepts}

@item
@ref{Glossary}
@end ifclear

@item
@ref{Copying}

@ifclear FOR_PRINT
@item
@ref{GNU Free Documentation License}
@end ifclear
@end itemize
@end ifdocbook

@node Language History
@appendix @command{awk} ËØ≠Ë®ÄÁöÑÊºîÂåñ

Êú¨@value{DOCUMENT}ÊèèËø∞ÁöÑ @command{awk} ÁöÑ GNU ÁâàÊú¨ÔºåËøô‰∏™ÁâàÊú¨ÁöÑ @command{awk} ÊòØÁ¨¶Âè∑ POSIX Ê†áÂáÜÁöÑ„ÄÇÂæàÂ§öÁöÑËÄÅ @command{awk} Áî®Êà∑‰ΩøÁî® Unix Version 7 ÁâàÊú¨ÁöÑ @command{awk} ÂºÄÂßãÂ≠¶‰π† @command{awk} ËØ≠Ë®Ä„ÄÇÔºàËøô‰∏™ÁâàÊú¨ÁöÑÂÆûÁé∞ÊòØ Berkeley Unix 4.3 Ëá≥ Reno ‰∏≠ÁöÑ @command{awk} ÁâàÊú¨ÁöÑÂü∫Á°Ä„ÄÇÂêéÁª≠ÁöÑ @code{Berkeley} Unix ÁâàÊú¨ÔºåÂπ∂‰∏îÊúâ‰∏ÄÊÆµÊó∂Èó¥Ôºå‰∏Ä‰∫õÁî± 4.4 @code{BSD}-@code{Lite} Ê¥æÁîüÂá∫Êù• Unix ÁâàÊú¨‰ΩøÁî®‰∏çÂêåÁöÑÁâàÊú¨ @command{gawk} Êù•‰Ωú‰∏∫Ëøô‰∫õÁ≥ªÁªü‰∏äÁöÑ @command{awk}„ÄÇÔºâËøô‰∏Ä@value{CHAPTER}ÁÆÄÂçïÂú∞ÊèèËø∞ @command{awk} ËØ≠Ë®ÄÁöÑÊºîÂåñËøáÁ®ãÔºåÂπ∂ÂØπ@value{DOCUMENT}‰∏≠Áõ∏Â∫îÁöÑÁ´†ËäÇÂÅö‰∫ÜÂºïÁî® ÔºåËøôÊ†∑‰Ω†ÂèØ‰ª•ÁúãÂà∞Êõ¥Â§öÁöÑ‰ø°ÊÅØ„ÄÇ

@ifset FOR_PRINT
To save space, we have omitted
information on the history of features in @command{gawk} from this
edition. You can find it in the
@uref{http://www.gnu.org/software/gawk/manual/html_node/Feature-History.html,
online documentation}.
@end ifset

@menu
* V7/SVR3.1::                   The major changes between V7 and System V
                                Release 3.1.
* SVR4::                        Minor changes between System V Releases 3.1
                                and 4.
* POSIX::                       New features from the POSIX standard.
* BTL::                         New features from Brian Kernighan's version of
                                @command{awk}.
* POSIX/GNU::                   The extensions in @command{gawk} not in POSIX
                                @command{awk}.
* Feature History::             The history of the features in @command{gawk}.
* Common Extensions::           Common Extensions Summary.
* Ranges and Locales::          How locales used to affect regexp ranges.
* Contributors::                @command{gawk} ÁöÑ‰∏ªË¶ÅË¥°ÁåÆËÄÖ.
* History summary::             History summary.
@end menu

@node V7/SVR3.1
@appendixsec Âú® V7 ‰∏é SVR3.1 ‰πãÈó¥ÁöÑÂèòÂåñ
@cindex @command{awk}, versions of
@cindex @command{awk}, versions of, changes between V7 and SVR3.1

@command{awk} ËØ≠Ë®ÄÂú® Unix Version 7Ôºà1978Ôºâ‰∏é System V Release 3.1Ôºà1987Ôºâ‰∏≠‰Ωú‰∏∫ÈÄöÁî®Â∏∏Áî®Â∑•ÂÖ∑Á¨¨‰∏Ä‰∏™Êñ∞ÁâàÊú¨‰πãÈó¥ÊúâÈùûÂ∏∏Â§ßÁöÑÂèòÂåñ„ÄÇËøô@value{SECTION}ÂØπÂÖ∂‰∏≠ÁöÑÂèòÂåñËøõË°åÂΩíÁ∫≥ÔºåÂπ∂ÊúâÁõ∏Â∫îÁöÑÂèÇËÄÉÔºåËøôÊ†∑ÂèØ‰ª•Ëé∑ÂèñËøõ‰∏ÄÊ≠•ÁöÑ‰ø°ÊÅØÔºö

@itemize @value{BULLET}
@item
ÈúÄË¶ÅÁî® @samp{;} Êù•ÂàÜÈöî‰∏ÄË°å‰∏≠ÁöÑËßÑÂàôÔºàÊü•Áúã @pxref{Statements/Lines}Ôºâ„ÄÇ

@item
Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞‰∏é @code{return} ËØ≠Âè•ÔºàÊü•Áúã @pxref{User-defined}Ôºâ„ÄÇ

@item
@code{delete} ËØ≠Âè•ÔºàÊü•Áúã @pxref{Delete}Ôºâ„ÄÇ

@item
@code{do}-@code{while} ËØ≠Âè•ÔºàÊü•Áúã @pxref{Do Statement}Ôºâ„ÄÇ

@item
ÂÜÖÁΩÆÂáΩÊï∞ @code{atan2()}Ôºå@code{cos()}Ôºå@code{sin()}Ôºå@code{rand()} ‰∏é @code{srand()}ÔºàÊü•Áúã @pxref{Numeric Functions}Ôºâ„ÄÇ

@item
ÂÜÖÁΩÆÂáΩÊï∞ @code{gsub()}Ôºå@code{sub()} ‰∏é @code{match()}ÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
ÂÜÖÁΩÆÂáΩÊï∞ @code{close()} ‰∏é @code{system()}ÔºàÊü•Áúã @pxref{I/O Functions}Ôºâ„ÄÇ

@item
@code{ARGC}Ôºå@code{ARGV}Ôºå@code{FNR}Ôºå@code{RLENGTH}Ôºå@code{RSTART} ‰∏é @code{SUBSEP} È¢ÑÂÆö‰πâÂèòÈáèÔºàÊü•Áúã @pxref{Built-in Variables}Ôºâ„ÄÇ

@item
ÂèØËµãÂÄºÁöÑ @code{$0}ÔºàÊü•Áúã @pxref{Changing Fields}Ôºâ„ÄÇ

@item
‰ΩøÁî®‰∏âÂÖÉÊìç‰ΩúÁ¨¶ @samp{?:} ÁöÑÊù°‰ª∂Ë°®ËææÂºèÔºàÊü•Áúã @pxref{Conditional Exp}Ôºâ„ÄÇ

@item
Âú® @code{for} ËØ≠Âè•‰πãÂ§ñÁöÑ @samp{@var{indx} in @var{array}} Ë°®ËææÂºèÔºàÊü•Áúã @pxref{Reference to Elements}Ôºâ„ÄÇ

@item
ÂπÇÊìç‰ΩúÁ¨¶ @samp{^}ÔºàÊü•Áúã @pxref{Arithmetic Ops}Ôºâ‰∏éÂÖ∂ËµãÂÄºÊìç‰ΩúÁ¨¶ÂΩ¢Âºè @samp{^=}ÔºàÊü•Áúã @pxref{Assignment Ops}Ôºâ„ÄÇ

@item
‰∏é C ÂÖºÂÆπÁöÑÊìç‰ΩúÁ¨¶‰ºòÂÖàÁ∫ßÔºåËøô‰∏™‰∏é‰∏Ä‰∫õÊóßÁöÑ @command{awk} Á®ãÂ∫è‰∏çÂêåÔºàÊü•Áúã @pxref{Precedence}Ôºâ„ÄÇ

@item
Ê≠£ÂàôË°®ËææÂºèÂèØ‰ª•‰Ωú‰∏∫ @code{FS} ÁöÑÂÄºÔºàÊü•Áúã @pxref{Field Separators}Ôºâ‰ª•Âèä‰Ωú‰∏∫ @code{split()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{String Functions}ÔºâÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÔºåËÄå‰∏çÊòØ‰ΩøÁî® @code{FS} ÁöÑÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶„ÄÇ

@item
‰Ωú‰∏∫ @samp{~} ‰∏é @samp{!~} Êìç‰ΩúÁ¨¶Êìç‰ΩúÊï∞ÁöÑÂä®ÊÄÅÊ≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @pxref{Computed Regexps}Ôºâ„ÄÇ

@item
@samp{\b}Ôºå@samp{\f} ‰∏é @samp{\r} ËΩ¨‰πâÂ∫èÂàóÔºàÊü•Áúã @pxref{Escape Sequences}Ôºâ„ÄÇ

@item
@code{getline} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{Getline}ÔºâËæìÂÖ•ÈáçÂÆöÂêë„ÄÇ

@item
Â§ö @code{BEGIN} ‰∏é @code{END} ËßÑÂàôÔºàÊü•Áúã @pxref{BEGIN/END}Ôºâ„ÄÇ

@item
Â§öÁª¥Êï∞ÁªÑÔºàÊü•Áúã @pxref{Multidimensional}Ôºâ„ÄÇ
@end itemize

@node SVR4
@appendixsec Âú® SVR3.1 ‰∏é SVR4 ‰πãÈó¥ÁöÑÂèòÂåñ

@cindex @command{awk}, versions of, changes between SVR3.1 and SVR4
System V Release 4Ôºà1989ÔºâÁâàÊú¨ÁöÑ Unix @command{awk} Ê∑ªÂä†‰∫ÜËøô‰∫õÁâπÊÄßÔºàÊúâ‰∏Ä‰∫õÊù•Ëá™‰∫é @command{gawk}ÔºâÔºö

@itemize @value{BULLET}
@item
@code{ENVIRON} Êï∞ÁªÑÔºàÊü•Áúã @pxref{Built-in Variables}Ôºâ„ÄÇ
@c gawk and MKS awk

@item
Â§ö‰∏™ @option{-f} ÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ
@c MKS awk

@item
@option{-v} ÈÄâÈ°πÁî®‰∫éÂú®Á®ãÂ∫èÊâßË°åÂâçËøõË°åÂèòÈáèËµãÂÄºÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ
@c GNU, Bell Laboratories & MKS together

@item
@option{--} Áî®‰∫éË°®Á§∫ÂëΩ‰ª§Ë°åÈÄâÈ°πÁöÑÁªìÊùü„ÄÇ

@item
@samp{\a}Ôºå@samp{\v} ‰∏é @samp{\x} ËΩ¨‰πâÂ≠óÁ¨¶ÔºàÊü•Áúã @pxref{Escape Sequences}Ôºâ
@c GNU, for ANSI C compat

@item
ÂÜÖÁΩÆÂáΩÊï∞ @code{srand()} ÊúâÁ°ÆÂÆöÁöÑËøîÂõûÂÄºÔºàÊü•Áúã @pxref{Numeric Functions}Ôºâ„ÄÇ

@item
@code{toupper()} ‰∏é @code{tolower()} ÂÜÖÁΩÆÂ≠ó‰∏≤ÂáΩÊï∞ÔºåÁî®‰∫éÂ§ßÂ∞èÂÆöËΩ¨Êç¢ÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
ÂØπ‰∫é @code{printf} ‰∏≠ÁöÑ @samp{%c} Ê†ºÂºèÊéßÂà∂Â≠ó‰∏≤ÊúâÊõ¥Ê∏ÖÊô∞ÁöÑËßÑËåÉÔºàÊü•Áúã @pxref{Control Letters}Ôºâ„ÄÇ

@item
Âú® @code{printf} ‰∏é @code{sprintf()} ÁöÑÂèÇÊï∞ÂàóË°®‰∏≠ÔºåÂèØ‰ª•Âä®ÊÄÅÊéßÂà∂ÂüüÁöÑÂÆΩÂ∫¶‰∏éÁ≤æÂ∫¶Ôºà@code{"%*.*d"}ÔºâÔºàÊü•Áúã @pxref{Control Letters}Ôºâ„ÄÇ

@item
Ê≠£ÂàôË°®ËææÂºèÂ∏∏ÈáèÁöÑ‰ΩøÁî®ÔºåÂ¶Ç @code{/foo/} ‰Ωú‰∏∫‰∏Ä‰∏™Ë°®ËææÂºèÔºåËøô‰∏™‰∏éÂåπÈÖçÊìç‰ΩúÁ¨¶ÔºåÂ¶Ç @samp{$0 ~ /foo/} ÊòØ‰∏ÄÊ†∑ÁöÑÁöÑÔºàÊü•Áúã @pxref{Using Constant Regexps}Ôºâ„ÄÇ

@item
Âú®ÂëΩ‰ª§Ë°åÂèòÈáèËµãÂÄº‰∏≠Â§ÑÁêÜËΩ¨‰πâÂ∫èÂàóÔºàÊü•Áúã @pxref{Assignment Options}Ôºâ„ÄÇ
@end itemize

@node POSIX
@appendixsec Âú® SVR4 ‰∏é POSIX ‰πãÈó¥ÁöÑÂèòÂåñ
@cindex @command{awk}, versions of, changes between SVR4 and POSIX @command{awk}
@cindex POSIX @command{awk}, changes in @command{awk} versions

@command{awk} ÂëΩ‰ª§ËØ≠Ë®Ä‰∏éÂ∑•ÂÖ∑ÁöÑ POSIX Ê†áÂáÜÔºà1992ÔºâÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÂèòÈáèÔºö

@itemize @value{BULLET}
@item
‰ΩøÁî® @option{-W} ÁâπÂÆö‰∫éÂÆûÁé∞ÁöÑÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ

@item
‰ΩøÁî® @code{CONVFMT} Áî®‰∫éÊéßÂà∂Êï∞ÂÄºËΩ¨Êç¢‰∏∫Â≠ó‰∏≤ÔºàÊü•Áúã @pxref{Conversion}Ôºâ„ÄÇ

@item
Êï∞ÂÄºÂ≠ó‰∏≤ÁöÑÊ¶ÇÂøµÂπ∂ÂºïÂÖ•‰∏éÊõ¥‰∏•Ê†ºÁöÑÊØîËæÉËßÑÂàôÔºàÊü•Áúã @pxref{Typing and Comparison}Ôºâ„ÄÇ

@item
‰ΩøÁî®È¢ÑÂÆö‰πâÁöÑÂèòÈáè‰Ωú‰∏∫ÂáΩÊï∞ÂèÇÊï∞ÂêçË¢´Á¶ÅÁî®ÔºàÊü•Áúã @pxref{Definition Syntax}Ôºâ„ÄÇ

@item
ÂæàÂ§ö‰πãÂâçÊ≤°ÊúâÊñáÊ°£ÁöÑËØ≠Ë®ÄÁâπÊÄßÊúâ‰∫ÜÊõ¥ÂÆåÂ§áÁöÑÊñáÊ°£„ÄÇ
@end itemize

Âú® 2012 Âπ¥ÔºåÂæàÂ§ö‰πãÂâçÂæàÂ§öÂπ¥ÈÉΩ‰ª•Êâ©Â±ïÁöÑÊñπÂºèÂèñÂæóÁöÑÁâπÊÄßÊúÄÁªàË¢´Âä†ÂÖ•Âà∞ POSIX Ê†áÂáÜ‰∏≠„ÄÇÂÆÉ‰ª¨ÊòØÔºö

@itemize @value{BULLET}
@item
@code{fflush()} ÂÜÖÁΩÆÂáΩÊï∞Áî®Êù•Âà∑Âá∫ËæìÂá∫ÔºàÊü•Áúã @pxref{I/O Functions}Ôºâ„ÄÇ

@item
@code{nextfile} ËØ≠Âè•ÔºàÊü•Áúã @pxref{Nextfile Statement}Ôºâ

@item
ÈÄöËøá @samp{delete @var{array}} Â∞±ÂèØ‰ª•Âà†Èô§Êï¥‰∏™Êï∞ÁªÑÔºàÊü•Áúã @pxref{Delete}Ôºâ„ÄÇ

@end itemize

Êü•Áúã @xref{Common Extensions}ÔºåÊù•Ëé∑ÂèñËøòÊ≤°ÊúâË¢´Êé•Âèó‰∏∫ POSIX Ê†áÂáÜÁöÑÊâ©Â±ïÂàóË°®„ÄÇ

2008 Âπ¥ÁöÑ POSIX Ê†áÂáÜÂèØ‰ª•Âú®Á∫ø‰∏äÊâæÂà∞Ôºö@url{http://www.opengroup.org/onlinepubs/9699919799/}


@node BTL
@appendixsec Brian Kernighan ÁöÑ @command{awk} ÁöÑÊâ©Â±ï

@cindex @command{awk}, versions of, See Also Brian Kernighan's @command{awk}
@cindex extensions, Brian Kernighan's @command{awk}
@cindex Brian Kernighan's @command{awk}, extensions
@cindex Kernighan, Brian
Brian Kernighan ÁâàÊú¨ÁöÑ @command{awk} ÂèØ‰ª•ÈÄöËøáÂÆÉÁöÑ‰∏ªÈ°µÊù•Ëé∑ÂèñÔºàÊü•Áúã @pxref{Other Versions}Ôºâ„ÄÇ

Ëøô‰∏Ä@value{SECTION}ÊèèËø∞ÁöÑÊòØÊù•Ëá™‰∫é‰ªñÁöÑ @command{awk} ÁâàÊú¨ÁöÑÈÄöÁî®Êâ©Â±ïÔºö

@itemize @value{BULLET}
@item
@samp{**} ‰∏é @samp{**=} Êìç‰ΩúÁ¨¶ÔºàÊü•Áúã @pxref{Arithmetic Ops} ‰∏é @ref{Assignment Ops}Ôºâ„ÄÇ

@item
@code{func} Áî®‰∫é @code{function} ÁöÑÁº©ÂÜôÔºàÊü•Áúã @pxref{Definition Syntax}Ôºâ„ÄÇ

@item
@code{fflush()} ÂÜÖÁΩÆÂáΩÊï∞Áî®Êù•Âà∑Âá∫ÁºìÂ≠òÁöÑËæìÂá∫ÔºàÊü•Áúã @pxref{I/O Functions}Ôºâ

@ignore
@item
The @code{SYMTAB} array, that allows access to @command{awk}'s internal symbol
table. This feature was never documented for his @command{awk}, largely because
it is somewhat shakily implemented. For instance, you cannot access arrays
or array elements through it
@end ignore
@end itemize

Êü•Áúã @xref{Common Extensions}ÔºåÊù•Ëé∑ÂèñÂú®ÂÆÉÁöÑ @command{awk} ‰∏≠ÂèØ‰ª•Ëé∑ÂèñÁöÑÊâ©Â±ï„ÄÇ

@node POSIX/GNU
@appendixsec ‰∏çÂú® POSIX @command{awk} ‰∏≠ÁöÑ @command{gawk} Êâ©Â±ï 

@cindex compatibility mode (@command{gawk}), extensions
@cindex extensions, in @command{gawk}, not in POSIX @command{awk}
@cindex POSIX, @command{gawk} extensions not included in
@command{awk} ÁöÑ GNU ÂÆûÁé∞‚Äî‚Äî@command{gawk} Ê∑ªÂä†‰∫ÜÂ§ßÈáèÁöÑÁâπÊÄß„ÄÇÂÆÉ‰ª¨Âú®‰ΩøÁî® @option{--traditional} ÊàñËÄÖ @option{--posix} ÈÄâÈ°πÁöÑÊó∂ÂÄôÂèØ‰ª•Ë¢´Á¶ÅÁî®ÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ

ÂæàÂ§öÁöÑÁâπÊÄßÂ∑≤ÁªèÊúâ‰∏Ä‰∫õÂπ¥Â§¥‰∫ÜÔºåËøô‰∏ÄËäÇÂØπËøô‰∫õÈôÑÂä†ÁöÑÁâπÊÄßËøõË°åÊèèËø∞ÔºåËøô‰∫õÁâπÊÄß‰ΩøÁî®Âú®Áé∞Âú®ÁöÑ @command{gawk} ÁâàÊú¨‰∏≠Ôºå‰ΩÜÊòØË∂ÖÂá∫ POSIX Ê†áÂáÜ„ÄÇ

@itemize @value{BULLET}

@item
È¢ùÂ§ñÁöÑÈ¢ÑÂÆö‰πâÂèòÈáèÔºö

@itemize @value{MINUS}
@item
@code{ARGIND}Ôºå@code{BINMODE}Ôºå@code{ERRNO}Ôºå@code{FIELDWIDTHS}Ôºå@code{FPAT}Ôºå@code{IGNORECASE}Ôºå@code{LINT}Ôºå@code{PROCINFO}Ôºå@code{RT}ÔºåÂíå @code{TEXTDOMAIN} ÂèòÈáèÔºàÊü•Áúã @pxref{Built-in Variables}Ôºâ„ÄÇ
@end itemize

@item
I/O ÈáçÂÆöÂêë‰∏≠ÁöÑÁâπÊÆäÊñá‰ª∂Ôºö

@itemize @value{MINUS}
@item
/@code{dev}/@code{stdin}Ôºå /@code{dev}/@code{stdout}Ôºå /@code{dev}/@code{stderr}Ôºå ‰∏é /@code{dev}/@code{fd}/@code{N} ÁâπÊÆäÊñá‰ª∂ÂêçÔºàÊü•Áúã 5.8 @command{gawk} ‰∏≠ÁöÑÁâπÊÆäÊñá‰ª∂ÂêçÔºå Âú®Á¨¨ 106 È°µÔºâ„ÄÇ
@file{/dev/stdin}Ôºå@file{/dev/stdout}Ôºå@file{/dev/stderr}Ôºå‰∏é @file{/dev/fd/@var{N}} ÁâπÊÆäÊñá‰ª∂ÂêçÔºàÊü•Áúã @pxref{Special Files}Ôºâ„ÄÇ 

@item
@file{/inet}Ôºå@file{/inet4}ÔºåÂíå @file{/inet6} Á≠âÁâπÊÆäÊñá‰ª∂Áî®‰∫é‰ΩøÁî® @samp{|&} TCP/IP ÁΩëÁªúÈÄö‰ø°ÔºåÊù•ÊåáÂÆö‰ΩøÁî®Âì™‰∏™ÁâàÊú¨ÁöÑÂçèËÆÆÔºàÊü•Áúã @pxref{TCP/IP Networking}Ôºâ„ÄÇ
@end itemize

@item
ËØ≠Ë®Ä‰∏≠ÁöÑÊõ¥Êîπ‰∏é/ÊàñËÄÖÊ∑ªÂä†Ôºö

@itemize @value{MINUS}
@item
@samp{\x} ËΩ¨‰πâÂ∫èÂàóÔºàÊü•Áúã @pxref{Escape Sequences}Ôºâ„ÄÇ

@item
ÂÆåÂÖ®Âú∞ÊîØÊåÅ POSIX ‰∏é GNU Ê≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @pxref{Regexp}Ôºâ„ÄÇ

@item
@code{FS} ‰∏é @code{split()} ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÂèØ‰ª•‰∏∫Á©∫‰∏≤ÔºàÊü•Áúã @pxref{Single Character Fields}Ôºâ„ÄÇ

@item
ÂèØ‰ª•ËÆæÁΩÆ @code{RS} ‰∏∫Ê≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @pxref{Records}Ôºâ„ÄÇ

@item
ÂèØ‰ª•Âú® @command{awk} Á®ãÂ∫èÊ∫ê‰ª£Á†Å‰∏≠‰ΩøÁî®ÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂ÔºàÊü•Áúã @pxref{Nondecimal-numbers}Ôºâ„ÄÇ

@item
‰ΩøÁî® @samp{|&} Êìç‰ΩúÁ¨¶Êù•‰∏éÂπ∂Á®ãËøõË°åÂèåÂêë I/O ÈÄö‰ø°ÔºàÊü•Áúã @pxref{Two-way I/O}Ôºâ„ÄÇ

@item
Èó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®ÔºàÊü•Áúã @pxref{Indirect Calls}Ôºâ„ÄÇ

@item
Âú®ÂëΩ‰ª§Ë°å‰∏äËæìÂÖ•ÁõÆÂΩï‰ºöÂØºËá¥Ë≠¶Âëä‰∫ßÁîüÔºå‰ΩÜ‰ºöË∑≥ËøáÔºàÊü•Áúã @pxref{command-line directories}Ôºâ„ÄÇ
@end itemize

@item
Êñ∞ÁöÑÂÖ≥ÈîÆÂ≠óÔºö

@itemize @value{MINUS}
@item
@code{BEGINFILE} ‰∏é @code{ENDFILE} ÁâπÊÆäÊ®°ÂºèÔºàÊü•Áúã @pxref{BEGINFILE/ENDFILE}Ôºâ„ÄÇ

@item
@code{switch} ËØ≠Âè•ÔºàÊü•Áúã @pxref{Switch Statement}Ôºâ„ÄÇ
@end itemize

@item
ÂØπÊ†áÂáÜ @command{awk} ÂáΩÊï∞ÁöÑÊîπÂèòÔºö

@itemize @value{MINUS}
@item
@code{close()} ÂáΩÊï∞ÁöÑÁ¨¨‰∫å‰∏™ÂèØÈÄâÂèÇÊï∞ÂèØ‰ª•ÂÖ≥Èó≠Âà∞Âπ∂Á®ãÁöÑÂèåÂêëÁÆ°ÈÅìÁöÑ‰∏ÄÁ´ØÔºàÊü•Áúã @pxref{Two-way I/O}Ôºâ„ÄÇ

@item
‰ΩøÁî® @option{--posix} Êó∂Ôºå@code{gsub()} ‰∏é @code{sub()} ‰∏é POSIX ÂÖºÂÆπ„ÄÇ

@item
@code{length()} ÂáΩÊï∞Êé•Âèó‰∏Ä‰∏™Êï∞ÁªÑ‰Ωú‰∏∫ÂèÇÊï∞Âπ∂ËøîÂõûÊï∞ÁªÑ‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{match()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèØÈÄâÂèÇÊï∞Áî®‰∫éÊçïËé∑Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÊñáÊú¨ÂåπÈÖçÂ≠êË°®ËææÂºèÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
Âú® @code{printf} Ê†ºÂºè‰∏≠ÁöÑ‰ΩçÁΩÆÊåáÂÆöÁ¨¶Áî®Êù•ÁÆÄÂåñÁøªËØëÔºàÊü•Áúã @pxref{Printf Ordering}Ôºâ„ÄÇ

@item
@code{split()} ÂáΩÊï∞ÁöÑÈ¢ùÂ§ñÂèØÈÄâÁöÑÁ¨¨Âõõ‰∏™ÂèÇÊï∞ÔºåÊòØÁî®Êù•Â≠òÊîæÂüüÂàÜÈöîÊñáÊú¨ÁöÑÊï∞ÁªÑÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ
@end itemize

@item
@command{gawk} ‰∏≠ÁöÑÈ¢ùÂ§ñÂáΩÊï∞Ôºö

@itemize @value{MINUS}
@item
@code{gensub()}Ôºå@code{patsplit()} ‰∏é @code{strtonum()} ‰ΩøÂæóÊñáÊú¨Êìç‰ΩúÊõ¥Âä†Âº∫Â§ßÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{asort()} ‰∏é @code{asorti()} ÂáΩÊï∞Áî®Êù•ÂØπÊï∞ÁªÑÊéíÂ∫èÔºàÊü•Áúã @pxref{Array Sorting}Ôºâ„ÄÇ

@item
@code{mktime()}Ôºå@code{systime()} ‰∏é @code{strftime()} Áî®Êù•Â§ÑÁêÜÊó∂Èó¥Êà≥ÔºàÊü•Áúã @pxref{Time Functions}Ôºâ„ÄÇ

@item
@code{and()}Ôºå@code{compl()}Ôºå@code{lshift()}Ôºå@code{or()}Ôºå@code{rshift()}Ôºå‰∏é @code{xor()} ÂáΩÊï∞Áî®Êù•Â§ÑÁêÜ‰ΩçÊìç‰ΩúÔºàÊü•Áúã @pxref{Bitwise Functions}Ôºâ„ÄÇ
@c In 4.1, and(), or() and xor() grew the ability to take > 2 arguments

@item
@code{isarray} ÂáΩÊï∞Áî®Êù•Ê£ÄÊü•‰∏Ä‰∏™ÂèòÈáèÊòØÂê¶‰∏∫Êï∞ÁªÑÔºàÊü•Áúã @pxref{Type Functions}Ôºâ„ÄÇ

@item
@code{bindtextdomain()}Ôºå@code{dcgettext()}Ôºå‰∏é @code{dcngettext()} ÂáΩÊï∞Áî®‰∫éÂõΩÈôÖÂåñÔºàÊü•Áúã @pxref{Programmer i18n}Ôºâ„ÄÇ
@end itemize

@item
ÂëΩ‰ª§Ë°å‰∏≠ÁöÑÊîπÂèò‰∏é/ÊàñËÄÖÊ∑ªÂä†

@itemize @value{MINUS}
@item
@env{AWKPATH} ÁéØÂ¢ÉÂèòÈáèÁî®Êù•ÊåáÂÆö @option{-f} ÂëΩ‰ª§ÈÄâÈ°πÁöÑÊêúÁ¥¢Ë∑ØÂæÑÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ

@item
@code{AWKLIBPATH} ÁéØÂ¢ÉÂèòÈáèÁî®Êù•ÊåáÂÆö @option{-l} ÂëΩ‰ª§Ë°åÈÄâÈ°πÁöÑÊêúÁ¥¢Ë∑ØÂæÑÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ

@item
@option{-b},
@option{-c},
@option{-C},
@option{-d},
@option{-D},
@option{-e},
@option{-E},
@option{-g},
@option{-h},
@option{-i},
@option{-l},
@option{-L},
@option{-M},
@option{-n},
@option{-N},
@option{-o},
@option{-O},
@option{-p},
@option{-P},
@option{-r},
@option{-S},
@option{-t},
‰∏é
@option{-V}
Áü≠ÈÄâÈ°π„ÄÇÂêåÊó∂‰πüÂèØ‰ª•‰ΩøÁî® GNU È£éÊ†ºÁöÑÈïøÈÄâÈ°π„ÄÇËøô‰∫õÈÄâÈ°π‰ª• @option{--} ÂºÄÂßãÔºå
@option{--assign},
@option{--bignum},
@option{--characters-as-bytes},
@option{--copyright},
@option{--debug},
@option{--dump-variables},
@option{--exec},
@option{--field-separator},
@option{--file},
@option{--gen-pot},
@option{--help},
@option{--include},
@option{--lint},
@option{--lint-old},
@option{--load},
@option{--non-decimal-data},
@option{--optimize},
@option{--posix},
@option{--pretty-print},
@option{--profile},
@option{--re-interval},
@option{--sandbox},
@option{--source},
@option{--traditional},
@option{--use-lc-numeric},
‰∏é
@option{--version}
ÊòØÁõ∏Â∫îÁöÑÈïøÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ
@end itemize

@c       new ports

@item
ÊîØÊåÅ‰∏ãÈù¢ÁöÑ‰∏ãÈù¢ËøáÊó∂Á≥ªÁªüÁöÑË¢´‰ªé @command{gawk} 4.0 ÁâàÊú¨ÁöÑ‰ª£Á†Å‰∏éÊñáÊ°£‰∏≠ÁßªÈô§„ÄÇ

@c nested table
@itemize @value{MINUS}
@item
Amiga

@item
Atari

@item
BeOS

@item
Cray

@item
MIPS RiscOS

@item
MS-DOS with the Microsoft Compiler

@item
MS-Windows with the Microsoft Compiler

@item
NeXT

@item
SunOS 3.x, Sun 386 (Road Runner)

@item
Tandem (non-POSIX)

@item
Prestandard VAX C compiler for VAX/VMS

@item
GCC for VAX and Alpha has not been tested for a while.

@end itemize

@item
ÊîØÊåÅ‰∏ãÈù¢ËøáÊó∂Á≥ªÁªü‰ªé @command{gawk} 4.1 ÁâàÊú¨‰∏≠Ë¢´ÁßªÈô§‰∫Ü„ÄÇ

@c nested table
@itemize @value{MINUS}
@item
Ultrix
@end itemize

@end itemize

@c XXX ADD MORE STUFF HERE


@c This does not need to be in the formal book.
@ifclear FOR_PRINT
@node Feature History
@appendixsec @command{gawk} ÁâπÊÄßÂéÜÂè≤

@ignore
See the thread:
https://groups.google.com/forum/#!topic/comp.lang.awk/SAUiRuff30c
This motivated me to add this section.
@end ignore

@ignore
I've tried to follow this general order, esp.@: for the 3.0 and 3.1 sections:
       variables
       special files
       language changes (e.g., hex constants)
       differences in standard awk functions
       new gawk functions
       new keywords
       new command-line options
       behavioral changes
       new ports
Within each category, be alphabetical.
@end ignore

Ëøô‰∏Ä@value{SECTION}ÊèèËø∞Â≠òÂú® @command{gawk} ‰ΩÜÊòØ‰∏çÂú® POSIX @command{awk} ‰∏≠ÁöÑÁâπÊÄßÔºåÂÆâÂÆÉ‰ª¨Âä†ÂÖ•Âà∞ @command{gawk} ‰∏≠ÁöÑÈ°∫Â∫èËøõË°åÊéíÂ∫è„ÄÇ

@command{gawk} 2.10 ÁâàÊú¨ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}
@item
@code{AWKPATH} ÁéØÂ¢ÉÂèòÈáèÁî®‰∫éÊåáÈíà @option{-f} ÂëΩ‰ª§Ë°åÈÄâÈ°πÊåáÂÆöÊêúÁ¥¢Ë∑ØÂæÑÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ

@item
@code{IGNORECASE} ÂèòÈáèÂèäÂÖ∂ÊïàÊûúÔºàÊü•Áúã @pxref{Case-sensitivity}Ôºâ„ÄÇ

@item
@file{/dev/stdin}Ôºå@file{/dev/stdout}Ôºå@file{/dev/stderr} ‰∏é
@file{/dev/fd/@var{N}} ÁâπÊÆäÊñá‰ª∂ÂêçÔºàÊü•Áúã @pxref{Special Files}Ôºâ„ÄÇ
@end itemize

@command{gawk} 2.13 ÁâàÊú¨ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}
@item
@code{FIELDWIDTHS} ÂèòÈáè‰∏éÂÖ∂ÊïàÊûúÔºàÊü•Áúã @pxref{Constant Size}Ôºâ„ÄÇ

@item
@code{systime()} ‰∏é @code{strftime()} ÂÜÖÁΩÆÂáΩÊï∞Áî®Êù•Ëé∑ÂèñÂèäÊâìÂç∞Êó∂Èó¥Êà≥ÔºàÊü•Áúã @pxref{Time Functions}Ôºâ„ÄÇ

@item
È¢ùÂ§ñÁöÑÂëΩ‰ª§ÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}ÔºâÔºö

@itemize @value{MINUS}
@item
@option{-W lint} ÈÄâÈ°πÁî®‰∫éÊèê‰æõÊ∫ê‰ª£Á†Å‰∏éËøêË°åÊó∂ÁöÑÈîôËØØ‰∏éÂèØÁßªÊ§çÊÄßÊ£ÄÊµã„ÄÇ

@item
@option{-W compat} ÂÖºÂÆπÈÄâÈ°πÁî®Êù•ÂÖ≥Èó≠ GNU Êâ©Â±ï„ÄÇ

@item
@option{-W posix} ÈÄâÈ°πÁî®Êù•ÂÆûÁé∞ÂÆåÂÖ®ÁöÑ POSIX ÂÖºÂÆπ„ÄÇ
@end itemize
@end itemize

2.14 ÁâàÊú¨ÁöÑ @command{gawk} ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}
@item
@code{nextfile} ËØ≠Âè•Áî®Êù•Ë∑≥Âà∞‰∏ã‰∏Ä‰∏™Êï∞ÊçÆÊñá‰ª∂ÔºàÊü•Áúã @pxref{Nextfile Statement}Ôºâ„ÄÇ
@end itemize

2.15 ÁâàÊú¨ @command{gawk} ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}
@item
Êñ∞ÁöÑÂèòÈáèÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÔºö

@itemize @value{MINUS}
@item
@code{ARGIND} Áî®Êù•Ë∑üË∏™ @code{ARGV} ‰∏≠ÁöÑ @code{FILENAME} ÁöÑÁßªÂä®„ÄÇ

@item
@code{ERRNO} Âú® @code{getline} ËøîÂõû @minus{}1 ÊàñËÄÖ @code{close()} Â§±Ë¥•Êó∂ÂåÖÂê´‰∫ÜÁ≥ªÁªüÁöÑÈîôËØØ‰ø°ÊÅØ„ÄÇ
@end itemize

@item
@file{/dev/pid}Ôºå@file{/dev/ppid}Ôºå@file{/dev/pgrpid}Ôºå‰∏é
@file{/dev/user} ÁâπÊÆäÊñá‰ª∂ÂêçÔºåËøô‰∫õÂ∑≤ÁªèË¢´ÁßªÈô§„ÄÇ

@item
ÂèØ‰ª•‰ΩøÁî®‰∏ÄÊ¨° @samp{delete @var{array}} Êù•Âà†Èô§Êï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂÖÉÁ¥†ÔºàÊü•Áúã @pxref{Delete}Ôºâ„ÄÇ

@item
ÂëΩ‰ª§Ë°åÈÄâÈ°πÂèòÂåñ ÔºàÊü•Áúã @pxref{Options}ÔºâÔºö

@itemize @value{MINUS}
@item
ÂèØ‰ª•‰ΩøÁî® GNU È£éÊ†ºÁöÑ‰ª• @option{--} ÂºÄÂßãÁöÑÈïøÈÄâÈ°π„ÄÇ

@item
ÈÄöËøá @option{--source} ÈÄâÈ°πÊù•Ê∑∑ÂêàÂëΩ‰ª§Ë°å‰∏éÂ∫ìÊñá‰ª∂Ê∫ê‰ª£Á†Å„ÄÇ
@end itemize
@end itemize

3.0 ÁâàÊú¨ÁöÑ @command{gawk} ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}
@item
Êñ∞ÁöÑÊàñËÄÖÂèòÂåñ‰∫ÜÁöÑÂèòÈáèÔºö

@itemize @value{MINUS}
@item
@code{IGNORECASE} Â∑≤ÁªèÂèòÂåñÔºåÁé∞Âú®ÂèØ‰ª•Áî®‰∫éÂ≠ó‰∏≤ÊØîËæÉ‰ª•ÂèäÊ≠£ÂàôË°®ËææÂºèÊìç‰ΩúÔºàÊü•Áúã @pxref{Case-sensitivity}Ôºâ„ÄÇ

@item
@code{RT} ÂÖ∂‰∏≠ÂåÖÂê´‰∫ÜËæìÂÖ•‰∏≠ÂåπÈÖç @code{RS} ÁöÑÊñáÊú¨ÔºàÊü•Áúã @pxref{Records}Ôºâ„ÄÇ
@end itemize

@item
ÂÆåÂÖ®ÊîØÊåÅ POSIX ‰∏é GNU Ê≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @pxref{Regexp}Ôºâ„ÄÇ

@item
@code{gensub()} ÂáΩÊï∞ÂèØ‰ª•ÂÆûÁé∞Êõ¥Âº∫Â§ßÁöÑÊñáÊú¨Êìç‰ΩúÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{strftime()} ÂáΩÊï∞ÈúÄË¶Å‰∏Ä‰∏™ÈªòËÆ§ÁöÑÊó∂Èó¥Ê†ºÂºèÔºåÂèØ‰ª•‰∏çÁî®ÂèÇÊï∞Â∞±ÂèØ‰ª•Ë∞ÉÁî®ÔºàÊü•Áúã @pxref{Time Functions}Ôºâ„ÄÇ

@item
@code{FS} ‰∏é @code{split()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÂèØ‰ª•ÊòØÁ©∫‰∏≤ÔºàÊü•Áúã @pxref{Single Character Fields}Ôºâ„ÄÇ

@item
@code{RS} ÂèØ‰ª•ÊòØ‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÔºàÊü•Áúã @pxref{Records}Ôºâ„ÄÇ

@item
@code{next file} ËØ≠Âè•ÂèòÊàê @code{nextfile}ÔºàÊü•Áúã @pxref{Nextfile Statement}Ôºâ„ÄÇ

@item
Êù•Ëá™‰∫é BWK @command{awk} ÁöÑ @code{fflush()} ÂáΩÊï∞ÔºàÂΩìÊó∂Âú® Bell LaboratoriesÔºåÊü•Áúã @pxref{I/O Functions}Ôºâ„ÄÇ

@item
Êñ∞ÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºö

@itemize @value{MINUS}
@item
@option{--lint-old} ÈÄâÈ°πÊù•Ë≠¶ÂëäÂú®ÂàùÂßãÁöÑ Version 7 Unix ÁâàÊú¨‰∏≠ÁöÑ @command{awk} ‰∏≠‰∏çÊîØÊåÅÁöÑÁªìÊûÑÔºàÊü•Áúã @pxref{V7/SVR3.1}Ôºâ„ÄÇ

@item
Êù•Ëá™‰∫é BWK @command{awk} ÁöÑ @option{-m} ÈÄâÈ°π„ÄÇÔºàBrian ÈÇ£‰∏™Êó∂ÂÄôËøòÊòØÂú® Bell LaboratoriesÔºâ‰πãÂêé‰ªé‰ªñÁöÑ @command{awk} ‰∏é @command{gawk} ‰∏≠ÈÉΩÁßªÈô§‰∫Ü„ÄÇ

@item
@option{--re-interval} ÈÄâÈ°πÁî®Êù•Êèê‰æõÂú®Ê≠£ÂàôË°®ËææÂºè‰∏≠Êèê‰æõÂå∫Èó¥Ë°®ËææÂºèÔºàÊü•Áúã @pxref{Regexp Operators}Ôºâ„ÄÇ

@item
@option{--traditional} ÈÄâÈ°πÊ∑ªÂä†Êàê‰∏∫ @option{--compat} Êõ¥Â•ΩÁöÑÂêçÂ≠óÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ
@end itemize

@item
‰ΩøÁî® GNU Autoconf Êù•ÊéßÂà∂ÈÖçÁΩÆËøáÁ®ãÔºàÊü•Áúã @pxref{Quick Installation}Ôºâ„ÄÇ

@item
ÊîØÊåÅ Amiga„ÄÇËøôÂ∑≤ÁªèË¢´ÁßªÈô§‰∫Ü„ÄÇ

@end itemize

3.1 ÁâàÊú¨ÁöÑ @command{gawk} ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}
@item
Êñ∞ÁöÑÂèòÈáèÔºàÊü•Áúã @pxref{Built-in Variables}ÔºâÔºö

@itemize @value{MINUS}
@item
@code{BINMODE} ÔºåÊù•Ëá™‰∫éÈùû POSIX Á≥ªÁªüÔºåÂèØ‰ª•Áî®‰∫é‰∫åËøõÂà∂ I/O ËæìÂÖ•ËæìÂá∫Êñá‰ª∂ÔºàÊü•Áúã @pxref{PC Using}Ôºâ„ÄÇ

@item
@code{LINT} Áî®Êù•Âä®ÊÄÅÂú∞ÊéßÂà∂ lint ÂëäË≠¶„ÄÇ

@item
@code{PROCINFO} ÊòØÊèê‰æõ‰∫ÜËøõÁ®ãÁõ∏ÂÖ≥‰ø°ÊÅØÁöÑÊï∞ÁªÑ„ÄÇ

@item
@code{TEXTDOMAIN} Áî®Êù•ËÆæÁΩÆÁ®ãÂ∫èÁöÑÂõΩÈôÖÂåñÊñá‰ª∂ÂüüÔºàÊü•Áúã @pxref{Internationalization}Ôºâ„ÄÇ
@end itemize

@item
ÂèØ‰ª•Âú® @command{awk} Á®ãÂ∫èÊ∫ê‰ª£Á†Å‰∏≠‰ΩøÁî®ÂÖ´ËøõÂà∂‰∏éÂçÅÂÖ≠ËøõÂà∂ÔºàÊü•Áúã @pxref{Nondecimal-numbers}Ôºâ„ÄÇ

@item
‰ΩøÁî® @samp{|&} Êù•‰∏éÂπ∂Á®ãËøõË°åÂèåË∑Ø I/OÔºàÊü•Áúã @pxref{Two-way I/O}Ôºâ„ÄÇ

@item
‰ΩøÁî® @file{/inet} ‰ª•Âèä @samp{|&} ÁâπÊÆäÊñá‰ª∂Êù•ËøõË°å TCP/IP ÁΩëÁªúÈÄö‰ø°ÔºàÊü•Áúã @pxref{TCP/IP Networking}Ôºâ„ÄÇ

@item
@code{close()} Á¨¨‰∫å‰∏™ÂèØÈÄâÂèÇÊï∞ÂèØ‰ª•Áî®‰∫éÂÖ≥Èó≠Âà∞Âπ∂Á®ãÁöÑÂèåÂêëÁÆ°ÈÅìÁöÑ‰∏ÄÁ´ØÔºàÊü•Áúã @pxref{Two-way I/O}Ôºâ„ÄÇ

@item
@code{match()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèØÈÄâÂèÇÊï∞Áî®‰∫éÊçïËé∑Ê≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÊñáÊú¨ÂåπÈÖçÂ≠êË°®ËææÂºèÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{printf} Ê†ºÂºè‰∏≠ÁöÑ‰ΩçÁΩÆÊåáÂÆöÁ¨¶Áî®‰∫é‰ΩøÂõΩÈôÖÂåñÊõ¥‰∏∫ÁÆÄÂçïÔºàÊü•Áúã @pxref{Printf Ordering}Ôºâ„ÄÇ

@item
Â§ö‰∏™Êñ∞ÁöÑÂÜÖÁΩÆÂáΩÊï∞Ôºö

@itemize @value{MINUS}
@item
@code{asort()} ‰∏é @code{asorti()} ÂáΩÊï∞Áî®‰∫éÊéíÂ∫èÊï∞ÁªÑÔºàÊü•Áúã @pxref{Array Sorting}Ôºâ„ÄÇ

@item
@code{bindtextdomain()}Ôºå@code{dcgettext()} ‰∏é @code{dcngettext()} ÂáΩÊï∞Áî®‰∫éÂõΩÈôÖÂåñÔºàÊü•Áúã @pxref{Programmer i18n}Ôºâ„ÄÇ

@item
@code{extension()} ÂáΩÊï∞‰ª•ÂèäÂä®ÊÄÅÊ∑ªÂä†Êñ∞ÁöÑÂÜÖÁΩÆÂáΩÊï∞ÔºàÊü•Áúã @pxref{Dynamic Extensions}Ôºâ„ÄÇ

@item
@code{mktime()} ÂáΩÊï∞Áî®‰∫éÂàõÂª∫Êó∂Èó¥Êà≥ÔºàÊü•Áúã @pxref{Time Functions}Ôºâ„ÄÇ

@item
@code{and()}Ôºå@code{or()}Ôºå@code{xor()}Ôºå@code{compl()}Ôºå@code{lshift()}Ôºå@code{rshift()} ‰∏é @code{strtonum()} ÂáΩÊï∞ÔºàÊü•Áúã @pxref{Bitwise Functions}Ôºâ„ÄÇ
@end itemize

@item
@cindex @code{next file} statement
ÊîØÊåÅ @samp{next file} ‰∏∫‰∏§‰∏™ÂçïËØçÁöÑËØ≠Âè•Â∑≤ÁªèÂÆåÂÖ®ÁßªÈô§ÔºàÊü•Áúã @pxref{Nextfile Statement}Ôºâ„ÄÇ

@item
È¢ùÂ§ñÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}ÔºâÔºö

@itemize @value{MINUS}
@item
@option{--dump-variables} ÈÄâÈ°πÁî®‰∫éÊâìÂç∞ÊâÄÊúâÁöÑÂÖ®Â±ÄÂèòÈáèÁöÑÂàóË°®„ÄÇ

@item
@option{--exec} ÈÄâÈ°πÁî®‰∫é CGI ËÑöÊú¨„ÄÇ

@item
@option{--gen-po} ÂëΩ‰ª§ÈÄâÈ°π‰ª•ÂèäÂâçÁΩÆ‰∏ãÂàíÁ∫øÁöÑ‰ΩøÁî®Êù•Ê†áÂøóË¶ÅË¢´ÁøªËØëÁöÑÂ≠ó‰∏≤ÔºàÊü•Áúã @pxref{String Extraction}Ôºâ„ÄÇ

@item
@option{--non-decimal-data} ÈÄâÈ°πÂèØ‰ª•ËæìÂÖ•ÈùûÂçÅËøõÂà∂Êï∞ÔºàÊü•Áúã @pxref{Nondecimal Data}Ôºâ„ÄÇ

@item
@option{--profile} ÈÄâÈ°π‰ª•Âèä @code{pgawk}Ôºà@command{gawk} ÁöÑ profiling ÁâàÊú¨ÔºâÁî®‰∫é‰∫ßÁîü @command{awk} Á®ãÂ∫èÁöÑÊâßË°åÁªüËÆ°ÔºàÊü•Áúã @pxref{Profiling}Ôºâ„ÄÇ

@item
@option{--use-lc-numeric} ÈÄâÈ°πÂº∫Âà∂ @command{gawk} ‰ΩøÁî®Êú¨Âú∞ËØ≠Ë®ÄÁöÑÂçÅËøõÂà∂Êï∞Â∞èÊï∞ÁÇπÊù•ÂàÜÊûêËæìÂÖ•Êï∞ÊçÆÔºàÊü•Áúã @pxref{Conversion}Ôºâ„ÄÇ
@end itemize

@item
‰ΩøÁî® GNU Automake Êù•ËæÖÂä©ÈÖçÁΩÆËøáÁ®ãÁöÑÊ†áÂáÜÂåñÔºàÊü•Áúã @pxref{Quick Installation}Ôºâ„ÄÇ

@item
‰ΩøÁî® GNU ÁöÑ @command{gettext} Êù•‰Ωú‰∏∫ @command{gawk} Ëá™Â∑±ÁöÑÊ∂àÊÅØËæìÂá∫ÔºàÊü•Áúã @pxref{Gawk I18N}Ôºâ„ÄÇ

@item
BeOS ÊîØÊåÅ„ÄÇÂêéÈù¢Ë¢´ÁßªÈô§‰∫Ü„ÄÇ

@item
Tandem ÊîØÊåÅ„ÄÇÂêéÈù¢Ë¢´ÁßªÈô§‰∫Ü„ÄÇ

@item
Atari ÁßªÊ§çÁâàÊú¨‰∏çË¢´ÂÆòÊñπÊîØÊåÅÂêéÈù¢Êï¥‰∏™Âú∞ÁßªÈô§‰∫Ü„ÄÇ

@item
Ê∫ê‰ª£Á†ÅÊîπÊàê‰ΩøÁî® ISO C Ê†áÂáÜÈ£éÊ†ºÁöÑÂáΩÊï∞ÂÆö‰πâ„ÄÇ

@item
POSIX ÂÖºÂÆπ @code{sub()} ‰∏é @code{gsub()}ÔºàÊü•Áúã @pxref{Gory Details}Ôºâ„ÄÇ

@item
@code{length()} ÂáΩÊï∞Ë¢´Êâ©Â±ï‰∏∫Êé•ÂèóÊï∞ÁªÑÂèÇÊï∞ÔºåÂπ∂ËøîÂõûÊï∞ÁªÑ‰∏≠ÂÖÉÁ¥†ÁöÑ‰∏™Êï∞ÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{strftime()} ÂáΩÊï∞ÈúÄË¶ÅÁ¨¨‰∏â‰∏™ÂèÇÊï∞Êù•ÂêØÁî®ÊâìÂç∞ UTC Êó∂Èó¥ÔºàÊü•Áúã @pxref{Time Functions}Ôºâ„ÄÇ
@end itemize

@command{gawk} 4.0 ÁâàÊú¨ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}

@item
Ê∑ªÂä†ÁöÑÂèòÈáèÔºö

@itemize @value{MINUS}
@item
@code{FPAT} ÂèØ‰ª•ËÆ©‰Ω†ÊåáÂÆö‰∏Ä‰∏™Ê≠£ÂàôË°®ËææÂºèÊù•ÂåπÈÖçÂüüÔºåËÄå‰∏çÊòØÂåπÈÖçÂüüÂàÜÈöîÁ¨¶ÔºàÊü•Áúã @pxref{Splitting By Content}Ôºâ„ÄÇ

@item
Â¶ÇÊûúÂ≠òÂú® @code{PROCINFO["sorted_in"]}ÔºåÂàô @samp{for(iggy in foo)} Âæ™ÁéØ‰ºöÂú®Âæ™ÁéØÂºÄÂßã‰πãÂâçÂØπÁ¥¢ÂºïÊéíÂ∫è„ÄÇËøô‰∏™ÂÖÉÁ¥†ÁöÑÂÄºÊèê‰æõÂú®Âæ™ÁéØÈÅçÂéÜÂºÄÂßã‰πãÂâçÊéßÂà∂Â¶Ç‰ΩïÊù•ÂØπÁ¥¢ÂºïÊù•ËøõË°åÊéíÂ∫èÔºàÊü•Áúã @pxref{Controlling Scanning}Ôºâ„ÄÇ

@item
@code{PROCINFO["strftime"]} Áî®‰∫é‰øùÂ≠ò @code{strftime()} ÁöÑÈªòËÆ§Ê†ºÂºèÔºàÊü•Áúã @pxref{Time Functions}Ôºâ„ÄÇ
@end itemize

@item
ÁßªÈô§ÁâπÊÆäÊñá‰ª∂ @file{/dev/pid}Ôºå@file{/dev/ppid}Ôºå@file{/dev/pgrpid} ‰∏é @file{/dev/user}„ÄÇ

@item
ÈÄöËøá @file{/inet6} ÁâπÊÆäÊñá‰ª∂Êù•ÊîØÊåÅ IPv6„ÄÇ@file{/inet4} Âº∫Âà∂‰ΩøÁî® IPv4ÔºåËÄå @file{/inet} Âàô‰ΩøÁî®Á≥ªÁªüÈªòËÆ§ÁöÑÂçèËÆÆÔºå‰∏ÄËà¨ÊòØ IPv4ÔºàÊü•Áúã @pxref{TCP/IP Networking}Ôºâ„ÄÇ

@item
Âú®Ê≠£ÂàôË°®ËææÂºè‰∏≠‰ΩøÁî® @samp{\s} ‰∏é @samp{\S} ËΩ¨Êç¢Â∫èÂàóÔºàÊü•Áúã @pxref{GNU Regexp Operators}Ôºâ„ÄÇ

@item
Âå∫Èó¥Ë°®ËææÂºèÊàê‰∏∫ÈªòËÆ§Ê≠£ÂàôË°®ËææÂºèÁöÑ‰∏ÄÈÉ®‰ªΩÔºàÊü•Áúã @pxref{Regexp Operators}Ôºâ„ÄÇ

@item
Âç≥‰Ωø‰ΩøÁî® @option{--traditional} ÊÉÖÂÜµ‰∏ãÔºå‰πüÂèØ‰ª•‰ΩøÁî® POSIX Â≠óÁ¨¶Á±ªÂûãÔºàÊü•Áúã @pxref{Regexp Operators}Ôºâ„ÄÇ

@item
@code{break} ‰∏é @code{continue} Âú®Âæ™ÁéØÂ§ñ‰∏çÂÜçÊúâÊïàÔºåÂç≥‰Ωø‰ΩøÁî® @option{--traditional} ÈÄâÈ°πÔºàÊü•Áúã @pxref{Break Statement}Ôºå‰ª•Âèä @ref{Continue Statement}Ôºâ„ÄÇ

@item
@code{fflush()}Ôºå@code{nextfile}Ôºå‰∏é @samp{delete @var{array}} Âú®‰ΩøÁî® @option{--posix} ÊàñËÄÖ @option{--traditional} ÈÄâÈ°π‰∏ã‰πüÊòØÂÖÅËÆ∏ÁöÑÔºåÂõ†Ê≠§ÂÆÉ‰ª¨Â∑≤ÁªèÊòØ POSIX Ê†áÂáÜÁöÑ‰∏ÄÈÉ®ÂàÜ„ÄÇ

@item
@code{asort()} ‰∏é @code{asorti()} ÂáΩÊï∞ÊúâÂèØÈÄâÁöÑÁ¨¨‰∏â‰∏™ÂèÇÊï∞ÔºåÁî®‰∫éÊåáÂÆöÂ¶Ç‰ΩïÊù•ÊéíÂ∫èÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{fflush()} ÁöÑË°å‰∏∫Â∑≤ÁªèÊîπÊàê‰∏é BWK @command{awk} ‰ª•Âèä POSIX ÂåπÈÖçÔºåÁé∞Âú® @samp{fflush()} ‰∏é @samp{fflush("")} ‰ºöÂà∑Âá∫ÊâÄÊúâÁöÑÈáçÂÆöÂêëËæìÂá∫ÔºàÊü•Áúã @pxref{I/O Functions}Ôºâ„ÄÇ

@item
@code{isarray()} ÂáΩÊï∞ÂèØ‰ª•Áî®‰∫éËØÜÂà´Êüê‰∏™È°πÊòØÂê¶‰∏∫Êï∞ÁªÑÔºåËøôÊ†∑ÂèØ‰ª•Êù•Áî®‰∫éËøõË°åÊï∞ÁªÑ‰πãÊï∞ÁªÑÁöÑÈÅçÂéÜÔºàÊü•Áúã @pxref{Type Functions}Ôºâ„ÄÇ

@item
@code{patsplit()} ÂáΩÊï∞ÂèØ‰ª•Êúâ‰∏é @code{FPAT} ‰∏ÄÊ†∑ÁöÑÂàÜÂâ≤ËÉΩÂäõÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
@code{split()} ÂáΩÊï∞ÁöÑÁ¨¨Âõõ‰∏™ÂèØÈÄâÂèÇÊï∞ÊòØÁî®‰∫éÂ≠òÊîæÂàÜÂâ≤Á¨¶ÁöÑÊï∞ÁªÑÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇ

@item
Êï∞ÁªÑ‰πãÊï∞ÁªÑÔºàÊü•Áúã @pxref{Arrays of Arrays}Ôºâ„ÄÇ

@item
@code{BEGINFILE} ‰∏é @code{ENDFILE} ÁâπÂÆöËßÑÂàôÔºàÊü•Áúã @pxref{BEGINFILE/ENDFILE}Ôºâ„ÄÇ

@item
Èó¥Êé•ÂáΩÊï∞Ë∞ÉÁî®ÔºàÊü•Áúã @pxref{Indirect Calls}Ôºâ„ÄÇ

@item
@code{switch} / @code{case} ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊòØÂêØÁî®ÁöÑÔºàÊü•Áúã @pxref{Switch Statement}Ôºâ„ÄÇ

@item
ÊîπÂèòÁöÑÂëΩ‰ª§Ë°åÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}ÔºâÔºö

@itemize @value{MINUS}
@item
@option{-b} ‰∏é @option{--characters-as-bytes} ÈÄâÈ°πÁî®Êù•Èò≤Ê≠¢ @command{gawk} Â∞ÜËæìÂÖ•ÂΩìÊàêÂ§öÂ≠óËäÇÂ≠ó‰∏≤Êù•Â§ÑÁêÜ„ÄÇ

@item
Â§ö‰ΩôÁöÑ @option{--compat}Ôºå@option{--copyleft} ‰∏é @option{--usage} ÈïøÈÄâÈ°πÂ∑≤ÁªèË¢´ÁßªÈô§„ÄÇ

@item
@option{--gen-po} ÈÄâÈ°πÊúÄÂêéË¢´ÊîπÂêç‰∏∫ @option{--gen-pot}„ÄÇ

@item
@option{--sandbox} ÈÄâÈ°πÂèØ‰ª•Á¶ÅÁî®ÁâπÂÆöÁöÑÁâπÊÄß„ÄÇ

@item
ÊâÄÊúâÁöÑÈïøÈÄâÈ°πÈÉΩÈúÄË¶ÅÊúâÁõ∏Â∫îÁöÑÁü≠ÈÄâÈ°πÔºå‰ª•Áî®‰∫é @samp{#!} ËÑöÊú¨„ÄÇ
@end itemize

@item
Âú®ÂëΩ‰ª§Ë°å‰∏äËæìÂÖ•‰∫ÜÁõÆÂΩïÂêçÁé∞Âú®‰ºö‰∫ßÁîüÂëäË≠¶ÔºåËÄå‰∏çÊòØËá¥ÂëΩÈîôËØØ„ÄÇÈô§Èùû‰ΩøÁî®‰∫Ü @option{--posix} ÊàñËÄÖ @option{--traditional} ÈÄâÈ°πÔºàÊü•Áúã @pxref{Command-line directories}Ôºâ„ÄÇ

@item
ÈáçÂÜô‰∫Ü @command{gawk} Âå∫Èó¥Ë°®ËææÂºèÔºåÂºïÂÖ•‰∫Ü @code{dgawk} ÁöÑË∞ÉËØïÂô®ÔºåÂπ∂Â¢ûÂº∫‰∫Ü‰∏Ä‰∫õÊÄßËÉΩÔºàÊü•Áúã @pxref{Debugger}Ôºâ„ÄÇ

@item
Ê†πÊçÆ GNU ÁºñÁ†ÅÊ†áÂáÜÔºåÂä®ÊÄÅÊâ©Â±ïÂøÖÈ°ªË¶ÅÂÆö‰πâ‰∏Ä‰∏™ÂÖ®Â±ÄÁ¨¶Âè∑Êù•ÊåáÁ§∫ÂÆÉ‰ª¨ÊòØ‰ΩøÁî® GPL ÂÖºÂÆπÁöÑÂçèËÆÆÔºàÊü•Áúã @pxref{Plugin License}Ôºâ„ÄÇ

@item
Âú® POSIX Ê®°Âºè‰∏ãÔºå‰ΩøÁî® @code{strcoll()} / @code{wcscoll()} Êù•ËøõË°åÂ≠ó‰∏≤ÊØîËæÉÔºàÊü•Áúã @pxref{POSIX String Comparison}Ôºâ„ÄÇ

@item
Áî®‰∫éËøõË°åÂéüÁîü Socket ÈÄö‰ø°ÁöÑÈÄâÈ°πË¢´ÁßªÈô§‰∫ÜÔºåÂõ†‰∏∫ÂÆÉ‰ªéÊù•Ê≤°ÊúâË¢´ÂÆûÁé∞ÔºàÊü•Áúã @pxref{TCP/IP Networking}Ôºâ„ÄÇ

@item
@samp{[d-h]} ÂΩ¢ÂºèÁöÑËåÉÂõ¥‰ºöË¢´ÂΩìÊàêÂú® C ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠‰∏ÄÊ†∑ÂØπÂæÖÔºå‰∏çÁÆ°‰ΩøÁî®ÁöÑÊòØ‰ªÄ‰πàÊ†∑ÁöÑÊ≠£ÂàôË°®ËææÂºèÔºåÂç≥‰Ωø‰ΩøÁî®‰∫Ü @option{--posix}ÔºàÊü•Áúã @pxref{Ranges and Locales}Ôºâ„ÄÇ

@item
ÂØπ‰∏ãÈù¢Á≥ªÁªüÁöÑÊîØÊåÅË¢´ÁßªÈô§‰∫ÜÔºö

@itemize @value{MINUS}
@item
Atari

@item
Amiga

@item
BeOS

@item
Cray

@item
MIPS RiscOS

@item
MS-DOS with Microsoft Compiler

@item
MS-Windows with Microsoft Compiler

@item
NeXT

@item
SunOS 3.x, Sun 386 (Road Runner)

@item
Tandem (non-POSIX)

@item
Prestandard VAX C compiler for VAX/VMS
@end itemize
@end itemize

4.1 ÁâàÊú¨ÁöÑ @command{gawk} ÂºïÂÖ•‰∫Ü‰∏ãÈù¢ÁöÑÁâπÊÄßÔºö

@itemize @value{BULLET}

@item
Êñ∞Âä†‰∫Ü‰∏â‰∏™ÂèòÈáèÔºö@code{SYMTAB}Ôºå@code{FUNCTAB}Ôºå‰ª•Âèä @code{PROCINFO["identifiers"]}ÔºàÊü•Áúã @pxref{Auto-set}Ôºâ„ÄÇ

@item
@command{gawk}Ôºå@code{pgawk} ‰∏é @code{dgawk} Ë¢´Êï¥Âêà‰∏∫‰∏ÄÔºåÂπ∂ÂëΩÂêç‰∏∫ @command{gawk}„ÄÇÂõ†‰∏∫‰ªÖÊòØÂëΩ‰ª§Ë°åÈÄâÈ°πÊúâÂèòÂåñ„ÄÇ

@item
ÊîπÂèòÁöÑÂëΩ‰ª§Ë°åÔºàÊü•Áúã @pxref{Options}ÔºâÔºö

@itemize @value{MINUS}
@item
@option{-D} ÈÄâÈ°πÁî®Êù•Ë∞ÉÁî®Ë∞ÉËØïÂô®„ÄÇ

@item
@option{-i} ‰∏é @option{--include} ÈÄâÈ°πÁî®‰∫éËΩΩÂÖ• @command{awk} Â∫ìÊñá‰ª∂„ÄÇ

@item
@option{-l} ‰∏é @option{--load} ÈÄâÈ°πÁî®‰∫éËΩΩÂÖ•ÁºñËØëÂ•ΩÁöÑÂä®ÊÄÅÊâ©Â±ï„ÄÇ

@item
@option{-M} ‰∏é @option{--bignum} ÈÄâÈ°πÁî®‰∫éÂêØÁî® @code{MPFR}„ÄÇ

@item
@option{-o} ÈÄâÈ°πÁî®‰∫éÁÆÄÊ¥ÅÊâìÂç∞„ÄÇ

@item
@option{-p} ÈÄâÈ°πÁî®‰∫éÊÄßËÉΩÁªüËÆ°„ÄÇ

@item
ÁßªÈô§‰∫Ü @option{-R} ÈÄâÈ°π„ÄÇ
@end itemize

@item
ÊîØÊåÅ @code{MPFR} Êù•ÊîØÊåÅÈ´òÁ≤æÂ∫¶ÁÆóÊúØËÆ°ÁÆó„ÄÇÔºàÊü•Áúã @pxref{Arbitrary Precision Arithmetic}Ôºâ„ÄÇ

@item
@code{and()}Ôºå@code{or()} ‰∏é @code{xor()} ÂáΩÊï∞Êõ¥ÊîπÊàêÂèØ‰ª•Êé•Âèó‰ªªÊÑèÊï∞ÈáèÁöÑÂèÇÊï∞ÔºåÊúÄÂ∞è‰∏∫‰∏§‰∏™ÔºàÊü•Áúã @pxref{Bitwise Functions}Ôºâ„ÄÇ

@item
Âä®ÊÄÅÊâ©Â±ïÊé•Âè£ÂÆåÂÖ®ÂÖ®ËøõË°å‰∫ÜÈáçÊûÑÔºàÊü•Áúã @pxref{Dynamic Extensions}Ôºâ„ÄÇ

@item
Âú® @code{BEGINFILE} ‰∏é @code{ENDFILE} ËßÑÂàô‰∏≠‰πüÂÖÅËÆ∏ÈáçÂÆöÂêëÁöÑ @code{getline}ÔºàÊü•Áúã @pxref{BEGINFILE/ENDFILE}Ôºâ„ÄÇ

@item
@code{where} ÂëΩ‰ª§Ë¢´Ê∑ªÂä†Âà∞‰∫ÜË∞ÉËØïÂô®‰∏≠ÔºàÊü•Áúã @pxref{Execution Stack}Ôºâ„ÄÇ

@item
ÁßªÈô§‰∫Ü Ultrix„ÄÇ

@end itemize

@c XXX ADD MORE STUFF HERE
@end ifclear

@node Common Extensions
@appendixsec ÈÄöÁî®Êâ©Â±ïÊ±áÊÄª

@cindex extensions, Brian Kernighan's @command{awk}
@cindex extensions, @command{mawk}
‰∏ãÈù¢ÁöÑË°®‰∏≠ÂΩíÁ∫≥‰∫ÜÁî± @command{gawk}ÔºåBrian Kernighan @command{awk} ‰∏é @command{mawk} ÊâÄÊîØÊåÅÁöÑÈÄöÁî®Êâ©Â±ï„ÄÇËøôÊòØ‰∏â‰∏™Áî®ÂæóÊúÄÂ§öÔºåÂπ∂‰∏îÂèØ‰ª•Ëá™Áî±Ëé∑ÂèñÁöÑ @command{awk} ÁâàÊú¨ÔºàÊü•Áúã @pxref{Other Versions}Ôºâ„ÄÇ

@multitable {@file{/dev/stderr} ÁâπÊÆäÊñá‰ª∂} {BWK @command{awk}} {@command{mawk}} {@command{gawk}} {ÁõÆÂâçÊ†áÂáÜ}
@headitem Feature @tab BWK @command{awk} @tab @command{mawk} @tab @command{gawk} @tab ÁõÆÂâçÊ†áÂáÜ
@item @samp{\x} ËΩ¨‰πâÂ∫èÂàó @tab X @tab X @tab X @tab
@item @code{FS} ‰∏∫Á©∫‰∏≤ @tab X @tab X @tab X @tab
@item @file{/dev/stdin} ÁâπÊÆäÊñá‰ª∂ @tab X @tab X @tab X @tab
@item @file{/dev/stdout} ÁâπÊÆäÊñá‰ª∂ @tab X @tab X @tab X @tab
@item @file{/dev/stderr} ÁâπÊÆäÊñá‰ª∂ @tab X @tab X @tab X @tab
@item @code{delete} ‰∏çÈúÄË¶Å‰∏ãÊ†áÁöÑÊï∞ÁªÑ @tab X @tab X @tab X @tab X
@item @code{fflush()} ÂáΩÊï∞ @tab X @tab X @tab X @tab X
@item @code{length()} ÁöÑÊï∞ÁªÑÁâàÊú¨ @tab X @tab X @tab X @tab
@item @code{nextfile} ËØ≠Âè• @tab X @tab X @tab X @tab X
@item @code{**} Âíå @code{**=} Êìç‰ΩúÁ¨¶ @tab X @tab @tab X @tab
@item @code{func} ÂÖ≥ÈîÆÂ≠ó @tab X @tab @tab X @tab
@item @code{BINMODE} ÂèòÈáè @tab @tab X @tab X @tab
@item @code{RS} ÂèØ‰∏∫Ê≠£ÂàôË°®ËææÂºè @tab @tab X @tab X @tab
@item Êó∂Èó¥Áõ∏ÂÖ≥ÂáΩÊï∞ @tab @tab X @tab X @tab
@end multitabl

@node Ranges and Locales
@appendixsec Ê≠£ÂàôË°®ËææÂºèËåÉÂõ¥‰∏éÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆÔºöÂèàËá≠ÂèàÈïøÈôàÂπ¥Êóß‰∫ã

Ëøô‰∏Ä@value{SECTION}ÊèèËø∞ÁöÑÊòØÊ≠£ÂàôË°®ËææÂºè‰∏éÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰πãÈó¥ÁöÑÊ∑∑‰π±ÁöÑÂéÜÂè≤Êó∂ÊúüÔºå‰ª•ÂèäÂÖ∂Â¶Ç‰ΩïÂΩ±Âìç‰∏çÂêåÁâàÊú¨ÁöÑ @command{gawk}„ÄÇ

ÊúÄÂàùÁöÑ Unix ÁöÑÊ≠£ÂàôË°®ËææÂºèÂ∑•ÂÖ∑ÊâÄÂÆö‰πâÁöÑÂ≠óÁ¨¶ËåÉÂõ¥ÔºàÂ¶Ç @samp{[a-z]}ÔºâÁî®‰∫éÂåπÈÖçÁ¨¨‰∏Ä‰∏™Â≠óÁ¨¶Âà∞ÊúÄÂêé‰∏Ä‰∏™Â≠óÁ¨¶‰πãÈó¥ÁöÑÂ≠óÁ¨¶ÔºàÂê´Ôºâ„ÄÇÂÖ∂È°∫Â∫èÂü∫‰∫éÊØè‰∏™Â≠óÁ¨¶Âú®Êú∫Âô®ÁöÑÊú¨Âú∞Â≠óÁ¨¶ÈõÜÁöÑÊï∞ÂÄºÂÄº„ÄÇÊâÄ‰ª•ÔºåÂú®Âü∫‰∫é ASCII ÁöÑÁ≥ªÁªü‰∏äÔºå@samp{[a-z]} ÂåπÈÖçÊâÄÊúâÁöÑÂ∞èÂ≠óÂ≠óÊØçÔºåÂõ†‰∏∫Ëøô‰∫õ‰ªé @samp{a} Âà∞ @samp{z} ‰πãÈó¥Êï∞ÂÄºÂÄºÊòØËøûÁª≠ÁöÑ„ÄÇÔºàÂú® EBCDIC Á≥ªÁªü‰∏äÔºå@samp{[a-z]} Ëøô‰∏™ËåÉÂõ¥‰πüÂåÖÂê´ÂÖ∂‰ªñÁöÑÈùûÂ≠óÊØçÂ≠óÁ¨¶„ÄÇÔºâ

#TODO
Âá†‰πéÊâÄÊúâÁöÑ Unix Âü∫Á°ÄËÆ≤‰πâÈÉΩËØ¥Ê≠§Á±ªÂûãÁöÑËåÉÂõ¥Ë°®ËææÂºèÈÉΩÊòØÂèØÂ∑•‰ΩúÁöÑÔºåËøòÁâπÂà´Êïô‰∫∫‰ª¨ËØ¥Ôºå@samp{[a-z]} ÊòØÁî®Êù•ÂåπÈÖçÂ∞èÂÜôÂ≠óÊØçÁöÑ‚ÄúÊ≠£Á°Æ‚ÄùÊñπÂºèÔºåËÄå @samp{[A-Z]} ÂàôÊòØÂåπÈÖçÂ§ßÂÜôÂ≠óÊØçÁöÑ‚ÄúÊ≠£Á°Æ‚ÄùÊñπÂºè„ÄÇËÄåÂÆûÈôÖ‰∏äÔºåËøô‰πüÊòØÁúüÁöÑ„ÄÇ @footnote{ÈÇ£‰πàÁîüÊ¥ªÂ∞±ÁæéÂ¶ô‰∫Ü„ÄÇ}

1992 Âπ¥ POSIX Ê†áÂáÜÂºïÂÖ•‰∫ÜÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆËøôÊ†∑ÁöÑÁÇπÂ≠êÔºàÊü•Áúã @pxref{Locales}Ôºâ„ÄÇÂæàÂ§öÁöÑÊú¨Âú∞ËØ≠Ë®ÄÈô§‰∫ÜÂåÖÂê´Ëã±ËØ≠Ë°®‰∏≠ÁöÑ 26 ‰∏™Â≠óÊØçÂ§ñÔºåËøòÂåÖÂê´ÂÖ∂‰ªñÁöÑÂ≠óÊØçÔºåPOSIX Ê†áÂáÜÂàôÊ∑ªÂä†‰∫ÜÂ≠óÁ¨¶Á±ªÔºàÊü•Áúã @pxref{Bracket Expressions}ÔºâÊù•ÂåπÈÖçÈô§‰∫Ü ASCII Â≠óÁ¨¶ÈõÜ‰∏≠ÁöÑ‰º†ÁªüÂ≠óÊØç‰πãÂ§ñÁöÑÂ≠óÁ¨¶„ÄÇ

‰ΩÜÊòØÔºåÊ†áÂáÜÂØπ‰∫éËåÉÂõ¥ÁöÑËß£Èáä‰πüÂèëÁîü‰∫Ü@emph{ÂèòÂåñ}„ÄÇÂú® @code{"C"} ‰ª•Âèä @code{"POSIX"} ËØ≠Ë®ÄÈÖçÁΩÆ‰∏≠ÔºåËåÉÂõ¥Ë°®ËææÂºèÂ¶Ç @samp{[a-dx-z]} ‰∏é @samp{[abcdxyz]} ÊòØ‰∏ÄÊ†∑ÁöÑÔºåÂ¶ÇÂú® @code{ASCII} ‰∏≠ÁöÑ‰∏ÄÊ†∑„ÄÇ‰ΩÜÊòØÂú®ÂÖ∂‰ªñÁöÑËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÔºåÈ°∫Â∫èÊòØÊåâÁÖß@dfn{ÂçèÂêåÈ°∫Â∫è}Êù•ËøõË°åÂÆö‰πâÁöÑ„ÄÇ

ËøôÊòØ‰ªÄ‰πàÊÑèÊÄùÂë¢ÔºüÂú®ÂæàÂ§öÁöÑËØ≠Ë®ÄËÆæÁΩÆ‰∏≠Ôºå@samp{A} ‰∏é @samp{a} ‰∏§ËÄÖÈÉΩÂ∞è‰∫é @samp{B}„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåËøô‰∫õËØ≠Ë®ÄËÆæÁΩÆ‰ºöÂ∞ÜÁî®Â≠óÂÖ∏È°∫Â∫èÊù•ÂØπÂ≠óÁ¨¶ËøõË°åÊéíÂ∫èÔºåÈÇ£‰πà @samp{[a-dx-z]} ‰∏çÂÜç‰∏é @samp{[abcdxyz]} Á≠âÂêå‰∫Ü„ÄÇÁõ∏ÂèçÔºå‰ªñÊúâÂèØËÉΩ‰∏é @samp{[ABCXYabcdxyz]} Á≠âÂêå„ÄÇ

ËøòÈúÄË¶ÅÂº∫Ë∞ÉÁöÑÊòØÔºöÂæàÂ§öÁöÑËÄÅÂ∏àÈÉΩÊïôÊéàÁî® @samp{[a-z]} Êù•ÂåπÈÖçÂ∞èÂÜôÂ≠óÊØç„ÄÇ‰ΩÜÊòØÂú®Èùû ASCII ËØ≠Ë®ÄËÆæÁΩÆÁöÑÁ≥ªÁªü‰∏äÔºåËøô‰πü‰ºöÂåπÈÖçÊâÄÊúâÁöÑÂ§ßÂÜôÂ≠óÊØçÔºå‰∏çÂåÖÊã¨ @samp{A} ÊàñËÄÖ @samp{Z}ÔºÅËøôÂØºËá¥‰∫ÜÊåÅÁª≠ÁöÑÂõ∞ÊÉëÔºåÂç≥‰ΩøÂà∞‰∫Ü 21 ‰∏ñÁ∫™ÁöÑ‰ªäÂ§©„ÄÇ

‰∏∫‰∫ÜËØ¥ÊòéËøô‰∏™ÈóÆÈ¢òÔºå‰∏ãÈù¢ÁöÑ‰æãÂ≠ê‰ΩøÁî® @code{sub()} ÂáΩÊï∞Êù•ÊâßË°åÊñá‰ª∂ÂåπÈÖçÔºàÊü•Áúã @pxref{String Functions}Ôºâ„ÄÇËøôÈáåÔºåÊàë‰ª¨ÁöÑÁõÆÁöÑÊòØÁßªÈô§ÂêéÈù¢ÁöÑÂ§ßÂÜôÂ≠óÊØçÔºö

@example
$ @kbd{echo something1234abc | gawk-3.1.8 '@{ sub("[A-Z]*$", ""); print @}'}
@print{} something1234a
@end example

@noindent
Ëøô‰∏™ËæìÂá∫Âπ∂‰∏çÊòØÊâÄÊúüÊúõÁöÑÔºåÂõ†‰∏∫ @samp{bc} ÊòØ @samp{something1234abc} ÁöÑÁªìÊùü‰∏≤Ôºå‰∏çÂ∫îËØ•ÂåπÈÖç @samp{[A-Z]*}„ÄÇÊòØÊú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆÂØºËá¥‰∫ÜËøôÊ†∑ÁöÑÁªìÊûúÔºàÂõ†Ê≠§‰Ω†ÂèØËÉΩÂú®‰Ω†ÁöÑÁ≥ªÁªü‰∏äÁúã‰∏çËøôÊ†∑ÁöÑËæìÂá∫Ôºâ„ÄÇ

@cindex Unicode
ÂÖ∂‰ªñËåÉÂõ¥‰πüÊúâÁ±ª‰ººÁöÑÈóÆÈ¢ò„ÄÇÂ¶Ç @samp{["-/]} Âú® ASCII ‰∏≠ÁªùÂØπÊúâÊïàÔºå‰ΩÜÊòØÂú®ÂæàÂ§öÁöÑ Unicode ËØ≠Ë®ÄËÆæÁΩÆ‰∏≠ÔºåÂ¶Ç @code{en_US.UTF-8} ‰∏≠Â∞±‰∏çÊòØËøôÊ†∑„ÄÇ

@command{gawk} Êó©ÊúüÁöÑÁâàÊú¨‰ΩøÁî®ÁöÑÊ≠£ÂàôË°®ËææÂºè‰ª£Á†ÅÂØπ‰∫éËØ≠Ë®ÄËÆæÁΩÆÊòØ‰∏çÊïèÊÑüÁöÑÔºåÊâÄ‰ª•ÂØπ‰∫éËåÉÂõ¥ÁöÑËß£ÈáäÊòØ‰πãÂâçÁöÑÂÅöÊ≥ï„ÄÇ

ÂΩì @command{gawk} ÂàáÊç¢Âà∞‰ΩøÁî®ËØ≠Ë®ÄËÆæÁΩÆÊïèÊÑüÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçÂô®ÔºåÈóÆÈ¢òÂ∞±Âá∫Áé∞‰∫Ü„ÄÇÁâπÂà´ÊòØÂú® GNU/Linux ‰∏éÂïÜ‰∏ö Unix ÁöÑÂéÇÂïÜÂºÄÂßãÂÆûÁé∞Èùû @code{ASCII} ËØ≠Ë®Ä‰πãÂêéÔºå@emph{Âπ∂‰ΩøËøô‰∫õËØ≠Ë®ÄÊàê‰∏∫ÈªòËÆ§ÈÄâÈ°π}„ÄÇ
‰πüËÆ∏ FAQÔºàfrequently asked questionÔºâÁöÑÈóÆÈ¢òÂ∑≤ÁªèÂèòÊàêËøôÊ†∑Ôºå‚Äú‰∏∫‰ªÄ‰πà @samp{[A-Z]} ‰ºöÂåπÈÖçÂ∞èÂÜôÂ≠óÊØçÔºüÔºÅÔºü‚Äù

@cindex Berry, Karl
ËøôÊ†∑ÁöÑÈóÆÈ¢òÂ∑≤ÁªèÂ≠òÂú®‰∫ÜËøë 10 Âπ¥ÔºåÂ¶ÇÊûú‰∏çÊòØÊõ¥Â§öÁöÑËØù„ÄÇ@command{gawk} Â∑≤ÁªèÂæàÂ•ΩÂú∞ÊîØÊåÅÊ†áÂáÜÔºåÂπ∂Â§ÑÁêÜÂ•Ω‰∫ÜÁî®Êà∑Êú¨Âú∞ËØ≠Ë®ÄÁöÑÈóÆÈ¢òÔºå@command{gawk} ÁöÑÁª¥Êä§ËÄÖÂØπ‰∫éËß£ÈáäËøô‰∫õÈóÆÈ¢òÈÉΩÂ∑≤ÁªèÈùûÂ∏∏ÂéåÂÄ¶‰∫Ü„ÄÇÂú®ÂºÄÂèë 4.0 ÁâàÊú¨ÁöÑËøáÁ®ã‰∏≠Ôºå‰ªñ‰ª¨‰øÆÊîπ‰∫Ü @command{gawk}Ôºå‰ΩøÂÖ∂ÊÄªÊòØÊåâÂéüÊù•ÁöÑÊñπÂºèÂØπÂæÖËåÉÂõ¥ÔºåÂç≥Âú®Ê†áÂáÜÂâçÁöÑÊñπÂºè„ÄÇÈô§ÈùûÂêèÁî®‰∫Ü @option{--posix} ÈÄâÈ°πÔºàÊü•Áúã @pxref{Options}Ôºâ„ÄÇ 
@footnote{‰πüÂõ†Ê≠§‰∫ßÁîü‰∫Ü‚ÄúÂêàÁêÜËåÉÂõ¥Ëß£ÈáäÊä•ÊÄ®‚ÄùÔºàÊàñËÄÖ RRIÔºâ„ÄÇÂæàÂ§öÁöÑ GNU Â∑•ÂÖ∑Â∑≤ÁªèÂÆûÁé∞‰∫ÜËøôÊ†∑ÁöÑÂèòÂåñÔºåÊàñËÄÖ‰∏ç‰πÖÂ∞ÜÂÆûÁé∞„ÄÇÈùûÂ∏∏ÊÑüË∞¢ Karl Berry ÂèëÊòé‰∫Ü‚ÄúÂêàÁêÜËåÉÂõ¥Ëß£Èáä‚ÄùËøô‰∏™ËØç„ÄÇ}

Âπ∏ËøêÁöÑÊòØÔºåÊúÄ @command{gawk} 4.0 ÂèëÂ∏É‰∏ç‰πÖÔºåÁª¥Êä§ËÄÖ‰∫ÜËß£Âà∞ 2008 ÁöÑÊ†áÂáÜÂ∑≤ÁªèÊõ¥Êîπ‰∫ÜËåÉÂõ¥ÁöÑÂÆö‰πâÔºåËøôÊ†∑ @code{"C"} ‰∏é @code{"POSIX"} ‰πãÂ§ñÁöÑËØ≠Ë®ÄËÆæÁΩÆÔºåËåÉÂõ¥Ë°®ËææÂºèÁöÑÂê´‰πâÊòØ@emph{Êú™ÂÆö‰πâ}ÁöÑ„ÄÇ 
@footnote{Êü•Áúã @uref{http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03_05, Ê†áÂáÜ}Âíå@uref{http://pubs.opengroup.org/onlinepubs/9699919799/xrat/V4_xbd_chap09.html#tag_21_09_03_05, ÂÆÉÁöÑËß£Èáä}}

Áî±‰∫é‰ΩøÁî®‰∫ÜËøô‰πà‰∏Ä‰∏™ÂèØÁà±ÁöÑÊäÄÊúØÊúØËØ≠ÔºåÊ†áÂáÜÁªô‰∫ÜÂÆûÁé∞ËÄÖÁõ∏Â∫îËÆ∏ÂèØÊù•Ëá™Â∑±ÈÄâÊã©ÂÆûÁé∞ËåÉÂõ¥ÁöÑÊñπÂºè„ÄÇ@command{gawk} Áª¥Êä§ËÄÖÈÄâÊã©‰∫Ü‰ΩøÁî® POSIX Ê†áÂáÜ‰πãÂâçÁöÑÂê´‰πâÔºåËÄå‰∏çËÆ∫ÊòØÈªòËÆ§ÁöÑÊ≠£ÂàôË°®ËææÂºèÂåπÈÖçËøòÊòØ‰ΩøÁî®‰∫Ü @option{--traditional} ÊàñËÄÖ @option{--posix} ÈÄâÈ°π„ÄÇÂú®ÊâÄÊúâÁöÑÊÉÖÂÜµ‰∏ãÔºå@command{gawk} ÈÉΩ‰∏é POSIX Ê†áÂáÜÊòØÁ¨¶ÂêàÁöÑ„ÄÇ

@node Contributors
@appendixsec @command{gawk} ÁöÑ‰∏ªË¶ÅË¥°ÁåÆËÄÖ
@cindex @command{gawk}, list of contributors to
@quotation
@i{
Â¶ÇÊûúÊÑüË∞¢ÊòØÂ∫îËØ•ÁöÑÂ∞±ÂæóÊÑüË∞¢„ÄÇ
}
@author Anonymous
@end quotation

Ëøô‰∏Ä@value{SECTION}ÂàóÂá∫‰∫Ü @command{gawk} ‰ª•Âèä/ÊàñËÄÖÊú¨@value{DOCUMENT}ÁöÑ‰∏ªË¶ÅË¥°ÁåÆËÄÖÔºå‰ª•Â§ßÊ¶ÇÂπ¥‰ª£ÂâçÂêéÈ°∫Â∫èÂàóÂá∫Ôºö

@itemize @value{BULLET}
@item
@cindex Aho, Alfred
@cindex Weinberger, Peter
@cindex Kernighan, Brian
Dr.@: Alfred V.@: AhoÔºåDr.@: Peter J.@: WeinbergerÔºåand Dr.@: Brian W.@: KernighanÔºå‰ª•ÂèäË¥ùÂ∞îÂÆûÈ™åÂÆ§‰∏≠ÊâÄÊúâÁöÑËÆæËÆ°‰∏éÂÆûÁé∞‰∫Ü Unix @command{awk} ÁöÑ‰∫∫Ôºå‰ªéËøô‰∫õ‰∫∫‰∏≠ÂΩ¢Êàê‰∫Ü @command{awk} ÁöÑ‰∏ªË¶ÅÁâπÊÄßÈõÜÂêà„ÄÇ
#TODO
@item
@cindex Rubin, Paul
Paul Rubin
Âú® 1986 Âπ¥ÂÆåÊàê‰∫ÜÊúÄÂàùÁöÑËÆæËÆ°‰∏éÂÆûÁé∞ÔºåÂπ∂ÂÜô‰∫ÜÊú¨@value{DOCUMENT}ÁöÑÁ¨¨‰∏ÄÁ®øÔºàÂ§ßÊ¶Ç 40 È°µÔºâ„ÄÇ

@item
@cindex Fenlason, Jay
Jay Fenlason
ÂÆåÊàê‰∫ÜÊúÄÂàùÁöÑÂÆûÁé∞„ÄÇ

@item
@cindex Close, Diane
Diane Close
‰øÆËÆ¢‰∫ÜÊú¨@value{DOCUMENT}ÁöÑÁ¨¨‰∏ÄÁ®øÔºåËææÂà∞‰∫Ü 90 Â§öÈ°µ„ÄÇ

@item
@cindex Stallman, Richard
Richard Stallman
Â∏ÆÂä©ÂÆåÊàê‰∫ÜÊúÄÂºÄÂßãÁöÑÂÆûÁé∞Ôºå‰ª•ÂèäÊú¨@value{DOCUMENT}ÂàùÁ®ø„ÄÇ‰ªñÂêåÊó∂‰πüÊòØ FSF ‰∏é GNU È°πÁõÆÁöÑÂàõÂª∫ËÄÖ„ÄÇ

@item
@cindex Woods, John
John Woods
Ë¥°ÁåÆ‰∫Ü @command{gawk} ÂàùÂßãÁâàÊú¨ÁöÑÈÉ®ÂàÜ‰ª£Á†ÅÔºàÂ§ßÈÉ®‰ªΩÊòØ‰øÆÂ§çÔºâ„ÄÇ

@item
@cindex Trueman, David
1988 Âπ¥ÔºåDavid Trueman
Êàê‰∏∫ @command{gawk} ÁöÑ‰∏ªË¶ÅÁª¥Êä§ËÄÖÔºåÂπ∂‰ΩøÂÖ∂‰∏é‚ÄúÊñ∞‚ÄùÁöÑ @command{awk} ÂÖºÂÆπÔºåÂπ∂ÊûÅÂ§ßÂú∞ÊèêÈ´ò‰∫ÜÊÄßËÉΩ„ÄÇ

@item
@cindex Kwok, Conrad
@cindex Garfinkle, Scott
@cindex Williams, Kent
Conrad KwokÔºåScott GarfinkleÔºå‰∏é Kent Williams
‰ΩøÁî®‰∏çÂêåÁâàÊú¨ÁöÑ MSC ÂÆåÊàê‰∫ÜÊúÄÂàùÁöÑÂêë MS-DOS ÁöÑÁßªÊ§ç„ÄÇ

@item
@cindex Rankin, Pat
Pat Rankin
Êèê‰æõ‰∫Ü VMS ÁöÑÁßªÊ§çÂèäÂÖ∂ÊñáÊ°£„ÄÇ

@item
@cindex Peterson, Hal
Hal Peterson
Êèê‰æõ‰∫ÜÁßªÊ§ç @command{gawk} Âà∞ Cray Systems ÁöÑÂ∏ÆÂä©„ÄÇÔºàÂΩìÂâçÂ∑≤‰∏çÂÜçÊîØÊåÅ„ÄÇÔºâ

@item
@cindex Rommel, Kai Uwe
Kai Uwe Rommel
Êèê‰æõ‰∫Ü OS/2 ÁöÑÊúÄÂàùÁöÑÁßªÊ§çÁâàÊú¨ÂèäÂÖ∂ÊñáÊ°£„ÄÇ

@item
@cindex Jaegermann, Michal
Michal Jaegermann
Êèê‰æõ‰∫Ü Atari Á≥ªÁªüÁöÑÁßªÊ§çÂèäÂÖ∂ÊñáÊ°£„ÄÇÔºàËøô‰∏™ÁßªÊ§ç‰∏çÂÜçÊîØÊåÅ„ÄÇÔºâ‰ªñÊåÅÁª≠Êèê‰æõ‰∫ÜÂèØÁßªÊ§çÊÄßÊ£ÄÊü•ÔºåÂπ∂ÂÆåÊàê‰∫ÜÁõ∏ÂΩìÂ§öÁöÑÂ∑•‰ΩúÔºå‰ª•Á°ÆÂÆö @command{gawk} ÂèØ‰ª•Â∑•‰ΩúÂú®Èùû 32 ‰ΩçÁ≥ªÁªü‰∏ä„ÄÇ

@item
@cindex Fish, Fred
Fred Fish
Êèê‰æõ‰∫Ü Amiga Á≥ªÁªüÁöÑÁßªÊ§çÂèäÂÖ∂ÊñáÊ°£„ÄÇÔºàÈöèÁùÄ Fred ÁöÑÂéª‰∏ñÔºåËøô‰πü‰∏çÂÜçÊîØÊåÅ‰∫Ü„ÄÇÔºâ

@item
@cindex Deifik, Scott
Scott Deifik
ÂΩìÂâç‰ΩøÁî® @code{DJGPP} Áª¥Êä§ @code{MS}@option{-DOS} ÁöÑÁßªÊ§çÁâà„ÄÇ

@item
@cindex Zaretskii, Eli
Eli Zaretskii
ÂΩìÂâç‰ΩøÁî® MinGW Áª¥Êä§ MS-Windows ÁöÑÁßªÊ§çÁâà„ÄÇ

@item
@cindex Grigera, Juan
Juan Grigera
Êèê‰æõ‰∫Ü Window32 Á≥ªÁªüÁöÑÁßªÊ§ç„ÄÇÔºàËøôÂ∑≤Áªè‰∏çÂÜçÊîØÊåÅ„ÄÇÔºâ

@item
@cindex Hankerson, Darrel
ÂæàÂ§öÂπ¥‰ª•ÂêéÔºå
Dr.@: Darrel Hankerson
‰Ωú‰∏∫‰∏çÂêå PC Âπ≥Âè∞ÁöÑÁßªÊ§çÁâàÊú¨ÁöÑÂçèË∞ÉËÄÖÔºåÂπ∂ÊûÑÂª∫‰∫Ü‰∏çÂêå PC Êìç‰ΩúÁ≥ªÁªü‰∏äÁöÑ‰∫åËøõÂà∂ÂèëÂ∏ÉÁâàÊú¨„ÄÇÂÆÉ‰πüÁª¥Êä§‰∏çÂêå PC Âπ≥Âè∞‰∏äÁöÑÊñáÊ°£Ôºå‰ª•‰øùÊåÅÊñáÊ°£ÁöÑÂèäÊó∂Êõ¥Êñ∞„ÄÇ

@item
@cindex Zoulas, Christos
Christos Zoulas
Êèê‰æõ @code{extension()} ÂÜÖÁΩÆÂáΩÊï∞Áî®‰∫éÂä®ÊÄÅÊ∑ªÂä†Êñ∞ÂäüËÉΩÔºàËøôÂú® @command{gawk} 4.1 ÁâàÊú¨Â∑≤ÁªèÂèñÊ∂à„ÄÇÔºâ

@item
@cindex Kahrs, J@"urgen
J@"urgen Kahrs
Ë¥°ÁåÆ‰∫ÜÊúÄÂàùÁöÑ TCP/IP ÁΩëÁªú‰ª£Á†ÅÁâàÊú¨ÂèäÂÖ∂ÊñáÊ°£ÔºåÂπ∂ÂØºËá¥‰∫Ü @samp{|&} Êìç‰ΩúÁ¨¶ÁöÑÂä†ÂÖ•„ÄÇ

@item
@cindex Davies, Stephen
Stephen Davies
Êèê‰æõ‰∫Ü Tandem Á≥ªÁªüÁöÑÊúÄÂàùÁßªÊ§çÁâàÊú¨ÂèäÂÖ∂ÊñáÊ°£„ÄÇÔºà‰ΩÜÊòØÔºåËøô‰πü‰∏çÂÜçÊîØÊåÅ„ÄÇÔºâÂÆÉ‰πüÊèê‰∫§‰∫ÜÊúÄÂàùÁöÑÊï¥ÂêàÂ≠óËäÇÁ†ÅÂÆûÁé∞Âà∞ @command{gawk} ‰ª£Á†ÅÂ∫ì‰∏≠ÁöÑÂ∑•‰Ωú„ÄÇ

@item
@cindex Woehlke, Matthew
Matthew Woehlke
Êèê‰æõ‰∫Ü Tandem POSIX ÂÖºÂÆπÁ≥ªÁªüÁöÑÂ¢ûÂº∫„ÄÇ

@item
@cindex Brown, Martin
Martin Brown
Êèê‰æõ‰∫Ü @code{BeOS} ÁöÑÁßªÊ§çÁâàÊú¨ÂèäÂÖ∂ÊñáÊ°£„ÄÇÔºàÂ∑≤‰∏çÂÜçÊîØÊåÅ„ÄÇÔºâ

@item
@cindex Peters, Arno
Arno Peters
ÂÅö‰∫ÜÂàùÂßãÂ∑•‰ΩúÊù•Â∞Ü @command{gawk} ÂàáÊç¢Âà∞ GNU Automake ‰ª•Âèä GNU @command{gettext}„ÄÇ

@item
@cindex Broder, Alan J.@:
Alan J.@: Broder
Êèê‰æõ‰∫ÜÊúÄÂàùÁöÑ @code{asort()} ÂáΩÊï∞ÁöÑÁâàÊú¨Ôºå‰ª•Âèä @code{match()} ÂáΩÊï∞ÁöÑÁ¨¨‰∏â‰∏™ÂèØÈÄâÂèÇÊï∞ÁöÑ‰ª£Á†Å„ÄÇ

@item
@cindex Buening, Andreas
Andreas Buening
Êõ¥Êñ∞‰∫Ü @command{gawk} ÁöÑ OS/2 ÁöÑÁßªÊ§çÁâàÊú¨„ÄÇ

@item
@cindex Hasegawa, Isamu
Isamu Hasegawa,
IBM Êó•Êú¨ÁöÑ Isamu HasegawaÔºàÈïøË∞∑Â∑ùÂãáÔºâË¥°ÁåÆ‰∫ÜÂØπÂ§öÂ≠óËäÇÂ≠óÁ¨¶ÁöÑÊîØÊåÅ„ÄÇ

@item
@cindex Benzinger, Michael
Michael Benzinger Ë¥°ÁåÆ‰∫Ü @code{switch} ËØ≠Âè•ÁöÑÊúÄÂàù‰ª£Á†Å„ÄÇ

@item
@cindex McPhee, Patrick
Patrick T.J.@: McPhee Ë¥°ÁåÆ‰∫ÜÂú® Windows32 ÁéØÂ¢É‰∏ãÂä®ÊÄÅË£ÖËΩΩÁöÑ‰ª£Á†Å„ÄÇÔºà‰∏çÂÜçÊîØÊåÅ„ÄÇÔºâ

@item
@cindex Wallin, Anders
Â∏ÆÂä©Áª¥Êä§‰∫Ü VMS ÁßªÊ§çÁâàÊú¨Â§öÂπ¥„ÄÇ

@item
@cindex Gordon, Assaf
Assaf Gordon 
Ë¥°ÁåÆ‰∫ÜÂÆûÁé∞ @option{--sandbox} ÈÄâÈ°πÁöÑÂÆûÁé∞‰ª£Á†Å„ÄÇ

@item
@cindex Haque, John
John Haque ‰Ωú‰∫ÜÂ¶Ç‰∏ãË¥°ÁåÆ:

@itemize @value{MINUS}
@item
‰øÆÊîπ @command{gawk}ÔºåÂ∞ÜÂÖ∂ÂàáÊç¢‰∏∫‰∏Ä‰∏™Â≠óËäÇÁ†ÅËß£ÈáäÂô®ÔºåÂèäÂÖ∂Ë∞ÉËØïÂô®

@item
Ê∑ªÂä†‰∫ÜÁúüÊ≠£ÁöÑÊï∞ÁªÑ‰πãÊï∞ÁªÑ

@item
ÂÖ∂‰ªñ‰øÆÊîπ‰ª•ÊîØÊåÅ‰ªªÊÑèÁ≤æÂ∫¶ÁöÑÁÆóÊúØËøêÁÆó

@item
@ref{Arbitrary Precision Arithmetic} ÁöÑÂàùÂßãÊñáÊú¨

@item
Â∞Ü‰∏â‰∏™ÁâàÊú¨ÁöÑ @command{gawk} ÂêàÂπ∂‰∏∫‰∏ÄÁöÑÂ∑•‰ΩúÔºå‰ª•ÈÖçÂêà 4.1 ÁöÑÂèëÂ∏É

@item
Â¢ûÂº∫‰∫ÜÁî±Êï¥Êï∞ËøõÁ¥¢ÂºïÁöÑÊï∞ÁªÑÁöÑÂÜÖÈÉ®ÂÆûÁé∞„ÄÇ

@item
Â¢ûÂº∫‰∫ÜÁî± John ‰∏é Pat Rankin È©±Âä®ÁöÑÊï∞ÁªÑÊéíÂ∫èÁâπÊÄß
@end itemize

@cindex Papadopoulos, Panos
@item
Panos Papadopoulos 
Ë¥°ÁåÆ‰∫Ü @ref{Include Files} ÁöÑÂàùÂßãÊñáÊú¨„ÄÇ

@item
@cindex Yawitz, Efraim
Efraim Yawitz Ë¥°ÁåÆ‰∫Ü @ref{Debugger} ÁöÑÂàùÂßãÊñáÊú¨„ÄÇ

@item
@cindex Schorr, Andrew
Âú® @command{gawk} 4.1 ÁâàÊú¨ÁöÑÊâ©Â±ï @code{API} ÁöÑÂºÄÂèë‰∏ªË¶ÅÁî± Arnold Robbins ‰∏é Andrew Schorr È©±Âä®ÔºåÂπ∂Âú®ÂêéÈù¢ÁöÑÂºÄÂèëÂõ¢Èòü‰∏≠ÂÅö‰∫ÜÂ∑®Â§ßÁöÑË¥°ÁåÆ„ÄÇ

@cindex Malmberg, John E.
@item
John Malmberg ÂØπ‰∫é OpenVMS ÁßªÊ§çÁâàÂèäÂÖ∂ÊñáÊ°£ÂÅö‰∫ÜÂ∑®Â§ßÁöÑË¥°ÁåÆ‰∏éÂ¢ûÂº∫„ÄÇ

@item
@cindex Colombo, Antonio
Antonio Giovanni Colombo ÈáçÂÜô‰∫Ü‰πãÂâçÁ´†ËäÇ‰∏≠ÁöÑÂæàÂ§ö‰æãÂ≠êÔºåÂõ†‰∏∫ÈÇ£‰∫õ‰æãÂ≠êÂæàÂ§öÂ∑≤Áªè‰∏•ÈáçËøáÊó∂ÔºåÊàëÂØπÂÖ∂ÊÑüË∞¢‰∏çÂ∞Ω„ÄÇ

@item
@cindex Robbins, Arnold
Arnold Robbins
‰ªé 1988 Âπ¥‰ª•Êù•‰∏ÄÁõ¥Â∑•‰ΩúÂú® @command{gawk} ‰∏äÔºåÁ¨¨‰∏Ä‰∏™ÂçèÂä© David TruemanÔºå‰πüÊòØ 1994 Âπ¥‰ª•Êù•ÁöÑÊúÄ‰∏ªË¶ÅÁöÑÁª¥Êä§ËÄÖ„ÄÇ
@end itemize

@node History summary
@appendixsec ÊÄªÁªì

@itemize @value{BULLET}
@item
@command{awk} ËØ≠Ë®ÄÂ∑≤ÁªèÂèëÂ±ï‰∫ÜÂæà‰πÖ„ÄÇÁ¨¨‰∏Ä‰∏™ÂèëÂ∏ÉÁâàÊú¨Â§ßÁ∫¶Âú® 1978 Âπ¥ÁöÑ V7 Unix Á≥ªÁªü‰∏ä„ÄÇÂú® System V Release 3.1 ÁöÑ 1987 Âπ¥ÁöÑÊó∂ÂÄôÔºå‰∏Ä‰∫õ‰∏ªË¶ÅÁöÑÊñ∞Â¢ûÂäüËÉΩÔºåÂåÖÂê´Áî®Êà∑Ëá™ÂÆö‰πâÂáΩÊï∞Â∑≤ÁªèÂä†ÂÖ•Âà∞ËØ≠Ë®Ä‰∏≠„ÄÇÂÖ∂‰ªñÁöÑÊîπÂèòÂú® 1989 Âπ¥ÁöÑ System V Release 4 Âä†ÂÖ•„ÄÇ‰ªéÊ≠§‰πãÂêéÔºåÂÖ∂‰ªñÁöÑÊ¨°Ë¶ÅÁöÑÂèòÈáèÈÉΩÂú® POSIX Ê†áÂáÜÁöÑÊ°ÜÊû∂‰∏ãËøõË°å„ÄÇ

@item
Brian Kernighan ÁöÑ @command{awk} Êèê‰æõ‰∫Ü‰∏Ä‰∫õÊâ©Â±ïÔºåÂπ∂Ë¢´ÂÆûÁé∞‰∏∫ÂÖ∂‰ªñ @command{awk} ÁâàÊú¨ÁöÑÈÄöÁî®Êâ©Â±ï„ÄÇ

@item
@command{gawk} Êèê‰æõ‰∫ÜÂ§ßÈáèÁöÑ POSIX @command{awk} ÊâÄÊ≤°ÊúâÁöÑÊâ©Â±ï„ÄÇÂÆÉ‰ª¨ÂèØ‰ª•‰ΩøÁî® @option{--traditional} ÊàñËÄÖ @option{--posix} ÈÄâÈ°πÊù•Á¶ÅÁî®„ÄÇ

@item
@command{gawk} ‰∏≠ÁöÑ POSIX Êú¨Âú∞ËØ≠Ë®ÄËÆæÁΩÆ‰∏éÊ≠£ÂàôË°®ËææÂºèÂåπÈÖç‰πãÈó¥ÁöÑÁ∫†Ëëõ‰∏ÄÁõ¥ËÆ©‰∫∫Âõ∞ÊÉë‰∫ÜÂ•ΩÂ§öÂπ¥„ÄÇÁé∞Âú®Ôºå@command{gawk} ÂÆûÁé∞‰∫Ü‚ÄúÂêàÁêÜËåÉÂõ¥Ëß£Èáä‚ÄùÔºåÂ¶ÇÊ≠§Ôºå@samp{[a-z]} ËøôÊ†∑ÁöÑËåÉÂõ¥ÂΩ¢Âºè@emph{Âè™}ÂåπÈÖçÊâÄÂú®Êú∫Âô®ÁöÑÊú¨Âú∞Â≠óÁ¨¶ÈõÜ‰∏≠ÁöÑÔºåÊï∞ÂÄºÂú® @samp{a} Âà∞ @samp{z} ‰πãÈó¥ÁöÑÂ≠óÁ¨¶„ÄÇÂ≠óÁ¨¶ÈõÜÈÄöÂ∏∏ÊòØ ASCIIÔºå‰ΩÜÊòØÂú® IBM S/390 ‰∏äÂèØËÉΩÊòØ EBCDIC„ÄÇ

@item
ÂæàÂ§ö‰∫∫Â§öÊù•Êù•ÂØπ @command{gawk} ÁöÑÂºÄÂèëÂÅöÂá∫‰∫ÜË¥°ÁåÆ„ÄÇ Êàë‰ª¨Â∏åÊúõÊú¨@value{CHAPTER}‰∏≠ÊâÄÊèê‰æõÁöÑÂàóË°®ÊòØÂÆåÊï¥ÁöÑÔºåÂπ∂Âú®ÂÄºÂæóÊÑüË∞¢ÁöÑÂú∞ÊñπÁªô‰∫à‰∫ÜÁõ∏Â∫îÁöÑÊÑüË∞¢„ÄÇ

@end itemize

@node Installation
@appendix ÂÆâË£Ö @command{gawk}

@c last two commas are part of see also
@cindex operating systems, See Also GNU/Linux@comma{} PC operating systems@comma{} Unix
@cindex @command{gawk}, installing
@cindex installing @command{gawk}
Êú¨ÈôÑÂΩïÊèê‰æõ‰∫ÜÁî®‰∫éÂÆâË£Ö @command{gawk} Âà∞Áî±ÂºÄÂèëËÄÖÊâÄÊîØÊåÅÁöÑ‰∏çÂêåÂπ≥Âè∞‰∏äÁöÑÊåáÂØº„ÄÇ‰∏ªË¶ÅÁöÑÂºÄÂèëËÄÖÊîØÊåÅ GNU/LinuxÔºà‰ª•Âèä UnixÔºâÂπ≥Âè∞ÔºåÂÖ∂‰ªñÂàôÁî±Ë¥°ÁåÆÂÜ≥ÂÆö„ÄÇÊü•Áúã @xref{Bugs}ÔºåÊù•Ëé∑ÂèñÁª¥Êä§Áõ∏Â∫îÁßªÊ§çÁâàÊú¨ÁöÑÁª¥Êä§ËÄÖÁöÑÈÇÆ‰ª∂„ÄÇ

@menu
* Gawk Distribution::           What is in the @command{gawk} distribution.
* Unix Installation::           Installing @command{gawk} under various
                                versions of Unix.
* Non-Unix Installation::       Installation on Other Operating Systems.
* Bugs::                        Reporting Problems and Bugs.
* Other Versions::              Other freely available @command{awk}
                                implementations.
* Installation summary::        Summary of installation.
@end menu

@node Gawk Distribution
@appendixsec @command{gawk} ÂèëÂ∏ÉÁâà
@cindex source code, @command{gawk}

Ëøô‰∏Ä@value{SECTION} ÊèèËø∞Â¶Ç‰ΩïÊù•Ëé∑Âèñ @command{gawk} ÂèëÂ∏ÉÁâàÊú¨ÔºåÂ¶Ç‰ΩïËß£ÈáäÔºåÂπ∂ÂàóÂá∫‰∏çÂêåÁöÑÊñá‰ª∂‰ª•ÂèäÂ≠êÁõÆÂΩï„ÄÇ

@menu
* Getting::                     How to get the distribution.
* Extracting::                  How to extract the distribution.
* Distribution contents::       What is in the distribution.
@end menu

@node Getting
@appendixsubsec ÂèñÂæó @command{gawk} ÂèëÂ∏ÉÁâà 
@cindex @command{gawk}, source code@comma{} obtaining
Êúâ‰∏§‰∏™ÊñπÂºèÊù•Ëé∑Âèñ GNU ËΩØ‰ª∂Ôºö

@itemize @value{BULLET}
@item
‰ªéÊüê‰∫∫ÈÇ£ÈáåÁõ¥Êé•Â§çÂà∂„ÄÇ

@cindex FSF (Free Software Foundation)
@cindex Free Software Foundation (FSF)
@item
‰ªé Internet ‰∏ªÊú∫ @code{ftp.gnu.org} ‰∏≠ÁöÑÁõÆÂΩï @file{/gnu/gawk} ‰∏≠Êù•ÂèñÂæó @command{gawk}„ÄÇÂåøÂêçÁöÑ @command{ftp} ‰∏é @code{http} ËÆøÈóÆÈÉΩÊòØÂèóÊîØÊåÅÁöÑ„ÄÇÂ¶ÇÊûú‰Ω†Êúâ @command{wget} Á®ãÂ∫èÔºå‰Ω†ÂèØ‰ª•Â¶Ç‰∏ãÊù•‰ΩøÁî®ÂëΩ‰ª§Ôºö

@example
wget http://ftp.gnu.org/gnu/gawk/gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz
@end example
@end itemize

GNU ËΩØ‰ª∂ÊñáÊ°£Âú®ÂÖ®‰∏ñÁïåÈÉΩÊúâÈïúÂÉè„ÄÇÂêåÊ≠•Êõ¥Êñ∞ÁöÑÈïúÂÉèÁ´ôÁÇπÂèØ‰ª•‰ªé @uref{http://www.gnu.org/order/ftp.html, ‰∏ª FSF ÁΩëÁ´ô}‰∏äËé∑Âèñ „ÄÇÂ∞ùËØïÂÖ∂‰∏≠‰∏Ä‰∏™ÈïúÂÉèÁ´ôÁÇπÔºåÂ¶ÇÊûú‰∏çÂ§™ÂøôÔºå‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏Ä‰∏™Á¶ª‰Ω†Ëøë‰∏ÄÁÇπÁöÑÁ´ôÁÇπ„ÄÇ

‰Ω†‰πüÂèØ‰ª•‰ªéÂÆòÊñπ Git ‰ªìÂ∫ìËé∑Âèñ @command{gawk} ÁöÑÊ∫ê‰ª£Á†ÅÔºõÊõ¥Â§ö‰ø°ÊÅØËØ∑Áúã @ref{Accessing The Source}„ÄÇ

@node Extracting
@appendixsubsec ÊèêÂèñÂèëÂ∏ÉÁâà
@command{gawk} ÁöÑÂèëÂ∏ÉÁâàÊú¨ÊúâÂÜÖ‰∏™ @code{tar} Êñá‰ª∂Âπ∂Áî®‰∏çÂêåÁöÑÂéãÁº©Á®ãÂ∫èËøõË°åÂéãÁº©Ôºö@command{gzip}Ôºå@command{bzip2} ‰ª•Âèä @command{xz}„ÄÇ‰∏∫ÁÆÄÂçïËµ∑ËßÅÔºåÂêéÈù¢ÁöÑËØ¥ÊòéÂÅáËÆæ‰Ω†‰ΩøÁî® GNU Gzip Á®ãÂ∫èËøõË°åÂéãÁº©ÁöÑÔºà@command{gzip}Ôºâ„ÄÇ

Âè™Ë¶ÅÊúâ‰∫ÜÂèëÂ∏ÉÁâáÔºàÂ¶Ç @file{gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz}ÔºâÔºåÂàôÂèØ‰ª•‰ΩøÁî® @code{gzip} Êù•Ëß£ÂéãÊñá‰ª∂ÁÑ∂Âêé‰ΩøÁî® @code{tar} Êù•ÊèêÂèñ„ÄÇ‰Ω†ÂèØ‰ª•‰ΩøÁî®‰∏ãÈù¢ÁöÑÁÆ°Á∫øÊù•ÁîüÊàê @command{gawk} ÁöÑÂèëÂ∏ÉÊñá‰ª∂Ôºö

@example
gzip -d -c gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz | tar -xvpf -
@end example

Âú®‰ΩøÁî® GNU @command{tar} ÁöÑÁ≥ªÁªü‰∏äÔºå‰Ω†ÂèØ‰ª•ËÆ© @command{tar} Êù•Â∏Æ‰Ω†ËøõË°åËß£ÂéãÔºö

@example
tar -xvpzf gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz
@end example

@noindent
Ëß£ÂéãÂêéÁöÑÊñá‰ª∂‰ºöÂú®ÂΩìÂâçÁõÆÂΩï‰∏ãÂàõÂª∫‰∏Ä‰∏™ÂêçÂ≠ó‰∏∫ @file{gawk-@value{VERSION}.@value{PATCHLEVEL}} ÁöÑÁõÆÂΩï„ÄÇ

ÂèëÂ∏É@value{FN}ÊòØ @file{gawk-@var{V}.@var{R}.@var{P}.tar.gz} ÂΩ¢ÂºèÁöÑÂêçÂ≠ó„ÄÇ@var{V} ‰ª£Ë°®‰∫Ü @command{gawk} ÁöÑ‰∏ªË¶ÅÁâàÊú¨Ôºå@var{R} Ë°®Á§∫‰∫ÜÂΩìÂâç @var{V} ÁâàÊú¨ÁöÑÂèëÂ∏ÉÁâàÊú¨Ôºå@var{P} ‰ª£Ë°®‰∫Ü@dfn{Ë°•‰∏ÅÁ≠âÁ∫ß}ÔºåË°®Á§∫Âú®Ëøô‰∏™ÂèëÂ∏É‰∏≠‰øÆÂ§ç‰∫Ü‰∏Ä‰∫õÂ∞ÜË¶ÅÁöÑ Bug„ÄÇÂΩìË°•‰∏ÅÁ≠âÁ∫ßÊòØ @value{PATCHLEVEL}Ôºå‰ΩÜÊòØÂΩìËøîÂõûÂèëÂ∏ÉÊó∂Ôºå‰Ω†‰ºöÂèñÂæóÊúÄÈ´òÁâàÊú¨Âè∑ÔºåÂèëÂ∏ÉÁâà‰ª•ÂèäË°•‰∏ÅÁ≠âÁ∫ß„ÄÇ
ÔºàÊèêÁ§∫ÔºåË°•‰∏ÅÁ≠âÁ∫ßÂ§ß‰∫éÁ≠â‰∫é 70ÔºåË°®Á§∫ÊòØ‚Äúbeta‚ÄùÊàñËÄÖÊòØÈùûÁîü‰∫ßÁî®ËΩØ‰ª∂ÔºåÈô§Èùû‰Ω†‰∏ç‰ªãÊÑèÂÆûÈ™åÔºåÂê¶Âàô‰Ω†‰∏çË¶Å‰ΩøÁî®ËøôÊ†∑ÁöÑÁâàÊú¨„ÄÇÔºâÂ¶ÇÊûú‰Ω†‰∏çÂú® Unix ÊàñËÄÖ GNU/Linux Á≥ªÁªü‰∏äÔºå‰Ω†ÈúÄË¶ÅÂØπËé∑Âèñ‰∫ÜËß£Âéã @command{gawk} ÂèëÂ∏ÉÁâàÂè¶ÂÅöÊâìÁÆó„ÄÇ‰Ω†ÂèØ‰ª•Âí®ËØ¢‰∏Ä‰∏ãË∫´ËæπÁöÑ‰∏ìÂÆ∂„ÄÇ

@node Distribution contents
@appendixsubsec @command{gawk} ÂèëÂ∏ÉÁâàÁöÑÂÜÖÂÆπ
@cindex @command{gawk}, distribution

@command{gawk} ÂèëÂ∏ÉÁâàÊúâÂæàÂ§öÁöÑ C Ê∫êÊñá‰ª∂ÔºåÊñáÊ°£Êñá‰ª∂ÔºåÂ≠êÁõÆÂΩï‰ª•Âèä‰∏éÈÖçÁΩÆËøáÁ®ãÁõ∏ÂÖ≥ÁöÑÊñá‰ª∂ÔºàÊü•Áúã @pxref{Unix Installation}ÔºâÔºåËøòÊúâÂá†‰∏™Â≠êÁõÆÂΩï‰∏é‰∏çÂêåÁöÑÈùû Unix Êìç‰ΩúÁ≥ªÁªüÁõ∏ÂÖ≥Ôºö

@table @asis
@item ÂêÑÁßç @samp{.c}Ôºå@samp{.y} ‰∏é @samp{.h} Êñá‰ª∂
Ëøô‰∫õÊñá‰ª∂ÂåÖÂê´ÂÆûÁé∞ÁöÑ @command{gawk} Ê∫ê‰ª£Á†Å„ÄÇ
@end table

@table @file
@item ABOUT-NLS
Êñá‰ª∂‰∏≠ÂåÖÂê´ÂÖ≥‰∫é GNU @command{gettext} ‰∏éÁøªËØëÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇ

@item AUTHORS
‰∏Ä‰∫õÂÖ≥‰∫é @command{gawk} ÁöÑ‰ΩúËÄÖ‰ø°ÊÅØ„ÄÇÂÆÉÁöÑÂ≠òÂú®Âè™ÊòØ‰∏∫‰∫ÜÁ¨¶ÂêàËá™Áî±ËΩØ‰ª∂Âü∫Èáë‰ºöÁöÑËßÑËåÉ„ÄÇ

@item README
@itemx README_d/README.*
ÊèèËø∞ÊÄßÊñá‰ª∂Ôºö@file{README} Áî®‰∫é Unix ‰∏ãÁöÑ @command{gawk}Ôºå‰ª•ÂèäÂÖ∂‰ªñ‰∏çÂêåÁöÑËΩØÁ°¨‰ª∂ÁªÑÂêà„ÄÇ

@item INSTALL
Êèê‰æõ‰∫ÜÈÖçÁΩÆ‰∏éÂÆâË£ÖËøáÁ®ãÁöÑÂü∫Êú¨ËøáÁ®ãÁöÑÊñá‰ª∂„ÄÇ

@item ChangeLog
@code{bugs} ‰øÆÂ§çÊàñËÄÖÂ¢ûÂº∫ÁöÑÊ∫ê‰ª£Á†ÅËØ¶ÁªÜÂàóË°®„ÄÇ

@item ChangeLog.0
Ê∫ê‰ª£Á†ÅÊõ¥ÊîπÁöÑÊóßÂàóË°®„ÄÇ

@item NEWS
ÊúÄÂêé‰∏Ä‰∏™ÁâàÊú¨‰ª•Êù• @command{gawk} ÁöÑÊõ¥ÊîπÂàóË°®„ÄÇ

@item NEWS.0
@command{gawk} ÁöÑÊóßÁöÑÊõ¥ÊîπÂàóË°®„ÄÇ

@item COPYING
GNU ÈÄöÁî®ËÆ∏ÂèØËØÅÊñáÊú¨„ÄÇ

@item POSIX.STD
@command{awk} ÁöÑ POSIX Ê†áÂáÜ‰∏≠ÂÆö‰πâ‰∏∫Êú™ÂÆö‰πâÁöÑË°å‰∏∫ÊèèËø∞ÔºåÊàñËÄÖ @command{gawk} ‰∏≠ÈÇ£Áªì‰∏çÂÆåÂÖ®Á¨¶ÂêàÔºåÊàñËÄÖ POSIX Êú¨Ë∫´Â∫îËØ•ÊèèËø∞Ôºå‰ΩÜÊòØÊ≤°ÊúâÊèèËø∞ÁöÑÈÇ£‰∫õ‰∫ãÊÄß„ÄÇ

@cindex artificial intelligence@comma{} @command{gawk} and
@item doc/awkforai.txt
ÊåáÂêëÂàùÂßãÊñáÁ®øÔºåËØ•ÊñáÁ®øÁÆÄÂçïÂú∞ÊèèËø∞‰∫Ü‰∏∫‰ªÄ‰πà @command{gawk} ÊòØ‰∏Ä‰∏™Áî®‰∫é‰∫∫Â∑•Êô∫ËÉΩÔºàAIÔºâÁöÑÂ•ΩÁöÑÁºñÁ®ãËØ≠Ë®ÄÁöÑÂéüÂõ†„ÄÇ

@item doc/bc_notes
@command{gawk} ÁöÑÂÜÖÈÉ®‚ÄúÂ≠óËäÇÁ†Å‚ÄùÁöÑÁÆÄÂçïÊèèËø∞„ÄÇ

@item doc/README.card
@itemx doc/ad.block
@itemx doc/awkcard.in
@itemx doc/cardfonts
@itemx doc/colors
@itemx doc/macros
@itemx doc/no.colors
@itemx doc/setter.outline
‰∫îËâ≤ @command{awk} ÂèÇËÄÉÂç°ÁöÑ @command{troff} Ê∫ê‰ª£Á†Å„ÄÇÂÉè GNU @command{troff}Ôºà@command{groff}ÔºâËøôÊ†∑ÁöÑÁé∞‰ª£ÁâàÊú¨ÁöÑ @command{troff} Áî®‰∫é‰∫ßÁîüÂΩ©Ëâ≤ÁöÑÁâàÊú¨„ÄÇÊü•Áúã @file{README.card} Êñá‰ª∂„ÄÇÂ¶ÇÊûú‰Ω†ÊúâÊóßÁöÑ @command{troff}ÔºåÂç°ÊòØËØ¥ÊòéÊñáÊ°£„ÄÇ

@item doc/gawk.1
Áî®‰∫éÊèèËø∞  @command{gawk} ÊâãÂÜåÁöÑ @command{troff} ÁöÑÊ∫ê‰ª£Á†Å„ÄÇËøô‰∏™Êñá‰ª∂ÊòØ‰∏∫‰∫ÜÊñπ‰æø Unix Áî®Êà∑„ÄÇ

#TODO
@cindex Texinfo
@item doc/gawktexi.in
@itemx doc/sidebar.awk
The Texinfo source file for this @value{DOCUMENT}.
It should be processed by @file{doc/sidebar.awk}
before processing with @command{texi2dvi} or @command{texi2pdf}
to produce a printed document, and
with @command{makeinfo} to produce an Info or HTML file.
The @file{Makefile} takes care of this processing and produces
printable output via @command{texi2dvi} or @command{texi2pdf}.

@item doc/gawk.texi
The file produced after processing @file{gawktexi.in}
with @file{sidebar.awk}.

@item doc/gawk.info
The generated Info file for this @value{DOCUMENT}.

@item doc/gawkinet.texi
The Texinfo source file for
@ifinfo
@inforef{Top, , General Introduction, gawkinet, @value{GAWKINETTITLE}}.
@end ifinfo
@ifnotinfo
@cite{@value{GAWKINETTITLE}}.
@end ifnotinfo
It should be processed with @TeX{}
(via @command{texi2dvi} or @command{texi2pdf})
to produce a printed document and
with @command{makeinfo} to produce an Info or HTML file.

@item doc/gawkinet.info
The generated Info file for
@cite{@value{GAWKINETTITLE}}.

@item doc/igawk.1
The @command{troff} source for a manual page describing the @command{igawk}
program presented in
@ref{Igawk Program}.

@item doc/Makefile.in
The input file used during the configuration process to generate the
actual @file{Makefile} for creating the documentation.

@item Makefile.am
@itemx */Makefile.am
Files used by the GNU Automake software for generating
the @file{Makefile.in} files used by Autoconf and
@command{configure}.

@item Makefile.in
@itemx aclocal.m4
@itemx bisonfix.awk
@itemx config.guess
@itemx configh.in
@itemx configure.ac
@itemx configure
@itemx custom.h
@itemx depcomp
@itemx install-sh
@itemx missing_d/*
@itemx mkinstalldirs
@itemx m4/*
These files and subdirectories are used when configuring and compiling
@command{gawk} for various Unix systems.  Most of them are explained
in @ref{Unix Installation}. The rest are there to support the main
infrastructure.

@item po/*
The @file{po} library contains message translations.

@item awklib/extract.awk
@itemx awklib/Makefile.am
@itemx awklib/Makefile.in
@itemx awklib/eg/*
The @file{awklib} directory contains a copy of @file{extract.awk}
(@pxref{Extract Program}),
which can be used to extract the sample programs from the Texinfo
source file for this @value{DOCUMENT}. It also contains a @file{Makefile.in} file, which
@command{configure} uses to generate a @file{Makefile}.
@file{Makefile.am} is used by GNU Automake to create @file{Makefile.in}.
The library functions from
@ref{Library Functions},
and the @command{igawk} program from
@ref{Igawk Program}
are included as ready-to-use files in the @command{gawk} distribution.
They are installed as part of the installation process.
The rest of the programs in this @value{DOCUMENT} are available in appropriate
subdirectories of @file{awklib/eg}.

@item extension/*
The source code, manual pages, and infrastructure files for
the sample extensions included with @command{gawk}.
@xref{Dynamic Extensions}, for more information.

@item posix/*
Files needed for building @command{gawk} on POSIX-compliant systems.

@item pc/*
Files needed for building @command{gawk} under MS-Windows
@ifclear FOR_PRINT
and OS/2
@end ifclear
(@pxref{PC Installation} for details).

@item vms/*
Files needed for building @command{gawk} under Vax/VMS and OpenVMS
(@pxref{VMS Installation} for details).

@item test/*
A test suite for
@command{gawk}.  You can use @samp{make check} from the top-level @command{gawk}
directory to run your version of @command{gawk} against the test suite.
If @command{gawk} successfully passes @samp{make check}, then you can
be confident of a successful port.
@end table

@node Unix Installation
@appendixsec Compiling and Installing @command{gawk} on Unix-Like Systems

Usually, you can compile and install @command{gawk} by typing only two
commands.  However, if you use an unusual system, you may need
to configure @command{gawk} for your system yourself.

@menu
* Quick Installation::               Compiling @command{gawk} under Unix.
* Additional Configuration Options:: Other compile-time options.
* Configuration Philosophy::         How it's all supposed to work.
@end menu

@node Quick Installation
@appendixsubsec Compiling @command{gawk} for Unix-Like Systems

The normal installation steps should work on all modern commercial
Unix-derived systems, GNU/Linux, BSD-based systems, and the Cygwin
environment for MS-Windows.

After you have extracted the @command{gawk} distribution, @command{cd}
to @file{gawk-@value{VERSION}.@value{PATCHLEVEL}}.  As with most GNU
software, you configure @command{gawk} for your system by running the
@command{configure} program.  This program is a Bourne shell script that
is generated automatically using GNU Autoconf.
@ifnotinfo
(The Autoconf software is
described fully in
@cite{Autoconf---Generating Automatic Configuration Scripts},
which can be found online at
@uref{http://www.gnu.org/software/autoconf/manual/index.html,
the Free Software Foundation's website}.)
@end ifnotinfo
@ifinfo
(The Autoconf software is described fully starting with
@inforef{Top, , Autoconf, autoconf,Autoconf---Generating Automatic Configuration Scripts}.)
@end ifinfo

To configure @command{gawk}, simply run @command{configure}:

@example
sh ./configure
@end example

This produces a @file{Makefile} and @file{config.h} tailored to your system.
The @file{config.h} file describes various facts about your system.
You might want to edit the @file{Makefile} to
change the @code{CFLAGS} variable, which controls
the command-line options that are passed to the C compiler (such as
optimization levels or compiling for debugging).

Alternatively, you can add your own values for most @command{make}
variables on the command line, such as @code{CC} and @code{CFLAGS}, when
running @command{configure}:

@example
CC=cc CFLAGS=-g sh ./configure
@end example

@noindent
See the file @file{INSTALL} in the @command{gawk} distribution for
all the details.

After you have run @command{configure} and possibly edited the @file{Makefile},
type:

@example
make
@end example

@noindent
Shortly thereafter, you should have an executable version of @command{gawk}.
That's all there is to it!
To verify that @command{gawk} is working properly,
run @samp{make check}.  All of the tests should succeed.
If these steps do not work, or if any of the tests fail,
check the files in the @file{README_d} directory to see if you've
found a known problem.  If the failure is not described there,
send in a bug report (@pxref{Bugs}).

Of course, once you've built @command{gawk}, it is likely that you will
wish to install it.  To do so, you need to run the command @samp{make
install}, as a user with the appropriate permissions.  How to do this
varies by system, but on many systems you can use the @command{sudo}
command to do so.  The command then becomes @samp{sudo make install}. It
is likely that you will be asked for your password, and you will have
to have been set up previously as a user who is allowed to run the
@command{sudo} command.

@node Additional Configuration Options
@appendixsubsec Additional Configuration Options
@cindex @command{gawk}, configuring, options
@cindex configuration options@comma{} @command{gawk}

There are several additional options you may use on the @command{configure}
command line when compiling @command{gawk} from scratch, including:

@table @code

@cindex @option{--disable-extensions} configuration option
@cindex configuration option, @code{--disable-extensions}
@item --disable-extensions
Disable configuring and building the sample extensions in the
@file{extension} directory. This is useful for cross-compiling.
The default action is to dynamically check if the extensions
can be configured and compiled.

@cindex @option{--disable-lint} configuration option
@cindex configuration option, @code{--disable-lint}
@item --disable-lint
Disable all lint checking within @command{gawk}.  The
@option{--lint} and @option{--lint-old} options
(@pxref{Options})
are accepted, but silently do nothing.
Similarly, setting the @code{LINT} variable
(@pxref{User-modified})
has no effect on the running @command{awk} program.

When used with the GNU Compiler Collection's (GCC's)
automatic dead-code-elimination, this option
cuts almost 23K bytes off the size of the @command{gawk}
executable on GNU/Linux x86_64 systems.  Results on other systems and
with other compilers are likely to vary.
Using this option may bring you some slight performance improvement.

@quotation CAUTION
Using this option will cause some of the tests in the test suite
to fail.  This option may be removed at a later date.
@end quotation

@cindex @option{--disable-nls} configuration option
@cindex configuration option, @code{--disable-nls}
@item --disable-nls
Disable all message-translation facilities.
This is usually not desirable, but it may bring you some slight performance
improvement.

@cindex @option{--with-whiny-user-strftime} configuration option
@cindex configuration option, @code{--with-whiny-user-strftime}
@item  --with-whiny-user-strftime
Force use of the included version of the C @code{strftime()}
function for deficient systems.
@end table

Use the command @samp{./configure --help} to see the full list of
options supplied by @command{configure}.

@node Configuration Philosophy
@appendixsubsec The Configuration Process

@cindex @command{gawk}, configuring
This @value{SECTION} is of interest only if you know something about using the
C language and Unix-like operating systems.

The source code for @command{gawk} generally attempts to adhere to formal
standards wherever possible.  This means that @command{gawk} uses library
routines that are specified by the ISO C standard and by the POSIX
operating system interface standard.
The @command{gawk} source code requires using an ISO C compiler (the 1990
standard).

Many Unix systems do not support all of either the ISO or the
POSIX standards.  The @file{missing_d} subdirectory in the @command{gawk}
distribution contains replacement versions of those functions that are
most likely to be missing.

The @file{config.h} file that @command{configure} creates contains
definitions that describe features of the particular operating system
where you are attempting to compile @command{gawk}.  The three things
described by this file are: what header files are available, so that
they can be correctly included, what (supposedly) standard functions
are actually available in your C libraries, and various miscellaneous
facts about your operating system.  For example, there may not be an
@code{st_blksize} element in the @code{stat} structure.  In this case,
@samp{HAVE_STRUCT_STAT_ST_BLKSIZE} is undefined.

@cindex @code{custom.h} file
It is possible for your C compiler to lie to @command{configure}. It may
do so by not exiting with an error when a library function is not
available.  To get around this, edit the @file{custom.h} file.
Use an @samp{#ifdef} that is appropriate for your system, and either
@code{#define} any constants that @command{configure} should have defined but
didn't, or @code{#undef} any constants that @command{configure} defined and
should not have.  The @file{custom.h} file is automatically included by
the @file{config.h} file.

It is also possible that the @command{configure} program generated by
Autoconf will not work on your system in some other fashion.
If you do have a problem, the @file{configure.ac} file is the input for
Autoconf.  You may be able to change this file and generate a
new version of @command{configure} that works on your system
(@pxref{Bugs}
for information on how to report problems in configuring @command{gawk}).
The same mechanism may be used to send in updates to @file{configure.ac}
and/or @file{custom.h}.

@node Non-Unix Installation
@appendixsec Installation on Other Operating Systems

This @value{SECTION} describes how to install @command{gawk} on
various non-Unix systems.

@menu
* PC Installation::             Installing and Compiling @command{gawk} on
                                MS-DOS and OS/2.
* VMS Installation::            Installing @command{gawk} on VMS.
@end menu

@c Rewritten by Scott Deifik <scottd.mail@sbcglobal.net>
@c and Darrel Hankerson <hankedr@mail.auburn.edu>

@node PC Installation
@appendixsubsec Installation on PC Operating Systems

@cindex PC operating systems@comma{} @command{gawk} on, installing
@cindex operating systems, PC@comma{} @command{gawk} on, installing
This @value{SECTION} covers installation and usage of @command{gawk}
on Intel architecture machines
@ifclear FOR_PRINT
running MS-DOS, any version of MS-Windows, or OS/2.
@end ifclear
@ifset FOR_PRINT
running MS-DOS and any version of MS-Windows.
@end ifset
In this @value{SECTION}, the term ``Windows32''
refers to any of Microsoft Windows 95/98/ME/NT/2000/XP/Vista/7/8.

The limitations of MS-DOS (and MS-DOS shells under the other operating
systems) have meant that various ``DOS extenders'' are often used with
programs such as @command{gawk}.  The varying capabilities of Microsoft
Windows 3.1 and Windows32 can add to the confusion.  For an overview
of the considerations, refer to @file{README_d/README.pc} in
the distribution.

@menu
* PC Binary Installation::      Installing a prepared distribution.
* PC Compiling::                Compiling @command{gawk} for MS-DOS,
                                Windows32, and OS/2.
* PC Testing::                  Testing @command{gawk} on PC systems.
* PC Using::                    Running @command{gawk} on MS-DOS, Windows32
                                and OS/2.
* Cygwin::                      Building and running @command{gawk} for
                                Cygwin.
* MSYS::                        Using @command{gawk} In The MSYS Environment.
@end menu

@ifclear FOR_PRINT
@node PC Binary Installation
@appendixsubsubsec Installing a Prepared Distribution for PC Systems

If you have received a binary distribution prepared by the MS-DOS
maintainers, then @command{gawk} and the necessary support files appear
under the @file{gnu} directory, with executables in @file{gnu/bin},
libraries in @file{gnu/lib/awk}, and manual pages under @file{gnu/man}.
This is designed for easy installation to a @file{/gnu} directory on your
drive---however, the files can be installed anywhere provided @env{AWKPATH} is
set properly.  Regardless of the installation directory, the first line of
@file{igawk.cmd} and @file{igawk.bat} (in @file{gnu/bin}) may need to be
edited.

The binary distribution contains a separate file describing the
contents. In particular, it may include more than one version of the
@command{gawk} executable.

OS/2 (32 bit, EMX) binary distributions are prepared for the @file{/usr}
directory of your preferred drive. Set @env{UNIXROOT} to your installation
drive (e.g., @samp{e:}) if you want to install @command{gawk} onto another drive
than the hardcoded default @samp{c:}. Executables appear in @file{/usr/bin},
libraries under @file{/usr/share/awk}, manual pages under @file{/usr/man},
Texinfo documentation under @file{/usr/info}, and NLS files
under @file{/usr/share/locale}.
Note that the files can be installed anywhere provided @env{AWKPATH} is
set properly.

If you already have a file @file{/usr/info/dir} from another package
@emph{do not overwrite it!} Instead enter the following commands at your prompt
(replace @samp{x:} by your installation drive):

@example
install-info --info-dir=x:/usr/info x:/usr/info/gawk.info
install-info --info-dir=x:/usr/info x:/usr/info/gawkinet.info
@end example

The binary distribution may contain a separate file containing additional
or more detailed installation instructions.
@end ifclear

@node PC Compiling
@appendixsubsubsec Compiling @command{gawk} for PC Operating Systems

@ifclear FOR_PRINT
@command{gawk} can be compiled for MS-DOS, Windows32, and OS/2 using
MinGW (Windows32) or Eberhard
Mattes (EMX: MS-DOS, Windows32 and OS/2).
@end ifclear
@ifset FOR_PRINT
@command{gawk} can be compiled for Windows32 using
MinGW.
@end ifset
The file
@file{README_d/README.pc} in the @command{gawk} distribution contains
additional notes, and @file{pc/Makefile} contains important information on
compilation options.

@cindex compiling @command{gawk} for MS-DOS and MS-Windows
To build @command{gawk} for MS-DOS and Windows32, copy the files in
the @file{pc} directory (@emph{except} for @file{ChangeLog}) to the
directory with the rest of the @command{gawk} sources, then invoke
@command{make} with the appropriate target name as an argument to
build @command{gawk}.  The @file{Makefile} copied from the @file{pc}
directory contains a configuration section with comments and may need
to be edited in order to work with your @command{make} utility.

The @file{Makefile} supports a number of targets for building various
MS-DOS and Windows32 versions.  A list of targets is printed if the
@command{make} command is given without a target.  As an example,
to build a
native MS-Windows binary of @command{gawk} using the MinGW tools,
type @samp{make mingw32}.

@ifclear FOR_PRINT
@cindex compiling @command{gawk} with EMX for OS/2
The 32 bit EMX version of @command{gawk} works ``out of the box'' under OS/2.
However, it is highly recommended to use GCC 2.95.3 for the compilation.
In principle, it is possible to compile @command{gawk} the following way:

@example
$ @kbd{./configure}
$ @kbd{make}
@end example

This is not recommended, though.  To get an OMF executable you should
use the following commands at your @command{sh} prompt:

@example
$ @kbd{CFLAGS="-O2 -Zomf -Zmt"}
$ @kbd{export CFLAGS}
$ @kbd{LDFLAGS="-s -Zcrtdll -Zlinker /exepack:2 -Zlinker /pm:vio -Zstack 0x6000"}
$ @kbd{export LDFLAGS}
$ @kbd{RANLIB="echo"}
$ @kbd{export RANLIB}
$ @kbd{./configure --prefix=c:/usr}
$ @kbd{make AR=emxomfar}
@end example

These are just suggestions for use with GCC 2.x.  You may use any other set of
(self-consistent) environment variables and compiler flags.

@ignore
To get an FHS-compliant file hierarchy it is recommended to use the additional
@command{configure} options @option{--infodir=c:/usr/share/info}, @option{--mandir=c:/usr/share/man}
and @option{--libexecdir=c:/usr/lib}.
@end ignore

@ignore
The internal @command{gettext} library tends to be problematic. It is therefore recommended
to use either an external one (@option{--without-included-gettext}) or to disable
NLS entirely (@option{--disable-nls}).
@end ignore

If you use GCC 2.95 it is recommended to use also:

@example
$ @kbd{LIBS="-lgcc"}
$ @kbd{export LIBS}
@end example

You can also get an @code{a.out} executable if you prefer:

@example
$ @kbd{CFLAGS="-O2 -Zmt"}
$ @kbd{export CFLAGS}
$ @kbd{LDFLAGS="-s -Zstack 0x6000"}
$ @kbd{LIBS="-lgcc"}
$ @kbd{unset RANLIB}
@c $ ./configure --prefix=c:/usr --without-included-gettext
$ @kbd{./configure --prefix=c:/usr}
$ @kbd{make}
@end example

@quotation NOTE
Compilation of @code{a.out} executables also works with GCC 3.2.
Versions later than GCC 3.2 have not been tested successfully.
@end quotation

@samp{make install} works as expected with the EMX build.

@quotation NOTE
Ancient OS/2 ports of GNU @command{make} are not able to handle
the Makefiles of this package.  If you encounter any problems with
@command{make}, try GNU Make 3.79.1 or later versions.  You should
find the latest version on
@uref{ftp://hobbes.nmsu.edu/pub/os2/}.@footnote{As of November 2014,
this site is still there, but the author could not find a package
for GNU Make.}
@end quotation
@end ifclear

@node PC Testing
@appendixsubsubsec Testing @command{gawk} on PC Operating Systems

Using @command{make} to run the standard tests and to install @command{gawk}
requires additional Unix-like tools, including @command{sh}, @command{sed}, and
@command{cp}. In order to run the tests, the @file{test/*.ok} files may need to
be converted so that they have the usual MS-DOS-style end-of-line markers.
Alternatively, run @command{make check CMP="diff -a"} to use GNU @command{diff}
in text mode instead of @command{cmp} to compare the resulting files.

@ifclear FOR_PRINT
Most
of the tests work properly with Stewartson's shell along with the
companion utilities or appropriate GNU utilities.  However, some editing of
@file{test/Makefile} is required. It is recommended that you copy the file
@file{pc/Makefile.tst} over the file @file{test/Makefile} as a
replacement. Details can be found in @file{README_d/README.pc}
and in the file @file{pc/Makefile.tst}.

On OS/2 the @code{pid} test fails because @code{spawnl()} is used instead of
@code{fork()}/@code{execl()} to start child processes.
Also the @code{mbfw1} and @code{mbprintf1} tests fail because the needed
multibyte functionality is not available.
@end ifclear

@node PC Using
@appendixsubsubsec Using @command{gawk} on PC Operating Systems
@cindex operating systems, PC, @command{gawk} on
@cindex PC operating systems, @command{gawk} on

Under MS-DOS and MS-Windows, the Cygwin and MinGW environments support
both the @samp{|&} operator and TCP/IP networking
(@pxref{TCP/IP Networking}).
@ifclear FOR_PRINT
EMX (OS/2 only) supports at least the @samp{|&} operator.
@end ifclear

@cindex search paths
@cindex search paths, for source files
@cindex @command{gawk}, MS-DOS version of
@cindex @command{gawk}, MS-Windows version of
@cindex @code{;} (semicolon), @env{AWKPATH} variable and
@cindex semicolon (@code{;}), @env{AWKPATH} variable and
@cindex @env{AWKPATH} environment variable
The MS-DOS and MS-Windows versions of @command{gawk} search for
program files as described in @ref{AWKPATH Variable}.  However,
semicolons (rather than colons) separate elements in the @env{AWKPATH}
variable.  If @env{AWKPATH} is not set or is empty, then the default
search path is @samp{@w{.;c:/lib/awk;c:/gnu/lib/awk}}.

@ifclear FOR_PRINT
@cindex @command{gawk}, OS/2 version of
@cindex @code{UNIXROOT} variable, on OS/2 systems
The search path for OS/2 (32 bit, EMX) is determined by the prefix directory
(most likely @file{/usr} or @file{c:/usr}) that has been specified as an option of
the @command{configure} script as is the case for the Unix versions.
If @file{c:/usr} is the prefix directory then the default search path contains @file{.}
and @file{c:/usr/share/awk}.
Additionally, to support binary distributions of @command{gawk} for OS/2
systems whose drive @samp{c:} might not support long @value{FN}s or might not exist
at all, there is a special environment variable.  If @env{UNIXROOT} specifies
a drive then this specific drive is also searched for program files.
E.g., if @env{UNIXROOT} is set to @file{e:} the complete default search path is
@samp{@w{.;c:/usr/share/awk;e:/usr/share/awk}}.

An @command{sh}-like shell (as opposed to @command{command.com} under MS-DOS
or @command{cmd.exe} under MS-Windows or OS/2) may be useful for @command{awk} programming.
The DJGPP collection of tools@footnote{Available from
@uref{ftp://ftp.delorie.com/pub/djgpp/current/v2gnu/}.}
includes an MS-DOS port of Bash,
and several shells are available for OS/2, including @command{ksh}.
@end ifclear
@ifset FOR_PRINT
An @command{sh}-like shell (as opposed to @command{command.com} under MS-DOS
or @command{cmd.exe} under MS-Windows) may be useful for @command{awk} programming.
The DJGPP collection of tools@footnote{Available from
@uref{ftp://ftp.delorie.com/pub/djgpp/current/v2gnu/}.} includes an MS-DOS port of Bash.
@end ifset

@cindex common extensions, @code{BINMODE} variable
@cindex extensions, common@comma{} @code{BINMODE} variable
@cindex differences in @command{awk} and @command{gawk}, @code{BINMODE} variable
@cindex @code{BINMODE} variable
@ifclear FOR_PRINT
Under MS-Windows, OS/2 and MS-DOS,
@end ifclear
@ifset FOR_PRINT
Under MS-Windows and MS-DOS,
@end ifset
@command{gawk} (and many other text programs) silently
translates end-of-line @samp{\r\n} to @samp{\n} on input and @samp{\n}
to @samp{\r\n} on output.  A special @code{BINMODE} variable @value{COMMONEXT}
allows control over these translations and is interpreted as follows:

@itemize @value{BULLET}
@item
If @code{BINMODE} is @code{"r"} or one,
then
binary mode is set on read (i.e., no translations on reads).

@item
If @code{BINMODE} is @code{"w"} or two,
then
binary mode is set on write (i.e., no translations on writes).

@item
If @code{BINMODE} is @code{"rw"} or @code{"wr"} or three,
binary mode is set for both read and write.

@item
@code{BINMODE=@var{non-null-string}} is
the same as @samp{BINMODE=3} (i.e., no translations on
reads or writes).  However, @command{gawk} issues a warning
message if the string is not one of @code{"rw"} or @code{"wr"}.
@end itemize

@noindent
The modes for standard input and standard output are set one time
only (after the
command line is read, but before processing any of the @command{awk} program).
Setting @code{BINMODE} for standard input or
standard output is accomplished by using an
appropriate @samp{-v BINMODE=@var{N}} option on the command line.
@code{BINMODE} is set at the time a file or pipe is opened and cannot be
changed midstream.

The name @code{BINMODE} was chosen to match @command{mawk}
(@pxref{Other Versions}).
@command{mawk} and @command{gawk} handle @code{BINMODE} similarly; however,
@command{mawk} adds a @samp{-W BINMODE=@var{N}} option and an environment
variable that can set @code{BINMODE}, @code{RS}, and @code{ORS}.  The
files @file{binmode[1-3].awk} (under @file{gnu/lib/awk} in some of the
prepared binary distributions) have been chosen to match @command{mawk}'s @samp{-W
BINMODE=@var{N}} option.  These can be changed or discarded; in particular,
the setting of @code{RS} giving the fewest ``surprises'' is open to debate.
@command{mawk} uses @samp{RS = "\r\n"} if binary mode is set on read, which is
appropriate for files with the MS-DOS-style end-of-line.

To illustrate, the following examples set binary mode on writes for standard
output and other files, and set @code{ORS} as the ``usual'' MS-DOS-style
end-of-line:

@example
gawk -v BINMODE=2 -v ORS="\r\n" @dots{}
@end example

@noindent
or:

@example
gawk -v BINMODE=w -f binmode2.awk @dots{}
@end example

@noindent
These give the same result as the @samp{-W BINMODE=2} option in
@command{mawk}.
The following changes the record separator to @code{"\r\n"} and sets binary
mode on reads, but does not affect the mode on standard input:

@example
gawk -v RS="\r\n" -e "BEGIN @{ BINMODE = 1 @}" @dots{}
@end example

@noindent
or:

@example
gawk -f binmode1.awk @dots{}
@end example

@noindent
With proper quoting, in the first example the setting of @code{RS} can be
moved into the @code{BEGIN} rule.

@node Cygwin
@appendixsubsubsec Using @command{gawk} In The Cygwin Environment
@cindex compiling @command{gawk} for Cygwin

@command{gawk} can be built and used ``out of the box'' under MS-Windows
if you are using the @uref{http://www.cygwin.com, Cygwin environment}.
This environment provides an excellent simulation of GNU/Linux, using
Bash, GCC, GNU Make,
and other GNU programs.  Compilation and installation for Cygwin is the
same as for a Unix system:

@example
tar -xvpzf gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz
cd gawk-@value{VERSION}.@value{PATCHLEVEL}
./configure
make && make check
@end example

When compared to GNU/Linux on the same system, the @samp{configure}
step on Cygwin takes considerably longer.  However, it does finish,
and then the @samp{make} proceeds as usual.

@node MSYS
@appendixsubsubsec Using @command{gawk} In The MSYS Environment

In the MSYS environment under MS-Windows, @command{gawk} automatically
uses binary mode for reading and writing files.  Thus, there is no
need to use the @code{BINMODE} variable.

This can cause problems with other Unix-like components that have
been ported to MS-Windows that expect @command{gawk} to do automatic
translation of @code{"\r\n"}, because it won't.

@node VMS Installation
@appendixsubsec Compiling and Installing @command{gawk} on Vax/VMS and OpenVMS

@c based on material from Pat Rankin <rankin@eql.caltech.edu>
@c now rankin@pactechdata.com
@c now r.pat.rankin@gmail.com

@cindex @command{gawk}, VMS version of
@cindex installation, VMS
This @value{SUBSECTION} describes how to compile and install @command{gawk} under VMS.
The older designation ``VMS'' is used throughout to refer to OpenVMS.

@menu
* VMS Compilation::             How to compile @command{gawk} under VMS.
* VMS Dynamic Extensions::      Compiling @command{gawk} dynamic extensions on
                                VMS.
* VMS Installation Details::    How to install @command{gawk} under VMS.
* VMS Running::                 How to run @command{gawk} under VMS.
* VMS GNV::                     The VMS GNV Project.
* VMS Old Gawk::                An old version comes with some VMS systems.
@end menu

@node VMS Compilation
@appendixsubsubsec Compiling @command{gawk} on VMS
@cindex compiling @command{gawk} for VMS

To compile @command{gawk} under VMS, there is a @code{DCL} command procedure
that issues all the necessary @code{CC} and @code{LINK} commands. There is
also a @file{Makefile} for use with the @code{MMS} and @code{MMK} utilities.
From the source directory, use either:

@example
$ @kbd{@@[.vms]vmsbuild.com}
@end example

@noindent
or:

@example
$ @kbd{MMS/DESCRIPTION=[.vms]descrip.mms gawk}
@end example

@noindent
or:

@example
$ @kbd{MMK/DESCRIPTION=[.vms]descrip.mms gawk}
@end example

@command{MMK} is an open source, free, near-clone of @command{MMS} and
can better handle ODS-5 volumes with upper- and lowercase @value{FN}s.
@command{MMK} is available from @uref{https://github.com/endlesssoftware/mmk}.

With ODS-5 volumes and extended parsing enabled, the case of the target
parameter may need to be exact.

@command{gawk} has been tested under VAX/VMS 7.3 and Alpha/VMS 7.3-1
using Compaq C V6.4, and under Alpha/VMS 7.3, Alpha/VMS 7.3-2, and IA64/VMS 8.3.
The most recent builds used HP C V7.3 on Alpha VMS 8.3 and both
Alpha and IA64 VMS 8.4 used HP C 7.3.@footnote{The IA64 architecture
is also known as ``Itanium.''}

@xref{VMS GNV} for information on building
@command{gawk} as a PCSI kit that is compatible with the GNV product.

@node VMS Dynamic Extensions
@appendixsubsubsec Compiling @command{gawk} Dynamic Extensions on VMS

The extensions that have been ported to VMS can be built using one of
the following commands:

@example
$ @kbd{MMS/DESCRIPTION=[.vms]descrip.mms extensions}
@end example

@noindent
or:

@example
$ @kbd{MMK/DESCRIPTION=[.vms]descrip.mms extensions}
@end example

@command{gawk} uses @code{AWKLIBPATH} as either an environment variable
or a logical name to find the dynamic extensions.

Dynamic extensions need to be compiled with the same compiler options for
floating-point, pointer size, and symbol name handling as were used
to compile @command{gawk} itself.
Alpha and Itanium should use IEEE floating point.  The pointer size is 32 bits,
and the symbol name handling should be exact case with CRC shortening for
symbols longer than 32 bits.

For Alpha and Itanium:

@example
/name=(as_is,short)
/float=ieee/ieee_mode=denorm_results
@end example

For VAX:

@example
/name=(as_is,short)
@end example

Compile-time macros need to be defined before the first VMS-supplied
header file is included, as follows:

@example
#if (__CRTL_VER >= 70200000) && !defined (__VAX)
#define _LARGEFILE 1
#endif

#ifndef __VAX
#ifdef __CRTL_VER
#if __CRTL_VER >= 80200000
#define _USE_STD_STAT 1
#endif
#endif
#endif
@end example

If you are writing your own extensions to run on VMS, you must supply these
definitions yourself. The @file{config.h} file created when building @command{gawk}
on VMS does this for you; if instead you use that file or a similar one, then you
must remember to include it before any VMS-supplied header files.

@node VMS Installation Details
@appendixsubsubsec Installing @command{gawk} on VMS

To use @command{gawk}, all you need is a ``foreign'' command, which is a
@code{DCL} symbol whose value begins with a dollar sign. For example:

@example
$ @kbd{GAWK :== $disk1:[gnubin]gawk}
@end example

@noindent
Substitute the actual location of @command{gawk.exe} for
@samp{$disk1:[gnubin]}. The symbol should be placed in the
@file{login.com} of any user who wants to run @command{gawk},
so that it is defined every time the user logs on.
Alternatively, the symbol may be placed in the system-wide
@file{sylogin.com} procedure, which allows all users
to run @command{gawk}.

If your @command{gawk} was installed by a PCSI kit into the
@file{GNV$GNU:} directory tree, the program will be known as
@file{GNV$GNU:[bin]gnv$gawk.exe} and the help file will be
@file{GNV$GNU:[vms_help]gawk.hlp}.

The PCSI kit also installs a @file{GNV$GNU:[vms_bin]gawk_verb.cld} file
that can be used to add @command{gawk} and @command{awk} as DCL commands.

For just the current process you can use:

@example
$ @kbd{set command gnv$gnu:[vms_bin]gawk_verb.cld}
@end example

Or the system manager can use @file{GNV$GNU:[vms_bin]gawk_verb.cld} to
add the @command{gawk} and @command{awk} to the system-wide @samp{DCLTABLES}.

The DCL syntax is documented in the @file{gawk.hlp} file.

Optionally, the @file{gawk.hlp} entry can be loaded into a VMS help library:

@example
$ @kbd{LIBRARY/HELP sys$help:helplib [.vms]gawk.hlp}
@end example

@noindent
(You may want to substitute a site-specific help library rather than
the standard VMS library @samp{HELPLIB}.)  After loading the help text,
the command:

@example
$ @kbd{HELP GAWK}
@end example

@noindent
provides information about both the @command{gawk} implementation and the
@command{awk} programming language.

The logical name @samp{AWK_LIBRARY} can designate a default location
for @command{awk} program files.  For the @option{-f} option, if the specified
@value{FN} has no device or directory path information in it, @command{gawk}
looks in the current directory first, then in the directory specified
by the translation of @samp{AWK_LIBRARY} if the file is not found.
If, after searching in both directories, the file still is not found,
@command{gawk} appends the suffix @samp{.awk} to the @value{FN} and retries
the file search.  If @samp{AWK_LIBRARY} has no definition, a default value
of @samp{SYS$LIBRARY:} is used for it.

@node VMS Running
@appendixsubsubsec Running @command{gawk} on VMS

Command-line parsing and quoting conventions are significantly different
on VMS, so examples in this @value{DOCUMENT} or from other sources often need minor
changes.  They @emph{are} minor though, and all @command{awk} programs
should run correctly.

Here are a couple of trivial tests:

@example
$ @kbd{gawk -- "BEGIN @{print ""Hello, World!""@}"}
$ @kbd{gawk -"W" version}
! could also be -"W version" or "-W version"
@end example

@noindent
Note that uppercase and mixed-case text must be quoted.

The VMS port of @command{gawk} includes a @code{DCL}-style interface in addition
to the original shell-style interface (see the help entry for details).
One side effect of dual command-line parsing is that if there is only a
single parameter (as in the quoted string program), the command
becomes ambiguous.  To work around this, the normally optional @option{--}
flag is required to force Unix-style parsing rather than @code{DCL} parsing.
If any other dash-type options (or multiple parameters such as @value{DF}s to
process) are present, there is no ambiguity and @option{--} can be omitted.

@cindex exit status, of VMS
The @code{exit} value is a Unix-style value and is encoded into a VMS exit
status value when the program exits.

The VMS severity bits will be set based on the @code{exit} value.
A failure is indicated by 1, and VMS sets the @code{ERROR} status.
A fatal error is indicated by 2, and VMS sets the @code{FATAL} status.
All other values will have the @code{SUCCESS} status.  The exit value is
encoded to comply with VMS coding standards and will have the
@code{C_FACILITY_NO} of @code{0x350000} with the constant @code{0xA000}
added to the number shifted over by 3 bits to make room for the severity codes.

To extract the actual @command{gawk} exit code from the VMS status, use:

@example
unix_status = (vms_status .and. %x7f8) / 8
@end example

@noindent
A C program that uses @code{exec()} to call @command{gawk} will get the original
Unix-style exit value.

Older versions of @command{gawk} for VMS treated a Unix exit code 0 as 1,
a failure as 2, a fatal error as 4, and passed all the other numbers through.
This violated the VMS exit status coding requirements.

@cindex floating-point, VAX/VMS
VAX/VMS floating point uses unbiased rounding. @xref{Round Function}.

VMS reports time values in GMT unless one of the @code{SYS$TIMEZONE_RULE}
or @code{TZ} logical names is set.  Older versions of VMS, such as VAX/VMS
7.3, do not set these logical names.

@c @cindex directory search
@c @cindex path, search
@cindex search paths
@cindex search paths, for source files
The default search path, when looking for @command{awk} program files specified
by the @option{-f} option, is @code{"SYS$DISK:[],AWK_LIBRARY:"}.  The logical
name @env{AWKPATH} can be used to override this default.  The format
of @env{AWKPATH} is a comma-separated list of directory specifications.
When defining it, the value should be quoted so that it retains a single
translation and not a multitranslation @code{RMS} searchlist.

@cindex redirection on VMS

This restriction also applies to running @command{gawk} under GNV,
as redirection is always to a DCL command.

If you are redirecting data to a VMS command or utility, the current
implementation requires that setting up a VMS foreign command that runs
a command file before invoking @command{gawk}.
(This restriction may be removed in a future release of @command{gawk} on VMS.)

Without this command file, the input data will also appear prepended
to the output data.

This also allows simulating POSIX commands that are not found on VMS or the
use of GNV utilities.

The example below is for @command{gawk} redirecting data to the VMS
@command{sort} command.

@example
$ sort = "@@device:[dir]vms_gawk_sort.com"
@end example

The command file needs to be of the format in the example below.

The first line inhibits the passed input data from also showing up in the
output.  It must be in the format in the example.

The next line creates a foreign command that overrides the outer foreign
command which prevents an infinite recursion of command files.

The next to the last command redirects @code{sys$input} to be
@code{sys$command}, in order to pick up the data that is being redirected
to the command.

The last line runs the actual command.  It must be the last command as the data
redirected from @command{gawk} will be read when the command file ends.

@example
$!'f$verify(0,0)'
$ sort := sort
$ define/user sys$input sys$command:
$ sort sys$input: sys$output:
@end example


@node VMS GNV
@appendixsubsubsec The VMS GNV Project

The VMS GNV package provides a build environment similar to POSIX with ports
of a collection of open source tools.  The @command{gawk} found in the GNV
base kit is an older port.  Currently, the GNV project is being reorganized
to supply individual PCSI packages for each component.
See @w{@uref{https://sourceforge.net/p/gnv/wiki/InstallingGNVPackages/}.}

The normal build procedure for @command{gawk} produces a program that
is suitable for use with GNV.

The file @file{vms/gawk_build_steps.txt} in the distribution documents
the procedure for building a VMS PCSI kit that is compatible with GNV.

@ignore
@c The VMS POSIX product, also known as POSIX for OpenVMS, is long defunct
@c and building gawk for it has not been tested in many years, but these
@c old instructions might still work if anyone is still using it.

@node VMS POSIX
@appendixsubsubsec Building and Using @command{gawk} on VMS POSIX

Ignore the instructions above, although @file{vms/gawk.hlp} should still
be made available in a help library.  The source tree should be unpacked
into a container file subsystem rather than into the ordinary VMS filesystem.
Make sure that the two scripts, @file{configure} and
@file{vms/posix-cc.sh}, are executable; use @samp{chmod +x} on them if
necessary.  Then execute the following two commands:

@example
psx> @kbd{CC=vms/posix-cc.sh configure}
psx> @kbd{make CC=c89 gawk}
@end example

@noindent
The first command constructs files @file{config.h} and @file{Makefile} out
of templates, using a script to make the C compiler fit @command{configure}'s
expectations.  The second command compiles and links @command{gawk} using
the C compiler directly; ignore any warnings from @command{make} about being
unable to redefine @code{CC}.  @command{configure} takes a very long
time to execute, but at least it provides incremental feedback as it runs.

This has been tested with VAX/VMS V6.2, VMS POSIX V2.0, and DEC C V5.2.

Once built, @command{gawk} works like any other shell utility.  Unlike
the normal VMS port of @command{gawk}, no special command-line manipulation is
needed in the VMS POSIX environment.
@end ignore

@node VMS Old Gawk
@appendixsubsubsec Some VMS Systems Have An Old Version of @command{gawk}

@c Thanks to "gerard labadie" <gerard.labadie@gmail.com>

Some versions of VMS have an old version of @command{gawk}.  To access it,
define a symbol, as follows:

@example
$ @kbd{gawk :== $sys$common:[syshlp.examples.tcpip.snmp]gawk.exe}
@end example

This is apparently @value{PVERSION} 2.15.6, which is extremely old. We
recommend compiling and using the current version.


@node Bugs
@appendixsec Reporting Problems and Bugs
@cindex archaeologists
@quotation
@i{There is nothing more dangerous than a bored archaeologist.}
@author Douglas Adams, @cite{The Hitchhiker's Guide to the Galaxy}
@end quotation
@c the radio show, not the book. :-)

@cindex debugging @command{gawk}, bug reports
@cindex troubleshooting, @command{gawk}, bug reports
If you have problems with @command{gawk} or think that you have found a bug,
report it to the developers; we cannot promise to do anything,
but we might well want to fix it.

Before reporting a bug, make sure you have really found a genuine bug.
Carefully reread the documentation and see if it says you can do
what you're trying to do.  If it's not clear whether you should be able
to do something or not, report that too; it's a bug in the documentation!

Before reporting a bug or trying to fix it yourself, try to isolate it
to the smallest possible @command{awk} program and input @value{DF} that
reproduce the problem.  Then send us the program and @value{DF},
some idea of what kind of Unix system you're using,
the compiler you used to compile @command{gawk}, and the exact results
@command{gawk} gave you.  Also say what you expected to occur; this helps
us decide whether the problem is really in the documentation.

Make sure to include the version number of @command{gawk} you are using.
You can get this information with the command @samp{gawk --version}.

@cindex @code{bug-gawk@@gnu.org} bug reporting address
@cindex email address for bug reports, @code{bug-gawk@@gnu.org}
@cindex bug reports, email address, @code{bug-gawk@@gnu.org}
Once you have a precise problem description, send email to
@EMAIL{bug-gawk@@gnu.org,bug-gawk at gnu dot org}.

The @command{gawk} maintainers subscribe to this address, and
thus they will receive your bug report.
Although you can send mail to the maintainers directly,
the bug reporting address is preferred because the
email list is archived at the GNU Project.
@emph{All email must be in English. This is the only language
understood in common by all the maintainers.}
In addition, please be sure to send all mail in @emph{plain text},
not (or not exclusively) in HTML.

@cindex @code{comp.lang.awk} newsgroup
@quotation CAUTION
Do @emph{not} try to report bugs in @command{gawk} by
posting to the Usenet/Internet newsgroup @code{comp.lang.awk}.
The @command{gawk} developers do occasionally read this newsgroup,
but there is no guarantee that we will see your posting.  The steps described
here are the only officially recognized way for reporting bugs.
Really.
@end quotation

@ignore
Date: Sun, 17 May 2015 19:50:14 -0400
From: Chet Ramey <chet.ramey@case.edu>
Reply-To: chet.ramey@case.edu
Organization: ITS, Case Western Reserve University
To: Aharon Robbins <arnold@skeeve.com>
CC: chet.ramey@case.edu

....
I gave up on usenet a couple of years ago and haven't really looked back.
It's like sports talk radio -- you feel smarter for not having read it.

And another one:

Date: Thu, 11 Jun 2015 09:00:56 -0400
From: Chet Ramey <chet.ramey@case.edu>

My memory was imperfect.  Back in June 2009, I wrote:

"That's the nice thing about open source, right?  You can take your ball
and run to another section of the playground.  Then, if you like mixing
metaphors, you can throw rocks from there."
@end ignore

@quotation NOTE
Many distributions of GNU/Linux and the various BSD-based operating systems
have their own bug reporting systems.  If you report a bug using your distribution's
bug reporting system, you should also send a copy to
@EMAIL{bug-gawk@@gnu.org,bug-gawk at gnu dot org}.

This is for two reasons.  First, although some distributions forward
bug reports ``upstream'' to the GNU mailing list, many don't, so there is a good
chance that the @command{gawk}  maintainers won't even see the bug report!  Second,
mail to the GNU list is archived, and having everything at the GNU Project
keeps things self-contained and not dependent on other organizations.
@end quotation

Non-bug suggestions are always welcome as well.  If you have questions
about things that are unclear in the documentation or are just obscure
features, ask on the bug list; we will try to help you out if we can.

If you find bugs in one of the non-Unix ports of @command{gawk},
send an email to the bug list, with a copy to the
person who maintains that port.  The maintainers are named in the following list,
as well as in the @file{README} file in the @command{gawk} distribution.
Information in the @file{README} file should be considered authoritative
if it conflicts with this @value{DOCUMENT}.

The people maintaining the various @command{gawk} ports are:

@c put the index entries outside the table, for docbook
@cindex Buening, Andreas
@cindex Deifik, Scott
@cindex Malmberg, John
@cindex Pitts, Dave
@cindex G., Daniel Richard
@cindex Robbins, Arnold
@cindex Zaretskii, Eli
@multitable {MS-Windows with MinGW} {123456789012345678901234567890123456789001234567890}
@item Unix and POSIX systems @tab Arnold Robbins, @EMAIL{arnold@@skeeve.com,arnold at skeeve dot com}

@c @item MS-DOS with DJGPP @tab Scott Deifik, @EMAIL{scottd.mail@@sbcglobal.net,scottd dot mail at sbcglobal dot net}

@item MS-Windows with MinGW @tab Eli Zaretskii, @EMAIL{eliz@@gnu.org,eliz at gnu dot org}

@c Leave this in the print version on purpose.
@c OS/2 is not mentioned anywhere else in the print version though.
@item OS/2 @tab Andreas Buening, @EMAIL{andreas.buening@@nexgo.de,andreas dot buening at nexgo dot de}

@item VMS @tab John Malmberg, @EMAIL{wb8tyw@@qsl.net,wb8tyw at qsl.net}

@item z/OS (OS/390) @tab Daniel Richard G.@: @EMAIL{skunk@@iSKUNK.ORG,skunk at iSKUNK.ORG}
@item  @tab Dave Pitts (Maintainer Emeritus), @EMAIL{dpitts@@cozx.com,dpitts at cozx dot com}
@end multitable

If your bug is also reproducible under Unix, send a copy of your
report to the @EMAIL{bug-gawk@@gnu.org,bug-gawk at gnu dot org} email list as well.

The DJGPP port is no longer supported; it will remain in the code base for a while in case
a volunteer wishes to take it over. If this does not happen, then eventually code for this
port will be removed.

@node Other Versions
@appendixsec Other Freely Available @command{awk} Implementations
@cindex @command{awk}, implementations
@ignore
From: emory!amc.com!brennan (Michael Brennan)
Subject: C++ comments in awk programs
To: arnold@gnu.ai.mit.edu (Arnold Robbins)
Date: Wed, 4 Sep 1996 08:11:48 -0700 (PDT)

@end ignore
@cindex Brennan, Michael
@ifnotdocbook
@quotation
@i{It's kind of fun to put comments like this in your awk code:}@*
@ @ @ @ @ @ @code{// Do C++ comments work? answer: yes! of course}
@author Michael Brennan
@end quotation
@end ifnotdocbook

@docbook
<blockquote><attribution>Michael Brennan</attribution>
<literallayout><emphasis>It's kind of fun to put comments like this in your awk code.</emphasis>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<literal>// Do C++ comments work? answer: yes! of course</literal></literallayout>
</blockquote>
@end docbook

There are a number of other freely available @command{awk} implementations.
This @value{SECTION} briefly describes where to get them:

@table @asis
@cindex Kernighan, Brian
@cindex source code, Brian Kernighan's @command{awk}
@cindex @command{awk}, versions of, See Also Brian Kernighan's @command{awk}
@cindex Brian Kernighan's @command{awk}, source code
@item Unix @command{awk}
Brian Kernighan, one of the original designers of Unix @command{awk},
has made his implementation of
@command{awk} freely available.
You can retrieve this version via
@uref{http://www.cs.princeton.edu/~bwk, his home page}.
It is available in several archive formats:

@table @asis
@item Shell archive
@uref{http://www.cs.princeton.edu/~bwk/btl.mirror/awk.shar}

@item Compressed @command{tar} file
@uref{http://www.cs.princeton.edu/~bwk/btl.mirror/awk.tar.gz}

@item Zip file
@uref{http://www.cs.princeton.edu/~bwk/btl.mirror/awk.zip}
@end table

@cindex @command{git} utility
You can also retrieve it from GitHub:

@example
git clone git://github.com/onetrueawk/awk bwkawk
@end example

@noindent
This command creates a copy of the @uref{http://git-scm.com, Git}
repository in a directory named @file{bwkawk}.  If you leave that argument
off the @command{git} command line, the repository copy is created in a
directory named @file{awk}.

This version requires an ISO C (1990 standard) compiler; the C compiler
from GCC (the GNU Compiler Collection) works quite nicely.

@xref{Common Extensions}
for a list of extensions in this @command{awk} that are not in POSIX @command{awk}.

As a side note, Dan Bornstein has created a Git repository tracking
all the versions of BWK @command{awk} that he could find. It's
available at @uref{git://github.com/danfuzz/one-true-awk}.

@cindex Brennan, Michael
@cindex @command{mawk} utility
@cindex source code, @command{mawk}
@item @command{mawk}
Michael Brennan wrote an independent implementation of @command{awk},
called @command{mawk}.  It is available under the
@ifclear FOR_PRINT
GPL (@pxref{Copying}),
@end ifclear
@ifset FOR_PRINT
GPL,
@end ifset
just as @command{gawk} is.

The original distribution site for the @command{mawk} source code
no longer has it.  A copy is available at
@uref{http://www.skeeve.com/gawk/mawk1.3.3.tar.gz}.

In 2009, Thomas Dickey took on @command{mawk} maintenance.
Basic information is available on
@uref{http://www.invisible-island.net/mawk, the project's web page}.
The download URL is
@url{http://invisible-island.net/datafiles/release/mawk.tar.gz}.

Once you have it,
@command{gunzip} may be used to decompress this file. Installation
is similar to @command{gawk}'s
(@pxref{Unix Installation}).

@xref{Common Extensions}
for a list of extensions in @command{mawk} that are not in POSIX @command{awk}.

@cindex Sumner, Andrew
@cindex @command{awka} compiler for @command{awk}
@cindex source code, @command{awka}
@item @command{awka}
Written by Andrew Sumner,
@command{awka} translates @command{awk} programs into C, compiles them,
and links them with a library of functions that provide the core
@command{awk} functionality.
It also has a number of extensions.

The @command{awk} translator is released under the GPL, and the library
is under the LGPL.

To get @command{awka}, go to @url{http://sourceforge.net/projects/awka}.
@c You can reach Andrew Sumner at @email{andrew@@zbcom.net}.
@c andrewsumner@@yahoo.net

The project seems to be frozen; no new code changes have been made
since approximately 2001.

@cindex Beebe, Nelson H.F.@:
@cindex @command{pawk} (profiling version of Brian Kernighan's @command{awk})
@cindex source code, @command{pawk}
@item @command{pawk}
Nelson H.F.@: Beebe at the University of Utah has modified
BWK @command{awk} to provide timing and profiling information.
It is different from @command{gawk} with the @option{--profile} option
(@pxref{Profiling})
in that it uses CPU-based profiling, not line-count
profiling.  You may find it at either
@uref{ftp://ftp.math.utah.edu/pub/pawk/pawk-20030606.tar.gz}
or
@uref{http://www.math.utah.edu/pub/pawk/pawk-20030606.tar.gz}.

@item BusyBox @command{awk}
@cindex BusyBox Awk
@cindex source code, BusyBox Awk
BusyBox is a GPL-licensed program providing small versions of many
applications within a single executable. It is aimed at embedded systems.
It includes a full implementation of POSIX @command{awk}.  When building
it, be careful not to do @samp{make install} as it will overwrite
copies of other applications in your @file{/usr/local/bin}.  For more
information, see the @uref{http://busybox.net, project's home page}.

@cindex OpenSolaris
@cindex Solaris, POSIX-compliant @command{awk}
@cindex source code, Solaris @command{awk}
@item The OpenSolaris POSIX @command{awk}
The versions of @command{awk} in @file{/usr/xpg4/bin} and
@file{/usr/xpg6/bin} on Solaris are more or less POSIX-compliant.
They are based on the @command{awk} from Mortice Kern Systems for PCs.
We were able to make this code compile and work under GNU/Linux
with 1--2 hours of work.  Making it more generally portable (using
GNU Autoconf and/or Automake) would take more work, and this
has not been done, at least to our knowledge.

@cindex Illumos
@cindex Illumos, POSIX-compliant @command{awk}
@cindex source code, Illumos @command{awk}
The source code used to be available from the OpenSolaris website.
However, that project was ended and the website shut down.  Fortunately, the
@uref{http://wiki.illumos.org/display/illumos/illumos+Home, Illumos project}
makes this implementation available.  You can view the files one at a time from
@uref{https://github.com/joyent/illumos-joyent/blob/master/usr/src/cmd/awk_xpg4}.

@cindex @command{jawk}
@cindex Java implementation of @command{awk}
@cindex source code, @command{jawk}
@item @command{jawk}
This is an interpreter for @command{awk} written in Java. It claims
to be a full interpreter, although because it uses Java facilities
for I/O and for regexp matching, the language it supports is different
from POSIX @command{awk}.  More information is available on the
@uref{http://jawk.sourceforge.net, project's home page}.

@item Libmawk
@cindex libmawk
@cindex source code, libmawk
This is an embeddable @command{awk} interpreter derived from
@command{mawk}. For more information, see
@uref{http://repo.hu/projects/libmawk/}.

@item @code{pawk}
@cindex source code, @command{pawk} (Python version)
@cindex @code{pawk}, @command{awk}-like facilities for Python
This is a Python module that claims to bring @command{awk}-like
features to Python. See @uref{https://github.com/alecthomas/pawk}
for more information. (This is not related to Nelson Beebe's
modified version of BWK @command{awk}, described earlier.)

@item @w{QSE @command{awk}}
@cindex QSE @command{awk}
@cindex source code, QSE @command{awk}
This is an embeddable @command{awk} interpreter. For more information,
see @uref{http://code.google.com/p/qse/} and @uref{http://awk.info/?tools/qse}.

@item @command{QTawk}
@cindex QuikTrim Awk
@cindex source code, QuikTrim Awk
This is an independent implementation of @command{awk} distributed
under the GPL. It has a large number of extensions over standard
@command{awk} and may not be 100% syntactically compatible with it.
See @uref{http://www.quiktrim.org/QTawk.html} for more information,
including the manual. The download link there is out of date; see
@uref{http://www.quiktrim.org/#AdditionalResources} for the latest
download link.

The project may also be frozen; no new code changes have been made
since approximately 2014.

@item Other versions
See also the ``Versions and implementations'' section of the
@uref{http://en.wikipedia.org/wiki/Awk_language#Versions_and_implementations,
Wikipedia article} on @command{awk} for information on additional versions.

@end table

@node Installation summary
@appendixsec Summary

@itemize @value{BULLET}
@item
The @command{gawk} distribution is available from the GNU Project's main
distribution site, @code{ftp.gnu.org}.  The canonical build recipe is:

@example
wget http://ftp.gnu.org/gnu/gawk/gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz
tar -xvpzf gawk-@value{VERSION}.@value{PATCHLEVEL}.tar.gz
cd gawk-@value{VERSION}.@value{PATCHLEVEL}
./configure && make && make check
@end example

@item
@command{gawk} may be built on non-POSIX systems as well. The currently
supported systems are MS-Windows using
MSYS, MinGW, and Cygwin,
@ifclear FOR_PRINT
OS/2 using EMX,
@end ifclear
and both Vax/VMS and OpenVMS.
Instructions for each system are included in this @value{APPENDIX}.

@item
Bug reports should be sent via email to @email{bug-gawk@@gnu.org}.
Bug reports should be in English and should include the version of @command{gawk},
how it was compiled, and a short program and @value{DF} that demonstrate
the problem.

@item
There are a number of other freely available @command{awk}
implementations.  Many are POSIX-compliant; others are less so.

@end itemize


@ifclear FOR_PRINT
@node Notes
@appendix Implementation Notes
@cindex @command{gawk}, implementation issues
@cindex implementation issues, @command{gawk}

This appendix contains information mainly of interest to implementers and
maintainers of @command{gawk}.  Everything in it applies specifically to
@command{gawk} and not to other implementations.

@menu
* Compatibility Mode::          How to disable certain @command{gawk}
                                extensions.
* Additions::                   Making Additions To @command{gawk}.
* Future Extensions::           New features that may be implemented one day.
* Implementation Limitations::  Some limitations of the implementation.
* Extension Design::            Design notes about the extension API.
* Old Extension Mechanism::     Some compatibility for old extensions.
* Notes summary::               Summary of implementation notes.
@end menu

@node Compatibility Mode
@appendixsec Downward Compatibility and Debugging
@cindex @command{gawk}, implementation issues, downward compatibility
@cindex @command{gawk}, implementation issues, debugging
@cindex troubleshooting, @command{gawk}
@cindex implementation issues@comma{} @command{gawk}, debugging

@xref{POSIX/GNU},
for a summary of the GNU extensions to the @command{awk} language and program.
All of these features can be turned off by invoking @command{gawk} with the
@option{--traditional} option or with the @option{--posix} option.

If @command{gawk} is compiled for debugging with @samp{-DDEBUG}, then there
is one more option available on the command line:

@table @code
@item -Y
@itemx --parsedebug
Print out the parse stack information as the program is being parsed.
@end table

This option is intended only for serious @command{gawk} developers
and not for the casual user.  It probably has not even been compiled into
your version of @command{gawk}, since it slows down execution.

@node Additions
@appendixsec Making Additions to @command{gawk}

If you find that you want to enhance @command{gawk} in a significant
fashion, you are perfectly free to do so.  That is the point of having
free software; the source code is available and you are free to change
it as you want (@pxref{Copying}).

This @value{SECTION} discusses the ways you might want to change @command{gawk}
as well as any considerations you should bear in mind.

@menu
* Accessing The Source::        Accessing the Git repository.
* Adding Code::                 Adding code to the main body of
                                @command{gawk}.
* New Ports::                   Porting @command{gawk} to a new operating
                                system.
* Derived Files::               Why derived files are kept in the Git
                                repository.
@end menu

@node Accessing The Source
@appendixsubsec Accessing The @command{gawk} Git Repository

As @command{gawk} is Free Software, the source code is always available.
@ref{Gawk Distribution} describes how to get and build the formal,
released versions of @command{gawk}.

@cindex @command{git} utility
However, if you want to modify @command{gawk} and contribute back your
changes, you will probably wish to work with the development version.
To do so, you will need to access the @command{gawk} source code
repository.  The code is maintained using the
@uref{http://git-scm.com, Git distributed version control system}.
You will need to install it if your system doesn't have it.
Once you have done so, use the command:

@example
git clone git://git.savannah.gnu.org/gawk.git
@end example

@noindent
This clones the @command{gawk} repository.  If you are behind a
firewall that does not allow you to use the Git native protocol, you
can still access the repository using:

@example
git clone http://git.savannah.gnu.org/r/gawk.git
@end example

Once you have made changes, you can use @samp{git diff} to produce a
patch, and send that to the @command{gawk} maintainer; see @ref{Bugs},
for how to do that.

Once upon a time there was Git--CVS gateway for use by people who could
not install Git. However, this gateway no longer works, so you may have
better luck using a more modern version control system like Bazaar,
that has a Git plug-in for working with Git repositories.

@node Adding Code
@appendixsubsec Adding New Features

@cindex adding, features to @command{gawk}
@cindex features, adding to @command{gawk}
@cindex @command{gawk}, features, adding
You are free to add any new features you like to @command{gawk}.
However, if you want your changes to be incorporated into the @command{gawk}
distribution, there are several steps that you need to take in order to
make it possible to include them:

@enumerate 1
@item
Before building the new feature into @command{gawk} itself,
consider writing it as an extension
(@pxref{Dynamic Extensions}).
If that's not possible, continue with the rest of the steps in this list.

@item
Be prepared to sign the appropriate paperwork.
In order for the FSF to distribute your changes, you must either place
those changes in the public domain and submit a signed statement to that
effect, or assign the copyright in your changes to the FSF.
Both of these actions are easy to do and @emph{many} people have done so
already. If you have questions, please contact me
(@pxref{Bugs}),
or @EMAIL{assign@@gnu.org,assign at gnu dot org}.

@item
Get the latest version.
It is much easier for me to integrate changes if they are relative to
the most recent distributed version of @command{gawk}, or better yet,
relative to the latest code in the Git repository.  If your version of
@command{gawk} is very old, I may not be able to integrate your changes at all.
(@xref{Getting},
for information on getting the latest version of @command{gawk}.)

@item
@ifnotinfo
Follow the @cite{GNU Coding Standards}.
@end ifnotinfo
@ifinfo
See @inforef{Top, , Version, standards, GNU Coding Standards}.
@end ifinfo
This document describes how GNU software should be written. If you haven't
read it, please do so, preferably @emph{before} starting to modify @command{gawk}.
(The @cite{GNU Coding Standards} are available from
the GNU Project's
@uref{http://www.gnu.org/prep/standards/, website}.
Texinfo, Info, and DVI versions are also available.)

@cindex @command{gawk}, coding style in
@item
Use the @command{gawk} coding style.
The C code for @command{gawk} follows the instructions in the
@cite{GNU Coding Standards}, with minor exceptions.  The code is formatted
using the traditional ``K&R'' style, particularly as regards to the placement
of braces and the use of TABs.  In brief, the coding rules for @command{gawk}
are as follows:

@itemize @value{BULLET}
@item
Use ANSI/ISO style (prototype) function headers when defining functions.

@item
Put the name of the function at the beginning of its own line.

@item
Use @samp{#elif} instead of nesting @samp{#if} inside @samp{#else}.

@item
Put the return type of the function, even if it is @code{int}, on the
line above the line with the name and arguments of the function.

@item
Put spaces around parentheses used in control structures
(@code{if}, @code{while}, @code{for}, @code{do}, @code{switch},
and @code{return}).

@item
Do not put spaces in front of parentheses used in function calls.

@item
Put spaces around all C operators and after commas in function calls.

@item
Do not use the comma operator to produce multiple side effects, except
in @code{for} loop initialization and increment parts, and in macro bodies.

@item
Use real TABs for indenting, not spaces.

@item
Use the ``K&R'' brace layout style.

@item
Use comparisons against @code{NULL} and @code{'\0'} in the conditions of
@code{if}, @code{while}, and @code{for} statements, as well as in the @code{case}s
of @code{switch} statements, instead of just the
plain pointer or character value.

@item
Use @code{true} and @code{false} for @code{bool} values,
the @code{NULL} symbolic constant for pointer values,
and the character constant @code{'\0'} where appropriate, instead of @code{1}
and @code{0}.

@item
Provide one-line descriptive comments for each function.

@item
Do not use the @code{alloca()} function for allocating memory off the
stack.  Its use causes more portability trouble than is worth the minor
benefit of not having to free the storage. Instead, use @code{malloc()}
and @code{free()}.

@item
Do not use comparisons of the form @samp{! strcmp(a, b)} or similar.
As Henry Spencer once said, ``@code{strcmp()} is not a boolean!''
Instead, use @samp{strcmp(a, b) == 0}.

@item
If adding new bit flag values, use explicit hexadecimal constants
(@code{0x001}, @code{0x002}, @code{0x004}, and son on) instead of
shifting one left by successive amounts (@samp{(1<<0)}, @samp{(1<<1)},
and so on).
@end itemize

@quotation NOTE
If I have to reformat your code to follow the coding style used in
@command{gawk}, I may not bother to integrate your changes at all.
@end quotation

@cindex Texinfo
@item
Update the documentation.
Along with your new code, please supply new sections and/or chapters
for this @value{DOCUMENT}.  If at all possible, please use real
Texinfo, instead of just supplying unformatted ASCII text (although
even that is better than no documentation at all).
Conventions to be followed in @cite{@value{TITLE}} are provided
after the @samp{@@bye} at the end of the Texinfo source file.
If possible, please update the @command{man} page as well.

You will also have to sign paperwork for your documentation changes.

@cindex @command{git} utility
@item
Submit changes as unified diffs.
Use @samp{diff -u -r -N} to compare
the original @command{gawk} source tree with your version.
I recommend using the GNU version of @command{diff}, or best of all,
@samp{git diff} or @samp{git format-patch}.
Send the output produced by @command{diff} to me when you
submit your changes.
(@xref{Bugs}, for the electronic mail
information.)

Using this format makes it easy for me to apply your changes to the
master version of the @command{gawk} source code (using @code{patch}).
If I have to apply the changes manually, using a text editor, I may
not do so, particularly if there are lots of changes.

@item
Include an entry for the @file{ChangeLog} file with your submission.
This helps further minimize the amount of work I have to do,
making it easier for me to accept patches.
It is simplest if you just make this part of your diff.
@end enumerate

Although this sounds like a lot of work, please remember that while you
may write the new code, I have to maintain it and support it. If it
isn't possible for me to do that with a minimum of extra work, then I
probably will not.

@node New Ports
@appendixsubsec Porting @command{gawk} to a New Operating System
@cindex portability, @command{gawk}
@cindex operating systems, porting @command{gawk} to

@cindex porting @command{gawk}
If you want to port @command{gawk} to a new operating system, there are
several steps:

@enumerate 1
@item
Follow the guidelines in
@ifinfo
@ref{Adding Code},
@end ifinfo
@ifnotinfo
the previous @value{SECTION}
@end ifnotinfo
concerning coding style, submission of diffs, and so on.

@item
Be prepared to sign the appropriate paperwork.
In order for the FSF to distribute your code, you must either place
your code in the public domain and submit a signed statement to that
effect, or assign the copyright in your code to the FSF.
Both of these actions are easy to do and @emph{many} people have done so
already. If you have questions, please contact me, or
@email{gnu@@gnu.org}.

@item
When doing a port, bear in mind that your code must coexist peacefully
with the rest of @command{gawk} and the other ports. Avoid gratuitous
changes to the system-independent parts of the code. If at all possible,
avoid sprinkling @samp{#ifdef}s just for your port throughout the
code.

If the changes needed for a particular system affect too much of the
code, I probably will not accept them.  In such a case, you can, of course,
distribute your changes on your own, as long as you comply
with the GPL
(@pxref{Copying}).

@item
A number of the files that come with @command{gawk} are maintained by other
people.  Thus, you should not change them
unless it is for a very good reason; i.e., changes are not out of the
question, but changes to these files are scrutinized extra carefully.
The files are
@file{dfa.c},
@file{dfa.h},
@file{getopt.c},
@file{getopt.h},
@file{getopt1.c},
@file{getopt_int.h},
@file{gettext.h},
@file{regcomp.c},
@file{regex.c},
@file{regex.h},
@file{regex_internal.c},
@file{regex_internal.h},
and
@file{regexec.c}.

@item
A number of other files are provided by the GNU
Autotools (Autoconf, Automake, and GNU @command{gettext}).
You should not change them either, unless it is for a very
good reason. The files are
@file{ABOUT-NLS},
@file{config.guess},
@file{config.rpath},
@file{config.sub},
@file{depcomp},
@file{INSTALL},
@file{install-sh},
@file{missing},
@file{mkinstalldirs},
@file{xalloc.h},
and
@file{ylwrap}.

@item
Be willing to continue to maintain the port.
Non-Unix operating systems are supported by volunteers who maintain
the code needed to compile and run @command{gawk} on their systems. If no-one
volunteers to maintain a port, it becomes unsupported and it may
be necessary to remove it from the distribution.

@item
Supply an appropriate @file{gawkmisc.???} file.
Each port has its own @file{gawkmisc.???} that implements certain
operating system specific functions. This is cleaner than a plethora of
@samp{#ifdef}s scattered throughout the code.  The @file{gawkmisc.c} in
the main source directory includes the appropriate
@file{gawkmisc.???} file from each subdirectory.
Be sure to update it as well.

Each port's @file{gawkmisc.???} file has a suffix reminiscent of the machine
or operating system for the port---for example, @file{pc/gawkmisc.pc} and
@file{vms/gawkmisc.vms}. The use of separate suffixes, instead of plain
@file{gawkmisc.c}, makes it possible to move files from a port's subdirectory
into the main subdirectory, without accidentally destroying the real
@file{gawkmisc.c} file.  (Currently, this is only an issue for the
PC operating system ports.)

@item
Supply a @file{Makefile} as well as any other C source and header files that are
necessary for your operating system.  All your code should be in a
separate subdirectory, with a name that is the same as, or reminiscent
of, either your operating system or the computer system.  If possible,
try to structure things so that it is not necessary to move files out
of the subdirectory into the main source directory.  If that is not
possible, then be sure to avoid using names for your files that
duplicate the names of files in the main source directory.

@item
Update the documentation.
Please write a section (or sections) for this @value{DOCUMENT} describing the
installation and compilation steps needed to compile and/or install
@command{gawk} for your system.
@end enumerate

Following these steps makes it much easier to integrate your changes
into @command{gawk} and have them coexist happily with other
operating systems' code that is already there.

In the code that you supply and maintain, feel free to use a
coding style and brace layout that suits your taste.

@node Derived Files
@appendixsubsec Why Generated Files Are Kept In Git

@cindex Git, use of for @command{gawk} source code
@c From emails written March 22, 2012, to the gawk developers list.

If you look at the @command{gawk} source in the Git
repository, you will notice that it includes files that are automatically
generated by GNU infrastructure tools, such as @file{Makefile.in} from
Automake and even @file{configure} from Autoconf.

This is different from many Free Software projects that do not store
the derived files, because that keeps the repository less cluttered,
and it is easier to see the substantive changes when comparing versions
and trying to understand what changed between commits.

However, there are several reasons why the @command{gawk} maintainer
likes to have everything in the repository.

First, because it is then easy to reproduce any given version completely,
without relying upon the availability of (older, likely obsolete, and
maybe even impossible to find) other tools.

As an extreme example, if you ever even think about trying to compile,
oh, say, the V7 @command{awk}, you will discover that not only do you
have to bootstrap the V7 @command{yacc} to do so, but you also need the
V7 @command{lex}.  And the latter is pretty much impossible to bring up
on a modern GNU/Linux system.@footnote{We tried. It was painful.}

(Or, let's say @command{gawk} 1.2 required @command{bison} whatever-it-was
in 1989 and that there was no @file{awkgram.c} file in the repository.  Is
there a guarantee that we could find that @command{bison} version? Or that
@emph{it} would build?)

If the repository has all the generated files, then it's easy to just check
them out and build. (Or @emph{easier}, depending upon how far back we go.)

And that brings us to the second (and stronger) reason why all the files
really need to be in Git.  It boils down to who do you cater
to---the @command{gawk} developer(s), or the user who just wants to check
out a version and try it out?

The @command{gawk} maintainer
wants it to be possible for any interested @command{awk} user in the
world to just clone the repository, check out the branch of interest and
build it. Without their having to have the correct version(s) of the
autotools.@footnote{There is one GNU program that is (in our opinion)
severely difficult to bootstrap from the Git repository. For
example, on the author's old (but still working) PowerPC Macintosh with
Mac OS X 10.5, it was necessary to bootstrap a ton of software, starting
with Git itself, in order to try to work with the latest code.
It's not pleasant, and especially on older systems, it's a big waste
of time.

Starting with the latest tarball was no picnic either. The maintainers
had dropped @file{.gz} and @file{.bz2} files and only distribute
@file{.tar.xz} files.  It was necessary to bootstrap @command{xz} first!}
That is the point of the @file{bootstrap.sh} file.  It touches the
various other files in the right order such that

@example
# The canonical incantation for building GNU software:
./bootstrap.sh && ./configure && make
@end example

@noindent
will @emph{just work}.

This is extremely important for the @code{master} and
@code{gawk-@var{X}.@var{Y}-stable} branches.

Further, the @command{gawk} maintainer would argue that it's also
important for the @command{gawk} developers. When he tried to check out
the @code{xgawk} branch@footnote{A branch (since removed) created by one of the other
developers that did not include the generated files.} to build it, he
couldn't. (No @file{ltmain.sh} file, and he had no idea how to create it,
and that was not the only problem.)

He felt @emph{extremely} frustrated.  With respect to that branch,
the maintainer is no different than Jane User who wants to try to build
@code{gawk-4.1-stable} or @code{master} from the repository.

Thus, the maintainer thinks that it's not just important, but critical,
that for any given branch, the above incantation @emph{just works}.

@c Added 9/2014:
A third reason to have all the files is that without them, using @samp{git
bisect} to try to find the commit that introduced a bug is exceedingly
difficult. The maintainer tried to do that on another project that
requires running bootstrapping scripts just to create @command{configure}
and so on; it was really painful. When the repository is self-contained,
using @command{git bisect} in it is very easy.

@c So - that's my reasoning and philosophy.

What are some of the consequences and/or actions to take?

@enumerate 1
@item
We don't mind that there are differing files in the different branches
as a result of different versions of the autotools.

@enumerate A
@item
It's the maintainer's job to merge them and he will deal with it.

@item
He is really good at @samp{git diff x y > /tmp/diff1 ; gvim /tmp/diff1} to
remove the diffs that aren't of interest in order to review code.
@end enumerate

@item
It would certainly help if everyone used the same versions of the GNU tools
as he does, which in general are the latest released versions of
Automake,
Autoconf,
@command{bison},
and
GNU @command{gettext}.

@ignore
If it would help if I sent out an ``I just upgraded to version x.y
of tool Z'' kind of message to this list, I can do that.  Up until
now it hasn't been a real issue since I'm the only one who's been
dorking with the configuration machinery.
@end ignore

@c @enumerate A
@c @item
Installing from source is quite easy. It's how the maintainer worked for years
(and still works).
He had @file{/usr/local/bin} at the front of his @env{PATH} and just did:

@example
wget http://ftp.gnu.org/gnu/@var{package}/@var{package}-@var{x}.@var{y}.@var{z}.tar.gz
tar -xpzvf @var{package}-@var{x}.@var{y}.@var{z}.tar.gz
cd @var{package}-@var{x}.@var{y}.@var{z}
./configure && make && make check
make install    # as root
@end example

@c @item
@ignore
These days the maintainer uses Ubuntu 12.04 which is medium current, but
he is already doing the above for Automake, Autoconf, and @command{bison}.
@end ignore

@ignore
(C. Rant: Recent Linux versions with GNOME 3 really suck. What
    are all those people thinking?  Fedora 15 was such a bust it drove
    me to Ubuntu, but Ubuntu 11.04 and 11.10 are totally unusable from
    a UI perspective. Bleah.)
@end ignore
@c @end enumerate

@ignore
@item
If someone still feels really strongly about all this, then perhaps they
can have two branches, one for their development with just the clean
changes, and one that is buildable (xgawk and xgawk-buildable, maybe).
Or, as I suggested in another mail, make commits in pairs, the first with
the "real" changes and the second with "everything else needed for
 building".
@end ignore
@end enumerate

Most of the above was originally written by the maintainer to other
@command{gawk} developers.  It raised the objection from one of
the developers ``@dots{} that anybody pulling down the source from
Git is not an end user.''

However, this is not true. There are ``power @command{awk} users''
who can build @command{gawk} (using the magic incantation shown previously)
but who can't program in C.  Thus, the major branches should be
kept buildable all the time.

It was then suggested that there be a @command{cron} job to create
nightly tarballs of ``the source.''  Here, the problem is that there
are source trees, corresponding to the various branches! So,
nightly tarballs aren't the answer, especially as the repository can go
for weeks without significant change being introduced.

Fortunately, the Git server can meet this need. For any given
branch named @var{branchname}, use:

@example
wget http://git.savannah.gnu.org/cgit/gawk.git/snapshot/gawk-@var{branchname}.tar.gz
@end example

@noindent
to retrieve a snapshot of the given branch.

@node Future Extensions
@appendixsec Probable Future Extensions
@ignore
From emory!scalpel.netlabs.com!lwall Tue Oct 31 12:43:17 1995
Return-Path: <emory!scalpel.netlabs.com!lwall>
Message-Id: <9510311732.AA28472@scalpel.netlabs.com>
To: arnold@skeeve.atl.ga.us (Arnold D. Robbins)
Subject: Re: May I quote you?
In-Reply-To: Your message of "Tue, 31 Oct 95 09:11:00 EST."
             <m0tAHPQ-00014MC@skeeve.atl.ga.us>
Date: Tue, 31 Oct 95 09:32:46 -0800
From: Larry Wall <emory!scalpel.netlabs.com!lwall>

: Greetings. I am working on the release of gawk 3.0. Part of it will be a
: thoroughly updated manual. One of the sections deals with planned future
: extensions and enhancements.  I have the following at the beginning
: of it:
:
: @cindex PERL
: @cindex Wall, Larry
: @display
: @i{AWK is a language similar to PERL, only considerably more elegant.} @*
: Arnold Robbins
: @sp 1
: @i{Hey!} @*
: Larry Wall
: @end display
:
: Before I actually release this for publication, I wanted to get your
: permission to quote you.  (Hopefully, in the spirit of much of GNU, the
: implied humor is visible... :-)

I think that would be fine.

Larry
@end ignore
@cindex Perl
@cindex Wall, Larry
@cindex Robbins, Arnold
@quotation
@i{AWK is a language similar to PERL, only considerably more elegant.}
@author Arnold Robbins
@end quotation

@quotation
@i{Hey!}
@author Larry Wall
@end quotation

The @file{TODO} file in the @code{master} branch of the @command{gawk}
Git repository lists possible future enhancements.  Some of these relate
to the source code, and others to possible new features.  Please see
that file for the list.
@xref{Additions},
if you are interested in tackling any of the projects listed there.

@node Implementation Limitations
@appendixsec Some Limitations of the Implementation

This following table describes limits of @command{gawk} on a Unix-like
system (although it is variable even then). Other systems may have
different limits.

@multitable @columnfractions .40 .60
@headitem Item @tab Limit
@item Characters in a character class @tab 2^(number of bits per byte)
@item Length of input record @tab @code{MAX_INT}
@item Length of output record @tab Unlimited
@item Length of source line @tab Unlimited
@item Number of fields in a record @tab @code{MAX_LONG}
@item Number of file redirections @tab Unlimited
@item Number of input records in one file @tab @code{MAX_LONG}
@item Number of input records total @tab @code{MAX_LONG}
@item Number of pipe redirections @tab min(number of processes per user, number of open files)
@item Numeric values @tab Double-precision floating point (if not using MPFR)
@item Size of a field @tab @code{MAX_INT}
@item Size of a literal string @tab @code{MAX_INT}
@item Size of a printf string @tab @code{MAX_INT}
@end multitable

@node Extension Design
@appendixsec Extension API Design

This @value{SECTION} documents the design of the extension API,
including a discussion of some of the history and problems that needed
to be solved.

The first version of extensions for @command{gawk} was developed in
the mid-1990s and released with @command{gawk} 3.1 in the late 1990s.
The basic mechanisms and design remained unchanged for close to 15 years,
until 2012.

The old extension mechanism used data types and functions from
@command{gawk} itself, with a ``clever hack'' to install extension
functions.

@command{gawk} included some sample extensions, of which a few were
really useful.  However, it was clear from the outset that the extension
mechanism was bolted onto the side and was not really well thought out.

@menu
* Old Extension Problems::           Problems with the old mechanism.
* Extension New Mechanism Goals::    Goals for the new mechanism.
* Extension Other Design Decisions:: Some other design decisions.
* Extension Future Growth::          Some room for future growth.
@end menu

@node Old Extension Problems
@appendixsubsec Problems With The Old Mechanism

The old extension mechanism had several problems:

@itemize @value{BULLET}
@item
It depended heavily upon @command{gawk} internals.  Any time the
@code{NODE} structure@footnote{A critical central data structure
inside @command{gawk}.} changed, an extension would have to be
recompiled. Furthermore, to really write extensions required understanding
something about @command{gawk}'s internal functions.  There was some
documentation in this @value{DOCUMENT}, but it was quite minimal.

@item
Being able to call into @command{gawk} from an extension required linker
facilities that are common on Unix-derived systems but that did
not work on MS-Windows systems; users wanting extensions on MS-Windows
had to statically link them into @command{gawk}, even though MS-Windows supports
dynamic loading of shared objects.

@item
The API would change occasionally as @command{gawk} changed; no compatibility
between versions was ever offered or planned for.
@end itemize

Despite the drawbacks, the @command{xgawk} project developers forked
@command{gawk} and developed several significant extensions. They also
enhanced @command{gawk}'s facilities relating to file inclusion and
shared object access.

A new API was desired for a long time, but only in 2012 did the
@command{gawk} maintainer and the @command{xgawk} developers finally
start working on it together.  More information about the @command{xgawk}
project is provided in @ref{gawkextlib}.

@node Extension New Mechanism Goals
@appendixsubsec Goals For A New Mechanism

Some goals for the new API were:

@itemize @value{BULLET}
@item
The API should be independent of @command{gawk} internals.  Changes in
@command{gawk} internals should not be visible to the writer of an
extension function.

@item
The API should provide @emph{binary} compatibility across @command{gawk}
releases as long as the API itself does not change.

@item
The API should enable extensions written in C or C++ to have roughly the
same ``appearance'' to @command{awk}-level code as @command{awk}
functions do. This means that extensions should have:

@itemize @value{MINUS}
@item
The ability to access function parameters.

@item
The ability to turn an undefined parameter into an array (call by reference).

@item
The ability to create, access and update global variables.

@item
Easy access to all the elements of an array at once (``array flattening'')
in order to loop over all the element in an easy fashion for C code.

@item
The ability to create arrays (including @command{gawk}'s true
arrays of arrays).
@end itemize
@end itemize

Some additional important goals were:

@itemize @value{BULLET}
@item
The API should use only features in ISO C 90, so that extensions
can be written using the widest range of C and C++ compilers. The header
should include the appropriate @samp{#ifdef __cplusplus} and @samp{extern "C"}
magic so that a C++ compiler could be used.  (If using C++, the runtime
system has to be smart enough to call any constructors and destructors,
as @command{gawk} is a C program. As of this writing, this has not been
tested.)

@item
The API mechanism should not require access to @command{gawk}'s
symbols@footnote{The @dfn{symbols} are the variables and functions
defined inside @command{gawk}.  Access to these symbols by code
external to @command{gawk} loaded dynamically at runtime is
problematic on MS-Windows.} by the compile-time or dynamic linker,
in order to enable creation of extensions that also work on MS-Windows.
@end itemize

During development, it became clear that there were other features
that should be available to extensions, which were also subsequently
provided:

@itemize @value{BULLET}
@item
Extensions should have the ability to hook into @command{gawk}'s
I/O redirection mechanism.  In particular, the @command{xgawk}
developers provided a so-called ``open hook'' to take over reading
records.  During development, this was generalized to allow
extensions to hook into input processing, output processing, and
two-way I/O.

@item
An extension should be able to provide a ``call back'' function
to perform cleanup actions when @command{gawk} exits.

@item
An extension should be able to provide a version string so that
@command{gawk}'s @option{--version} option can provide information
about extensions as well.
@end itemize

The requirement to avoid access to @command{gawk}'s symbols is, at first
glance, a difficult one to meet.

One design, apparently used by Perl and Ruby and maybe others, would
be to make the mainline @command{gawk} code into a library, with the
@command{gawk} utility a small C @code{main()} function linked against
the library.

This seemed like the tail wagging the dog, complicating build and
installation and making a simple copy of the @command{gawk} executable
from one system to another (or one place to another on the same
system!) into a chancy operation.

Pat Rankin suggested the solution that was adopted.
@xref{Extension Mechanism Outline}, for the details.

@node Extension Other Design Decisions
@appendixsubsec Other Design Decisions

As an arbitrary design decision, extensions can read the values of
predefined variables and arrays (such as @code{ARGV} and @code{FS}), but cannot
change them, with the exception of @code{PROCINFO}.

The reason for this is to prevent an extension function from affecting
the flow of an @command{awk} program outside its control.  While a real
@command{awk} function can do what it likes, that is at the discretion
of the programmer.  An extension function should provide a service or
make a C API available for use within @command{awk}, and not mess with
@code{FS} or @code{ARGC} and @code{ARGV}.

In addition, it becomes easy to start down a slippery slope. How
much access to @command{gawk} facilities do extensions need?
Do they need @code{getline}?  What about calling @code{gsub()} or
compiling regular expressions?  What about calling into @command{awk}
functions? (@emph{That} would be messy.)

In order to avoid these issues, the @command{gawk} developers chose
to start with the simplest, most basic features that are still truly useful.

Another decision is that although @command{gawk} provides nice things like
MPFR, and arrays indexed internally by integers, these features are not
being brought out to the API in order to keep things simple and close to
traditional @command{awk} semantics.  (In fact, arrays indexed internally
by integers are so transparent that they aren't even documented!)

Additionally, all functions in the API check that their pointer
input parameters are not @code{NULL}. If they are, they return an error.
(It is a good idea for extension code to verify that
pointers received from @command{gawk} are not @code{NULL}.
Such a thing should not happen, but the @command{gawk} developers
are only human, and they have been known to occasionally make
mistakes.)

With time, the API will undoubtedly evolve; the @command{gawk} developers
expect this to be driven by user needs. For now, the current API seems
to provide a minimal yet powerful set of features for creating extensions.

@node Extension Future Growth
@appendixsubsec Room For Future Growth

The API can later be expanded, in two ways:

@itemize @value{BULLET}
@item
@command{gawk} passes an ``extension id'' into the extension when it
first loads the extension.  The extension then passes this id back
to @command{gawk} with each function call.  This mechanism allows
@command{gawk} to identify the extension calling into it, should it need
to know.

@item
Similarly, the extension passes a ``name space'' into @command{gawk}
when it registers each extension function.  This accommodates a possible future
mechanism for grouping extension functions and possibly avoiding name
conflicts.
@end itemize

Of course, as of this writing, no decisions have been made with respect
to any of the above.

@node Old Extension Mechanism
@appendixsec Compatibility For Old Extensions

@ref{Dynamic Extensions}, describes the supported API and mechanisms
for writing extensions for @command{gawk}.  This API was introduced
in @value{PVERSION} 4.1.  However, for many years @command{gawk}
provided an extension mechanism that required knowledge of @command{gawk}
internals and that was not as well designed.

In order to provide a transition period, @command{gawk} @value{PVERSION} 4.1
continues to support the original extension mechanism.
This will be true for the life of exactly one major release.  This support
will be withdrawn, and removed from the source code, at the next major
release.

Briefly, original-style extensions should be compiled by including the
@file{awk.h} header file in the extension source code. Additionally,
you must define the identifier @samp{GAWK} when building (use
@samp{-DGAWK} with Unix-style compilers).  Otherwise, the definitions
in @file{gawkapi.h} will cause conflicts with those in @file{awk.h}
and your extension will not compile.

Just as in previous versions, you load an old-style extension with the
@code{extension()} built-in function (which is not otherwise documented).
This function in turn finds and loads the shared object file containing
the extension and calls its @code{dl_load()} C routine.

Because original-style and new-style extensions use different initialization
routines (@code{dl_load()} versus @code{dlload()}), they may safely
be installed in the same directory (to be found by @env{AWKLIBPATH})
without conflict.

The @command{gawk} development team strongly recommends that you
convert any old extensions that you may have to use the new API
described in @ref{Dynamic Extensions}.

@node Notes summary
@appendixsec Summary

@itemize @value{BULLET}
@item
@command{gawk}'s extensions can be disabled with either the
@option{--traditional} option or with the @option{--posix} option.
The @option{--parsedebug} option is available if @command{gawk} is
compiled with @samp{-DDEBUG}.

@item
The source code for @command{gawk} is maintained in a publicly
accessible Git repository. Anyone may check it out and view the source.

@item
Contributions to @command{gawk} are welcome. Following the steps
outlined in this @value{CHAPTER} will make it easier to integrate
your contributions into the code base.
This applies both to new feature contributions and to ports to
additional operating systems.

@item
@command{gawk} has some limits---generally those that are imposed by
the machine architecture.

@item
The extension API design was intended to solve a number of problems
with the previous extension mechanism, enable features needed by
the @code{xgawk} project, and provide binary compatibility going forward.

@item
The previous extension mechanism is still supported in @value{PVERSION} 4.1
of @command{gawk}, but it @emph{will} be removed in the next major release.

@end itemize


@node Basic Concepts
@appendix Basic Programming Concepts
@cindex programming, concepts
@cindex programming, concepts

This @value{APPENDIX} attempts to define some of the basic concepts
and terms that are used throughout the rest of this @value{DOCUMENT}.
As this @value{DOCUMENT} is specifically about @command{awk},
and not about computer programming in general, the coverage here
is by necessity fairly cursory and simplistic.
(If you need more background, there are many
other introductory texts that you should refer to instead.)

@menu
* Basic High Level::            The high level view.
* Basic Data Typing::           A very quick intro to data types.
@end menu

@node Basic High Level
@appendixsec What a Program Does

@cindex processing data
At the most basic level, the job of a program is to process
some input data and produce results.
@ifnotdocbook
See @ref{figure-general-flow}.
@end ifnotdocbook
@ifdocbook
See @inlineraw{docbook, <xref linkend="figure-general-flow"/>}.
@end ifdocbook

@ifnotdocbook
@float Figure,figure-general-flow
@caption{General Program Flow}
@center @image{general-program, , , General program flow}
@end float
@end ifnotdocbook

@docbook
<figure id="figure-general-flow" float="0">
<title>General Program Flow</title>
<mediaobject>
<imageobject role="web"><imagedata fileref="general-program.png" format="PNG"/></imageobject>
</mediaobject>
</figure>
@end docbook

@cindex compiled programs
@cindex interpreted programs
The ``program'' in the figure can be either a compiled
program@footnote{Compiled programs are typically written
in lower-level languages such as C, C++, or Ada,
and then translated, or @dfn{compiled}, into a form that
the computer can execute directly.}
(such as @command{ls}),
or it may be @dfn{interpreted}.  In the latter case, a machine-executable
program such as @command{awk} reads your program, and then uses the
instructions in your program to process the data.

@cindex programming, basic steps
When you write a program, it usually consists
of the following, very basic set of steps,
@ifnotdocbook
as shown in @ref{figure-process-flow}:
@end ifnotdocbook
@ifdocbook
as shown in @inlineraw{docbook, <xref linkend="figure-process-flow"/>}:
@end ifdocbook

@ifnotdocbook
@float Figure,figure-process-flow
@caption{Basic Program Steps}
@center @image{process-flow, , , Basic Program Stages}
@end float
@end ifnotdocbook

@docbook
<figure id="figure-process-flow" float="0">
<title>Basic Program Stages</title>
<mediaobject>
<imageobject role="web"><imagedata fileref="process-flow.png" format="PNG"/></imageobject>
</mediaobject>
</figure>
@end docbook

@table @asis
@item Initialization
These are the things you do before actually starting to process
data, such as checking arguments, initializing any data you need
to work with, and so on.
This step corresponds to @command{awk}'s @code{BEGIN} rule
(@pxref{BEGIN/END}).

If you were baking a cake, this might consist of laying out all the
mixing bowls and the baking pan, and making sure you have all the
ingredients that you need.

@item Processing
This is where the actual work is done.  Your program reads data,
one logical chunk at a time, and processes it as appropriate.

In most programming languages, you have to manually manage the reading
of data, checking to see if there is more each time you read a chunk.
@command{awk}'s pattern-action paradigm
(@pxref{Getting Started})
handles the mechanics of this for you.

In baking a cake, the processing corresponds to the actual labor:
breaking eggs, mixing the flour, water, and other ingredients, and then putting the cake
into the oven.

@item Clean Up
Once you've processed all the data, you may have things you need to
do before exiting.
This step corresponds to @command{awk}'s @code{END} rule
(@pxref{BEGIN/END}).

After the cake comes out of the oven, you still have to wrap it in
plastic wrap to keep anyone from tasting it, as well as wash
the mixing bowls and utensils.
@end table

@cindex algorithms
An @dfn{algorithm} is a detailed set of instructions necessary to accomplish
a task, or process data.  It is much the same as a recipe for baking
a cake.  Programs implement algorithms.  Often, it is up to you to design
the algorithm and implement it, simultaneously.

@cindex records
@cindex fields
The ``logical chunks'' we talked about previously are called @dfn{records},
similar to the records a company keeps on employees, a school keeps for
students, or a doctor keeps for patients.
Each record has many component parts, such as first and last names,
date of birth, address, and so on.  The component parts are referred
to as the @dfn{fields} of the record.

The act of reading data is termed @dfn{input}, and that of
generating results, not too surprisingly, is termed @dfn{output}.
They are often referred to together as ``input/output,''
and even more often, as ``I/O'' for short.
(You will also see ``input'' and ``output'' used as verbs.)

@cindex data-driven languages
@cindex languages@comma{} data-driven
@command{awk} manages the reading of data for you, as well as the
breaking it up into records and fields.  Your program's job is to
tell @command{awk} what to do with the data.  You do this by describing
@dfn{patterns} in the data to look for, and @dfn{actions} to execute
when those patterns are seen.  This @dfn{data-driven} nature of
@command{awk} programs usually makes them both easier to write
and easier to read.

@node Basic Data Typing
@appendixsec Data Values in a Computer

@cindex variables
In a program,
you keep track of information and values in things called @dfn{variables}.
A variable is just a name for a given value, such as @code{first_name},
@code{last_name}, @code{address}, and so on.
@command{awk} has several predefined variables, and it has
special names to refer to the current input record
and the fields of the record.
You may also group multiple
associated values under one name, as an array.

@cindex values, numeric
@cindex values, string
@cindex scalar values
Data, particularly in @command{awk}, consists of either numeric
values, such as 42 or 3.1415927, or string values.
String values are essentially anything that's not a number, such as a name.
Strings are sometimes referred to as @dfn{character data}, since they
store the individual characters that comprise them.
Individual variables, as well as numeric and string variables, are
referred to as @dfn{scalar} values.
Groups of values, such as arrays, are not scalars.

@ref{Computer Arithmetic}, provided a basic introduction to numeric
types (integer and floating-point) and how they are used in a computer.
Please review that information, including a number of caveats that
were presented.

@cindex null strings
While you are probably used to the idea of a number without a value (i.e., zero),
it takes a bit more getting used to the idea of zero-length character data.
Nevertheless, such a thing exists.
It is called the @dfn{null string}.
The null string is character data that has no value.
In other words, it is empty.  It is written in @command{awk} programs
like this: @code{""}.

Humans are used to working in decimal; i.e., base 10.  In base 10,
numbers go from 0 to 9, and then ``roll over'' into the next
column.  (Remember grade school? 42 = 4 x 10 + 2.)

There are other number bases though.  Computers commonly use base 2
or @dfn{binary}, base 8 or @dfn{octal}, and base 16 or @dfn{hexadecimal}.
In binary, each column represents two times the value in the column to
its right. Each column may contain either a 0 or a 1.
Thus, binary 1010 represents (1 x 8) + (0 x 4) + (1 x 2)
+ (0 x 1), or decimal 10.
Octal and hexadecimal are discussed more in
@ref{Nondecimal-numbers}.

At the very lowest level, computers store values as groups of binary digits,
or @dfn{bits}.  Modern computers group bits into groups of eight, called @dfn{bytes}.
Advanced applications sometimes have to manipulate bits directly,
and @command{gawk} provides functions for doing so.

Programs are written in programming languages.
Hundreds, if not thousands, of programming languages exist.
One of the most popular is the C programming language.
The C language had a very strong influence on the design of
the @command{awk} language.

@cindex Kernighan, Brian
@cindex Ritchie, Dennis
There have been several versions of C.  The first is often referred to
as ``K&R'' C, after the initials of Brian Kernighan and Dennis Ritchie,
the authors of the first book on C.  (Dennis Ritchie created the language,
and Brian Kernighan was one of the creators of @command{awk}.)

In the mid-1980s, an effort began to produce an international standard
for C.  This work culminated in 1989, with the production of the ANSI
standard for C.  This standard became an ISO standard in 1990.
In 1999, a revised ISO C standard was approved and released.
Where it makes sense, POSIX @command{awk} is compatible with 1999 ISO C.


@node Glossary
@unnumbered Glossary

@table @asis
@item Action
A series of @command{awk} statements attached to a rule.  If the rule's
pattern matches an input record, @command{awk} executes the
rule's action.  Actions are always enclosed in braces.
(@xref{Action Overview}.)

@cindex Ada programming language
@cindex programming languages, Ada
@item Ada
A programming language originally defined by the U.S.@: Department of
Defense for embedded programming. It was designed to enforce good
Software Engineering practices.

@cindex Spencer, Henry
@cindex @command{sed} utility
@cindex amazing @command{awk} assembler (@command{aaa})
@item Amazing @command{awk} Assembler
Henry Spencer at the University of Toronto wrote a retargetable assembler
completely as @command{sed} and @command{awk} scripts.  It is thousands
of lines long, including machine descriptions for several eight-bit
microcomputers.  It is a good example of a program that would have been
better written in another language.
You can get it from @uref{http://awk.info/?awk100/aaa}.

@cindex amazingly workable formatter (@command{awf})
@cindex @command{awf} (amazingly workable formatter) program
@item Amazingly Workable Formatter (@command{awf})
Henry Spencer at the University of Toronto wrote a formatter that accepts
a large subset of the @samp{nroff -ms} and @samp{nroff -man} formatting
commands, using @command{awk} and @command{sh}.
It is available
from @uref{http://awk.info/?tools/awf}.

@item Anchor
The regexp metacharacters @samp{^} and @samp{$}, which force the match
to the beginning or end of the string, respectively.

@cindex ANSI
@item ANSI
The American National Standards Institute.  This organization produces
many standards, among them the standards for the C and C++ programming
languages.
These standards often become international standards as well. See also
``ISO.''

@item Argument
An argument can be two different things.  It can be an option or a
@value{FN} passed to a command while invoking it from the command line, or
it can be something passed to a @dfn{function} inside a program, e.g.
inside @command{awk}.

In the latter case, an argument can be passed to a function in two ways.
Either it is given to the called function by value, i.e., a copy of the
value of the variable is made available to the called function, but the
original variable cannot be modified by the function itself; or it is
given by reference, i.e., a pointer to the interested variable is passed to
the function, which can then directly modify it. In @command{awk}
scalars are passed by value, and arrays are passed by reference.
See ``Pass By Value/Reference.''

@item Array
A grouping of multiple values under the same name.
Most languages just provide sequential arrays.
@command{awk} provides associative arrays.

@item Assertion
A statement in a program that a condition is true at this point in the program.
Useful for reasoning about how a program is supposed to behave.

@item Assignment
An @command{awk} expression that changes the value of some @command{awk}
variable or data object.  An object that you can assign to is called an
@dfn{lvalue}.  The assigned values are called @dfn{rvalues}.
@xref{Assignment Ops}.

@item Associative Array
Arrays in which the indices may be numbers or strings, not just
sequential integers in a fixed range.

@item @command{awk} Language
The language in which @command{awk} programs are written.

@item @command{awk} Program
An @command{awk} program consists of a series of @dfn{patterns} and
@dfn{actions}, collectively known as @dfn{rules}.  For each input record
given to the program, the program's rules are all processed in turn.
@command{awk} programs may also contain function definitions.

@item @command{awk} Script
Another name for an @command{awk} program.

@item Bash
The GNU version of the standard shell
@ifnotinfo
(the @b{B}ourne-@b{A}gain @b{SH}ell).
@end ifnotinfo
@ifinfo
(the Bourne-Again SHell).
@end ifinfo
See also ``Bourne Shell.''

@item Binary
Base-two notation, where the digits are @code{0}--@code{1}. Since
electronic circuitry works ``naturally'' in base 2 (just think of Off/On),
everything inside a computer is calculated using base 2. Each digit
represents the presence (or absence) of a power of 2 and is called a
@dfn{bit}. So, for example, the base-two number @code{10101} is
the same as decimal 21, ((1 x 16) + (1 x 4) + (1 x 1)).

Since base-two numbers quickly become
very long to read and write, they are usually grouped by 3 (i.e., they are
read as octal numbers), or by 4 (i.e., they are read as hexadecimal
numbers). There is no direct way to insert base 2 numbers in a C program.
If need arises, such numbers are usually inserted as octal or hexadecimal
numbers. The number of base-two digits that fit into registers used for
representing integer numbers in computers is a rough indication of the
computing power of the computer itself.  Most computers nowadays use 64
bits for representing integer numbers in their registers, but 32-bit,
16-bit and 8-bit registers have been widely used in the past.
@xref{Nondecimal-numbers}.
@item Bit
Short for ``Binary Digit.''
All values in computer memory ultimately reduce to binary digits: values
that are either zero or one.
Groups of bits may be interpreted differently---as integers,
floating-point numbers, character data, addresses of other
memory objects, or other data.
@command{awk} lets you work with floating-point numbers and strings.
@command{gawk} lets you manipulate bit values with the built-in
functions described in
@ref{Bitwise Functions}.

Computers are often defined by how many bits they use to represent integer
values.  Typical systems are 32-bit systems, but 64-bit systems are
becoming increasingly popular, and 16-bit systems have essentially
disappeared.

@item Boolean Expression
Named after the English mathematician Boole. See also ``Logical Expression.''

@item Bourne Shell
The standard shell (@file{/bin/sh}) on Unix and Unix-like systems,
originally written by Steven R.@: Bourne at Bell Laboratories.
Many shells (Bash, @command{ksh}, @command{pdksh}, @command{zsh}) are
generally upwardly compatible with the Bourne shell.

@item Braces
The characters @samp{@{} and @samp{@}}.  Braces are used in
@command{awk} for delimiting actions, compound statements, and function
bodies.

@item Bracket Expression
Inside a @dfn{regular expression}, an expression included in square
brackets, meant to designate a single character as belonging to a
specified character class. A bracket expression can contain a list of one
or more characters, like @samp{[abc]}, a range of characters, like
@samp{[A-Z]}, or a name, delimited by @samp{:}, that designates a known set
of characters, like @samp{[:digit:]}. The form of bracket expression
enclosed between @samp{:} is independent of the underlying representation
of the character themselves, which could utilize the ASCII, ECBDIC, or
Unicode codesets, depending on the architecture of the computer system, and on
localization.
See also ``Regular Expression.''

@item Built-in Function
The @command{awk} language provides built-in functions that perform various
numerical, I/O-related, and string computations.  Examples are
@code{sqrt()} (for the square root of a number) and @code{substr()} (for a
substring of a string).
@command{gawk} provides functions for timestamp management, bit manipulation,
array sorting, type checking,
and runtime string translation.
(@xref{Built-in}.)

@item Built-in Variable
@code{ARGC},
@code{ARGV},
@code{CONVFMT},
@code{ENVIRON},
@code{FILENAME},
@code{FNR},
@code{FS},
@code{NF},
@code{NR},
@code{OFMT},
@code{OFS},
@code{ORS},
@code{RLENGTH},
@code{RSTART},
@code{RS},
and
@code{SUBSEP}
are the variables that have special meaning to @command{awk}.
In addition,
@code{ARGIND},
@code{BINMODE},
@code{ERRNO},
@code{FIELDWIDTHS},
@code{FPAT},
@code{IGNORECASE},
@code{LINT},
@code{PROCINFO},
@code{RT},
and
@code{TEXTDOMAIN}
are the variables that have special meaning to @command{gawk}.
Changing some of them affects @command{awk}'s running environment.
(@xref{Built-in Variables}.)

@item C
The system programming language that most GNU software is written in.  The
@command{awk} programming language has C-like syntax, and this @value{DOCUMENT}
points out similarities between @command{awk} and C when appropriate.

In general, @command{gawk} attempts to be as similar to the 1990 version
of ISO C as makes sense.

@item C Shell
The C Shell (@command{csh} or its improved version, @command{tcsh}) is a Unix shell that was
created by Bill Joy in the late 1970s. The C shell was differentiated from
other shells by its interactive features and overall style, which
looks more like C. The C Shell is not backward compatible with the Bourne
Shell, so special attention is required when converting scripts
written for other Unix shells to the C shell, especially with regard to the management of
shell variables.
See also ``Bourne Shell.''

@item C++
A popular object-oriented programming language derived from C.

@item Character Class
See ``Bracket Expression.''

@item Character List
See ``Bracket Expression.''

@cindex ASCII
@cindex ISO 8859-1
@cindex ISO Latin-1
@cindex character sets (machine character encodings)
@cindex Unicode
@item Character Set
The set of numeric codes used by a computer system to represent the
characters (letters, numbers, punctuation, etc.) of a particular country
or place. The most common character set in use today is ASCII (American
Standard Code for Information Interchange).  Many European
countries use an extension of ASCII known as ISO-8859-1 (ISO Latin-1).
The @uref{http://www.unicode.org, Unicode character set} is
increasingly popular and standard, and is particularly
widely used on GNU/Linux systems.

@cindex Kernighan, Brian
@cindex Bentley, Jon
@cindex @command{chem} utility
@item CHEM
A preprocessor for @command{pic} that reads descriptions of molecules
and produces @command{pic} input for drawing them.
It was written in @command{awk}
by Brian Kernighan and Jon Bentley, and is available from
@uref{http://netlib.org/typesetting/chem}.

@item Comparison Expression
A relation that is either true or false, such as @samp{a < b}.
Comparison expressions are used in @code{if}, @code{while}, @code{do},
and @code{for}
statements, and in patterns to select which input records to process.
(@xref{Typing and Comparison}.)

@cindex compiled programs
@item Compiler
A program that translates human-readable source code into
machine-executable object code.  The object code is then executed
directly by the computer.
See also ``Interpreter.''

@item Complemented Bracket Expression
The negation of a @dfn{bracket expression}.  All that is @emph{not}
described by a given bracket expression. The symbol @samp{^} precedes
the negated bracket expression.  E.g.: @samp{[[^:digit:]}
designates whatever character is not a digit. @samp{[^bad]}
designates whatever character is not one of the letters @samp{b}, @samp{a},
or @samp{d}.
See ``Bracket Expression.''

@item Compound Statement
A series of @command{awk} statements, enclosed in curly braces.  Compound
statements may be nested.
(@xref{Statements}.)

@item Computed Regexps
See ``Dynamic Regular Expressions.''

@item Concatenation
Concatenating two strings means sticking them together, one after another,
producing a new string.  For example, the string @samp{foo} concatenated with
the string @samp{bar} gives the string @samp{foobar}.
(@xref{Concatenation}.)

@item Conditional Expression
An expression using the @samp{?:} ternary operator, such as
@samp{@var{expr1} ? @var{expr2} : @var{expr3}}.  The expression
@var{expr1} is evaluated; if the result is true, the value of the whole
expression is the value of @var{expr2}; otherwise the value is
@var{expr3}.  In either case, only one of @var{expr2} and @var{expr3}
is evaluated. (@xref{Conditional Exp}.)

@item Control Statement
A control statement is an instruction to perform a given operation or a set
of operations inside an @command{awk} program, if a given condition is
true. Control statements are: @code{if}, @code{for}, @code{while}, and
@code{do}
(@pxref{Statements}).

@cindex McIlroy, Doug
@cindex cookie
@item Cookie
A peculiar goodie, token, saying or remembrance
produced by or presented to a program. (With thanks to Professor Doug McIlroy.)
@ignore
From: Doug McIlroy <doug@cs.dartmouth.edu>
Date: Sat, 13 Oct 2012 19:55:25 -0400
To: arnold@skeeve.com
Subject: Re: origin of the term "cookie"?

I believe the term "cookie", for a more or less inscrutable
saying or crumb of information, was injected into Unix
jargon by Bob Morris, who used the word quite frequently.
It had no fixed meaning as it now does in browsers.

The word had been around long before it was recognized in
the 8th edition glossary (earlier editions had no glossary):

cookie   a peculiar goodie, token, saying or remembrance
returned by or presented to a program. [I would say that
"returned by" would better read "produced by", and assume
responsibility for the inexactitude.]

Doug McIlroy

From: Doug McIlroy <doug@cs.dartmouth.edu>
Date: Sun, 14 Oct 2012 10:08:43 -0400
To: arnold@skeeve.com
Subject: Re: origin of the term "cookie"?

> Can I forward your email to Eric Raymond, for possible addition to the
> Jargon File?

Sure. I might add that I don't know how "cookie" entered Morris's
vocabulary. Certainly "values of beta give rise to dom!" (see google)
was an early, if not the earliest Unix cookie.  The fact that it was
found lying around on a model 37 teletype (which had Greek beta in
its type box) suggests that maybe it was seen to be like milk and
cookies laid out for Santa Claus. Morris was wont to make such
connections.

Doug
@end ignore

@item Coprocess
A subordinate program with which two-way communications is possible.

@item Curly Braces
See ``Braces.''

@cindex dark corner
@item Dark Corner
An area in the language where specifications often were (or still
are) not clear, leading to unexpected or undesirable behavior.
Such areas are marked in this @value{DOCUMENT} with
@iftex
the picture of a flashlight in the margin
@end iftex
@ifnottex
``(d.c.)'' in the text
@end ifnottex
and are indexed under the heading ``dark corner.''

@item Data Driven
A description of @command{awk} programs, where you specify the data you
are interested in processing, and what to do when that data is seen.

@item Data Objects
These are numbers and strings of characters.  Numbers are converted into
strings and vice versa, as needed.
(@xref{Conversion}.)

@item Deadlock
The situation in which two communicating processes are each waiting
for the other to perform an action.

@item Debugger
A program used to help developers remove ``bugs'' from (de-bug)
their programs.

@item Double Precision
An internal representation of numbers that can have fractional parts.
Double precision numbers keep track of more digits than do single precision
numbers, but operations on them are sometimes more expensive.  This is the way
@command{awk} stores numeric values.  It is the C type @code{double}.

@item Dynamic Regular Expression
A dynamic regular expression is a regular expression written as an
ordinary expression.  It could be a string constant, such as
@code{"foo"}, but it may also be an expression whose value can vary.
(@xref{Computed Regexps}.)

@item Empty String
See ``Null String.''

@item Environment
A collection of strings, of the form @samp{@var{name}=@var{val}}, that each
program has available to it. Users generally place values into the
environment in order to provide information to various programs. Typical
examples are the environment variables @env{HOME} and @env{PATH}.

@cindex epoch, definition of
@item Epoch
The date used as the ``beginning of time'' for timestamps.
Time values in most systems are represented as seconds since the epoch,
with library functions available for converting these values into
standard date and time formats.

The epoch on Unix and POSIX systems is 1970-01-01 00:00:00 UTC.
See also ``GMT'' and ``UTC.''

@item Escape Sequences
A special sequence of characters used for describing nonprinting
characters, such as @samp{\n} for newline or @samp{\033} for the ASCII
ESC (Escape) character. (@xref{Escape Sequences}.)

@item Extension
An additional feature or change to a programming language or
utility not defined by that language's or utility's standard.
@command{gawk} has (too) many extensions over POSIX @command{awk}.

@item FDL
See ``Free Documentation License.''

@item Field
When @command{awk} reads an input record, it splits the record into pieces
separated by whitespace (or by a separator regexp that you can
change by setting the predefined variable @code{FS}).  Such pieces are
called fields.  If the pieces are of fixed length, you can use the built-in
variable @code{FIELDWIDTHS} to describe their lengths.
If you wish to specify the contents of fields instead of the field
separator, you can use the predefined variable @code{FPAT} to do so.
(@xref{Field Separators},
@ref{Constant Size},
and
@ref{Splitting By Content}.)

@item Flag
A variable whose truth value indicates the existence or nonexistence
of some condition.

@item Floating-Point Number
Often referred to in mathematical terms as a ``rational'' or real number,
this is just a number that can have a fractional part.
See also ``Double Precision'' and ``Single Precision.''

@item Format
Format strings control the appearance of output in the
@code{strftime()} and @code{sprintf()} functions, and in the
@code{printf} statement as well.  Also, data conversions from numbers to strings
are controlled by the format strings contained in the predefined variables
@code{CONVFMT} and @code{OFMT}. (@xref{Control Letters}.)

@item Fortran
Shorthand for FORmula TRANslator, one of the first programming languages
available for scientific calculations. It was created by John Backus,
and has been available since 1957. It is still in use today.

@item Free Documentation License
This document describes the terms under which this @value{DOCUMENT}
is published and may be copied. (@xref{GNU Free Documentation License}.)

@cindex FSF (Free Software Foundation)
@cindex Free Software Foundation (FSF)
@cindex Stallman, Richard
@item Free Software Foundation
A nonprofit organization dedicated
to the production and distribution of freely distributable software.
It was founded by Richard M.@: Stallman, the author of the original
Emacs editor.  GNU Emacs is the most widely used version of Emacs today.

@item FSF
See ``Free Software Foundation.''

@item Function
A part of an @command{awk} program that can be invoked from every point of
the program, to perform a task.  @command{awk} has several built-in
functions.
Users can define their own functions in every part of the program.
Function can be recursive, i.e., they may invoke themselves.
@xref{Functions}.
In @command{gawk} it is also possible to have functions shared
among different programs, and included where required using the
@code{@@include} directive
(@pxref{Include Files}).
In @command{gawk} the name of the function that should be invoked
can be generated at run time, i.e., dynamically.
The @command{gawk} extension API provides constructor functions
(@pxref{Constructor Functions}).


@item @command{gawk}
The GNU implementation of @command{awk}.

@cindex GPL (General Public License)
@cindex General Public License (GPL)
@cindex GNU General Public License
@item General Public License
This document describes the terms under which @command{gawk} and its source
code may be distributed. (@xref{Copying}.)

@item GMT
``Greenwich Mean Time.''
This is the old term for UTC.
It is the time of day used internally for Unix and POSIX systems.
See also ``Epoch'' and ``UTC.''

@cindex FSF (Free Software Foundation)
@cindex Free Software Foundation (FSF)
@cindex GNU Project
@item GNU
``GNU's not Unix''.  An on-going project of the Free Software Foundation
to create a complete, freely distributable, POSIX-compliant computing
environment.

@item GNU/Linux
A variant of the GNU system using the Linux kernel, instead of the
Free Software Foundation's Hurd kernel.
The Linux kernel is a stable, efficient, full-featured clone of Unix that has
been ported to a variety of architectures.
It is most popular on PC-class systems, but runs well on a variety of
other systems too.
The Linux kernel source code is available under the terms of the GNU General
Public License, which is perhaps its most important aspect.

@item GPL
See ``General Public License.''

@item Hexadecimal
Base 16 notation, where the digits are @code{0}--@code{9} and
@code{A}--@code{F}, with @samp{A}
representing 10, @samp{B} representing 11, and so on, up to @samp{F} for 15.
Hexadecimal numbers are written in C using a leading @samp{0x},
to indicate their base.  Thus, @code{0x12} is 18 ((1 x 16) + 2).
@xref{Nondecimal-numbers}.

@item I/O
Abbreviation for ``Input/Output,'' the act of moving data into and/or
out of a running program.

@item Input Record
A single chunk of data that is read in by @command{awk}.  Usually, an @command{awk} input
record consists of one line of text.
(@xref{Records}.)

@item Integer
A whole number, i.e., a number that does not have a fractional part.

@item Internationalization
The process of writing or modifying a program so
that it can use multiple languages without requiring
further source code changes.

@cindex interpreted programs
@item Interpreter
A program that reads human-readable source code directly, and uses
the instructions in it to process data and produce results.
@command{awk} is typically (but not always) implemented as an interpreter.
See also ``Compiler.''

@item Interval Expression
A component of a regular expression that lets you specify repeated matches of
some part of the regexp.  Interval expressions were not originally available
in @command{awk} programs.

@cindex ISO
@item ISO
The International Organization for Standardization.
This organization produces international standards for many things, including
programming languages, such as C and C++.
In the computer arena, important standards like those for C, C++, and POSIX
become both American national and ISO international standards simultaneously.
This @value{DOCUMENT} refers to Standard C as ``ISO C'' throughout.
See @uref{http://www.iso.org/iso/home/about.htm, the ISO website} for more
information about the name of the organization and its language-independent
three-letter acronym.

@cindex Java programming language
@cindex programming languages, Java
@item Java
A modern programming language originally developed by Sun Microsystems
(now Oracle) supporting Object-Oriented programming.  Although usually
implemented by compiling to the instructions for a standard virtual
machine (the JVM), the language can be compiled to native code.

@item Keyword
In the @command{awk} language, a keyword is a word that has special
meaning.  Keywords are reserved and may not be used as variable names.

@command{gawk}'s keywords are:
@code{BEGIN},
@code{BEGINFILE},
@code{END},
@code{ENDFILE},
@code{break},
@code{case},
@code{continue},
@code{default}
@code{delete},
@code{do@dots{}while},
@code{else},
@code{exit},
@code{for@dots{}in},
@code{for},
@code{function},
@code{func},
@code{if},
@code{next},
@code{nextfile},
@code{switch},
and
@code{while}.

@item Korn Shell
The Korn Shell (@command{ksh}) is a Unix shell which was developed by David Korn at Bell
Laboratories in the early 1980s. The Korn Shell is backward-compatible with the Bourne
shell and includes many features of the C shell.
See also ``Bourne Shell.''

@cindex LGPL (Lesser General Public License)
@cindex Lesser General Public License (LGPL)
@cindex GNU Lesser General Public License
@item Lesser General Public License
This document describes the terms under which binary library archives
or shared objects,
and their source code may be distributed.

@item LGPL
See ``Lesser General Public License.''

@item Linux
See ``GNU/Linux.''

@item Localization
The process of providing the data necessary for an
internationalized program to work in a particular language.

@item Logical Expression
An expression using the operators for logic, AND, OR, and NOT, written
@samp{&&}, @samp{||}, and @samp{!} in @command{awk}. Often called Boolean
expressions, after the mathematician who pioneered this kind of
mathematical logic.

@item Lvalue
An expression that can appear on the left side of an assignment
operator.  In most languages, lvalues can be variables or array
elements.  In @command{awk}, a field designator can also be used as an
lvalue.

@item Matching
The act of testing a string against a regular expression.  If the
regexp describes the contents of the string, it is said to @dfn{match} it.

@item Metacharacters
Characters used within a regexp that do not stand for themselves.
Instead, they denote regular expression operations, such as repetition,
grouping, or alternation.

@item Nesting
Nesting is where information is organized in layers, or where objects
contain other similar objects.
In @command{gawk} the @code{@@include}
directive can be nested. The ``natural'' nesting of arithmetic and
logical operations can be changed using parentheses
(@pxref{Precedence}).

@item No-op
An operation that does nothing.

@item Null String
A string with no characters in it.  It is represented explicitly in
@command{awk} programs by placing two double quote characters next to
each other (@code{""}).  It can appear in input data by having two successive
occurrences of the field separator appear next to each other.

@item Number
A numeric-valued data object.  Modern @command{awk} implementations use
double precision floating-point to represent numbers.
Ancient @command{awk} implementations used single precision floating-point.

@item Octal
Base-eight notation, where the digits are @code{0}--@code{7}.
Octal numbers are written in C using a leading @samp{0},
to indicate their base.  Thus, @code{013} is 11 ((1 x 8) + 3).
@xref{Nondecimal-numbers}.

@item Output Record
A single chunk of data that is written out by @command{awk}.  Usually, an
@command{awk} output record consists of one or more lines of text.
@xref{Records}.

@item Pattern
Patterns tell @command{awk} which input records are interesting to which
rules.

A pattern is an arbitrary conditional expression against which input is
tested.  If the condition is satisfied, the pattern is said to @dfn{match}
the input record.  A typical pattern might compare the input record against
a regular expression. (@xref{Pattern Overview}.)

@item PEBKAC
An acronym describing what is possibly the most frequent
source of computer usage problems. (Problem Exists Between
Keyboard And Chair.)

@item Plug-in
See ``Extensions.''

@item POSIX
The name for a series of standards
that specify a Portable Operating System interface.  The ``IX'' denotes
the Unix heritage of these standards.  The main standard of interest for
@command{awk} users is
@cite{IEEE Standard for Information Technology, Standard 1003.1-2008}.
The 2008 POSIX standard can be found online at
@url{http://www.opengroup.org/onlinepubs/9699919799/}.

@item Precedence
The order in which operations are performed when operators are used
without explicit parentheses.

@item Private
Variables and/or functions that are meant for use exclusively by library
functions and not for the main @command{awk} program. Special care must be
taken when naming such variables and functions.
(@xref{Library Names}.)

@item Range (of input lines)
A sequence of consecutive lines from the input file(s).  A pattern
can specify ranges of input lines for @command{awk} to process or it can
specify single lines. (@xref{Pattern Overview}.)

@item Record
See ``Input record'' and ``Output record.''

@item Recursion
When a function calls itself, either directly or indirectly.
If this is clear, stop, and proceed to the next entry.
Otherwise, refer to the entry for ``recursion.''

@item Redirection
Redirection means performing input from something other than the standard input
stream, or performing output to something other than the standard output stream.

You can redirect input to the @code{getline} statement using
the @samp{<}, @samp{|}, and @samp{|&} operators.
You can redirect the output of the @code{print} and @code{printf} statements
to a file or a system command, using the @samp{>}, @samp{>>}, @samp{|}, and @samp{|&}
operators.
(@xref{Getline},
and @ref{Redirection}.)

@item Reference Counts
An internal mechanism in @command{gawk} to minimize the amount of memory
needed to store the value of string variables. If the value assumed by
a variable is used in more than one place, only one copy of the value
itself is kept, and the associated reference count is increased when the
same value is used by an additional variable, and decreased when the related
variable is no longer in use. When the reference count goes to zero,
the memory space used to store the value of the variable is freed.

@item Regexp
See ``Regular Expression.''

@item Regular Expression
A regular expression (``regexp'' for short) is a pattern that denotes a
set of strings, possibly an infinite set.  For example, the regular expression
@samp{R.*xp} matches any string starting with the letter @samp{R}
and ending with the letters @samp{xp}.  In @command{awk}, regular expressions are
used in patterns and in conditional expressions.  Regular expressions may contain
escape sequences. (@xref{Regexp}.)

@item Regular Expression Constant
A regular expression constant is a regular expression written within
slashes, such as @code{/foo/}.  This regular expression is chosen
when you write the @command{awk} program and cannot be changed during
its execution. (@xref{Regexp Usage}.)

@item Regular Expression Operators
See ``Metacharacters.''

@item Rounding
Rounding the result of an arithmetic operation can be tricky.
More than one way of rounding exists, and in @command{gawk}
it is possible to choose which method should be used in a program.
@xref{Setting the rounding mode}.

@item Rule
A segment of an @command{awk} program that specifies how to process single
input records.  A rule consists of a @dfn{pattern} and an @dfn{action}.
@command{awk} reads an input record; then, for each rule, if the input record
satisfies the rule's pattern, @command{awk} executes the rule's action.
Otherwise, the rule does nothing for that input record.

@item Rvalue
A value that can appear on the right side of an assignment operator.
In @command{awk}, essentially every expression has a value. These values
are rvalues.

@item Scalar
A single value, be it a number or a string.
Regular variables are scalars; arrays and functions are not.

@item Search Path
In @command{gawk}, a list of directories to search for @command{awk} program source files.
In the shell, a list of directories to search for executable programs.

@item @command{sed}
See ``Stream Editor.''

@item Seed
The initial value, or starting point, for a sequence of random numbers.

@item Shell
The command interpreter for Unix and POSIX-compliant systems.
The shell works both interactively, and as a programming language
for batch files, or shell scripts.

@item Short-Circuit
The nature of the @command{awk} logical operators @samp{&&} and @samp{||}.
If the value of the entire expression is determinable from evaluating just
the lefthand side of these operators, the righthand side is not
evaluated.
(@xref{Boolean Ops}.)

@item Side Effect
A side effect occurs when an expression has an effect aside from merely
producing a value.  Assignment expressions, increment and decrement
expressions, and function calls have side effects.
(@xref{Assignment Ops}.)

@item Single Precision
An internal representation of numbers that can have fractional parts.
Single precision numbers keep track of fewer digits than do double precision
numbers, but operations on them are sometimes less expensive in terms of CPU time.
This is the type used by some ancient versions of @command{awk} to store
numeric values.  It is the C type @code{float}.

@item Space
The character generated by hitting the space bar on the keyboard.

@item Special File
A @value{FN} interpreted internally by @command{gawk}, instead of being handed
directly to the underlying operating system---for example, @file{/dev/stderr}.
(@xref{Special Files}.)

@item Statement
An expression inside an @command{awk} program in the action part
of a pattern--action rule, or inside an
@command{awk} function. A statement can be a variable assignment,
an array operation, a loop, etc.

@item Stream Editor
A program that reads records from an input stream and processes them one
or more at a time.  This is in contrast with batch programs, which may
expect to read their input files in entirety before starting to do
anything, as well as with interactive programs which require input from the
user.

@item String
A datum consisting of a sequence of characters, such as @samp{I am a
string}.  Constant strings are written with double quotes in the
@command{awk} language and may contain escape sequences.
(@xref{Escape Sequences}.)

@item Tab
The character generated by hitting the @kbd{TAB} key on the keyboard.
It usually expands to up to eight spaces upon output.

@item Text Domain
A unique name that identifies an application.
Used for grouping messages that are translated at runtime
into the local language.

@item Timestamp
A value in the ``seconds since the epoch'' format used by Unix
and POSIX systems.  Used for the @command{gawk} functions
@code{mktime()}, @code{strftime()}, and @code{systime()}.
See also ``Epoch,'' ``GMT,'' and ``UTC.''

@cindex Linux
@cindex GNU/Linux
@cindex Unix
@cindex BSD-based operating systems
@cindex NetBSD
@cindex FreeBSD
@cindex OpenBSD
@item Unix
A computer operating system originally developed in the early 1970's at
AT&T Bell Laboratories.  It initially became popular in universities around
the world and later moved into commercial environments as a software
development system and network server system. There are many commercial
versions of Unix, as well as several work-alike systems whose source code
is freely available (such as GNU/Linux, @uref{http://www.netbsd.org, NetBSD},
@uref{http://www.freebsd.org, FreeBSD}, and @uref{http://www.openbsd.org, OpenBSD}).

@item UTC
The accepted abbreviation for ``Universal Coordinated Time.''
This is standard time in Greenwich, England, which is used as a
reference time for day and date calculations.
See also ``Epoch'' and ``GMT.''

@item Variable
A name for a value. In @command{awk}, variables may be either scalars
or arrays.

@item Whitespace
A sequence of space, TAB, or newline characters occurring inside an input
record or a string.

@end table

@end ifclear

@c The GNU General Public License.
@node Copying
@unnumbered GNU General Public License
@ifnotdocbook
@center Version 3, 29 June 2007
@end ifnotdocbook
@docbook
<subtitle>Version 3, 29 June 2007</subtitle>
@end docbook

@c This file is intended to be included within another document,
@c hence no sectioning command or @node.

@display
Copyright @copyright{} 2007 Free Software Foundation, Inc. @url{http://fsf.org/}

Everyone is permitted to copy and distribute verbatim copies of this
license document, but changing it is not allowed.
@end display

@c fakenode --- for prepinfo
@heading Preamble

The GNU General Public License is a free, copyleft license for
software and other kinds of works.

The licenses for most software and other practical works are designed
to take away your freedom to share and change the works.  By contrast,
the GNU General Public License is intended to guarantee your freedom
to share and change all versions of a program---to make sure it remains
free software for all its users.  We, the Free Software Foundation,
use the GNU General Public License for most of our software; it
applies also to any other work released this way by its authors.  You
can apply it to your programs, too.

When we speak of free software, we are referring to freedom, not
price.  Our General Public Licenses are designed to make sure that you
have the freedom to distribute copies of free software (and charge for
them if you wish), that you receive source code or can get it if you
want it, that you can change the software or use pieces of it in new
free programs, and that you know you can do these things.

To protect your rights, we need to prevent others from denying you
these rights or asking you to surrender the rights.  Therefore, you
have certain responsibilities if you distribute copies of the
software, or if you modify it: responsibilities to respect the freedom
of others.

For example, if you distribute copies of such a program, whether
gratis or for a fee, you must pass on to the recipients the same
freedoms that you received.  You must make sure that they, too,
receive or can get the source code.  And you must show them these
terms so they know their rights.

Developers that use the GNU GPL protect your rights with two steps:
(1) assert copyright on the software, and (2) offer you this License
giving you legal permission to copy, distribute and/or modify it.

For the developers' and authors' protection, the GPL clearly explains
that there is no warranty for this free software.  For both users' and
authors' sake, the GPL requires that modified versions be marked as
changed, so that their problems will not be attributed erroneously to
authors of previous versions.

Some devices are designed to deny users access to install or run
modified versions of the software inside them, although the
manufacturer can do so.  This is fundamentally incompatible with the
aim of protecting users' freedom to change the software.  The
systematic pattern of such abuse occurs in the area of products for
individuals to use, which is precisely where it is most unacceptable.
Therefore, we have designed this version of the GPL to prohibit the
practice for those products.  If such problems arise substantially in
other domains, we stand ready to extend this provision to those
domains in future versions of the GPL, as needed to protect the
freedom of users.

Finally, every program is threatened constantly by software patents.
States should not allow patents to restrict development and use of
software on general-purpose computers, but in those that do, we wish
to avoid the special danger that patents applied to a free program
could make it effectively proprietary.  To prevent this, the GPL
assures that patents cannot be used to render the program non-free.

The precise terms and conditions for copying, distribution and
modification follow.

@c fakenode --- for prepinfo
@heading TERMS AND CONDITIONS

@enumerate 0
@item Definitions.

``This License'' refers to version 3 of the GNU General Public License.

``Copyright'' also means copyright-like laws that apply to other kinds
of works, such as semiconductor masks.

``The Program'' refers to any copyrightable work licensed under this
License.  Each licensee is addressed as ``you''.  ``Licensees'' and
``recipients'' may be individuals or organizations.

To ``modify'' a work means to copy from or adapt all or part of the work
in a fashion requiring copyright permission, other than the making of
an exact copy.  The resulting work is called a ``modified version'' of
the earlier work or a work ``based on'' the earlier work.

A ``covered work'' means either the unmodified Program or a work based
on the Program.

To ``propagate'' a work means to do anything with it that, without
permission, would make you directly or secondarily liable for
infringement under applicable copyright law, except executing it on a
computer or modifying a private copy.  Propagation includes copying,
distribution (with or without modification), making available to the
public, and in some countries other activities as well.

To ``convey'' a work means any kind of propagation that enables other
parties to make or receive copies.  Mere interaction with a user
through a computer network, with no transfer of a copy, is not
conveying.

An interactive user interface displays ``Appropriate Legal Notices'' to
the extent that it includes a convenient and prominently visible
feature that (1) displays an appropriate copyright notice, and (2)
tells the user that there is no warranty for the work (except to the
extent that warranties are provided), that licensees may convey the
work under this License, and how to view a copy of this License.  If
the interface presents a list of user commands or options, such as a
menu, a prominent item in the list meets this criterion.

@item Source Code.

The ``source code'' for a work means the preferred form of the work for
making modifications to it.  ``Object code'' means any non-source form
of a work.

A ``Standard Interface'' means an interface that either is an official
standard defined by a recognized standards body, or, in the case of
interfaces specified for a particular programming language, one that
is widely used among developers working in that language.

The ``System Libraries'' of an executable work include anything, other
than the work as a whole, that (a) is included in the normal form of
packaging a Major Component, but which is not part of that Major
Component, and (b) serves only to enable use of the work with that
Major Component, or to implement a Standard Interface for which an
implementation is available to the public in source code form.  A
``Major Component'', in this context, means a major essential component
(kernel, window system, and so on) of the specific operating system
(if any) on which the executable work runs, or a compiler used to
produce the work, or an object code interpreter used to run it.

The ``Corresponding Source'' for a work in object code form means all
the source code needed to generate, install, and (for an executable
work) run the object code and to modify the work, including scripts to
control those activities.  However, it does not include the work's
System Libraries, or general-purpose tools or generally available free
programs which are used unmodified in performing those activities but
which are not part of the work.  For example, Corresponding Source
includes interface definition files associated with source files for
the work, and the source code for shared libraries and dynamically
linked subprograms that the work is specifically designed to require,
such as by intimate data communication or control flow between those
subprograms and other parts of the work.

The Corresponding Source need not include anything that users can
regenerate automatically from other parts of the Corresponding Source.

The Corresponding Source for a work in source code form is that same
work.

@item Basic Permissions.

All rights granted under this License are granted for the term of
copyright on the Program, and are irrevocable provided the stated
conditions are met.  This License explicitly affirms your unlimited
permission to run the unmodified Program.  The output from running a
covered work is covered by this License only if the output, given its
content, constitutes a covered work.  This License acknowledges your
rights of fair use or other equivalent, as provided by copyright law.

You may make, run and propagate covered works that you do not convey,
without conditions so long as your license otherwise remains in force.
You may convey covered works to others for the sole purpose of having
them make modifications exclusively for you, or provide you with
facilities for running those works, provided that you comply with the
terms of this License in conveying all material for which you do not
control copyright.  Those thus making or running the covered works for
you must do so exclusively on your behalf, under your direction and
control, on terms that prohibit them from making any copies of your
copyrighted material outside their relationship with you.

Conveying under any other circumstances is permitted solely under the
conditions stated below.  Sublicensing is not allowed; section 10
makes it unnecessary.

@item Protecting Users' Legal Rights From Anti-Circumvention Law.

No covered work shall be deemed part of an effective technological
measure under any applicable law fulfilling obligations under article
11 of the WIPO copyright treaty adopted on 20 December 1996, or
similar laws prohibiting or restricting circumvention of such
measures.

When you convey a covered work, you waive any legal power to forbid
circumvention of technological measures to the extent such
circumvention is effected by exercising rights under this License with
respect to the covered work, and you disclaim any intention to limit
operation or modification of the work as a means of enforcing, against
the work's users, your or third parties' legal rights to forbid
circumvention of technological measures.

@item Conveying Verbatim Copies.

You may convey verbatim copies of the Program's source code as you
receive it, in any medium, provided that you conspicuously and
appropriately publish on each copy an appropriate copyright notice;
keep intact all notices stating that this License and any
non-permissive terms added in accord with section 7 apply to the code;
keep intact all notices of the absence of any warranty; and give all
recipients a copy of this License along with the Program.

You may charge any price or no price for each copy that you convey,
and you may offer support or warranty protection for a fee.

@item Conveying Modified Source Versions.

You may convey a work based on the Program, or the modifications to
produce it from the Program, in the form of source code under the
terms of section 4, provided that you also meet all of these
conditions:

@enumerate a
@item
The work must carry prominent notices stating that you modified it,
and giving a relevant date.

@item
The work must carry prominent notices stating that it is released
under this License and any conditions added under section 7.  This
requirement modifies the requirement in section 4 to ``keep intact all
notices''.

@item
You must license the entire work, as a whole, under this License to
anyone who comes into possession of a copy.  This License will
therefore apply, along with any applicable section 7 additional terms,
to the whole of the work, and all its parts, regardless of how they
are packaged.  This License gives no permission to license the work in
any other way, but it does not invalidate such permission if you have
separately received it.

@item
If the work has interactive user interfaces, each must display
Appropriate Legal Notices; however, if the Program has interactive
interfaces that do not display Appropriate Legal Notices, your work
need not make them do so.
@end enumerate

A compilation of a covered work with other separate and independent
works, which are not by their nature extensions of the covered work,
and which are not combined with it such as to form a larger program,
in or on a volume of a storage or distribution medium, is called an
``aggregate'' if the compilation and its resulting copyright are not
used to limit the access or legal rights of the compilation's users
beyond what the individual works permit.  Inclusion of a covered work
in an aggregate does not cause this License to apply to the other
parts of the aggregate.

@item  Conveying Non-Source Forms.

You may convey a covered work in object code form under the terms of
sections 4 and 5, provided that you also convey the machine-readable
Corresponding Source under the terms of this License, in one of these
ways:

@enumerate a
@item
Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by the
Corresponding Source fixed on a durable physical medium customarily
used for software interchange.

@item
Convey the object code in, or embodied in, a physical product
(including a physical distribution medium), accompanied by a written
offer, valid for at least three years and valid for as long as you
offer spare parts or customer support for that product model, to give
anyone who possesses the object code either (1) a copy of the
Corresponding Source for all the software in the product that is
covered by this License, on a durable physical medium customarily used
for software interchange, for a price no more than your reasonable
cost of physically performing this conveying of source, or (2) access
to copy the Corresponding Source from a network server at no charge.

@item
Convey individual copies of the object code with a copy of the written
offer to provide the Corresponding Source.  This alternative is
allowed only occasionally and noncommercially, and only if you
received the object code with such an offer, in accord with subsection
6b.

@item
Convey the object code by offering access from a designated place
(gratis or for a charge), and offer equivalent access to the
Corresponding Source in the same way through the same place at no
further charge.  You need not require recipients to copy the
Corresponding Source along with the object code.  If the place to copy
the object code is a network server, the Corresponding Source may be
on a different server (operated by you or a third party) that supports
equivalent copying facilities, provided you maintain clear directions
next to the object code saying where to find the Corresponding Source.
Regardless of what server hosts the Corresponding Source, you remain
obligated to ensure that it is available for as long as needed to
satisfy these requirements.

@item
Convey the object code using peer-to-peer transmission, provided you
inform other peers where the object code and Corresponding Source of
the work are being offered to the general public at no charge under
subsection 6d.

@end enumerate

A separable portion of the object code, whose source code is excluded
from the Corresponding Source as a System Library, need not be
included in conveying the object code work.

A ``User Product'' is either (1) a ``consumer product'', which means any
tangible personal property which is normally used for personal,
family, or household purposes, or (2) anything designed or sold for
incorporation into a dwelling.  In determining whether a product is a
consumer product, doubtful cases shall be resolved in favor of
coverage.  For a particular product received by a particular user,
``normally used'' refers to a typical or common use of that class of
product, regardless of the status of the particular user or of the way
in which the particular user actually uses, or expects or is expected
to use, the product.  A product is a consumer product regardless of
whether the product has substantial commercial, industrial or
non-consumer uses, unless such uses represent the only significant
mode of use of the product.

``Installation Information'' for a User Product means any methods,
procedures, authorization keys, or other information required to
install and execute modified versions of a covered work in that User
Product from a modified version of its Corresponding Source.  The
information must suffice to ensure that the continued functioning of
the modified object code is in no case prevented or interfered with
solely because modification has been made.

If you convey an object code work under this section in, or with, or
specifically for use in, a User Product, and the conveying occurs as
part of a transaction in which the right of possession and use of the
User Product is transferred to the recipient in perpetuity or for a
fixed term (regardless of how the transaction is characterized), the
Corresponding Source conveyed under this section must be accompanied
by the Installation Information.  But this requirement does not apply
if neither you nor any third party retains the ability to install
modified object code on the User Product (for example, the work has
been installed in ROM).

The requirement to provide Installation Information does not include a
requirement to continue to provide support service, warranty, or
updates for a work that has been modified or installed by the
recipient, or for the User Product in which it has been modified or
installed.  Access to a network may be denied when the modification
itself materially and adversely affects the operation of the network
or violates the rules and protocols for communication across the
network.

Corresponding Source conveyed, and Installation Information provided,
in accord with this section must be in a format that is publicly
documented (and with an implementation available to the public in
source code form), and must require no special password or key for
unpacking, reading or copying.

@item Additional Terms.

``Additional permissions'' are terms that supplement the terms of this
License by making exceptions from one or more of its conditions.
Additional permissions that are applicable to the entire Program shall
be treated as though they were included in this License, to the extent
that they are valid under applicable law.  If additional permissions
apply only to part of the Program, that part may be used separately
under those permissions, but the entire Program remains governed by
this License without regard to the additional permissions.

When you convey a copy of a covered work, you may at your option
remove any additional permissions from that copy, or from any part of
it.  (Additional permissions may be written to require their own
removal in certain cases when you modify the work.)  You may place
additional permissions on material, added by you to a covered work,
for which you have or can give appropriate copyright permission.

Notwithstanding any other provision of this License, for material you
add to a covered work, you may (if authorized by the copyright holders
of that material) supplement the terms of this License with terms:

@enumerate a
@item
Disclaiming warranty or limiting liability differently from the terms
of sections 15 and 16 of this License; or

@item
Requiring preservation of specified reasonable legal notices or author
attributions in that material or in the Appropriate Legal Notices
displayed by works containing it; or

@item
Prohibiting misrepresentation of the origin of that material, or
requiring that modified versions of such material be marked in
reasonable ways as different from the original version; or

@item
Limiting the use for publicity purposes of names of licensors or
authors of the material; or

@item
Declining to grant rights under trademark law for use of some trade
names, trademarks, or service marks; or

@item
Requiring indemnification of licensors and authors of that material by
anyone who conveys the material (or modified versions of it) with
contractual assumptions of liability to the recipient, for any
liability that these contractual assumptions directly impose on those
licensors and authors.
@end enumerate

All other non-permissive additional terms are considered ``further
restrictions'' within the meaning of section 10.  If the Program as you
received it, or any part of it, contains a notice stating that it is
governed by this License along with a term that is a further
restriction, you may remove that term.  If a license document contains
a further restriction but permits relicensing or conveying under this
License, you may add to a covered work material governed by the terms
of that license document, provided that the further restriction does
not survive such relicensing or conveying.

If you add terms to a covered work in accord with this section, you
must place, in the relevant source files, a statement of the
additional terms that apply to those files, or a notice indicating
where to find the applicable terms.

Additional terms, permissive or non-permissive, may be stated in the
form of a separately written license, or stated as exceptions; the
above requirements apply either way.

@item Termination.

You may not propagate or modify a covered work except as expressly
provided under this License.  Any attempt otherwise to propagate or
modify it is void, and will automatically terminate your rights under
this License (including any patent licenses granted under the third
paragraph of section 11).

However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, you do not qualify to receive new licenses for the same
material under section 10.

@item Acceptance Not Required for Having Copies.

You are not required to accept this License in order to receive or run
a copy of the Program.  Ancillary propagation of a covered work
occurring solely as a consequence of using peer-to-peer transmission
to receive a copy likewise does not require acceptance.  However,
nothing other than this License grants you permission to propagate or
modify any covered work.  These actions infringe copyright if you do
not accept this License.  Therefore, by modifying or propagating a
covered work, you indicate your acceptance of this License to do so.

@item Automatic Licensing of Downstream Recipients.

Each time you convey a covered work, the recipient automatically
receives a license from the original licensors, to run, modify and
propagate that work, subject to this License.  You are not responsible
for enforcing compliance by third parties with this License.

An ``entity transaction'' is a transaction transferring control of an
organization, or substantially all assets of one, or subdividing an
organization, or merging organizations.  If propagation of a covered
work results from an entity transaction, each party to that
transaction who receives a copy of the work also receives whatever
licenses to the work the party's predecessor in interest had or could
give under the previous paragraph, plus a right to possession of the
Corresponding Source of the work from the predecessor in interest, if
the predecessor has it or can get it with reasonable efforts.

You may not impose any further restrictions on the exercise of the
rights granted or affirmed under this License.  For example, you may
not impose a license fee, royalty, or other charge for exercise of
rights granted under this License, and you may not initiate litigation
(including a cross-claim or counterclaim in a lawsuit) alleging that
any patent claim is infringed by making, using, selling, offering for
sale, or importing the Program or any portion of it.

@item Patents.

A ``contributor'' is a copyright holder who authorizes use under this
License of the Program or a work on which the Program is based.  The
work thus licensed is called the contributor's ``contributor version''.

A contributor's ``essential patent claims'' are all patent claims owned
or controlled by the contributor, whether already acquired or
hereafter acquired, that would be infringed by some manner, permitted
by this License, of making, using, or selling its contributor version,
but do not include claims that would be infringed only as a
consequence of further modification of the contributor version.  For
purposes of this definition, ``control'' includes the right to grant
patent sublicenses in a manner consistent with the requirements of
this License.

Each contributor grants you a non-exclusive, worldwide, royalty-free
patent license under the contributor's essential patent claims, to
make, use, sell, offer for sale, import and otherwise run, modify and
propagate the contents of its contributor version.

In the following three paragraphs, a ``patent license'' is any express
agreement or commitment, however denominated, not to enforce a patent
(such as an express permission to practice a patent or covenant not to
sue for patent infringement).  To ``grant'' such a patent license to a
party means to make such an agreement or commitment not to enforce a
patent against the party.

If you convey a covered work, knowingly relying on a patent license,
and the Corresponding Source of the work is not available for anyone
to copy, free of charge and under the terms of this License, through a
publicly available network server or other readily accessible means,
then you must either (1) cause the Corresponding Source to be so
available, or (2) arrange to deprive yourself of the benefit of the
patent license for this particular work, or (3) arrange, in a manner
consistent with the requirements of this License, to extend the patent
license to downstream recipients.  ``Knowingly relying'' means you have
actual knowledge that, but for the patent license, your conveying the
covered work in a country, or your recipient's use of the covered work
in a country, would infringe one or more identifiable patents in that
country that you have reason to believe are valid.

If, pursuant to or in connection with a single transaction or
arrangement, you convey, or propagate by procuring conveyance of, a
covered work, and grant a patent license to some of the parties
receiving the covered work authorizing them to use, propagate, modify
or convey a specific copy of the covered work, then the patent license
you grant is automatically extended to all recipients of the covered
work and works based on it.

A patent license is ``discriminatory'' if it does not include within the
scope of its coverage, prohibits the exercise of, or is conditioned on
the non-exercise of one or more of the rights that are specifically
granted under this License.  You may not convey a covered work if you
are a party to an arrangement with a third party that is in the
business of distributing software, under which you make payment to the
third party based on the extent of your activity of conveying the
work, and under which the third party grants, to any of the parties
who would receive the covered work from you, a discriminatory patent
license (a) in connection with copies of the covered work conveyed by
you (or copies made from those copies), or (b) primarily for and in
connection with specific products or compilations that contain the
covered work, unless you entered into that arrangement, or that patent
license was granted, prior to 28 March 2007.

Nothing in this License shall be construed as excluding or limiting
any implied license or other defenses to infringement that may
otherwise be available to you under applicable patent law.

@item No Surrender of Others' Freedom.

If conditions are imposed on you (whether by court order, agreement or
otherwise) that contradict the conditions of this License, they do not
excuse you from the conditions of this License.  If you cannot convey
a covered work so as to satisfy simultaneously your obligations under
this License and any other pertinent obligations, then as a
consequence you may not convey it at all.  For example, if you agree
to terms that obligate you to collect a royalty for further conveying
from those to whom you convey the Program, the only way you could
satisfy both those terms and this License would be to refrain entirely
from conveying the Program.

@item Use with the GNU Affero General Public License.

Notwithstanding any other provision of this License, you have
permission to link or combine any covered work with a work licensed
under version 3 of the GNU Affero General Public License into a single
combined work, and to convey the resulting work.  The terms of this
License will continue to apply to the part which is the covered work,
but the special requirements of the GNU Affero General Public License,
section 13, concerning interaction through a network will apply to the
combination as such.

@item Revised Versions of this License.

The Free Software Foundation may publish revised and/or new versions
of the GNU General Public License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.

Each version is given a distinguishing version number.  If the Program
specifies that a certain numbered version of the GNU General Public
License ``or any later version'' applies to it, you have the option of
following the terms and conditions either of that numbered version or
of any later version published by the Free Software Foundation.  If
the Program does not specify a version number of the GNU General
Public License, you may choose any version ever published by the Free
Software Foundation.

If the Program specifies that a proxy can decide which future versions
of the GNU General Public License can be used, that proxy's public
statement of acceptance of a version permanently authorizes you to
choose that version for the Program.

Later license versions may give you additional or different
permissions.  However, no additional obligations are imposed on any
author or copyright holder as a result of your choosing to follow a
later version.

@item Disclaimer of Warranty.

THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY
APPLICABLE LAW.  EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT
HOLDERS AND/OR OTHER PARTIES PROVIDE THE PROGRAM ``AS IS'' WITHOUT
WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE.  THE ENTIRE RISK AS TO THE QUALITY AND
PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE PROGRAM PROVE
DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR OR
CORRECTION.

@item Limitation of Liability.

IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
WILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR
CONVEYS THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES
ARISING OUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT
NOT LIMITED TO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR
LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM
TO OPERATE WITH ANY OTHER PROGRAMS), EVEN IF SUCH HOLDER OR OTHER
PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.

@item Interpretation of Sections 15 and 16.

If the disclaimer of warranty and limitation of liability provided
above cannot be given local legal effect according to their terms,
reviewing courts shall apply local law that most closely approximates
an absolute waiver of all civil liability in connection with the
Program, unless a warranty or assumption of liability accompanies a
copy of the Program in return for a fee.

@end enumerate

@c fakenode --- for prepinfo
@heading END OF TERMS AND CONDITIONS

@c fakenode --- for prepinfo
@heading How to Apply These Terms to Your New Programs

If you develop a new program, and you want it to be of the greatest
possible use to the public, the best way to achieve this is to make it
free software which everyone can redistribute and change under these
terms.

To do so, attach the following notices to the program.  It is safest
to attach them to the start of each source file to most effectively
state the exclusion of warranty; and each file should have at least
the ``copyright'' line and a pointer to where the full notice is found.

@smallexample
@var{one line to give the program's name and a brief idea of what it does.}
Copyright (C) @var{year} @var{name of author}

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at
your option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see @url{http://www.gnu.org/licenses/}.
@end smallexample

Also add information on how to contact you by electronic and paper mail.

If the program does terminal interaction, make it output a short
notice like this when it starts in an interactive mode:

@smallexample
@var{program} Copyright (C) @var{year} @var{name of author}
This program comes with ABSOLUTELY NO WARRANTY; for details type @samp{show w}.
This is free software, and you are welcome to redistribute it
under certain conditions; type @samp{show c} for details.
@end smallexample

The hypothetical commands @samp{show w} and @samp{show c} should show
the appropriate parts of the General Public License.  Of course, your
program's commands might be different; for a GUI interface, you would
use an ``about box''.

You should also get your employer (if you work as a programmer) or school,
if any, to sign a ``copyright disclaimer'' for the program, if necessary.
For more information on this, and how to apply and follow the GNU GPL, see
@url{http://www.gnu.org/licenses/}.

The GNU General Public License does not permit incorporating your
program into proprietary programs.  If your program is a subroutine
library, you may consider it more useful to permit linking proprietary
applications with the library.  If this is what you want to do, use
the GNU Lesser General Public License instead of this License.  But
first, please read @url{http://www.gnu.org/philosophy/why-not-lgpl.html}.

@ifclear FOR_PRINT
@c The GNU Free Documentation License.
@node GNU Free Documentation License
@unnumbered GNU Free Documentation License
@ifnotdocbook
@center Version 1.3, 3 November 2008
@end ifnotdocbook

@docbook
<subtitle>Version 1.3, 3 November 2008</subtitle>
@end docbook

@cindex FDL (Free Documentation License)
@cindex Free Documentation License (FDL)
@cindex GNU Free Documentation License

@c This file is intended to be included within another document,
@c hence no sectioning command or @node.

@display
Copyright @copyright{} 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
@uref{http://fsf.org/}

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
@end display

@enumerate 0
@item
PREAMBLE

The purpose of this License is to make a manual, textbook, or other
functional and useful document @dfn{free} in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or noncommercially.
Secondarily, this License preserves for the author and publisher a way
to get credit for their work, while not being considered responsible
for modifications made by others.

This License is a kind of ``copyleft'', which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.

We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.

@item
APPLICABILITY AND DEFINITIONS

This License applies to any manual or other work, in any medium, that
contains a notice placed by the copyright holder saying it can be
distributed under the terms of this License.  Such a notice grants a
world-wide, royalty-free license, unlimited in duration, to use that
work under the conditions stated herein.  The ``Document'', below,
refers to any such manual or work.  Any member of the public is a
licensee, and is addressed as ``you''.  You accept the license if you
copy, modify or distribute the work in a way requiring permission
under copyright law.

A ``Modified Version'' of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.

A ``Secondary Section'' is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could fall
directly within that overall subject.  (Thus, if the Document is in
part a textbook of mathematics, a Secondary Section may not explain
any mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.

The ``Invariant Sections'' are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.  If a
section does not fit the above definition of Secondary then it is not
allowed to be designated as Invariant.  The Document may contain zero
Invariant Sections.  If the Document does not identify any Invariant
Sections then there are none.

The ``Cover Texts'' are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.  A Front-Cover Text may
be at most 5 words, and a Back-Cover Text may be at most 25 words.

A ``Transparent'' copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup, or absence of markup, has been arranged to thwart
or discourage subsequent modification by readers is not Transparent.
An image format is not Transparent if used for any substantial amount
of text.  A copy that is not ``Transparent'' is called ``Opaque''.

Examples of suitable formats for Transparent copies include plain
@sc{ascii} without markup, Texinfo input format, La@TeX{} input
format, @acronym{SGML} or @acronym{XML} using a publicly available
@acronym{DTD}, and standard-conforming simple @acronym{HTML},
PostScript or @acronym{PDF} designed for human modification.  Examples
of transparent image formats include @acronym{PNG}, @acronym{XCF} and
@acronym{JPG}.  Opaque formats include proprietary formats that can be
read and edited only by proprietary word processors, @acronym{SGML} or
@acronym{XML} for which the @acronym{DTD} and/or processing tools are
not generally available, and the machine-generated @acronym{HTML},
PostScript or @acronym{PDF} produced by some word processors for
output purposes only.

The ``Title Page'' means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, ``Title Page'' means
the text near the most prominent appearance of the work's title,
preceding the beginning of the body of the text.

The ``publisher'' means any person or entity that distributes copies
of the Document to the public.

A section ``Entitled XYZ'' means a named subunit of the Document whose
title either is precisely XYZ or contains XYZ in parentheses following
text that translates XYZ in another language.  (Here XYZ stands for a
specific section name mentioned below, such as ``Acknowledgements'',
``Dedications'', ``Endorsements'', or ``History''.)  To ``Preserve the Title''
of such a section when you modify the Document means that it remains a
section ``Entitled XYZ'' according to this definition.

The Document may include Warranty Disclaimers next to the notice which
states that this License applies to the Document.  These Warranty
Disclaimers are considered to be included by reference in this
License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and has
no effect on the meaning of this License.

@item
VERBATIM COPYING

You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.

You may also lend copies, under the same conditions stated above, and
you may publicly display copies.

@item
COPYING IN QUANTITY

If you publish printed copies (or copies in media that commonly have
printed covers) of the Document, numbering more than 100, and the
Document's license notice requires Cover Texts, you must enclose the
copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.

If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.

If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a computer-network location from which the general network-using
public has access to download using public-standard network protocols
a complete Transparent copy of the Document, free of added material.
If you use the latter option, you must take reasonably prudent steps,
when you begin distribution of Opaque copies in quantity, to ensure
that this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you distribute an
Opaque copy (directly or through your agents or retailers) of that
edition to the public.

It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.

@item
MODIFICATIONS

You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:

@enumerate A
@item
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

@item
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has fewer than five),
unless they release you from this requirement.

@item
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

@item
Preserve all the copyright notices of the Document.

@item
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

@item
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

@item
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document's license notice.

@item
Include an unaltered copy of this License.

@item
Preserve the section Entitled ``History'', Preserve its Title, and add
to it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section Entitled ``History'' in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

@item
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the ``History'' section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

@item
For any section Entitled ``Acknowledgements'' or ``Dedications'', Preserve
the Title of the section, and preserve in the section all the
substance and tone of each of the contributor acknowledgements and/or
dedications given therein.

@item
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

@item
Delete any section Entitled ``Endorsements''.  Such a section
may not be included in the Modified Version.

@item
Do not retitle any existing section to be Entitled ``Endorsements'' or
to conflict in title with any Invariant Section.

@item
Preserve any Warranty Disclaimers.
@end enumerate

If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version's license notice.
These titles must be distinct from any other section titles.

You may add a section Entitled ``Endorsements'', provided it contains
nothing but endorsements of your Modified Version by various
parties---for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.

You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.

The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.

@item
COMBINING DOCUMENTS

You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice, and that you preserve all their Warranty Disclaimers.

The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.

In the combination, you must combine any sections Entitled ``History''
in the various original documents, forming one section Entitled
``History''; likewise combine any sections Entitled ``Acknowledgements'',
and any sections Entitled ``Dedications''.  You must delete all
sections Entitled ``Endorsements.''

@item
COLLECTIONS OF DOCUMENTS

You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.

You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.

@item
AGGREGATION WITH INDEPENDENT WORKS

A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, is called an ``aggregate'' if the copyright
resulting from the compilation is not used to limit the legal rights
of the compilation's users beyond what the individual works permit.
When the Document is included in an aggregate, this License does not
apply to the other works in the aggregate which are not themselves
derivative works of the Document.

If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half of
the entire aggregate, the Document's Cover Texts may be placed on
covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic form.
Otherwise they must appear on printed covers that bracket the whole
aggregate.

@item
TRANSLATION

Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also include
the original English version of this License and the original versions
of those notices and disclaimers.  In case of a disagreement between
the translation and the original version of this License or a notice
or disclaimer, the original version will prevail.

If a section in the Document is Entitled ``Acknowledgements'',
``Dedications'', or ``History'', the requirement (section 4) to Preserve
its Title (section 1) will typically require changing the actual
title.

@item
TERMINATION

You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void, and
will automatically terminate your rights under this License.

However, if you cease all violation of this License, then your license
from a particular copyright holder is reinstated (a) provisionally,
unless and until the copyright holder explicitly and finally
terminates your license, and (b) permanently, if the copyright holder
fails to notify you of the violation by some reasonable means prior to
60 days after the cessation.

Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from that
copyright holder, and you cure the violation prior to 30 days after
your receipt of the notice.

Termination of your rights under this section does not terminate the
licenses of parties who have received copies or rights from you under
this License.  If your rights have been terminated and not permanently
reinstated, receipt of a copy of some or all of the same material does
not give you any rights to use it.

@item
FUTURE REVISIONS OF THIS LICENSE

The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
@uref{http://www.gnu.org/copyleft/}.

Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License ``or any later version'' applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.  If the Document
specifies that a proxy can decide which future versions of this
License can be used, that proxy's public statement of acceptance of a
version permanently authorizes you to choose that version for the
Document.

@item
RELICENSING

``Massive Multiauthor Collaboration Site'' (or ``MMC Site'') means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.  A
``Massive Multiauthor Collaboration'' (or ``MMC'') contained in the
site means any set of copyrightable works thus published on the MMC
site.

``CC-BY-SA'' means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.

``Incorporate'' means to publish or republish a Document, in whole or
in part, as part of another Document.

An MMC is ``eligible for relicensing'' if it is licensed under this
License, and if all works that were first published under this License
somewhere other than this MMC, and subsequently incorporated in whole
or in part into the MMC, (1) had no cover texts or invariant sections,
and (2) were thus incorporated prior to November 1, 2008.

The operator of an MMC Site may republish an MMC contained in the site
under CC-BY-SA on the same site at any time before August 1, 2009,
provided the MMC is eligible for relicensing.

@end enumerate

@c fakenode --- for prepinfo
@unnumberedsec ADDENDUM: How to use this License for your documents

To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:

@smallexample
@group
  Copyright (C)  @var{year}  @var{your name}.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.3
  or any later version published by the Free Software Foundation;
  with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
  Texts.  A copy of the license is included in the section entitled ``GNU
  Free Documentation License''.
@end group
@end smallexample

If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
replace the ``with@dots{}Texts.'' line with this:

@smallexample
@group
    with the Invariant Sections being @var{list their titles}, with
    the Front-Cover Texts being @var{list}, and with the Back-Cover Texts
    being @var{list}.
@end group
@end smallexample

If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.

If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.

@end ifclear

@ifnotdocbook
@node Index
@unnumbered Index
@end ifnotdocbook
@printindex cp

@bye

Unresolved Issues:
------------------
1. From ADR.

   Robert J. Chassell points out that awk programs should have some indication
   of how to use them.  It would be useful to perhaps have a "programming
   style" section of the manual that would include this and other tips.

Consistency issues:
	/.../ regexps are in @code, not @samp
	".." strings are in @code, not @samp
	no @print before @dots
	values of expressions in the text (@code{x} has the value 15),
		should be in roman, not @code
	Use   TAB   and not   tab
	Use   ESC   and not   ESCAPE
	Use   space and not   blank	to describe the space bar's character
	The term "blank" is thus basically reserved for "blank lines" etc.
	To make dark corners work, the @value{DARKCORNER} has to be outside
		closing `.' of a sentence and after (pxref{...}).
	" " should have an @w{} around it
	Use "non-" only with language names or acronyms, or the words bug and option and null
	Use @command{ftp} when talking about anonymous ftp
	Use uppercase and lowercase, not "upper-case" and "lower-case"
		or "upper case" and "lower case"
	Use "single precision" and "double precision", not "single-precision" or "double-precision"
	Use alphanumeric, not alpha-numeric
	Use POSIX-compliant, not POSIX compliant
	Use --foo, not -Wfoo when describing long options
	Use "Bell Laboratories", but not "Bell Labs".
	Use "behavior" instead of "behaviour".
	Use "coprocess" instead of "co-process".
	Use "zeros" instead of "zeroes".
	Use "nonzero" not "non-zero".
	Use "runtime" not "run time" or "run-time".
	Use "command-line" as an adjective and "command line" as a noun.
	Use "online" not "on-line".
	Use "whitespace" not "white space".
	Use "Input/Output", not "input/output". Also "I/O", not "i/o".
	Use "lefthand"/"righthand", not "left-hand"/"right-hand".
	Use "workaround", not "work-around".
	Use "startup"/"cleanup", not "start-up"/"clean-up"
	Use "filesystem", not "file system"
	Use @code{do}, and not @code{do}-@code{while}, except where
		actually discussing the do-while.
	Use "versus" in text and "vs." in index entries
	Use @code{"C"} for the C locale, not ``C'' or @samp{C}.
	The words "a", "and", "as", "between", "for", "from", "in", "of",
		"on", "that", "the", "to", "with", and "without",
		should not be capitalized in @chapter, @section etc.
		"Into" and "How" should.
	Search for @dfn; make sure important items are also indexed.
	"e.g." should always be followed by a comma.
	"i.e." should always be followed by a comma.
	The numbers zero through ten should be spelled out, except when
		talking about file descriptor numbers. > 10 and < 0, it's
		ok to use numbers.
	For most cases, do NOT put a comma before "and", "or" or "but".
		But exercise taste with this rule.
	Don't show the awk command with a program in quotes when it's
		just the program.  I.e.

			{
				....
			}

		not
			awk '{
				...
			}'

	Do show it when showing command-line arguments, data files, etc, even
		if there is no output shown.

	Use numbered lists only to show a sequential series of steps.

	Use @code{xxx} for the xxx operator in indexing statements, not @samp.
	Use MS-Windows not MS Windows
	Use MS-DOS not MS-DOS
	Use an empty set of parentheses after built-in and awk function names.
	Use "multiFOO" without a hyphen.

Date: Wed, 13 Apr 94 15:20:52 -0400
From: rms@gnu.org (Richard Stallman)
To: gnu-prog@gnu.org
Subject: A reminder: no pathnames in GNU

It's a GNU convention to use the term "file name" for the name of a
file, never "pathname".  We use the term "path" for search paths,
which are lists of file names.  Using it for a single file name as
well is potentially confusing to users.

So please check any documentation you maintain, if you think you might
have used "pathname".

Note that "file name" should be two words when it appears as ordinary
text.  It's ok as one word when it's a metasyntactic variable, though.

------------------------
ORA uses filename, thus the macro.

Suggestions:
------------

Better sidebars can almost sort of be done with:

	@ifdocbook
	@macro @sidebar{title, content}
	@inlinefmt{docbook, <sidebar><title>}
	\title\
	@inlinefmt{docbook, </title>}
	\content\
	@inlinefmt{docbook, </sidebar>}
	@end macro
	@end ifdocbook


	@ifnotdocbook
	@macro @sidebar{title, content}
	@cartouche
	@center @b{\title\}

	\content\
	@end cartouche
	@end macro
	@end ifnotdocbook

But to use it you have to say

	@sidebar{Title Here,
	@include file-with-content
	}

which sorta sucks.

TODO:
Check that all dark corners are indexed properly.
